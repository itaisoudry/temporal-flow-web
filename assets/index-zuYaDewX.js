import{r as N,a as f0,g as Zd,R as ne,c as Mr,t as Cm}from"./vendor-DBEsKlBz.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(a){if(a.ep)return;a.ep=!0;const u=n(a);fetch(a.href,u)}})();var d0={exports:{}},Kc={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yE=N,vE=Symbol.for("react.element"),wE=Symbol.for("react.fragment"),xE=Object.prototype.hasOwnProperty,bE=yE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_E={key:!0,ref:!0,__self:!0,__source:!0};function h0(e,t,n){var i,a={},u=null,c=null;n!==void 0&&(u=""+n),t.key!==void 0&&(u=""+t.key),t.ref!==void 0&&(c=t.ref);for(i in t)xE.call(t,i)&&!_E.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)a[i]===void 0&&(a[i]=t[i]);return{$$typeof:vE,type:e,key:u,ref:c,props:a,_owner:bE.current}}Kc.Fragment=wE;Kc.jsx=h0;Kc.jsxs=h0;d0.exports=Kc;var _=d0.exports,p0,Om=f0;p0=Om.createRoot,Om.hydrateRoot;function Sn(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,i;n<e.length;n++)(i=Sn(e[n]))!==""&&(t+=(t&&" ")+i);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var m0={exports:{}},g0={},y0={exports:{}},v0={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ba=N;function SE(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var EE=typeof Object.is=="function"?Object.is:SE,NE=Ba.useState,kE=Ba.useEffect,TE=Ba.useLayoutEffect,CE=Ba.useDebugValue;function OE(e,t){var n=t(),i=NE({inst:{value:n,getSnapshot:t}}),a=i[0].inst,u=i[1];return TE(function(){a.value=n,a.getSnapshot=t,kf(a)&&u({inst:a})},[e,n,t]),kE(function(){return kf(a)&&u({inst:a}),e(function(){kf(a)&&u({inst:a})})},[e]),CE(n),n}function kf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!EE(e,n)}catch{return!0}}function AE(e,t){return t()}var DE=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?AE:OE;v0.useSyncExternalStore=Ba.useSyncExternalStore!==void 0?Ba.useSyncExternalStore:DE;y0.exports=v0;var IE=y0.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uc=N,PE=IE;function ME(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var RE=typeof Object.is=="function"?Object.is:ME,$E=PE.useSyncExternalStore,jE=Uc.useRef,LE=Uc.useEffect,FE=Uc.useMemo,WE=Uc.useDebugValue;g0.useSyncExternalStoreWithSelector=function(e,t,n,i,a){var u=jE(null);if(u.current===null){var c={hasValue:!1,value:null};u.current=c}else c=u.current;u=FE(function(){function h(b){if(!p){if(p=!0,g=b,b=i(b),a!==void 0&&c.hasValue){var C=c.value;if(a(C,b))return v=C}return v=b}if(C=v,RE(g,b))return C;var A=i(b);return a!==void 0&&a(C,A)?C:(g=b,v=A)}var p=!1,g,v,x=n===void 0?null:n;return[function(){return h(t())},x===null?void 0:function(){return h(x())}]},[t,n,i,a]);var d=$E(e,u[0],u[1]);return LE(function(){c.hasValue=!0,c.value=d},[d]),WE(d),d};m0.exports=g0;var BE=m0.exports;const zE=Zd(BE),HE={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Am=e=>{let t;const n=new Set,i=(g,v)=>{const x=typeof g=="function"?g(t):g;if(!Object.is(x,t)){const b=t;t=v??(typeof x!="object"||x===null)?x:Object.assign({},t,x),n.forEach(C=>C(t,b))}},a=()=>t,h={setState:i,getState:a,getInitialState:()=>p,subscribe:g=>(n.add(g),()=>n.delete(g)),destroy:()=>{(HE?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},p=t=e(i,a,h);return h},qE=e=>e?Am(e):Am,{useDebugValue:YE}=ne,{useSyncExternalStoreWithSelector:KE}=zE,UE=e=>e;function w0(e,t=UE,n){const i=KE(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return YE(i),i}const Dm=(e,t)=>{const n=qE(e),i=(a,u=t)=>w0(n,a,u);return Object.assign(i,n),i},VE=(e,t)=>e?Dm(e,t):Dm;function Un(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[i,a]of e)if(!Object.is(a,t.get(i)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(e[i],t[i]))return!1;return!0}var GE={value:()=>{}};function Vc(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new wc(n)}function wc(e){this._=e}function XE(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",a=n.indexOf(".");if(a>=0&&(i=n.slice(a+1),n=n.slice(0,a)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}wc.prototype=Vc.prototype={constructor:wc,on:function(e,t){var n=this._,i=XE(e+"",n),a,u=-1,c=i.length;if(arguments.length<2){for(;++u<c;)if((a=(e=i[u]).type)&&(a=ZE(n[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++u<c;)if(a=(e=i[u]).type)n[a]=Im(n[a],e.name,t);else if(t==null)for(a in n)n[a]=Im(n[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new wc(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var n=new Array(a),i=0,a,u;i<a;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(u=this._[e],i=0,a=u.length;i<a;++i)u[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],a=0,u=i.length;a<u;++a)i[a].value.apply(t,n)}};function ZE(e,t){for(var n=0,i=e.length,a;n<i;++n)if((a=e[n]).name===t)return a.value}function Im(e,t,n){for(var i=0,a=e.length;i<a;++i)if(e[i].name===t){e[i]=GE,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var nd="http://www.w3.org/1999/xhtml";const Pm={svg:"http://www.w3.org/2000/svg",xhtml:nd,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Gc(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Pm.hasOwnProperty(t)?{space:Pm[t],local:e}:e}function QE(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===nd&&t.documentElement.namespaceURI===nd?t.createElement(e):t.createElementNS(n,e)}}function JE(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function x0(e){var t=Gc(e);return(t.local?JE:QE)(t)}function eN(){}function Qd(e){return e==null?eN:function(){return this.querySelector(e)}}function tN(e){typeof e!="function"&&(e=Qd(e));for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a)for(var u=t[a],c=u.length,d=i[a]=new Array(c),h,p,g=0;g<c;++g)(h=u[g])&&(p=e.call(h,h.__data__,g,u))&&("__data__"in h&&(p.__data__=h.__data__),d[g]=p);return new rr(i,this._parents)}function nN(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function rN(){return[]}function b0(e){return e==null?rN:function(){return this.querySelectorAll(e)}}function iN(e){return function(){return nN(e.apply(this,arguments))}}function oN(e){typeof e=="function"?e=iN(e):e=b0(e);for(var t=this._groups,n=t.length,i=[],a=[],u=0;u<n;++u)for(var c=t[u],d=c.length,h,p=0;p<d;++p)(h=c[p])&&(i.push(e.call(h,h.__data__,p,c)),a.push(h));return new rr(i,a)}function _0(e){return function(){return this.matches(e)}}function S0(e){return function(t){return t.matches(e)}}var aN=Array.prototype.find;function sN(e){return function(){return aN.call(this.children,e)}}function uN(){return this.firstElementChild}function cN(e){return this.select(e==null?uN:sN(typeof e=="function"?e:S0(e)))}var lN=Array.prototype.filter;function fN(){return Array.from(this.children)}function dN(e){return function(){return lN.call(this.children,e)}}function hN(e){return this.selectAll(e==null?fN:dN(typeof e=="function"?e:S0(e)))}function pN(e){typeof e!="function"&&(e=_0(e));for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a)for(var u=t[a],c=u.length,d=i[a]=[],h,p=0;p<c;++p)(h=u[p])&&e.call(h,h.__data__,p,u)&&d.push(h);return new rr(i,this._parents)}function E0(e){return new Array(e.length)}function mN(){return new rr(this._enter||this._groups.map(E0),this._parents)}function kc(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}kc.prototype={constructor:kc,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function gN(e){return function(){return e}}function yN(e,t,n,i,a,u){for(var c=0,d,h=t.length,p=u.length;c<p;++c)(d=t[c])?(d.__data__=u[c],i[c]=d):n[c]=new kc(e,u[c]);for(;c<h;++c)(d=t[c])&&(a[c]=d)}function vN(e,t,n,i,a,u,c){var d,h,p=new Map,g=t.length,v=u.length,x=new Array(g),b;for(d=0;d<g;++d)(h=t[d])&&(x[d]=b=c.call(h,h.__data__,d,t)+"",p.has(b)?a[d]=h:p.set(b,h));for(d=0;d<v;++d)b=c.call(e,u[d],d,u)+"",(h=p.get(b))?(i[d]=h,h.__data__=u[d],p.delete(b)):n[d]=new kc(e,u[d]);for(d=0;d<g;++d)(h=t[d])&&p.get(x[d])===h&&(a[d]=h)}function wN(e){return e.__data__}function xN(e,t){if(!arguments.length)return Array.from(this,wN);var n=t?vN:yN,i=this._parents,a=this._groups;typeof e!="function"&&(e=gN(e));for(var u=a.length,c=new Array(u),d=new Array(u),h=new Array(u),p=0;p<u;++p){var g=i[p],v=a[p],x=v.length,b=bN(e.call(g,g&&g.__data__,p,i)),C=b.length,A=d[p]=new Array(C),R=c[p]=new Array(C),$=h[p]=new Array(x);n(g,v,A,R,$,b,t);for(var q=0,te=0,F,ue;q<C;++q)if(F=A[q]){for(q>=te&&(te=q+1);!(ue=R[te])&&++te<C;);F._next=ue||null}}return c=new rr(c,i),c._enter=d,c._exit=h,c}function bN(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function _N(){return new rr(this._exit||this._groups.map(E0),this._parents)}function SN(e,t,n){var i=this.enter(),a=this,u=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),n==null?u.remove():n(u),i&&a?i.merge(a).order():a}function EN(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,a=n.length,u=i.length,c=Math.min(a,u),d=new Array(a),h=0;h<c;++h)for(var p=n[h],g=i[h],v=p.length,x=d[h]=new Array(v),b,C=0;C<v;++C)(b=p[C]||g[C])&&(x[C]=b);for(;h<a;++h)d[h]=n[h];return new rr(d,this._parents)}function NN(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],a=i.length-1,u=i[a],c;--a>=0;)(c=i[a])&&(u&&c.compareDocumentPosition(u)^4&&u.parentNode.insertBefore(c,u),u=c);return this}function kN(e){e||(e=TN);function t(v,x){return v&&x?e(v.__data__,x.__data__):!v-!x}for(var n=this._groups,i=n.length,a=new Array(i),u=0;u<i;++u){for(var c=n[u],d=c.length,h=a[u]=new Array(d),p,g=0;g<d;++g)(p=c[g])&&(h[g]=p);h.sort(t)}return new rr(a,this._parents).order()}function TN(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function CN(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function ON(){return Array.from(this)}function AN(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],a=0,u=i.length;a<u;++a){var c=i[a];if(c)return c}return null}function DN(){let e=0;for(const t of this)++e;return e}function IN(){return!this.node()}function PN(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var a=t[n],u=0,c=a.length,d;u<c;++u)(d=a[u])&&e.call(d,d.__data__,u,a);return this}function MN(e){return function(){this.removeAttribute(e)}}function RN(e){return function(){this.removeAttributeNS(e.space,e.local)}}function $N(e,t){return function(){this.setAttribute(e,t)}}function jN(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function LN(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function FN(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function WN(e,t){var n=Gc(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?RN:MN:typeof t=="function"?n.local?FN:LN:n.local?jN:$N)(n,t))}function N0(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function BN(e){return function(){this.style.removeProperty(e)}}function zN(e,t,n){return function(){this.style.setProperty(e,t,n)}}function HN(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function qN(e,t,n){return arguments.length>1?this.each((t==null?BN:typeof t=="function"?HN:zN)(e,t,n??"")):za(this.node(),e)}function za(e,t){return e.style.getPropertyValue(t)||N0(e).getComputedStyle(e,null).getPropertyValue(t)}function YN(e){return function(){delete this[e]}}function KN(e,t){return function(){this[e]=t}}function UN(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function VN(e,t){return arguments.length>1?this.each((t==null?YN:typeof t=="function"?UN:KN)(e,t)):this.node()[e]}function k0(e){return e.trim().split(/^|\s+/)}function Jd(e){return e.classList||new T0(e)}function T0(e){this._node=e,this._names=k0(e.getAttribute("class")||"")}T0.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function C0(e,t){for(var n=Jd(e),i=-1,a=t.length;++i<a;)n.add(t[i])}function O0(e,t){for(var n=Jd(e),i=-1,a=t.length;++i<a;)n.remove(t[i])}function GN(e){return function(){C0(this,e)}}function XN(e){return function(){O0(this,e)}}function ZN(e,t){return function(){(t.apply(this,arguments)?C0:O0)(this,e)}}function QN(e,t){var n=k0(e+"");if(arguments.length<2){for(var i=Jd(this.node()),a=-1,u=n.length;++a<u;)if(!i.contains(n[a]))return!1;return!0}return this.each((typeof t=="function"?ZN:t?GN:XN)(n,t))}function JN(){this.textContent=""}function ek(e){return function(){this.textContent=e}}function tk(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function nk(e){return arguments.length?this.each(e==null?JN:(typeof e=="function"?tk:ek)(e)):this.node().textContent}function rk(){this.innerHTML=""}function ik(e){return function(){this.innerHTML=e}}function ok(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function ak(e){return arguments.length?this.each(e==null?rk:(typeof e=="function"?ok:ik)(e)):this.node().innerHTML}function sk(){this.nextSibling&&this.parentNode.appendChild(this)}function uk(){return this.each(sk)}function ck(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function lk(){return this.each(ck)}function fk(e){var t=typeof e=="function"?e:x0(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function dk(){return null}function hk(e,t){var n=typeof e=="function"?e:x0(e),i=t==null?dk:typeof t=="function"?t:Qd(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function pk(){var e=this.parentNode;e&&e.removeChild(this)}function mk(){return this.each(pk)}function gk(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function yk(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function vk(e){return this.select(e?yk:gk)}function wk(e){return arguments.length?this.property("__data__",e):this.node().__data__}function xk(e){return function(t){e.call(this,t,this.__data__)}}function bk(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function _k(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,a=t.length,u;n<a;++n)u=t[n],(!e.type||u.type===e.type)&&u.name===e.name?this.removeEventListener(u.type,u.listener,u.options):t[++i]=u;++i?t.length=i:delete this.__on}}}function Sk(e,t,n){return function(){var i=this.__on,a,u=xk(t);if(i){for(var c=0,d=i.length;c<d;++c)if((a=i[c]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=u,a.options=n),a.value=t;return}}this.addEventListener(e.type,u,n),a={type:e.type,name:e.name,value:t,listener:u,options:n},i?i.push(a):this.__on=[a]}}function Ek(e,t,n){var i=bk(e+""),a,u=i.length,c;if(arguments.length<2){var d=this.node().__on;if(d){for(var h=0,p=d.length,g;h<p;++h)for(a=0,g=d[h];a<u;++a)if((c=i[a]).type===g.type&&c.name===g.name)return g.value}return}for(d=t?Sk:_k,a=0;a<u;++a)this.each(d(i[a],t,n));return this}function A0(e,t,n){var i=N0(e),a=i.CustomEvent;typeof a=="function"?a=new a(t,n):(a=i.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function Nk(e,t){return function(){return A0(this,e,t)}}function kk(e,t){return function(){return A0(this,e,t.apply(this,arguments))}}function Tk(e,t){return this.each((typeof t=="function"?kk:Nk)(e,t))}function*Ck(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],a=0,u=i.length,c;a<u;++a)(c=i[a])&&(yield c)}var D0=[null];function rr(e,t){this._groups=e,this._parents=t}function su(){return new rr([[document.documentElement]],D0)}function Ok(){return this}rr.prototype=su.prototype={constructor:rr,select:tN,selectAll:oN,selectChild:cN,selectChildren:hN,filter:pN,data:xN,enter:mN,exit:_N,join:SN,merge:EN,selection:Ok,order:NN,sort:kN,call:CN,nodes:ON,node:AN,size:DN,empty:IN,each:PN,attr:WN,style:qN,property:VN,classed:QN,text:nk,html:ak,raise:uk,lower:lk,append:fk,insert:hk,remove:mk,clone:vk,datum:wk,on:Ek,dispatch:Tk,[Symbol.iterator]:Ck};function gr(e){return typeof e=="string"?new rr([[document.querySelector(e)]],[document.documentElement]):new rr([[e]],D0)}function Ak(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Pr(e,t){if(e=Ak(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const Dk={passive:!1},Ks={capture:!0,passive:!1};function Tf(e){e.stopImmediatePropagation()}function ja(e){e.preventDefault(),e.stopImmediatePropagation()}function I0(e){var t=e.document.documentElement,n=gr(e).on("dragstart.drag",ja,Ks);"onselectstart"in t?n.on("selectstart.drag",ja,Ks):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function P0(e,t){var n=e.document.documentElement,i=gr(e).on("dragstart.drag",null);t&&(i.on("click.drag",ja,Ks),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const oc=e=>()=>e;function rd(e,{sourceEvent:t,subject:n,target:i,identifier:a,active:u,x:c,y:d,dx:h,dy:p,dispatch:g}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:u,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:h,enumerable:!0,configurable:!0},dy:{value:p,enumerable:!0,configurable:!0},_:{value:g}})}rd.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Ik(e){return!e.ctrlKey&&!e.button}function Pk(){return this.parentNode}function Mk(e,t){return t??{x:e.x,y:e.y}}function Rk(){return navigator.maxTouchPoints||"ontouchstart"in this}function $k(){var e=Ik,t=Pk,n=Mk,i=Rk,a={},u=Vc("start","drag","end"),c=0,d,h,p,g,v=0;function x(F){F.on("mousedown.drag",b).filter(i).on("touchstart.drag",R).on("touchmove.drag",$,Dk).on("touchend.drag touchcancel.drag",q).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(F,ue){if(!(g||!e.call(this,F,ue))){var ce=te(this,t.call(this,F,ue),F,ue,"mouse");ce&&(gr(F.view).on("mousemove.drag",C,Ks).on("mouseup.drag",A,Ks),I0(F.view),Tf(F),p=!1,d=F.clientX,h=F.clientY,ce("start",F))}}function C(F){if(ja(F),!p){var ue=F.clientX-d,ce=F.clientY-h;p=ue*ue+ce*ce>v}a.mouse("drag",F)}function A(F){gr(F.view).on("mousemove.drag mouseup.drag",null),P0(F.view,p),ja(F),a.mouse("end",F)}function R(F,ue){if(e.call(this,F,ue)){var ce=F.changedTouches,Y=t.call(this,F,ue),Q=ce.length,se,J;for(se=0;se<Q;++se)(J=te(this,Y,F,ue,ce[se].identifier,ce[se]))&&(Tf(F),J("start",F,ce[se]))}}function $(F){var ue=F.changedTouches,ce=ue.length,Y,Q;for(Y=0;Y<ce;++Y)(Q=a[ue[Y].identifier])&&(ja(F),Q("drag",F,ue[Y]))}function q(F){var ue=F.changedTouches,ce=ue.length,Y,Q;for(g&&clearTimeout(g),g=setTimeout(function(){g=null},500),Y=0;Y<ce;++Y)(Q=a[ue[Y].identifier])&&(Tf(F),Q("end",F,ue[Y]))}function te(F,ue,ce,Y,Q,se){var J=u.copy(),U=Pr(se||ce,ue),re,ve,M;if((M=n.call(F,new rd("beforestart",{sourceEvent:ce,target:x,identifier:Q,active:c,x:U[0],y:U[1],dx:0,dy:0,dispatch:J}),Y))!=null)return re=M.x-U[0]||0,ve=M.y-U[1]||0,function ae(L,pe,oe){var G=U,de;switch(L){case"start":a[Q]=ae,de=c++;break;case"end":delete a[Q],--c;case"drag":U=Pr(oe||pe,ue),de=c;break}J.call(L,F,new rd(L,{sourceEvent:pe,subject:M,target:x,identifier:Q,active:de,x:U[0]+re,y:U[1]+ve,dx:U[0]-G[0],dy:U[1]-G[1],dispatch:J}),Y)}}return x.filter=function(F){return arguments.length?(e=typeof F=="function"?F:oc(!!F),x):e},x.container=function(F){return arguments.length?(t=typeof F=="function"?F:oc(F),x):t},x.subject=function(F){return arguments.length?(n=typeof F=="function"?F:oc(F),x):n},x.touchable=function(F){return arguments.length?(i=typeof F=="function"?F:oc(!!F),x):i},x.on=function(){var F=u.on.apply(u,arguments);return F===u?x:F},x.clickDistance=function(F){return arguments.length?(v=(F=+F)*F,x):Math.sqrt(v)},x}function eh(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function M0(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function uu(){}var Us=.7,Tc=1/Us,La="\\s*([+-]?\\d+)\\s*",Vs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Qr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",jk=/^#([0-9a-f]{3,8})$/,Lk=new RegExp(`^rgb\\(${La},${La},${La}\\)$`),Fk=new RegExp(`^rgb\\(${Qr},${Qr},${Qr}\\)$`),Wk=new RegExp(`^rgba\\(${La},${La},${La},${Vs}\\)$`),Bk=new RegExp(`^rgba\\(${Qr},${Qr},${Qr},${Vs}\\)$`),zk=new RegExp(`^hsl\\(${Vs},${Qr},${Qr}\\)$`),Hk=new RegExp(`^hsla\\(${Vs},${Qr},${Qr},${Vs}\\)$`),Mm={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};eh(uu,Gs,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Rm,formatHex:Rm,formatHex8:qk,formatHsl:Yk,formatRgb:$m,toString:$m});function Rm(){return this.rgb().formatHex()}function qk(){return this.rgb().formatHex8()}function Yk(){return R0(this).formatHsl()}function $m(){return this.rgb().formatRgb()}function Gs(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=jk.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?jm(t):n===3?new Kn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?ac(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?ac(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Lk.exec(e))?new Kn(t[1],t[2],t[3],1):(t=Fk.exec(e))?new Kn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Wk.exec(e))?ac(t[1],t[2],t[3],t[4]):(t=Bk.exec(e))?ac(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=zk.exec(e))?Wm(t[1],t[2]/100,t[3]/100,1):(t=Hk.exec(e))?Wm(t[1],t[2]/100,t[3]/100,t[4]):Mm.hasOwnProperty(e)?jm(Mm[e]):e==="transparent"?new Kn(NaN,NaN,NaN,0):null}function jm(e){return new Kn(e>>16&255,e>>8&255,e&255,1)}function ac(e,t,n,i){return i<=0&&(e=t=n=NaN),new Kn(e,t,n,i)}function Kk(e){return e instanceof uu||(e=Gs(e)),e?(e=e.rgb(),new Kn(e.r,e.g,e.b,e.opacity)):new Kn}function id(e,t,n,i){return arguments.length===1?Kk(e):new Kn(e,t,n,i??1)}function Kn(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}eh(Kn,id,M0(uu,{brighter(e){return e=e==null?Tc:Math.pow(Tc,e),new Kn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Us:Math.pow(Us,e),new Kn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Kn(Ho(this.r),Ho(this.g),Ho(this.b),Cc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Lm,formatHex:Lm,formatHex8:Uk,formatRgb:Fm,toString:Fm}));function Lm(){return`#${Lo(this.r)}${Lo(this.g)}${Lo(this.b)}`}function Uk(){return`#${Lo(this.r)}${Lo(this.g)}${Lo(this.b)}${Lo((isNaN(this.opacity)?1:this.opacity)*255)}`}function Fm(){const e=Cc(this.opacity);return`${e===1?"rgb(":"rgba("}${Ho(this.r)}, ${Ho(this.g)}, ${Ho(this.b)}${e===1?")":`, ${e})`}`}function Cc(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ho(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Lo(e){return e=Ho(e),(e<16?"0":"")+e.toString(16)}function Wm(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Rr(e,t,n,i)}function R0(e){if(e instanceof Rr)return new Rr(e.h,e.s,e.l,e.opacity);if(e instanceof uu||(e=Gs(e)),!e)return new Rr;if(e instanceof Rr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,a=Math.min(t,n,i),u=Math.max(t,n,i),c=NaN,d=u-a,h=(u+a)/2;return d?(t===u?c=(n-i)/d+(n<i)*6:n===u?c=(i-t)/d+2:c=(t-n)/d+4,d/=h<.5?u+a:2-u-a,c*=60):d=h>0&&h<1?0:c,new Rr(c,d,h,e.opacity)}function Vk(e,t,n,i){return arguments.length===1?R0(e):new Rr(e,t,n,i??1)}function Rr(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}eh(Rr,Vk,M0(uu,{brighter(e){return e=e==null?Tc:Math.pow(Tc,e),new Rr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Us:Math.pow(Us,e),new Rr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,a=2*n-i;return new Kn(Cf(e>=240?e-240:e+120,a,i),Cf(e,a,i),Cf(e<120?e+240:e-120,a,i),this.opacity)},clamp(){return new Rr(Bm(this.h),sc(this.s),sc(this.l),Cc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Cc(this.opacity);return`${e===1?"hsl(":"hsla("}${Bm(this.h)}, ${sc(this.s)*100}%, ${sc(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Bm(e){return e=(e||0)%360,e<0?e+360:e}function sc(e){return Math.max(0,Math.min(1,e||0))}function Cf(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const $0=e=>()=>e;function Gk(e,t){return function(n){return e+n*t}}function Xk(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function Zk(e){return(e=+e)==1?j0:function(t,n){return n-t?Xk(t,n,e):$0(isNaN(t)?n:t)}}function j0(e,t){var n=t-e;return n?Gk(e,n):$0(isNaN(e)?t:e)}const zm=function e(t){var n=Zk(t);function i(a,u){var c=n((a=id(a)).r,(u=id(u)).r),d=n(a.g,u.g),h=n(a.b,u.b),p=j0(a.opacity,u.opacity);return function(g){return a.r=c(g),a.g=d(g),a.b=h(g),a.opacity=p(g),a+""}}return i.gamma=e,i}(1);function Yi(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var od=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Of=new RegExp(od.source,"g");function Qk(e){return function(){return e}}function Jk(e){return function(t){return e(t)+""}}function e2(e,t){var n=od.lastIndex=Of.lastIndex=0,i,a,u,c=-1,d=[],h=[];for(e=e+"",t=t+"";(i=od.exec(e))&&(a=Of.exec(t));)(u=a.index)>n&&(u=t.slice(n,u),d[c]?d[c]+=u:d[++c]=u),(i=i[0])===(a=a[0])?d[c]?d[c]+=a:d[++c]=a:(d[++c]=null,h.push({i:c,x:Yi(i,a)})),n=Of.lastIndex;return n<t.length&&(u=t.slice(n),d[c]?d[c]+=u:d[++c]=u),d.length<2?h[0]?Jk(h[0].x):Qk(t):(t=h.length,function(p){for(var g=0,v;g<t;++g)d[(v=h[g]).i]=v.x(p);return d.join("")})}var Hm=180/Math.PI,ad={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function L0(e,t,n,i,a,u){var c,d,h;return(c=Math.sqrt(e*e+t*t))&&(e/=c,t/=c),(h=e*n+t*i)&&(n-=e*h,i-=t*h),(d=Math.sqrt(n*n+i*i))&&(n/=d,i/=d,h/=d),e*i<t*n&&(e=-e,t=-t,h=-h,c=-c),{translateX:a,translateY:u,rotate:Math.atan2(t,e)*Hm,skewX:Math.atan(h)*Hm,scaleX:c,scaleY:d}}var uc;function t2(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?ad:L0(t.a,t.b,t.c,t.d,t.e,t.f)}function n2(e){return e==null||(uc||(uc=document.createElementNS("http://www.w3.org/2000/svg","g")),uc.setAttribute("transform",e),!(e=uc.transform.baseVal.consolidate()))?ad:(e=e.matrix,L0(e.a,e.b,e.c,e.d,e.e,e.f))}function F0(e,t,n,i){function a(p){return p.length?p.pop()+" ":""}function u(p,g,v,x,b,C){if(p!==v||g!==x){var A=b.push("translate(",null,t,null,n);C.push({i:A-4,x:Yi(p,v)},{i:A-2,x:Yi(g,x)})}else(v||x)&&b.push("translate("+v+t+x+n)}function c(p,g,v,x){p!==g?(p-g>180?g+=360:g-p>180&&(p+=360),x.push({i:v.push(a(v)+"rotate(",null,i)-2,x:Yi(p,g)})):g&&v.push(a(v)+"rotate("+g+i)}function d(p,g,v,x){p!==g?x.push({i:v.push(a(v)+"skewX(",null,i)-2,x:Yi(p,g)}):g&&v.push(a(v)+"skewX("+g+i)}function h(p,g,v,x,b,C){if(p!==v||g!==x){var A=b.push(a(b)+"scale(",null,",",null,")");C.push({i:A-4,x:Yi(p,v)},{i:A-2,x:Yi(g,x)})}else(v!==1||x!==1)&&b.push(a(b)+"scale("+v+","+x+")")}return function(p,g){var v=[],x=[];return p=e(p),g=e(g),u(p.translateX,p.translateY,g.translateX,g.translateY,v,x),c(p.rotate,g.rotate,v,x),d(p.skewX,g.skewX,v,x),h(p.scaleX,p.scaleY,g.scaleX,g.scaleY,v,x),p=g=null,function(b){for(var C=-1,A=x.length,R;++C<A;)v[(R=x[C]).i]=R.x(b);return v.join("")}}}var r2=F0(t2,"px, ","px)","deg)"),i2=F0(n2,", ",")",")"),o2=1e-12;function qm(e){return((e=Math.exp(e))+1/e)/2}function a2(e){return((e=Math.exp(e))-1/e)/2}function s2(e){return((e=Math.exp(2*e))-1)/(e+1)}const u2=function e(t,n,i){function a(u,c){var d=u[0],h=u[1],p=u[2],g=c[0],v=c[1],x=c[2],b=g-d,C=v-h,A=b*b+C*C,R,$;if(A<o2)$=Math.log(x/p)/t,R=function(Y){return[d+Y*b,h+Y*C,p*Math.exp(t*Y*$)]};else{var q=Math.sqrt(A),te=(x*x-p*p+i*A)/(2*p*n*q),F=(x*x-p*p-i*A)/(2*x*n*q),ue=Math.log(Math.sqrt(te*te+1)-te),ce=Math.log(Math.sqrt(F*F+1)-F);$=(ce-ue)/t,R=function(Y){var Q=Y*$,se=qm(ue),J=p/(n*q)*(se*s2(t*Q+ue)-a2(ue));return[d+J*b,h+J*C,p*se/qm(t*Q+ue)]}}return R.duration=$*1e3*t/Math.SQRT2,R}return a.rho=function(u){var c=Math.max(.001,+u),d=c*c,h=d*d;return e(c,d,h)},a}(Math.SQRT2,2,4);var Ha=0,js=0,Cs=0,W0=1e3,Oc,Ls,Ac=0,Vo=0,Xc=0,Xs=typeof performance=="object"&&performance.now?performance:Date,B0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function th(){return Vo||(B0(c2),Vo=Xs.now()+Xc)}function c2(){Vo=0}function Dc(){this._call=this._time=this._next=null}Dc.prototype=z0.prototype={constructor:Dc,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?th():+n)+(t==null?0:+t),!this._next&&Ls!==this&&(Ls?Ls._next=this:Oc=this,Ls=this),this._call=e,this._time=n,sd()},stop:function(){this._call&&(this._call=null,this._time=1/0,sd())}};function z0(e,t,n){var i=new Dc;return i.restart(e,t,n),i}function l2(){th(),++Ha;for(var e=Oc,t;e;)(t=Vo-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ha}function Ym(){Vo=(Ac=Xs.now())+Xc,Ha=js=0;try{l2()}finally{Ha=0,d2(),Vo=0}}function f2(){var e=Xs.now(),t=e-Ac;t>W0&&(Xc-=t,Ac=e)}function d2(){for(var e,t=Oc,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Oc=n);Ls=e,sd(i)}function sd(e){if(!Ha){js&&(js=clearTimeout(js));var t=e-Vo;t>24?(e<1/0&&(js=setTimeout(Ym,e-Xs.now()-Xc)),Cs&&(Cs=clearInterval(Cs))):(Cs||(Ac=Xs.now(),Cs=setInterval(f2,W0)),Ha=1,B0(Ym))}}function Km(e,t,n){var i=new Dc;return t=t==null?0:+t,i.restart(a=>{i.stop(),e(a+t)},t,n),i}var h2=Vc("start","end","cancel","interrupt"),p2=[],H0=0,Um=1,ud=2,xc=3,Vm=4,cd=5,bc=6;function Zc(e,t,n,i,a,u){var c=e.__transition;if(!c)e.__transition={};else if(n in c)return;m2(e,n,{name:t,index:i,group:a,on:h2,tween:p2,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:H0})}function nh(e,t){var n=Wr(e,t);if(n.state>H0)throw new Error("too late; already scheduled");return n}function Jr(e,t){var n=Wr(e,t);if(n.state>xc)throw new Error("too late; already running");return n}function Wr(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function m2(e,t,n){var i=e.__transition,a;i[t]=n,n.timer=z0(u,0,n.time);function u(p){n.state=Um,n.timer.restart(c,n.delay,n.time),n.delay<=p&&c(p-n.delay)}function c(p){var g,v,x,b;if(n.state!==Um)return h();for(g in i)if(b=i[g],b.name===n.name){if(b.state===xc)return Km(c);b.state===Vm?(b.state=bc,b.timer.stop(),b.on.call("interrupt",e,e.__data__,b.index,b.group),delete i[g]):+g<t&&(b.state=bc,b.timer.stop(),b.on.call("cancel",e,e.__data__,b.index,b.group),delete i[g])}if(Km(function(){n.state===xc&&(n.state=Vm,n.timer.restart(d,n.delay,n.time),d(p))}),n.state=ud,n.on.call("start",e,e.__data__,n.index,n.group),n.state===ud){for(n.state=xc,a=new Array(x=n.tween.length),g=0,v=-1;g<x;++g)(b=n.tween[g].value.call(e,e.__data__,n.index,n.group))&&(a[++v]=b);a.length=v+1}}function d(p){for(var g=p<n.duration?n.ease.call(null,p/n.duration):(n.timer.restart(h),n.state=cd,1),v=-1,x=a.length;++v<x;)a[v].call(e,g);n.state===cd&&(n.on.call("end",e,e.__data__,n.index,n.group),h())}function h(){n.state=bc,n.timer.stop(),delete i[t];for(var p in i)return;delete e.__transition}}function _c(e,t){var n=e.__transition,i,a,u=!0,c;if(n){t=t==null?null:t+"";for(c in n){if((i=n[c]).name!==t){u=!1;continue}a=i.state>ud&&i.state<cd,i.state=bc,i.timer.stop(),i.on.call(a?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[c]}u&&delete e.__transition}}function g2(e){return this.each(function(){_c(this,e)})}function y2(e,t){var n,i;return function(){var a=Jr(this,e),u=a.tween;if(u!==n){i=n=u;for(var c=0,d=i.length;c<d;++c)if(i[c].name===t){i=i.slice(),i.splice(c,1);break}}a.tween=i}}function v2(e,t,n){var i,a;if(typeof n!="function")throw new Error;return function(){var u=Jr(this,e),c=u.tween;if(c!==i){a=(i=c).slice();for(var d={name:t,value:n},h=0,p=a.length;h<p;++h)if(a[h].name===t){a[h]=d;break}h===p&&a.push(d)}u.tween=a}}function w2(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=Wr(this.node(),n).tween,a=0,u=i.length,c;a<u;++a)if((c=i[a]).name===e)return c.value;return null}return this.each((t==null?y2:v2)(n,e,t))}function rh(e,t,n){var i=e._id;return e.each(function(){var a=Jr(this,i);(a.value||(a.value={}))[t]=n.apply(this,arguments)}),function(a){return Wr(a,i).value[t]}}function q0(e,t){var n;return(typeof t=="number"?Yi:t instanceof Gs?zm:(n=Gs(t))?(t=n,zm):e2)(e,t)}function x2(e){return function(){this.removeAttribute(e)}}function b2(e){return function(){this.removeAttributeNS(e.space,e.local)}}function _2(e,t,n){var i,a=n+"",u;return function(){var c=this.getAttribute(e);return c===a?null:c===i?u:u=t(i=c,n)}}function S2(e,t,n){var i,a=n+"",u;return function(){var c=this.getAttributeNS(e.space,e.local);return c===a?null:c===i?u:u=t(i=c,n)}}function E2(e,t,n){var i,a,u;return function(){var c,d=n(this),h;return d==null?void this.removeAttribute(e):(c=this.getAttribute(e),h=d+"",c===h?null:c===i&&h===a?u:(a=h,u=t(i=c,d)))}}function N2(e,t,n){var i,a,u;return function(){var c,d=n(this),h;return d==null?void this.removeAttributeNS(e.space,e.local):(c=this.getAttributeNS(e.space,e.local),h=d+"",c===h?null:c===i&&h===a?u:(a=h,u=t(i=c,d)))}}function k2(e,t){var n=Gc(e),i=n==="transform"?i2:q0;return this.attrTween(e,typeof t=="function"?(n.local?N2:E2)(n,i,rh(this,"attr."+e,t)):t==null?(n.local?b2:x2)(n):(n.local?S2:_2)(n,i,t))}function T2(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function C2(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function O2(e,t){var n,i;function a(){var u=t.apply(this,arguments);return u!==i&&(n=(i=u)&&C2(e,u)),n}return a._value=t,a}function A2(e,t){var n,i;function a(){var u=t.apply(this,arguments);return u!==i&&(n=(i=u)&&T2(e,u)),n}return a._value=t,a}function D2(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=Gc(e);return this.tween(n,(i.local?O2:A2)(i,t))}function I2(e,t){return function(){nh(this,e).delay=+t.apply(this,arguments)}}function P2(e,t){return t=+t,function(){nh(this,e).delay=t}}function M2(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?I2:P2)(t,e)):Wr(this.node(),t).delay}function R2(e,t){return function(){Jr(this,e).duration=+t.apply(this,arguments)}}function $2(e,t){return t=+t,function(){Jr(this,e).duration=t}}function j2(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?R2:$2)(t,e)):Wr(this.node(),t).duration}function L2(e,t){if(typeof t!="function")throw new Error;return function(){Jr(this,e).ease=t}}function F2(e){var t=this._id;return arguments.length?this.each(L2(t,e)):Wr(this.node(),t).ease}function W2(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Jr(this,e).ease=n}}function B2(e){if(typeof e!="function")throw new Error;return this.each(W2(this._id,e))}function z2(e){typeof e!="function"&&(e=_0(e));for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a)for(var u=t[a],c=u.length,d=i[a]=[],h,p=0;p<c;++p)(h=u[p])&&e.call(h,h.__data__,p,u)&&d.push(h);return new bi(i,this._parents,this._name,this._id)}function H2(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,a=n.length,u=Math.min(i,a),c=new Array(i),d=0;d<u;++d)for(var h=t[d],p=n[d],g=h.length,v=c[d]=new Array(g),x,b=0;b<g;++b)(x=h[b]||p[b])&&(v[b]=x);for(;d<i;++d)c[d]=t[d];return new bi(c,this._parents,this._name,this._id)}function q2(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Y2(e,t,n){var i,a,u=q2(t)?nh:Jr;return function(){var c=u(this,e),d=c.on;d!==i&&(a=(i=d).copy()).on(t,n),c.on=a}}function K2(e,t){var n=this._id;return arguments.length<2?Wr(this.node(),n).on.on(e):this.each(Y2(n,e,t))}function U2(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function V2(){return this.on("end.remove",U2(this._id))}function G2(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Qd(e));for(var i=this._groups,a=i.length,u=new Array(a),c=0;c<a;++c)for(var d=i[c],h=d.length,p=u[c]=new Array(h),g,v,x=0;x<h;++x)(g=d[x])&&(v=e.call(g,g.__data__,x,d))&&("__data__"in g&&(v.__data__=g.__data__),p[x]=v,Zc(p[x],t,n,x,p,Wr(g,n)));return new bi(u,this._parents,t,n)}function X2(e){var t=this._name,n=this._id;typeof e!="function"&&(e=b0(e));for(var i=this._groups,a=i.length,u=[],c=[],d=0;d<a;++d)for(var h=i[d],p=h.length,g,v=0;v<p;++v)if(g=h[v]){for(var x=e.call(g,g.__data__,v,h),b,C=Wr(g,n),A=0,R=x.length;A<R;++A)(b=x[A])&&Zc(b,t,n,A,x,C);u.push(x),c.push(g)}return new bi(u,c,t,n)}var Z2=su.prototype.constructor;function Q2(){return new Z2(this._groups,this._parents)}function J2(e,t){var n,i,a;return function(){var u=za(this,e),c=(this.style.removeProperty(e),za(this,e));return u===c?null:u===n&&c===i?a:a=t(n=u,i=c)}}function Y0(e){return function(){this.style.removeProperty(e)}}function eT(e,t,n){var i,a=n+"",u;return function(){var c=za(this,e);return c===a?null:c===i?u:u=t(i=c,n)}}function tT(e,t,n){var i,a,u;return function(){var c=za(this,e),d=n(this),h=d+"";return d==null&&(h=d=(this.style.removeProperty(e),za(this,e))),c===h?null:c===i&&h===a?u:(a=h,u=t(i=c,d))}}function nT(e,t){var n,i,a,u="style."+t,c="end."+u,d;return function(){var h=Jr(this,e),p=h.on,g=h.value[u]==null?d||(d=Y0(t)):void 0;(p!==n||a!==g)&&(i=(n=p).copy()).on(c,a=g),h.on=i}}function rT(e,t,n){var i=(e+="")=="transform"?r2:q0;return t==null?this.styleTween(e,J2(e,i)).on("end.style."+e,Y0(e)):typeof t=="function"?this.styleTween(e,tT(e,i,rh(this,"style."+e,t))).each(nT(this._id,e)):this.styleTween(e,eT(e,i,t),n).on("end.style."+e,null)}function iT(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function oT(e,t,n){var i,a;function u(){var c=t.apply(this,arguments);return c!==a&&(i=(a=c)&&iT(e,c,n)),i}return u._value=t,u}function aT(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,oT(e,t,n??""))}function sT(e){return function(){this.textContent=e}}function uT(e){return function(){var t=e(this);this.textContent=t??""}}function cT(e){return this.tween("text",typeof e=="function"?uT(rh(this,"text",e)):sT(e==null?"":e+""))}function lT(e){return function(t){this.textContent=e.call(this,t)}}function fT(e){var t,n;function i(){var a=e.apply(this,arguments);return a!==n&&(t=(n=a)&&lT(a)),t}return i._value=e,i}function dT(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,fT(e))}function hT(){for(var e=this._name,t=this._id,n=K0(),i=this._groups,a=i.length,u=0;u<a;++u)for(var c=i[u],d=c.length,h,p=0;p<d;++p)if(h=c[p]){var g=Wr(h,t);Zc(h,e,n,p,c,{time:g.time+g.delay+g.duration,delay:0,duration:g.duration,ease:g.ease})}return new bi(i,this._parents,e,n)}function pT(){var e,t,n=this,i=n._id,a=n.size();return new Promise(function(u,c){var d={value:c},h={value:function(){--a===0&&u()}};n.each(function(){var p=Jr(this,i),g=p.on;g!==e&&(t=(e=g).copy(),t._.cancel.push(d),t._.interrupt.push(d),t._.end.push(h)),p.on=t}),a===0&&u()})}var mT=0;function bi(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function K0(){return++mT}var mi=su.prototype;bi.prototype={constructor:bi,select:G2,selectAll:X2,selectChild:mi.selectChild,selectChildren:mi.selectChildren,filter:z2,merge:H2,selection:Q2,transition:hT,call:mi.call,nodes:mi.nodes,node:mi.node,size:mi.size,empty:mi.empty,each:mi.each,on:K2,attr:k2,attrTween:D2,style:rT,styleTween:aT,text:cT,textTween:dT,remove:V2,tween:w2,delay:M2,duration:j2,ease:F2,easeVarying:B2,end:pT,[Symbol.iterator]:mi[Symbol.iterator]};function gT(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var yT={time:null,delay:0,duration:250,ease:gT};function vT(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function wT(e){var t,n;e instanceof bi?(t=e._id,e=e._name):(t=K0(),(n=yT).time=th(),e=e==null?null:e+"");for(var i=this._groups,a=i.length,u=0;u<a;++u)for(var c=i[u],d=c.length,h,p=0;p<d;++p)(h=c[p])&&Zc(h,e,t,p,c,n||vT(h,t));return new bi(i,this._parents,e,t)}su.prototype.interrupt=g2;su.prototype.transition=wT;const cc=e=>()=>e;function xT(e,{sourceEvent:t,target:n,transform:i,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function vi(e,t,n){this.k=e,this.x=t,this.y=n}vi.prototype={constructor:vi,scale:function(e){return e===1?this:new vi(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new vi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var wi=new vi(1,0,0);vi.prototype;function Af(e){e.stopImmediatePropagation()}function Os(e){e.preventDefault(),e.stopImmediatePropagation()}function bT(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function _T(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Gm(){return this.__zoom||wi}function ST(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function ET(){return navigator.maxTouchPoints||"ontouchstart"in this}function NT(e,t,n){var i=e.invertX(t[0][0])-n[0][0],a=e.invertX(t[1][0])-n[1][0],u=e.invertY(t[0][1])-n[0][1],c=e.invertY(t[1][1])-n[1][1];return e.translate(a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a),c>u?(u+c)/2:Math.min(0,u)||Math.max(0,c))}function U0(){var e=bT,t=_T,n=NT,i=ST,a=ET,u=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,h=u2,p=Vc("start","zoom","end"),g,v,x,b=500,C=150,A=0,R=10;function $(M){M.property("__zoom",Gm).on("wheel.zoom",Q,{passive:!1}).on("mousedown.zoom",se).on("dblclick.zoom",J).filter(a).on("touchstart.zoom",U).on("touchmove.zoom",re).on("touchend.zoom touchcancel.zoom",ve).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}$.transform=function(M,ae,L,pe){var oe=M.selection?M.selection():M;oe.property("__zoom",Gm),M!==oe?ue(M,ae,L,pe):oe.interrupt().each(function(){ce(this,arguments).event(pe).start().zoom(null,typeof ae=="function"?ae.apply(this,arguments):ae).end()})},$.scaleBy=function(M,ae,L,pe){$.scaleTo(M,function(){var oe=this.__zoom.k,G=typeof ae=="function"?ae.apply(this,arguments):ae;return oe*G},L,pe)},$.scaleTo=function(M,ae,L,pe){$.transform(M,function(){var oe=t.apply(this,arguments),G=this.__zoom,de=L==null?F(oe):typeof L=="function"?L.apply(this,arguments):L,ge=G.invert(de),Se=typeof ae=="function"?ae.apply(this,arguments):ae;return n(te(q(G,Se),de,ge),oe,c)},L,pe)},$.translateBy=function(M,ae,L,pe){$.transform(M,function(){return n(this.__zoom.translate(typeof ae=="function"?ae.apply(this,arguments):ae,typeof L=="function"?L.apply(this,arguments):L),t.apply(this,arguments),c)},null,pe)},$.translateTo=function(M,ae,L,pe,oe){$.transform(M,function(){var G=t.apply(this,arguments),de=this.__zoom,ge=pe==null?F(G):typeof pe=="function"?pe.apply(this,arguments):pe;return n(wi.translate(ge[0],ge[1]).scale(de.k).translate(typeof ae=="function"?-ae.apply(this,arguments):-ae,typeof L=="function"?-L.apply(this,arguments):-L),G,c)},pe,oe)};function q(M,ae){return ae=Math.max(u[0],Math.min(u[1],ae)),ae===M.k?M:new vi(ae,M.x,M.y)}function te(M,ae,L){var pe=ae[0]-L[0]*M.k,oe=ae[1]-L[1]*M.k;return pe===M.x&&oe===M.y?M:new vi(M.k,pe,oe)}function F(M){return[(+M[0][0]+ +M[1][0])/2,(+M[0][1]+ +M[1][1])/2]}function ue(M,ae,L,pe){M.on("start.zoom",function(){ce(this,arguments).event(pe).start()}).on("interrupt.zoom end.zoom",function(){ce(this,arguments).event(pe).end()}).tween("zoom",function(){var oe=this,G=arguments,de=ce(oe,G).event(pe),ge=t.apply(oe,G),Se=L==null?F(ge):typeof L=="function"?L.apply(oe,G):L,Te=Math.max(ge[1][0]-ge[0][0],ge[1][1]-ge[0][1]),Re=oe.__zoom,Me=typeof ae=="function"?ae.apply(oe,G):ae,Be=h(Re.invert(Se).concat(Te/Re.k),Me.invert(Se).concat(Te/Me.k));return function(Ke){if(Ke===1)Ke=Me;else{var Ve=Be(Ke),Ee=Te/Ve[2];Ke=new vi(Ee,Se[0]-Ve[0]*Ee,Se[1]-Ve[1]*Ee)}de.zoom(null,Ke)}})}function ce(M,ae,L){return!L&&M.__zooming||new Y(M,ae)}function Y(M,ae){this.that=M,this.args=ae,this.active=0,this.sourceEvent=null,this.extent=t.apply(M,ae),this.taps=0}Y.prototype={event:function(M){return M&&(this.sourceEvent=M),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(M,ae){return this.mouse&&M!=="mouse"&&(this.mouse[1]=ae.invert(this.mouse[0])),this.touch0&&M!=="touch"&&(this.touch0[1]=ae.invert(this.touch0[0])),this.touch1&&M!=="touch"&&(this.touch1[1]=ae.invert(this.touch1[0])),this.that.__zoom=ae,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(M){var ae=gr(this.that).datum();p.call(M,this.that,new xT(M,{sourceEvent:this.sourceEvent,target:$,type:M,transform:this.that.__zoom,dispatch:p}),ae)}};function Q(M,...ae){if(!e.apply(this,arguments))return;var L=ce(this,ae).event(M),pe=this.__zoom,oe=Math.max(u[0],Math.min(u[1],pe.k*Math.pow(2,i.apply(this,arguments)))),G=Pr(M);if(L.wheel)(L.mouse[0][0]!==G[0]||L.mouse[0][1]!==G[1])&&(L.mouse[1]=pe.invert(L.mouse[0]=G)),clearTimeout(L.wheel);else{if(pe.k===oe)return;L.mouse=[G,pe.invert(G)],_c(this),L.start()}Os(M),L.wheel=setTimeout(de,C),L.zoom("mouse",n(te(q(pe,oe),L.mouse[0],L.mouse[1]),L.extent,c));function de(){L.wheel=null,L.end()}}function se(M,...ae){if(x||!e.apply(this,arguments))return;var L=M.currentTarget,pe=ce(this,ae,!0).event(M),oe=gr(M.view).on("mousemove.zoom",Se,!0).on("mouseup.zoom",Te,!0),G=Pr(M,L),de=M.clientX,ge=M.clientY;I0(M.view),Af(M),pe.mouse=[G,this.__zoom.invert(G)],_c(this),pe.start();function Se(Re){if(Os(Re),!pe.moved){var Me=Re.clientX-de,Be=Re.clientY-ge;pe.moved=Me*Me+Be*Be>A}pe.event(Re).zoom("mouse",n(te(pe.that.__zoom,pe.mouse[0]=Pr(Re,L),pe.mouse[1]),pe.extent,c))}function Te(Re){oe.on("mousemove.zoom mouseup.zoom",null),P0(Re.view,pe.moved),Os(Re),pe.event(Re).end()}}function J(M,...ae){if(e.apply(this,arguments)){var L=this.__zoom,pe=Pr(M.changedTouches?M.changedTouches[0]:M,this),oe=L.invert(pe),G=L.k*(M.shiftKey?.5:2),de=n(te(q(L,G),pe,oe),t.apply(this,ae),c);Os(M),d>0?gr(this).transition().duration(d).call(ue,de,pe,M):gr(this).call($.transform,de,pe,M)}}function U(M,...ae){if(e.apply(this,arguments)){var L=M.touches,pe=L.length,oe=ce(this,ae,M.changedTouches.length===pe).event(M),G,de,ge,Se;for(Af(M),de=0;de<pe;++de)ge=L[de],Se=Pr(ge,this),Se=[Se,this.__zoom.invert(Se),ge.identifier],oe.touch0?!oe.touch1&&oe.touch0[2]!==Se[2]&&(oe.touch1=Se,oe.taps=0):(oe.touch0=Se,G=!0,oe.taps=1+!!g);g&&(g=clearTimeout(g)),G&&(oe.taps<2&&(v=Se[0],g=setTimeout(function(){g=null},b)),_c(this),oe.start())}}function re(M,...ae){if(this.__zooming){var L=ce(this,ae).event(M),pe=M.changedTouches,oe=pe.length,G,de,ge,Se;for(Os(M),G=0;G<oe;++G)de=pe[G],ge=Pr(de,this),L.touch0&&L.touch0[2]===de.identifier?L.touch0[0]=ge:L.touch1&&L.touch1[2]===de.identifier&&(L.touch1[0]=ge);if(de=L.that.__zoom,L.touch1){var Te=L.touch0[0],Re=L.touch0[1],Me=L.touch1[0],Be=L.touch1[1],Ke=(Ke=Me[0]-Te[0])*Ke+(Ke=Me[1]-Te[1])*Ke,Ve=(Ve=Be[0]-Re[0])*Ve+(Ve=Be[1]-Re[1])*Ve;de=q(de,Math.sqrt(Ke/Ve)),ge=[(Te[0]+Me[0])/2,(Te[1]+Me[1])/2],Se=[(Re[0]+Be[0])/2,(Re[1]+Be[1])/2]}else if(L.touch0)ge=L.touch0[0],Se=L.touch0[1];else return;L.zoom("touch",n(te(de,ge,Se),L.extent,c))}}function ve(M,...ae){if(this.__zooming){var L=ce(this,ae).event(M),pe=M.changedTouches,oe=pe.length,G,de;for(Af(M),x&&clearTimeout(x),x=setTimeout(function(){x=null},b),G=0;G<oe;++G)de=pe[G],L.touch0&&L.touch0[2]===de.identifier?delete L.touch0:L.touch1&&L.touch1[2]===de.identifier&&delete L.touch1;if(L.touch1&&!L.touch0&&(L.touch0=L.touch1,delete L.touch1),L.touch0)L.touch0[1]=this.__zoom.invert(L.touch0[0]);else if(L.end(),L.taps===2&&(de=Pr(de,this),Math.hypot(v[0]-de[0],v[1]-de[1])<R)){var ge=gr(this).on("dblclick.zoom");ge&&ge.apply(this,arguments)}}}return $.wheelDelta=function(M){return arguments.length?(i=typeof M=="function"?M:cc(+M),$):i},$.filter=function(M){return arguments.length?(e=typeof M=="function"?M:cc(!!M),$):e},$.touchable=function(M){return arguments.length?(a=typeof M=="function"?M:cc(!!M),$):a},$.extent=function(M){return arguments.length?(t=typeof M=="function"?M:cc([[+M[0][0],+M[0][1]],[+M[1][0],+M[1][1]]]),$):t},$.scaleExtent=function(M){return arguments.length?(u[0]=+M[0],u[1]=+M[1],$):[u[0],u[1]]},$.translateExtent=function(M){return arguments.length?(c[0][0]=+M[0][0],c[1][0]=+M[1][0],c[0][1]=+M[0][1],c[1][1]=+M[1][1],$):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},$.constrain=function(M){return arguments.length?(n=M,$):n},$.duration=function(M){return arguments.length?(d=+M,$):d},$.interpolate=function(M){return arguments.length?(h=M,$):h},$.on=function(){var M=p.on.apply(p,arguments);return M===p?$:M},$.clickDistance=function(M){return arguments.length?(A=(M=+M)*M,$):Math.sqrt(A)},$.tapDistance=function(M){return arguments.length?(R=+M,$):R},$}const Qc=N.createContext(null),kT=Qc.Provider,_i={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},V0=_i.error001();function Rt(e,t){const n=N.useContext(Qc);if(n===null)throw new Error(V0);return w0(n,e,t)}const pn=()=>{const e=N.useContext(Qc);if(e===null)throw new Error(V0);return N.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},TT=e=>e.userSelectionActive?"none":"all";function Zs({position:e,children:t,className:n,style:i,...a}){const u=Rt(TT),c=`${e}`.split("-");return ne.createElement("div",{className:Sn(["react-flow__panel",n,...c]),style:{...i,pointerEvents:u},...a},t)}function CT({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:ne.createElement(Zs,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},ne.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const OT=({x:e,y:t,label:n,labelStyle:i={},labelShowBg:a=!0,labelBgStyle:u={},labelBgPadding:c=[2,4],labelBgBorderRadius:d=2,children:h,className:p,...g})=>{const v=N.useRef(null),[x,b]=N.useState({x:0,y:0,width:0,height:0}),C=Sn(["react-flow__edge-textwrapper",p]);return N.useEffect(()=>{if(v.current){const A=v.current.getBBox();b({x:A.x,y:A.y,width:A.width,height:A.height})}},[n]),typeof n>"u"||!n?null:ne.createElement("g",{transform:`translate(${e-x.width/2} ${t-x.height/2})`,className:C,visibility:x.width?"visible":"hidden",...g},a&&ne.createElement("rect",{width:x.width+2*c[0],x:-c[0],y:-c[1],height:x.height+2*c[1],className:"react-flow__edge-textbg",style:u,rx:d,ry:d}),ne.createElement("text",{className:"react-flow__edge-text",y:x.height/2,dy:"0.3em",ref:v,style:i},n),h)};var AT=N.memo(OT);const ih=e=>({width:e.offsetWidth,height:e.offsetHeight}),qa=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),oh=(e={x:0,y:0},t)=>({x:qa(e.x,t[0][0],t[1][0]),y:qa(e.y,t[0][1],t[1][1])}),Xm=(e,t,n)=>e<t?qa(Math.abs(e-t),1,50)/50:e>n?-qa(Math.abs(e-n),1,50)/50:0,G0=(e,t)=>{const n=Xm(e.x,35,t.width-35)*20,i=Xm(e.y,35,t.height-35)*20;return[n,i]},X0=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Z0=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Qs=({x:e,y:t,width:n,height:i})=>({x:e,y:t,x2:e+n,y2:t+i}),Q0=({x:e,y:t,x2:n,y2:i})=>({x:e,y:t,width:n-e,height:i-t}),Zm=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),DT=(e,t)=>Q0(Z0(Qs(e),Qs(t))),ld=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),i=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*i)},IT=e=>vr(e.width)&&vr(e.height)&&vr(e.x)&&vr(e.y),vr=e=>!isNaN(e)&&isFinite(e),en=Symbol.for("internals"),J0=["Enter"," ","Escape"],PT=(e,t)=>{},MT=e=>"nativeEvent"in e;function fd(e){var a,u;const t=MT(e)?e.nativeEvent:e,n=((u=(a=t.composedPath)==null?void 0:a.call(t))==null?void 0:u[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const ey=e=>"clientX"in e,Zi=(e,t)=>{var u,c;const n=ey(e),i=n?e.clientX:(u=e.touches)==null?void 0:u[0].clientX,a=n?e.clientY:(c=e.touches)==null?void 0:c[0].clientY;return{x:i-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}},Ic=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},cu=({id:e,path:t,labelX:n,labelY:i,label:a,labelStyle:u,labelShowBg:c,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:g,markerEnd:v,markerStart:x,interactionWidth:b=20})=>ne.createElement(ne.Fragment,null,ne.createElement("path",{id:e,style:g,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:v,markerStart:x}),b&&ne.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:b,className:"react-flow__edge-interaction"}),a&&vr(n)&&vr(i)?ne.createElement(AT,{x:n,y:i,label:a,labelStyle:u,labelShowBg:c,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p}):null);cu.displayName="BaseEdge";function As(e,t,n){return n===void 0?n:i=>{const a=t().edges.find(u=>u.id===e);a&&n(i,{...a})}}function ty({sourceX:e,sourceY:t,targetX:n,targetY:i}){const a=Math.abs(n-e)/2,u=n<e?n+a:n-a,c=Math.abs(i-t)/2,d=i<t?i+c:i-c;return[u,d,a,c]}function ny({sourceX:e,sourceY:t,targetX:n,targetY:i,sourceControlX:a,sourceControlY:u,targetControlX:c,targetControlY:d}){const h=e*.125+a*.375+c*.375+n*.125,p=t*.125+u*.375+d*.375+i*.125,g=Math.abs(h-e),v=Math.abs(p-t);return[h,p,g,v]}var Go;(function(e){e.Strict="strict",e.Loose="loose"})(Go||(Go={}));var Fo;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Fo||(Fo={}));var Js;(function(e){e.Partial="partial",e.Full="full"})(Js||(Js={}));var Ui;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Ui||(Ui={}));var Pc;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Pc||(Pc={}));var Ye;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Ye||(Ye={}));function Qm({pos:e,x1:t,y1:n,x2:i,y2:a}){return e===Ye.Left||e===Ye.Right?[.5*(t+i),n]:[t,.5*(n+a)]}function ry({sourceX:e,sourceY:t,sourcePosition:n=Ye.Bottom,targetX:i,targetY:a,targetPosition:u=Ye.Top}){const[c,d]=Qm({pos:n,x1:e,y1:t,x2:i,y2:a}),[h,p]=Qm({pos:u,x1:i,y1:a,x2:e,y2:t}),[g,v,x,b]=ny({sourceX:e,sourceY:t,targetX:i,targetY:a,sourceControlX:c,sourceControlY:d,targetControlX:h,targetControlY:p});return[`M${e},${t} C${c},${d} ${h},${p} ${i},${a}`,g,v,x,b]}const ah=N.memo(({sourceX:e,sourceY:t,targetX:n,targetY:i,sourcePosition:a=Ye.Bottom,targetPosition:u=Ye.Top,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:v,style:x,markerEnd:b,markerStart:C,interactionWidth:A})=>{const[R,$,q]=ry({sourceX:e,sourceY:t,sourcePosition:a,targetX:n,targetY:i,targetPosition:u});return ne.createElement(cu,{path:R,labelX:$,labelY:q,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:v,style:x,markerEnd:b,markerStart:C,interactionWidth:A})});ah.displayName="SimpleBezierEdge";const Jm={[Ye.Left]:{x:-1,y:0},[Ye.Right]:{x:1,y:0},[Ye.Top]:{x:0,y:-1},[Ye.Bottom]:{x:0,y:1}},RT=({source:e,sourcePosition:t=Ye.Bottom,target:n})=>t===Ye.Left||t===Ye.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},eg=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function $T({source:e,sourcePosition:t=Ye.Bottom,target:n,targetPosition:i=Ye.Top,center:a,offset:u}){const c=Jm[t],d=Jm[i],h={x:e.x+c.x*u,y:e.y+c.y*u},p={x:n.x+d.x*u,y:n.y+d.y*u},g=RT({source:h,sourcePosition:t,target:p}),v=g.x!==0?"x":"y",x=g[v];let b=[],C,A;const R={x:0,y:0},$={x:0,y:0},[q,te,F,ue]=ty({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(c[v]*d[v]===-1){C=a.x??q,A=a.y??te;const Y=[{x:C,y:h.y},{x:C,y:p.y}],Q=[{x:h.x,y:A},{x:p.x,y:A}];c[v]===x?b=v==="x"?Y:Q:b=v==="x"?Q:Y}else{const Y=[{x:h.x,y:p.y}],Q=[{x:p.x,y:h.y}];if(v==="x"?b=c.x===x?Q:Y:b=c.y===x?Y:Q,t===i){const ve=Math.abs(e[v]-n[v]);if(ve<=u){const M=Math.min(u-1,u-ve);c[v]===x?R[v]=(h[v]>e[v]?-1:1)*M:$[v]=(p[v]>n[v]?-1:1)*M}}if(t!==i){const ve=v==="x"?"y":"x",M=c[v]===d[ve],ae=h[ve]>p[ve],L=h[ve]<p[ve];(c[v]===1&&(!M&&ae||M&&L)||c[v]!==1&&(!M&&L||M&&ae))&&(b=v==="x"?Y:Q)}const se={x:h.x+R.x,y:h.y+R.y},J={x:p.x+$.x,y:p.y+$.y},U=Math.max(Math.abs(se.x-b[0].x),Math.abs(J.x-b[0].x)),re=Math.max(Math.abs(se.y-b[0].y),Math.abs(J.y-b[0].y));U>=re?(C=(se.x+J.x)/2,A=b[0].y):(C=b[0].x,A=(se.y+J.y)/2)}return[[e,{x:h.x+R.x,y:h.y+R.y},...b,{x:p.x+$.x,y:p.y+$.y},n],C,A,F,ue]}function jT(e,t,n,i){const a=Math.min(eg(e,t)/2,eg(t,n)/2,i),{x:u,y:c}=t;if(e.x===u&&u===n.x||e.y===c&&c===n.y)return`L${u} ${c}`;if(e.y===c){const p=e.x<n.x?-1:1,g=e.y<n.y?1:-1;return`L ${u+a*p},${c}Q ${u},${c} ${u},${c+a*g}`}const d=e.x<n.x?1:-1,h=e.y<n.y?-1:1;return`L ${u},${c+a*h}Q ${u},${c} ${u+a*d},${c}`}function dd({sourceX:e,sourceY:t,sourcePosition:n=Ye.Bottom,targetX:i,targetY:a,targetPosition:u=Ye.Top,borderRadius:c=5,centerX:d,centerY:h,offset:p=20}){const[g,v,x,b,C]=$T({source:{x:e,y:t},sourcePosition:n,target:{x:i,y:a},targetPosition:u,center:{x:d,y:h},offset:p});return[g.reduce((R,$,q)=>{let te="";return q>0&&q<g.length-1?te=jT(g[q-1],$,g[q+1],c):te=`${q===0?"M":"L"}${$.x} ${$.y}`,R+=te,R},""),v,x,b,C]}const Jc=N.memo(({sourceX:e,sourceY:t,targetX:n,targetY:i,label:a,labelStyle:u,labelShowBg:c,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:g,sourcePosition:v=Ye.Bottom,targetPosition:x=Ye.Top,markerEnd:b,markerStart:C,pathOptions:A,interactionWidth:R})=>{const[$,q,te]=dd({sourceX:e,sourceY:t,sourcePosition:v,targetX:n,targetY:i,targetPosition:x,borderRadius:A==null?void 0:A.borderRadius,offset:A==null?void 0:A.offset});return ne.createElement(cu,{path:$,labelX:q,labelY:te,label:a,labelStyle:u,labelShowBg:c,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:g,markerEnd:b,markerStart:C,interactionWidth:R})});Jc.displayName="SmoothStepEdge";const sh=N.memo(e=>{var t;return ne.createElement(Jc,{...e,pathOptions:N.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});sh.displayName="StepEdge";function LT({sourceX:e,sourceY:t,targetX:n,targetY:i}){const[a,u,c,d]=ty({sourceX:e,sourceY:t,targetX:n,targetY:i});return[`M ${e},${t}L ${n},${i}`,a,u,c,d]}const uh=N.memo(({sourceX:e,sourceY:t,targetX:n,targetY:i,label:a,labelStyle:u,labelShowBg:c,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:g,markerEnd:v,markerStart:x,interactionWidth:b})=>{const[C,A,R]=LT({sourceX:e,sourceY:t,targetX:n,targetY:i});return ne.createElement(cu,{path:C,labelX:A,labelY:R,label:a,labelStyle:u,labelShowBg:c,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:g,markerEnd:v,markerStart:x,interactionWidth:b})});uh.displayName="StraightEdge";function lc(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function tg({pos:e,x1:t,y1:n,x2:i,y2:a,c:u}){switch(e){case Ye.Left:return[t-lc(t-i,u),n];case Ye.Right:return[t+lc(i-t,u),n];case Ye.Top:return[t,n-lc(n-a,u)];case Ye.Bottom:return[t,n+lc(a-n,u)]}}function iy({sourceX:e,sourceY:t,sourcePosition:n=Ye.Bottom,targetX:i,targetY:a,targetPosition:u=Ye.Top,curvature:c=.25}){const[d,h]=tg({pos:n,x1:e,y1:t,x2:i,y2:a,c}),[p,g]=tg({pos:u,x1:i,y1:a,x2:e,y2:t,c}),[v,x,b,C]=ny({sourceX:e,sourceY:t,targetX:i,targetY:a,sourceControlX:d,sourceControlY:h,targetControlX:p,targetControlY:g});return[`M${e},${t} C${d},${h} ${p},${g} ${i},${a}`,v,x,b,C]}const Mc=N.memo(({sourceX:e,sourceY:t,targetX:n,targetY:i,sourcePosition:a=Ye.Bottom,targetPosition:u=Ye.Top,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:v,style:x,markerEnd:b,markerStart:C,pathOptions:A,interactionWidth:R})=>{const[$,q,te]=iy({sourceX:e,sourceY:t,sourcePosition:a,targetX:n,targetY:i,targetPosition:u,curvature:A==null?void 0:A.curvature});return ne.createElement(cu,{path:$,labelX:q,labelY:te,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:v,style:x,markerEnd:b,markerStart:C,interactionWidth:R})});Mc.displayName="BezierEdge";const ch=N.createContext(null),FT=ch.Provider;ch.Consumer;const WT=()=>N.useContext(ch),BT=e=>"id"in e&&"source"in e&&"target"in e,zT=({source:e,sourceHandle:t,target:n,targetHandle:i})=>`reactflow__edge-${e}${t||""}-${n}${i||""}`,hd=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(i=>`${i}=${e[i]}`).join("&")}`,HT=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),qT=(e,t)=>{if(!e.source||!e.target)return t;let n;return BT(e)?n={...e}:n={...e,id:zT(e)},HT(n,t)?t:t.concat(n)},pd=({x:e,y:t},[n,i,a],u,[c,d])=>{const h={x:(e-n)/a,y:(t-i)/a};return u?{x:c*Math.round(h.x/c),y:d*Math.round(h.y/d)}:h},oy=({x:e,y:t},[n,i,a])=>({x:e*a+n,y:t*a+i}),qo=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],i=(e.height??0)*t[1],a={x:e.position.x-n,y:e.position.y-i};return{...a,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-i}:a}},el=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((i,a)=>{const{x:u,y:c}=qo(a,t).positionAbsolute;return Z0(i,Qs({x:u,y:c,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Q0(n)},ay=(e,t,[n,i,a]=[0,0,1],u=!1,c=!1,d=[0,0])=>{const h={x:(t.x-n)/a,y:(t.y-i)/a,width:t.width/a,height:t.height/a},p=[];return e.forEach(g=>{const{width:v,height:x,selectable:b=!0,hidden:C=!1}=g;if(c&&!b||C)return!1;const{positionAbsolute:A}=qo(g,d),R={x:A.x,y:A.y,width:v||0,height:x||0},$=ld(h,R),q=typeof v>"u"||typeof x>"u"||v===null||x===null,te=u&&$>0,F=(v||0)*(x||0);(q||te||$>=F||g.dragging)&&p.push(g)}),p},sy=(e,t)=>{const n=e.map(i=>i.id);return t.filter(i=>n.includes(i.source)||n.includes(i.target))},uy=(e,t,n,i,a,u=.1)=>{const c=t/(e.width*(1+u)),d=n/(e.height*(1+u)),h=Math.min(c,d),p=qa(h,i,a),g=e.x+e.width/2,v=e.y+e.height/2,x=t/2-g*p,b=n/2-v*p;return{x,y:b,zoom:p}},Po=(e,t=0)=>e.transition().duration(t);function ng(e,t,n,i){return(t[n]||[]).reduce((a,u)=>{var c,d;return`${e.id}-${u.id}-${n}`!==i&&a.push({id:u.id||null,type:n,nodeId:e.id,x:(((c=e.positionAbsolute)==null?void 0:c.x)??0)+u.x+u.width/2,y:(((d=e.positionAbsolute)==null?void 0:d.y)??0)+u.y+u.height/2}),a},[])}function YT(e,t,n,i,a,u){const{x:c,y:d}=Zi(e),p=t.elementsFromPoint(c,d).find(C=>C.classList.contains("react-flow__handle"));if(p){const C=p.getAttribute("data-nodeid");if(C){const A=lh(void 0,p),R=p.getAttribute("data-handleid"),$=u({nodeId:C,id:R,type:A});if($){const q=a.find(te=>te.nodeId===C&&te.type===A&&te.id===R);return{handle:{id:R,type:A,nodeId:C,x:(q==null?void 0:q.x)||n.x,y:(q==null?void 0:q.y)||n.y},validHandleResult:$}}}}let g=[],v=1/0;if(a.forEach(C=>{const A=Math.sqrt((C.x-n.x)**2+(C.y-n.y)**2);if(A<=i){const R=u(C);A<=v&&(A<v?g=[{handle:C,validHandleResult:R}]:A===v&&g.push({handle:C,validHandleResult:R}),v=A)}}),!g.length)return{handle:null,validHandleResult:cy()};if(g.length===1)return g[0];const x=g.some(({validHandleResult:C})=>C.isValid),b=g.some(({handle:C})=>C.type==="target");return g.find(({handle:C,validHandleResult:A})=>b?C.type==="target":x?A.isValid:!0)||g[0]}const KT={source:null,target:null,sourceHandle:null,targetHandle:null},cy=()=>({handleDomNode:null,isValid:!1,connection:KT,endHandle:null});function ly(e,t,n,i,a,u,c){const d=a==="target",h=c.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),p={...cy(),handleDomNode:h};if(h){const g=lh(void 0,h),v=h.getAttribute("data-nodeid"),x=h.getAttribute("data-handleid"),b=h.classList.contains("connectable"),C=h.classList.contains("connectableend"),A={source:d?v:n,sourceHandle:d?x:i,target:d?n:v,targetHandle:d?i:x};p.connection=A,b&&C&&(t===Go.Strict?d&&g==="source"||!d&&g==="target":v!==n||x!==i)&&(p.endHandle={nodeId:v,handleId:x,type:g},p.isValid=u(A))}return p}function UT({nodes:e,nodeId:t,handleId:n,handleType:i}){return e.reduce((a,u)=>{if(u[en]){const{handleBounds:c}=u[en];let d=[],h=[];c&&(d=ng(u,c,"source",`${t}-${n}-${i}`),h=ng(u,c,"target",`${t}-${n}-${i}`)),a.push(...d,...h)}return a},[])}function lh(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Df(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function VT(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function fy({event:e,handleId:t,nodeId:n,onConnect:i,isTarget:a,getState:u,setState:c,isValidConnection:d,edgeUpdaterType:h,onReconnectEnd:p}){const g=X0(e.target),{connectionMode:v,domNode:x,autoPanOnConnect:b,connectionRadius:C,onConnectStart:A,panBy:R,getNodes:$,cancelConnection:q}=u();let te=0,F;const{x:ue,y:ce}=Zi(e),Y=g==null?void 0:g.elementFromPoint(ue,ce),Q=lh(h,Y),se=x==null?void 0:x.getBoundingClientRect();if(!se||!Q)return;let J,U=Zi(e,se),re=!1,ve=null,M=!1,ae=null;const L=UT({nodes:$(),nodeId:n,handleId:t,handleType:Q}),pe=()=>{if(!b)return;const[de,ge]=G0(U,se);R({x:de,y:ge}),te=requestAnimationFrame(pe)};c({connectionPosition:U,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:Q,connectionStartHandle:{nodeId:n,handleId:t,type:Q},connectionEndHandle:null}),A==null||A(e,{nodeId:n,handleId:t,handleType:Q});function oe(de){const{transform:ge}=u();U=Zi(de,se);const{handle:Se,validHandleResult:Te}=YT(de,g,pd(U,ge,!1,[1,1]),C,L,Re=>ly(Re,v,n,t,a?"target":"source",d,g));if(F=Se,re||(pe(),re=!0),ae=Te.handleDomNode,ve=Te.connection,M=Te.isValid,c({connectionPosition:F&&M?oy({x:F.x,y:F.y},ge):U,connectionStatus:VT(!!F,M),connectionEndHandle:Te.endHandle}),!F&&!M&&!ae)return Df(J);ve.source!==ve.target&&ae&&(Df(J),J=ae,ae.classList.add("connecting","react-flow__handle-connecting"),ae.classList.toggle("valid",M),ae.classList.toggle("react-flow__handle-valid",M))}function G(de){var ge,Se;(F||ae)&&ve&&M&&(i==null||i(ve)),(Se=(ge=u()).onConnectEnd)==null||Se.call(ge,de),h&&(p==null||p(de)),Df(J),q(),cancelAnimationFrame(te),re=!1,M=!1,ve=null,ae=null,g.removeEventListener("mousemove",oe),g.removeEventListener("mouseup",G),g.removeEventListener("touchmove",oe),g.removeEventListener("touchend",G)}g.addEventListener("mousemove",oe),g.addEventListener("mouseup",G),g.addEventListener("touchmove",oe),g.addEventListener("touchend",G)}const rg=()=>!0,GT=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),XT=(e,t,n)=>i=>{const{connectionStartHandle:a,connectionEndHandle:u,connectionClickStartHandle:c}=i;return{connecting:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.handleId)===t&&(a==null?void 0:a.type)===n||(u==null?void 0:u.nodeId)===e&&(u==null?void 0:u.handleId)===t&&(u==null?void 0:u.type)===n,clickConnecting:(c==null?void 0:c.nodeId)===e&&(c==null?void 0:c.handleId)===t&&(c==null?void 0:c.type)===n}},dy=N.forwardRef(({type:e="source",position:t=Ye.Top,isValidConnection:n,isConnectable:i=!0,isConnectableStart:a=!0,isConnectableEnd:u=!0,id:c,onConnect:d,children:h,className:p,onMouseDown:g,onTouchStart:v,...x},b)=>{var se,J;const C=c||null,A=e==="target",R=pn(),$=WT(),{connectOnClick:q,noPanClassName:te}=Rt(GT,Un),{connecting:F,clickConnecting:ue}=Rt(XT($,C,e),Un);$||(J=(se=R.getState()).onError)==null||J.call(se,"010",_i.error010());const ce=U=>{const{defaultEdgeOptions:re,onConnect:ve,hasDefaultEdges:M}=R.getState(),ae={...re,...U};if(M){const{edges:L,setEdges:pe}=R.getState();pe(qT(ae,L))}ve==null||ve(ae),d==null||d(ae)},Y=U=>{if(!$)return;const re=ey(U);a&&(re&&U.button===0||!re)&&fy({event:U,handleId:C,nodeId:$,onConnect:ce,isTarget:A,getState:R.getState,setState:R.setState,isValidConnection:n||R.getState().isValidConnection||rg}),re?g==null||g(U):v==null||v(U)},Q=U=>{const{onClickConnectStart:re,onClickConnectEnd:ve,connectionClickStartHandle:M,connectionMode:ae,isValidConnection:L}=R.getState();if(!$||!M&&!a)return;if(!M){re==null||re(U,{nodeId:$,handleId:C,handleType:e}),R.setState({connectionClickStartHandle:{nodeId:$,type:e,handleId:C}});return}const pe=X0(U.target),oe=n||L||rg,{connection:G,isValid:de}=ly({nodeId:$,id:C,type:e},ae,M.nodeId,M.handleId||null,M.type,oe,pe);de&&ce(G),ve==null||ve(U),R.setState({connectionClickStartHandle:null})};return ne.createElement("div",{"data-handleid":C,"data-nodeid":$,"data-handlepos":t,"data-id":`${$}-${C}-${e}`,className:Sn(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",te,p,{source:!A,target:A,connectable:i,connectablestart:a,connectableend:u,connecting:ue,connectionindicator:i&&(a&&!F||u&&F)}]),onMouseDown:Y,onTouchStart:Y,onClick:q?Q:void 0,ref:b,...x},h)});dy.displayName="Handle";var Gi=N.memo(dy);const hy=({data:e,isConnectable:t,targetPosition:n=Ye.Top,sourcePosition:i=Ye.Bottom})=>ne.createElement(ne.Fragment,null,ne.createElement(Gi,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,ne.createElement(Gi,{type:"source",position:i,isConnectable:t}));hy.displayName="DefaultNode";var md=N.memo(hy);const py=({data:e,isConnectable:t,sourcePosition:n=Ye.Bottom})=>ne.createElement(ne.Fragment,null,e==null?void 0:e.label,ne.createElement(Gi,{type:"source",position:n,isConnectable:t}));py.displayName="InputNode";var my=N.memo(py);const gy=({data:e,isConnectable:t,targetPosition:n=Ye.Top})=>ne.createElement(ne.Fragment,null,ne.createElement(Gi,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);gy.displayName="OutputNode";var yy=N.memo(gy);const fh=()=>null;fh.displayName="GroupNode";const ZT=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),fc=e=>e.id;function QT(e,t){return Un(e.selectedNodes.map(fc),t.selectedNodes.map(fc))&&Un(e.selectedEdges.map(fc),t.selectedEdges.map(fc))}const vy=N.memo(({onSelectionChange:e})=>{const t=pn(),{selectedNodes:n,selectedEdges:i}=Rt(ZT,QT);return N.useEffect(()=>{const a={nodes:n,edges:i};e==null||e(a),t.getState().onSelectionChange.forEach(u=>u(a))},[n,i,e]),null});vy.displayName="SelectionListener";const JT=e=>!!e.onSelectionChange;function eC({onSelectionChange:e}){const t=Rt(JT);return e||t?ne.createElement(vy,{onSelectionChange:e}):null}const tC=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Ta(e,t){N.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function mt(e,t,n){N.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const nC=({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,onConnect:a,onConnectStart:u,onConnectEnd:c,onClickConnectStart:d,onClickConnectEnd:h,nodesDraggable:p,nodesConnectable:g,nodesFocusable:v,edgesFocusable:x,edgesUpdatable:b,elevateNodesOnSelect:C,minZoom:A,maxZoom:R,nodeExtent:$,onNodesChange:q,onEdgesChange:te,elementsSelectable:F,connectionMode:ue,snapGrid:ce,snapToGrid:Y,translateExtent:Q,connectOnClick:se,defaultEdgeOptions:J,fitView:U,fitViewOptions:re,onNodesDelete:ve,onEdgesDelete:M,onNodeDrag:ae,onNodeDragStart:L,onNodeDragStop:pe,onSelectionDrag:oe,onSelectionDragStart:G,onSelectionDragStop:de,noPanClassName:ge,nodeOrigin:Se,rfId:Te,autoPanOnConnect:Re,autoPanOnNodeDrag:Me,onError:Be,connectionRadius:Ke,isValidConnection:Ve,nodeDragThreshold:Ee})=>{const{setNodes:rt,setEdges:xt,setDefaultNodesAndEdges:ze,setMinZoom:Nt,setMaxZoom:Ge,setTranslateExtent:it,setNodeExtent:Et,reset:et}=Rt(tC,Un),We=pn();return N.useEffect(()=>{const Ft=i==null?void 0:i.map(Wt=>({...Wt,...J}));return ze(n,Ft),()=>{et()}},[]),mt("defaultEdgeOptions",J,We.setState),mt("connectionMode",ue,We.setState),mt("onConnect",a,We.setState),mt("onConnectStart",u,We.setState),mt("onConnectEnd",c,We.setState),mt("onClickConnectStart",d,We.setState),mt("onClickConnectEnd",h,We.setState),mt("nodesDraggable",p,We.setState),mt("nodesConnectable",g,We.setState),mt("nodesFocusable",v,We.setState),mt("edgesFocusable",x,We.setState),mt("edgesUpdatable",b,We.setState),mt("elementsSelectable",F,We.setState),mt("elevateNodesOnSelect",C,We.setState),mt("snapToGrid",Y,We.setState),mt("snapGrid",ce,We.setState),mt("onNodesChange",q,We.setState),mt("onEdgesChange",te,We.setState),mt("connectOnClick",se,We.setState),mt("fitViewOnInit",U,We.setState),mt("fitViewOnInitOptions",re,We.setState),mt("onNodesDelete",ve,We.setState),mt("onEdgesDelete",M,We.setState),mt("onNodeDrag",ae,We.setState),mt("onNodeDragStart",L,We.setState),mt("onNodeDragStop",pe,We.setState),mt("onSelectionDrag",oe,We.setState),mt("onSelectionDragStart",G,We.setState),mt("onSelectionDragStop",de,We.setState),mt("noPanClassName",ge,We.setState),mt("nodeOrigin",Se,We.setState),mt("rfId",Te,We.setState),mt("autoPanOnConnect",Re,We.setState),mt("autoPanOnNodeDrag",Me,We.setState),mt("onError",Be,We.setState),mt("connectionRadius",Ke,We.setState),mt("isValidConnection",Ve,We.setState),mt("nodeDragThreshold",Ee,We.setState),Ta(e,rt),Ta(t,xt),Ta(A,Nt),Ta(R,Ge),Ta(Q,it),Ta($,Et),null},ig={display:"none"},rC={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},wy="react-flow__node-desc",xy="react-flow__edge-desc",iC="react-flow__aria-live",oC=e=>e.ariaLiveMessage;function aC({rfId:e}){const t=Rt(oC);return ne.createElement("div",{id:`${iC}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:rC},t)}function sC({rfId:e,disableKeyboardA11y:t}){return ne.createElement(ne.Fragment,null,ne.createElement("div",{id:`${wy}-${e}`,style:ig},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),ne.createElement("div",{id:`${xy}-${e}`,style:ig},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&ne.createElement(aC,{rfId:e}))}var eu=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,i]=N.useState(!1),a=N.useRef(!1),u=N.useRef(new Set([])),[c,d]=N.useMemo(()=>{if(e!==null){const p=(Array.isArray(e)?e:[e]).filter(v=>typeof v=="string").map(v=>v.split("+")),g=p.reduce((v,x)=>v.concat(...x),[]);return[p,g]}return[[],[]]},[e]);return N.useEffect(()=>{const h=typeof document<"u"?document:null,p=(t==null?void 0:t.target)||h;if(e!==null){const g=b=>{if(a.current=b.ctrlKey||b.metaKey||b.shiftKey,(!a.current||a.current&&!t.actInsideInputWithModifier)&&fd(b))return!1;const A=ag(b.code,d);u.current.add(b[A]),og(c,u.current,!1)&&(b.preventDefault(),i(!0))},v=b=>{if((!a.current||a.current&&!t.actInsideInputWithModifier)&&fd(b))return!1;const A=ag(b.code,d);og(c,u.current,!0)?(i(!1),u.current.clear()):u.current.delete(b[A]),b.key==="Meta"&&u.current.clear(),a.current=!1},x=()=>{u.current.clear(),i(!1)};return p==null||p.addEventListener("keydown",g),p==null||p.addEventListener("keyup",v),window.addEventListener("blur",x),()=>{p==null||p.removeEventListener("keydown",g),p==null||p.removeEventListener("keyup",v),window.removeEventListener("blur",x)}}},[e,i]),n};function og(e,t,n){return e.filter(i=>n||i.length===t.size).some(i=>i.every(a=>t.has(a)))}function ag(e,t){return t.includes(e)?"code":"key"}function by(e,t,n,i){var d,h;const a=e.parentNode||e.parentId;if(!a)return n;const u=t.get(a),c=qo(u,i);return by(u,t,{x:(n.x??0)+c.x,y:(n.y??0)+c.y,z:(((d=u[en])==null?void 0:d.z)??0)>(n.z??0)?((h=u[en])==null?void 0:h.z)??0:n.z??0},i)}function _y(e,t,n){e.forEach(i=>{var u;const a=i.parentNode||i.parentId;if(a&&!e.has(a))throw new Error(`Parent node ${a} not found`);if(a||n!=null&&n[i.id]){const{x:c,y:d,z:h}=by(i,e,{...i.position,z:((u=i[en])==null?void 0:u.z)??0},t);i.positionAbsolute={x:c,y:d},i[en].z=h,n!=null&&n[i.id]&&(i[en].isParent=!0)}})}function If(e,t,n,i){const a=new Map,u={},c=i?1e3:0;return e.forEach(d=>{var b;const h=(vr(d.zIndex)?d.zIndex:0)+(d.selected?c:0),p=t.get(d.id),g={...d,positionAbsolute:{x:d.position.x,y:d.position.y}},v=d.parentNode||d.parentId;v&&(u[v]=!0);const x=(p==null?void 0:p.type)&&(p==null?void 0:p.type)!==d.type;Object.defineProperty(g,en,{enumerable:!1,value:{handleBounds:x||(b=p==null?void 0:p[en])==null?void 0:b.handleBounds,z:h}}),a.set(d.id,g)}),_y(a,n,u),a}function Sy(e,t={}){const{getNodes:n,width:i,height:a,minZoom:u,maxZoom:c,d3Zoom:d,d3Selection:h,fitViewOnInitDone:p,fitViewOnInit:g,nodeOrigin:v}=e(),x=t.initial&&!p&&g;if(d&&h&&(x||!t.initial)){const C=n().filter(R=>{var q;const $=t.includeHiddenNodes?R.width&&R.height:!R.hidden;return(q=t.nodes)!=null&&q.length?$&&t.nodes.some(te=>te.id===R.id):$}),A=C.every(R=>R.width&&R.height);if(C.length>0&&A){const R=el(C,v),{x:$,y:q,zoom:te}=uy(R,i,a,t.minZoom??u,t.maxZoom??c,t.padding??.1),F=wi.translate($,q).scale(te);return typeof t.duration=="number"&&t.duration>0?d.transform(Po(h,t.duration),F):d.transform(h,F),!0}}return!1}function uC(e,t){return e.forEach(n=>{const i=t.get(n.id);i&&t.set(i.id,{...i,[en]:i[en],selected:n.selected})}),new Map(t)}function cC(e,t){return t.map(n=>{const i=e.find(a=>a.id===n.id);return i&&(n.selected=i.selected),n})}function dc({changedNodes:e,changedEdges:t,get:n,set:i}){const{nodeInternals:a,edges:u,onNodesChange:c,onEdgesChange:d,hasDefaultNodes:h,hasDefaultEdges:p}=n();e!=null&&e.length&&(h&&i({nodeInternals:uC(e,a)}),c==null||c(e)),t!=null&&t.length&&(p&&i({edges:cC(t,u)}),d==null||d(t))}const Ca=()=>{},lC={zoomIn:Ca,zoomOut:Ca,zoomTo:Ca,getZoom:()=>1,setViewport:Ca,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Ca,fitBounds:Ca,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},fC=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),dC=()=>{const e=pn(),{d3Zoom:t,d3Selection:n}=Rt(fC,Un);return N.useMemo(()=>n&&t?{zoomIn:a=>t.scaleBy(Po(n,a==null?void 0:a.duration),1.2),zoomOut:a=>t.scaleBy(Po(n,a==null?void 0:a.duration),1/1.2),zoomTo:(a,u)=>t.scaleTo(Po(n,u==null?void 0:u.duration),a),getZoom:()=>e.getState().transform[2],setViewport:(a,u)=>{const[c,d,h]=e.getState().transform,p=wi.translate(a.x??c,a.y??d).scale(a.zoom??h);t.transform(Po(n,u==null?void 0:u.duration),p)},getViewport:()=>{const[a,u,c]=e.getState().transform;return{x:a,y:u,zoom:c}},fitView:a=>Sy(e.getState,a),setCenter:(a,u,c)=>{const{width:d,height:h,maxZoom:p}=e.getState(),g=typeof(c==null?void 0:c.zoom)<"u"?c.zoom:p,v=d/2-a*g,x=h/2-u*g,b=wi.translate(v,x).scale(g);t.transform(Po(n,c==null?void 0:c.duration),b)},fitBounds:(a,u)=>{const{width:c,height:d,minZoom:h,maxZoom:p}=e.getState(),{x:g,y:v,zoom:x}=uy(a,c,d,h,p,(u==null?void 0:u.padding)??.1),b=wi.translate(g,v).scale(x);t.transform(Po(n,u==null?void 0:u.duration),b)},project:a=>{const{transform:u,snapToGrid:c,snapGrid:d}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),pd(a,u,c,d)},screenToFlowPosition:a=>{const{transform:u,snapToGrid:c,snapGrid:d,domNode:h}=e.getState();if(!h)return a;const{x:p,y:g}=h.getBoundingClientRect(),v={x:a.x-p,y:a.y-g};return pd(v,u,c,d)},flowToScreenPosition:a=>{const{transform:u,domNode:c}=e.getState();if(!c)return a;const{x:d,y:h}=c.getBoundingClientRect(),p=oy(a,u);return{x:p.x+d,y:p.y+h}},viewportInitialized:!0}:lC,[t,n])};function dh(){const e=dC(),t=pn(),n=N.useCallback(()=>t.getState().getNodes().map(A=>({...A})),[]),i=N.useCallback(A=>t.getState().nodeInternals.get(A),[]),a=N.useCallback(()=>{const{edges:A=[]}=t.getState();return A.map(R=>({...R}))},[]),u=N.useCallback(A=>{const{edges:R=[]}=t.getState();return R.find($=>$.id===A)},[]),c=N.useCallback(A=>{const{getNodes:R,setNodes:$,hasDefaultNodes:q,onNodesChange:te}=t.getState(),F=R(),ue=typeof A=="function"?A(F):A;if(q)$(ue);else if(te){const ce=ue.length===0?F.map(Y=>({type:"remove",id:Y.id})):ue.map(Y=>({item:Y,type:"reset"}));te(ce)}},[]),d=N.useCallback(A=>{const{edges:R=[],setEdges:$,hasDefaultEdges:q,onEdgesChange:te}=t.getState(),F=typeof A=="function"?A(R):A;if(q)$(F);else if(te){const ue=F.length===0?R.map(ce=>({type:"remove",id:ce.id})):F.map(ce=>({item:ce,type:"reset"}));te(ue)}},[]),h=N.useCallback(A=>{const R=Array.isArray(A)?A:[A],{getNodes:$,setNodes:q,hasDefaultNodes:te,onNodesChange:F}=t.getState();if(te){const ce=[...$(),...R];q(ce)}else if(F){const ue=R.map(ce=>({item:ce,type:"add"}));F(ue)}},[]),p=N.useCallback(A=>{const R=Array.isArray(A)?A:[A],{edges:$=[],setEdges:q,hasDefaultEdges:te,onEdgesChange:F}=t.getState();if(te)q([...$,...R]);else if(F){const ue=R.map(ce=>({item:ce,type:"add"}));F(ue)}},[]),g=N.useCallback(()=>{const{getNodes:A,edges:R=[],transform:$}=t.getState(),[q,te,F]=$;return{nodes:A().map(ue=>({...ue})),edges:R.map(ue=>({...ue})),viewport:{x:q,y:te,zoom:F}}},[]),v=N.useCallback(({nodes:A,edges:R})=>{const{nodeInternals:$,getNodes:q,edges:te,hasDefaultNodes:F,hasDefaultEdges:ue,onNodesDelete:ce,onEdgesDelete:Y,onNodesChange:Q,onEdgesChange:se}=t.getState(),J=(A||[]).map(ae=>ae.id),U=(R||[]).map(ae=>ae.id),re=q().reduce((ae,L)=>{const pe=L.parentNode||L.parentId,oe=!J.includes(L.id)&&pe&&ae.find(de=>de.id===pe);return(typeof L.deletable=="boolean"?L.deletable:!0)&&(J.includes(L.id)||oe)&&ae.push(L),ae},[]),ve=te.filter(ae=>typeof ae.deletable=="boolean"?ae.deletable:!0),M=ve.filter(ae=>U.includes(ae.id));if(re||M){const ae=sy(re,ve),L=[...M,...ae],pe=L.reduce((oe,G)=>(oe.includes(G.id)||oe.push(G.id),oe),[]);if((ue||F)&&(ue&&t.setState({edges:te.filter(oe=>!pe.includes(oe.id))}),F&&(re.forEach(oe=>{$.delete(oe.id)}),t.setState({nodeInternals:new Map($)}))),pe.length>0&&(Y==null||Y(L),se&&se(pe.map(oe=>({id:oe,type:"remove"})))),re.length>0&&(ce==null||ce(re),Q)){const oe=re.map(G=>({id:G.id,type:"remove"}));Q(oe)}}},[]),x=N.useCallback(A=>{const R=IT(A),$=R?null:t.getState().nodeInternals.get(A.id);return!R&&!$?[null,null,R]:[R?A:Zm($),$,R]},[]),b=N.useCallback((A,R=!0,$)=>{const[q,te,F]=x(A);return q?($||t.getState().getNodes()).filter(ue=>{if(!F&&(ue.id===te.id||!ue.positionAbsolute))return!1;const ce=Zm(ue),Y=ld(ce,q);return R&&Y>0||Y>=q.width*q.height}):[]},[]),C=N.useCallback((A,R,$=!0)=>{const[q]=x(A);if(!q)return!1;const te=ld(q,R);return $&&te>0||te>=q.width*q.height},[]);return N.useMemo(()=>({...e,getNodes:n,getNode:i,getEdges:a,getEdge:u,setNodes:c,setEdges:d,addNodes:h,addEdges:p,toObject:g,deleteElements:v,getIntersectingNodes:b,isNodeIntersecting:C}),[e,n,i,a,u,c,d,h,p,g,v,b,C])}const hC={actInsideInputWithModifier:!1};var pC=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=pn(),{deleteElements:i}=dh(),a=eu(e,hC),u=eu(t);N.useEffect(()=>{if(a){const{edges:c,getNodes:d}=n.getState(),h=d().filter(g=>g.selected),p=c.filter(g=>g.selected);i({nodes:h,edges:p}),n.setState({nodesSelectionActive:!1})}},[a]),N.useEffect(()=>{n.setState({multiSelectionActive:u})},[u])};function mC(e){const t=pn();N.useEffect(()=>{let n;const i=()=>{var u,c;if(!e.current)return;const a=ih(e.current);(a.height===0||a.width===0)&&((c=(u=t.getState()).onError)==null||c.call(u,"004",_i.error004())),t.setState({width:a.width||500,height:a.height||500})};return i(),window.addEventListener("resize",i),e.current&&(n=new ResizeObserver(()=>i()),n.observe(e.current)),()=>{window.removeEventListener("resize",i),n&&e.current&&n.unobserve(e.current)}},[])}const hh={position:"absolute",width:"100%",height:"100%",top:0,left:0},gC=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,hc=e=>({x:e.x,y:e.y,zoom:e.k}),Oa=(e,t)=>e.target.closest(`.${t}`),sg=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),ug=e=>{const t=e.ctrlKey&&Ic()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},yC=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),vC=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:i,zoomOnScroll:a=!0,zoomOnPinch:u=!0,panOnScroll:c=!1,panOnScrollSpeed:d=.5,panOnScrollMode:h=Fo.Free,zoomOnDoubleClick:p=!0,elementsSelectable:g,panOnDrag:v=!0,defaultViewport:x,translateExtent:b,minZoom:C,maxZoom:A,zoomActivationKeyCode:R,preventScrolling:$=!0,children:q,noWheelClassName:te,noPanClassName:F})=>{const ue=N.useRef(),ce=pn(),Y=N.useRef(!1),Q=N.useRef(!1),se=N.useRef(null),J=N.useRef({x:0,y:0,zoom:0}),{d3Zoom:U,d3Selection:re,d3ZoomHandler:ve,userSelectionActive:M}=Rt(yC,Un),ae=eu(R),L=N.useRef(0),pe=N.useRef(!1),oe=N.useRef();return mC(se),N.useEffect(()=>{if(se.current){const G=se.current.getBoundingClientRect(),de=U0().scaleExtent([C,A]).translateExtent(b),ge=gr(se.current).call(de),Se=wi.translate(x.x,x.y).scale(qa(x.zoom,C,A)),Te=[[0,0],[G.width,G.height]],Re=de.constrain()(Se,Te,b);de.transform(ge,Re),de.wheelDelta(ug),ce.setState({d3Zoom:de,d3Selection:ge,d3ZoomHandler:ge.on("wheel.zoom"),transform:[Re.x,Re.y,Re.k],domNode:se.current.closest(".react-flow")})}},[]),N.useEffect(()=>{re&&U&&(c&&!ae&&!M?re.on("wheel.zoom",G=>{if(Oa(G,te))return!1;G.preventDefault(),G.stopImmediatePropagation();const de=re.property("__zoom").k||1;if(G.ctrlKey&&u){const Ve=Pr(G),Ee=ug(G),rt=de*Math.pow(2,Ee);U.scaleTo(re,rt,Ve,G);return}const ge=G.deltaMode===1?20:1;let Se=h===Fo.Vertical?0:G.deltaX*ge,Te=h===Fo.Horizontal?0:G.deltaY*ge;!Ic()&&G.shiftKey&&h!==Fo.Vertical&&(Se=G.deltaY*ge,Te=0),U.translateBy(re,-(Se/de)*d,-(Te/de)*d,{internal:!0});const Re=hc(re.property("__zoom")),{onViewportChangeStart:Me,onViewportChange:Be,onViewportChangeEnd:Ke}=ce.getState();clearTimeout(oe.current),pe.current||(pe.current=!0,t==null||t(G,Re),Me==null||Me(Re)),pe.current&&(e==null||e(G,Re),Be==null||Be(Re),oe.current=setTimeout(()=>{n==null||n(G,Re),Ke==null||Ke(Re),pe.current=!1},150))},{passive:!1}):typeof ve<"u"&&re.on("wheel.zoom",function(G,de){if(!$&&G.type==="wheel"&&!G.ctrlKey||Oa(G,te))return null;G.preventDefault(),ve.call(this,G,de)},{passive:!1}))},[M,c,h,re,U,ve,ae,u,$,te,t,e,n]),N.useEffect(()=>{U&&U.on("start",G=>{var Se,Te;if(!G.sourceEvent||G.sourceEvent.internal)return null;L.current=(Se=G.sourceEvent)==null?void 0:Se.button;const{onViewportChangeStart:de}=ce.getState(),ge=hc(G.transform);Y.current=!0,J.current=ge,((Te=G.sourceEvent)==null?void 0:Te.type)==="mousedown"&&ce.setState({paneDragging:!0}),de==null||de(ge),t==null||t(G.sourceEvent,ge)})},[U,t]),N.useEffect(()=>{U&&(M&&!Y.current?U.on("zoom",null):M||U.on("zoom",G=>{var ge;const{onViewportChange:de}=ce.getState();if(ce.setState({transform:[G.transform.x,G.transform.y,G.transform.k]}),Q.current=!!(i&&sg(v,L.current??0)),(e||de)&&!((ge=G.sourceEvent)!=null&&ge.internal)){const Se=hc(G.transform);de==null||de(Se),e==null||e(G.sourceEvent,Se)}}))},[M,U,e,v,i]),N.useEffect(()=>{U&&U.on("end",G=>{if(!G.sourceEvent||G.sourceEvent.internal)return null;const{onViewportChangeEnd:de}=ce.getState();if(Y.current=!1,ce.setState({paneDragging:!1}),i&&sg(v,L.current??0)&&!Q.current&&i(G.sourceEvent),Q.current=!1,(n||de)&&gC(J.current,G.transform)){const ge=hc(G.transform);J.current=ge,clearTimeout(ue.current),ue.current=setTimeout(()=>{de==null||de(ge),n==null||n(G.sourceEvent,ge)},c?150:0)}})},[U,c,v,n,i]),N.useEffect(()=>{U&&U.filter(G=>{const de=ae||a,ge=u&&G.ctrlKey;if((v===!0||Array.isArray(v)&&v.includes(1))&&G.button===1&&G.type==="mousedown"&&(Oa(G,"react-flow__node")||Oa(G,"react-flow__edge")))return!0;if(!v&&!de&&!c&&!p&&!u||M||!p&&G.type==="dblclick"||Oa(G,te)&&G.type==="wheel"||Oa(G,F)&&(G.type!=="wheel"||c&&G.type==="wheel"&&!ae)||!u&&G.ctrlKey&&G.type==="wheel"||!de&&!c&&!ge&&G.type==="wheel"||!v&&(G.type==="mousedown"||G.type==="touchstart")||Array.isArray(v)&&!v.includes(G.button)&&G.type==="mousedown")return!1;const Se=Array.isArray(v)&&v.includes(G.button)||!G.button||G.button<=1;return(!G.ctrlKey||G.type==="wheel")&&Se})},[M,U,a,u,c,p,v,g,ae]),ne.createElement("div",{className:"react-flow__renderer",ref:se,style:hh},q)},wC=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function xC(){const{userSelectionActive:e,userSelectionRect:t}=Rt(wC,Un);return e&&t?ne.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function cg(e,t){const n=t.parentNode||t.parentId,i=e.find(a=>a.id===n);if(i){const a=t.position.x+t.width-i.width,u=t.position.y+t.height-i.height;if(a>0||u>0||t.position.x<0||t.position.y<0){if(i.style={...i.style},i.style.width=i.style.width??i.width,i.style.height=i.style.height??i.height,a>0&&(i.style.width+=a),u>0&&(i.style.height+=u),t.position.x<0){const c=Math.abs(t.position.x);i.position.x=i.position.x-c,i.style.width+=c,t.position.x=0}if(t.position.y<0){const c=Math.abs(t.position.y);i.position.y=i.position.y-c,i.style.height+=c,t.position.y=0}i.width=i.style.width,i.height=i.style.height}}}function bC(e,t){if(e.some(i=>i.type==="reset"))return e.filter(i=>i.type==="reset").map(i=>i.item);const n=e.filter(i=>i.type==="add").map(i=>i.item);return t.reduce((i,a)=>{const u=e.filter(d=>d.id===a.id);if(u.length===0)return i.push(a),i;const c={...a};for(const d of u)if(d)switch(d.type){case"select":{c.selected=d.selected;break}case"position":{typeof d.position<"u"&&(c.position=d.position),typeof d.positionAbsolute<"u"&&(c.positionAbsolute=d.positionAbsolute),typeof d.dragging<"u"&&(c.dragging=d.dragging),c.expandParent&&cg(i,c);break}case"dimensions":{typeof d.dimensions<"u"&&(c.width=d.dimensions.width,c.height=d.dimensions.height),typeof d.updateStyle<"u"&&(c.style={...c.style||{},...d.dimensions}),typeof d.resizing=="boolean"&&(c.resizing=d.resizing),c.expandParent&&cg(i,c);break}case"remove":return i}return i.push(c),i},n)}function _C(e,t){return bC(e,t)}const Ki=(e,t)=>({id:e,type:"select",selected:t});function Ia(e,t){return e.reduce((n,i)=>{const a=t.includes(i.id);return!i.selected&&a?(i.selected=!0,n.push(Ki(i.id,!0))):i.selected&&!a&&(i.selected=!1,n.push(Ki(i.id,!1))),n},[])}const Pf=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},SC=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Ey=N.memo(({isSelecting:e,selectionMode:t=Js.Full,panOnDrag:n,onSelectionStart:i,onSelectionEnd:a,onPaneClick:u,onPaneContextMenu:c,onPaneScroll:d,onPaneMouseEnter:h,onPaneMouseMove:p,onPaneMouseLeave:g,children:v})=>{const x=N.useRef(null),b=pn(),C=N.useRef(0),A=N.useRef(0),R=N.useRef(),{userSelectionActive:$,elementsSelectable:q,dragging:te}=Rt(SC,Un),F=()=>{b.setState({userSelectionActive:!1,userSelectionRect:null}),C.current=0,A.current=0},ue=ve=>{u==null||u(ve),b.getState().resetSelectedElements(),b.setState({nodesSelectionActive:!1})},ce=ve=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){ve.preventDefault();return}c==null||c(ve)},Y=d?ve=>d(ve):void 0,Q=ve=>{const{resetSelectedElements:M,domNode:ae}=b.getState();if(R.current=ae==null?void 0:ae.getBoundingClientRect(),!q||!e||ve.button!==0||ve.target!==x.current||!R.current)return;const{x:L,y:pe}=Zi(ve,R.current);M(),b.setState({userSelectionRect:{width:0,height:0,startX:L,startY:pe,x:L,y:pe}}),i==null||i(ve)},se=ve=>{const{userSelectionRect:M,nodeInternals:ae,edges:L,transform:pe,onNodesChange:oe,onEdgesChange:G,nodeOrigin:de,getNodes:ge}=b.getState();if(!e||!R.current||!M)return;b.setState({userSelectionActive:!0,nodesSelectionActive:!1});const Se=Zi(ve,R.current),Te=M.startX??0,Re=M.startY??0,Me={...M,x:Se.x<Te?Se.x:Te,y:Se.y<Re?Se.y:Re,width:Math.abs(Se.x-Te),height:Math.abs(Se.y-Re)},Be=ge(),Ke=ay(ae,Me,pe,t===Js.Partial,!0,de),Ve=sy(Ke,L).map(rt=>rt.id),Ee=Ke.map(rt=>rt.id);if(C.current!==Ee.length){C.current=Ee.length;const rt=Ia(Be,Ee);rt.length&&(oe==null||oe(rt))}if(A.current!==Ve.length){A.current=Ve.length;const rt=Ia(L,Ve);rt.length&&(G==null||G(rt))}b.setState({userSelectionRect:Me})},J=ve=>{if(ve.button!==0)return;const{userSelectionRect:M}=b.getState();!$&&M&&ve.target===x.current&&(ue==null||ue(ve)),b.setState({nodesSelectionActive:C.current>0}),F(),a==null||a(ve)},U=ve=>{$&&(b.setState({nodesSelectionActive:C.current>0}),a==null||a(ve)),F()},re=q&&(e||$);return ne.createElement("div",{className:Sn(["react-flow__pane",{dragging:te,selection:e}]),onClick:re?void 0:Pf(ue,x),onContextMenu:Pf(ce,x),onWheel:Pf(Y,x),onMouseEnter:re?void 0:h,onMouseDown:re?Q:void 0,onMouseMove:re?se:p,onMouseUp:re?J:void 0,onMouseLeave:re?U:g,ref:x,style:hh},v,ne.createElement(xC,null))});Ey.displayName="Pane";function Ny(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const i=t.get(n);return i?i.selected?!0:Ny(i,t):!1}function lg(e,t,n){let i=e;do{if(i!=null&&i.matches(t))return!0;if(i===n.current)return!1;i=i.parentElement}while(i);return!1}function EC(e,t,n,i){return Array.from(e.values()).filter(a=>(a.selected||a.id===i)&&(!a.parentNode||a.parentId||!Ny(a,e))&&(a.draggable||t&&typeof a.draggable>"u")).map(a=>{var u,c;return{id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((u=a.positionAbsolute)==null?void 0:u.x)??0),y:n.y-(((c=a.positionAbsolute)==null?void 0:c.y)??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}})}function NC(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function ky(e,t,n,i,a=[0,0],u){const c=NC(e,e.extent||i);let d=c;const h=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(h&&e.width&&e.height){const v=n.get(h),{x,y:b}=qo(v,a).positionAbsolute;d=v&&vr(x)&&vr(b)&&vr(v.width)&&vr(v.height)?[[x+e.width*a[0],b+e.height*a[1]],[x+v.width-e.width+e.width*a[0],b+v.height-e.height+e.height*a[1]]]:d}else u==null||u("005",_i.error005()),d=c;else if(e.extent&&h&&e.extent!=="parent"){const v=n.get(h),{x,y:b}=qo(v,a).positionAbsolute;d=[[e.extent[0][0]+x,e.extent[0][1]+b],[e.extent[1][0]+x,e.extent[1][1]+b]]}let p={x:0,y:0};if(h){const v=n.get(h);p=qo(v,a).positionAbsolute}const g=d&&d!=="parent"?oh(t,d):t;return{position:{x:g.x-p.x,y:g.y-p.y},positionAbsolute:g}}function Mf({nodeId:e,dragItems:t,nodeInternals:n}){const i=t.map(a=>({...n.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[e?i.find(a=>a.id===e):i[0],i]}const fg=(e,t,n,i)=>{const a=t.querySelectorAll(e);if(!a||!a.length)return null;const u=Array.from(a),c=t.getBoundingClientRect(),d={x:c.width*i[0],y:c.height*i[1]};return u.map(h=>{const p=h.getBoundingClientRect();return{id:h.getAttribute("data-handleid"),position:h.getAttribute("data-handlepos"),x:(p.left-c.left-d.x)/n,y:(p.top-c.top-d.y)/n,...ih(h)}})};function Ds(e,t,n){return n===void 0?n:i=>{const a=t().nodeInternals.get(e);a&&n(i,{...a})}}function gd({id:e,store:t,unselect:n=!1,nodeRef:i}){const{addSelectedNodes:a,unselectNodesAndEdges:u,multiSelectionActive:c,nodeInternals:d,onError:h}=t.getState(),p=d.get(e);if(!p){h==null||h("012",_i.error012(e));return}t.setState({nodesSelectionActive:!1}),p.selected?(n||p.selected&&c)&&(u({nodes:[p],edges:[]}),requestAnimationFrame(()=>{var g;return(g=i==null?void 0:i.current)==null?void 0:g.blur()})):a([e])}function kC(){const e=pn();return N.useCallback(({sourceEvent:n})=>{const{transform:i,snapGrid:a,snapToGrid:u}=e.getState(),c=n.touches?n.touches[0].clientX:n.clientX,d=n.touches?n.touches[0].clientY:n.clientY,h={x:(c-i[0])/i[2],y:(d-i[1])/i[2]};return{xSnapped:u?a[0]*Math.round(h.x/a[0]):h.x,ySnapped:u?a[1]*Math.round(h.y/a[1]):h.y,...h}},[])}function Rf(e){return(t,n,i)=>e==null?void 0:e(t,i)}function Ty({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:i,nodeId:a,isSelectable:u,selectNodesOnDrag:c}){const d=pn(),[h,p]=N.useState(!1),g=N.useRef([]),v=N.useRef({x:null,y:null}),x=N.useRef(0),b=N.useRef(null),C=N.useRef({x:0,y:0}),A=N.useRef(null),R=N.useRef(!1),$=N.useRef(!1),q=N.useRef(!1),te=kC();return N.useEffect(()=>{if(e!=null&&e.current){const F=gr(e.current),ue=({x:Q,y:se})=>{const{nodeInternals:J,onNodeDrag:U,onSelectionDrag:re,updateNodePositions:ve,nodeExtent:M,snapGrid:ae,snapToGrid:L,nodeOrigin:pe,onError:oe}=d.getState();v.current={x:Q,y:se};let G=!1,de={x:0,y:0,x2:0,y2:0};if(g.current.length>1&&M){const Se=el(g.current,pe);de=Qs(Se)}if(g.current=g.current.map(Se=>{const Te={x:Q-Se.distance.x,y:se-Se.distance.y};L&&(Te.x=ae[0]*Math.round(Te.x/ae[0]),Te.y=ae[1]*Math.round(Te.y/ae[1]));const Re=[[M[0][0],M[0][1]],[M[1][0],M[1][1]]];g.current.length>1&&M&&!Se.extent&&(Re[0][0]=Se.positionAbsolute.x-de.x+M[0][0],Re[1][0]=Se.positionAbsolute.x+(Se.width??0)-de.x2+M[1][0],Re[0][1]=Se.positionAbsolute.y-de.y+M[0][1],Re[1][1]=Se.positionAbsolute.y+(Se.height??0)-de.y2+M[1][1]);const Me=ky(Se,Te,J,Re,pe,oe);return G=G||Se.position.x!==Me.position.x||Se.position.y!==Me.position.y,Se.position=Me.position,Se.positionAbsolute=Me.positionAbsolute,Se}),!G)return;ve(g.current,!0,!0),p(!0);const ge=a?U:Rf(re);if(ge&&A.current){const[Se,Te]=Mf({nodeId:a,dragItems:g.current,nodeInternals:J});ge(A.current,Se,Te)}},ce=()=>{if(!b.current)return;const[Q,se]=G0(C.current,b.current);if(Q!==0||se!==0){const{transform:J,panBy:U}=d.getState();v.current.x=(v.current.x??0)-Q/J[2],v.current.y=(v.current.y??0)-se/J[2],U({x:Q,y:se})&&ue(v.current)}x.current=requestAnimationFrame(ce)},Y=Q=>{var pe;const{nodeInternals:se,multiSelectionActive:J,nodesDraggable:U,unselectNodesAndEdges:re,onNodeDragStart:ve,onSelectionDragStart:M}=d.getState();$.current=!0;const ae=a?ve:Rf(M);(!c||!u)&&!J&&a&&((pe=se.get(a))!=null&&pe.selected||re()),a&&u&&c&&gd({id:a,store:d,nodeRef:e});const L=te(Q);if(v.current=L,g.current=EC(se,U,L,a),ae&&g.current){const[oe,G]=Mf({nodeId:a,dragItems:g.current,nodeInternals:se});ae(Q.sourceEvent,oe,G)}};if(t)F.on(".drag",null);else{const Q=$k().on("start",se=>{const{domNode:J,nodeDragThreshold:U}=d.getState();U===0&&Y(se),q.current=!1;const re=te(se);v.current=re,b.current=(J==null?void 0:J.getBoundingClientRect())||null,C.current=Zi(se.sourceEvent,b.current)}).on("drag",se=>{var ve,M;const J=te(se),{autoPanOnNodeDrag:U,nodeDragThreshold:re}=d.getState();if(se.sourceEvent.type==="touchmove"&&se.sourceEvent.touches.length>1&&(q.current=!0),!q.current){if(!R.current&&$.current&&U&&(R.current=!0,ce()),!$.current){const ae=J.xSnapped-(((ve=v==null?void 0:v.current)==null?void 0:ve.x)??0),L=J.ySnapped-(((M=v==null?void 0:v.current)==null?void 0:M.y)??0);Math.sqrt(ae*ae+L*L)>re&&Y(se)}(v.current.x!==J.xSnapped||v.current.y!==J.ySnapped)&&g.current&&$.current&&(A.current=se.sourceEvent,C.current=Zi(se.sourceEvent,b.current),ue(J))}}).on("end",se=>{if(!(!$.current||q.current)&&(p(!1),R.current=!1,$.current=!1,cancelAnimationFrame(x.current),g.current)){const{updateNodePositions:J,nodeInternals:U,onNodeDragStop:re,onSelectionDragStop:ve}=d.getState(),M=a?re:Rf(ve);if(J(g.current,!1,!1),M){const[ae,L]=Mf({nodeId:a,dragItems:g.current,nodeInternals:U});M(se.sourceEvent,ae,L)}}}).filter(se=>{const J=se.target;return!se.button&&(!n||!lg(J,`.${n}`,e))&&(!i||lg(J,i,e))});return F.call(Q),()=>{F.on(".drag",null)}}}},[e,t,n,i,u,d,a,c,te]),h}function Cy(){const e=pn();return N.useCallback(n=>{const{nodeInternals:i,nodeExtent:a,updateNodePositions:u,getNodes:c,snapToGrid:d,snapGrid:h,onError:p,nodesDraggable:g}=e.getState(),v=c().filter(q=>q.selected&&(q.draggable||g&&typeof q.draggable>"u")),x=d?h[0]:5,b=d?h[1]:5,C=n.isShiftPressed?4:1,A=n.x*x*C,R=n.y*b*C,$=v.map(q=>{if(q.positionAbsolute){const te={x:q.positionAbsolute.x+A,y:q.positionAbsolute.y+R};d&&(te.x=h[0]*Math.round(te.x/h[0]),te.y=h[1]*Math.round(te.y/h[1]));const{positionAbsolute:F,position:ue}=ky(q,te,i,a,void 0,p);q.position=ue,q.positionAbsolute=F}return q});u($,!0,!1)},[])}const Fa={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Is=e=>{const t=({id:n,type:i,data:a,xPos:u,yPos:c,xPosOrigin:d,yPosOrigin:h,selected:p,onClick:g,onMouseEnter:v,onMouseMove:x,onMouseLeave:b,onContextMenu:C,onDoubleClick:A,style:R,className:$,isDraggable:q,isSelectable:te,isConnectable:F,isFocusable:ue,selectNodesOnDrag:ce,sourcePosition:Y,targetPosition:Q,hidden:se,resizeObserver:J,dragHandle:U,zIndex:re,isParent:ve,noDragClassName:M,noPanClassName:ae,initialized:L,disableKeyboardA11y:pe,ariaLabel:oe,rfId:G,hasHandleBounds:de})=>{const ge=pn(),Se=N.useRef(null),Te=N.useRef(null),Re=N.useRef(Y),Me=N.useRef(Q),Be=N.useRef(i),Ke=te||q||g||v||x||b,Ve=Cy(),Ee=Ds(n,ge.getState,v),rt=Ds(n,ge.getState,x),xt=Ds(n,ge.getState,b),ze=Ds(n,ge.getState,C),Nt=Ds(n,ge.getState,A),Ge=et=>{const{nodeDragThreshold:We}=ge.getState();if(te&&(!ce||!q||We>0)&&gd({id:n,store:ge,nodeRef:Se}),g){const Ft=ge.getState().nodeInternals.get(n);Ft&&g(et,{...Ft})}},it=et=>{if(!fd(et)&&!pe)if(J0.includes(et.key)&&te){const We=et.key==="Escape";gd({id:n,store:ge,unselect:We,nodeRef:Se})}else q&&p&&Object.prototype.hasOwnProperty.call(Fa,et.key)&&(ge.setState({ariaLiveMessage:`Moved selected node ${et.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~u}, y: ${~~c}`}),Ve({x:Fa[et.key].x,y:Fa[et.key].y,isShiftPressed:et.shiftKey}))};N.useEffect(()=>()=>{Te.current&&(J==null||J.unobserve(Te.current),Te.current=null)},[]),N.useEffect(()=>{if(Se.current&&!se){const et=Se.current;(!L||!de||Te.current!==et)&&(Te.current&&(J==null||J.unobserve(Te.current)),J==null||J.observe(et),Te.current=et)}},[se,L,de]),N.useEffect(()=>{const et=Be.current!==i,We=Re.current!==Y,Ft=Me.current!==Q;Se.current&&(et||We||Ft)&&(et&&(Be.current=i),We&&(Re.current=Y),Ft&&(Me.current=Q),ge.getState().updateNodeDimensions([{id:n,nodeElement:Se.current,forceUpdate:!0}]))},[n,i,Y,Q]);const Et=Ty({nodeRef:Se,disabled:se||!q,noDragClassName:M,handleSelector:U,nodeId:n,isSelectable:te,selectNodesOnDrag:ce});return se?null:ne.createElement("div",{className:Sn(["react-flow__node",`react-flow__node-${i}`,{[ae]:q},$,{selected:p,selectable:te,parent:ve,dragging:Et}]),ref:Se,style:{zIndex:re,transform:`translate(${d}px,${h}px)`,pointerEvents:Ke?"all":"none",visibility:L?"visible":"hidden",...R},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:Ee,onMouseMove:rt,onMouseLeave:xt,onContextMenu:ze,onClick:Ge,onDoubleClick:Nt,onKeyDown:ue?it:void 0,tabIndex:ue?0:void 0,role:ue?"button":void 0,"aria-describedby":pe?void 0:`${wy}-${G}`,"aria-label":oe},ne.createElement(FT,{value:n},ne.createElement(e,{id:n,data:a,type:i,xPos:u,yPos:c,selected:p,isConnectable:F,sourcePosition:Y,targetPosition:Q,dragging:Et,dragHandle:U,zIndex:re})))};return t.displayName="NodeWrapper",N.memo(t)};const TC=e=>{const t=e.getNodes().filter(n=>n.selected);return{...el(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function CC({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const i=pn(),{width:a,height:u,x:c,y:d,transformString:h,userSelectionActive:p}=Rt(TC,Un),g=Cy(),v=N.useRef(null);if(N.useEffect(()=>{var C;n||(C=v.current)==null||C.focus({preventScroll:!0})},[n]),Ty({nodeRef:v}),p||!a||!u)return null;const x=e?C=>{const A=i.getState().getNodes().filter(R=>R.selected);e(C,A)}:void 0,b=C=>{Object.prototype.hasOwnProperty.call(Fa,C.key)&&g({x:Fa[C.key].x,y:Fa[C.key].y,isShiftPressed:C.shiftKey})};return ne.createElement("div",{className:Sn(["react-flow__nodesselection","react-flow__container",t]),style:{transform:h}},ne.createElement("div",{ref:v,className:"react-flow__nodesselection-rect",onContextMenu:x,tabIndex:n?void 0:-1,onKeyDown:n?void 0:b,style:{width:a,height:u,top:d,left:c}}))}var OC=N.memo(CC);const AC=e=>e.nodesSelectionActive,Oy=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:u,onPaneScroll:c,deleteKeyCode:d,onMove:h,onMoveStart:p,onMoveEnd:g,selectionKeyCode:v,selectionOnDrag:x,selectionMode:b,onSelectionStart:C,onSelectionEnd:A,multiSelectionKeyCode:R,panActivationKeyCode:$,zoomActivationKeyCode:q,elementsSelectable:te,zoomOnScroll:F,zoomOnPinch:ue,panOnScroll:ce,panOnScrollSpeed:Y,panOnScrollMode:Q,zoomOnDoubleClick:se,panOnDrag:J,defaultViewport:U,translateExtent:re,minZoom:ve,maxZoom:M,preventScrolling:ae,onSelectionContextMenu:L,noWheelClassName:pe,noPanClassName:oe,disableKeyboardA11y:G})=>{const de=Rt(AC),ge=eu(v),Se=eu($),Te=Se||J,Re=Se||ce,Me=ge||x&&Te!==!0;return pC({deleteKeyCode:d,multiSelectionKeyCode:R}),ne.createElement(vC,{onMove:h,onMoveStart:p,onMoveEnd:g,onPaneContextMenu:u,elementsSelectable:te,zoomOnScroll:F,zoomOnPinch:ue,panOnScroll:Re,panOnScrollSpeed:Y,panOnScrollMode:Q,zoomOnDoubleClick:se,panOnDrag:!ge&&Te,defaultViewport:U,translateExtent:re,minZoom:ve,maxZoom:M,zoomActivationKeyCode:q,preventScrolling:ae,noWheelClassName:pe,noPanClassName:oe},ne.createElement(Ey,{onSelectionStart:C,onSelectionEnd:A,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:u,onPaneScroll:c,panOnDrag:Te,isSelecting:!!Me,selectionMode:b},e,de&&ne.createElement(OC,{onSelectionContextMenu:L,noPanClassName:oe,disableKeyboardA11y:G})))};Oy.displayName="FlowRenderer";var DC=N.memo(Oy);function IC(e){return Rt(N.useCallback(n=>e?ay(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function PC(e){const t={input:Is(e.input||my),default:Is(e.default||md),output:Is(e.output||yy),group:Is(e.group||fh)},n={},i=Object.keys(e).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,u)=>(a[u]=Is(e[u]||md),a),n);return{...t,...i}}const MC=({x:e,y:t,width:n,height:i,origin:a})=>!n||!i?{x:e,y:t}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:e,y:t}:{x:e-n*a[0],y:t-i*a[1]},RC=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Ay=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:i,elementsSelectable:a,updateNodeDimensions:u,onError:c}=Rt(RC,Un),d=IC(e.onlyRenderVisibleElements),h=N.useRef(),p=N.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const g=new ResizeObserver(v=>{const x=v.map(b=>({id:b.target.getAttribute("data-id"),nodeElement:b.target,forceUpdate:!0}));u(x)});return h.current=g,g},[]);return N.useEffect(()=>()=>{var g;(g=h==null?void 0:h.current)==null||g.disconnect()},[]),ne.createElement("div",{className:"react-flow__nodes",style:hh},d.map(g=>{var ue,ce,Y;let v=g.type||"default";e.nodeTypes[v]||(c==null||c("003",_i.error003(v)),v="default");const x=e.nodeTypes[v]||e.nodeTypes.default,b=!!(g.draggable||t&&typeof g.draggable>"u"),C=!!(g.selectable||a&&typeof g.selectable>"u"),A=!!(g.connectable||n&&typeof g.connectable>"u"),R=!!(g.focusable||i&&typeof g.focusable>"u"),$=e.nodeExtent?oh(g.positionAbsolute,e.nodeExtent):g.positionAbsolute,q=($==null?void 0:$.x)??0,te=($==null?void 0:$.y)??0,F=MC({x:q,y:te,width:g.width??0,height:g.height??0,origin:e.nodeOrigin});return ne.createElement(x,{key:g.id,id:g.id,className:g.className,style:g.style,type:v,data:g.data,sourcePosition:g.sourcePosition||Ye.Bottom,targetPosition:g.targetPosition||Ye.Top,hidden:g.hidden,xPos:q,yPos:te,xPosOrigin:F.x,yPosOrigin:F.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!g.selected,isDraggable:b,isSelectable:C,isConnectable:A,isFocusable:R,resizeObserver:p,dragHandle:g.dragHandle,zIndex:((ue=g[en])==null?void 0:ue.z)??0,isParent:!!((ce=g[en])!=null&&ce.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!g.width&&!!g.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:g.ariaLabel,hasHandleBounds:!!((Y=g[en])!=null&&Y.handleBounds)})}))};Ay.displayName="NodeRenderer";var $C=N.memo(Ay);const jC=(e,t,n)=>n===Ye.Left?e-t:n===Ye.Right?e+t:e,LC=(e,t,n)=>n===Ye.Top?e-t:n===Ye.Bottom?e+t:e,dg="react-flow__edgeupdater",hg=({position:e,centerX:t,centerY:n,radius:i=10,onMouseDown:a,onMouseEnter:u,onMouseOut:c,type:d})=>ne.createElement("circle",{onMouseDown:a,onMouseEnter:u,onMouseOut:c,className:Sn([dg,`${dg}-${d}`]),cx:jC(t,i,e),cy:LC(n,i,e),r:i,stroke:"transparent",fill:"transparent"}),FC=()=>!0;var Aa=e=>{const t=({id:n,className:i,type:a,data:u,onClick:c,onEdgeDoubleClick:d,selected:h,animated:p,label:g,labelStyle:v,labelShowBg:x,labelBgStyle:b,labelBgPadding:C,labelBgBorderRadius:A,style:R,source:$,target:q,sourceX:te,sourceY:F,targetX:ue,targetY:ce,sourcePosition:Y,targetPosition:Q,elementsSelectable:se,hidden:J,sourceHandleId:U,targetHandleId:re,onContextMenu:ve,onMouseEnter:M,onMouseMove:ae,onMouseLeave:L,reconnectRadius:pe,onReconnect:oe,onReconnectStart:G,onReconnectEnd:de,markerEnd:ge,markerStart:Se,rfId:Te,ariaLabel:Re,isFocusable:Me,isReconnectable:Be,pathOptions:Ke,interactionWidth:Ve,disableKeyboardA11y:Ee})=>{const rt=N.useRef(null),[xt,ze]=N.useState(!1),[Nt,Ge]=N.useState(!1),it=pn(),Et=N.useMemo(()=>`url('#${hd(Se,Te)}')`,[Se,Te]),et=N.useMemo(()=>`url('#${hd(ge,Te)}')`,[ge,Te]);if(J)return null;const We=_t=>{var le;const{edges:Bt,addSelectedEdges:Ut,unselectNodesAndEdges:$t,multiSelectionActive:je}=it.getState(),zt=Bt.find(xe=>xe.id===n);zt&&(se&&(it.setState({nodesSelectionActive:!1}),zt.selected&&je?($t({nodes:[],edges:[zt]}),(le=rt.current)==null||le.blur()):Ut([n])),c&&c(_t,zt))},Ft=As(n,it.getState,d),Wt=As(n,it.getState,ve),bt=As(n,it.getState,M),an=As(n,it.getState,ae),qt=As(n,it.getState,L),sn=(_t,Bt)=>{if(_t.button!==0)return;const{edges:Ut,isValidConnection:$t}=it.getState(),je=Bt?q:$,zt=(Bt?re:U)||null,le=Bt?"target":"source",xe=$t||FC,fe=Bt,Oe=Ut.find(Ue=>Ue.id===n);Ge(!0),G==null||G(_t,Oe,le);const Le=Ue=>{Ge(!1),de==null||de(Ue,Oe,le)};fy({event:_t,handleId:zt,nodeId:je,onConnect:Ue=>oe==null?void 0:oe(Oe,Ue),isTarget:fe,getState:it.getState,setState:it.setState,isValidConnection:xe,edgeUpdaterType:le,onReconnectEnd:Le})},Qt=_t=>sn(_t,!0),Yt=_t=>sn(_t,!1),tn=()=>ze(!0),Kt=()=>ze(!1),un=!se&&!c,fn=_t=>{var Bt;if(!Ee&&J0.includes(_t.key)&&se){const{unselectNodesAndEdges:Ut,addSelectedEdges:$t,edges:je}=it.getState();_t.key==="Escape"?((Bt=rt.current)==null||Bt.blur(),Ut({edges:[je.find(le=>le.id===n)]})):$t([n])}};return ne.createElement("g",{className:Sn(["react-flow__edge",`react-flow__edge-${a}`,i,{selected:h,animated:p,inactive:un,updating:xt}]),onClick:We,onDoubleClick:Ft,onContextMenu:Wt,onMouseEnter:bt,onMouseMove:an,onMouseLeave:qt,onKeyDown:Me?fn:void 0,tabIndex:Me?0:void 0,role:Me?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":Re===null?void 0:Re||`Edge from ${$} to ${q}`,"aria-describedby":Me?`${xy}-${Te}`:void 0,ref:rt},!Nt&&ne.createElement(e,{id:n,source:$,target:q,selected:h,animated:p,label:g,labelStyle:v,labelShowBg:x,labelBgStyle:b,labelBgPadding:C,labelBgBorderRadius:A,data:u,style:R,sourceX:te,sourceY:F,targetX:ue,targetY:ce,sourcePosition:Y,targetPosition:Q,sourceHandleId:U,targetHandleId:re,markerStart:Et,markerEnd:et,pathOptions:Ke,interactionWidth:Ve}),Be&&ne.createElement(ne.Fragment,null,(Be==="source"||Be===!0)&&ne.createElement(hg,{position:Y,centerX:te,centerY:F,radius:pe,onMouseDown:Qt,onMouseEnter:tn,onMouseOut:Kt,type:"source"}),(Be==="target"||Be===!0)&&ne.createElement(hg,{position:Q,centerX:ue,centerY:ce,radius:pe,onMouseDown:Yt,onMouseEnter:tn,onMouseOut:Kt,type:"target"})))};return t.displayName="EdgeWrapper",N.memo(t)};function WC(e){const t={default:Aa(e.default||Mc),straight:Aa(e.bezier||uh),step:Aa(e.step||sh),smoothstep:Aa(e.step||Jc),simplebezier:Aa(e.simplebezier||ah)},n={},i=Object.keys(e).filter(a=>!["default","bezier"].includes(a)).reduce((a,u)=>(a[u]=Aa(e[u]||Mc),a),n);return{...t,...i}}function pg(e,t,n=null){const i=((n==null?void 0:n.x)||0)+t.x,a=((n==null?void 0:n.y)||0)+t.y,u=(n==null?void 0:n.width)||t.width,c=(n==null?void 0:n.height)||t.height;switch(e){case Ye.Top:return{x:i+u/2,y:a};case Ye.Right:return{x:i+u,y:a+c/2};case Ye.Bottom:return{x:i+u/2,y:a+c};case Ye.Left:return{x:i,y:a+c/2}}}function mg(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const BC=(e,t,n,i,a,u)=>{const c=pg(n,e,t),d=pg(u,i,a);return{sourceX:c.x,sourceY:c.y,targetX:d.x,targetY:d.y}};function zC({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:i,targetWidth:a,targetHeight:u,width:c,height:d,transform:h}){const p={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+a),y2:Math.max(e.y+i,t.y+u)};p.x===p.x2&&(p.x2+=1),p.y===p.y2&&(p.y2+=1);const g=Qs({x:(0-h[0])/h[2],y:(0-h[1])/h[2],width:c/h[2],height:d/h[2]}),v=Math.max(0,Math.min(g.x2,p.x2)-Math.max(g.x,p.x)),x=Math.max(0,Math.min(g.y2,p.y2)-Math.max(g.y,p.y));return Math.ceil(v*x)>0}function gg(e){var i,a,u,c,d;const t=((i=e==null?void 0:e[en])==null?void 0:i.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.x)<"u"&&typeof((u=e==null?void 0:e.positionAbsolute)==null?void 0:u.y)<"u";return[{x:((c=e==null?void 0:e.positionAbsolute)==null?void 0:c.x)||0,y:((d=e==null?void 0:e.positionAbsolute)==null?void 0:d.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const HC=[{level:0,isMaxLevel:!0,edges:[]}];function qC(e,t,n=!1){let i=-1;const a=e.reduce((c,d)=>{var g,v;const h=vr(d.zIndex);let p=h?d.zIndex:0;if(n){const x=t.get(d.target),b=t.get(d.source),C=d.selected||(x==null?void 0:x.selected)||(b==null?void 0:b.selected),A=Math.max(((g=b==null?void 0:b[en])==null?void 0:g.z)||0,((v=x==null?void 0:x[en])==null?void 0:v.z)||0,1e3);p=(h?d.zIndex:0)+(C?A:0)}return c[p]?c[p].push(d):c[p]=[d],i=p>i?p:i,c},{}),u=Object.entries(a).map(([c,d])=>{const h=+c;return{edges:d,level:h,isMaxLevel:h===i}});return u.length===0?HC:u}function YC(e,t,n){const i=Rt(N.useCallback(a=>e?a.edges.filter(u=>{const c=t.get(u.source),d=t.get(u.target);return(c==null?void 0:c.width)&&(c==null?void 0:c.height)&&(d==null?void 0:d.width)&&(d==null?void 0:d.height)&&zC({sourcePos:c.positionAbsolute||{x:0,y:0},targetPos:d.positionAbsolute||{x:0,y:0},sourceWidth:c.width,sourceHeight:c.height,targetWidth:d.width,targetHeight:d.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[e,t]));return qC(i,t,n)}const KC=({color:e="none",strokeWidth:t=1})=>ne.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),UC=({color:e="none",strokeWidth:t=1})=>ne.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),yg={[Pc.Arrow]:KC,[Pc.ArrowClosed]:UC};function VC(e){const t=pn();return N.useMemo(()=>{var a,u;return Object.prototype.hasOwnProperty.call(yg,e)?yg[e]:((u=(a=t.getState()).onError)==null||u.call(a,"009",_i.error009(e)),null)},[e])}const GC=({id:e,type:t,color:n,width:i=12.5,height:a=12.5,markerUnits:u="strokeWidth",strokeWidth:c,orient:d="auto-start-reverse"})=>{const h=VC(t);return h?ne.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${i}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:u,orient:d,refX:"0",refY:"0"},ne.createElement(h,{color:n,strokeWidth:c})):null},XC=({defaultColor:e,rfId:t})=>n=>{const i=[];return n.edges.reduce((a,u)=>([u.markerStart,u.markerEnd].forEach(c=>{if(c&&typeof c=="object"){const d=hd(c,t);i.includes(d)||(a.push({id:d,color:c.color||e,...c}),i.push(d))}}),a),[]).sort((a,u)=>a.id.localeCompare(u.id))},Dy=({defaultColor:e,rfId:t})=>{const n=Rt(N.useCallback(XC({defaultColor:e,rfId:t}),[e,t]),(i,a)=>!(i.length!==a.length||i.some((u,c)=>u.id!==a[c].id)));return ne.createElement("defs",null,n.map(i=>ne.createElement(GC,{id:i.id,key:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient})))};Dy.displayName="MarkerDefinitions";var ZC=N.memo(Dy);const QC=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),Iy=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:i,edgeTypes:a,noPanClassName:u,onEdgeContextMenu:c,onEdgeMouseEnter:d,onEdgeMouseMove:h,onEdgeMouseLeave:p,onEdgeClick:g,onEdgeDoubleClick:v,onReconnect:x,onReconnectStart:b,onReconnectEnd:C,reconnectRadius:A,children:R,disableKeyboardA11y:$})=>{const{edgesFocusable:q,edgesUpdatable:te,elementsSelectable:F,width:ue,height:ce,connectionMode:Y,nodeInternals:Q,onError:se}=Rt(QC,Un),J=YC(t,Q,n);return ue?ne.createElement(ne.Fragment,null,J.map(({level:U,edges:re,isMaxLevel:ve})=>ne.createElement("svg",{key:U,style:{zIndex:U},width:ue,height:ce,className:"react-flow__edges react-flow__container"},ve&&ne.createElement(ZC,{defaultColor:e,rfId:i}),ne.createElement("g",null,re.map(M=>{const[ae,L,pe]=gg(Q.get(M.source)),[oe,G,de]=gg(Q.get(M.target));if(!pe||!de)return null;let ge=M.type||"default";a[ge]||(se==null||se("011",_i.error011(ge)),ge="default");const Se=a[ge]||a.default,Te=Y===Go.Strict?G.target:(G.target??[]).concat(G.source??[]),Re=mg(L.source,M.sourceHandle),Me=mg(Te,M.targetHandle),Be=(Re==null?void 0:Re.position)||Ye.Bottom,Ke=(Me==null?void 0:Me.position)||Ye.Top,Ve=!!(M.focusable||q&&typeof M.focusable>"u"),Ee=M.reconnectable||M.updatable,rt=typeof x<"u"&&(Ee||te&&typeof Ee>"u");if(!Re||!Me)return se==null||se("008",_i.error008(Re,M)),null;const{sourceX:xt,sourceY:ze,targetX:Nt,targetY:Ge}=BC(ae,Re,Be,oe,Me,Ke);return ne.createElement(Se,{key:M.id,id:M.id,className:Sn([M.className,u]),type:ge,data:M.data,selected:!!M.selected,animated:!!M.animated,hidden:!!M.hidden,label:M.label,labelStyle:M.labelStyle,labelShowBg:M.labelShowBg,labelBgStyle:M.labelBgStyle,labelBgPadding:M.labelBgPadding,labelBgBorderRadius:M.labelBgBorderRadius,style:M.style,source:M.source,target:M.target,sourceHandleId:M.sourceHandle,targetHandleId:M.targetHandle,markerEnd:M.markerEnd,markerStart:M.markerStart,sourceX:xt,sourceY:ze,targetX:Nt,targetY:Ge,sourcePosition:Be,targetPosition:Ke,elementsSelectable:F,onContextMenu:c,onMouseEnter:d,onMouseMove:h,onMouseLeave:p,onClick:g,onEdgeDoubleClick:v,onReconnect:x,onReconnectStart:b,onReconnectEnd:C,reconnectRadius:A,rfId:i,ariaLabel:M.ariaLabel,isFocusable:Ve,isReconnectable:rt,pathOptions:"pathOptions"in M?M.pathOptions:void 0,interactionWidth:M.interactionWidth,disableKeyboardA11y:$})})))),R):null};Iy.displayName="EdgeRenderer";var JC=N.memo(Iy);const eO=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function tO({children:e}){const t=Rt(eO);return ne.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function nO(e){const t=dh(),n=N.useRef(!1);N.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const rO={[Ye.Left]:Ye.Right,[Ye.Right]:Ye.Left,[Ye.Top]:Ye.Bottom,[Ye.Bottom]:Ye.Top},Py=({nodeId:e,handleType:t,style:n,type:i=Ui.Bezier,CustomComponent:a,connectionStatus:u})=>{var ce,Y,Q;const{fromNode:c,handleId:d,toX:h,toY:p,connectionMode:g}=Rt(N.useCallback(se=>({fromNode:se.nodeInternals.get(e),handleId:se.connectionHandleId,toX:(se.connectionPosition.x-se.transform[0])/se.transform[2],toY:(se.connectionPosition.y-se.transform[1])/se.transform[2],connectionMode:se.connectionMode}),[e]),Un),v=(ce=c==null?void 0:c[en])==null?void 0:ce.handleBounds;let x=v==null?void 0:v[t];if(g===Go.Loose&&(x=x||(v==null?void 0:v[t==="source"?"target":"source"])),!c||!x)return null;const b=d?x.find(se=>se.id===d):x[0],C=b?b.x+b.width/2:(c.width??0)/2,A=b?b.y+b.height/2:c.height??0,R=(((Y=c.positionAbsolute)==null?void 0:Y.x)??0)+C,$=(((Q=c.positionAbsolute)==null?void 0:Q.y)??0)+A,q=b==null?void 0:b.position,te=q?rO[q]:null;if(!q||!te)return null;if(a)return ne.createElement(a,{connectionLineType:i,connectionLineStyle:n,fromNode:c,fromHandle:b,fromX:R,fromY:$,toX:h,toY:p,fromPosition:q,toPosition:te,connectionStatus:u});let F="";const ue={sourceX:R,sourceY:$,sourcePosition:q,targetX:h,targetY:p,targetPosition:te};return i===Ui.Bezier?[F]=iy(ue):i===Ui.Step?[F]=dd({...ue,borderRadius:0}):i===Ui.SmoothStep?[F]=dd(ue):i===Ui.SimpleBezier?[F]=ry(ue):F=`M${R},${$} ${h},${p}`,ne.createElement("path",{d:F,fill:"none",className:"react-flow__connection-path",style:n})};Py.displayName="ConnectionLine";const iO=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function oO({containerStyle:e,style:t,type:n,component:i}){const{nodeId:a,handleType:u,nodesConnectable:c,width:d,height:h,connectionStatus:p}=Rt(iO,Un);return!(a&&u&&d&&c)?null:ne.createElement("svg",{style:e,width:d,height:h,className:"react-flow__edges react-flow__connectionline react-flow__container"},ne.createElement("g",{className:Sn(["react-flow__connection",p])},ne.createElement(Py,{nodeId:a,handleType:u,style:t,type:n,CustomComponent:i,connectionStatus:p})))}function vg(e,t){return N.useRef(null),pn(),N.useMemo(()=>t(e),[e])}const My=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:i,onMoveEnd:a,onInit:u,onNodeClick:c,onEdgeClick:d,onNodeDoubleClick:h,onEdgeDoubleClick:p,onNodeMouseEnter:g,onNodeMouseMove:v,onNodeMouseLeave:x,onNodeContextMenu:b,onSelectionContextMenu:C,onSelectionStart:A,onSelectionEnd:R,connectionLineType:$,connectionLineStyle:q,connectionLineComponent:te,connectionLineContainerStyle:F,selectionKeyCode:ue,selectionOnDrag:ce,selectionMode:Y,multiSelectionKeyCode:Q,panActivationKeyCode:se,zoomActivationKeyCode:J,deleteKeyCode:U,onlyRenderVisibleElements:re,elementsSelectable:ve,selectNodesOnDrag:M,defaultViewport:ae,translateExtent:L,minZoom:pe,maxZoom:oe,preventScrolling:G,defaultMarkerColor:de,zoomOnScroll:ge,zoomOnPinch:Se,panOnScroll:Te,panOnScrollSpeed:Re,panOnScrollMode:Me,zoomOnDoubleClick:Be,panOnDrag:Ke,onPaneClick:Ve,onPaneMouseEnter:Ee,onPaneMouseMove:rt,onPaneMouseLeave:xt,onPaneScroll:ze,onPaneContextMenu:Nt,onEdgeContextMenu:Ge,onEdgeMouseEnter:it,onEdgeMouseMove:Et,onEdgeMouseLeave:et,onReconnect:We,onReconnectStart:Ft,onReconnectEnd:Wt,reconnectRadius:bt,noDragClassName:an,noWheelClassName:qt,noPanClassName:sn,elevateEdgesOnSelect:Qt,disableKeyboardA11y:Yt,nodeOrigin:tn,nodeExtent:Kt,rfId:un})=>{const fn=vg(e,PC),_t=vg(t,WC);return nO(u),ne.createElement(DC,{onPaneClick:Ve,onPaneMouseEnter:Ee,onPaneMouseMove:rt,onPaneMouseLeave:xt,onPaneContextMenu:Nt,onPaneScroll:ze,deleteKeyCode:U,selectionKeyCode:ue,selectionOnDrag:ce,selectionMode:Y,onSelectionStart:A,onSelectionEnd:R,multiSelectionKeyCode:Q,panActivationKeyCode:se,zoomActivationKeyCode:J,elementsSelectable:ve,onMove:n,onMoveStart:i,onMoveEnd:a,zoomOnScroll:ge,zoomOnPinch:Se,zoomOnDoubleClick:Be,panOnScroll:Te,panOnScrollSpeed:Re,panOnScrollMode:Me,panOnDrag:Ke,defaultViewport:ae,translateExtent:L,minZoom:pe,maxZoom:oe,onSelectionContextMenu:C,preventScrolling:G,noDragClassName:an,noWheelClassName:qt,noPanClassName:sn,disableKeyboardA11y:Yt},ne.createElement(tO,null,ne.createElement(JC,{edgeTypes:_t,onEdgeClick:d,onEdgeDoubleClick:p,onlyRenderVisibleElements:re,onEdgeContextMenu:Ge,onEdgeMouseEnter:it,onEdgeMouseMove:Et,onEdgeMouseLeave:et,onReconnect:We,onReconnectStart:Ft,onReconnectEnd:Wt,reconnectRadius:bt,defaultMarkerColor:de,noPanClassName:sn,elevateEdgesOnSelect:!!Qt,disableKeyboardA11y:Yt,rfId:un},ne.createElement(oO,{style:q,type:$,component:te,containerStyle:F})),ne.createElement("div",{className:"react-flow__edgelabel-renderer"}),ne.createElement($C,{nodeTypes:fn,onNodeClick:c,onNodeDoubleClick:h,onNodeMouseEnter:g,onNodeMouseMove:v,onNodeMouseLeave:x,onNodeContextMenu:b,selectNodesOnDrag:M,onlyRenderVisibleElements:re,noPanClassName:sn,noDragClassName:an,disableKeyboardA11y:Yt,nodeOrigin:tn,nodeExtent:Kt,rfId:un})))};My.displayName="GraphView";var aO=N.memo(My);const yd=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Hi={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:yd,nodeExtent:yd,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Go.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:PT,isValidConnection:void 0},sO=()=>VE((e,t)=>({...Hi,setNodes:n=>{const{nodeInternals:i,nodeOrigin:a,elevateNodesOnSelect:u}=t();e({nodeInternals:If(n,i,a,u)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:i={}}=t();e({edges:n.map(a=>({...i,...a}))})},setDefaultNodesAndEdges:(n,i)=>{const a=typeof n<"u",u=typeof i<"u",c=a?If(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:c,edges:u?i:[],hasDefaultNodes:a,hasDefaultEdges:u})},updateNodeDimensions:n=>{const{onNodesChange:i,nodeInternals:a,fitViewOnInit:u,fitViewOnInitDone:c,fitViewOnInitOptions:d,domNode:h,nodeOrigin:p}=t(),g=h==null?void 0:h.querySelector(".react-flow__viewport");if(!g)return;const v=window.getComputedStyle(g),{m22:x}=new window.DOMMatrixReadOnly(v.transform),b=n.reduce((A,R)=>{const $=a.get(R.id);if($!=null&&$.hidden)a.set($.id,{...$,[en]:{...$[en],handleBounds:void 0}});else if($){const q=ih(R.nodeElement);!!(q.width&&q.height&&($.width!==q.width||$.height!==q.height||R.forceUpdate))&&(a.set($.id,{...$,[en]:{...$[en],handleBounds:{source:fg(".source",R.nodeElement,x,p),target:fg(".target",R.nodeElement,x,p)}},...q}),A.push({id:$.id,type:"dimensions",dimensions:q}))}return A},[]);_y(a,p);const C=c||u&&!c&&Sy(t,{initial:!0,...d});e({nodeInternals:new Map(a),fitViewOnInitDone:C}),(b==null?void 0:b.length)>0&&(i==null||i(b))},updateNodePositions:(n,i=!0,a=!1)=>{const{triggerNodeChanges:u}=t(),c=n.map(d=>{const h={id:d.id,type:"position",dragging:a};return i&&(h.positionAbsolute=d.positionAbsolute,h.position=d.position),h});u(c)},triggerNodeChanges:n=>{const{onNodesChange:i,nodeInternals:a,hasDefaultNodes:u,nodeOrigin:c,getNodes:d,elevateNodesOnSelect:h}=t();if(n!=null&&n.length){if(u){const p=_C(n,d()),g=If(p,a,c,h);e({nodeInternals:g})}i==null||i(n)}},addSelectedNodes:n=>{const{multiSelectionActive:i,edges:a,getNodes:u}=t();let c,d=null;i?c=n.map(h=>Ki(h,!0)):(c=Ia(u(),n),d=Ia(a,[])),dc({changedNodes:c,changedEdges:d,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:i,edges:a,getNodes:u}=t();let c,d=null;i?c=n.map(h=>Ki(h,!0)):(c=Ia(a,n),d=Ia(u(),[])),dc({changedNodes:d,changedEdges:c,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:i}={})=>{const{edges:a,getNodes:u}=t(),c=n||u(),d=i||a,h=c.map(g=>(g.selected=!1,Ki(g.id,!1))),p=d.map(g=>Ki(g.id,!1));dc({changedNodes:h,changedEdges:p,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:i,maxZoom:a}=t();i==null||i.scaleExtent([n,a]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:i,minZoom:a}=t();i==null||i.scaleExtent([a,n]),e({maxZoom:n})},setTranslateExtent:n=>{var i;(i=t().d3Zoom)==null||i.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:i}=t(),u=i().filter(d=>d.selected).map(d=>Ki(d.id,!1)),c=n.filter(d=>d.selected).map(d=>Ki(d.id,!1));dc({changedNodes:u,changedEdges:c,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:i}=t();i.forEach(a=>{a.positionAbsolute=oh(a.position,n)}),e({nodeExtent:n,nodeInternals:new Map(i)})},panBy:n=>{const{transform:i,width:a,height:u,d3Zoom:c,d3Selection:d,translateExtent:h}=t();if(!c||!d||!n.x&&!n.y)return!1;const p=wi.translate(i[0]+n.x,i[1]+n.y).scale(i[2]),g=[[0,0],[a,u]],v=c==null?void 0:c.constrain()(p,g,h);return c.transform(d,v),i[0]!==v.x||i[1]!==v.y||i[2]!==v.k},cancelConnection:()=>e({connectionNodeId:Hi.connectionNodeId,connectionHandleId:Hi.connectionHandleId,connectionHandleType:Hi.connectionHandleType,connectionStatus:Hi.connectionStatus,connectionStartHandle:Hi.connectionStartHandle,connectionEndHandle:Hi.connectionEndHandle}),reset:()=>e({...Hi})}),Object.is),Ry=({children:e})=>{const t=N.useRef(null);return t.current||(t.current=sO()),ne.createElement(kT,{value:t.current},e)};Ry.displayName="ReactFlowProvider";const $y=({children:e})=>N.useContext(Qc)?ne.createElement(ne.Fragment,null,e):ne.createElement(Ry,null,e);$y.displayName="ReactFlowWrapper";const uO={input:my,default:md,output:yy,group:fh},cO={default:Mc,straight:uh,step:sh,smoothstep:Jc,simplebezier:ah},lO=[0,0],fO=[15,15],dO={x:0,y:0,zoom:1},hO={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},jy=N.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,className:a,nodeTypes:u=uO,edgeTypes:c=cO,onNodeClick:d,onEdgeClick:h,onInit:p,onMove:g,onMoveStart:v,onMoveEnd:x,onConnect:b,onConnectStart:C,onConnectEnd:A,onClickConnectStart:R,onClickConnectEnd:$,onNodeMouseEnter:q,onNodeMouseMove:te,onNodeMouseLeave:F,onNodeContextMenu:ue,onNodeDoubleClick:ce,onNodeDragStart:Y,onNodeDrag:Q,onNodeDragStop:se,onNodesDelete:J,onEdgesDelete:U,onSelectionChange:re,onSelectionDragStart:ve,onSelectionDrag:M,onSelectionDragStop:ae,onSelectionContextMenu:L,onSelectionStart:pe,onSelectionEnd:oe,connectionMode:G=Go.Strict,connectionLineType:de=Ui.Bezier,connectionLineStyle:ge,connectionLineComponent:Se,connectionLineContainerStyle:Te,deleteKeyCode:Re="Backspace",selectionKeyCode:Me="Shift",selectionOnDrag:Be=!1,selectionMode:Ke=Js.Full,panActivationKeyCode:Ve="Space",multiSelectionKeyCode:Ee=Ic()?"Meta":"Control",zoomActivationKeyCode:rt=Ic()?"Meta":"Control",snapToGrid:xt=!1,snapGrid:ze=fO,onlyRenderVisibleElements:Nt=!1,selectNodesOnDrag:Ge=!0,nodesDraggable:it,nodesConnectable:Et,nodesFocusable:et,nodeOrigin:We=lO,edgesFocusable:Ft,edgesUpdatable:Wt,elementsSelectable:bt,defaultViewport:an=dO,minZoom:qt=.5,maxZoom:sn=2,translateExtent:Qt=yd,preventScrolling:Yt=!0,nodeExtent:tn,defaultMarkerColor:Kt="#b1b1b7",zoomOnScroll:un=!0,zoomOnPinch:fn=!0,panOnScroll:_t=!1,panOnScrollSpeed:Bt=.5,panOnScrollMode:Ut=Fo.Free,zoomOnDoubleClick:$t=!0,panOnDrag:je=!0,onPaneClick:zt,onPaneMouseEnter:le,onPaneMouseMove:xe,onPaneMouseLeave:fe,onPaneScroll:Oe,onPaneContextMenu:Le,children:qe,onEdgeContextMenu:Ue,onEdgeDoubleClick:Ze,onEdgeMouseEnter:En,onEdgeMouseMove:ct,onEdgeMouseLeave:jt,onEdgeUpdate:Fn,onEdgeUpdateStart:xr,onEdgeUpdateEnd:br,onReconnect:St,onReconnectStart:Mt,onReconnectEnd:ar,reconnectRadius:sr=10,edgeUpdaterRadius:ur=10,onNodesChange:cr,onEdgesChange:ro,noDragClassName:Nn="nodrag",noWheelClassName:Gn="nowheel",noPanClassName:In="nopan",fitView:Hr=!1,fitViewOptions:ot,connectOnClick:vt=!0,attributionPosition:Dt,proOptions:Vt,defaultEdgeOptions:mn,elevateNodesOnSelect:_r=!0,elevateEdgesOnSelect:It=!1,disableKeyboardA11y:vn=!1,autoPanOnConnect:Xn=!0,autoPanOnNodeDrag:ni=!0,connectionRadius:qr=20,isValidConnection:ki,onError:io,style:Ti,id:Zn,nodeDragThreshold:oo,...Ci},na)=>{const st=Zn||"1";return ne.createElement("div",{...Ci,style:{...Ti,...hO},ref:na,className:Sn(["react-flow",a]),"data-testid":"rf__wrapper",id:Zn},ne.createElement($y,null,ne.createElement(aO,{onInit:p,onMove:g,onMoveStart:v,onMoveEnd:x,onNodeClick:d,onEdgeClick:h,onNodeMouseEnter:q,onNodeMouseMove:te,onNodeMouseLeave:F,onNodeContextMenu:ue,onNodeDoubleClick:ce,nodeTypes:u,edgeTypes:c,connectionLineType:de,connectionLineStyle:ge,connectionLineComponent:Se,connectionLineContainerStyle:Te,selectionKeyCode:Me,selectionOnDrag:Be,selectionMode:Ke,deleteKeyCode:Re,multiSelectionKeyCode:Ee,panActivationKeyCode:Ve,zoomActivationKeyCode:rt,onlyRenderVisibleElements:Nt,selectNodesOnDrag:Ge,defaultViewport:an,translateExtent:Qt,minZoom:qt,maxZoom:sn,preventScrolling:Yt,zoomOnScroll:un,zoomOnPinch:fn,zoomOnDoubleClick:$t,panOnScroll:_t,panOnScrollSpeed:Bt,panOnScrollMode:Ut,panOnDrag:je,onPaneClick:zt,onPaneMouseEnter:le,onPaneMouseMove:xe,onPaneMouseLeave:fe,onPaneScroll:Oe,onPaneContextMenu:Le,onSelectionContextMenu:L,onSelectionStart:pe,onSelectionEnd:oe,onEdgeContextMenu:Ue,onEdgeDoubleClick:Ze,onEdgeMouseEnter:En,onEdgeMouseMove:ct,onEdgeMouseLeave:jt,onReconnect:St??Fn,onReconnectStart:Mt??xr,onReconnectEnd:ar??br,reconnectRadius:sr??ur,defaultMarkerColor:Kt,noDragClassName:Nn,noWheelClassName:Gn,noPanClassName:In,elevateEdgesOnSelect:It,rfId:st,disableKeyboardA11y:vn,nodeOrigin:We,nodeExtent:tn}),ne.createElement(nC,{nodes:e,edges:t,defaultNodes:n,defaultEdges:i,onConnect:b,onConnectStart:C,onConnectEnd:A,onClickConnectStart:R,onClickConnectEnd:$,nodesDraggable:it,nodesConnectable:Et,nodesFocusable:et,edgesFocusable:Ft,edgesUpdatable:Wt,elementsSelectable:bt,elevateNodesOnSelect:_r,minZoom:qt,maxZoom:sn,nodeExtent:tn,onNodesChange:cr,onEdgesChange:ro,snapToGrid:xt,snapGrid:ze,connectionMode:G,translateExtent:Qt,connectOnClick:vt,defaultEdgeOptions:mn,fitView:Hr,fitViewOptions:ot,onNodesDelete:J,onEdgesDelete:U,onNodeDragStart:Y,onNodeDrag:Q,onNodeDragStop:se,onSelectionDrag:M,onSelectionDragStart:ve,onSelectionDragStop:ae,noPanClassName:In,nodeOrigin:We,rfId:st,autoPanOnConnect:Xn,autoPanOnNodeDrag:ni,onError:io,connectionRadius:qr,isValidConnection:ki,nodeDragThreshold:oo}),ne.createElement(eC,{onSelectionChange:re}),qe,ne.createElement(CT,{proOptions:Vt,position:Dt}),ne.createElement(sC,{rfId:st,disableKeyboardA11y:vn})))});jy.displayName="ReactFlow";function Ly(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[i,a]of e)if(!Object.is(a,t.get(i)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(e[i],t[i]))return!1;return!0}const Fy=({id:e,x:t,y:n,width:i,height:a,style:u,color:c,strokeColor:d,strokeWidth:h,className:p,borderRadius:g,shapeRendering:v,onClick:x,selected:b})=>{const{background:C,backgroundColor:A}=u||{},R=c||C||A;return ne.createElement("rect",{className:Sn(["react-flow__minimap-node",{selected:b},p]),x:t,y:n,rx:g,ry:g,width:i,height:a,fill:R,stroke:d,strokeWidth:h,shapeRendering:v,onClick:x?$=>x($,e):void 0})};Fy.displayName="MiniMapNode";var pO=N.memo(Fy);const mO=e=>e.nodeOrigin,gO=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),$f=e=>e instanceof Function?e:()=>e;function yO({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:i=5,nodeStrokeWidth:a=2,nodeComponent:u=pO,onClick:c}){const d=Rt(gO,Ly),h=Rt(mO),p=$f(t),g=$f(e),v=$f(n),x=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return ne.createElement(ne.Fragment,null,d.map(b=>{const{x:C,y:A}=qo(b,h).positionAbsolute;return ne.createElement(u,{key:b.id,x:C,y:A,width:b.width,height:b.height,style:b.style,selected:b.selected,className:v(b),color:p(b),borderRadius:i,strokeColor:g(b),strokeWidth:a,shapeRendering:x,onClick:c,id:b.id})}))}var vO=N.memo(yO);const wO=200,xO=150,bO=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?DT(el(t,e.nodeOrigin),n):n,rfId:e.rfId}},_O="react-flow__minimap-desc";function Wy({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:i="#e2e2e2",nodeClassName:a="",nodeBorderRadius:u=5,nodeStrokeWidth:c=2,nodeComponent:d,maskColor:h="rgb(240, 240, 240, 0.6)",maskStrokeColor:p="none",maskStrokeWidth:g=1,position:v="bottom-right",onClick:x,onNodeClick:b,pannable:C=!1,zoomable:A=!1,ariaLabel:R="React Flow mini map",inversePan:$=!1,zoomStep:q=10,offsetScale:te=5}){const F=pn(),ue=N.useRef(null),{boundingRect:ce,viewBB:Y,rfId:Q}=Rt(bO,Ly),se=(e==null?void 0:e.width)??wO,J=(e==null?void 0:e.height)??xO,U=ce.width/se,re=ce.height/J,ve=Math.max(U,re),M=ve*se,ae=ve*J,L=te*ve,pe=ce.x-(M-ce.width)/2-L,oe=ce.y-(ae-ce.height)/2-L,G=M+L*2,de=ae+L*2,ge=`${_O}-${Q}`,Se=N.useRef(0);Se.current=ve,N.useEffect(()=>{if(ue.current){const Me=gr(ue.current),Be=Ee=>{const{transform:rt,d3Selection:xt,d3Zoom:ze}=F.getState();if(Ee.sourceEvent.type!=="wheel"||!xt||!ze)return;const Nt=-Ee.sourceEvent.deltaY*(Ee.sourceEvent.deltaMode===1?.05:Ee.sourceEvent.deltaMode?1:.002)*q,Ge=rt[2]*Math.pow(2,Nt);ze.scaleTo(xt,Ge)},Ke=Ee=>{const{transform:rt,d3Selection:xt,d3Zoom:ze,translateExtent:Nt,width:Ge,height:it}=F.getState();if(Ee.sourceEvent.type!=="mousemove"||!xt||!ze)return;const Et=Se.current*Math.max(1,rt[2])*($?-1:1),et={x:rt[0]-Ee.sourceEvent.movementX*Et,y:rt[1]-Ee.sourceEvent.movementY*Et},We=[[0,0],[Ge,it]],Ft=wi.translate(et.x,et.y).scale(rt[2]),Wt=ze.constrain()(Ft,We,Nt);ze.transform(xt,Wt)},Ve=U0().on("zoom",C?Ke:null).on("zoom.wheel",A?Be:null);return Me.call(Ve),()=>{Me.on("zoom",null)}}},[C,A,$,q]);const Te=x?Me=>{const Be=Pr(Me);x(Me,{x:Be[0],y:Be[1]})}:void 0,Re=b?(Me,Be)=>{const Ke=F.getState().nodeInternals.get(Be);b(Me,Ke)}:void 0;return ne.createElement(Zs,{position:v,style:e,className:Sn(["react-flow__minimap",t]),"data-testid":"rf__minimap"},ne.createElement("svg",{width:se,height:J,viewBox:`${pe} ${oe} ${G} ${de}`,role:"img","aria-labelledby":ge,ref:ue,onClick:Te},R&&ne.createElement("title",{id:ge},R),ne.createElement(vO,{onClick:Re,nodeColor:i,nodeStrokeColor:n,nodeBorderRadius:u,nodeClassName:a,nodeStrokeWidth:c,nodeComponent:d}),ne.createElement("path",{className:"react-flow__minimap-mask",d:`M${pe-L},${oe-L}h${G+L*2}v${de+L*2}h${-G-L*2}z
        M${Y.x},${Y.y}h${Y.width}v${Y.height}h${-Y.width}z`,fill:h,fillRule:"evenodd",stroke:p,strokeWidth:g,pointerEvents:"none"})))}Wy.displayName="MiniMap";var SO=N.memo(Wy);function EO(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[i,a]of e)if(!Object.is(a,t.get(i)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(e[i],t[i]))return!1;return!0}function NO(){return ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},ne.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function kO(){return ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},ne.createElement("path",{d:"M0 0h32v4.2H0z"}))}function TO(){return ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},ne.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function CO(){return ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ne.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function OO(){return ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ne.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Fs=({children:e,className:t,...n})=>ne.createElement("button",{type:"button",className:Sn(["react-flow__controls-button",t]),...n},e);Fs.displayName="ControlButton";const AO=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),By=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:i=!0,fitViewOptions:a,onZoomIn:u,onZoomOut:c,onFitView:d,onInteractiveChange:h,className:p,children:g,position:v="bottom-left"})=>{const x=pn(),[b,C]=N.useState(!1),{isInteractive:A,minZoomReached:R,maxZoomReached:$}=Rt(AO,EO),{zoomIn:q,zoomOut:te,fitView:F}=dh();if(N.useEffect(()=>{C(!0)},[]),!b)return null;const ue=()=>{q(),u==null||u()},ce=()=>{te(),c==null||c()},Y=()=>{F(a),d==null||d()},Q=()=>{x.setState({nodesDraggable:!A,nodesConnectable:!A,elementsSelectable:!A}),h==null||h(!A)};return ne.createElement(Zs,{className:Sn(["react-flow__controls",p]),position:v,style:e,"data-testid":"rf__controls"},t&&ne.createElement(ne.Fragment,null,ne.createElement(Fs,{onClick:ue,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:$},ne.createElement(NO,null)),ne.createElement(Fs,{onClick:ce,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:R},ne.createElement(kO,null))),n&&ne.createElement(Fs,{className:"react-flow__controls-fitview",onClick:Y,title:"fit view","aria-label":"fit view"},ne.createElement(TO,null)),i&&ne.createElement(Fs,{className:"react-flow__controls-interactive",onClick:Q,title:"toggle interactivity","aria-label":"toggle interactivity"},A?ne.createElement(OO,null):ne.createElement(CO,null)),g)};By.displayName="Controls";var DO=N.memo(By);function IO(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[i,a]of e)if(!Object.is(a,t.get(i)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(e[i],t[i]))return!1;return!0}var Lr;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Lr||(Lr={}));function PO({color:e,dimensions:t,lineWidth:n}){return ne.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function MO({color:e,radius:t}){return ne.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const RO={[Lr.Dots]:"#91919a",[Lr.Lines]:"#eee",[Lr.Cross]:"#e2e2e2"},$O={[Lr.Dots]:1,[Lr.Lines]:1,[Lr.Cross]:6},jO=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function zy({id:e,variant:t=Lr.Dots,gap:n=20,size:i,lineWidth:a=1,offset:u=2,color:c,style:d,className:h}){const p=N.useRef(null),{transform:g,patternId:v}=Rt(jO,IO),x=c||RO[t],b=i||$O[t],C=t===Lr.Dots,A=t===Lr.Cross,R=Array.isArray(n)?n:[n,n],$=[R[0]*g[2]||1,R[1]*g[2]||1],q=b*g[2],te=A?[q,q]:$,F=C?[q/u,q/u]:[te[0]/u,te[1]/u];return ne.createElement("svg",{className:Sn(["react-flow__background",h]),style:{...d,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:p,"data-testid":"rf__background"},ne.createElement("pattern",{id:v+e,x:g[0]%$[0],y:g[1]%$[1],width:$[0],height:$[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${F[0]},-${F[1]})`},C?ne.createElement(MO,{color:x,radius:q/u}):ne.createElement(PO,{dimensions:te,color:x,lineWidth:a})),ne.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${v+e})`}))}zy.displayName="Background";var LO=N.memo(zy);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var FO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ei=(e,t)=>{const n=N.forwardRef(({color:i="currentColor",size:a=24,strokeWidth:u=2,absoluteStrokeWidth:c,className:d="",children:h,...p},g)=>N.createElement("svg",{ref:g,...FO,width:a,height:a,stroke:i,strokeWidth:c?Number(u)*24/Number(a):u,className:["lucide",`lucide-${WO(e)}`,d].join(" "),...p},[...t.map(([v,x])=>N.createElement(v,x)),...Array.isArray(h)?h:[h]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=Ei("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=Ei("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HO=Ei("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=Ei("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YO=Ei("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wg=Ei("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=Ei("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KO=Ei("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=Ei("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var qy={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(Mr,function(){var n=function(s,f){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,w){m.__proto__=w}||function(m,w){for(var S in w)Object.prototype.hasOwnProperty.call(w,S)&&(m[S]=w[S])})(s,f)},i=function(){return(i=Object.assign||function(s){for(var f,m=1,w=arguments.length;m<w;m++)for(var S in f=arguments[m])Object.prototype.hasOwnProperty.call(f,S)&&(s[S]=f[S]);return s}).apply(this,arguments)};function a(s,f,m){for(var w,S=0,O=f.length;S<O;S++)!w&&S in f||((w=w||Array.prototype.slice.call(f,0,S))[S]=f[S]);return s.concat(w||Array.prototype.slice.call(f))}var u=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Mr,c=Object.keys,d=Array.isArray;function h(s,f){return typeof f!="object"||c(f).forEach(function(m){s[m]=f[m]}),s}typeof Promise>"u"||u.Promise||(u.Promise=Promise);var p=Object.getPrototypeOf,g={}.hasOwnProperty;function v(s,f){return g.call(s,f)}function x(s,f){typeof f=="function"&&(f=f(p(s))),(typeof Reflect>"u"?c:Reflect.ownKeys)(f).forEach(function(m){C(s,m,f[m])})}var b=Object.defineProperty;function C(s,f,m,w){b(s,f,h(m&&v(m,"get")&&typeof m.get=="function"?{get:m.get,set:m.set,configurable:!0}:{value:m,configurable:!0,writable:!0},w))}function A(s){return{from:function(f){return s.prototype=Object.create(f.prototype),C(s.prototype,"constructor",s),{extend:x.bind(null,s.prototype)}}}}var R=Object.getOwnPropertyDescriptor,$=[].slice;function q(s,f,m){return $.call(s,f,m)}function te(s,f){return f(s)}function F(s){if(!s)throw new Error("Assertion Failed")}function ue(s){u.setImmediate?setImmediate(s):setTimeout(s,0)}function ce(s,f){if(typeof f=="string"&&v(s,f))return s[f];if(!f)return s;if(typeof f!="string"){for(var m=[],w=0,S=f.length;w<S;++w){var O=ce(s,f[w]);m.push(O)}return m}var j=f.indexOf(".");if(j!==-1){var z=s[f.substr(0,j)];return z==null?void 0:ce(z,f.substr(j+1))}}function Y(s,f,m){if(s&&f!==void 0&&!("isFrozen"in Object&&Object.isFrozen(s)))if(typeof f!="string"&&"length"in f){F(typeof m!="string"&&"length"in m);for(var w=0,S=f.length;w<S;++w)Y(s,f[w],m[w])}else{var O,j,z=f.indexOf(".");z!==-1?(O=f.substr(0,z),(j=f.substr(z+1))===""?m===void 0?d(s)&&!isNaN(parseInt(O))?s.splice(O,1):delete s[O]:s[O]=m:Y(z=!(z=s[O])||!v(s,O)?s[O]={}:z,j,m)):m===void 0?d(s)&&!isNaN(parseInt(f))?s.splice(f,1):delete s[f]:s[f]=m}}function Q(s){var f,m={};for(f in s)v(s,f)&&(m[f]=s[f]);return m}var se=[].concat;function J(s){return se.apply([],s)}var Sr="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(J([8,16,32,64].map(function(s){return["Int","Uint","Float"].map(function(f){return f+s+"Array"})}))).filter(function(s){return u[s]}),U=new Set(Sr.map(function(s){return u[s]})),re=null;function ve(s){return re=new WeakMap,s=function f(m){if(!m||typeof m!="object")return m;var w=re.get(m);if(w)return w;if(d(m)){w=[],re.set(m,w);for(var S=0,O=m.length;S<O;++S)w.push(f(m[S]))}else if(U.has(m.constructor))w=m;else{var j,z=p(m);for(j in w=z===Object.prototype?{}:Object.create(z),re.set(m,w),m)v(m,j)&&(w[j]=f(m[j]))}return w}(s),re=null,s}var M={}.toString;function ae(s){return M.call(s).slice(8,-1)}var L=typeof Symbol<"u"?Symbol.iterator:"@@iterator",pe=typeof L=="symbol"?function(s){var f;return s!=null&&(f=s[L])&&f.apply(s)}:function(){return null};function oe(s,f){return f=s.indexOf(f),0<=f&&s.splice(f,1),0<=f}var G={};function de(s){var f,m,w,S;if(arguments.length===1){if(d(s))return s.slice();if(this===G&&typeof s=="string")return[s];if(S=pe(s)){for(m=[];!(w=S.next()).done;)m.push(w.value);return m}if(s==null)return[s];if(typeof(f=s.length)!="number")return[s];for(m=new Array(f);f--;)m[f]=s[f];return m}for(f=arguments.length,m=new Array(f);f--;)m[f]=arguments[f];return m}var ge=typeof Symbol<"u"?function(s){return s[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Qt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Bn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Qt),Se={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Te(s,f){this.name=s,this.message=f}function Re(s,f){return s+". Errors: "+Object.keys(f).map(function(m){return f[m].toString()}).filter(function(m,w,S){return S.indexOf(m)===w}).join(`
`)}function Me(s,f,m,w){this.failures=f,this.failedKeys=w,this.successCount=m,this.message=Re(s,f)}function Be(s,f){this.name="BulkError",this.failures=Object.keys(f).map(function(m){return f[m]}),this.failuresByPos=f,this.message=Re(s,this.failures)}A(Te).from(Error).extend({toString:function(){return this.name+": "+this.message}}),A(Me).from(Te),A(Be).from(Te);var Ke=Bn.reduce(function(s,f){return s[f]=f+"Error",s},{}),Ve=Te,Ee=Bn.reduce(function(s,f){var m=f+"Error";function w(S,O){this.name=m,S?typeof S=="string"?(this.message="".concat(S).concat(O?`
 `+O:""),this.inner=O||null):typeof S=="object"&&(this.message="".concat(S.name," ").concat(S.message),this.inner=S):(this.message=Se[f]||m,this.inner=null)}return A(w).from(Ve),s[f]=w,s},{});Ee.Syntax=SyntaxError,Ee.Type=TypeError,Ee.Range=RangeError;var rt=Qt.reduce(function(s,f){return s[f+"Error"]=Ee[f],s},{}),xt=Bn.reduce(function(s,f){return["Syntax","Type","Range"].indexOf(f)===-1&&(s[f+"Error"]=Ee[f]),s},{});function ze(){}function Nt(s){return s}function Ge(s,f){return s==null||s===Nt?f:function(m){return f(s(m))}}function it(s,f){return function(){s.apply(this,arguments),f.apply(this,arguments)}}function Et(s,f){return s===ze?f:function(){var m=s.apply(this,arguments);m!==void 0&&(arguments[0]=m);var w=this.onsuccess,S=this.onerror;this.onsuccess=null,this.onerror=null;var O=f.apply(this,arguments);return w&&(this.onsuccess=this.onsuccess?it(w,this.onsuccess):w),S&&(this.onerror=this.onerror?it(S,this.onerror):S),O!==void 0?O:m}}function et(s,f){return s===ze?f:function(){s.apply(this,arguments);var m=this.onsuccess,w=this.onerror;this.onsuccess=this.onerror=null,f.apply(this,arguments),m&&(this.onsuccess=this.onsuccess?it(m,this.onsuccess):m),w&&(this.onerror=this.onerror?it(w,this.onerror):w)}}function We(s,f){return s===ze?f:function(m){var w=s.apply(this,arguments);h(m,w);var S=this.onsuccess,O=this.onerror;return this.onsuccess=null,this.onerror=null,m=f.apply(this,arguments),S&&(this.onsuccess=this.onsuccess?it(S,this.onsuccess):S),O&&(this.onerror=this.onerror?it(O,this.onerror):O),w===void 0?m===void 0?void 0:m:h(w,m)}}function Ft(s,f){return s===ze?f:function(){return f.apply(this,arguments)!==!1&&s.apply(this,arguments)}}function Wt(s,f){return s===ze?f:function(){var m=s.apply(this,arguments);if(m&&typeof m.then=="function"){for(var w=this,S=arguments.length,O=new Array(S);S--;)O[S]=arguments[S];return m.then(function(){return f.apply(w,O)})}return f.apply(this,arguments)}}xt.ModifyError=Me,xt.DexieError=Te,xt.BulkError=Be;var bt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function an(s){bt=s}var qt={},sn=100,Sr=typeof Promise>"u"?[]:function(){var s=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[s,p(s),s];var f=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[f,p(f),s]}(),Qt=Sr[0],Bn=Sr[1],Sr=Sr[2],Bn=Bn&&Bn.then,Yt=Qt&&Qt.constructor,tn=!!Sr,Kt=function(s,f){zt.push([s,f]),fn&&(queueMicrotask(ct),fn=!1)},un=!0,fn=!0,_t=[],Bt=[],Ut=Nt,$t={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ze,pgp:!1,env:{},finalize:ze},je=$t,zt=[],le=0,xe=[];function fe(s){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var f=this._PSD=je;if(typeof s!="function"){if(s!==qt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&qe(this,this._value))}this._state=null,this._value=null,++f.ref,function m(w,S){try{S(function(O){if(w._state===null){if(O===w)throw new TypeError("A promise cannot be resolved with itself.");var j=w._lib&&jt();O&&typeof O.then=="function"?m(w,function(z,Z){O instanceof fe?O._then(z,Z):O.then(z,Z)}):(w._state=!0,w._value=O,Ue(w)),j&&Fn()}},qe.bind(null,w))}catch(O){qe(w,O)}}(this,s)}var Oe={get:function(){var s=je,f=cr;function m(w,S){var O=this,j=!s.global&&(s!==je||f!==cr),z=j&&!In(),Z=new fe(function(k,P){Ze(O,new Le(mn(w,s,j,z),mn(S,s,j,z),k,P,s))});return this._consoleTask&&(Z._consoleTask=this._consoleTask),Z}return m.prototype=qt,m},set:function(s){C(this,"then",s&&s.prototype===qt?Oe:{get:function(){return s},set:Oe.set})}};function Le(s,f,m,w,S){this.onFulfilled=typeof s=="function"?s:null,this.onRejected=typeof f=="function"?f:null,this.resolve=m,this.reject=w,this.psd=S}function qe(s,f){var m,w;Bt.push(f),s._state===null&&(m=s._lib&&jt(),f=Ut(f),s._state=!1,s._value=f,w=s,_t.some(function(S){return S._value===w._value})||_t.push(w),Ue(s),m&&Fn())}function Ue(s){var f=s._listeners;s._listeners=[];for(var m=0,w=f.length;m<w;++m)Ze(s,f[m]);var S=s._PSD;--S.ref||S.finalize(),le===0&&(++le,Kt(function(){--le==0&&xr()},[]))}function Ze(s,f){if(s._state!==null){var m=s._state?f.onFulfilled:f.onRejected;if(m===null)return(s._state?f.resolve:f.reject)(s._value);++f.psd.ref,++le,Kt(En,[m,s,f])}else s._listeners.push(f)}function En(s,f,m){try{var w,S=f._value;!f._state&&Bt.length&&(Bt=[]),w=bt&&f._consoleTask?f._consoleTask.run(function(){return s(S)}):s(S),f._state||Bt.indexOf(S)!==-1||function(O){for(var j=_t.length;j;)if(_t[--j]._value===O._value)return _t.splice(j,1)}(f),m.resolve(w)}catch(O){m.reject(O)}finally{--le==0&&xr(),--m.psd.ref||m.psd.finalize()}}function ct(){Vt($t,function(){jt()&&Fn()})}function jt(){var s=un;return fn=un=!1,s}function Fn(){var s,f,m;do for(;0<zt.length;)for(s=zt,zt=[],m=s.length,f=0;f<m;++f){var w=s[f];w[0].apply(null,w[1])}while(0<zt.length);fn=un=!0}function xr(){var s=_t;_t=[],s.forEach(function(w){w._PSD.onunhandled.call(null,w._value,w)});for(var f=xe.slice(0),m=f.length;m;)f[--m]()}function br(s){return new fe(qt,!1,s)}function St(s,f){var m=je;return function(){var w=jt(),S=je;try{return vt(m,!0),s.apply(this,arguments)}catch(O){f&&f(O)}finally{vt(S,!1),w&&Fn()}}}x(fe.prototype,{then:Oe,_then:function(s,f){Ze(this,new Le(null,null,s,f,je))},catch:function(s){if(arguments.length===1)return this.then(null,s);var f=s,m=arguments[1];return typeof f=="function"?this.then(null,function(w){return(w instanceof f?m:br)(w)}):this.then(null,function(w){return(w&&w.name===f?m:br)(w)})},finally:function(s){return this.then(function(f){return fe.resolve(s()).then(function(){return f})},function(f){return fe.resolve(s()).then(function(){return br(f)})})},timeout:function(s,f){var m=this;return s<1/0?new fe(function(w,S){var O=setTimeout(function(){return S(new Ee.Timeout(f))},s);m.then(w,S).finally(clearTimeout.bind(null,O))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&C(fe.prototype,Symbol.toStringTag,"Dexie.Promise"),$t.env=Dt(),x(fe,{all:function(){var s=de.apply(null,arguments).map(Hr);return new fe(function(f,m){s.length===0&&f([]);var w=s.length;s.forEach(function(S,O){return fe.resolve(S).then(function(j){s[O]=j,--w||f(s)},m)})})},resolve:function(s){return s instanceof fe?s:s&&typeof s.then=="function"?new fe(function(f,m){s.then(f,m)}):new fe(qt,!0,s)},reject:br,race:function(){var s=de.apply(null,arguments).map(Hr);return new fe(function(f,m){s.map(function(w){return fe.resolve(w).then(f,m)})})},PSD:{get:function(){return je},set:function(s){return je=s}},totalEchoes:{get:function(){return cr}},newPSD:Nn,usePSD:Vt,scheduler:{get:function(){return Kt},set:function(s){Kt=s}},rejectionMapper:{get:function(){return Ut},set:function(s){Ut=s}},follow:function(s,f){return new fe(function(m,w){return Nn(function(S,O){var j=je;j.unhandleds=[],j.onunhandled=O,j.finalize=it(function(){var z,Z=this;z=function(){Z.unhandleds.length===0?S():O(Z.unhandleds[0])},xe.push(function k(){z(),xe.splice(xe.indexOf(k),1)}),++le,Kt(function(){--le==0&&xr()},[])},j.finalize),s()},f,m,w)})}}),Yt&&(Yt.allSettled&&C(fe,"allSettled",function(){var s=de.apply(null,arguments).map(Hr);return new fe(function(f){s.length===0&&f([]);var m=s.length,w=new Array(m);s.forEach(function(S,O){return fe.resolve(S).then(function(j){return w[O]={status:"fulfilled",value:j}},function(j){return w[O]={status:"rejected",reason:j}}).then(function(){return--m||f(w)})})})}),Yt.any&&typeof AggregateError<"u"&&C(fe,"any",function(){var s=de.apply(null,arguments).map(Hr);return new fe(function(f,m){s.length===0&&m(new AggregateError([]));var w=s.length,S=new Array(w);s.forEach(function(O,j){return fe.resolve(O).then(function(z){return f(z)},function(z){S[j]=z,--w||m(new AggregateError(S))})})})}),Yt.withResolvers&&(fe.withResolvers=Yt.withResolvers));var Mt={awaits:0,echoes:0,id:0},ar=0,sr=[],ur=0,cr=0,ro=0;function Nn(s,f,m,w){var S=je,O=Object.create(S);return O.parent=S,O.ref=0,O.global=!1,O.id=++ro,$t.env,O.env=tn?{Promise:fe,PromiseProp:{value:fe,configurable:!0,writable:!0},all:fe.all,race:fe.race,allSettled:fe.allSettled,any:fe.any,resolve:fe.resolve,reject:fe.reject}:{},f&&h(O,f),++S.ref,O.finalize=function(){--this.parent.ref||this.parent.finalize()},w=Vt(O,s,m,w),O.ref===0&&O.finalize(),w}function Gn(){return Mt.id||(Mt.id=++ar),++Mt.awaits,Mt.echoes+=sn,Mt.id}function In(){return!!Mt.awaits&&(--Mt.awaits==0&&(Mt.id=0),Mt.echoes=Mt.awaits*sn,!0)}function Hr(s){return Mt.echoes&&s&&s.constructor===Yt?(Gn(),s.then(function(f){return In(),f},function(f){return In(),It(f)})):s}function ot(){var s=sr[sr.length-1];sr.pop(),vt(s,!1)}function vt(s,f){var m,w=je;(f?!Mt.echoes||ur++&&s===je:!ur||--ur&&s===je)||queueMicrotask(f?(function(S){++cr,Mt.echoes&&--Mt.echoes!=0||(Mt.echoes=Mt.awaits=Mt.id=0),sr.push(je),vt(S,!0)}).bind(null,s):ot),s!==je&&(je=s,w===$t&&($t.env=Dt()),tn&&(m=$t.env.Promise,f=s.env,(w.global||s.global)&&(Object.defineProperty(u,"Promise",f.PromiseProp),m.all=f.all,m.race=f.race,m.resolve=f.resolve,m.reject=f.reject,f.allSettled&&(m.allSettled=f.allSettled),f.any&&(m.any=f.any))))}function Dt(){var s=u.Promise;return tn?{Promise:s,PromiseProp:Object.getOwnPropertyDescriptor(u,"Promise"),all:s.all,race:s.race,allSettled:s.allSettled,any:s.any,resolve:s.resolve,reject:s.reject}:{}}function Vt(s,f,m,w,S){var O=je;try{return vt(s,!0),f(m,w,S)}finally{vt(O,!1)}}function mn(s,f,m,w){return typeof s!="function"?s:function(){var S=je;m&&Gn(),vt(f,!0);try{return s.apply(this,arguments)}finally{vt(S,!1),w&&queueMicrotask(In)}}}function _r(s){Promise===Yt&&Mt.echoes===0?ur===0?s():enqueueNativeMicroTask(s):setTimeout(s,0)}(""+Bn).indexOf("[native code]")===-1&&(Gn=In=ze);var It=fe.reject,vn="",Xn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ni="String expected.",qr=[],ki="__dbnames",io="readonly",Ti="readwrite";function Zn(s,f){return s?f?function(){return s.apply(this,arguments)&&f.apply(this,arguments)}:s:f}var oo={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ci(s){return typeof s!="string"||/\./.test(s)?function(f){return f}:function(f){return f[s]===void 0&&s in f&&delete(f=ve(f))[s],f}}function na(){throw Ee.Type()}function st(s,f){try{var m=yu(s),w=yu(f);if(m!==w)return m==="Array"?1:w==="Array"?-1:m==="binary"?1:w==="binary"?-1:m==="string"?1:w==="string"?-1:m==="Date"?1:w!=="Date"?NaN:-1;switch(m){case"number":case"Date":case"string":return f<s?1:s<f?-1:0;case"binary":return function(S,O){for(var j=S.length,z=O.length,Z=j<z?j:z,k=0;k<Z;++k)if(S[k]!==O[k])return S[k]<O[k]?-1:1;return j===z?0:j<z?-1:1}(Xa(s),Xa(f));case"Array":return function(S,O){for(var j=S.length,z=O.length,Z=j<z?j:z,k=0;k<Z;++k){var P=st(S[k],O[k]);if(P!==0)return P}return j===z?0:j<z?-1:1}(s,f)}}catch{}return NaN}function yu(s){var f=typeof s;return f!="object"?f:ArrayBuffer.isView(s)?"binary":(s=ae(s),s==="ArrayBuffer"?"binary":s)}function Xa(s){return s instanceof Uint8Array?s:ArrayBuffer.isView(s)?new Uint8Array(s.buffer,s.byteOffset,s.byteLength):new Uint8Array(s)}var Za=(At.prototype._trans=function(s,f,m){var w=this._tx||je.trans,S=this.name,O=bt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(s==="readonly"?"read":"write"," ").concat(this.name));function j(k,P,T){if(!T.schema[S])throw new Ee.NotFound("Table "+S+" not part of transaction");return f(T.idbtrans,T)}var z=jt();try{var Z=w&&w.db._novip===this.db._novip?w===je.trans?w._promise(s,j,m):Nn(function(){return w._promise(s,j,m)},{trans:w,transless:je.transless||je}):function k(P,T,H,W){if(P.idbdb&&(P._state.openComplete||je.letThrough||P._vip)){var V=P._createTransaction(T,H,P._dbSchema);try{V.create(),P._state.PR1398_maxLoop=3}catch(ee){return ee.name===Ke.InvalidState&&P.isOpen()&&0<--P._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),P.close({disableAutoOpen:!1}),P.open().then(function(){return k(P,T,H,W)})):It(ee)}return V._promise(T,function(ee,K){return Nn(function(){return je.trans=V,W(ee,K,V)})}).then(function(ee){if(T==="readwrite")try{V.idbtrans.commit()}catch{}return T==="readonly"?ee:V._completion.then(function(){return ee})})}if(P._state.openComplete)return It(new Ee.DatabaseClosed(P._state.dbOpenError));if(!P._state.isBeingOpened){if(!P._state.autoOpen)return It(new Ee.DatabaseClosed);P.open().catch(ze)}return P._state.dbReadyPromise.then(function(){return k(P,T,H,W)})}(this.db,s,[this.name],j);return O&&(Z._consoleTask=O,Z=Z.catch(function(k){return console.trace(k),It(k)})),Z}finally{z&&Fn()}},At.prototype.get=function(s,f){var m=this;return s&&s.constructor===Object?this.where(s).first(f):s==null?It(new Ee.Type("Invalid argument to Table.get()")):this._trans("readonly",function(w){return m.core.get({trans:w,key:s}).then(function(S){return m.hook.reading.fire(S)})}).then(f)},At.prototype.where=function(s){if(typeof s=="string")return new this.db.WhereClause(this,s);if(d(s))return new this.db.WhereClause(this,"[".concat(s.join("+"),"]"));var f=c(s);if(f.length===1)return this.where(f[0]).equals(s[f[0]]);var m=this.schema.indexes.concat(this.schema.primKey).filter(function(z){if(z.compound&&f.every(function(k){return 0<=z.keyPath.indexOf(k)})){for(var Z=0;Z<f.length;++Z)if(f.indexOf(z.keyPath[Z])===-1)return!1;return!0}return!1}).sort(function(z,Z){return z.keyPath.length-Z.keyPath.length})[0];if(m&&this.db._maxKey!==vn){var O=m.keyPath.slice(0,f.length);return this.where(O).equals(O.map(function(Z){return s[Z]}))}!m&&bt&&console.warn("The query ".concat(JSON.stringify(s)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(f.join("+"),"]"));var w=this.schema.idxByName;function S(z,Z){return st(z,Z)===0}var j=f.reduce(function(T,Z){var k=T[0],P=T[1],T=w[Z],H=s[Z];return[k||T,k||!T?Zn(P,T&&T.multi?function(W){return W=ce(W,Z),d(W)&&W.some(function(V){return S(H,V)})}:function(W){return S(H,ce(W,Z))}):P]},[null,null]),O=j[0],j=j[1];return O?this.where(O.name).equals(s[O.keyPath]).filter(j):m?this.filter(j):this.where(f).equals("")},At.prototype.filter=function(s){return this.toCollection().and(s)},At.prototype.count=function(s){return this.toCollection().count(s)},At.prototype.offset=function(s){return this.toCollection().offset(s)},At.prototype.limit=function(s){return this.toCollection().limit(s)},At.prototype.each=function(s){return this.toCollection().each(s)},At.prototype.toArray=function(s){return this.toCollection().toArray(s)},At.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},At.prototype.orderBy=function(s){return new this.db.Collection(new this.db.WhereClause(this,d(s)?"[".concat(s.join("+"),"]"):s))},At.prototype.reverse=function(){return this.toCollection().reverse()},At.prototype.mapToClass=function(s){var f,m=this.db,w=this.name;function S(){return f!==null&&f.apply(this,arguments)||this}(this.schema.mappedClass=s).prototype instanceof na&&(function(Z,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function P(){this.constructor=Z}n(Z,k),Z.prototype=k===null?Object.create(k):(P.prototype=k.prototype,new P)}(S,f=s),Object.defineProperty(S.prototype,"db",{get:function(){return m},enumerable:!1,configurable:!0}),S.prototype.table=function(){return w},s=S);for(var O=new Set,j=s.prototype;j;j=p(j))Object.getOwnPropertyNames(j).forEach(function(Z){return O.add(Z)});function z(Z){if(!Z)return Z;var k,P=Object.create(s.prototype);for(k in Z)if(!O.has(k))try{P[k]=Z[k]}catch{}return P}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=z,this.hook("reading",z),s},At.prototype.defineClass=function(){return this.mapToClass(function(s){h(this,s)})},At.prototype.add=function(s,f){var m=this,w=this.schema.primKey,S=w.auto,O=w.keyPath,j=s;return O&&S&&(j=Ci(O)(s)),this._trans("readwrite",function(z){return m.core.mutate({trans:z,type:"add",keys:f!=null?[f]:null,values:[j]})}).then(function(z){return z.numFailures?fe.reject(z.failures[0]):z.lastResult}).then(function(z){if(O)try{Y(s,O,z)}catch{}return z})},At.prototype.update=function(s,f){return typeof s!="object"||d(s)?this.where(":id").equals(s).modify(f):(s=ce(s,this.schema.primKey.keyPath),s===void 0?It(new Ee.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(s).modify(f))},At.prototype.put=function(s,f){var m=this,w=this.schema.primKey,S=w.auto,O=w.keyPath,j=s;return O&&S&&(j=Ci(O)(s)),this._trans("readwrite",function(z){return m.core.mutate({trans:z,type:"put",values:[j],keys:f!=null?[f]:null})}).then(function(z){return z.numFailures?fe.reject(z.failures[0]):z.lastResult}).then(function(z){if(O)try{Y(s,O,z)}catch{}return z})},At.prototype.delete=function(s){var f=this;return this._trans("readwrite",function(m){return f.core.mutate({trans:m,type:"delete",keys:[s]})}).then(function(m){return m.numFailures?fe.reject(m.failures[0]):void 0})},At.prototype.clear=function(){var s=this;return this._trans("readwrite",function(f){return s.core.mutate({trans:f,type:"deleteRange",range:oo})}).then(function(f){return f.numFailures?fe.reject(f.failures[0]):void 0})},At.prototype.bulkGet=function(s){var f=this;return this._trans("readonly",function(m){return f.core.getMany({keys:s,trans:m}).then(function(w){return w.map(function(S){return f.hook.reading.fire(S)})})})},At.prototype.bulkAdd=function(s,f,m){var w=this,S=Array.isArray(f)?f:void 0,O=(m=m||(S?void 0:f))?m.allKeys:void 0;return this._trans("readwrite",function(j){var k=w.schema.primKey,z=k.auto,k=k.keyPath;if(k&&S)throw new Ee.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(S&&S.length!==s.length)throw new Ee.InvalidArgument("Arguments objects and keys must have the same length");var Z=s.length,k=k&&z?s.map(Ci(k)):s;return w.core.mutate({trans:j,type:"add",keys:S,values:k,wantResults:O}).then(function(V){var T=V.numFailures,H=V.results,W=V.lastResult,V=V.failures;if(T===0)return O?H:W;throw new Be("".concat(w.name,".bulkAdd(): ").concat(T," of ").concat(Z," operations failed"),V)})})},At.prototype.bulkPut=function(s,f,m){var w=this,S=Array.isArray(f)?f:void 0,O=(m=m||(S?void 0:f))?m.allKeys:void 0;return this._trans("readwrite",function(j){var k=w.schema.primKey,z=k.auto,k=k.keyPath;if(k&&S)throw new Ee.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(S&&S.length!==s.length)throw new Ee.InvalidArgument("Arguments objects and keys must have the same length");var Z=s.length,k=k&&z?s.map(Ci(k)):s;return w.core.mutate({trans:j,type:"put",keys:S,values:k,wantResults:O}).then(function(V){var T=V.numFailures,H=V.results,W=V.lastResult,V=V.failures;if(T===0)return O?H:W;throw new Be("".concat(w.name,".bulkPut(): ").concat(T," of ").concat(Z," operations failed"),V)})})},At.prototype.bulkUpdate=function(s){var f=this,m=this.core,w=s.map(function(j){return j.key}),S=s.map(function(j){return j.changes}),O=[];return this._trans("readwrite",function(j){return m.getMany({trans:j,keys:w,cache:"clone"}).then(function(z){var Z=[],k=[];s.forEach(function(T,H){var W=T.key,V=T.changes,ee=z[H];if(ee){for(var K=0,he=Object.keys(V);K<he.length;K++){var ye=he[K],me=V[ye];if(ye===f.schema.primKey.keyPath){if(st(me,W)!==0)throw new Ee.Constraint("Cannot update primary key in bulkUpdate()")}else Y(ee,ye,me)}O.push(H),Z.push(W),k.push(ee)}});var P=Z.length;return m.mutate({trans:j,type:"put",keys:Z,values:k,updates:{keys:w,changeSpecs:S}}).then(function(T){var H=T.numFailures,W=T.failures;if(H===0)return P;for(var V=0,ee=Object.keys(W);V<ee.length;V++){var K,he=ee[V],ye=O[Number(he)];ye!=null&&(K=W[he],delete W[he],W[ye]=K)}throw new Be("".concat(f.name,".bulkUpdate(): ").concat(H," of ").concat(P," operations failed"),W)})})})},At.prototype.bulkDelete=function(s){var f=this,m=s.length;return this._trans("readwrite",function(w){return f.core.mutate({trans:w,type:"delete",keys:s})}).then(function(j){var S=j.numFailures,O=j.lastResult,j=j.failures;if(S===0)return O;throw new Be("".concat(f.name,".bulkDelete(): ").concat(S," of ").concat(m," operations failed"),j)})},At);function At(){}function ri(s){function f(j,z){if(z){for(var Z=arguments.length,k=new Array(Z-1);--Z;)k[Z-1]=arguments[Z];return m[j].subscribe.apply(null,k),s}if(typeof j=="string")return m[j]}var m={};f.addEventType=O;for(var w=1,S=arguments.length;w<S;++w)O(arguments[w]);return f;function O(j,z,Z){if(typeof j!="object"){var k;z=z||Ft;var P={subscribers:[],fire:Z=Z||ze,subscribe:function(T){P.subscribers.indexOf(T)===-1&&(P.subscribers.push(T),P.fire=z(P.fire,T))},unsubscribe:function(T){P.subscribers=P.subscribers.filter(function(H){return H!==T}),P.fire=P.subscribers.reduce(z,Z)}};return m[j]=f[j]=P}c(k=j).forEach(function(T){var H=k[T];if(d(H))O(T,k[T][0],k[T][1]);else{if(H!=="asap")throw new Ee.InvalidArgument("Invalid event config");var W=O(T,Nt,function(){for(var V=arguments.length,ee=new Array(V);V--;)ee[V]=arguments[V];W.subscribers.forEach(function(K){ue(function(){K.apply(null,ee)})})})}})}}function ao(s,f){return A(f).from({prototype:s}),f}function ii(s,f){return!(s.filter||s.algorithm||s.or)&&(f?s.justLimit:!s.replayFilter)}function Oi(s,f){s.filter=Zn(s.filter,f)}function ra(s,f,m){var w=s.replayFilter;s.replayFilter=w?function(){return Zn(w(),f())}:f,s.justLimit=m&&!w}function ia(s,f){if(s.isPrimKey)return f.primaryKey;var m=f.getIndexByKeyPath(s.index);if(!m)throw new Ee.Schema("KeyPath "+s.index+" on object store "+f.name+" is not indexed");return m}function Qa(s,f,m){var w=ia(s,f.schema);return f.openCursor({trans:m,values:!s.keysOnly,reverse:s.dir==="prev",unique:!!s.unique,query:{index:w,range:s.range}})}function so(s,f,m,w){var S=s.replayFilter?Zn(s.filter,s.replayFilter()):s.filter;if(s.or){var O={},j=function(z,Z,k){var P,T;S&&!S(Z,k,function(H){return Z.stop(H)},function(H){return Z.fail(H)})||((T=""+(P=Z.primaryKey))=="[object ArrayBuffer]"&&(T=""+new Uint8Array(P)),v(O,T)||(O[T]=!0,f(z,Z,k)))};return Promise.all([s.or._iterate(j,m),oa(Qa(s,w,m),s.algorithm,j,!s.keysOnly&&s.valueMapper)])}return oa(Qa(s,w,m),Zn(s.algorithm,S),f,!s.keysOnly&&s.valueMapper)}function oa(s,f,m,w){var S=St(w?function(O,j,z){return m(w(O),j,z)}:m);return s.then(function(O){if(O)return O.start(function(){var j=function(){return O.continue()};f&&!f(O,function(z){return j=z},function(z){O.stop(z),j=ze},function(z){O.fail(z),j=ze})||S(O.value,O,function(z){return j=z}),j()})})}var Sr=Symbol(),Ai=(aa.prototype.execute=function(s){if(this.add!==void 0){var f=this.add;if(d(f))return a(a([],d(s)?s:[],!0),f).sort();if(typeof f=="number")return(Number(s)||0)+f;if(typeof f=="bigint")try{return BigInt(s)+f}catch{return BigInt(0)+f}throw new TypeError("Invalid term ".concat(f))}if(this.remove!==void 0){var m=this.remove;if(d(m))return d(s)?s.filter(function(w){return!m.includes(w)}).sort():[];if(typeof m=="number")return Number(s)-m;if(typeof m=="bigint")try{return BigInt(s)-m}catch{return BigInt(0)-m}throw new TypeError("Invalid subtrahend ".concat(m))}return f=(f=this.replacePrefix)===null||f===void 0?void 0:f[0],f&&typeof s=="string"&&s.startsWith(f)?this.replacePrefix[1]+s.substring(f.length):s},aa);function aa(s){Object.assign(this,s)}var Ja=(ht.prototype._read=function(s,f){var m=this._ctx;return m.error?m.table._trans(null,It.bind(null,m.error)):m.table._trans("readonly",s).then(f)},ht.prototype._write=function(s){var f=this._ctx;return f.error?f.table._trans(null,It.bind(null,f.error)):f.table._trans("readwrite",s,"locked")},ht.prototype._addAlgorithm=function(s){var f=this._ctx;f.algorithm=Zn(f.algorithm,s)},ht.prototype._iterate=function(s,f){return so(this._ctx,s,f,this._ctx.table.core)},ht.prototype.clone=function(s){var f=Object.create(this.constructor.prototype),m=Object.create(this._ctx);return s&&h(m,s),f._ctx=m,f},ht.prototype.raw=function(){return this._ctx.valueMapper=null,this},ht.prototype.each=function(s){var f=this._ctx;return this._read(function(m){return so(f,s,m,f.table.core)})},ht.prototype.count=function(s){var f=this;return this._read(function(m){var w=f._ctx,S=w.table.core;if(ii(w,!0))return S.count({trans:m,query:{index:ia(w,S.schema),range:w.range}}).then(function(j){return Math.min(j,w.limit)});var O=0;return so(w,function(){return++O,!1},m,S).then(function(){return O})}).then(s)},ht.prototype.sortBy=function(s,f){var m=s.split(".").reverse(),w=m[0],S=m.length-1;function O(Z,k){return k?O(Z[m[k]],k-1):Z[w]}var j=this._ctx.dir==="next"?1:-1;function z(Z,k){return st(O(Z,S),O(k,S))*j}return this.toArray(function(Z){return Z.sort(z)}).then(f)},ht.prototype.toArray=function(s){var f=this;return this._read(function(m){var w=f._ctx;if(w.dir==="next"&&ii(w,!0)&&0<w.limit){var S=w.valueMapper,O=ia(w,w.table.core.schema);return w.table.core.query({trans:m,limit:w.limit,values:!0,query:{index:O,range:w.range}}).then(function(z){return z=z.result,S?z.map(S):z})}var j=[];return so(w,function(z){return j.push(z)},m,w.table.core).then(function(){return j})},s)},ht.prototype.offset=function(s){var f=this._ctx;return s<=0||(f.offset+=s,ii(f)?ra(f,function(){var m=s;return function(w,S){return m===0||(m===1?--m:S(function(){w.advance(m),m=0}),!1)}}):ra(f,function(){var m=s;return function(){return--m<0}})),this},ht.prototype.limit=function(s){return this._ctx.limit=Math.min(this._ctx.limit,s),ra(this._ctx,function(){var f=s;return function(m,w,S){return--f<=0&&w(S),0<=f}},!0),this},ht.prototype.until=function(s,f){return Oi(this._ctx,function(m,w,S){return!s(m.value)||(w(S),f)}),this},ht.prototype.first=function(s){return this.limit(1).toArray(function(f){return f[0]}).then(s)},ht.prototype.last=function(s){return this.reverse().first(s)},ht.prototype.filter=function(s){var f;return Oi(this._ctx,function(m){return s(m.value)}),(f=this._ctx).isMatch=Zn(f.isMatch,s),this},ht.prototype.and=function(s){return this.filter(s)},ht.prototype.or=function(s){return new this.db.WhereClause(this._ctx.table,s,this)},ht.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ht.prototype.desc=function(){return this.reverse()},ht.prototype.eachKey=function(s){var f=this._ctx;return f.keysOnly=!f.isMatch,this.each(function(m,w){s(w.key,w)})},ht.prototype.eachUniqueKey=function(s){return this._ctx.unique="unique",this.eachKey(s)},ht.prototype.eachPrimaryKey=function(s){var f=this._ctx;return f.keysOnly=!f.isMatch,this.each(function(m,w){s(w.primaryKey,w)})},ht.prototype.keys=function(s){var f=this._ctx;f.keysOnly=!f.isMatch;var m=[];return this.each(function(w,S){m.push(S.key)}).then(function(){return m}).then(s)},ht.prototype.primaryKeys=function(s){var f=this._ctx;if(f.dir==="next"&&ii(f,!0)&&0<f.limit)return this._read(function(w){var S=ia(f,f.table.core.schema);return f.table.core.query({trans:w,values:!1,limit:f.limit,query:{index:S,range:f.range}})}).then(function(w){return w.result}).then(s);f.keysOnly=!f.isMatch;var m=[];return this.each(function(w,S){m.push(S.primaryKey)}).then(function(){return m}).then(s)},ht.prototype.uniqueKeys=function(s){return this._ctx.unique="unique",this.keys(s)},ht.prototype.firstKey=function(s){return this.limit(1).keys(function(f){return f[0]}).then(s)},ht.prototype.lastKey=function(s){return this.reverse().firstKey(s)},ht.prototype.distinct=function(){var s=this._ctx,s=s.index&&s.table.schema.idxByName[s.index];if(!s||!s.multi)return this;var f={};return Oi(this._ctx,function(S){var w=S.primaryKey.toString(),S=v(f,w);return f[w]=!0,!S}),this},ht.prototype.modify=function(s){var f=this,m=this._ctx;return this._write(function(w){var S,O,j;j=typeof s=="function"?s:(S=c(s),O=S.length,function(K){for(var he=!1,ye=0;ye<O;++ye){var me=S[ye],we=s[me],Ae=ce(K,me);we instanceof Ai?(Y(K,me,we.execute(Ae)),he=!0):Ae!==we&&(Y(K,me,we),he=!0)}return he});var z=m.table.core,T=z.schema.primaryKey,Z=T.outbound,k=T.extractKey,P=200,T=f.db._options.modifyChunkSize;T&&(P=typeof T=="object"?T[z.name]||T["*"]||200:T);function H(K,me){var ye=me.failures,me=me.numFailures;V+=K-me;for(var we=0,Ae=c(ye);we<Ae.length;we++){var Ie=Ae[we];W.push(ye[Ie])}}var W=[],V=0,ee=[];return f.clone().primaryKeys().then(function(K){function he(me){var we=Math.min(P,K.length-me);return z.getMany({trans:w,keys:K.slice(me,me+we),cache:"immutable"}).then(function(Ae){for(var Ie=[],Ce=[],De=Z?[]:null,Ne=[],Pe=0;Pe<we;++Pe){var Fe=Ae[Pe],nt={value:ve(Fe),primKey:K[me+Pe]};j.call(nt,nt.value,nt)!==!1&&(nt.value==null?Ne.push(K[me+Pe]):Z||st(k(Fe),k(nt.value))===0?(Ce.push(nt.value),Z&&De.push(K[me+Pe])):(Ne.push(K[me+Pe]),Ie.push(nt.value)))}return Promise.resolve(0<Ie.length&&z.mutate({trans:w,type:"add",values:Ie}).then(function(lt){for(var ft in lt.failures)Ne.splice(parseInt(ft),1);H(Ie.length,lt)})).then(function(){return(0<Ce.length||ye&&typeof s=="object")&&z.mutate({trans:w,type:"put",keys:De,values:Ce,criteria:ye,changeSpec:typeof s!="function"&&s,isAdditionalChunk:0<me}).then(function(lt){return H(Ce.length,lt)})}).then(function(){return(0<Ne.length||ye&&s===sa)&&z.mutate({trans:w,type:"delete",keys:Ne,criteria:ye,isAdditionalChunk:0<me}).then(function(lt){return H(Ne.length,lt)})}).then(function(){return K.length>me+we&&he(me+P)})})}var ye=ii(m)&&m.limit===1/0&&(typeof s!="function"||s===sa)&&{index:m.index,range:m.range};return he(0).then(function(){if(0<W.length)throw new Me("Error modifying one or more objects",W,V,ee);return K.length})})})},ht.prototype.delete=function(){var s=this._ctx,f=s.range;return ii(s)&&(s.isPrimKey||f.type===3)?this._write(function(m){var w=s.table.core.schema.primaryKey,S=f;return s.table.core.count({trans:m,query:{index:w,range:S}}).then(function(O){return s.table.core.mutate({trans:m,type:"deleteRange",range:S}).then(function(j){var z=j.failures;if(j.lastResult,j.results,j=j.numFailures,j)throw new Me("Could not delete some values",Object.keys(z).map(function(Z){return z[Z]}),O-j);return O-j})})}):this.modify(sa)},ht);function ht(){}var sa=function(s,f){return f.value=null};function vu(s,f){return s<f?-1:s===f?0:1}function El(s,f){return f<s?-1:s===f?0:1}function kn(s,f,m){return s=s instanceof xu?new s.Collection(s):s,s._ctx.error=new(m||TypeError)(f),s}function oi(s){return new s.Collection(s,function(){return wu("")}).limit(0)}function uo(s,f,m,w){var S,O,j,z,Z,k,P,T=m.length;if(!m.every(function(V){return typeof V=="string"}))return kn(s,ni);function H(V){S=V==="next"?function(K){return K.toUpperCase()}:function(K){return K.toLowerCase()},O=V==="next"?function(K){return K.toLowerCase()}:function(K){return K.toUpperCase()},j=V==="next"?vu:El;var ee=m.map(function(K){return{lower:O(K),upper:S(K)}}).sort(function(K,he){return j(K.lower,he.lower)});z=ee.map(function(K){return K.upper}),Z=ee.map(function(K){return K.lower}),P=(k=V)==="next"?"":w}H("next"),s=new s.Collection(s,function(){return Er(z[0],Z[T-1]+w)}),s._ondirectionchange=function(V){H(V)};var W=0;return s._addAlgorithm(function(V,ee,K){var he=V.key;if(typeof he!="string")return!1;var ye=O(he);if(f(ye,Z,W))return!0;for(var me=null,we=W;we<T;++we){var Ae=function(Ie,Ce,De,Ne,Pe,Fe){for(var nt=Math.min(Ie.length,Ne.length),lt=-1,ft=0;ft<nt;++ft){var Pn=Ce[ft];if(Pn!==Ne[ft])return Pe(Ie[ft],De[ft])<0?Ie.substr(0,ft)+De[ft]+De.substr(ft+1):Pe(Ie[ft],Ne[ft])<0?Ie.substr(0,ft)+Ne[ft]+De.substr(ft+1):0<=lt?Ie.substr(0,lt)+Ce[lt]+De.substr(lt+1):null;Pe(Ie[ft],Pn)<0&&(lt=ft)}return nt<Ne.length&&Fe==="next"?Ie+De.substr(Ie.length):nt<Ie.length&&Fe==="prev"?Ie.substr(0,De.length):lt<0?null:Ie.substr(0,lt)+Ne[lt]+De.substr(lt+1)}(he,ye,z[we],Z[we],j,k);Ae===null&&me===null?W=we+1:(me===null||0<j(me,Ae))&&(me=Ae)}return ee(me!==null?function(){V.continue(me+P)}:K),!1}),s}function Er(s,f,m,w){return{type:2,lower:s,upper:f,lowerOpen:m,upperOpen:w}}function wu(s){return{type:1,lower:s,upper:s}}var xu=(Object.defineProperty(cn.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),cn.prototype.between=function(s,f,m,w){m=m!==!1,w=w===!0;try{return 0<this._cmp(s,f)||this._cmp(s,f)===0&&(m||w)&&(!m||!w)?oi(this):new this.Collection(this,function(){return Er(s,f,!m,!w)})}catch{return kn(this,Xn)}},cn.prototype.equals=function(s){return s==null?kn(this,Xn):new this.Collection(this,function(){return wu(s)})},cn.prototype.above=function(s){return s==null?kn(this,Xn):new this.Collection(this,function(){return Er(s,void 0,!0)})},cn.prototype.aboveOrEqual=function(s){return s==null?kn(this,Xn):new this.Collection(this,function(){return Er(s,void 0,!1)})},cn.prototype.below=function(s){return s==null?kn(this,Xn):new this.Collection(this,function(){return Er(void 0,s,!1,!0)})},cn.prototype.belowOrEqual=function(s){return s==null?kn(this,Xn):new this.Collection(this,function(){return Er(void 0,s)})},cn.prototype.startsWith=function(s){return typeof s!="string"?kn(this,ni):this.between(s,s+vn,!0,!0)},cn.prototype.startsWithIgnoreCase=function(s){return s===""?this.startsWith(s):uo(this,function(f,m){return f.indexOf(m[0])===0},[s],vn)},cn.prototype.equalsIgnoreCase=function(s){return uo(this,function(f,m){return f===m[0]},[s],"")},cn.prototype.anyOfIgnoreCase=function(){var s=de.apply(G,arguments);return s.length===0?oi(this):uo(this,function(f,m){return m.indexOf(f)!==-1},s,"")},cn.prototype.startsWithAnyOfIgnoreCase=function(){var s=de.apply(G,arguments);return s.length===0?oi(this):uo(this,function(f,m){return m.some(function(w){return f.indexOf(w)===0})},s,vn)},cn.prototype.anyOf=function(){var s=this,f=de.apply(G,arguments),m=this._cmp;try{f.sort(m)}catch{return kn(this,Xn)}if(f.length===0)return oi(this);var w=new this.Collection(this,function(){return Er(f[0],f[f.length-1])});w._ondirectionchange=function(O){m=O==="next"?s._ascending:s._descending,f.sort(m)};var S=0;return w._addAlgorithm(function(O,j,z){for(var Z=O.key;0<m(Z,f[S]);)if(++S===f.length)return j(z),!1;return m(Z,f[S])===0||(j(function(){O.continue(f[S])}),!1)}),w},cn.prototype.notEqual=function(s){return this.inAnyRange([[-1/0,s],[s,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},cn.prototype.noneOf=function(){var s=de.apply(G,arguments);if(s.length===0)return new this.Collection(this);try{s.sort(this._ascending)}catch{return kn(this,Xn)}var f=s.reduce(function(m,w){return m?m.concat([[m[m.length-1][1],w]]):[[-1/0,w]]},null);return f.push([s[s.length-1],this.db._maxKey]),this.inAnyRange(f,{includeLowers:!1,includeUppers:!1})},cn.prototype.inAnyRange=function(he,f){var m=this,w=this._cmp,S=this._ascending,O=this._descending,j=this._min,z=this._max;if(he.length===0)return oi(this);if(!he.every(function(ye){return ye[0]!==void 0&&ye[1]!==void 0&&S(ye[0],ye[1])<=0}))return kn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Ee.InvalidArgument);var Z=!f||f.includeLowers!==!1,k=f&&f.includeUppers===!0,P,T=S;function H(ye,me){return T(ye[0],me[0])}try{(P=he.reduce(function(ye,me){for(var we=0,Ae=ye.length;we<Ae;++we){var Ie=ye[we];if(w(me[0],Ie[1])<0&&0<w(me[1],Ie[0])){Ie[0]=j(Ie[0],me[0]),Ie[1]=z(Ie[1],me[1]);break}}return we===Ae&&ye.push(me),ye},[])).sort(H)}catch{return kn(this,Xn)}var W=0,V=k?function(ye){return 0<S(ye,P[W][1])}:function(ye){return 0<=S(ye,P[W][1])},ee=Z?function(ye){return 0<O(ye,P[W][0])}:function(ye){return 0<=O(ye,P[W][0])},K=V,he=new this.Collection(this,function(){return Er(P[0][0],P[P.length-1][1],!Z,!k)});return he._ondirectionchange=function(ye){T=ye==="next"?(K=V,S):(K=ee,O),P.sort(H)},he._addAlgorithm(function(ye,me,we){for(var Ae,Ie=ye.key;K(Ie);)if(++W===P.length)return me(we),!1;return!V(Ae=Ie)&&!ee(Ae)||(m._cmp(Ie,P[W][1])===0||m._cmp(Ie,P[W][0])===0||me(function(){T===S?ye.continue(P[W][0]):ye.continue(P[W][1])}),!1)}),he},cn.prototype.startsWithAnyOf=function(){var s=de.apply(G,arguments);return s.every(function(f){return typeof f=="string"})?s.length===0?oi(this):this.inAnyRange(s.map(function(f){return[f,f+vn]})):kn(this,"startsWithAnyOf() only works with strings")},cn);function cn(){}function Qn(s){return St(function(f){return co(f),s(f.target.error),!1})}function co(s){s.stopPropagation&&s.stopPropagation(),s.preventDefault&&s.preventDefault()}var lo="storagemutated",es="x-storagemutated-1",Yr=ri(null,lo),ts=(lr.prototype._lock=function(){return F(!je.global),++this._reculock,this._reculock!==1||je.global||(je.lockOwnerFor=this),this},lr.prototype._unlock=function(){if(F(!je.global),--this._reculock==0)for(je.global||(je.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var s=this._blockedFuncs.shift();try{Vt(s[1],s[0])}catch{}}return this},lr.prototype._locked=function(){return this._reculock&&je.lockOwnerFor!==this},lr.prototype.create=function(s){var f=this;if(!this.mode)return this;var m=this.db.idbdb,w=this.db._state.dbOpenError;if(F(!this.idbtrans),!s&&!m)switch(w&&w.name){case"DatabaseClosedError":throw new Ee.DatabaseClosed(w);case"MissingAPIError":throw new Ee.MissingAPI(w.message,w);default:throw new Ee.OpenFailed(w)}if(!this.active)throw new Ee.TransactionInactive;return F(this._completion._state===null),(s=this.idbtrans=s||(this.db.core||m).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=St(function(S){co(S),f._reject(s.error)}),s.onabort=St(function(S){co(S),f.active&&f._reject(new Ee.Abort(s.error)),f.active=!1,f.on("abort").fire(S)}),s.oncomplete=St(function(){f.active=!1,f._resolve(),"mutatedParts"in s&&Yr.storagemutated.fire(s.mutatedParts)}),this},lr.prototype._promise=function(s,f,m){var w=this;if(s==="readwrite"&&this.mode!=="readwrite")return It(new Ee.ReadOnly("Transaction is readonly"));if(!this.active)return It(new Ee.TransactionInactive);if(this._locked())return new fe(function(O,j){w._blockedFuncs.push([function(){w._promise(s,f,m).then(O,j)},je])});if(m)return Nn(function(){var O=new fe(function(j,z){w._lock();var Z=f(j,z,w);Z&&Z.then&&Z.then(j,z)});return O.finally(function(){return w._unlock()}),O._lib=!0,O});var S=new fe(function(O,j){var z=f(O,j,w);z&&z.then&&z.then(O,j)});return S._lib=!0,S},lr.prototype._root=function(){return this.parent?this.parent._root():this},lr.prototype.waitFor=function(s){var f,m=this._root(),w=fe.resolve(s);m._waitingFor?m._waitingFor=m._waitingFor.then(function(){return w}):(m._waitingFor=w,m._waitingQueue=[],f=m.idbtrans.objectStore(m.storeNames[0]),function O(){for(++m._spinCount;m._waitingQueue.length;)m._waitingQueue.shift()();m._waitingFor&&(f.get(-1/0).onsuccess=O)}());var S=m._waitingFor;return new fe(function(O,j){w.then(function(z){return m._waitingQueue.push(St(O.bind(null,z)))},function(z){return m._waitingQueue.push(St(j.bind(null,z)))}).finally(function(){m._waitingFor===S&&(m._waitingFor=null)})})},lr.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Ee.Abort))},lr.prototype.table=function(s){var f=this._memoizedTables||(this._memoizedTables={});if(v(f,s))return f[s];var m=this.schema[s];if(!m)throw new Ee.NotFound("Table "+s+" not part of transaction");return m=new this.db.Table(s,m,this),m.core=this.db.core.table(s),f[s]=m},lr);function lr(){}function ns(s,f,m,w,S,O,j){return{name:s,keyPath:f,unique:m,multi:w,auto:S,compound:O,src:(m&&!j?"&":"")+(w?"*":"")+(S?"++":"")+bu(f)}}function bu(s){return typeof s=="string"?s:s?"["+[].join.call(s,"+")+"]":""}function rs(s,f,m){return{name:s,primKey:f,indexes:m,mappedClass:null,idxByName:(w=function(S){return[S.name,S]},m.reduce(function(S,O,j){return j=w(O,j),j&&(S[j[0]]=j[1]),S},{}))};var w}var fo=function(s){try{return s.only([[]]),fo=function(){return[[]]},[[]]}catch{return fo=function(){return vn},vn}};function Tt(s){return s==null?function(){}:typeof s=="string"?(f=s).split(".").length===1?function(m){return m[f]}:function(m){return ce(m,f)}:function(m){return ce(m,s)};var f}function Ct(s){return[].slice.call(s)}var Nl=0;function ho(s){return s==null?":id":typeof s=="string"?s:"[".concat(s.join("+"),"]")}function kl(s,f,Z){function w(K){if(K.type===3)return null;if(K.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var W=K.lower,V=K.upper,ee=K.lowerOpen,K=K.upperOpen;return W===void 0?V===void 0?null:f.upperBound(V,!!K):V===void 0?f.lowerBound(W,!!ee):f.bound(W,V,!!ee,!!K)}function S(H){var W,V=H.name;return{name:V,schema:H,mutate:function(ee){var K=ee.trans,he=ee.type,ye=ee.keys,me=ee.values,we=ee.range;return new Promise(function(Ae,Ie){Ae=St(Ae);var Ce=K.objectStore(V),De=Ce.keyPath==null,Ne=he==="put"||he==="add";if(!Ne&&he!=="delete"&&he!=="deleteRange")throw new Error("Invalid operation type: "+he);var Pe,Fe=(ye||me||{length:1}).length;if(ye&&me&&ye.length!==me.length)throw new Error("Given keys array must have same length as given values array.");if(Fe===0)return Ae({numFailures:0,failures:{},results:[],lastResult:void 0});function nt(ln){++Pn,co(ln)}var lt=[],ft=[],Pn=0;if(he==="deleteRange"){if(we.type===4)return Ae({numFailures:Pn,failures:ft,results:[],lastResult:void 0});we.type===3?lt.push(Pe=Ce.clear()):lt.push(Pe=Ce.delete(w(we)))}else{var De=Ne?De?[me,ye]:[me,null]:[ye,null],tt=De[0],Lt=De[1];if(Ne)for(var nn=0;nn<Fe;++nn)lt.push(Pe=Lt&&Lt[nn]!==void 0?Ce[he](tt[nn],Lt[nn]):Ce[he](tt[nn])),Pe.onerror=nt;else for(nn=0;nn<Fe;++nn)lt.push(Pe=Ce[he](tt[nn])),Pe.onerror=nt}function Eo(ln){ln=ln.target.result,lt.forEach(function(Ur,va){return Ur.error!=null&&(ft[va]=Ur.error)}),Ae({numFailures:Pn,failures:ft,results:he==="delete"?ye:lt.map(function(Ur){return Ur.result}),lastResult:ln})}Pe.onerror=function(ln){nt(ln),Eo(ln)},Pe.onsuccess=Eo})},getMany:function(ee){var K=ee.trans,he=ee.keys;return new Promise(function(ye,me){ye=St(ye);for(var we,Ae=K.objectStore(V),Ie=he.length,Ce=new Array(Ie),De=0,Ne=0,Pe=function(lt){lt=lt.target,Ce[lt._pos]=lt.result,++Ne===De&&ye(Ce)},Fe=Qn(me),nt=0;nt<Ie;++nt)he[nt]!=null&&((we=Ae.get(he[nt]))._pos=nt,we.onsuccess=Pe,we.onerror=Fe,++De);De===0&&ye(Ce)})},get:function(ee){var K=ee.trans,he=ee.key;return new Promise(function(ye,me){ye=St(ye);var we=K.objectStore(V).get(he);we.onsuccess=function(Ae){return ye(Ae.target.result)},we.onerror=Qn(me)})},query:(W=k,function(ee){return new Promise(function(K,he){K=St(K);var ye,me,we,De=ee.trans,Ae=ee.values,Ie=ee.limit,Pe=ee.query,Ce=Ie===1/0?void 0:Ie,Ne=Pe.index,Pe=Pe.range,De=De.objectStore(V),Ne=Ne.isPrimaryKey?De:De.index(Ne.name),Pe=w(Pe);if(Ie===0)return K({result:[]});W?((Ce=Ae?Ne.getAll(Pe,Ce):Ne.getAllKeys(Pe,Ce)).onsuccess=function(Fe){return K({result:Fe.target.result})},Ce.onerror=Qn(he)):(ye=0,me=!Ae&&"openKeyCursor"in Ne?Ne.openKeyCursor(Pe):Ne.openCursor(Pe),we=[],me.onsuccess=function(Fe){var nt=me.result;return nt?(we.push(Ae?nt.value:nt.primaryKey),++ye===Ie?K({result:we}):void nt.continue()):K({result:we})},me.onerror=Qn(he))})}),openCursor:function(ee){var K=ee.trans,he=ee.values,ye=ee.query,me=ee.reverse,we=ee.unique;return new Promise(function(Ae,Ie){Ae=St(Ae);var Ne=ye.index,Ce=ye.range,De=K.objectStore(V),De=Ne.isPrimaryKey?De:De.index(Ne.name),Ne=me?we?"prevunique":"prev":we?"nextunique":"next",Pe=!he&&"openKeyCursor"in De?De.openKeyCursor(w(Ce),Ne):De.openCursor(w(Ce),Ne);Pe.onerror=Qn(Ie),Pe.onsuccess=St(function(Fe){var nt,lt,ft,Pn,tt=Pe.result;tt?(tt.___id=++Nl,tt.done=!1,nt=tt.continue.bind(tt),lt=(lt=tt.continuePrimaryKey)&&lt.bind(tt),ft=tt.advance.bind(tt),Pn=function(){throw new Error("Cursor not stopped")},tt.trans=K,tt.stop=tt.continue=tt.continuePrimaryKey=tt.advance=function(){throw new Error("Cursor not started")},tt.fail=St(Ie),tt.next=function(){var Lt=this,nn=1;return this.start(function(){return nn--?Lt.continue():Lt.stop()}).then(function(){return Lt})},tt.start=function(Lt){function nn(){if(Pe.result)try{Lt()}catch(ln){tt.fail(ln)}else tt.done=!0,tt.start=function(){throw new Error("Cursor behind last entry")},tt.stop()}var Eo=new Promise(function(ln,Ur){ln=St(ln),Pe.onerror=Qn(Ur),tt.fail=Ur,tt.stop=function(va){tt.stop=tt.continue=tt.continuePrimaryKey=tt.advance=Pn,ln(va)}});return Pe.onsuccess=St(function(ln){Pe.onsuccess=nn,nn()}),tt.continue=nt,tt.continuePrimaryKey=lt,tt.advance=ft,nn(),Eo},Ae(tt)):Ae(null)},Ie)})},count:function(ee){var K=ee.query,he=ee.trans,ye=K.index,me=K.range;return new Promise(function(we,Ae){var Ie=he.objectStore(V),Ce=ye.isPrimaryKey?Ie:Ie.index(ye.name),Ie=w(me),Ce=Ie?Ce.count(Ie):Ce.count();Ce.onsuccess=St(function(De){return we(De.target.result)}),Ce.onerror=Qn(Ae)})}}}var O,j,z,P=(j=Z,z=Ct((O=s).objectStoreNames),{schema:{name:O.name,tables:z.map(function(H){return j.objectStore(H)}).map(function(H){var W=H.keyPath,K=H.autoIncrement,V=d(W),ee={},K={name:H.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:W==null,compound:V,keyPath:W,autoIncrement:K,unique:!0,extractKey:Tt(W)},indexes:Ct(H.indexNames).map(function(he){return H.index(he)}).map(function(we){var ye=we.name,me=we.unique,Ae=we.multiEntry,we=we.keyPath,Ae={name:ye,compound:d(we),keyPath:we,unique:me,multiEntry:Ae,extractKey:Tt(we)};return ee[ho(we)]=Ae}),getIndexByKeyPath:function(he){return ee[ho(he)]}};return ee[":id"]=K.primaryKey,W!=null&&(ee[ho(W)]=K.primaryKey),K})},hasGetAll:0<z.length&&"getAll"in j.objectStore(z[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),Z=P.schema,k=P.hasGetAll,P=Z.tables.map(S),T={};return P.forEach(function(H){return T[H.name]=H}),{stack:"dbcore",transaction:s.transaction.bind(s),table:function(H){if(!T[H])throw new Error("Table '".concat(H,"' not found"));return T[H]},MIN_KEY:-1/0,MAX_KEY:fo(f),schema:Z}}function Tl(s,f,m,w){var S=m.IDBKeyRange;return m.indexedDB,{dbcore:(w=kl(f,S,w),s.dbcore.reduce(function(O,j){return j=j.create,i(i({},O),j(O))},w))}}function ua(s,w){var m=w.db,w=Tl(s._middlewares,m,s._deps,w);s.core=w.dbcore,s.tables.forEach(function(S){var O=S.name;s.core.schema.tables.some(function(j){return j.name===O})&&(S.core=s.core.table(O),s[O]instanceof s.Table&&(s[O].core=S.core))})}function ca(s,f,m,w){m.forEach(function(S){var O=w[S];f.forEach(function(j){var z=function Z(k,P){return R(k,P)||(k=p(k))&&Z(k,P)}(j,S);(!z||"value"in z&&z.value===void 0)&&(j===s.Transaction.prototype||j instanceof s.Transaction?C(j,S,{get:function(){return this.table(S)},set:function(Z){b(this,S,{value:Z,writable:!0,configurable:!0,enumerable:!0})}}):j[S]=new s.Table(S,O))})})}function la(s,f){f.forEach(function(m){for(var w in m)m[w]instanceof s.Table&&delete m[w]})}function Cl(s,f){return s._cfg.version-f._cfg.version}function dn(s,f,m,w){var S=s._dbSchema;m.objectStoreNames.contains("$meta")&&!S.$meta&&(S.$meta=rs("$meta",os("")[0],[]),s._storeNames.push("$meta"));var O=s._createTransaction("readwrite",s._storeNames,S);O.create(m),O._completion.catch(w);var j=O._reject.bind(O),z=je.transless||je;Nn(function(){return je.trans=O,je.transless=z,f!==0?(ua(s,m),k=f,((Z=O).storeNames.includes("$meta")?Z.table("$meta").get("version").then(function(P){return P??k}):fe.resolve(k)).then(function(P){return H=P,W=O,V=m,ee=[],P=(T=s)._versions,K=T._dbSchema=po(0,T.idbdb,V),(P=P.filter(function(he){return he._cfg.version>=H})).length!==0?(P.forEach(function(he){ee.push(function(){var ye=K,me=he._cfg.dbschema;mo(T,ye,V),mo(T,me,V),K=T._dbSchema=me;var we=Nr(ye,me);we.add.forEach(function(Ne){fa(V,Ne[0],Ne[1].primKey,Ne[1].indexes)}),we.change.forEach(function(Ne){if(Ne.recreate)throw new Ee.Upgrade("Not yet support for changing primary key");var Pe=V.objectStore(Ne.name);Ne.add.forEach(function(Fe){return wn(Pe,Fe)}),Ne.change.forEach(function(Fe){Pe.deleteIndex(Fe.name),wn(Pe,Fe)}),Ne.del.forEach(function(Fe){return Pe.deleteIndex(Fe)})});var Ae=he._cfg.contentUpgrade;if(Ae&&he._cfg.version>H){ua(T,V),W._memoizedTables={};var Ie=Q(me);we.del.forEach(function(Ne){Ie[Ne]=ye[Ne]}),la(T,[T.Transaction.prototype]),ca(T,[T.Transaction.prototype],c(Ie),Ie),W.schema=Ie;var Ce,De=ge(Ae);return De&&Gn(),we=fe.follow(function(){var Ne;(Ce=Ae(W))&&De&&(Ne=In.bind(null,null),Ce.then(Ne,Ne))}),Ce&&typeof Ce.then=="function"?fe.resolve(Ce):we.then(function(){return Ce})}}),ee.push(function(ye){var me,we,Ae=he._cfg.dbschema;me=Ae,we=ye,[].slice.call(we.db.objectStoreNames).forEach(function(Ie){return me[Ie]==null&&we.db.deleteObjectStore(Ie)}),la(T,[T.Transaction.prototype]),ca(T,[T.Transaction.prototype],T._storeNames,T._dbSchema),W.schema=T._dbSchema}),ee.push(function(ye){T.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(T.idbdb.version/10)===he._cfg.version?(T.idbdb.deleteObjectStore("$meta"),delete T._dbSchema.$meta,T._storeNames=T._storeNames.filter(function(me){return me!=="$meta"})):ye.objectStore("$meta").put(he._cfg.version,"version"))})}),function he(){return ee.length?fe.resolve(ee.shift()(W.idbtrans)).then(he):fe.resolve()}().then(function(){da(K,V)})):fe.resolve();var T,H,W,V,ee,K}).catch(j)):(c(S).forEach(function(P){fa(m,P,S[P].primKey,S[P].indexes)}),ua(s,m),void fe.follow(function(){return s.on.populate.fire(O)}).catch(j));var Z,k})}function is(s,f){da(s._dbSchema,f),f.db.version%10!=0||f.objectStoreNames.contains("$meta")||f.db.createObjectStore("$meta").add(Math.ceil(f.db.version/10-1),"version");var m=po(0,s.idbdb,f);mo(s,s._dbSchema,f);for(var w=0,S=Nr(m,s._dbSchema).change;w<S.length;w++){var O=function(j){if(j.change.length||j.recreate)return console.warn("Unable to patch indexes of table ".concat(j.name," because it has changes on the type of index or primary key.")),{value:void 0};var z=f.objectStore(j.name);j.add.forEach(function(Z){bt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(j.name,".").concat(Z.src)),wn(z,Z)})}(S[w]);if(typeof O=="object")return O.value}}function Nr(s,f){var m,w={del:[],add:[],change:[]};for(m in s)f[m]||w.del.push(m);for(m in f){var S=s[m],O=f[m];if(S){var j={name:m,def:O,recreate:!1,del:[],add:[],change:[]};if(""+(S.primKey.keyPath||"")!=""+(O.primKey.keyPath||"")||S.primKey.auto!==O.primKey.auto)j.recreate=!0,w.change.push(j);else{var z=S.idxByName,Z=O.idxByName,k=void 0;for(k in z)Z[k]||j.del.push(k);for(k in Z){var P=z[k],T=Z[k];P?P.src!==T.src&&j.change.push(T):j.add.push(T)}(0<j.del.length||0<j.add.length||0<j.change.length)&&w.change.push(j)}}else w.add.push([m,O])}return w}function fa(s,f,m,w){var S=s.db.createObjectStore(f,m.keyPath?{keyPath:m.keyPath,autoIncrement:m.auto}:{autoIncrement:m.auto});return w.forEach(function(O){return wn(S,O)}),S}function da(s,f){c(s).forEach(function(m){f.db.objectStoreNames.contains(m)||(bt&&console.debug("Dexie: Creating missing table",m),fa(f,m,s[m].primKey,s[m].indexes))})}function wn(s,f){s.createIndex(f.name,f.keyPath,{unique:f.unique,multiEntry:f.multi})}function po(s,f,m){var w={};return q(f.objectStoreNames,0).forEach(function(S){for(var O=m.objectStore(S),j=ns(bu(k=O.keyPath),k||"",!0,!1,!!O.autoIncrement,k&&typeof k!="string",!0),z=[],Z=0;Z<O.indexNames.length;++Z){var P=O.index(O.indexNames[Z]),k=P.keyPath,P=ns(P.name,k,!!P.unique,!!P.multiEntry,!1,k&&typeof k!="string",!1);z.push(P)}w[S]=rs(S,j,z)}),w}function mo(s,f,m){for(var w=m.db.objectStoreNames,S=0;S<w.length;++S){var O=w[S],j=m.objectStore(O);s._hasGetAll="getAll"in j;for(var z=0;z<j.indexNames.length;++z){var Z=j.indexNames[z],k=j.index(Z).keyPath,P=typeof k=="string"?k:"["+q(k).join("+")+"]";!f[O]||(k=f[O].idxByName[P])&&(k.name=Z,delete f[O].idxByName[P],f[O].idxByName[Z]=k)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&u.WorkerGlobalScope&&u instanceof u.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(s._hasGetAll=!1)}function os(s){return s.split(",").map(function(f,m){var w=(f=f.trim()).replace(/([&*]|\+\+)/g,""),S=/^\[/.test(w)?w.match(/^\[(.*)\]$/)[1].split("+"):w;return ns(w,S||null,/\&/.test(f),/\*/.test(f),/\+\+/.test(f),d(S),m===0)})}var _u=(go.prototype._parseStoresSpec=function(s,f){c(s).forEach(function(m){if(s[m]!==null){var w=os(s[m]),S=w.shift();if(S.unique=!0,S.multi)throw new Ee.Schema("Primary key cannot be multi-valued");w.forEach(function(O){if(O.auto)throw new Ee.Schema("Only primary key can be marked as autoIncrement (++)");if(!O.keyPath)throw new Ee.Schema("Index must have a name and cannot be an empty string")}),f[m]=rs(m,S,w)}})},go.prototype.stores=function(m){var f=this.db;this._cfg.storesSource=this._cfg.storesSource?h(this._cfg.storesSource,m):m;var m=f._versions,w={},S={};return m.forEach(function(O){h(w,O._cfg.storesSource),S=O._cfg.dbschema={},O._parseStoresSpec(w,S)}),f._dbSchema=S,la(f,[f._allTables,f,f.Transaction.prototype]),ca(f,[f._allTables,f,f.Transaction.prototype,this._cfg.tables],c(S),S),f._storeNames=c(S),this},go.prototype.upgrade=function(s){return this._cfg.contentUpgrade=Wt(this._cfg.contentUpgrade||ze,s),this},go);function go(){}function ha(s,f){var m=s._dbNamesDB;return m||(m=s._dbNamesDB=new Cr(ki,{addons:[],indexedDB:s,IDBKeyRange:f})).version(1).stores({dbnames:"name"}),m.table("dbnames")}function xn(s){return s&&typeof s.databases=="function"}function as(s){return Nn(function(){return je.letThrough=!0,s()})}function Tn(s){return!("from"in s)}var gn=function(s,f){if(!this){var m=new gn;return s&&"d"in s&&h(m,s),m}h(this,arguments.length?{d:1,from:s,to:1<arguments.length?f:s}:{d:0})};function Di(s,f,m){var w=st(f,m);if(!isNaN(w)){if(0<w)throw RangeError();if(Tn(s))return h(s,{from:f,to:m,d:1});var S=s.l,w=s.r;if(st(m,s.from)<0)return S?Di(S,f,m):s.l={from:f,to:m,d:1,l:null,r:null},Pt(s);if(0<st(f,s.to))return w?Di(w,f,m):s.r={from:f,to:m,d:1,l:null,r:null},Pt(s);st(f,s.from)<0&&(s.from=f,s.l=null,s.d=w?w.d+1:1),0<st(m,s.to)&&(s.to=m,s.r=null,s.d=s.l?s.l.d+1:1),m=!s.r,S&&!s.l&&Wn(s,S),w&&m&&Wn(s,w)}}function Wn(s,f){Tn(f)||function m(w,Z){var O=Z.from,j=Z.to,z=Z.l,Z=Z.r;Di(w,O,j),z&&m(w,z),Z&&m(w,Z)}(s,f)}function yo(s,f){var m=Ii(f),w=m.next();if(w.done)return!1;for(var S=w.value,O=Ii(s),j=O.next(S.from),z=j.value;!w.done&&!j.done;){if(st(z.from,S.to)<=0&&0<=st(z.to,S.from))return!0;st(S.from,z.from)<0?S=(w=m.next(z.from)).value:z=(j=O.next(S.from)).value}return!1}function Ii(s){var f=Tn(s)?null:{s:0,n:s};return{next:function(m){for(var w=0<arguments.length;f;)switch(f.s){case 0:if(f.s=1,w)for(;f.n.l&&st(m,f.n.from)<0;)f={up:f,n:f.n.l,s:1};else for(;f.n.l;)f={up:f,n:f.n.l,s:1};case 1:if(f.s=2,!w||st(m,f.n.to)<=0)return{value:f.n,done:!1};case 2:if(f.n.r){f.s=3,f={up:f,n:f.n.r,s:0};continue}case 3:f=f.up}return{done:!0}}}}function Pt(s){var f,m,w=(((f=s.r)===null||f===void 0?void 0:f.d)||0)-(((m=s.l)===null||m===void 0?void 0:m.d)||0),S=1<w?"r":w<-1?"l":"";S&&(f=S=="r"?"l":"r",m=i({},s),w=s[S],s.from=w.from,s.to=w.to,s[S]=w[S],m[S]=w[f],(s[f]=m).d=kr(m)),s.d=kr(s)}function kr(m){var f=m.r,m=m.l;return(f?m?Math.max(f.d,m.d):f.d:m?m.d:0)+1}function Pi(s,f){return c(f).forEach(function(m){s[m]?Wn(s[m],f[m]):s[m]=function w(S){var O,j,z={};for(O in S)v(S,O)&&(j=S[O],z[O]=!j||typeof j!="object"||U.has(j.constructor)?j:w(j));return z}(f[m])}),s}function ss(s,f){return s.all||f.all||Object.keys(s).some(function(m){return f[m]&&yo(f[m],s[m])})}x(gn.prototype,((Bn={add:function(s){return Wn(this,s),this},addKey:function(s){return Di(this,s,s),this},addKeys:function(s){var f=this;return s.forEach(function(m){return Di(f,m,m)}),this},hasKey:function(s){var f=Ii(this).next(s).value;return f&&st(f.from,s)<=0&&0<=st(f.to,s)}})[L]=function(){return Ii(this)},Bn));var Tr={},us={},cs=!1;function pa(s){Pi(us,s),cs||(cs=!0,setTimeout(function(){cs=!1,ma(us,!(us={}))},0))}function ma(s,f){f===void 0&&(f=!1);var m=new Set;if(s.all)for(var w=0,S=Object.values(Tr);w<S.length;w++)vo(j=S[w],s,m,f);else for(var O in s){var j,z=/^idb\:\/\/(.*)\/(.*)\//.exec(O);z&&(O=z[1],z=z[2],(j=Tr["idb://".concat(O,"/").concat(z)])&&vo(j,s,m,f))}m.forEach(function(Z){return Z()})}function vo(s,f,m,w){for(var S=[],O=0,j=Object.entries(s.queries.query);O<j.length;O++){for(var z=j[O],Z=z[0],k=[],P=0,T=z[1];P<T.length;P++){var H=T[P];ss(f,H.obsSet)?H.subscribers.forEach(function(K){return m.add(K)}):w&&k.push(H)}w&&S.push([Z,k])}if(w)for(var W=0,V=S;W<V.length;W++){var ee=V[W],Z=ee[0],k=ee[1];s.queries.query[Z]=k}}function Mi(s){var f=s._state,m=s._deps.indexedDB;if(f.isBeingOpened||s.idbdb)return f.dbReadyPromise.then(function(){return f.dbOpenError?It(f.dbOpenError):s});f.isBeingOpened=!0,f.dbOpenError=null,f.openComplete=!1;var w=f.openCanceller,S=Math.round(10*s.verno),O=!1;function j(){if(f.openCanceller!==w)throw new Ee.DatabaseClosed("db.open() was cancelled")}function z(){return new fe(function(H,W){if(j(),!m)throw new Ee.MissingAPI;var V=s.name,ee=f.autoSchema||!S?m.open(V):m.open(V,S);if(!ee)throw new Ee.MissingAPI;ee.onerror=Qn(W),ee.onblocked=St(s._fireOnBlocked),ee.onupgradeneeded=St(function(K){var he;P=ee.transaction,f.autoSchema&&!s._options.allowEmptyDB?(ee.onerror=co,P.abort(),ee.result.close(),(he=m.deleteDatabase(V)).onsuccess=he.onerror=St(function(){W(new Ee.NoSuchDatabase("Database ".concat(V," doesnt exist")))})):(P.onerror=Qn(W),K=K.oldVersion>Math.pow(2,62)?0:K.oldVersion,T=K<1,s.idbdb=ee.result,O&&is(s,P),dn(s,K/10,P,W))},W),ee.onsuccess=St(function(){P=null;var K,he,ye,me,we,Ae=s.idbdb=ee.result,Ie=q(Ae.objectStoreNames);if(0<Ie.length)try{var Ce=Ae.transaction((me=Ie).length===1?me[0]:me,"readonly");if(f.autoSchema)he=Ae,ye=Ce,(K=s).verno=he.version/10,ye=K._dbSchema=po(0,he,ye),K._storeNames=q(he.objectStoreNames,0),ca(K,[K._allTables],c(ye),ye);else if(mo(s,s._dbSchema,Ce),((we=Nr(po(0,(we=s).idbdb,Ce),we._dbSchema)).add.length||we.change.some(function(De){return De.add.length||De.change.length}))&&!O)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Ae.close(),S=Ae.version+1,O=!0,H(z());ua(s,Ce)}catch{}qr.push(s),Ae.onversionchange=St(function(De){f.vcFired=!0,s.on("versionchange").fire(De)}),Ae.onclose=St(function(De){s.on("close").fire(De)}),T&&(we=s._deps,Ce=V,Ae=we.indexedDB,we=we.IDBKeyRange,xn(Ae)||Ce===ki||ha(Ae,we).put({name:Ce}).catch(ze)),H()},W)}).catch(function(H){switch(H==null?void 0:H.name){case"UnknownError":if(0<f.PR1398_maxLoop)return f.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),z();break;case"VersionError":if(0<S)return S=0,z()}return fe.reject(H)})}var Z,k=f.dbReadyResolve,P=null,T=!1;return fe.race([w,(typeof navigator>"u"?fe.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(H){function W(){return indexedDB.databases().finally(H)}Z=setInterval(W,100),W()}).finally(function(){return clearInterval(Z)}):Promise.resolve()).then(z)]).then(function(){return j(),f.onReadyBeingFired=[],fe.resolve(as(function(){return s.on.ready.fire(s.vip)})).then(function H(){if(0<f.onReadyBeingFired.length){var W=f.onReadyBeingFired.reduce(Wt,ze);return f.onReadyBeingFired=[],fe.resolve(as(function(){return W(s.vip)})).then(H)}})}).finally(function(){f.openCanceller===w&&(f.onReadyBeingFired=null,f.isBeingOpened=!1)}).catch(function(H){f.dbOpenError=H;try{P&&P.abort()}catch{}return w===f.openCanceller&&s._close(),It(H)}).finally(function(){f.openComplete=!0,k()}).then(function(){var H;return T&&(H={},s.tables.forEach(function(W){W.schema.indexes.forEach(function(V){V.name&&(H["idb://".concat(s.name,"/").concat(W.name,"/").concat(V.name)]=new gn(-1/0,[[[]]]))}),H["idb://".concat(s.name,"/").concat(W.name,"/")]=H["idb://".concat(s.name,"/").concat(W.name,"/:dels")]=new gn(-1/0,[[[]]])}),Yr(lo).fire(H),ma(H,!0)),s})}function ls(s){function f(O){return s.next(O)}var m=S(f),w=S(function(O){return s.throw(O)});function S(O){return function(Z){var z=O(Z),Z=z.value;return z.done?Z:Z&&typeof Z.then=="function"?Z.then(m,w):d(Z)?Promise.all(Z).then(m,w):m(Z)}}return S(f)()}function wo(s,f,m){for(var w=d(s)?s.slice():[s],S=0;S<m;++S)w.push(f);return w}var Su={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(s){return i(i({},s),{table:function(f){var m=s.table(f),w=m.schema,S={},O=[];function j(T,H,W){var V=ho(T),ee=S[V]=S[V]||[],K=T==null?0:typeof T=="string"?1:T.length,he=0<H,he=i(i({},W),{name:he?"".concat(V,"(virtual-from:").concat(W.name,")"):W.name,lowLevelIndex:W,isVirtual:he,keyTail:H,keyLength:K,extractKey:Tt(T),unique:!he&&W.unique});return ee.push(he),he.isPrimaryKey||O.push(he),1<K&&j(K===2?T[0]:T.slice(0,K-1),H+1,W),ee.sort(function(ye,me){return ye.keyTail-me.keyTail}),he}f=j(w.primaryKey.keyPath,0,w.primaryKey),S[":id"]=[f];for(var z=0,Z=w.indexes;z<Z.length;z++){var k=Z[z];j(k.keyPath,0,k)}function P(T){var H,W=T.query.index;return W.isVirtual?i(i({},T),{query:{index:W.lowLevelIndex,range:(H=T.query.range,W=W.keyTail,{type:H.type===1?2:H.type,lower:wo(H.lower,H.lowerOpen?s.MAX_KEY:s.MIN_KEY,W),lowerOpen:!0,upper:wo(H.upper,H.upperOpen?s.MIN_KEY:s.MAX_KEY,W),upperOpen:!0})}}):T}return i(i({},m),{schema:i(i({},w),{primaryKey:f,indexes:O,getIndexByKeyPath:function(T){return(T=S[ho(T)])&&T[0]}}),count:function(T){return m.count(P(T))},query:function(T){return m.query(P(T))},openCursor:function(T){var H=T.query.index,W=H.keyTail,V=H.isVirtual,ee=H.keyLength;return V?m.openCursor(P(T)).then(function(he){return he&&K(he)}):m.openCursor(T);function K(he){return Object.create(he,{continue:{value:function(ye){ye!=null?he.continue(wo(ye,T.reverse?s.MAX_KEY:s.MIN_KEY,W)):T.unique?he.continue(he.key.slice(0,ee).concat(T.reverse?s.MIN_KEY:s.MAX_KEY,W)):he.continue()}},continuePrimaryKey:{value:function(ye,me){he.continuePrimaryKey(wo(ye,s.MAX_KEY,W),me)}},primaryKey:{get:function(){return he.primaryKey}},key:{get:function(){var ye=he.key;return ee===1?ye[0]:ye.slice(0,ee)}},value:{get:function(){return he.value}}})}}})}})}};function xo(s,f,m,w){return m=m||{},w=w||"",c(s).forEach(function(S){var O,j,z;v(f,S)?(O=s[S],j=f[S],typeof O=="object"&&typeof j=="object"&&O&&j?(z=ae(O))!==ae(j)?m[w+S]=f[S]:z==="Object"?xo(O,j,m,w+S+"."):O!==j&&(m[w+S]=f[S]):O!==j&&(m[w+S]=f[S])):m[w+S]=void 0}),c(f).forEach(function(S){v(s,S)||(m[w+S]=f[S])}),m}function bo(s,f){return f.type==="delete"?f.keys:f.keys||f.values.map(s.extractKey)}var Eu={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(s){return i(i({},s),{table:function(f){var m=s.table(f),w=m.schema.primaryKey;return i(i({},m),{mutate:function(S){var O=je.trans,j=O.table(f).hook,z=j.deleting,Z=j.creating,k=j.updating;switch(S.type){case"add":if(Z.fire===ze)break;return O._promise("readwrite",function(){return P(S)},!0);case"put":if(Z.fire===ze&&k.fire===ze)break;return O._promise("readwrite",function(){return P(S)},!0);case"delete":if(z.fire===ze)break;return O._promise("readwrite",function(){return P(S)},!0);case"deleteRange":if(z.fire===ze)break;return O._promise("readwrite",function(){return function T(H,W,V){return m.query({trans:H,values:!1,query:{index:w,range:W},limit:V}).then(function(ee){var K=ee.result;return P({type:"delete",keys:K,trans:H}).then(function(he){return 0<he.numFailures?Promise.reject(he.failures[0]):K.length<V?{failures:[],numFailures:0,lastResult:void 0}:T(H,i(i({},W),{lower:K[K.length-1],lowerOpen:!0}),V)})})}(S.trans,S.range,1e4)},!0)}return m.mutate(S);function P(T){var H,W,V,ee=je.trans,K=T.keys||bo(w,T);if(!K)throw new Error("Keys missing");return(T=T.type==="add"||T.type==="put"?i(i({},T),{keys:K}):i({},T)).type!=="delete"&&(T.values=a([],T.values)),T.keys&&(T.keys=a([],T.keys)),H=m,V=K,((W=T).type==="add"?Promise.resolve([]):H.getMany({trans:W.trans,keys:V,cache:"immutable"})).then(function(he){var ye=K.map(function(me,we){var Ae,Ie,Ce,De=he[we],Ne={onerror:null,onsuccess:null};return T.type==="delete"?z.fire.call(Ne,me,De,ee):T.type==="add"||De===void 0?(Ae=Z.fire.call(Ne,me,T.values[we],ee),me==null&&Ae!=null&&(T.keys[we]=me=Ae,w.outbound||Y(T.values[we],w.keyPath,me))):(Ae=xo(De,T.values[we]),(Ie=k.fire.call(Ne,Ae,me,De,ee))&&(Ce=T.values[we],Object.keys(Ie).forEach(function(Pe){v(Ce,Pe)?Ce[Pe]=Ie[Pe]:Y(Ce,Pe,Ie[Pe])}))),Ne});return m.mutate(T).then(function(me){for(var we=me.failures,Ae=me.results,Ie=me.numFailures,me=me.lastResult,Ce=0;Ce<K.length;++Ce){var De=(Ae||K)[Ce],Ne=ye[Ce];De==null?Ne.onerror&&Ne.onerror(we[Ce]):Ne.onsuccess&&Ne.onsuccess(T.type==="put"&&he[Ce]?T.values[Ce]:De)}return{failures:we,results:Ae,numFailures:Ie,lastResult:me}}).catch(function(me){return ye.forEach(function(we){return we.onerror&&we.onerror(me)}),Promise.reject(me)})})}}})}})}};function Nu(s,f,m){try{if(!f||f.keys.length<s.length)return null;for(var w=[],S=0,O=0;S<f.keys.length&&O<s.length;++S)st(f.keys[S],s[O])===0&&(w.push(m?ve(f.values[S]):f.values[S]),++O);return w.length===s.length?w:null}catch{return null}}var fs={stack:"dbcore",level:-1,create:function(s){return{table:function(f){var m=s.table(f);return i(i({},m),{getMany:function(w){if(!w.cache)return m.getMany(w);var S=Nu(w.keys,w.trans._cache,w.cache==="clone");return S?fe.resolve(S):m.getMany(w).then(function(O){return w.trans._cache={keys:w.keys,values:w.cache==="clone"?ve(O):O},O})},mutate:function(w){return w.type!=="add"&&(w.trans._cache=null),m.mutate(w)}})}}}};function ga(s,f){return s.trans.mode==="readonly"&&!!s.subscr&&!s.trans.explicit&&s.trans.db._options.cache!=="disabled"&&!f.schema.primaryKey.outbound}function ku(s,f){switch(s){case"query":return f.values&&!f.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Tu={stack:"dbcore",level:0,name:"Observability",create:function(s){var f=s.schema.name,m=new gn(s.MIN_KEY,s.MAX_KEY);return i(i({},s),{transaction:function(w,S,O){if(je.subscr&&S!=="readonly")throw new Ee.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(je.querier));return s.transaction(w,S,O)},table:function(w){var S=s.table(w),O=S.schema,j=O.primaryKey,T=O.indexes,z=j.extractKey,Z=j.outbound,k=j.autoIncrement&&T.filter(function(W){return W.compound&&W.keyPath.includes(j.keyPath)}),P=i(i({},S),{mutate:function(W){function V(Pe){return Pe="idb://".concat(f,"/").concat(w,"/").concat(Pe),me[Pe]||(me[Pe]=new gn)}var ee,K,he,ye=W.trans,me=W.mutatedParts||(W.mutatedParts={}),we=V(""),Ae=V(":dels"),Ie=W.type,Ne=W.type==="deleteRange"?[W.range]:W.type==="delete"?[W.keys]:W.values.length<50?[bo(j,W).filter(function(Pe){return Pe}),W.values]:[],Ce=Ne[0],De=Ne[1],Ne=W.trans._cache;return d(Ce)?(we.addKeys(Ce),(Ne=Ie==="delete"||Ce.length===De.length?Nu(Ce,Ne):null)||Ae.addKeys(Ce),(Ne||De)&&(ee=V,K=Ne,he=De,O.indexes.forEach(function(Pe){var Fe=ee(Pe.name||"");function nt(ft){return ft!=null?Pe.extractKey(ft):null}function lt(ft){return Pe.multiEntry&&d(ft)?ft.forEach(function(Pn){return Fe.addKey(Pn)}):Fe.addKey(ft)}(K||he).forEach(function(ft,Lt){var tt=K&&nt(K[Lt]),Lt=he&&nt(he[Lt]);st(tt,Lt)!==0&&(tt!=null&&lt(tt),Lt!=null&&lt(Lt))})}))):Ce?(De={from:(De=Ce.lower)!==null&&De!==void 0?De:s.MIN_KEY,to:(De=Ce.upper)!==null&&De!==void 0?De:s.MAX_KEY},Ae.add(De),we.add(De)):(we.add(m),Ae.add(m),O.indexes.forEach(function(Pe){return V(Pe.name).add(m)})),S.mutate(W).then(function(Pe){return!Ce||W.type!=="add"&&W.type!=="put"||(we.addKeys(Pe.results),k&&k.forEach(function(Fe){for(var nt=W.values.map(function(tt){return Fe.extractKey(tt)}),lt=Fe.keyPath.findIndex(function(tt){return tt===j.keyPath}),ft=0,Pn=Pe.results.length;ft<Pn;++ft)nt[ft][lt]=Pe.results[ft];V(Fe.name).addKeys(nt)})),ye.mutatedParts=Pi(ye.mutatedParts||{},me),Pe})}}),T=function(V){var ee=V.query,V=ee.index,ee=ee.range;return[V,new gn((V=ee.lower)!==null&&V!==void 0?V:s.MIN_KEY,(ee=ee.upper)!==null&&ee!==void 0?ee:s.MAX_KEY)]},H={get:function(W){return[j,new gn(W.key)]},getMany:function(W){return[j,new gn().addKeys(W.keys)]},count:T,query:T,openCursor:T};return c(H).forEach(function(W){P[W]=function(V){var ee=je.subscr,K=!!ee,he=ga(je,S)&&ku(W,V)?V.obsSet={}:ee;if(K){var ye=function(De){return De="idb://".concat(f,"/").concat(w,"/").concat(De),he[De]||(he[De]=new gn)},me=ye(""),we=ye(":dels"),ee=H[W](V),K=ee[0],ee=ee[1];if((W==="query"&&K.isPrimaryKey&&!V.values?we:ye(K.name||"")).add(ee),!K.isPrimaryKey){if(W!=="count"){var Ae=W==="query"&&Z&&V.values&&S.query(i(i({},V),{values:!1}));return S[W].apply(this,arguments).then(function(De){if(W==="query"){if(Z&&V.values)return Ae.then(function(nt){return nt=nt.result,me.addKeys(nt),De});var Ne=V.values?De.result.map(z):De.result;(V.values?me:we).addKeys(Ne)}else if(W==="openCursor"){var Pe=De,Fe=V.values;return Pe&&Object.create(Pe,{key:{get:function(){return we.addKey(Pe.primaryKey),Pe.key}},primaryKey:{get:function(){var nt=Pe.primaryKey;return we.addKey(nt),nt}},value:{get:function(){return Fe&&me.addKey(Pe.primaryKey),Pe.value}}})}return De})}we.add(m)}}return S[W].apply(this,arguments)}}),P}})}};function Cn(s,f,m){if(m.numFailures===0)return f;if(f.type==="deleteRange")return null;var w=f.keys?f.keys.length:"values"in f&&f.values?f.values.length:1;return m.numFailures===w?null:(f=i({},f),d(f.keys)&&(f.keys=f.keys.filter(function(S,O){return!(O in m.failures)})),"values"in f&&d(f.values)&&(f.values=f.values.filter(function(S,O){return!(O in m.failures)})),f)}function _o(s,f){return m=s,((w=f).lower===void 0||(w.lowerOpen?0<st(m,w.lower):0<=st(m,w.lower)))&&(s=s,(f=f).upper===void 0||(f.upperOpen?st(s,f.upper)<0:st(s,f.upper)<=0));var m,w}function Ri(s,f,H,w,S,O){if(!H||H.length===0)return s;var j=f.query.index,z=j.multiEntry,Z=f.query.range,k=w.schema.primaryKey.extractKey,P=j.extractKey,T=(j.lowLevelIndex||j).extractKey,H=H.reduce(function(W,V){var ee=W,K=[];if(V.type==="add"||V.type==="put")for(var he=new gn,ye=V.values.length-1;0<=ye;--ye){var me,we=V.values[ye],Ae=k(we);he.hasKey(Ae)||(me=P(we),(z&&d(me)?me.some(function(Pe){return _o(Pe,Z)}):_o(me,Z))&&(he.addKey(Ae),K.push(we)))}switch(V.type){case"add":var Ie=new gn().addKeys(f.values?W.map(function(Fe){return k(Fe)}):W),ee=W.concat(f.values?K.filter(function(Fe){return Fe=k(Fe),!Ie.hasKey(Fe)&&(Ie.addKey(Fe),!0)}):K.map(function(Fe){return k(Fe)}).filter(function(Fe){return!Ie.hasKey(Fe)&&(Ie.addKey(Fe),!0)}));break;case"put":var Ce=new gn().addKeys(V.values.map(function(Fe){return k(Fe)}));ee=W.filter(function(Fe){return!Ce.hasKey(f.values?k(Fe):Fe)}).concat(f.values?K:K.map(function(Fe){return k(Fe)}));break;case"delete":var De=new gn().addKeys(V.keys);ee=W.filter(function(Fe){return!De.hasKey(f.values?k(Fe):Fe)});break;case"deleteRange":var Ne=V.range;ee=W.filter(function(Fe){return!_o(k(Fe),Ne)})}return ee},s);return H===s?s:(H.sort(function(W,V){return st(T(W),T(V))||st(k(W),k(V))}),f.limit&&f.limit<1/0&&(H.length>f.limit?H.length=f.limit:s.length===f.limit&&H.length<f.limit&&(S.dirty=!0)),O?Object.freeze(H):H)}function ds(s,f){return st(s.lower,f.lower)===0&&st(s.upper,f.upper)===0&&!!s.lowerOpen==!!f.lowerOpen&&!!s.upperOpen==!!f.upperOpen}function Cu(s,f){return function(m,w,S,O){if(m===void 0)return w!==void 0?-1:0;if(w===void 0)return 1;if((w=st(m,w))===0){if(S&&O)return 0;if(S)return 1;if(O)return-1}return w}(s.lower,f.lower,s.lowerOpen,f.lowerOpen)<=0&&0<=function(m,w,S,O){if(m===void 0)return w!==void 0?1:0;if(w===void 0)return-1;if((w=st(m,w))===0){if(S&&O)return 0;if(S)return-1;if(O)return 1}return w}(s.upper,f.upper,s.upperOpen,f.upperOpen)}function Ol(s,f,m,w){s.subscribers.add(m),w.addEventListener("abort",function(){var S,O;s.subscribers.delete(m),s.subscribers.size===0&&(S=s,O=f,setTimeout(function(){S.subscribers.size===0&&oe(O,S)},3e3))})}var Al={stack:"dbcore",level:0,name:"Cache",create:function(s){var f=s.schema.name;return i(i({},s),{transaction:function(m,w,S){var O,j,z=s.transaction(m,w,S);return w==="readwrite"&&(j=(O=new AbortController).signal,S=function(Z){return function(){if(O.abort(),w==="readwrite"){for(var k=new Set,P=0,T=m;P<T.length;P++){var H=T[P],W=Tr["idb://".concat(f,"/").concat(H)];if(W){var V=s.table(H),ee=W.optimisticOps.filter(function(Fe){return Fe.trans===z});if(z._explicit&&Z&&z.mutatedParts)for(var K=0,he=Object.values(W.queries.query);K<he.length;K++)for(var ye=0,me=(Ie=he[K]).slice();ye<me.length;ye++)ss((Ce=me[ye]).obsSet,z.mutatedParts)&&(oe(Ie,Ce),Ce.subscribers.forEach(function(Fe){return k.add(Fe)}));else if(0<ee.length){W.optimisticOps=W.optimisticOps.filter(function(Fe){return Fe.trans!==z});for(var we=0,Ae=Object.values(W.queries.query);we<Ae.length;we++)for(var Ie,Ce,De,Ne=0,Pe=(Ie=Ae[we]).slice();Ne<Pe.length;Ne++)(Ce=Pe[Ne]).res!=null&&z.mutatedParts&&(Z&&!Ce.dirty?(De=Object.isFrozen(Ce.res),De=Ri(Ce.res,Ce.req,ee,V,Ce,De),Ce.dirty?(oe(Ie,Ce),Ce.subscribers.forEach(function(Fe){return k.add(Fe)})):De!==Ce.res&&(Ce.res=De,Ce.promise=fe.resolve({result:De}))):(Ce.dirty&&oe(Ie,Ce),Ce.subscribers.forEach(function(Fe){return k.add(Fe)})))}}}k.forEach(function(Fe){return Fe()})}}},z.addEventListener("abort",S(!1),{signal:j}),z.addEventListener("error",S(!1),{signal:j}),z.addEventListener("complete",S(!0),{signal:j})),z},table:function(m){var w=s.table(m),S=w.schema.primaryKey;return i(i({},w),{mutate:function(O){var j=je.trans;if(S.outbound||j.db._options.cache==="disabled"||j.explicit||j.idbtrans.mode!=="readwrite")return w.mutate(O);var z=Tr["idb://".concat(f,"/").concat(m)];return z?(j=w.mutate(O),O.type!=="add"&&O.type!=="put"||!(50<=O.values.length||bo(S,O).some(function(Z){return Z==null}))?(z.optimisticOps.push(O),O.mutatedParts&&pa(O.mutatedParts),j.then(function(Z){0<Z.numFailures&&(oe(z.optimisticOps,O),(Z=Cn(0,O,Z))&&z.optimisticOps.push(Z),O.mutatedParts&&pa(O.mutatedParts))}),j.catch(function(){oe(z.optimisticOps,O),O.mutatedParts&&pa(O.mutatedParts)})):j.then(function(Z){var k=Cn(0,i(i({},O),{values:O.values.map(function(P,T){var H;return Z.failures[T]?P:(P=(H=S.keyPath)!==null&&H!==void 0&&H.includes(".")?ve(P):i({},P),Y(P,S.keyPath,Z.results[T]),P)})}),Z);z.optimisticOps.push(k),queueMicrotask(function(){return O.mutatedParts&&pa(O.mutatedParts)})}),j):w.mutate(O)},query:function(O){if(!ga(je,w)||!ku("query",O))return w.query(O);var j=((k=je.trans)===null||k===void 0?void 0:k.db._options.cache)==="immutable",T=je,z=T.requery,Z=T.signal,k=function(V,ee,K,he){var ye=Tr["idb://".concat(V,"/").concat(ee)];if(!ye)return[];if(!(ee=ye.queries[K]))return[null,!1,ye,null];var me=ee[(he.query?he.query.index.name:null)||""];if(!me)return[null,!1,ye,null];switch(K){case"query":var we=me.find(function(Ae){return Ae.req.limit===he.limit&&Ae.req.values===he.values&&ds(Ae.req.query.range,he.query.range)});return we?[we,!0,ye,me]:[me.find(function(Ae){return("limit"in Ae.req?Ae.req.limit:1/0)>=he.limit&&(!he.values||Ae.req.values)&&Cu(Ae.req.query.range,he.query.range)}),!1,ye,me];case"count":return we=me.find(function(Ae){return ds(Ae.req.query.range,he.query.range)}),[we,!!we,ye,me]}}(f,m,"query",O),P=k[0],T=k[1],H=k[2],W=k[3];return P&&T?P.obsSet=O.obsSet:(T=w.query(O).then(function(V){var ee=V.result;if(P&&(P.res=ee),j){for(var K=0,he=ee.length;K<he;++K)Object.freeze(ee[K]);Object.freeze(ee)}else V.result=ve(ee);return V}).catch(function(V){return W&&P&&oe(W,P),Promise.reject(V)}),P={obsSet:O.obsSet,promise:T,subscribers:new Set,type:"query",req:O,dirty:!1},W?W.push(P):(W=[P],(H=H||(Tr["idb://".concat(f,"/").concat(m)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[O.query.index.name||""]=W)),Ol(P,W,z,Z),P.promise.then(function(V){return{result:Ri(V.result,O,H==null?void 0:H.optimisticOps,w,P,j)}})}})}})}};function ya(s,f){return new Proxy(s,{get:function(m,w,S){return w==="db"?f:Reflect.get(m,w,S)}})}var Cr=(Gt.prototype.version=function(s){if(isNaN(s)||s<.1)throw new Ee.Type("Given version is not a positive number");if(s=Math.round(10*s)/10,this.idbdb||this._state.isBeingOpened)throw new Ee.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,s);var f=this._versions,m=f.filter(function(w){return w._cfg.version===s})[0];return m||(m=new this.Version(s),f.push(m),f.sort(Cl),m.stores({}),this._state.autoSchema=!1,m)},Gt.prototype._whenReady=function(s){var f=this;return this.idbdb&&(this._state.openComplete||je.letThrough||this._vip)?s():new fe(function(m,w){if(f._state.openComplete)return w(new Ee.DatabaseClosed(f._state.dbOpenError));if(!f._state.isBeingOpened){if(!f._state.autoOpen)return void w(new Ee.DatabaseClosed);f.open().catch(ze)}f._state.dbReadyPromise.then(m,w)}).then(s)},Gt.prototype.use=function(s){var f=s.stack,m=s.create,w=s.level,S=s.name;return S&&this.unuse({stack:f,name:S}),s=this._middlewares[f]||(this._middlewares[f]=[]),s.push({stack:f,create:m,level:w??10,name:S}),s.sort(function(O,j){return O.level-j.level}),this},Gt.prototype.unuse=function(s){var f=s.stack,m=s.name,w=s.create;return f&&this._middlewares[f]&&(this._middlewares[f]=this._middlewares[f].filter(function(S){return w?S.create!==w:!!m&&S.name!==m})),this},Gt.prototype.open=function(){var s=this;return Vt($t,function(){return Mi(s)})},Gt.prototype._close=function(){var s=this._state,f=qr.indexOf(this);if(0<=f&&qr.splice(f,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}s.isBeingOpened||(s.dbReadyPromise=new fe(function(m){s.dbReadyResolve=m}),s.openCanceller=new fe(function(m,w){s.cancelOpen=w}))},Gt.prototype.close=function(m){var f=(m===void 0?{disableAutoOpen:!0}:m).disableAutoOpen,m=this._state;f?(m.isBeingOpened&&m.cancelOpen(new Ee.DatabaseClosed),this._close(),m.autoOpen=!1,m.dbOpenError=new Ee.DatabaseClosed):(this._close(),m.autoOpen=this._options.autoOpen||m.isBeingOpened,m.openComplete=!1,m.dbOpenError=null)},Gt.prototype.delete=function(s){var f=this;s===void 0&&(s={disableAutoOpen:!0});var m=0<arguments.length&&typeof arguments[0]!="object",w=this._state;return new fe(function(S,O){function j(){f.close(s);var z=f._deps.indexedDB.deleteDatabase(f.name);z.onsuccess=St(function(){var Z,k,P;Z=f._deps,k=f.name,P=Z.indexedDB,Z=Z.IDBKeyRange,xn(P)||k===ki||ha(P,Z).delete(k).catch(ze),S()}),z.onerror=Qn(O),z.onblocked=f._fireOnBlocked}if(m)throw new Ee.InvalidArgument("Invalid closeOptions argument to db.delete()");w.isBeingOpened?w.dbReadyPromise.then(j):j()})},Gt.prototype.backendDB=function(){return this.idbdb},Gt.prototype.isOpen=function(){return this.idbdb!==null},Gt.prototype.hasBeenClosed=function(){var s=this._state.dbOpenError;return s&&s.name==="DatabaseClosed"},Gt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Gt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Gt.prototype,"tables",{get:function(){var s=this;return c(this._allTables).map(function(f){return s._allTables[f]})},enumerable:!1,configurable:!0}),Gt.prototype.transaction=function(){var s=(function(f,m,w){var S=arguments.length;if(S<2)throw new Ee.InvalidArgument("Too few arguments");for(var O=new Array(S-1);--S;)O[S-1]=arguments[S];return w=O.pop(),[f,J(O),w]}).apply(this,arguments);return this._transaction.apply(this,s)},Gt.prototype._transaction=function(s,f,m){var w=this,S=je.trans;S&&S.db===this&&s.indexOf("!")===-1||(S=null);var O,j,z=s.indexOf("?")!==-1;s=s.replace("!","").replace("?","");try{if(j=f.map(function(k){if(k=k instanceof w.Table?k.name:k,typeof k!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return k}),s=="r"||s===io)O=io;else{if(s!="rw"&&s!=Ti)throw new Ee.InvalidArgument("Invalid transaction mode: "+s);O=Ti}if(S){if(S.mode===io&&O===Ti){if(!z)throw new Ee.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");S=null}S&&j.forEach(function(k){if(S&&S.storeNames.indexOf(k)===-1){if(!z)throw new Ee.SubTransaction("Table "+k+" not included in parent transaction.");S=null}}),z&&S&&!S.active&&(S=null)}}catch(k){return S?S._promise(null,function(P,T){T(k)}):It(k)}var Z=(function k(P,T,H,W,V){return fe.resolve().then(function(){var ee=je.transless||je,K=P._createTransaction(T,H,P._dbSchema,W);if(K.explicit=!0,ee={trans:K,transless:ee},W)K.idbtrans=W.idbtrans;else try{K.create(),K.idbtrans._explicit=!0,P._state.PR1398_maxLoop=3}catch(me){return me.name===Ke.InvalidState&&P.isOpen()&&0<--P._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),P.close({disableAutoOpen:!1}),P.open().then(function(){return k(P,T,H,null,V)})):It(me)}var he,ye=ge(V);return ye&&Gn(),ee=fe.follow(function(){var me;(he=V.call(K,K))&&(ye?(me=In.bind(null,null),he.then(me,me)):typeof he.next=="function"&&typeof he.throw=="function"&&(he=ls(he)))},ee),(he&&typeof he.then=="function"?fe.resolve(he).then(function(me){return K.active?me:It(new Ee.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):ee.then(function(){return he})).then(function(me){return W&&K._resolve(),K._completion.then(function(){return me})}).catch(function(me){return K._reject(me),It(me)})})}).bind(null,this,O,j,S,m);return S?S._promise(O,Z,"lock"):je.trans?Vt(je.transless,function(){return w._whenReady(Z)}):this._whenReady(Z)},Gt.prototype.table=function(s){if(!v(this._allTables,s))throw new Ee.InvalidTable("Table ".concat(s," does not exist"));return this._allTables[s]},Gt);function Gt(s,f){var m=this;this._middlewares={},this.verno=0;var w=Gt.dependencies;this._options=f=i({addons:Gt.addons,autoOpen:!0,indexedDB:w.indexedDB,IDBKeyRange:w.IDBKeyRange,cache:"cloned"},f),this._deps={indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange},w=f.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var S,O,j,z,Z,k={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ze,dbReadyPromise:null,cancelOpen:ze,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:f.autoOpen};k.dbReadyPromise=new fe(function(T){k.dbReadyResolve=T}),k.openCanceller=new fe(function(T,H){k.cancelOpen=H}),this._state=k,this.name=s,this.on=ri(this,"populate","blocked","versionchange","close",{ready:[Wt,ze]}),this.on.ready.subscribe=te(this.on.ready.subscribe,function(T){return function(H,W){Gt.vip(function(){var V,ee=m._state;ee.openComplete?(ee.dbOpenError||fe.resolve().then(H),W&&T(H)):ee.onReadyBeingFired?(ee.onReadyBeingFired.push(H),W&&T(H)):(T(H),V=m,W||T(function K(){V.on.ready.unsubscribe(H),V.on.ready.unsubscribe(K)}))})}}),this.Collection=(S=this,ao(Ja.prototype,function(he,K){this.db=S;var W=oo,V=null;if(K)try{W=K()}catch(ye){V=ye}var ee=he._ctx,K=ee.table,he=K.hook.reading.fire;this._ctx={table:K,index:ee.index,isPrimKey:!ee.index||K.schema.primKey.keyPath&&ee.index===K.schema.primKey.name,range:W,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:V,or:ee.or,valueMapper:he!==Nt?he:null}})),this.Table=(O=this,ao(Za.prototype,function(T,H,W){this.db=O,this._tx=W,this.name=T,this.schema=H,this.hook=O._allTables[T]?O._allTables[T].hook:ri(null,{creating:[Et,ze],reading:[Ge,Nt],updating:[We,ze],deleting:[et,ze]})})),this.Transaction=(j=this,ao(ts.prototype,function(T,H,W,V,ee){var K=this;this.db=j,this.mode=T,this.storeNames=H,this.schema=W,this.chromeTransactionDurability=V,this.idbtrans=null,this.on=ri(this,"complete","error","abort"),this.parent=ee||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new fe(function(he,ye){K._resolve=he,K._reject=ye}),this._completion.then(function(){K.active=!1,K.on.complete.fire()},function(he){var ye=K.active;return K.active=!1,K.on.error.fire(he),K.parent?K.parent._reject(he):ye&&K.idbtrans&&K.idbtrans.abort(),It(he)})})),this.Version=(z=this,ao(_u.prototype,function(T){this.db=z,this._cfg={version:T,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(Z=this,ao(xu.prototype,function(T,H,W){if(this.db=Z,this._ctx={table:T,index:H===":id"?null:H,or:W},this._cmp=this._ascending=st,this._descending=function(V,ee){return st(ee,V)},this._max=function(V,ee){return 0<st(V,ee)?V:ee},this._min=function(V,ee){return st(V,ee)<0?V:ee},this._IDBKeyRange=Z._deps.IDBKeyRange,!this._IDBKeyRange)throw new Ee.MissingAPI})),this.on("versionchange",function(T){0<T.newVersion?console.warn("Another connection wants to upgrade database '".concat(m.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(m.name,"'. Closing db now to resume the delete request.")),m.close({disableAutoOpen:!1})}),this.on("blocked",function(T){!T.newVersion||T.newVersion<T.oldVersion?console.warn("Dexie.delete('".concat(m.name,"') was blocked")):console.warn("Upgrade '".concat(m.name,"' blocked by other connection holding version ").concat(T.oldVersion/10))}),this._maxKey=fo(f.IDBKeyRange),this._createTransaction=function(T,H,W,V){return new m.Transaction(T,H,W,m._options.chromeTransactionDurability,V)},this._fireOnBlocked=function(T){m.on("blocked").fire(T),qr.filter(function(H){return H.name===m.name&&H!==m&&!H._state.vcFired}).map(function(H){return H.on("versionchange").fire(T)})},this.use(fs),this.use(Al),this.use(Tu),this.use(Su),this.use(Eu);var P=new Proxy(this,{get:function(T,H,W){if(H==="_vip")return!0;if(H==="table")return function(ee){return ya(m.table(ee),P)};var V=Reflect.get(T,H,W);return V instanceof Za?ya(V,P):H==="tables"?V.map(function(ee){return ya(ee,P)}):H==="_createTransaction"?function(){return ya(V.apply(this,arguments),P)}:V}});this.vip=P,w.forEach(function(T){return T(m)})}var Or,Bn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Dl=(So.prototype.subscribe=function(s,f,m){return this._subscribe(s&&typeof s!="function"?s:{next:s,error:f,complete:m})},So.prototype[Bn]=function(){return this},So);function So(s){this._subscribe=s}try{Or={indexedDB:u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.msIndexedDB,IDBKeyRange:u.IDBKeyRange||u.webkitIDBKeyRange}}catch{Or={indexedDB:null,IDBKeyRange:null}}function hs(s){var f,m=!1,w=new Dl(function(S){var O=ge(s),j,z=!1,Z={},k={},P={get closed(){return z},unsubscribe:function(){z||(z=!0,j&&j.abort(),T&&Yr.storagemutated.unsubscribe(W))}};S.start&&S.start(P);var T=!1,H=function(){return _r(V)},W=function(ee){Pi(Z,ee),ss(k,Z)&&H()},V=function(){var ee,K,he;!z&&Or.indexedDB&&(Z={},ee={},j&&j.abort(),j=new AbortController,he=function(ye){var me=jt();try{O&&Gn();var we=Nn(s,ye);return we=O?we.finally(In):we}finally{me&&Fn()}}(K={subscr:ee,signal:j.signal,requery:H,querier:s,trans:null}),Promise.resolve(he).then(function(ye){m=!0,f=ye,z||K.signal.aborted||(Z={},function(me){for(var we in me)if(v(me,we))return;return 1}(k=ee)||T||(Yr(lo,W),T=!0),_r(function(){return!z&&S.next&&S.next(ye)}))},function(ye){m=!1,["DatabaseClosedError","AbortError"].includes(ye==null?void 0:ye.name)||z||_r(function(){z||S.error&&S.error(ye)})}))};return setTimeout(H,0),P});return w.hasValue=function(){return m},w.getValue=function(){return f},w}var On=Cr;function $i(s){var f=Kr;try{Kr=!0,Yr.storagemutated.fire(s),ma(s,!0)}finally{Kr=f}}x(On,i(i({},xt),{delete:function(s){return new On(s,{addons:[]}).delete()},exists:function(s){return new On(s,{addons:[]}).open().then(function(f){return f.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(s){try{return f=On.dependencies,m=f.indexedDB,f=f.IDBKeyRange,(xn(m)?Promise.resolve(m.databases()).then(function(w){return w.map(function(S){return S.name}).filter(function(S){return S!==ki})}):ha(m,f).toCollection().primaryKeys()).then(s)}catch{return It(new Ee.MissingAPI)}var f,m},defineClass:function(){return function(s){h(this,s)}},ignoreTransaction:function(s){return je.trans?Vt(je.transless,s):s()},vip:as,async:function(s){return function(){try{var f=ls(s.apply(this,arguments));return f&&typeof f.then=="function"?f:fe.resolve(f)}catch(m){return It(m)}}},spawn:function(s,f,m){try{var w=ls(s.apply(m,f||[]));return w&&typeof w.then=="function"?w:fe.resolve(w)}catch(S){return It(S)}},currentTransaction:{get:function(){return je.trans||null}},waitFor:function(s,f){return f=fe.resolve(typeof s=="function"?On.ignoreTransaction(s):s).timeout(f||6e4),je.trans?je.trans.waitFor(f):f},Promise:fe,debug:{get:function(){return bt},set:function(s){an(s)}},derive:A,extend:h,props:x,override:te,Events:ri,on:Yr,liveQuery:hs,extendObservabilitySet:Pi,getByKeyPath:ce,setByKeyPath:Y,delByKeyPath:function(s,f){typeof f=="string"?Y(s,f,void 0):"length"in f&&[].map.call(f,function(m){Y(s,m,void 0)})},shallowClone:Q,deepClone:ve,getObjectDiff:xo,cmp:st,asap:ue,minKey:-1/0,addons:[],connections:qr,errnames:Ke,dependencies:Or,cache:Tr,semVer:"4.0.10",version:"4.0.10".split(".").map(function(s){return parseInt(s)}).reduce(function(s,f,m){return s+f/Math.pow(10,2*m)})})),On.maxKey=fo(On.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Yr(lo,function(s){Kr||(s=new CustomEvent(es,{detail:s}),Kr=!0,dispatchEvent(s),Kr=!1)}),addEventListener(es,function(s){s=s.detail,Kr||$i(s)}));var ji,Kr=!1,Ou=function(){};return typeof BroadcastChannel<"u"&&((Ou=function(){(ji=new BroadcastChannel(es)).onmessage=function(s){return s.data&&$i(s.data)}})(),typeof ji.unref=="function"&&ji.unref(),Yr(lo,function(s){Kr||ji.postMessage(s)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(s){if(!Cr.disableBfCache&&s.persisted){bt&&console.debug("Dexie: handling persisted pagehide"),ji!=null&&ji.close();for(var f=0,m=qr;f<m.length;f++)m[f].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(s){!Cr.disableBfCache&&s.persisted&&(bt&&console.debug("Dexie: handling persisted pageshow"),Ou(),$i({all:new gn(-1/0,[[]])}))})),fe.rejectionMapper=function(s,f){return!s||s instanceof Te||s instanceof TypeError||s instanceof SyntaxError||!s.name||!rt[s.name]?s:(f=new rt[s.name](f||s.message,s),"stack"in s&&C(f,"stack",{get:function(){return this.inner.stack}}),f)},an(bt),i(Cr,Object.freeze({__proto__:null,Dexie:Cr,liveQuery:hs,Entity:na,cmp:st,PropModSymbol:Sr,PropModification:Ai,replacePrefix:function(s,f){return new Ai({replacePrefix:[s,f]})},add:function(s){return new Ai({add:s})},remove:function(s){return new Ai({remove:s})},default:Cr,RangeSet:gn,mergeRanges:Wn,rangesOverlap:yo}),{default:Cr}),Cr})})(qy);var UO=qy.exports;const vd=Zd(UO),xg=Symbol.for("Dexie"),wd=globalThis[xg]||(globalThis[xg]=vd);if(vd.semVer!==wd.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${vd.semVer} and ${wd.semVer}`);class VO extends wd{constructor(){super("TemporalDB"),this.version(3).stores({workflows:"[workflowId+runId],[parentWorkflowId+parentWorkflowRunId], parentWorkflowId, parentWorkflowRunId",activities:"[activityId+workflowId+workflowRunId],[workflowId+workflowRunId], workflowId, workflowRunId",settings:"id"})}}const ei=new VO;async function bg(e){try{await ei.workflows.put(e),console.debug("Workflow added successfully:",e)}catch(t){console.error("Failed to add workflow:",t,e)}}async function tl(e,t){if(t)try{const n=await ei.workflows.get({workflowId:e,runId:t});return console.debug("Retrieved Workflow:",n),n}catch(n){console.error("Failed to retrieve workflow:",n);return}}async function GO(e,t){try{await ei.workflows.where({workflowId:e,runId:t}).delete(),console.debug(`Deleted Workflow with ID: ${e}`)}catch(n){console.error("Failed to delete workflow:",n)}}async function XO(e){try{await ei.activities.put(e),console.debug("Activity added successfully:",e)}catch(t){console.error("Failed to add activity:",t,e)}}async function ZO(e,t,n){try{const i=await ei.activities.get({activityId:t,workflowId:e,workflowRunId:n});return console.debug("Retrieved Activity:",i),i}catch(i){console.error("Failed to retrieve activity:",i);return}}async function QO(e,t,n){try{await ei.activities.where({activityId:t,workflowId:e,workflowRunId:n}).delete(),console.debug(`Deleted Activity with ID: ${t}`)}catch(i){console.error("Failed to delete activity:",i)}}async function Yy(e,t){try{return await ei.activities.where(["workflowId","workflowRunId"]).equals([e,t]).toArray()}catch(n){return console.error("Failed to retrieve activities by workflowId:",n),[]}}async function Ky(e,t){try{return await ei.workflows.where(["parentWorkflowId","parentWorkflowRunId"]).equals([e,t]).toArray()}catch(n){return console.error("Failed to retrieve child workflows:",n),[]}}async function xd(e,t){const n=await tl(e,t);if(!n)throw new Error(`Root workflow not found for ${e} ${t}`);const i=await Ky(e,t),a=await Yy(e,t);return[n,...i,...a]}async function tu(e){try{const t=await ei.settings.get(e);return t==null?void 0:t.value}catch(t){console.error("Failed to retrieve setting:",t);return}}async function bd(e,t){try{await ei.settings.put({id:e,value:t}),console.debug(`Setting ${e} updated successfully:`,t)}catch(n){console.error("Failed to update setting:",n)}}var Rc=function(){return Rc=Object.assign||function(t){for(var n,i=1,a=arguments.length;i<a;i++){n=arguments[i];for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&(t[u]=n[u])}return t},Rc.apply(this,arguments)};function JO(){var e=N.useRef(!1),t=N.useCallback(function(){return e.current},[]);return N.useEffect(function(){return e.current=!0,function(){e.current=!1}},[]),t}function eA(e,t,n){t===void 0&&(t=[]),n===void 0&&(n={loading:!1});var i=N.useRef(0),a=JO(),u=N.useState(n),c=u[0],d=u[1],h=N.useCallback(function(){for(var p=[],g=0;g<arguments.length;g++)p[g]=arguments[g];var v=++i.current;return c.loading||d(function(x){return Rc(Rc({},x),{loading:!0})}),e.apply(void 0,p).then(function(x){return a()&&v===i.current&&d({value:x,loading:!1}),x},function(x){return a()&&v===i.current&&d({error:x,loading:!1}),x})},t);return[c,h]}function Uy(e,t){t===void 0&&(t=[]);var n=eA(e,t,{loading:!0}),i=n[0],a=n[1];return N.useEffect(function(){a()},[a]),i}const tA=e=>Uy(async()=>{const n=await tl(e.workflowId,e.workflowRunId);if(!n)throw new Error("Workflow data not found");return n},[e]),nA=e=>Uy(async()=>{const n=await ZO(e.workflowId,e.activityId,e.workflowRunId);if(!n)throw new Error("Activity data not found");return n},[e]),Si=e=>e.type==="workflow"||e.type==="childWorkflow",Vy=e=>e.type==="activity",Qo=e=>({workflowId:e.workflowId,workflowRunId:e.runId}),rA=e=>({workflowId:e.workflowId,workflowRunId:e.workflowRunId}),iA=e=>{if(!(!e.parentWorkflowId||!e.parentWorkflowRunId))return{workflowId:e.parentWorkflowId,workflowRunId:e.parentWorkflowRunId}},nl=e=>({activityId:e.activityId,workflowId:e.workflowId,workflowRunId:e.workflowRunId}),oA=e=>Si(e)?iA(e):rA(e),aA=e=>({id:e.id,data:e,type:"workflowNode",position:{x:0,y:0}}),sA=e=>({id:e.id,data:e,type:"activityNode",position:{x:0,y:0}}),_g=e=>{if(e.type==="workflow")return aA(e);if(e.type==="activity")return sA(e);if(e.type==="batch")return{id:e.id,data:e,type:"batchNode",position:{x:0,y:0}};throw new Error("Invalid node data type")},Fr=e=>`${e.workflowId}$$${e.workflowRunId}`,Gy=e=>{const[t,n]=e.split("$$");return{workflowId:t,workflowRunId:n}},lu=e=>`${e.workflowId}$$${e.workflowRunId}$$${e.activityId}`,uA=e=>{const[t,n,i]=e.split("$$");return{workflowId:t,workflowRunId:n,activityId:i}},Xy=e=>{if(e.__isBatch){const t=e,i=t.__batchItems.map(a=>Si(a)?Qo(a):nl(a));return{id:t.__originalId+"_batch",type:"batch",referencedBatches:i}}if(Si(e))return cA(e);if(Vy(e))return lA(e);throw new Error("Invalid chronological item type")},cA=e=>({type:"workflow",id:Fr(Qo(e))}),lA=e=>({type:"activity",id:lu(nl(e))}),Ws=e=>Si(e)?Fr(Qo(e)):lu(nl(e));function Zy(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=Zy(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function yr(){for(var e,t,n=0,i="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=Zy(e))&&(i&&(i+=" "),i+=t);return i}const ph=(e,t)=>{if(!e||!t)return null;const n=new Date(e),a=new Date(t).getTime()-n.getTime(),u=Math.floor(a/1e3),c=Math.floor(u/60),d=Math.floor(c/60),h=[];return d>0&&h.push(`${d}h`),c%60>0&&h.push(`${c%60}m`),u%60>0&&h.push(`${u%60}s`),a%1e3>0&&h.push(`${a%1e3}ms`),h.join(" ")},jf=e=>{switch(e.toLowerCase()){case"completed":return"border-green-500";case"running":return"border-blue-500";case"retrying":return"border-orange-600";case"pending":return"border-purple-600";case"terminated":return"border-yellow-500";case"failed":return"border-red-600";default:return"border-gray-500"}},fA=e=>{switch(e.toLowerCase()){case"completed":return"text-green-600 bg-green-50";case"retrying":return"text-orange-700 bg-orange-100";case"running":return"text-blue-600 bg-blue-50";case"pending":return"text-purple-700 bg-purple-100";case"terminated":return"text-yellow-600 bg-yellow-50";case"failed":return"text-red-700 bg-red-100";default:return"text-gray-600 bg-gray-50"}},mh=N.memo(({id:e,onShowNodeData:t,onBatchAction:n,onClick:i,IconComponent:a,TitleComponent:u,TypeLabelComponent:c,ExtraActionsComponent:d,status:h,startTime:p,endTime:g,taskQueue:v,count:x})=>{const b=x&&x>1;return _.jsxs("div",{className:"relative min-w-[450px]",children:[_.jsx(Gi,{type:"source",position:Ye.Right,id:`${e}-right`,style:{top:"50%",transform:"translateY(-50%)"}}),_.jsx(Gi,{type:"target",position:Ye.Left,id:`${e}-left`,style:{top:"50%",transform:"translateY(-50%)"}}),_.jsx(Gi,{type:"source",position:Ye.Bottom,id:`${e}-bottom`,style:{left:"25px"}}),_.jsx(Gi,{type:"target",position:Ye.Top,id:`${e}-top`,style:{left:"25px"}}),_.jsxs("div",{className:"relative",children:[b&&_.jsxs(_.Fragment,{children:[_.jsx("div",{className:yr("absolute rounded-xl shadow-lg border-2 transition-all duration-300",jf(h),"opacity-40"),style:{top:"-8px",left:"-8px",width:"100%",height:"100%",pointerEvents:"none"},children:_.jsx("div",{className:"p-4 bg-white rounded-xl"})}),_.jsx("div",{className:yr("absolute rounded-xl shadow-lg border-2 transition-all duration-300",jf(h),"opacity-70"),style:{top:"-4px",left:"-4px",width:"100%",height:"100%",pointerEvents:"none"},children:_.jsx("div",{className:"p-4 bg-white rounded-xl"})})]}),_.jsx("div",{className:yr("rounded-xl shadow-lg border-2 transition-all duration-300 relative",jf(h)),children:_.jsxs("div",{className:yr("p-4 relative bg-white rounded-xl",i&&!b&&"cursor-pointer"),onClick:i,children:[_.jsxs("div",{className:"absolute -top-2.5 -right-2.5 flex gap-1",children:[b&&n&&_.jsx("div",{onClick:C=>{C.stopPropagation(),n()},className:"w-6 h-6 flex items-center justify-center bg-blue-500 hover:bg-blue-600 rounded-full text-white shadow-lg z-10 cursor-pointer",children:_.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4.5a6.5 6.5 0 1 0 4.135 11.286l3.572 3.572a1 1 0 0 0 1.414-1.414l-3.572-3.572A6.5 6.5 0 0 0 11 4.5z"})})}),!b&&t&&_.jsx("div",{onClick:C=>{C.stopPropagation(),t(C)},className:"w-6 h-6 flex items-center justify-center bg-gray-500 hover:bg-gray-600 rounded-full text-white shadow-lg z-10 cursor-pointer",children:_.jsx(YO,{className:"w-3 h-3"})}),d]}),_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"w-8 h-8 rounded flex items-center justify-center flex-shrink-0",children:a}),_.jsx("div",{className:"min-w-0",children:u})]}),_.jsxs("div",{className:"absolute -top-3 left-3 flex gap-2",children:[c,_.jsx("div",{className:yr("px-2 py-0.5 rounded text-xs font-medium shadow-sm z-10",fA(h)),children:(h==null?void 0:h.toLowerCase())||"unknown"}),b&&_.jsxs("div",{className:"px-2 py-0.5 rounded text-xs font-medium shadow-sm z-10",style:{backgroundColor:"rgba(224, 242, 254, 0.9)",color:"#0369a1"},children:["batch: ",x]}),p&&g&&_.jsx("div",{className:"px-2 py-0.5 rounded text-xs font-medium shadow-sm z-10",style:{backgroundColor:"rgba(236, 254, 255, 0.9)",color:"#0891b2"},children:ph(p,g)})]}),v&&_.jsx("div",{className:"absolute -bottom-2.5 right-2",children:_.jsx("div",{className:"px-2 py-0.5 rounded text-xs font-medium shadow-sm",style:{backgroundColor:"rgba(240, 253, 244, 0.9)",color:"#166534",fontSize:"0.7rem"},children:v})})]})})]})]})}),Pa={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Sg=(e,t)=>e.unstable_is?e.unstable_is(t):t===e,Eg=e=>"init"in e,Lf=e=>!!e.write,Ng=e=>"v"in e||"e"in e,pc=e=>{if("e"in e)throw e.e;if((Pa?"production":void 0)!=="production"&&!("v"in e))throw new Error("[Bug] atom state is not initialized");return e.v},Qy=Symbol(),gh=e=>e[Qy],_d=e=>{var t;return yh(e)&&!((t=gh(e))!=null&&t[1])},dA=(e,t)=>{const n=gh(e);if(n)n[1]=!0,n[0].forEach(i=>i(t));else if((Pa?"production":void 0)!=="production")throw new Error("[Bug] cancelable promise not found")},hA=e=>{if(gh(e))return;const t=[new Set,!1];e[Qy]=t;const n=()=>{t[1]=!0};e.then(n,n),e.onCancel=i=>{t[0].add(i)}},yh=e=>typeof(e==null?void 0:e.then)=="function",Jy=(e,t,n)=>{n.p.has(e)||(n.p.add(e),t.then(()=>{n.p.delete(e)},()=>{n.p.delete(e)}))},Ff=(e,t,n)=>{const i=n(e),a="v"in i,u=i.v,c=_d(i.v)?i.v:null;if(yh(t)){hA(t);for(const d of i.d.keys())Jy(e,t,n(d))}i.v=t,delete i.e,(!a||!Object.is(u,i.v))&&(++i.n,c&&dA(c,t))},kg=(e,t,n)=>{var i;const a=new Set;for(const u of((i=n.get(e))==null?void 0:i.t)||[])n.has(u)&&a.add(u);for(const u of t.p)a.add(u);return a},pA=()=>{const e=new Set,t=()=>{e.forEach(n=>n())};return t.add=n=>(e.add(n),()=>{e.delete(n)}),t},Wf=()=>{const e={},t=new WeakMap,n=i=>{var a,u;(a=t.get(e))==null||a.forEach(c=>c(i)),(u=t.get(i))==null||u.forEach(c=>c())};return n.add=(i,a)=>{const u=i||e,c=(t.has(u)?t:t.set(u,new Set)).get(u);return c.add(a),()=>{c==null||c.delete(a),c.size||t.delete(u)}},n},mA=e=>(e.c||(e.c=Wf()),e.m||(e.m=Wf()),e.u||(e.u=Wf()),e.f||(e.f=pA()),e),gA=Symbol(),yA=(e=new WeakMap,t=new WeakMap,n=new WeakMap,i=new Set,a=new Set,u=new Set,c={},d=(x,...b)=>x.read(...b),h=(x,...b)=>x.write(...b),p=(x,b)=>{var C;return(C=x.unstable_onInit)==null?void 0:C.call(x,b)},g=(x,b)=>{var C;return(C=x.onMount)==null?void 0:C.call(x,b)},...v)=>{const x=v[0]||(Y=>{if((Pa?"production":void 0)!=="production"&&!Y)throw new Error("Atom is undefined or null");let Q=e.get(Y);return Q||(Q={d:new Map,p:new Set,n:0},e.set(Y,Q),p==null||p(Y,ce)),Q}),b=v[1]||(()=>{let Y,Q;const se=J=>{try{J()}catch(U){Y||(Y=!0,Q=U)}};do{c.f&&se(c.f);const J=new Set,U=J.add.bind(J);i.forEach(re=>{var ve;return(ve=t.get(re))==null?void 0:ve.l.forEach(U)}),i.clear(),u.forEach(U),u.clear(),a.forEach(U),a.clear(),J.forEach(se),i.size&&C()}while(i.size||u.size||a.size);if(Y)throw Q}),C=v[2]||(()=>{const Y=[],Q=new WeakSet,se=new WeakSet,J=Array.from(i);for(;J.length;){const U=J[J.length-1],re=x(U);if(se.has(U)){J.pop();continue}if(Q.has(U)){if(n.get(U)===re.n)Y.push([U,re]);else if((Pa?"production":void 0)!=="production"&&n.has(U))throw new Error("[Bug] invalidated atom exists");se.add(U),J.pop();continue}Q.add(U);for(const ve of kg(U,re,t))Q.has(ve)||J.push(ve)}for(let U=Y.length-1;U>=0;--U){const[re,ve]=Y[U];let M=!1;for(const ae of ve.d.keys())if(ae!==re&&i.has(ae)){M=!0;break}M&&(A(re),q(re)),n.delete(re)}}),A=v[3]||(Y=>{var Q,se;const J=x(Y);if(Ng(J)&&(t.has(Y)&&n.get(Y)!==J.n||Array.from(J.d).every(([oe,G])=>A(oe).n===G)))return J;J.d.clear();let U=!0;const re=()=>{t.has(Y)&&(q(Y),C(),b())},ve=oe=>{var G;if(Sg(Y,oe)){const ge=x(oe);if(!Ng(ge))if(Eg(oe))Ff(oe,oe.init,x);else throw new Error("no atom init");return pc(ge)}const de=A(oe);try{return pc(de)}finally{J.d.set(oe,de.n),_d(J.v)&&Jy(Y,J.v,de),(G=t.get(oe))==null||G.t.add(Y),U||re()}};let M,ae;const L={get signal(){return M||(M=new AbortController),M.signal},get setSelf(){return(Pa?"production":void 0)!=="production"&&!Lf(Y)&&console.warn("setSelf function cannot be used with read-only atom"),!ae&&Lf(Y)&&(ae=(...oe)=>{if((Pa?"production":void 0)!=="production"&&U&&console.warn("setSelf function cannot be called in sync"),!U)try{return $(Y,...oe)}finally{C(),b()}}),ae}},pe=J.n;try{const oe=d(Y,ve,L);return Ff(Y,oe,x),yh(oe)&&((Q=oe.onCancel)==null||Q.call(oe,()=>M==null?void 0:M.abort()),oe.then(re,re)),J}catch(oe){return delete J.v,J.e=oe,++J.n,J}finally{U=!1,pe!==J.n&&n.get(Y)===pe&&(n.set(Y,J.n),i.add(Y),(se=c.c)==null||se.call(c,Y))}}),R=v[4]||(Y=>{const Q=[Y];for(;Q.length;){const se=Q.pop(),J=x(se);for(const U of kg(se,J,t)){const re=x(U);n.set(U,re.n),Q.push(U)}}}),$=v[5]||((Y,...Q)=>{let se=!0;const J=re=>pc(A(re)),U=(re,...ve)=>{var M;const ae=x(re);try{if(Sg(Y,re)){if(!Eg(re))throw new Error("atom not writable");const L=ae.n,pe=ve[0];Ff(re,pe,x),q(re),L!==ae.n&&(i.add(re),(M=c.c)==null||M.call(c,re),R(re));return}else return $(re,...ve)}finally{se||(C(),b())}};try{return h(Y,J,U,...Q)}finally{se=!1}}),q=v[6]||(Y=>{var Q;const se=x(Y),J=t.get(Y);if(J&&!_d(se.v)){for(const[U,re]of se.d)if(!J.d.has(U)){const ve=x(U);te(U).t.add(Y),J.d.add(U),re!==ve.n&&(i.add(U),(Q=c.c)==null||Q.call(c,U),R(U))}for(const U of J.d||[])if(!se.d.has(U)){J.d.delete(U);const re=F(U);re==null||re.t.delete(Y)}}}),te=v[7]||(Y=>{var Q;const se=x(Y);let J=t.get(Y);if(!J){A(Y);for(const U of se.d.keys())te(U).t.add(Y);if(J={l:new Set,d:new Set(se.d.keys()),t:new Set},t.set(Y,J),(Q=c.m)==null||Q.call(c,Y),Lf(Y)){const U=()=>{let re=!0;const ve=(...M)=>{try{return $(Y,...M)}finally{re||(C(),b())}};try{const M=g(Y,ve);M&&(J.u=()=>{re=!0;try{M()}finally{re=!1}})}finally{re=!1}};a.add(U)}}return J}),F=v[8]||(Y=>{var Q;const se=x(Y);let J=t.get(Y);if(J&&!J.l.size&&!Array.from(J.t).some(U=>{var re;return(re=t.get(U))==null?void 0:re.d.has(Y)})){J.u&&u.add(J.u),J=void 0,t.delete(Y),(Q=c.u)==null||Q.call(c,Y);for(const U of se.d.keys()){const re=F(U);re==null||re.t.delete(Y)}return}return J}),ue=[e,t,n,i,a,u,c,d,h,p,g,x,b,C,A,R,$,q,te,F],ce={get:Y=>pc(A(Y)),set:(Y,...Q)=>{try{return $(Y,...Q)}finally{C(),b()}},sub:(Y,Q)=>{const J=te(Y).l;return J.add(Q),b(),()=>{J.delete(Q),F(Y),b()}}};return Object.defineProperty(ce,gA,{value:ue}),ce},ev=yA,vA=mA,vh={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1};let wA=0;function Br(e,t){const n=`atom${++wA}`,i={toString(){return(vh?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof e=="function"?i.read=e:(i.init=e,i.read=xA,i.write=bA),t&&(i.write=t),i}function xA(e){return e(this)}function bA(e,t,n){return t(this,typeof n=="function"?n(e(this)):n)}const _A=()=>{let e=0;const t=vA({}),n=new WeakMap,i=new WeakMap,a=ev(n,i,void 0,void 0,void 0,void 0,t,void 0,(d,h,p,...g)=>e?p(d,...g):d.write(h,p,...g)),u=new Set;return t.m.add(void 0,d=>{u.add(d);const h=n.get(d);h.m=i.get(d)}),t.u.add(void 0,d=>{u.delete(d);const h=n.get(d);delete h.m}),Object.assign(a,{dev4_get_internal_weak_map:()=>n,dev4_get_mounted_atoms:()=>u,dev4_restore_atoms:d=>{const h={read:()=>null,write:(p,g)=>{++e;try{for(const[v,x]of d)"init"in v&&g(v,x)}finally{--e}}};a.set(h)}})},SA=()=>(vh?"production":void 0)!=="production"?_A():ev();let Ps;const EA=()=>(Ps||(Ps=SA(),(vh?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=Ps),globalThis.__JOTAI_DEFAULT_STORE__!==Ps&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),Ps),tv={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1},NA=N.createContext(void 0),rl=e=>N.useContext(NA)||EA(),nv=e=>typeof(e==null?void 0:e.then)=="function",kA=e=>{e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t})},TA=ne.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(kA(e),e)}),Bf=new WeakMap,CA=e=>{let t=Bf.get(e);return t||(t=new Promise((n,i)=>{let a=e;const u=h=>p=>{a===h&&n(p)},c=h=>p=>{a===h&&i(p)},d=h=>{"onCancel"in h&&typeof h.onCancel=="function"&&h.onCancel(p=>{if((tv?"production":void 0)!=="production"&&p===h)throw new Error("[Bug] p is not updated even after cancelation");nv(p)?(Bf.set(p,t),a=p,p.then(u(p),c(p)),d(p)):n(p)})};e.then(u(e),c(e)),d(e)}),Bf.set(e,t)),t};function Wo(e,t){const n=rl(),[[i,a,u],c]=N.useReducer(p=>{const g=n.get(e);return Object.is(p[0],g)&&p[1]===n&&p[2]===e?p:[g,n,e]},void 0,()=>[n.get(e),n,e]);let d=i;if((a!==n||u!==e)&&(c(),d=n.get(e)),N.useEffect(()=>{const p=n.sub(e,()=>{c()});return c(),p},[n,e,void 0]),N.useDebugValue(d),nv(d)){const p=CA(d);return TA(p)}return d}function Yo(e,t){const n=rl();return N.useCallback((...a)=>{if((tv?"production":void 0)!=="production"&&!("write"in e))throw new Error("not writable atom");return n.set(e,...a)},[n,e])}const Tg=e=>{const t=`${e.source_id}->${e.target_id}`;return e.type==="child"?{id:t,source:e.source_id,sourceHandle:`${e.source_id}-right`,target:e.target_id,type:"step",targetHandle:`${e.target_id}-left`}:{id:t,source:e.source_id,sourceHandle:`${e.source_id}-bottom`,target:e.target_id,targetHandle:`${e.target_id}-top`,type:"step",animated:!0}},OA=500;function AA(e){return OA}function DA(e,t,n,i){if(!t.find(u=>u.id===e))return{nodes:t,edges:n};try{const u=IA(i,t),c=new Set(u.map(h=>h.id)),d=n.filter(h=>c.has(h.source)&&c.has(h.target));return{nodes:u,edges:d}}catch(u){return console.error("[DEBUG] Error in layoutRenderTree:",u),{nodes:t,edges:n}}}function IA(e,t){const n=new Map;t.forEach(d=>n.set(d.id,d));const i=new Map,a=new Set,u=(d,h=0,p=0,g=0,v=null)=>{const x=n.get(d.id);if(!x||a.has(x.id))return;a.add(x.id);const b=AA();let C;g===0?C=v!==null?v:0:C=(v!==null?v:0)+g*110;const A={...x,position:{x:p,y:C},style:{...x.style,width:b}};i.set(A.id,A),d.children.forEach((R,$)=>{u(R,h+1,p+b+100,$,A.position.y)})};u(e);const c=[];return t.forEach(d=>{if(i.has(d.id))c.push(i.get(d.id));else{const h={...d,position:d.position||{x:0,y:0}};c.push(h)}}),c}const Wa=Br([]),wh=Br([]),rv=Br(null),Bo=Br(null),xh=Br(null),il=Br([]),iv=Br(null,(e,t,n)=>{const{data:i,position:a,baseZIndex:u}=n,c=Si(i)?Fr(Qo(i)):Vy(i)?lu(nl(i)):null;c&&t(il,d=>{const h=d.findIndex(p=>p.id===c);return h>=0?d.map((p,g)=>g===h?{...p,position:a,baseZIndex:Math.max(u||0,1e3+d.length)}:p):[...d,{id:c,node:i,position:a,baseZIndex:Math.max(u||0,1e3+d.length)}]})}),PA=Br(null,(e,t,n)=>{t(il,i=>i.filter(a=>a.id!==n))}),MA=Br(null,(e,t)=>{t(il,[])}),bh=Br(null,(e,t,n)=>{n.nodes!==void 0&&t(Wa,n.nodes),n.edges!==void 0&&t(wh,n.edges),n.structure!==void 0&&t(Bo,n.structure),n.renderTree!==void 0&&t(xh,n.renderTree),n.rootId!==void 0&&t(rv,n.rootId)}),ov=Br(e=>{const t=e(Wa),n=e(wh),i=e(xh),a=e(rv);if(!i){const b=t.map(_g),C=n.map(Tg);return{nodes:b,edges:C}}const u=new Set,c=(b,C=0)=>{if(u.add(b.id),b.children.length>0)for(const A of b.children)c(A,C+1)};c(i);const h=t.filter(b=>u.has(b.id)).map(_g),g=n.filter(b=>u.has(b.source_id)&&u.has(b.target_id)).map(Tg);if(!a)return{nodes:h,edges:g};const{nodes:v,edges:x}=DA(a,h,g,i);return{nodes:v,edges:x}});var $c={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */$c.exports;(function(e,t){(function(){var n,i="4.17.21",a=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",c="Expected a function",d="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",p=500,g="__lodash_placeholder__",v=1,x=2,b=4,C=1,A=2,R=1,$=2,q=4,te=8,F=16,ue=32,ce=64,Y=128,Q=256,se=512,J=30,U="...",re=800,ve=16,M=1,ae=2,L=3,pe=1/0,oe=9007199254740991,G=17976931348623157e292,de=NaN,ge=4294967295,Se=ge-1,Te=ge>>>1,Re=[["ary",Y],["bind",R],["bindKey",$],["curry",te],["curryRight",F],["flip",se],["partial",ue],["partialRight",ce],["rearg",Q]],Me="[object Arguments]",Be="[object Array]",Ke="[object AsyncFunction]",Ve="[object Boolean]",Ee="[object Date]",rt="[object DOMException]",xt="[object Error]",ze="[object Function]",Nt="[object GeneratorFunction]",Ge="[object Map]",it="[object Number]",Et="[object Null]",et="[object Object]",We="[object Promise]",Ft="[object Proxy]",Wt="[object RegExp]",bt="[object Set]",an="[object String]",qt="[object Symbol]",sn="[object Undefined]",Qt="[object WeakMap]",Yt="[object WeakSet]",tn="[object ArrayBuffer]",Kt="[object DataView]",un="[object Float32Array]",fn="[object Float64Array]",_t="[object Int8Array]",Bt="[object Int16Array]",Ut="[object Int32Array]",$t="[object Uint8Array]",je="[object Uint8ClampedArray]",zt="[object Uint16Array]",le="[object Uint32Array]",xe=/\b__p \+= '';/g,fe=/\b(__p \+=) '' \+/g,Oe=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Le=/&(?:amp|lt|gt|quot|#39);/g,qe=/[&<>"']/g,Ue=RegExp(Le.source),Ze=RegExp(qe.source),En=/<%-([\s\S]+?)%>/g,ct=/<%([\s\S]+?)%>/g,jt=/<%=([\s\S]+?)%>/g,Fn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,xr=/^\w*$/,br=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,St=/[\\^$.*+?()[\]{}|]/g,Mt=RegExp(St.source),ar=/^\s+/,sr=/\s/,ur=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,cr=/\{\n\/\* \[wrapped with (.+)\] \*/,ro=/,? & /,Nn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Gn=/[()=,{}\[\]\/\s]/,In=/\\(\\)?/g,Hr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ot=/\w*$/,vt=/^[-+]0x[0-9a-f]+$/i,Dt=/^0b[01]+$/i,Vt=/^\[object .+?Constructor\]$/,mn=/^0o[0-7]+$/i,_r=/^(?:0|[1-9]\d*)$/,It=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,vn=/($^)/,Xn=/['\n\r\u2028\u2029\\]/g,ni="\\ud800-\\udfff",qr="\\u0300-\\u036f",ki="\\ufe20-\\ufe2f",io="\\u20d0-\\u20ff",Ti=qr+ki+io,Zn="\\u2700-\\u27bf",oo="a-z\\xdf-\\xf6\\xf8-\\xff",Ci="\\xac\\xb1\\xd7\\xf7",na="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",st="\\u2000-\\u206f",yu=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Xa="A-Z\\xc0-\\xd6\\xd8-\\xde",Za="\\ufe0e\\ufe0f",At=Ci+na+st+yu,ri="[']",ao="["+ni+"]",ii="["+At+"]",Oi="["+Ti+"]",ra="\\d+",ia="["+Zn+"]",Qa="["+oo+"]",so="[^"+ni+At+ra+Zn+oo+Xa+"]",oa="\\ud83c[\\udffb-\\udfff]",Sr="(?:"+Oi+"|"+oa+")",Ai="[^"+ni+"]",aa="(?:\\ud83c[\\udde6-\\uddff]){2}",Ja="[\\ud800-\\udbff][\\udc00-\\udfff]",ht="["+Xa+"]",sa="\\u200d",vu="(?:"+Qa+"|"+so+")",El="(?:"+ht+"|"+so+")",kn="(?:"+ri+"(?:d|ll|m|re|s|t|ve))?",oi="(?:"+ri+"(?:D|LL|M|RE|S|T|VE))?",uo=Sr+"?",Er="["+Za+"]?",wu="(?:"+sa+"(?:"+[Ai,aa,Ja].join("|")+")"+Er+uo+")*",xu="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",cn="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Qn=Er+uo+wu,co="(?:"+[ia,aa,Ja].join("|")+")"+Qn,lo="(?:"+[Ai+Oi+"?",Oi,aa,Ja,ao].join("|")+")",es=RegExp(ri,"g"),Yr=RegExp(Oi,"g"),ts=RegExp(oa+"(?="+oa+")|"+lo+Qn,"g"),lr=RegExp([ht+"?"+Qa+"+"+kn+"(?="+[ii,ht,"$"].join("|")+")",El+"+"+oi+"(?="+[ii,ht+vu,"$"].join("|")+")",ht+"?"+vu+"+"+kn,ht+"+"+oi,cn,xu,ra,co].join("|"),"g"),ns=RegExp("["+sa+ni+Ti+Za+"]"),bu=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,rs=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],fo=-1,Tt={};Tt[un]=Tt[fn]=Tt[_t]=Tt[Bt]=Tt[Ut]=Tt[$t]=Tt[je]=Tt[zt]=Tt[le]=!0,Tt[Me]=Tt[Be]=Tt[tn]=Tt[Ve]=Tt[Kt]=Tt[Ee]=Tt[xt]=Tt[ze]=Tt[Ge]=Tt[it]=Tt[et]=Tt[Wt]=Tt[bt]=Tt[an]=Tt[Qt]=!1;var Ct={};Ct[Me]=Ct[Be]=Ct[tn]=Ct[Kt]=Ct[Ve]=Ct[Ee]=Ct[un]=Ct[fn]=Ct[_t]=Ct[Bt]=Ct[Ut]=Ct[Ge]=Ct[it]=Ct[et]=Ct[Wt]=Ct[bt]=Ct[an]=Ct[qt]=Ct[$t]=Ct[je]=Ct[zt]=Ct[le]=!0,Ct[xt]=Ct[ze]=Ct[Qt]=!1;var Nl={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},ho={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},kl={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Tl={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ua=parseFloat,ca=parseInt,la=typeof Mr=="object"&&Mr&&Mr.Object===Object&&Mr,Cl=typeof self=="object"&&self&&self.Object===Object&&self,dn=la||Cl||Function("return this")(),is=t&&!t.nodeType&&t,Nr=is&&!0&&e&&!e.nodeType&&e,fa=Nr&&Nr.exports===is,da=fa&&la.process,wn=function(){try{var k=Nr&&Nr.require&&Nr.require("util").types;return k||da&&da.binding&&da.binding("util")}catch{}}(),po=wn&&wn.isArrayBuffer,mo=wn&&wn.isDate,os=wn&&wn.isMap,_u=wn&&wn.isRegExp,go=wn&&wn.isSet,ha=wn&&wn.isTypedArray;function xn(k,P,T){switch(T.length){case 0:return k.call(P);case 1:return k.call(P,T[0]);case 2:return k.call(P,T[0],T[1]);case 3:return k.call(P,T[0],T[1],T[2])}return k.apply(P,T)}function as(k,P,T,H){for(var W=-1,V=k==null?0:k.length;++W<V;){var ee=k[W];P(H,ee,T(ee),k)}return H}function Tn(k,P){for(var T=-1,H=k==null?0:k.length;++T<H&&P(k[T],T,k)!==!1;);return k}function gn(k,P){for(var T=k==null?0:k.length;T--&&P(k[T],T,k)!==!1;);return k}function Di(k,P){for(var T=-1,H=k==null?0:k.length;++T<H;)if(!P(k[T],T,k))return!1;return!0}function Wn(k,P){for(var T=-1,H=k==null?0:k.length,W=0,V=[];++T<H;){var ee=k[T];P(ee,T,k)&&(V[W++]=ee)}return V}function yo(k,P){var T=k==null?0:k.length;return!!T&&Mi(k,P,0)>-1}function Ii(k,P,T){for(var H=-1,W=k==null?0:k.length;++H<W;)if(T(P,k[H]))return!0;return!1}function Pt(k,P){for(var T=-1,H=k==null?0:k.length,W=Array(H);++T<H;)W[T]=P(k[T],T,k);return W}function kr(k,P){for(var T=-1,H=P.length,W=k.length;++T<H;)k[W+T]=P[T];return k}function Pi(k,P,T,H){var W=-1,V=k==null?0:k.length;for(H&&V&&(T=k[++W]);++W<V;)T=P(T,k[W],W,k);return T}function ss(k,P,T,H){var W=k==null?0:k.length;for(H&&W&&(T=k[--W]);W--;)T=P(T,k[W],W,k);return T}function Tr(k,P){for(var T=-1,H=k==null?0:k.length;++T<H;)if(P(k[T],T,k))return!0;return!1}var us=xo("length");function cs(k){return k.split("")}function pa(k){return k.match(Nn)||[]}function ma(k,P,T){var H;return T(k,function(W,V,ee){if(P(W,V,ee))return H=V,!1}),H}function vo(k,P,T,H){for(var W=k.length,V=T+(H?1:-1);H?V--:++V<W;)if(P(k[V],V,k))return V;return-1}function Mi(k,P,T){return P===P?Kr(k,P,T):vo(k,wo,T)}function ls(k,P,T,H){for(var W=T-1,V=k.length;++W<V;)if(H(k[W],P))return W;return-1}function wo(k){return k!==k}function Su(k,P){var T=k==null?0:k.length;return T?fs(k,P)/T:de}function xo(k){return function(P){return P==null?n:P[k]}}function bo(k){return function(P){return k==null?n:k[P]}}function Eu(k,P,T,H,W){return W(k,function(V,ee,K){T=H?(H=!1,V):P(T,V,ee,K)}),T}function Nu(k,P){var T=k.length;for(k.sort(P);T--;)k[T]=k[T].value;return k}function fs(k,P){for(var T,H=-1,W=k.length;++H<W;){var V=P(k[H]);V!==n&&(T=T===n?V:T+V)}return T}function ga(k,P){for(var T=-1,H=Array(k);++T<k;)H[T]=P(T);return H}function ku(k,P){return Pt(P,function(T){return[T,k[T]]})}function Tu(k){return k&&k.slice(0,m(k)+1).replace(ar,"")}function Cn(k){return function(P){return k(P)}}function _o(k,P){return Pt(P,function(T){return k[T]})}function Ri(k,P){return k.has(P)}function ds(k,P){for(var T=-1,H=k.length;++T<H&&Mi(P,k[T],0)>-1;);return T}function Cu(k,P){for(var T=k.length;T--&&Mi(P,k[T],0)>-1;);return T}function Ol(k,P){for(var T=k.length,H=0;T--;)k[T]===P&&++H;return H}var Al=bo(Nl),ya=bo(ho);function Cr(k){return"\\"+Tl[k]}function Gt(k,P){return k==null?n:k[P]}function Or(k){return ns.test(k)}function Bn(k){return bu.test(k)}function Dl(k){for(var P,T=[];!(P=k.next()).done;)T.push(P.value);return T}function So(k){var P=-1,T=Array(k.size);return k.forEach(function(H,W){T[++P]=[W,H]}),T}function hs(k,P){return function(T){return k(P(T))}}function On(k,P){for(var T=-1,H=k.length,W=0,V=[];++T<H;){var ee=k[T];(ee===P||ee===g)&&(k[T]=g,V[W++]=T)}return V}function $i(k){var P=-1,T=Array(k.size);return k.forEach(function(H){T[++P]=H}),T}function ji(k){var P=-1,T=Array(k.size);return k.forEach(function(H){T[++P]=[H,H]}),T}function Kr(k,P,T){for(var H=T-1,W=k.length;++H<W;)if(k[H]===P)return H;return-1}function Ou(k,P,T){for(var H=T+1;H--;)if(k[H]===P)return H;return H}function s(k){return Or(k)?S(k):us(k)}function f(k){return Or(k)?O(k):cs(k)}function m(k){for(var P=k.length;P--&&sr.test(k.charAt(P)););return P}var w=bo(kl);function S(k){for(var P=ts.lastIndex=0;ts.test(k);)++P;return P}function O(k){return k.match(ts)||[]}function j(k){return k.match(lr)||[]}var z=function k(P){P=P==null?dn:Z.defaults(dn.Object(),P,Z.pick(dn,rs));var T=P.Array,H=P.Date,W=P.Error,V=P.Function,ee=P.Math,K=P.Object,he=P.RegExp,ye=P.String,me=P.TypeError,we=T.prototype,Ae=V.prototype,Ie=K.prototype,Ce=P["__core-js_shared__"],De=Ae.toString,Ne=Ie.hasOwnProperty,Pe=0,Fe=function(){var r=/[^.]+$/.exec(Ce&&Ce.keys&&Ce.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),nt=Ie.toString,lt=De.call(K),ft=dn._,Pn=he("^"+De.call(Ne).replace(St,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=fa?P.Buffer:n,Lt=P.Symbol,nn=P.Uint8Array,Eo=tt?tt.allocUnsafe:n,ln=hs(K.getPrototypeOf,K),Ur=K.create,va=Ie.propertyIsEnumerable,Au=we.splice,Hh=Lt?Lt.isConcatSpreadable:n,ps=Lt?Lt.iterator:n,No=Lt?Lt.toStringTag:n,Du=function(){try{var r=Ao(K,"defineProperty");return r({},"",{}),r}catch{}}(),gw=P.clearTimeout!==dn.clearTimeout&&P.clearTimeout,yw=H&&H.now!==dn.Date.now&&H.now,vw=P.setTimeout!==dn.setTimeout&&P.setTimeout,Iu=ee.ceil,Pu=ee.floor,Il=K.getOwnPropertySymbols,ww=tt?tt.isBuffer:n,qh=P.isFinite,xw=we.join,bw=hs(K.keys,K),hn=ee.max,An=ee.min,_w=H.now,Sw=P.parseInt,Yh=ee.random,Ew=we.reverse,Pl=Ao(P,"DataView"),ms=Ao(P,"Map"),Ml=Ao(P,"Promise"),wa=Ao(P,"Set"),gs=Ao(P,"WeakMap"),ys=Ao(K,"create"),Mu=gs&&new gs,xa={},Nw=Do(Pl),kw=Do(ms),Tw=Do(Ml),Cw=Do(wa),Ow=Do(gs),Ru=Lt?Lt.prototype:n,vs=Ru?Ru.valueOf:n,Kh=Ru?Ru.toString:n;function D(r){if(Jt(r)&&!at(r)&&!(r instanceof yt)){if(r instanceof fr)return r;if(Ne.call(r,"__wrapped__"))return Up(r)}return new fr(r)}var ba=function(){function r(){}return function(o){if(!Xt(o))return{};if(Ur)return Ur(o);r.prototype=o;var l=new r;return r.prototype=n,l}}();function $u(){}function fr(r,o){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!o,this.__index__=0,this.__values__=n}D.templateSettings={escape:En,evaluate:ct,interpolate:jt,variable:"",imports:{_:D}},D.prototype=$u.prototype,D.prototype.constructor=D,fr.prototype=ba($u.prototype),fr.prototype.constructor=fr;function yt(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ge,this.__views__=[]}function Aw(){var r=new yt(this.__wrapped__);return r.__actions__=zn(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=zn(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=zn(this.__views__),r}function Dw(){if(this.__filtered__){var r=new yt(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}function Iw(){var r=this.__wrapped__.value(),o=this.__dir__,l=at(r),y=o<0,E=l?r.length:0,I=qx(0,E,this.__views__),B=I.start,X=I.end,ie=X-B,be=y?X:B-1,_e=this.__iteratees__,ke=_e.length,$e=0,He=An(ie,this.__takeCount__);if(!l||!y&&E==ie&&He==ie)return gp(r,this.__actions__);var Qe=[];e:for(;ie--&&$e<He;){be+=o;for(var dt=-1,Je=r[be];++dt<ke;){var gt=_e[dt],wt=gt.iteratee,tr=gt.type,$n=wt(Je);if(tr==ae)Je=$n;else if(!$n){if(tr==M)continue e;break e}}Qe[$e++]=Je}return Qe}yt.prototype=ba($u.prototype),yt.prototype.constructor=yt;function ko(r){var o=-1,l=r==null?0:r.length;for(this.clear();++o<l;){var y=r[o];this.set(y[0],y[1])}}function Pw(){this.__data__=ys?ys(null):{},this.size=0}function Mw(r){var o=this.has(r)&&delete this.__data__[r];return this.size-=o?1:0,o}function Rw(r){var o=this.__data__;if(ys){var l=o[r];return l===h?n:l}return Ne.call(o,r)?o[r]:n}function $w(r){var o=this.__data__;return ys?o[r]!==n:Ne.call(o,r)}function jw(r,o){var l=this.__data__;return this.size+=this.has(r)?0:1,l[r]=ys&&o===n?h:o,this}ko.prototype.clear=Pw,ko.prototype.delete=Mw,ko.prototype.get=Rw,ko.prototype.has=$w,ko.prototype.set=jw;function ai(r){var o=-1,l=r==null?0:r.length;for(this.clear();++o<l;){var y=r[o];this.set(y[0],y[1])}}function Lw(){this.__data__=[],this.size=0}function Fw(r){var o=this.__data__,l=ju(o,r);if(l<0)return!1;var y=o.length-1;return l==y?o.pop():Au.call(o,l,1),--this.size,!0}function Ww(r){var o=this.__data__,l=ju(o,r);return l<0?n:o[l][1]}function Bw(r){return ju(this.__data__,r)>-1}function zw(r,o){var l=this.__data__,y=ju(l,r);return y<0?(++this.size,l.push([r,o])):l[y][1]=o,this}ai.prototype.clear=Lw,ai.prototype.delete=Fw,ai.prototype.get=Ww,ai.prototype.has=Bw,ai.prototype.set=zw;function si(r){var o=-1,l=r==null?0:r.length;for(this.clear();++o<l;){var y=r[o];this.set(y[0],y[1])}}function Hw(){this.size=0,this.__data__={hash:new ko,map:new(ms||ai),string:new ko}}function qw(r){var o=Gu(this,r).delete(r);return this.size-=o?1:0,o}function Yw(r){return Gu(this,r).get(r)}function Kw(r){return Gu(this,r).has(r)}function Uw(r,o){var l=Gu(this,r),y=l.size;return l.set(r,o),this.size+=l.size==y?0:1,this}si.prototype.clear=Hw,si.prototype.delete=qw,si.prototype.get=Yw,si.prototype.has=Kw,si.prototype.set=Uw;function To(r){var o=-1,l=r==null?0:r.length;for(this.__data__=new si;++o<l;)this.add(r[o])}function Vw(r){return this.__data__.set(r,h),this}function Gw(r){return this.__data__.has(r)}To.prototype.add=To.prototype.push=Vw,To.prototype.has=Gw;function Ar(r){var o=this.__data__=new ai(r);this.size=o.size}function Xw(){this.__data__=new ai,this.size=0}function Zw(r){var o=this.__data__,l=o.delete(r);return this.size=o.size,l}function Qw(r){return this.__data__.get(r)}function Jw(r){return this.__data__.has(r)}function ex(r,o){var l=this.__data__;if(l instanceof ai){var y=l.__data__;if(!ms||y.length<a-1)return y.push([r,o]),this.size=++l.size,this;l=this.__data__=new si(y)}return l.set(r,o),this.size=l.size,this}Ar.prototype.clear=Xw,Ar.prototype.delete=Zw,Ar.prototype.get=Qw,Ar.prototype.has=Jw,Ar.prototype.set=ex;function Uh(r,o){var l=at(r),y=!l&&Io(r),E=!l&&!y&&zi(r),I=!l&&!y&&!E&&Na(r),B=l||y||E||I,X=B?ga(r.length,ye):[],ie=X.length;for(var be in r)(o||Ne.call(r,be))&&!(B&&(be=="length"||E&&(be=="offset"||be=="parent")||I&&(be=="buffer"||be=="byteLength"||be=="byteOffset")||fi(be,ie)))&&X.push(be);return X}function Vh(r){var o=r.length;return o?r[Yl(0,o-1)]:n}function tx(r,o){return Xu(zn(r),Co(o,0,r.length))}function nx(r){return Xu(zn(r))}function Rl(r,o,l){(l!==n&&!Dr(r[o],l)||l===n&&!(o in r))&&ui(r,o,l)}function ws(r,o,l){var y=r[o];(!(Ne.call(r,o)&&Dr(y,l))||l===n&&!(o in r))&&ui(r,o,l)}function ju(r,o){for(var l=r.length;l--;)if(Dr(r[l][0],o))return l;return-1}function rx(r,o,l,y){return Li(r,function(E,I,B){o(y,E,l(E),B)}),y}function Gh(r,o){return r&&Gr(o,yn(o),r)}function ix(r,o){return r&&Gr(o,qn(o),r)}function ui(r,o,l){o=="__proto__"&&Du?Du(r,o,{configurable:!0,enumerable:!0,value:l,writable:!0}):r[o]=l}function $l(r,o){for(var l=-1,y=o.length,E=T(y),I=r==null;++l<y;)E[l]=I?n:yf(r,o[l]);return E}function Co(r,o,l){return r===r&&(l!==n&&(r=r<=l?r:l),o!==n&&(r=r>=o?r:o)),r}function dr(r,o,l,y,E,I){var B,X=o&v,ie=o&x,be=o&b;if(l&&(B=E?l(r,y,E,I):l(r)),B!==n)return B;if(!Xt(r))return r;var _e=at(r);if(_e){if(B=Kx(r),!X)return zn(r,B)}else{var ke=Dn(r),$e=ke==ze||ke==Nt;if(zi(r))return wp(r,X);if(ke==et||ke==Me||$e&&!E){if(B=ie||$e?{}:Lp(r),!X)return ie?Rx(r,ix(B,r)):Mx(r,Gh(B,r))}else{if(!Ct[ke])return E?r:{};B=Ux(r,ke,X)}}I||(I=new Ar);var He=I.get(r);if(He)return He;I.set(r,B),hm(r)?r.forEach(function(Je){B.add(dr(Je,o,l,Je,r,I))}):fm(r)&&r.forEach(function(Je,gt){B.set(gt,dr(Je,o,l,gt,r,I))});var Qe=be?ie?nf:tf:ie?qn:yn,dt=_e?n:Qe(r);return Tn(dt||r,function(Je,gt){dt&&(gt=Je,Je=r[gt]),ws(B,gt,dr(Je,o,l,gt,r,I))}),B}function ox(r){var o=yn(r);return function(l){return Xh(l,r,o)}}function Xh(r,o,l){var y=l.length;if(r==null)return!y;for(r=K(r);y--;){var E=l[y],I=o[E],B=r[E];if(B===n&&!(E in r)||!I(B))return!1}return!0}function Zh(r,o,l){if(typeof r!="function")throw new me(c);return ks(function(){r.apply(n,l)},o)}function xs(r,o,l,y){var E=-1,I=yo,B=!0,X=r.length,ie=[],be=o.length;if(!X)return ie;l&&(o=Pt(o,Cn(l))),y?(I=Ii,B=!1):o.length>=a&&(I=Ri,B=!1,o=new To(o));e:for(;++E<X;){var _e=r[E],ke=l==null?_e:l(_e);if(_e=y||_e!==0?_e:0,B&&ke===ke){for(var $e=be;$e--;)if(o[$e]===ke)continue e;ie.push(_e)}else I(o,ke,y)||ie.push(_e)}return ie}var Li=Ep(Vr),Qh=Ep(Ll,!0);function ax(r,o){var l=!0;return Li(r,function(y,E,I){return l=!!o(y,E,I),l}),l}function Lu(r,o,l){for(var y=-1,E=r.length;++y<E;){var I=r[y],B=o(I);if(B!=null&&(X===n?B===B&&!er(B):l(B,X)))var X=B,ie=I}return ie}function sx(r,o,l,y){var E=r.length;for(l=ut(l),l<0&&(l=-l>E?0:E+l),y=y===n||y>E?E:ut(y),y<0&&(y+=E),y=l>y?0:mm(y);l<y;)r[l++]=o;return r}function Jh(r,o){var l=[];return Li(r,function(y,E,I){o(y,E,I)&&l.push(y)}),l}function bn(r,o,l,y,E){var I=-1,B=r.length;for(l||(l=Gx),E||(E=[]);++I<B;){var X=r[I];o>0&&l(X)?o>1?bn(X,o-1,l,y,E):kr(E,X):y||(E[E.length]=X)}return E}var jl=Np(),ep=Np(!0);function Vr(r,o){return r&&jl(r,o,yn)}function Ll(r,o){return r&&ep(r,o,yn)}function Fu(r,o){return Wn(o,function(l){return di(r[l])})}function Oo(r,o){o=Wi(o,r);for(var l=0,y=o.length;r!=null&&l<y;)r=r[Xr(o[l++])];return l&&l==y?r:n}function tp(r,o,l){var y=o(r);return at(r)?y:kr(y,l(r))}function Mn(r){return r==null?r===n?sn:Et:No&&No in K(r)?Hx(r):nb(r)}function Fl(r,o){return r>o}function ux(r,o){return r!=null&&Ne.call(r,o)}function cx(r,o){return r!=null&&o in K(r)}function lx(r,o,l){return r>=An(o,l)&&r<hn(o,l)}function Wl(r,o,l){for(var y=l?Ii:yo,E=r[0].length,I=r.length,B=I,X=T(I),ie=1/0,be=[];B--;){var _e=r[B];B&&o&&(_e=Pt(_e,Cn(o))),ie=An(_e.length,ie),X[B]=!l&&(o||E>=120&&_e.length>=120)?new To(B&&_e):n}_e=r[0];var ke=-1,$e=X[0];e:for(;++ke<E&&be.length<ie;){var He=_e[ke],Qe=o?o(He):He;if(He=l||He!==0?He:0,!($e?Ri($e,Qe):y(be,Qe,l))){for(B=I;--B;){var dt=X[B];if(!(dt?Ri(dt,Qe):y(r[B],Qe,l)))continue e}$e&&$e.push(Qe),be.push(He)}}return be}function fx(r,o,l,y){return Vr(r,function(E,I,B){o(y,l(E),I,B)}),y}function bs(r,o,l){o=Wi(o,r),r=zp(r,o);var y=r==null?r:r[Xr(pr(o))];return y==null?n:xn(y,r,l)}function np(r){return Jt(r)&&Mn(r)==Me}function dx(r){return Jt(r)&&Mn(r)==tn}function hx(r){return Jt(r)&&Mn(r)==Ee}function _s(r,o,l,y,E){return r===o?!0:r==null||o==null||!Jt(r)&&!Jt(o)?r!==r&&o!==o:px(r,o,l,y,_s,E)}function px(r,o,l,y,E,I){var B=at(r),X=at(o),ie=B?Be:Dn(r),be=X?Be:Dn(o);ie=ie==Me?et:ie,be=be==Me?et:be;var _e=ie==et,ke=be==et,$e=ie==be;if($e&&zi(r)){if(!zi(o))return!1;B=!0,_e=!1}if($e&&!_e)return I||(I=new Ar),B||Na(r)?Rp(r,o,l,y,E,I):Bx(r,o,ie,l,y,E,I);if(!(l&C)){var He=_e&&Ne.call(r,"__wrapped__"),Qe=ke&&Ne.call(o,"__wrapped__");if(He||Qe){var dt=He?r.value():r,Je=Qe?o.value():o;return I||(I=new Ar),E(dt,Je,l,y,I)}}return $e?(I||(I=new Ar),zx(r,o,l,y,E,I)):!1}function mx(r){return Jt(r)&&Dn(r)==Ge}function Bl(r,o,l,y){var E=l.length,I=E,B=!y;if(r==null)return!I;for(r=K(r);E--;){var X=l[E];if(B&&X[2]?X[1]!==r[X[0]]:!(X[0]in r))return!1}for(;++E<I;){X=l[E];var ie=X[0],be=r[ie],_e=X[1];if(B&&X[2]){if(be===n&&!(ie in r))return!1}else{var ke=new Ar;if(y)var $e=y(be,_e,ie,r,o,ke);if(!($e===n?_s(_e,be,C|A,y,ke):$e))return!1}}return!0}function rp(r){if(!Xt(r)||Zx(r))return!1;var o=di(r)?Pn:Vt;return o.test(Do(r))}function gx(r){return Jt(r)&&Mn(r)==Wt}function yx(r){return Jt(r)&&Dn(r)==bt}function vx(r){return Jt(r)&&nc(r.length)&&!!Tt[Mn(r)]}function ip(r){return typeof r=="function"?r:r==null?Yn:typeof r=="object"?at(r)?sp(r[0],r[1]):ap(r):km(r)}function zl(r){if(!Ns(r))return bw(r);var o=[];for(var l in K(r))Ne.call(r,l)&&l!="constructor"&&o.push(l);return o}function wx(r){if(!Xt(r))return tb(r);var o=Ns(r),l=[];for(var y in r)y=="constructor"&&(o||!Ne.call(r,y))||l.push(y);return l}function Hl(r,o){return r<o}function op(r,o){var l=-1,y=Hn(r)?T(r.length):[];return Li(r,function(E,I,B){y[++l]=o(E,I,B)}),y}function ap(r){var o=of(r);return o.length==1&&o[0][2]?Wp(o[0][0],o[0][1]):function(l){return l===r||Bl(l,r,o)}}function sp(r,o){return sf(r)&&Fp(o)?Wp(Xr(r),o):function(l){var y=yf(l,r);return y===n&&y===o?vf(l,r):_s(o,y,C|A)}}function Wu(r,o,l,y,E){r!==o&&jl(o,function(I,B){if(E||(E=new Ar),Xt(I))xx(r,o,B,l,Wu,y,E);else{var X=y?y(cf(r,B),I,B+"",r,o,E):n;X===n&&(X=I),Rl(r,B,X)}},qn)}function xx(r,o,l,y,E,I,B){var X=cf(r,l),ie=cf(o,l),be=B.get(ie);if(be){Rl(r,l,be);return}var _e=I?I(X,ie,l+"",r,o,B):n,ke=_e===n;if(ke){var $e=at(ie),He=!$e&&zi(ie),Qe=!$e&&!He&&Na(ie);_e=ie,$e||He||Qe?at(X)?_e=X:rn(X)?_e=zn(X):He?(ke=!1,_e=wp(ie,!0)):Qe?(ke=!1,_e=xp(ie,!0)):_e=[]:Ts(ie)||Io(ie)?(_e=X,Io(X)?_e=gm(X):(!Xt(X)||di(X))&&(_e=Lp(ie))):ke=!1}ke&&(B.set(ie,_e),E(_e,ie,y,I,B),B.delete(ie)),Rl(r,l,_e)}function up(r,o){var l=r.length;if(l)return o+=o<0?l:0,fi(o,l)?r[o]:n}function cp(r,o,l){o.length?o=Pt(o,function(I){return at(I)?function(B){return Oo(B,I.length===1?I[0]:I)}:I}):o=[Yn];var y=-1;o=Pt(o,Cn(Xe()));var E=op(r,function(I,B,X){var ie=Pt(o,function(be){return be(I)});return{criteria:ie,index:++y,value:I}});return Nu(E,function(I,B){return Px(I,B,l)})}function bx(r,o){return lp(r,o,function(l,y){return vf(r,y)})}function lp(r,o,l){for(var y=-1,E=o.length,I={};++y<E;){var B=o[y],X=Oo(r,B);l(X,B)&&Ss(I,Wi(B,r),X)}return I}function _x(r){return function(o){return Oo(o,r)}}function ql(r,o,l,y){var E=y?ls:Mi,I=-1,B=o.length,X=r;for(r===o&&(o=zn(o)),l&&(X=Pt(r,Cn(l)));++I<B;)for(var ie=0,be=o[I],_e=l?l(be):be;(ie=E(X,_e,ie,y))>-1;)X!==r&&Au.call(X,ie,1),Au.call(r,ie,1);return r}function fp(r,o){for(var l=r?o.length:0,y=l-1;l--;){var E=o[l];if(l==y||E!==I){var I=E;fi(E)?Au.call(r,E,1):Vl(r,E)}}return r}function Yl(r,o){return r+Pu(Yh()*(o-r+1))}function Sx(r,o,l,y){for(var E=-1,I=hn(Iu((o-r)/(l||1)),0),B=T(I);I--;)B[y?I:++E]=r,r+=l;return B}function Kl(r,o){var l="";if(!r||o<1||o>oe)return l;do o%2&&(l+=r),o=Pu(o/2),o&&(r+=r);while(o);return l}function pt(r,o){return lf(Bp(r,o,Yn),r+"")}function Ex(r){return Vh(ka(r))}function Nx(r,o){var l=ka(r);return Xu(l,Co(o,0,l.length))}function Ss(r,o,l,y){if(!Xt(r))return r;o=Wi(o,r);for(var E=-1,I=o.length,B=I-1,X=r;X!=null&&++E<I;){var ie=Xr(o[E]),be=l;if(ie==="__proto__"||ie==="constructor"||ie==="prototype")return r;if(E!=B){var _e=X[ie];be=y?y(_e,ie,X):n,be===n&&(be=Xt(_e)?_e:fi(o[E+1])?[]:{})}ws(X,ie,be),X=X[ie]}return r}var dp=Mu?function(r,o){return Mu.set(r,o),r}:Yn,kx=Du?function(r,o){return Du(r,"toString",{configurable:!0,enumerable:!1,value:xf(o),writable:!0})}:Yn;function Tx(r){return Xu(ka(r))}function hr(r,o,l){var y=-1,E=r.length;o<0&&(o=-o>E?0:E+o),l=l>E?E:l,l<0&&(l+=E),E=o>l?0:l-o>>>0,o>>>=0;for(var I=T(E);++y<E;)I[y]=r[y+o];return I}function Cx(r,o){var l;return Li(r,function(y,E,I){return l=o(y,E,I),!l}),!!l}function Bu(r,o,l){var y=0,E=r==null?y:r.length;if(typeof o=="number"&&o===o&&E<=Te){for(;y<E;){var I=y+E>>>1,B=r[I];B!==null&&!er(B)&&(l?B<=o:B<o)?y=I+1:E=I}return E}return Ul(r,o,Yn,l)}function Ul(r,o,l,y){var E=0,I=r==null?0:r.length;if(I===0)return 0;o=l(o);for(var B=o!==o,X=o===null,ie=er(o),be=o===n;E<I;){var _e=Pu((E+I)/2),ke=l(r[_e]),$e=ke!==n,He=ke===null,Qe=ke===ke,dt=er(ke);if(B)var Je=y||Qe;else be?Je=Qe&&(y||$e):X?Je=Qe&&$e&&(y||!He):ie?Je=Qe&&$e&&!He&&(y||!dt):He||dt?Je=!1:Je=y?ke<=o:ke<o;Je?E=_e+1:I=_e}return An(I,Se)}function hp(r,o){for(var l=-1,y=r.length,E=0,I=[];++l<y;){var B=r[l],X=o?o(B):B;if(!l||!Dr(X,ie)){var ie=X;I[E++]=B===0?0:B}}return I}function pp(r){return typeof r=="number"?r:er(r)?de:+r}function Jn(r){if(typeof r=="string")return r;if(at(r))return Pt(r,Jn)+"";if(er(r))return Kh?Kh.call(r):"";var o=r+"";return o=="0"&&1/r==-pe?"-0":o}function Fi(r,o,l){var y=-1,E=yo,I=r.length,B=!0,X=[],ie=X;if(l)B=!1,E=Ii;else if(I>=a){var be=o?null:Fx(r);if(be)return $i(be);B=!1,E=Ri,ie=new To}else ie=o?[]:X;e:for(;++y<I;){var _e=r[y],ke=o?o(_e):_e;if(_e=l||_e!==0?_e:0,B&&ke===ke){for(var $e=ie.length;$e--;)if(ie[$e]===ke)continue e;o&&ie.push(ke),X.push(_e)}else E(ie,ke,l)||(ie!==X&&ie.push(ke),X.push(_e))}return X}function Vl(r,o){return o=Wi(o,r),r=zp(r,o),r==null||delete r[Xr(pr(o))]}function mp(r,o,l,y){return Ss(r,o,l(Oo(r,o)),y)}function zu(r,o,l,y){for(var E=r.length,I=y?E:-1;(y?I--:++I<E)&&o(r[I],I,r););return l?hr(r,y?0:I,y?I+1:E):hr(r,y?I+1:0,y?E:I)}function gp(r,o){var l=r;return l instanceof yt&&(l=l.value()),Pi(o,function(y,E){return E.func.apply(E.thisArg,kr([y],E.args))},l)}function Gl(r,o,l){var y=r.length;if(y<2)return y?Fi(r[0]):[];for(var E=-1,I=T(y);++E<y;)for(var B=r[E],X=-1;++X<y;)X!=E&&(I[E]=xs(I[E]||B,r[X],o,l));return Fi(bn(I,1),o,l)}function yp(r,o,l){for(var y=-1,E=r.length,I=o.length,B={};++y<E;){var X=y<I?o[y]:n;l(B,r[y],X)}return B}function Xl(r){return rn(r)?r:[]}function Zl(r){return typeof r=="function"?r:Yn}function Wi(r,o){return at(r)?r:sf(r,o)?[r]:Kp(kt(r))}var Ox=pt;function Bi(r,o,l){var y=r.length;return l=l===n?y:l,!o&&l>=y?r:hr(r,o,l)}var vp=gw||function(r){return dn.clearTimeout(r)};function wp(r,o){if(o)return r.slice();var l=r.length,y=Eo?Eo(l):new r.constructor(l);return r.copy(y),y}function Ql(r){var o=new r.constructor(r.byteLength);return new nn(o).set(new nn(r)),o}function Ax(r,o){var l=o?Ql(r.buffer):r.buffer;return new r.constructor(l,r.byteOffset,r.byteLength)}function Dx(r){var o=new r.constructor(r.source,ot.exec(r));return o.lastIndex=r.lastIndex,o}function Ix(r){return vs?K(vs.call(r)):{}}function xp(r,o){var l=o?Ql(r.buffer):r.buffer;return new r.constructor(l,r.byteOffset,r.length)}function bp(r,o){if(r!==o){var l=r!==n,y=r===null,E=r===r,I=er(r),B=o!==n,X=o===null,ie=o===o,be=er(o);if(!X&&!be&&!I&&r>o||I&&B&&ie&&!X&&!be||y&&B&&ie||!l&&ie||!E)return 1;if(!y&&!I&&!be&&r<o||be&&l&&E&&!y&&!I||X&&l&&E||!B&&E||!ie)return-1}return 0}function Px(r,o,l){for(var y=-1,E=r.criteria,I=o.criteria,B=E.length,X=l.length;++y<B;){var ie=bp(E[y],I[y]);if(ie){if(y>=X)return ie;var be=l[y];return ie*(be=="desc"?-1:1)}}return r.index-o.index}function _p(r,o,l,y){for(var E=-1,I=r.length,B=l.length,X=-1,ie=o.length,be=hn(I-B,0),_e=T(ie+be),ke=!y;++X<ie;)_e[X]=o[X];for(;++E<B;)(ke||E<I)&&(_e[l[E]]=r[E]);for(;be--;)_e[X++]=r[E++];return _e}function Sp(r,o,l,y){for(var E=-1,I=r.length,B=-1,X=l.length,ie=-1,be=o.length,_e=hn(I-X,0),ke=T(_e+be),$e=!y;++E<_e;)ke[E]=r[E];for(var He=E;++ie<be;)ke[He+ie]=o[ie];for(;++B<X;)($e||E<I)&&(ke[He+l[B]]=r[E++]);return ke}function zn(r,o){var l=-1,y=r.length;for(o||(o=T(y));++l<y;)o[l]=r[l];return o}function Gr(r,o,l,y){var E=!l;l||(l={});for(var I=-1,B=o.length;++I<B;){var X=o[I],ie=y?y(l[X],r[X],X,l,r):n;ie===n&&(ie=r[X]),E?ui(l,X,ie):ws(l,X,ie)}return l}function Mx(r,o){return Gr(r,af(r),o)}function Rx(r,o){return Gr(r,$p(r),o)}function Hu(r,o){return function(l,y){var E=at(l)?as:rx,I=o?o():{};return E(l,r,Xe(y,2),I)}}function _a(r){return pt(function(o,l){var y=-1,E=l.length,I=E>1?l[E-1]:n,B=E>2?l[2]:n;for(I=r.length>3&&typeof I=="function"?(E--,I):n,B&&Rn(l[0],l[1],B)&&(I=E<3?n:I,E=1),o=K(o);++y<E;){var X=l[y];X&&r(o,X,y,I)}return o})}function Ep(r,o){return function(l,y){if(l==null)return l;if(!Hn(l))return r(l,y);for(var E=l.length,I=o?E:-1,B=K(l);(o?I--:++I<E)&&y(B[I],I,B)!==!1;);return l}}function Np(r){return function(o,l,y){for(var E=-1,I=K(o),B=y(o),X=B.length;X--;){var ie=B[r?X:++E];if(l(I[ie],ie,I)===!1)break}return o}}function $x(r,o,l){var y=o&R,E=Es(r);function I(){var B=this&&this!==dn&&this instanceof I?E:r;return B.apply(y?l:this,arguments)}return I}function kp(r){return function(o){o=kt(o);var l=Or(o)?f(o):n,y=l?l[0]:o.charAt(0),E=l?Bi(l,1).join(""):o.slice(1);return y[r]()+E}}function Sa(r){return function(o){return Pi(Em(Sm(o).replace(es,"")),r,"")}}function Es(r){return function(){var o=arguments;switch(o.length){case 0:return new r;case 1:return new r(o[0]);case 2:return new r(o[0],o[1]);case 3:return new r(o[0],o[1],o[2]);case 4:return new r(o[0],o[1],o[2],o[3]);case 5:return new r(o[0],o[1],o[2],o[3],o[4]);case 6:return new r(o[0],o[1],o[2],o[3],o[4],o[5]);case 7:return new r(o[0],o[1],o[2],o[3],o[4],o[5],o[6])}var l=ba(r.prototype),y=r.apply(l,o);return Xt(y)?y:l}}function jx(r,o,l){var y=Es(r);function E(){for(var I=arguments.length,B=T(I),X=I,ie=Ea(E);X--;)B[X]=arguments[X];var be=I<3&&B[0]!==ie&&B[I-1]!==ie?[]:On(B,ie);if(I-=be.length,I<l)return Dp(r,o,qu,E.placeholder,n,B,be,n,n,l-I);var _e=this&&this!==dn&&this instanceof E?y:r;return xn(_e,this,B)}return E}function Tp(r){return function(o,l,y){var E=K(o);if(!Hn(o)){var I=Xe(l,3);o=yn(o),l=function(X){return I(E[X],X,E)}}var B=r(o,l,y);return B>-1?E[I?o[B]:B]:n}}function Cp(r){return li(function(o){var l=o.length,y=l,E=fr.prototype.thru;for(r&&o.reverse();y--;){var I=o[y];if(typeof I!="function")throw new me(c);if(E&&!B&&Vu(I)=="wrapper")var B=new fr([],!0)}for(y=B?y:l;++y<l;){I=o[y];var X=Vu(I),ie=X=="wrapper"?rf(I):n;ie&&uf(ie[0])&&ie[1]==(Y|te|ue|Q)&&!ie[4].length&&ie[9]==1?B=B[Vu(ie[0])].apply(B,ie[3]):B=I.length==1&&uf(I)?B[X]():B.thru(I)}return function(){var be=arguments,_e=be[0];if(B&&be.length==1&&at(_e))return B.plant(_e).value();for(var ke=0,$e=l?o[ke].apply(this,be):_e;++ke<l;)$e=o[ke].call(this,$e);return $e}})}function qu(r,o,l,y,E,I,B,X,ie,be){var _e=o&Y,ke=o&R,$e=o&$,He=o&(te|F),Qe=o&se,dt=$e?n:Es(r);function Je(){for(var gt=arguments.length,wt=T(gt),tr=gt;tr--;)wt[tr]=arguments[tr];if(He)var $n=Ea(Je),nr=Ol(wt,$n);if(y&&(wt=_p(wt,y,E,He)),I&&(wt=Sp(wt,I,B,He)),gt-=nr,He&&gt<be){var on=On(wt,$n);return Dp(r,o,qu,Je.placeholder,l,wt,on,X,ie,be-gt)}var Ir=ke?l:this,pi=$e?Ir[r]:r;return gt=wt.length,X?wt=rb(wt,X):Qe&&gt>1&&wt.reverse(),_e&&ie<gt&&(wt.length=ie),this&&this!==dn&&this instanceof Je&&(pi=dt||Es(pi)),pi.apply(Ir,wt)}return Je}function Op(r,o){return function(l,y){return fx(l,r,o(y),{})}}function Yu(r,o){return function(l,y){var E;if(l===n&&y===n)return o;if(l!==n&&(E=l),y!==n){if(E===n)return y;typeof l=="string"||typeof y=="string"?(l=Jn(l),y=Jn(y)):(l=pp(l),y=pp(y)),E=r(l,y)}return E}}function Jl(r){return li(function(o){return o=Pt(o,Cn(Xe())),pt(function(l){var y=this;return r(o,function(E){return xn(E,y,l)})})})}function Ku(r,o){o=o===n?" ":Jn(o);var l=o.length;if(l<2)return l?Kl(o,r):o;var y=Kl(o,Iu(r/s(o)));return Or(o)?Bi(f(y),0,r).join(""):y.slice(0,r)}function Lx(r,o,l,y){var E=o&R,I=Es(r);function B(){for(var X=-1,ie=arguments.length,be=-1,_e=y.length,ke=T(_e+ie),$e=this&&this!==dn&&this instanceof B?I:r;++be<_e;)ke[be]=y[be];for(;ie--;)ke[be++]=arguments[++X];return xn($e,E?l:this,ke)}return B}function Ap(r){return function(o,l,y){return y&&typeof y!="number"&&Rn(o,l,y)&&(l=y=n),o=hi(o),l===n?(l=o,o=0):l=hi(l),y=y===n?o<l?1:-1:hi(y),Sx(o,l,y,r)}}function Uu(r){return function(o,l){return typeof o=="string"&&typeof l=="string"||(o=mr(o),l=mr(l)),r(o,l)}}function Dp(r,o,l,y,E,I,B,X,ie,be){var _e=o&te,ke=_e?B:n,$e=_e?n:B,He=_e?I:n,Qe=_e?n:I;o|=_e?ue:ce,o&=~(_e?ce:ue),o&q||(o&=~(R|$));var dt=[r,o,E,He,ke,Qe,$e,X,ie,be],Je=l.apply(n,dt);return uf(r)&&Hp(Je,dt),Je.placeholder=y,qp(Je,r,o)}function ef(r){var o=ee[r];return function(l,y){if(l=mr(l),y=y==null?0:An(ut(y),292),y&&qh(l)){var E=(kt(l)+"e").split("e"),I=o(E[0]+"e"+(+E[1]+y));return E=(kt(I)+"e").split("e"),+(E[0]+"e"+(+E[1]-y))}return o(l)}}var Fx=wa&&1/$i(new wa([,-0]))[1]==pe?function(r){return new wa(r)}:Sf;function Ip(r){return function(o){var l=Dn(o);return l==Ge?So(o):l==bt?ji(o):ku(o,r(o))}}function ci(r,o,l,y,E,I,B,X){var ie=o&$;if(!ie&&typeof r!="function")throw new me(c);var be=y?y.length:0;if(be||(o&=~(ue|ce),y=E=n),B=B===n?B:hn(ut(B),0),X=X===n?X:ut(X),be-=E?E.length:0,o&ce){var _e=y,ke=E;y=E=n}var $e=ie?n:rf(r),He=[r,o,l,y,E,_e,ke,I,B,X];if($e&&eb(He,$e),r=He[0],o=He[1],l=He[2],y=He[3],E=He[4],X=He[9]=He[9]===n?ie?0:r.length:hn(He[9]-be,0),!X&&o&(te|F)&&(o&=~(te|F)),!o||o==R)var Qe=$x(r,o,l);else o==te||o==F?Qe=jx(r,o,X):(o==ue||o==(R|ue))&&!E.length?Qe=Lx(r,o,l,y):Qe=qu.apply(n,He);var dt=$e?dp:Hp;return qp(dt(Qe,He),r,o)}function Pp(r,o,l,y){return r===n||Dr(r,Ie[l])&&!Ne.call(y,l)?o:r}function Mp(r,o,l,y,E,I){return Xt(r)&&Xt(o)&&(I.set(o,r),Wu(r,o,n,Mp,I),I.delete(o)),r}function Wx(r){return Ts(r)?n:r}function Rp(r,o,l,y,E,I){var B=l&C,X=r.length,ie=o.length;if(X!=ie&&!(B&&ie>X))return!1;var be=I.get(r),_e=I.get(o);if(be&&_e)return be==o&&_e==r;var ke=-1,$e=!0,He=l&A?new To:n;for(I.set(r,o),I.set(o,r);++ke<X;){var Qe=r[ke],dt=o[ke];if(y)var Je=B?y(dt,Qe,ke,o,r,I):y(Qe,dt,ke,r,o,I);if(Je!==n){if(Je)continue;$e=!1;break}if(He){if(!Tr(o,function(gt,wt){if(!Ri(He,wt)&&(Qe===gt||E(Qe,gt,l,y,I)))return He.push(wt)})){$e=!1;break}}else if(!(Qe===dt||E(Qe,dt,l,y,I))){$e=!1;break}}return I.delete(r),I.delete(o),$e}function Bx(r,o,l,y,E,I,B){switch(l){case Kt:if(r.byteLength!=o.byteLength||r.byteOffset!=o.byteOffset)return!1;r=r.buffer,o=o.buffer;case tn:return!(r.byteLength!=o.byteLength||!I(new nn(r),new nn(o)));case Ve:case Ee:case it:return Dr(+r,+o);case xt:return r.name==o.name&&r.message==o.message;case Wt:case an:return r==o+"";case Ge:var X=So;case bt:var ie=y&C;if(X||(X=$i),r.size!=o.size&&!ie)return!1;var be=B.get(r);if(be)return be==o;y|=A,B.set(r,o);var _e=Rp(X(r),X(o),y,E,I,B);return B.delete(r),_e;case qt:if(vs)return vs.call(r)==vs.call(o)}return!1}function zx(r,o,l,y,E,I){var B=l&C,X=tf(r),ie=X.length,be=tf(o),_e=be.length;if(ie!=_e&&!B)return!1;for(var ke=ie;ke--;){var $e=X[ke];if(!(B?$e in o:Ne.call(o,$e)))return!1}var He=I.get(r),Qe=I.get(o);if(He&&Qe)return He==o&&Qe==r;var dt=!0;I.set(r,o),I.set(o,r);for(var Je=B;++ke<ie;){$e=X[ke];var gt=r[$e],wt=o[$e];if(y)var tr=B?y(wt,gt,$e,o,r,I):y(gt,wt,$e,r,o,I);if(!(tr===n?gt===wt||E(gt,wt,l,y,I):tr)){dt=!1;break}Je||(Je=$e=="constructor")}if(dt&&!Je){var $n=r.constructor,nr=o.constructor;$n!=nr&&"constructor"in r&&"constructor"in o&&!(typeof $n=="function"&&$n instanceof $n&&typeof nr=="function"&&nr instanceof nr)&&(dt=!1)}return I.delete(r),I.delete(o),dt}function li(r){return lf(Bp(r,n,Xp),r+"")}function tf(r){return tp(r,yn,af)}function nf(r){return tp(r,qn,$p)}var rf=Mu?function(r){return Mu.get(r)}:Sf;function Vu(r){for(var o=r.name+"",l=xa[o],y=Ne.call(xa,o)?l.length:0;y--;){var E=l[y],I=E.func;if(I==null||I==r)return E.name}return o}function Ea(r){var o=Ne.call(D,"placeholder")?D:r;return o.placeholder}function Xe(){var r=D.iteratee||bf;return r=r===bf?ip:r,arguments.length?r(arguments[0],arguments[1]):r}function Gu(r,o){var l=r.__data__;return Xx(o)?l[typeof o=="string"?"string":"hash"]:l.map}function of(r){for(var o=yn(r),l=o.length;l--;){var y=o[l],E=r[y];o[l]=[y,E,Fp(E)]}return o}function Ao(r,o){var l=Gt(r,o);return rp(l)?l:n}function Hx(r){var o=Ne.call(r,No),l=r[No];try{r[No]=n;var y=!0}catch{}var E=nt.call(r);return y&&(o?r[No]=l:delete r[No]),E}var af=Il?function(r){return r==null?[]:(r=K(r),Wn(Il(r),function(o){return va.call(r,o)}))}:Ef,$p=Il?function(r){for(var o=[];r;)kr(o,af(r)),r=ln(r);return o}:Ef,Dn=Mn;(Pl&&Dn(new Pl(new ArrayBuffer(1)))!=Kt||ms&&Dn(new ms)!=Ge||Ml&&Dn(Ml.resolve())!=We||wa&&Dn(new wa)!=bt||gs&&Dn(new gs)!=Qt)&&(Dn=function(r){var o=Mn(r),l=o==et?r.constructor:n,y=l?Do(l):"";if(y)switch(y){case Nw:return Kt;case kw:return Ge;case Tw:return We;case Cw:return bt;case Ow:return Qt}return o});function qx(r,o,l){for(var y=-1,E=l.length;++y<E;){var I=l[y],B=I.size;switch(I.type){case"drop":r+=B;break;case"dropRight":o-=B;break;case"take":o=An(o,r+B);break;case"takeRight":r=hn(r,o-B);break}}return{start:r,end:o}}function Yx(r){var o=r.match(cr);return o?o[1].split(ro):[]}function jp(r,o,l){o=Wi(o,r);for(var y=-1,E=o.length,I=!1;++y<E;){var B=Xr(o[y]);if(!(I=r!=null&&l(r,B)))break;r=r[B]}return I||++y!=E?I:(E=r==null?0:r.length,!!E&&nc(E)&&fi(B,E)&&(at(r)||Io(r)))}function Kx(r){var o=r.length,l=new r.constructor(o);return o&&typeof r[0]=="string"&&Ne.call(r,"index")&&(l.index=r.index,l.input=r.input),l}function Lp(r){return typeof r.constructor=="function"&&!Ns(r)?ba(ln(r)):{}}function Ux(r,o,l){var y=r.constructor;switch(o){case tn:return Ql(r);case Ve:case Ee:return new y(+r);case Kt:return Ax(r,l);case un:case fn:case _t:case Bt:case Ut:case $t:case je:case zt:case le:return xp(r,l);case Ge:return new y;case it:case an:return new y(r);case Wt:return Dx(r);case bt:return new y;case qt:return Ix(r)}}function Vx(r,o){var l=o.length;if(!l)return r;var y=l-1;return o[y]=(l>1?"& ":"")+o[y],o=o.join(l>2?", ":" "),r.replace(ur,`{
/* [wrapped with `+o+`] */
`)}function Gx(r){return at(r)||Io(r)||!!(Hh&&r&&r[Hh])}function fi(r,o){var l=typeof r;return o=o??oe,!!o&&(l=="number"||l!="symbol"&&_r.test(r))&&r>-1&&r%1==0&&r<o}function Rn(r,o,l){if(!Xt(l))return!1;var y=typeof o;return(y=="number"?Hn(l)&&fi(o,l.length):y=="string"&&o in l)?Dr(l[o],r):!1}function sf(r,o){if(at(r))return!1;var l=typeof r;return l=="number"||l=="symbol"||l=="boolean"||r==null||er(r)?!0:xr.test(r)||!Fn.test(r)||o!=null&&r in K(o)}function Xx(r){var o=typeof r;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?r!=="__proto__":r===null}function uf(r){var o=Vu(r),l=D[o];if(typeof l!="function"||!(o in yt.prototype))return!1;if(r===l)return!0;var y=rf(l);return!!y&&r===y[0]}function Zx(r){return!!Fe&&Fe in r}var Qx=Ce?di:Nf;function Ns(r){var o=r&&r.constructor,l=typeof o=="function"&&o.prototype||Ie;return r===l}function Fp(r){return r===r&&!Xt(r)}function Wp(r,o){return function(l){return l==null?!1:l[r]===o&&(o!==n||r in K(l))}}function Jx(r){var o=ec(r,function(y){return l.size===p&&l.clear(),y}),l=o.cache;return o}function eb(r,o){var l=r[1],y=o[1],E=l|y,I=E<(R|$|Y),B=y==Y&&l==te||y==Y&&l==Q&&r[7].length<=o[8]||y==(Y|Q)&&o[7].length<=o[8]&&l==te;if(!(I||B))return r;y&R&&(r[2]=o[2],E|=l&R?0:q);var X=o[3];if(X){var ie=r[3];r[3]=ie?_p(ie,X,o[4]):X,r[4]=ie?On(r[3],g):o[4]}return X=o[5],X&&(ie=r[5],r[5]=ie?Sp(ie,X,o[6]):X,r[6]=ie?On(r[5],g):o[6]),X=o[7],X&&(r[7]=X),y&Y&&(r[8]=r[8]==null?o[8]:An(r[8],o[8])),r[9]==null&&(r[9]=o[9]),r[0]=o[0],r[1]=E,r}function tb(r){var o=[];if(r!=null)for(var l in K(r))o.push(l);return o}function nb(r){return nt.call(r)}function Bp(r,o,l){return o=hn(o===n?r.length-1:o,0),function(){for(var y=arguments,E=-1,I=hn(y.length-o,0),B=T(I);++E<I;)B[E]=y[o+E];E=-1;for(var X=T(o+1);++E<o;)X[E]=y[E];return X[o]=l(B),xn(r,this,X)}}function zp(r,o){return o.length<2?r:Oo(r,hr(o,0,-1))}function rb(r,o){for(var l=r.length,y=An(o.length,l),E=zn(r);y--;){var I=o[y];r[y]=fi(I,l)?E[I]:n}return r}function cf(r,o){if(!(o==="constructor"&&typeof r[o]=="function")&&o!="__proto__")return r[o]}var Hp=Yp(dp),ks=vw||function(r,o){return dn.setTimeout(r,o)},lf=Yp(kx);function qp(r,o,l){var y=o+"";return lf(r,Vx(y,ib(Yx(y),l)))}function Yp(r){var o=0,l=0;return function(){var y=_w(),E=ve-(y-l);if(l=y,E>0){if(++o>=re)return arguments[0]}else o=0;return r.apply(n,arguments)}}function Xu(r,o){var l=-1,y=r.length,E=y-1;for(o=o===n?y:o;++l<o;){var I=Yl(l,E),B=r[I];r[I]=r[l],r[l]=B}return r.length=o,r}var Kp=Jx(function(r){var o=[];return r.charCodeAt(0)===46&&o.push(""),r.replace(br,function(l,y,E,I){o.push(E?I.replace(In,"$1"):y||l)}),o});function Xr(r){if(typeof r=="string"||er(r))return r;var o=r+"";return o=="0"&&1/r==-pe?"-0":o}function Do(r){if(r!=null){try{return De.call(r)}catch{}try{return r+""}catch{}}return""}function ib(r,o){return Tn(Re,function(l){var y="_."+l[0];o&l[1]&&!yo(r,y)&&r.push(y)}),r.sort()}function Up(r){if(r instanceof yt)return r.clone();var o=new fr(r.__wrapped__,r.__chain__);return o.__actions__=zn(r.__actions__),o.__index__=r.__index__,o.__values__=r.__values__,o}function ob(r,o,l){(l?Rn(r,o,l):o===n)?o=1:o=hn(ut(o),0);var y=r==null?0:r.length;if(!y||o<1)return[];for(var E=0,I=0,B=T(Iu(y/o));E<y;)B[I++]=hr(r,E,E+=o);return B}function ab(r){for(var o=-1,l=r==null?0:r.length,y=0,E=[];++o<l;){var I=r[o];I&&(E[y++]=I)}return E}function sb(){var r=arguments.length;if(!r)return[];for(var o=T(r-1),l=arguments[0],y=r;y--;)o[y-1]=arguments[y];return kr(at(l)?zn(l):[l],bn(o,1))}var ub=pt(function(r,o){return rn(r)?xs(r,bn(o,1,rn,!0)):[]}),cb=pt(function(r,o){var l=pr(o);return rn(l)&&(l=n),rn(r)?xs(r,bn(o,1,rn,!0),Xe(l,2)):[]}),lb=pt(function(r,o){var l=pr(o);return rn(l)&&(l=n),rn(r)?xs(r,bn(o,1,rn,!0),n,l):[]});function fb(r,o,l){var y=r==null?0:r.length;return y?(o=l||o===n?1:ut(o),hr(r,o<0?0:o,y)):[]}function db(r,o,l){var y=r==null?0:r.length;return y?(o=l||o===n?1:ut(o),o=y-o,hr(r,0,o<0?0:o)):[]}function hb(r,o){return r&&r.length?zu(r,Xe(o,3),!0,!0):[]}function pb(r,o){return r&&r.length?zu(r,Xe(o,3),!0):[]}function mb(r,o,l,y){var E=r==null?0:r.length;return E?(l&&typeof l!="number"&&Rn(r,o,l)&&(l=0,y=E),sx(r,o,l,y)):[]}function Vp(r,o,l){var y=r==null?0:r.length;if(!y)return-1;var E=l==null?0:ut(l);return E<0&&(E=hn(y+E,0)),vo(r,Xe(o,3),E)}function Gp(r,o,l){var y=r==null?0:r.length;if(!y)return-1;var E=y-1;return l!==n&&(E=ut(l),E=l<0?hn(y+E,0):An(E,y-1)),vo(r,Xe(o,3),E,!0)}function Xp(r){var o=r==null?0:r.length;return o?bn(r,1):[]}function gb(r){var o=r==null?0:r.length;return o?bn(r,pe):[]}function yb(r,o){var l=r==null?0:r.length;return l?(o=o===n?1:ut(o),bn(r,o)):[]}function vb(r){for(var o=-1,l=r==null?0:r.length,y={};++o<l;){var E=r[o];y[E[0]]=E[1]}return y}function Zp(r){return r&&r.length?r[0]:n}function wb(r,o,l){var y=r==null?0:r.length;if(!y)return-1;var E=l==null?0:ut(l);return E<0&&(E=hn(y+E,0)),Mi(r,o,E)}function xb(r){var o=r==null?0:r.length;return o?hr(r,0,-1):[]}var bb=pt(function(r){var o=Pt(r,Xl);return o.length&&o[0]===r[0]?Wl(o):[]}),_b=pt(function(r){var o=pr(r),l=Pt(r,Xl);return o===pr(l)?o=n:l.pop(),l.length&&l[0]===r[0]?Wl(l,Xe(o,2)):[]}),Sb=pt(function(r){var o=pr(r),l=Pt(r,Xl);return o=typeof o=="function"?o:n,o&&l.pop(),l.length&&l[0]===r[0]?Wl(l,n,o):[]});function Eb(r,o){return r==null?"":xw.call(r,o)}function pr(r){var o=r==null?0:r.length;return o?r[o-1]:n}function Nb(r,o,l){var y=r==null?0:r.length;if(!y)return-1;var E=y;return l!==n&&(E=ut(l),E=E<0?hn(y+E,0):An(E,y-1)),o===o?Ou(r,o,E):vo(r,wo,E,!0)}function kb(r,o){return r&&r.length?up(r,ut(o)):n}var Tb=pt(Qp);function Qp(r,o){return r&&r.length&&o&&o.length?ql(r,o):r}function Cb(r,o,l){return r&&r.length&&o&&o.length?ql(r,o,Xe(l,2)):r}function Ob(r,o,l){return r&&r.length&&o&&o.length?ql(r,o,n,l):r}var Ab=li(function(r,o){var l=r==null?0:r.length,y=$l(r,o);return fp(r,Pt(o,function(E){return fi(E,l)?+E:E}).sort(bp)),y});function Db(r,o){var l=[];if(!(r&&r.length))return l;var y=-1,E=[],I=r.length;for(o=Xe(o,3);++y<I;){var B=r[y];o(B,y,r)&&(l.push(B),E.push(y))}return fp(r,E),l}function ff(r){return r==null?r:Ew.call(r)}function Ib(r,o,l){var y=r==null?0:r.length;return y?(l&&typeof l!="number"&&Rn(r,o,l)?(o=0,l=y):(o=o==null?0:ut(o),l=l===n?y:ut(l)),hr(r,o,l)):[]}function Pb(r,o){return Bu(r,o)}function Mb(r,o,l){return Ul(r,o,Xe(l,2))}function Rb(r,o){var l=r==null?0:r.length;if(l){var y=Bu(r,o);if(y<l&&Dr(r[y],o))return y}return-1}function $b(r,o){return Bu(r,o,!0)}function jb(r,o,l){return Ul(r,o,Xe(l,2),!0)}function Lb(r,o){var l=r==null?0:r.length;if(l){var y=Bu(r,o,!0)-1;if(Dr(r[y],o))return y}return-1}function Fb(r){return r&&r.length?hp(r):[]}function Wb(r,o){return r&&r.length?hp(r,Xe(o,2)):[]}function Bb(r){var o=r==null?0:r.length;return o?hr(r,1,o):[]}function zb(r,o,l){return r&&r.length?(o=l||o===n?1:ut(o),hr(r,0,o<0?0:o)):[]}function Hb(r,o,l){var y=r==null?0:r.length;return y?(o=l||o===n?1:ut(o),o=y-o,hr(r,o<0?0:o,y)):[]}function qb(r,o){return r&&r.length?zu(r,Xe(o,3),!1,!0):[]}function Yb(r,o){return r&&r.length?zu(r,Xe(o,3)):[]}var Kb=pt(function(r){return Fi(bn(r,1,rn,!0))}),Ub=pt(function(r){var o=pr(r);return rn(o)&&(o=n),Fi(bn(r,1,rn,!0),Xe(o,2))}),Vb=pt(function(r){var o=pr(r);return o=typeof o=="function"?o:n,Fi(bn(r,1,rn,!0),n,o)});function Gb(r){return r&&r.length?Fi(r):[]}function Xb(r,o){return r&&r.length?Fi(r,Xe(o,2)):[]}function Zb(r,o){return o=typeof o=="function"?o:n,r&&r.length?Fi(r,n,o):[]}function df(r){if(!(r&&r.length))return[];var o=0;return r=Wn(r,function(l){if(rn(l))return o=hn(l.length,o),!0}),ga(o,function(l){return Pt(r,xo(l))})}function Jp(r,o){if(!(r&&r.length))return[];var l=df(r);return o==null?l:Pt(l,function(y){return xn(o,n,y)})}var Qb=pt(function(r,o){return rn(r)?xs(r,o):[]}),Jb=pt(function(r){return Gl(Wn(r,rn))}),e1=pt(function(r){var o=pr(r);return rn(o)&&(o=n),Gl(Wn(r,rn),Xe(o,2))}),t1=pt(function(r){var o=pr(r);return o=typeof o=="function"?o:n,Gl(Wn(r,rn),n,o)}),n1=pt(df);function r1(r,o){return yp(r||[],o||[],ws)}function i1(r,o){return yp(r||[],o||[],Ss)}var o1=pt(function(r){var o=r.length,l=o>1?r[o-1]:n;return l=typeof l=="function"?(r.pop(),l):n,Jp(r,l)});function em(r){var o=D(r);return o.__chain__=!0,o}function a1(r,o){return o(r),r}function Zu(r,o){return o(r)}var s1=li(function(r){var o=r.length,l=o?r[0]:0,y=this.__wrapped__,E=function(I){return $l(I,r)};return o>1||this.__actions__.length||!(y instanceof yt)||!fi(l)?this.thru(E):(y=y.slice(l,+l+(o?1:0)),y.__actions__.push({func:Zu,args:[E],thisArg:n}),new fr(y,this.__chain__).thru(function(I){return o&&!I.length&&I.push(n),I}))});function u1(){return em(this)}function c1(){return new fr(this.value(),this.__chain__)}function l1(){this.__values__===n&&(this.__values__=pm(this.value()));var r=this.__index__>=this.__values__.length,o=r?n:this.__values__[this.__index__++];return{done:r,value:o}}function f1(){return this}function d1(r){for(var o,l=this;l instanceof $u;){var y=Up(l);y.__index__=0,y.__values__=n,o?E.__wrapped__=y:o=y;var E=y;l=l.__wrapped__}return E.__wrapped__=r,o}function h1(){var r=this.__wrapped__;if(r instanceof yt){var o=r;return this.__actions__.length&&(o=new yt(this)),o=o.reverse(),o.__actions__.push({func:Zu,args:[ff],thisArg:n}),new fr(o,this.__chain__)}return this.thru(ff)}function p1(){return gp(this.__wrapped__,this.__actions__)}var m1=Hu(function(r,o,l){Ne.call(r,l)?++r[l]:ui(r,l,1)});function g1(r,o,l){var y=at(r)?Di:ax;return l&&Rn(r,o,l)&&(o=n),y(r,Xe(o,3))}function y1(r,o){var l=at(r)?Wn:Jh;return l(r,Xe(o,3))}var v1=Tp(Vp),w1=Tp(Gp);function x1(r,o){return bn(Qu(r,o),1)}function b1(r,o){return bn(Qu(r,o),pe)}function _1(r,o,l){return l=l===n?1:ut(l),bn(Qu(r,o),l)}function tm(r,o){var l=at(r)?Tn:Li;return l(r,Xe(o,3))}function nm(r,o){var l=at(r)?gn:Qh;return l(r,Xe(o,3))}var S1=Hu(function(r,o,l){Ne.call(r,l)?r[l].push(o):ui(r,l,[o])});function E1(r,o,l,y){r=Hn(r)?r:ka(r),l=l&&!y?ut(l):0;var E=r.length;return l<0&&(l=hn(E+l,0)),rc(r)?l<=E&&r.indexOf(o,l)>-1:!!E&&Mi(r,o,l)>-1}var N1=pt(function(r,o,l){var y=-1,E=typeof o=="function",I=Hn(r)?T(r.length):[];return Li(r,function(B){I[++y]=E?xn(o,B,l):bs(B,o,l)}),I}),k1=Hu(function(r,o,l){ui(r,l,o)});function Qu(r,o){var l=at(r)?Pt:op;return l(r,Xe(o,3))}function T1(r,o,l,y){return r==null?[]:(at(o)||(o=o==null?[]:[o]),l=y?n:l,at(l)||(l=l==null?[]:[l]),cp(r,o,l))}var C1=Hu(function(r,o,l){r[l?0:1].push(o)},function(){return[[],[]]});function O1(r,o,l){var y=at(r)?Pi:Eu,E=arguments.length<3;return y(r,Xe(o,4),l,E,Li)}function A1(r,o,l){var y=at(r)?ss:Eu,E=arguments.length<3;return y(r,Xe(o,4),l,E,Qh)}function D1(r,o){var l=at(r)?Wn:Jh;return l(r,tc(Xe(o,3)))}function I1(r){var o=at(r)?Vh:Ex;return o(r)}function P1(r,o,l){(l?Rn(r,o,l):o===n)?o=1:o=ut(o);var y=at(r)?tx:Nx;return y(r,o)}function M1(r){var o=at(r)?nx:Tx;return o(r)}function R1(r){if(r==null)return 0;if(Hn(r))return rc(r)?s(r):r.length;var o=Dn(r);return o==Ge||o==bt?r.size:zl(r).length}function $1(r,o,l){var y=at(r)?Tr:Cx;return l&&Rn(r,o,l)&&(o=n),y(r,Xe(o,3))}var j1=pt(function(r,o){if(r==null)return[];var l=o.length;return l>1&&Rn(r,o[0],o[1])?o=[]:l>2&&Rn(o[0],o[1],o[2])&&(o=[o[0]]),cp(r,bn(o,1),[])}),Ju=yw||function(){return dn.Date.now()};function L1(r,o){if(typeof o!="function")throw new me(c);return r=ut(r),function(){if(--r<1)return o.apply(this,arguments)}}function rm(r,o,l){return o=l?n:o,o=r&&o==null?r.length:o,ci(r,Y,n,n,n,n,o)}function im(r,o){var l;if(typeof o!="function")throw new me(c);return r=ut(r),function(){return--r>0&&(l=o.apply(this,arguments)),r<=1&&(o=n),l}}var hf=pt(function(r,o,l){var y=R;if(l.length){var E=On(l,Ea(hf));y|=ue}return ci(r,y,o,l,E)}),om=pt(function(r,o,l){var y=R|$;if(l.length){var E=On(l,Ea(om));y|=ue}return ci(o,y,r,l,E)});function am(r,o,l){o=l?n:o;var y=ci(r,te,n,n,n,n,n,o);return y.placeholder=am.placeholder,y}function sm(r,o,l){o=l?n:o;var y=ci(r,F,n,n,n,n,n,o);return y.placeholder=sm.placeholder,y}function um(r,o,l){var y,E,I,B,X,ie,be=0,_e=!1,ke=!1,$e=!0;if(typeof r!="function")throw new me(c);o=mr(o)||0,Xt(l)&&(_e=!!l.leading,ke="maxWait"in l,I=ke?hn(mr(l.maxWait)||0,o):I,$e="trailing"in l?!!l.trailing:$e);function He(on){var Ir=y,pi=E;return y=E=n,be=on,B=r.apply(pi,Ir),B}function Qe(on){return be=on,X=ks(gt,o),_e?He(on):B}function dt(on){var Ir=on-ie,pi=on-be,Tm=o-Ir;return ke?An(Tm,I-pi):Tm}function Je(on){var Ir=on-ie,pi=on-be;return ie===n||Ir>=o||Ir<0||ke&&pi>=I}function gt(){var on=Ju();if(Je(on))return wt(on);X=ks(gt,dt(on))}function wt(on){return X=n,$e&&y?He(on):(y=E=n,B)}function tr(){X!==n&&vp(X),be=0,y=ie=E=X=n}function $n(){return X===n?B:wt(Ju())}function nr(){var on=Ju(),Ir=Je(on);if(y=arguments,E=this,ie=on,Ir){if(X===n)return Qe(ie);if(ke)return vp(X),X=ks(gt,o),He(ie)}return X===n&&(X=ks(gt,o)),B}return nr.cancel=tr,nr.flush=$n,nr}var F1=pt(function(r,o){return Zh(r,1,o)}),W1=pt(function(r,o,l){return Zh(r,mr(o)||0,l)});function B1(r){return ci(r,se)}function ec(r,o){if(typeof r!="function"||o!=null&&typeof o!="function")throw new me(c);var l=function(){var y=arguments,E=o?o.apply(this,y):y[0],I=l.cache;if(I.has(E))return I.get(E);var B=r.apply(this,y);return l.cache=I.set(E,B)||I,B};return l.cache=new(ec.Cache||si),l}ec.Cache=si;function tc(r){if(typeof r!="function")throw new me(c);return function(){var o=arguments;switch(o.length){case 0:return!r.call(this);case 1:return!r.call(this,o[0]);case 2:return!r.call(this,o[0],o[1]);case 3:return!r.call(this,o[0],o[1],o[2])}return!r.apply(this,o)}}function z1(r){return im(2,r)}var H1=Ox(function(r,o){o=o.length==1&&at(o[0])?Pt(o[0],Cn(Xe())):Pt(bn(o,1),Cn(Xe()));var l=o.length;return pt(function(y){for(var E=-1,I=An(y.length,l);++E<I;)y[E]=o[E].call(this,y[E]);return xn(r,this,y)})}),pf=pt(function(r,o){var l=On(o,Ea(pf));return ci(r,ue,n,o,l)}),cm=pt(function(r,o){var l=On(o,Ea(cm));return ci(r,ce,n,o,l)}),q1=li(function(r,o){return ci(r,Q,n,n,n,o)});function Y1(r,o){if(typeof r!="function")throw new me(c);return o=o===n?o:ut(o),pt(r,o)}function K1(r,o){if(typeof r!="function")throw new me(c);return o=o==null?0:hn(ut(o),0),pt(function(l){var y=l[o],E=Bi(l,0,o);return y&&kr(E,y),xn(r,this,E)})}function U1(r,o,l){var y=!0,E=!0;if(typeof r!="function")throw new me(c);return Xt(l)&&(y="leading"in l?!!l.leading:y,E="trailing"in l?!!l.trailing:E),um(r,o,{leading:y,maxWait:o,trailing:E})}function V1(r){return rm(r,1)}function G1(r,o){return pf(Zl(o),r)}function X1(){if(!arguments.length)return[];var r=arguments[0];return at(r)?r:[r]}function Z1(r){return dr(r,b)}function Q1(r,o){return o=typeof o=="function"?o:n,dr(r,b,o)}function J1(r){return dr(r,v|b)}function e_(r,o){return o=typeof o=="function"?o:n,dr(r,v|b,o)}function t_(r,o){return o==null||Xh(r,o,yn(o))}function Dr(r,o){return r===o||r!==r&&o!==o}var n_=Uu(Fl),r_=Uu(function(r,o){return r>=o}),Io=np(function(){return arguments}())?np:function(r){return Jt(r)&&Ne.call(r,"callee")&&!va.call(r,"callee")},at=T.isArray,i_=po?Cn(po):dx;function Hn(r){return r!=null&&nc(r.length)&&!di(r)}function rn(r){return Jt(r)&&Hn(r)}function o_(r){return r===!0||r===!1||Jt(r)&&Mn(r)==Ve}var zi=ww||Nf,a_=mo?Cn(mo):hx;function s_(r){return Jt(r)&&r.nodeType===1&&!Ts(r)}function u_(r){if(r==null)return!0;if(Hn(r)&&(at(r)||typeof r=="string"||typeof r.splice=="function"||zi(r)||Na(r)||Io(r)))return!r.length;var o=Dn(r);if(o==Ge||o==bt)return!r.size;if(Ns(r))return!zl(r).length;for(var l in r)if(Ne.call(r,l))return!1;return!0}function c_(r,o){return _s(r,o)}function l_(r,o,l){l=typeof l=="function"?l:n;var y=l?l(r,o):n;return y===n?_s(r,o,n,l):!!y}function mf(r){if(!Jt(r))return!1;var o=Mn(r);return o==xt||o==rt||typeof r.message=="string"&&typeof r.name=="string"&&!Ts(r)}function f_(r){return typeof r=="number"&&qh(r)}function di(r){if(!Xt(r))return!1;var o=Mn(r);return o==ze||o==Nt||o==Ke||o==Ft}function lm(r){return typeof r=="number"&&r==ut(r)}function nc(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=oe}function Xt(r){var o=typeof r;return r!=null&&(o=="object"||o=="function")}function Jt(r){return r!=null&&typeof r=="object"}var fm=os?Cn(os):mx;function d_(r,o){return r===o||Bl(r,o,of(o))}function h_(r,o,l){return l=typeof l=="function"?l:n,Bl(r,o,of(o),l)}function p_(r){return dm(r)&&r!=+r}function m_(r){if(Qx(r))throw new W(u);return rp(r)}function g_(r){return r===null}function y_(r){return r==null}function dm(r){return typeof r=="number"||Jt(r)&&Mn(r)==it}function Ts(r){if(!Jt(r)||Mn(r)!=et)return!1;var o=ln(r);if(o===null)return!0;var l=Ne.call(o,"constructor")&&o.constructor;return typeof l=="function"&&l instanceof l&&De.call(l)==lt}var gf=_u?Cn(_u):gx;function v_(r){return lm(r)&&r>=-oe&&r<=oe}var hm=go?Cn(go):yx;function rc(r){return typeof r=="string"||!at(r)&&Jt(r)&&Mn(r)==an}function er(r){return typeof r=="symbol"||Jt(r)&&Mn(r)==qt}var Na=ha?Cn(ha):vx;function w_(r){return r===n}function x_(r){return Jt(r)&&Dn(r)==Qt}function b_(r){return Jt(r)&&Mn(r)==Yt}var __=Uu(Hl),S_=Uu(function(r,o){return r<=o});function pm(r){if(!r)return[];if(Hn(r))return rc(r)?f(r):zn(r);if(ps&&r[ps])return Dl(r[ps]());var o=Dn(r),l=o==Ge?So:o==bt?$i:ka;return l(r)}function hi(r){if(!r)return r===0?r:0;if(r=mr(r),r===pe||r===-pe){var o=r<0?-1:1;return o*G}return r===r?r:0}function ut(r){var o=hi(r),l=o%1;return o===o?l?o-l:o:0}function mm(r){return r?Co(ut(r),0,ge):0}function mr(r){if(typeof r=="number")return r;if(er(r))return de;if(Xt(r)){var o=typeof r.valueOf=="function"?r.valueOf():r;r=Xt(o)?o+"":o}if(typeof r!="string")return r===0?r:+r;r=Tu(r);var l=Dt.test(r);return l||mn.test(r)?ca(r.slice(2),l?2:8):vt.test(r)?de:+r}function gm(r){return Gr(r,qn(r))}function E_(r){return r?Co(ut(r),-oe,oe):r===0?r:0}function kt(r){return r==null?"":Jn(r)}var N_=_a(function(r,o){if(Ns(o)||Hn(o)){Gr(o,yn(o),r);return}for(var l in o)Ne.call(o,l)&&ws(r,l,o[l])}),ym=_a(function(r,o){Gr(o,qn(o),r)}),ic=_a(function(r,o,l,y){Gr(o,qn(o),r,y)}),k_=_a(function(r,o,l,y){Gr(o,yn(o),r,y)}),T_=li($l);function C_(r,o){var l=ba(r);return o==null?l:Gh(l,o)}var O_=pt(function(r,o){r=K(r);var l=-1,y=o.length,E=y>2?o[2]:n;for(E&&Rn(o[0],o[1],E)&&(y=1);++l<y;)for(var I=o[l],B=qn(I),X=-1,ie=B.length;++X<ie;){var be=B[X],_e=r[be];(_e===n||Dr(_e,Ie[be])&&!Ne.call(r,be))&&(r[be]=I[be])}return r}),A_=pt(function(r){return r.push(n,Mp),xn(vm,n,r)});function D_(r,o){return ma(r,Xe(o,3),Vr)}function I_(r,o){return ma(r,Xe(o,3),Ll)}function P_(r,o){return r==null?r:jl(r,Xe(o,3),qn)}function M_(r,o){return r==null?r:ep(r,Xe(o,3),qn)}function R_(r,o){return r&&Vr(r,Xe(o,3))}function $_(r,o){return r&&Ll(r,Xe(o,3))}function j_(r){return r==null?[]:Fu(r,yn(r))}function L_(r){return r==null?[]:Fu(r,qn(r))}function yf(r,o,l){var y=r==null?n:Oo(r,o);return y===n?l:y}function F_(r,o){return r!=null&&jp(r,o,ux)}function vf(r,o){return r!=null&&jp(r,o,cx)}var W_=Op(function(r,o,l){o!=null&&typeof o.toString!="function"&&(o=nt.call(o)),r[o]=l},xf(Yn)),B_=Op(function(r,o,l){o!=null&&typeof o.toString!="function"&&(o=nt.call(o)),Ne.call(r,o)?r[o].push(l):r[o]=[l]},Xe),z_=pt(bs);function yn(r){return Hn(r)?Uh(r):zl(r)}function qn(r){return Hn(r)?Uh(r,!0):wx(r)}function H_(r,o){var l={};return o=Xe(o,3),Vr(r,function(y,E,I){ui(l,o(y,E,I),y)}),l}function q_(r,o){var l={};return o=Xe(o,3),Vr(r,function(y,E,I){ui(l,E,o(y,E,I))}),l}var Y_=_a(function(r,o,l){Wu(r,o,l)}),vm=_a(function(r,o,l,y){Wu(r,o,l,y)}),K_=li(function(r,o){var l={};if(r==null)return l;var y=!1;o=Pt(o,function(I){return I=Wi(I,r),y||(y=I.length>1),I}),Gr(r,nf(r),l),y&&(l=dr(l,v|x|b,Wx));for(var E=o.length;E--;)Vl(l,o[E]);return l});function U_(r,o){return wm(r,tc(Xe(o)))}var V_=li(function(r,o){return r==null?{}:bx(r,o)});function wm(r,o){if(r==null)return{};var l=Pt(nf(r),function(y){return[y]});return o=Xe(o),lp(r,l,function(y,E){return o(y,E[0])})}function G_(r,o,l){o=Wi(o,r);var y=-1,E=o.length;for(E||(E=1,r=n);++y<E;){var I=r==null?n:r[Xr(o[y])];I===n&&(y=E,I=l),r=di(I)?I.call(r):I}return r}function X_(r,o,l){return r==null?r:Ss(r,o,l)}function Z_(r,o,l,y){return y=typeof y=="function"?y:n,r==null?r:Ss(r,o,l,y)}var xm=Ip(yn),bm=Ip(qn);function Q_(r,o,l){var y=at(r),E=y||zi(r)||Na(r);if(o=Xe(o,4),l==null){var I=r&&r.constructor;E?l=y?new I:[]:Xt(r)?l=di(I)?ba(ln(r)):{}:l={}}return(E?Tn:Vr)(r,function(B,X,ie){return o(l,B,X,ie)}),l}function J_(r,o){return r==null?!0:Vl(r,o)}function eS(r,o,l){return r==null?r:mp(r,o,Zl(l))}function tS(r,o,l,y){return y=typeof y=="function"?y:n,r==null?r:mp(r,o,Zl(l),y)}function ka(r){return r==null?[]:_o(r,yn(r))}function nS(r){return r==null?[]:_o(r,qn(r))}function rS(r,o,l){return l===n&&(l=o,o=n),l!==n&&(l=mr(l),l=l===l?l:0),o!==n&&(o=mr(o),o=o===o?o:0),Co(mr(r),o,l)}function iS(r,o,l){return o=hi(o),l===n?(l=o,o=0):l=hi(l),r=mr(r),lx(r,o,l)}function oS(r,o,l){if(l&&typeof l!="boolean"&&Rn(r,o,l)&&(o=l=n),l===n&&(typeof o=="boolean"?(l=o,o=n):typeof r=="boolean"&&(l=r,r=n)),r===n&&o===n?(r=0,o=1):(r=hi(r),o===n?(o=r,r=0):o=hi(o)),r>o){var y=r;r=o,o=y}if(l||r%1||o%1){var E=Yh();return An(r+E*(o-r+ua("1e-"+((E+"").length-1))),o)}return Yl(r,o)}var aS=Sa(function(r,o,l){return o=o.toLowerCase(),r+(l?_m(o):o)});function _m(r){return wf(kt(r).toLowerCase())}function Sm(r){return r=kt(r),r&&r.replace(It,Al).replace(Yr,"")}function sS(r,o,l){r=kt(r),o=Jn(o);var y=r.length;l=l===n?y:Co(ut(l),0,y);var E=l;return l-=o.length,l>=0&&r.slice(l,E)==o}function uS(r){return r=kt(r),r&&Ze.test(r)?r.replace(qe,ya):r}function cS(r){return r=kt(r),r&&Mt.test(r)?r.replace(St,"\\$&"):r}var lS=Sa(function(r,o,l){return r+(l?"-":"")+o.toLowerCase()}),fS=Sa(function(r,o,l){return r+(l?" ":"")+o.toLowerCase()}),dS=kp("toLowerCase");function hS(r,o,l){r=kt(r),o=ut(o);var y=o?s(r):0;if(!o||y>=o)return r;var E=(o-y)/2;return Ku(Pu(E),l)+r+Ku(Iu(E),l)}function pS(r,o,l){r=kt(r),o=ut(o);var y=o?s(r):0;return o&&y<o?r+Ku(o-y,l):r}function mS(r,o,l){r=kt(r),o=ut(o);var y=o?s(r):0;return o&&y<o?Ku(o-y,l)+r:r}function gS(r,o,l){return l||o==null?o=0:o&&(o=+o),Sw(kt(r).replace(ar,""),o||0)}function yS(r,o,l){return(l?Rn(r,o,l):o===n)?o=1:o=ut(o),Kl(kt(r),o)}function vS(){var r=arguments,o=kt(r[0]);return r.length<3?o:o.replace(r[1],r[2])}var wS=Sa(function(r,o,l){return r+(l?"_":"")+o.toLowerCase()});function xS(r,o,l){return l&&typeof l!="number"&&Rn(r,o,l)&&(o=l=n),l=l===n?ge:l>>>0,l?(r=kt(r),r&&(typeof o=="string"||o!=null&&!gf(o))&&(o=Jn(o),!o&&Or(r))?Bi(f(r),0,l):r.split(o,l)):[]}var bS=Sa(function(r,o,l){return r+(l?" ":"")+wf(o)});function _S(r,o,l){return r=kt(r),l=l==null?0:Co(ut(l),0,r.length),o=Jn(o),r.slice(l,l+o.length)==o}function SS(r,o,l){var y=D.templateSettings;l&&Rn(r,o,l)&&(o=n),r=kt(r),o=ic({},o,y,Pp);var E=ic({},o.imports,y.imports,Pp),I=yn(E),B=_o(E,I),X,ie,be=0,_e=o.interpolate||vn,ke="__p += '",$e=he((o.escape||vn).source+"|"+_e.source+"|"+(_e===jt?Hr:vn).source+"|"+(o.evaluate||vn).source+"|$","g"),He="//# sourceURL="+(Ne.call(o,"sourceURL")?(o.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++fo+"]")+`
`;r.replace($e,function(Je,gt,wt,tr,$n,nr){return wt||(wt=tr),ke+=r.slice(be,nr).replace(Xn,Cr),gt&&(X=!0,ke+=`' +
__e(`+gt+`) +
'`),$n&&(ie=!0,ke+=`';
`+$n+`;
__p += '`),wt&&(ke+=`' +
((__t = (`+wt+`)) == null ? '' : __t) +
'`),be=nr+Je.length,Je}),ke+=`';
`;var Qe=Ne.call(o,"variable")&&o.variable;if(!Qe)ke=`with (obj) {
`+ke+`
}
`;else if(Gn.test(Qe))throw new W(d);ke=(ie?ke.replace(xe,""):ke).replace(fe,"$1").replace(Oe,"$1;"),ke="function("+(Qe||"obj")+`) {
`+(Qe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(X?", __e = _.escape":"")+(ie?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ke+`return __p
}`;var dt=Nm(function(){return V(I,He+"return "+ke).apply(n,B)});if(dt.source=ke,mf(dt))throw dt;return dt}function ES(r){return kt(r).toLowerCase()}function NS(r){return kt(r).toUpperCase()}function kS(r,o,l){if(r=kt(r),r&&(l||o===n))return Tu(r);if(!r||!(o=Jn(o)))return r;var y=f(r),E=f(o),I=ds(y,E),B=Cu(y,E)+1;return Bi(y,I,B).join("")}function TS(r,o,l){if(r=kt(r),r&&(l||o===n))return r.slice(0,m(r)+1);if(!r||!(o=Jn(o)))return r;var y=f(r),E=Cu(y,f(o))+1;return Bi(y,0,E).join("")}function CS(r,o,l){if(r=kt(r),r&&(l||o===n))return r.replace(ar,"");if(!r||!(o=Jn(o)))return r;var y=f(r),E=ds(y,f(o));return Bi(y,E).join("")}function OS(r,o){var l=J,y=U;if(Xt(o)){var E="separator"in o?o.separator:E;l="length"in o?ut(o.length):l,y="omission"in o?Jn(o.omission):y}r=kt(r);var I=r.length;if(Or(r)){var B=f(r);I=B.length}if(l>=I)return r;var X=l-s(y);if(X<1)return y;var ie=B?Bi(B,0,X).join(""):r.slice(0,X);if(E===n)return ie+y;if(B&&(X+=ie.length-X),gf(E)){if(r.slice(X).search(E)){var be,_e=ie;for(E.global||(E=he(E.source,kt(ot.exec(E))+"g")),E.lastIndex=0;be=E.exec(_e);)var ke=be.index;ie=ie.slice(0,ke===n?X:ke)}}else if(r.indexOf(Jn(E),X)!=X){var $e=ie.lastIndexOf(E);$e>-1&&(ie=ie.slice(0,$e))}return ie+y}function AS(r){return r=kt(r),r&&Ue.test(r)?r.replace(Le,w):r}var DS=Sa(function(r,o,l){return r+(l?" ":"")+o.toUpperCase()}),wf=kp("toUpperCase");function Em(r,o,l){return r=kt(r),o=l?n:o,o===n?Bn(r)?j(r):pa(r):r.match(o)||[]}var Nm=pt(function(r,o){try{return xn(r,n,o)}catch(l){return mf(l)?l:new W(l)}}),IS=li(function(r,o){return Tn(o,function(l){l=Xr(l),ui(r,l,hf(r[l],r))}),r});function PS(r){var o=r==null?0:r.length,l=Xe();return r=o?Pt(r,function(y){if(typeof y[1]!="function")throw new me(c);return[l(y[0]),y[1]]}):[],pt(function(y){for(var E=-1;++E<o;){var I=r[E];if(xn(I[0],this,y))return xn(I[1],this,y)}})}function MS(r){return ox(dr(r,v))}function xf(r){return function(){return r}}function RS(r,o){return r==null||r!==r?o:r}var $S=Cp(),jS=Cp(!0);function Yn(r){return r}function bf(r){return ip(typeof r=="function"?r:dr(r,v))}function LS(r){return ap(dr(r,v))}function FS(r,o){return sp(r,dr(o,v))}var WS=pt(function(r,o){return function(l){return bs(l,r,o)}}),BS=pt(function(r,o){return function(l){return bs(r,l,o)}});function _f(r,o,l){var y=yn(o),E=Fu(o,y);l==null&&!(Xt(o)&&(E.length||!y.length))&&(l=o,o=r,r=this,E=Fu(o,yn(o)));var I=!(Xt(l)&&"chain"in l)||!!l.chain,B=di(r);return Tn(E,function(X){var ie=o[X];r[X]=ie,B&&(r.prototype[X]=function(){var be=this.__chain__;if(I||be){var _e=r(this.__wrapped__),ke=_e.__actions__=zn(this.__actions__);return ke.push({func:ie,args:arguments,thisArg:r}),_e.__chain__=be,_e}return ie.apply(r,kr([this.value()],arguments))})}),r}function zS(){return dn._===this&&(dn._=ft),this}function Sf(){}function HS(r){return r=ut(r),pt(function(o){return up(o,r)})}var qS=Jl(Pt),YS=Jl(Di),KS=Jl(Tr);function km(r){return sf(r)?xo(Xr(r)):_x(r)}function US(r){return function(o){return r==null?n:Oo(r,o)}}var VS=Ap(),GS=Ap(!0);function Ef(){return[]}function Nf(){return!1}function XS(){return{}}function ZS(){return""}function QS(){return!0}function JS(r,o){if(r=ut(r),r<1||r>oe)return[];var l=ge,y=An(r,ge);o=Xe(o),r-=ge;for(var E=ga(y,o);++l<r;)o(l);return E}function eE(r){return at(r)?Pt(r,Xr):er(r)?[r]:zn(Kp(kt(r)))}function tE(r){var o=++Pe;return kt(r)+o}var nE=Yu(function(r,o){return r+o},0),rE=ef("ceil"),iE=Yu(function(r,o){return r/o},1),oE=ef("floor");function aE(r){return r&&r.length?Lu(r,Yn,Fl):n}function sE(r,o){return r&&r.length?Lu(r,Xe(o,2),Fl):n}function uE(r){return Su(r,Yn)}function cE(r,o){return Su(r,Xe(o,2))}function lE(r){return r&&r.length?Lu(r,Yn,Hl):n}function fE(r,o){return r&&r.length?Lu(r,Xe(o,2),Hl):n}var dE=Yu(function(r,o){return r*o},1),hE=ef("round"),pE=Yu(function(r,o){return r-o},0);function mE(r){return r&&r.length?fs(r,Yn):0}function gE(r,o){return r&&r.length?fs(r,Xe(o,2)):0}return D.after=L1,D.ary=rm,D.assign=N_,D.assignIn=ym,D.assignInWith=ic,D.assignWith=k_,D.at=T_,D.before=im,D.bind=hf,D.bindAll=IS,D.bindKey=om,D.castArray=X1,D.chain=em,D.chunk=ob,D.compact=ab,D.concat=sb,D.cond=PS,D.conforms=MS,D.constant=xf,D.countBy=m1,D.create=C_,D.curry=am,D.curryRight=sm,D.debounce=um,D.defaults=O_,D.defaultsDeep=A_,D.defer=F1,D.delay=W1,D.difference=ub,D.differenceBy=cb,D.differenceWith=lb,D.drop=fb,D.dropRight=db,D.dropRightWhile=hb,D.dropWhile=pb,D.fill=mb,D.filter=y1,D.flatMap=x1,D.flatMapDeep=b1,D.flatMapDepth=_1,D.flatten=Xp,D.flattenDeep=gb,D.flattenDepth=yb,D.flip=B1,D.flow=$S,D.flowRight=jS,D.fromPairs=vb,D.functions=j_,D.functionsIn=L_,D.groupBy=S1,D.initial=xb,D.intersection=bb,D.intersectionBy=_b,D.intersectionWith=Sb,D.invert=W_,D.invertBy=B_,D.invokeMap=N1,D.iteratee=bf,D.keyBy=k1,D.keys=yn,D.keysIn=qn,D.map=Qu,D.mapKeys=H_,D.mapValues=q_,D.matches=LS,D.matchesProperty=FS,D.memoize=ec,D.merge=Y_,D.mergeWith=vm,D.method=WS,D.methodOf=BS,D.mixin=_f,D.negate=tc,D.nthArg=HS,D.omit=K_,D.omitBy=U_,D.once=z1,D.orderBy=T1,D.over=qS,D.overArgs=H1,D.overEvery=YS,D.overSome=KS,D.partial=pf,D.partialRight=cm,D.partition=C1,D.pick=V_,D.pickBy=wm,D.property=km,D.propertyOf=US,D.pull=Tb,D.pullAll=Qp,D.pullAllBy=Cb,D.pullAllWith=Ob,D.pullAt=Ab,D.range=VS,D.rangeRight=GS,D.rearg=q1,D.reject=D1,D.remove=Db,D.rest=Y1,D.reverse=ff,D.sampleSize=P1,D.set=X_,D.setWith=Z_,D.shuffle=M1,D.slice=Ib,D.sortBy=j1,D.sortedUniq=Fb,D.sortedUniqBy=Wb,D.split=xS,D.spread=K1,D.tail=Bb,D.take=zb,D.takeRight=Hb,D.takeRightWhile=qb,D.takeWhile=Yb,D.tap=a1,D.throttle=U1,D.thru=Zu,D.toArray=pm,D.toPairs=xm,D.toPairsIn=bm,D.toPath=eE,D.toPlainObject=gm,D.transform=Q_,D.unary=V1,D.union=Kb,D.unionBy=Ub,D.unionWith=Vb,D.uniq=Gb,D.uniqBy=Xb,D.uniqWith=Zb,D.unset=J_,D.unzip=df,D.unzipWith=Jp,D.update=eS,D.updateWith=tS,D.values=ka,D.valuesIn=nS,D.without=Qb,D.words=Em,D.wrap=G1,D.xor=Jb,D.xorBy=e1,D.xorWith=t1,D.zip=n1,D.zipObject=r1,D.zipObjectDeep=i1,D.zipWith=o1,D.entries=xm,D.entriesIn=bm,D.extend=ym,D.extendWith=ic,_f(D,D),D.add=nE,D.attempt=Nm,D.camelCase=aS,D.capitalize=_m,D.ceil=rE,D.clamp=rS,D.clone=Z1,D.cloneDeep=J1,D.cloneDeepWith=e_,D.cloneWith=Q1,D.conformsTo=t_,D.deburr=Sm,D.defaultTo=RS,D.divide=iE,D.endsWith=sS,D.eq=Dr,D.escape=uS,D.escapeRegExp=cS,D.every=g1,D.find=v1,D.findIndex=Vp,D.findKey=D_,D.findLast=w1,D.findLastIndex=Gp,D.findLastKey=I_,D.floor=oE,D.forEach=tm,D.forEachRight=nm,D.forIn=P_,D.forInRight=M_,D.forOwn=R_,D.forOwnRight=$_,D.get=yf,D.gt=n_,D.gte=r_,D.has=F_,D.hasIn=vf,D.head=Zp,D.identity=Yn,D.includes=E1,D.indexOf=wb,D.inRange=iS,D.invoke=z_,D.isArguments=Io,D.isArray=at,D.isArrayBuffer=i_,D.isArrayLike=Hn,D.isArrayLikeObject=rn,D.isBoolean=o_,D.isBuffer=zi,D.isDate=a_,D.isElement=s_,D.isEmpty=u_,D.isEqual=c_,D.isEqualWith=l_,D.isError=mf,D.isFinite=f_,D.isFunction=di,D.isInteger=lm,D.isLength=nc,D.isMap=fm,D.isMatch=d_,D.isMatchWith=h_,D.isNaN=p_,D.isNative=m_,D.isNil=y_,D.isNull=g_,D.isNumber=dm,D.isObject=Xt,D.isObjectLike=Jt,D.isPlainObject=Ts,D.isRegExp=gf,D.isSafeInteger=v_,D.isSet=hm,D.isString=rc,D.isSymbol=er,D.isTypedArray=Na,D.isUndefined=w_,D.isWeakMap=x_,D.isWeakSet=b_,D.join=Eb,D.kebabCase=lS,D.last=pr,D.lastIndexOf=Nb,D.lowerCase=fS,D.lowerFirst=dS,D.lt=__,D.lte=S_,D.max=aE,D.maxBy=sE,D.mean=uE,D.meanBy=cE,D.min=lE,D.minBy=fE,D.stubArray=Ef,D.stubFalse=Nf,D.stubObject=XS,D.stubString=ZS,D.stubTrue=QS,D.multiply=dE,D.nth=kb,D.noConflict=zS,D.noop=Sf,D.now=Ju,D.pad=hS,D.padEnd=pS,D.padStart=mS,D.parseInt=gS,D.random=oS,D.reduce=O1,D.reduceRight=A1,D.repeat=yS,D.replace=vS,D.result=G_,D.round=hE,D.runInContext=k,D.sample=I1,D.size=R1,D.snakeCase=wS,D.some=$1,D.sortedIndex=Pb,D.sortedIndexBy=Mb,D.sortedIndexOf=Rb,D.sortedLastIndex=$b,D.sortedLastIndexBy=jb,D.sortedLastIndexOf=Lb,D.startCase=bS,D.startsWith=_S,D.subtract=pE,D.sum=mE,D.sumBy=gE,D.template=SS,D.times=JS,D.toFinite=hi,D.toInteger=ut,D.toLength=mm,D.toLower=ES,D.toNumber=mr,D.toSafeInteger=E_,D.toString=kt,D.toUpper=NS,D.trim=kS,D.trimEnd=TS,D.trimStart=CS,D.truncate=OS,D.unescape=AS,D.uniqueId=tE,D.upperCase=DS,D.upperFirst=wf,D.each=tm,D.eachRight=nm,D.first=Zp,_f(D,function(){var r={};return Vr(D,function(o,l){Ne.call(D.prototype,l)||(r[l]=o)}),r}(),{chain:!1}),D.VERSION=i,Tn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){D[r].placeholder=D}),Tn(["drop","take"],function(r,o){yt.prototype[r]=function(l){l=l===n?1:hn(ut(l),0);var y=this.__filtered__&&!o?new yt(this):this.clone();return y.__filtered__?y.__takeCount__=An(l,y.__takeCount__):y.__views__.push({size:An(l,ge),type:r+(y.__dir__<0?"Right":"")}),y},yt.prototype[r+"Right"]=function(l){return this.reverse()[r](l).reverse()}}),Tn(["filter","map","takeWhile"],function(r,o){var l=o+1,y=l==M||l==L;yt.prototype[r]=function(E){var I=this.clone();return I.__iteratees__.push({iteratee:Xe(E,3),type:l}),I.__filtered__=I.__filtered__||y,I}}),Tn(["head","last"],function(r,o){var l="take"+(o?"Right":"");yt.prototype[r]=function(){return this[l](1).value()[0]}}),Tn(["initial","tail"],function(r,o){var l="drop"+(o?"":"Right");yt.prototype[r]=function(){return this.__filtered__?new yt(this):this[l](1)}}),yt.prototype.compact=function(){return this.filter(Yn)},yt.prototype.find=function(r){return this.filter(r).head()},yt.prototype.findLast=function(r){return this.reverse().find(r)},yt.prototype.invokeMap=pt(function(r,o){return typeof r=="function"?new yt(this):this.map(function(l){return bs(l,r,o)})}),yt.prototype.reject=function(r){return this.filter(tc(Xe(r)))},yt.prototype.slice=function(r,o){r=ut(r);var l=this;return l.__filtered__&&(r>0||o<0)?new yt(l):(r<0?l=l.takeRight(-r):r&&(l=l.drop(r)),o!==n&&(o=ut(o),l=o<0?l.dropRight(-o):l.take(o-r)),l)},yt.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},yt.prototype.toArray=function(){return this.take(ge)},Vr(yt.prototype,function(r,o){var l=/^(?:filter|find|map|reject)|While$/.test(o),y=/^(?:head|last)$/.test(o),E=D[y?"take"+(o=="last"?"Right":""):o],I=y||/^find/.test(o);E&&(D.prototype[o]=function(){var B=this.__wrapped__,X=y?[1]:arguments,ie=B instanceof yt,be=X[0],_e=ie||at(B),ke=function(gt){var wt=E.apply(D,kr([gt],X));return y&&$e?wt[0]:wt};_e&&l&&typeof be=="function"&&be.length!=1&&(ie=_e=!1);var $e=this.__chain__,He=!!this.__actions__.length,Qe=I&&!$e,dt=ie&&!He;if(!I&&_e){B=dt?B:new yt(this);var Je=r.apply(B,X);return Je.__actions__.push({func:Zu,args:[ke],thisArg:n}),new fr(Je,$e)}return Qe&&dt?r.apply(this,X):(Je=this.thru(ke),Qe?y?Je.value()[0]:Je.value():Je)})}),Tn(["pop","push","shift","sort","splice","unshift"],function(r){var o=we[r],l=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",y=/^(?:pop|shift)$/.test(r);D.prototype[r]=function(){var E=arguments;if(y&&!this.__chain__){var I=this.value();return o.apply(at(I)?I:[],E)}return this[l](function(B){return o.apply(at(B)?B:[],E)})}}),Vr(yt.prototype,function(r,o){var l=D[o];if(l){var y=l.name+"";Ne.call(xa,y)||(xa[y]=[]),xa[y].push({name:o,func:l})}}),xa[qu(n,$).name]=[{name:"wrapper",func:n}],yt.prototype.clone=Aw,yt.prototype.reverse=Dw,yt.prototype.value=Iw,D.prototype.at=s1,D.prototype.chain=u1,D.prototype.commit=c1,D.prototype.next=l1,D.prototype.plant=d1,D.prototype.reverse=h1,D.prototype.toJSON=D.prototype.valueOf=D.prototype.value=p1,D.prototype.first=D.prototype.head,ps&&(D.prototype[ps]=f1),D},Z=z();Nr?((Nr.exports=Z)._=Z,is._=Z):dn._=Z}).call(Mr)})($c,$c.exports);var _h=$c.exports;const RA=(e,t)=>{const n=e.sortEventTime.localeCompare(t.sortEventTime);return n!==0?n:!e.sortEventId||!t.sortEventId?0:parseInt(e.sortEventId)-parseInt(t.sortEventId)},Cg=(e,t)=>{if(!t.find(h=>Si(h)&&_h.isEqual(Qo(h),e)))throw new Error(`Root workflow node ${e.workflowId} not found`);const i=sv(t),a=av(e,t),u=jA(i),c=Sc(a,u),d=Ec(c);return{nodes:u,edges:d,virtualTree:a,renderTree:c}},av=(e,t)=>{const n=t.find(c=>Si(c)&&_h.isEqual(Qo(c),e));if(!n)throw new Error(`Root workflow node ${e.workflowId} not found`);const i={id:Ws(n),children:[]},a=new Set;a.add(Ws(n));const u=[{nodeId:Ws(n),treeNode:i}];for(;u.length>0;){const{nodeId:c,treeNode:d}=u.shift(),p=t.filter(g=>{const v=oA(g);return v?Fr(v)===c:!1}).sort(RA);for(const g of p){const v=Ws(g);if(a.has(v))continue;a.add(v);const x={id:v,children:[]};d.children.push(x),u.push({nodeId:v,treeNode:x})}}return i},Sc=(e,t)=>{const n=new Map,i=new Map,a=new Set;t.forEach(p=>{n.set(p.id,p.type),p.type==="batch"&&i.set(p.id,p)});const u=new Map;i.forEach((p,g)=>{p.referencedBatches.forEach(v=>{const x="activityId"in v?lu(v):Fr(v);u.set(x,g)})});const c=new Set,d=p=>{if(a.has(p.id))return c.add(p.id),{id:p.id,children:[]};if(a.add(p.id),u.has(p.id)){const x=u.get(p.id),b={id:x,children:[],isBatchNode:!0};return c.add(x),c.add(p.id),b}if(p.isExpanded===!1)return c.add(p.id),{id:p.id,children:[]};const g=[],v=new Map;for(const x of p.children){const b=u.get(x.id);b?(v.has(b)||v.set(b,[]),v.get(b).push(x),c.add(x.id)):g.push(d(x))}return v.forEach((x,b)=>{const C={id:b,children:[],isBatchNode:!0};g.push(C),c.add(b)}),c.add(p.id),{id:p.id,children:g}};return d(e)},Ec=e=>{const t=[],n=new Set,i=d=>{n.add(d.id),d.children.forEach(h=>i(h))};i(e);const a=new Set,u=(d,h=null)=>{const p=d.children;if(p.length===0)return;const g=p[0];if(n.has(d.id)){if(n.has(g.id)){const v=`${d.id}:${g.id}:child`;a.has(v)||(a.add(v),t.push({source_id:d.id,target_id:g.id,type:"child"}))}}for(let v=0;v<p.length-1;v++){const x=p[v],b=p[v+1];if(!n.has(x.id)||!n.has(b.id))continue;const C=`${x.id}:${b.id}:sibling`;a.has(C)||(a.add(C),t.push({source_id:x.id,target_id:b.id,type:"sibling"}))}p.forEach(v=>u(v,d.id))};return u(e),t.filter(d=>n.has(d.source_id)&&n.has(d.target_id))},sv=e=>{const t={},n=[];for(const i of e){let a=i.workflowTaskCompletedEventId;if(a===void 0||a==="-1"){n.push(i);continue}t[a]||(t[a]=[]),t[a].push(i)}for(const i in t){const a=t[i];if(a.length<=5){a.forEach(d=>n.push(d));continue}const u=a[0],c=$A(u,a);n.push(c)}return sv.originalItems=e,n},$A=(e,t)=>{const n={...e},i=Ws(e);return n.__isBatch=!0,n.__batchItems=t,n.__batchCount=t.length,n.__originalId=i,n},jA=e=>e.map(t=>Xy(t)),LA=async(e,t,n)=>{n||(n="");const i=await fetch(`http://localhost:7531/workflow?namespace=${e}&id=${t}&runId=${n}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);return await i.json()},FA=async()=>{try{return(await fetch("http://localhost:7531/health",{method:"GET"})).status===200}catch{return!1}};async function Sd(e,t,n,i=0){const a=[{id:t,runId:n,workflowTaskCompletedEventId:"-1",depth:i}],u=new Set;for(;a.length>0;){const{id:c,runId:d,workflowTaskCompletedEventId:h,depth:p}=a.shift();if(u.has(c))continue;const g=await tl(c,d);if(g&&!g.isPlaceholder){u.add(c);continue}try{const v=await LA(e,c,d);u.add(c);const x=[];for(const b of v)b.type==="workflow"?await bg({...b,workflowTaskCompletedEventId:h,isPlaceholder:!1}):b.type==="childWorkflow"?(x.push({workflowId:b.workflowId,workflowRunId:b.runId,workflowTaskCompletedEventId:b.workflowTaskCompletedEventId}),await bg({...b,type:"workflow",isPlaceholder:!0})):b.type==="activity"&&await XO(b);p>0&&x.length>0&&x.forEach(b=>{a.push({id:b.workflowId,runId:b.workflowRunId,workflowTaskCompletedEventId:b.workflowTaskCompletedEventId,depth:p-1})})}catch(v){console.error("Error processing workflow:",v)}}}const Og=async(e,t)=>{const n=await fetch(`http://localhost:7531/search?namespace=${e}&query=${encodeURIComponent(t)}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return n.json()},WA=async(e,t,n)=>{const i=await fetch(`http://localhost:7531/workflow/data?namespace=${e}&id=${t}&runId=${n}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);return await i.json()};var uv=Symbol.for("immer-nothing"),Ag=Symbol.for("immer-draftable"),ir=Symbol.for("immer-state");function $r(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ya=Object.getPrototypeOf;function Ka(e){return!!e&&!!e[ir]}function Xo(e){var t;return e?cv(e)||Array.isArray(e)||!!e[Ag]||!!((t=e.constructor)!=null&&t[Ag])||al(e)||sl(e):!1}var BA=Object.prototype.constructor.toString();function cv(e){if(!e||typeof e!="object")return!1;const t=Ya(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===BA}function jc(e,t){ol(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,i)=>t(i,n,e))}function ol(e){const t=e[ir];return t?t.type_:Array.isArray(e)?1:al(e)?2:sl(e)?3:0}function Ed(e,t){return ol(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function lv(e,t,n){const i=ol(e);i===2?e.set(t,n):i===3?e.add(n):e[t]=n}function zA(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function al(e){return e instanceof Map}function sl(e){return e instanceof Set}function Mo(e){return e.copy_||e.base_}function Nd(e,t){if(al(e))return new Map(e);if(sl(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=cv(e);if(t===!0||t==="class_only"&&!n){const i=Object.getOwnPropertyDescriptors(e);delete i[ir];let a=Reflect.ownKeys(i);for(let u=0;u<a.length;u++){const c=a[u],d=i[c];d.writable===!1&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(i[c]={configurable:!0,writable:!0,enumerable:d.enumerable,value:e[c]})}return Object.create(Ya(e),i)}else{const i=Ya(e);if(i!==null&&n)return{...e};const a=Object.create(i);return Object.assign(a,e)}}function Sh(e,t=!1){return ul(e)||Ka(e)||!Xo(e)||(ol(e)>1&&(e.set=e.add=e.clear=e.delete=HA),Object.freeze(e),t&&Object.entries(e).forEach(([n,i])=>Sh(i,!0))),e}function HA(){$r(2)}function ul(e){return Object.isFrozen(e)}var qA={};function Zo(e){const t=qA[e];return t||$r(0,e),t}var nu;function fv(){return nu}function YA(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Dg(e,t){t&&(Zo("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function kd(e){Td(e),e.drafts_.forEach(KA),e.drafts_=null}function Td(e){e===nu&&(nu=e.parent_)}function Ig(e){return nu=YA(nu,e)}function KA(e){const t=e[ir];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Pg(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[ir].modified_&&(kd(t),$r(4)),Xo(e)&&(e=Lc(t,e),t.parent_||Fc(t,e)),t.patches_&&Zo("Patches").generateReplacementPatches_(n[ir].base_,e,t.patches_,t.inversePatches_)):e=Lc(t,n,[]),kd(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==uv?e:void 0}function Lc(e,t,n){if(ul(t))return t;const i=t[ir];if(!i)return jc(t,(a,u)=>Mg(e,i,t,a,u,n)),t;if(i.scope_!==e)return t;if(!i.modified_)return Fc(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let u=a,c=!1;i.type_===3&&(u=new Set(a),a.clear(),c=!0),jc(u,(d,h)=>Mg(e,i,a,d,h,n,c)),Fc(e,a,!1),n&&e.patches_&&Zo("Patches").generatePatches_(i,n,e.patches_,e.inversePatches_)}return i.copy_}function Mg(e,t,n,i,a,u,c){if(Ka(a)){const d=u&&t&&t.type_!==3&&!Ed(t.assigned_,i)?u.concat(i):void 0,h=Lc(e,a,d);if(lv(n,i,h),Ka(h))e.canAutoFreeze_=!1;else return}else c&&n.add(a);if(Xo(a)&&!ul(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Lc(e,a),(!t||!t.scope_.parent_)&&typeof i!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,i)&&Fc(e,a)}}function Fc(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Sh(t,n)}function UA(e,t){const n=Array.isArray(e),i={type_:n?1:0,scope_:t?t.scope_:fv(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=i,u=Eh;n&&(a=[i],u=ru);const{revoke:c,proxy:d}=Proxy.revocable(a,u);return i.draft_=d,i.revoke_=c,d}var Eh={get(e,t){if(t===ir)return e;const n=Mo(e);if(!Ed(n,t))return VA(e,n,t);const i=n[t];return e.finalized_||!Xo(i)?i:i===zf(e.base_,t)?(Hf(e),e.copy_[t]=Od(i,e)):i},has(e,t){return t in Mo(e)},ownKeys(e){return Reflect.ownKeys(Mo(e))},set(e,t,n){const i=dv(Mo(e),t);if(i!=null&&i.set)return i.set.call(e.draft_,n),!0;if(!e.modified_){const a=zf(Mo(e),t),u=a==null?void 0:a[ir];if(u&&u.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(zA(n,a)&&(n!==void 0||Ed(e.base_,t)))return!0;Hf(e),Cd(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return zf(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Hf(e),Cd(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Mo(e),i=Reflect.getOwnPropertyDescriptor(n,t);return i&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:i.enumerable,value:n[t]}},defineProperty(){$r(11)},getPrototypeOf(e){return Ya(e.base_)},setPrototypeOf(){$r(12)}},ru={};jc(Eh,(e,t)=>{ru[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});ru.deleteProperty=function(e,t){return ru.set.call(this,e,t,void 0)};ru.set=function(e,t,n){return Eh.set.call(this,e[0],t,n,e[0])};function zf(e,t){const n=e[ir];return(n?Mo(n):e)[t]}function VA(e,t,n){var a;const i=dv(t,n);return i?"value"in i?i.value:(a=i.get)==null?void 0:a.call(e.draft_):void 0}function dv(e,t){if(!(t in e))return;let n=Ya(e);for(;n;){const i=Object.getOwnPropertyDescriptor(n,t);if(i)return i;n=Ya(n)}}function Cd(e){e.modified_||(e.modified_=!0,e.parent_&&Cd(e.parent_))}function Hf(e){e.copy_||(e.copy_=Nd(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var GA=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,i)=>{if(typeof t=="function"&&typeof n!="function"){const u=n;n=t;const c=this;return function(h=u,...p){return c.produce(h,g=>n.call(this,g,...p))}}typeof n!="function"&&$r(6),i!==void 0&&typeof i!="function"&&$r(7);let a;if(Xo(t)){const u=Ig(this),c=Od(t,void 0);let d=!0;try{a=n(c),d=!1}finally{d?kd(u):Td(u)}return Dg(u,i),Pg(a,u)}else if(!t||typeof t!="object"){if(a=n(t),a===void 0&&(a=t),a===uv&&(a=void 0),this.autoFreeze_&&Sh(a,!0),i){const u=[],c=[];Zo("Patches").generateReplacementPatches_(t,a,u,c),i(u,c)}return a}else $r(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(c,...d)=>this.produceWithPatches(c,h=>t(h,...d));let i,a;return[this.produce(t,n,(c,d)=>{i=c,a=d}),i,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Xo(e)||$r(8),Ka(e)&&(e=XA(e));const t=Ig(this),n=Od(e,void 0);return n[ir].isManual_=!0,Td(t),n}finishDraft(e,t){const n=e&&e[ir];(!n||!n.isManual_)&&$r(9);const{scope_:i}=n;return Dg(i,t),Pg(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}n>-1&&(t=t.slice(n+1));const i=Zo("Patches").applyPatches_;return Ka(e)?i(e,t):this.produce(e,a=>i(a,t))}};function Od(e,t){const n=al(e)?Zo("MapSet").proxyMap_(e,t):sl(e)?Zo("MapSet").proxySet_(e,t):UA(e,t);return(t?t.scope_:fv()).drafts_.push(n),n}function XA(e){return Ka(e)||$r(10,e),hv(e)}function hv(e){if(!Xo(e)||ul(e))return e;const t=e[ir];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Nd(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Nd(e,!0);return jc(n,(i,a)=>{lv(n,i,hv(a))}),t&&(t.finalized_=!1),n}var or=new GA,qf=or.produce;or.produceWithPatches.bind(or);or.setAutoFreeze.bind(or);or.setUseStrictShallowCopy.bind(or);or.applyPatches.bind(or);or.createDraft.bind(or);or.finishDraft.bind(or);const Ma=(e,t)=>{if(e.id===t)return e;for(const n of e.children){const i=Ma(n,t);if(i)return i}return null},pv=(e,t)=>{for(const n of e.children)if(n.id===t)return e;for(const n of e.children){const i=pv(n,t);if(i)return i}return null};function ZA(){const[e,t]=N.useState(!1),[n,i]=N.useState(!1),a=Yo(bh),u=rl(),c=async(p,g,v)=>{try{t(!0);const x=u.get(Bo),b=u.get(Wa),C=Fr({workflowId:g,workflowRunId:v});if(await Sd(p,g,v,2),x){const ue=Ma(x,C);if(ue&&ue.children&&ue.children.length>0){const ce=qf(x,se=>{const J=Ma(se,C);J&&(J.isExpanded=!0)}),Y=Sc(ce,b),Q=Ec(Y);return a({structure:ce,renderTree:Y,edges:Q}),!0}}const A=await xd(g,v),R={workflowId:g,workflowRunId:v};if(!A.find(ue=>Si(ue)&&_h.isEqual(Qo(ue),R)))return console.error("[expandChildWorkflowNode] Root workflow node not found"),!1;const q=av(R,A),te=u.get(Bo),F=u.get(Wa);if(te&&q){const ue=A.map(re=>{if(!(Si(re)&&re.workflowId===R.workflowId&&re.runId===R.workflowRunId))return Xy(re)}).filter(re=>re!==void 0),ce=new Set(F.map(re=>re.id)),Y=ue.filter(re=>!ce.has(re.id)),Q=[...F,...Y],se=qf(te,re=>{const ve=Ma(re,C);ve?(ve.children=q.children,ve.isExpanded=!0):console.error(`[expandChildWorkflowNode] Could not find node ${C} in virtual tree to update!`)}),J=Sc(se,Q),U=Ec(J);return a({nodes:Q,edges:U,structure:se,renderTree:J}),!0}return console.error("[expandChildWorkflowNode] Could not update graph - virtual tree or subgraph missing"),!1}catch(x){return console.error("[expandChildWorkflowNode] Error expanding workflow:",x),!1}finally{t(!1)}},d=async(p,g)=>{try{i(!0);const v=u.get(Bo),x=u.get(Wa),b=Fr({workflowId:p,workflowRunId:g});if(v){const C=qf(v,$=>{const q=Ma($,b);q&&(q.isExpanded=!1)}),A=Sc(C,x),R=Ec(A);a({structure:C,renderTree:A,edges:R})}return!0}catch(v){return console.error("Failed to collapse workflow node:",v),!1}finally{i(!1)}};return{expandChildWorkflowNode:c,collapseChildWorkflowNode:d,collapseSiblingWorkflowNodes:async(p,g)=>{const v=u.get(Bo);if(!v)return{success:!0,message:"No graph structure available"};const x=Fr({workflowId:p,workflowRunId:g}),b=pv(v,x);if(!b)return{success:!1,message:"Could not find parent node"};const C=[];for(const A of b.children)if(A.id!==x&&A.isExpanded){const R=Gy(A.id);C.push(d(R.workflowId,R.workflowRunId))}return await Promise.all(C),{success:!0,message:"Collapsed sibling nodes"}},isExpanding:e,isCollapsing:n}}const QA=(e,t=50)=>e?e.length<=t?e:e.slice(0,t)+"...":"",JA=e=>N.useMemo(()=>Gy(e),[e]),eD=N.memo(({id:e,data:t,onSpreadBatchNodes:n,onShowNodeData:i})=>{const a=JA(t.id),u=tA(a),{expandChildWorkflowNode:c,collapseChildWorkflowNode:d,collapseSiblingWorkflowNodes:h}=ZA(),[p,g]=N.useState(!1),[v,x]=N.useState(!1),b=N.useRef(!1),C=u.value,A=rl(),R=N.useCallback(async()=>{if(!u.loading&&C){const F=A.get(Bo);let ue=t.isExpanded;if(F){const ce=Ma(F,t.id);ce&&(ue=ce.isExpanded)}if(ue)await d(C.workflowId,C.runId);else{g(!0),b.current=!0;const ce=setTimeout(()=>{b.current&&x(!0)},100);try{await h(C.workflowId,C.runId),await new Promise(Y=>setTimeout(Y,50)),await c(C.namespace,C.workflowId,C.runId)}finally{clearTimeout(ce),b.current=!1,g(!1),x(!1)}}}},[u.loading,t,c,d,h,C,e]),$=N.useCallback(()=>{C&&(d(C.workflowId,C.runId),requestAnimationFrame(()=>{n==null||n(e)}))},[d,C,n,e]),q=N.useCallback(F=>{C&&i(C,{x:F.clientX,y:F.clientY})},[C,i]);return N.useMemo(()=>{var F;return u.error||!C?null:_.jsxs("div",{className:"relative",children:[_.jsx("div",{className:yr(p&&"pointer-events-none opacity-75"),children:_.jsx(mh,{id:e,onShowNodeData:q,onBatchAction:$,onClick:R,IconComponent:_.jsx("div",{className:"bg-amber-50",children:_.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[_.jsx("rect",{x:"9",y:"3",width:"6",height:"6",rx:"1"}),_.jsx("rect",{x:"3",y:"15",width:"6",height:"6",rx:"1"}),_.jsx("rect",{x:"15",y:"15",width:"6",height:"6",rx:"1"}),_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3M6 15v-3h12v3"})]})}),TitleComponent:_.jsxs(_.Fragment,{children:[_.jsx("h3",{className:"font-semibold text-gray-800 truncate",children:C.workflowType}),_.jsx("p",{className:"text-xs text-gray-500 overflow-hidden text-ellipsis",children:QA(e)})]}),TypeLabelComponent:_.jsx("div",{className:"px-2 py-0.5 rounded text-xs font-medium shadow-sm z-10",style:{backgroundColor:"rgb(254 243 199)",color:"rgb(217 119 6)"},children:"workflow"}),status:C.status,startTime:C.startTime,endTime:C.endTime,taskQueue:(F=C.taskQueue)==null?void 0:F.name})}),v&&_.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none bg-white bg-opacity-50 z-20",children:_.jsx("div",{className:"bg-white p-3 rounded-full shadow-lg",children:_.jsx(qO,{className:"w-8 h-8 text-blue-500 animate-spin"})})})]})},[e,C,u.error,u.loading,R,$,q,p,v])}),tD=({autoZoomEnabled:e,setAutoZoomEnabled:t,refreshWorkflowData:n,currentWorkflow:i,setIsSearchModalOpen:a})=>{N.useEffect(()=>{(async()=>{const d=await tu("autoZoomEnabled");d!==void 0&&t(d)})()},[t]);const u=async()=>{const c=!e;t(c),await bd("autoZoomEnabled",c)};return _.jsxs("div",{className:"flex gap-2 items-center",children:[_.jsxs("button",{className:`px-3 py-1 rounded ${e?"bg-green-500 text-white":"bg-gray-200 text-gray-700"}`,onClick:u,children:["Auto Zoom ",e?"On":"Off"]}),_.jsx("button",{className:"px-3 py-1 rounded bg-blue-500 text-white hover:bg-blue-600",onClick:()=>a(!0),children:_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(Hy,{className:"h-4 w-4"}),"Search"]})})]})};function nD({id:e,data:t,onClose:n,position:i,baseZIndex:a=100}){const[u,c]=N.useState("io"),d=N.useRef(null),h=N.useRef(null),[p,g]=N.useState({width:600,height:600}),[v,x]=N.useState(!1),[b,C]=N.useState(!1),A=N.useRef({x:0,y:0,width:0,height:0}),[R,$]=N.useState({x:0,y:0}),[q,te]=N.useState(a);N.useEffect(()=>{t&&t!==h.current&&(c("io"),h.current=t)},[t]),N.useEffect(()=>{const L=d.current;L&&(L.style.display="none",L.scrollTop=0,L.style.display="")},[t,u]),N.useEffect(()=>{te(L=>Math.max(L,a))},[a]),N.useEffect(()=>{t&&i&&setTimeout(()=>{d.current&&(d.current.style.display="none",d.current.offsetHeight,d.current.style.display="",d.current.style.visibility="visible",d.current.style.opacity="1",Y())},50)},[t,i]);const F=L=>{var oe;if(!L.target||!(L.target instanceof HTMLElement)||!L.target.closest("[data-drag-handle]"))return;L.preventDefault(),L.stopPropagation(),x(!0);const pe=(oe=d.current)==null?void 0:oe.getBoundingClientRect();pe&&(A.current={x:L.clientX-pe.left,y:L.clientY-pe.top,width:p.width,height:p.height}),document.body.style.userSelect="none"},ue=L=>{var pe,oe;L.stopPropagation(),L.preventDefault(),C(!0),A.current={x:L.clientX,y:L.clientY,width:((pe=d.current)==null?void 0:pe.offsetWidth)||p.width,height:((oe=d.current)==null?void 0:oe.offsetHeight)||p.height},document.body.style.userSelect="none"};N.useEffect(()=>{const L=G=>{if(!(!v&&!b))if(G.preventDefault(),G.stopPropagation(),b&&d.current){const de=G.clientX-A.current.x,ge=G.clientY-A.current.y,Se=Math.max(300,A.current.width+de),Te=Math.max(400,A.current.height+ge);(Se!==p.width||Te!==p.height)&&g({width:Se,height:Te})}else v&&$({x:G.clientX-A.current.x-i.x,y:G.clientY-A.current.y-i.y})},pe=G=>{G.preventDefault(),G.stopPropagation(),requestAnimationFrame(()=>{x(!1),C(!1),document.body.style.userSelect=""})},oe=new AbortController;return(v||b)&&(window.addEventListener("mousemove",L,{signal:oe.signal,capture:!0}),window.addEventListener("mouseup",pe,{signal:oe.signal,capture:!0})),()=>{oe.abort()}},[v,b,i,p]);const ce=()=>{if(!i)return{};const L=20,pe=window.innerWidth,oe=window.innerHeight,G=Math.min(Math.max(L,i.x+R.x),pe-p.width-L),de=Math.min(Math.max(L,i.y+R.y),oe-p.height-L);return{left:G,top:de}},Y=()=>{const L=document.querySelectorAll(`[data-node-panel][data-base-z-index="${a}"]`),pe=Array.from(L).reduce((oe,G)=>{const de=parseInt(window.getComputedStyle(G).zIndex)||a;return Math.max(oe,de)},a);te(pe+1)};if(!t||!i)return null;const Q=!!(t.lastFailure||t.failure),se=!!(t.scheduleTime||t.startTime||t.endTime),J=!!(t.input||t.result||t.memo&&Object.keys(t.memo).length>0||t.searchAttributes&&Object.keys(t.searchAttributes).length>0),re=t.type==="workflow"&&t.namespace&&t.workflowId?`https://cloud.temporal.io/namespaces/${t.namespace}/workflows/${t.workflowId}`:null,ve=({tab:L,label:pe,disabled:oe})=>_.jsx("button",{onClick:()=>!oe&&c(L),disabled:oe,className:yr("px-4 py-2 text-sm font-medium transition-colors rounded-t-lg","focus:outline-none",oe&&"opacity-50 cursor-not-allowed",u===L?{io:"bg-blue-100 text-blue-800",error:"bg-red-100 text-red-800",time:"bg-purple-100 text-purple-800",common:"bg-green-100 text-green-800"}[L]:"text-gray-600 hover:bg-gray-100"),children:pe}),M=()=>{var pe;const L="space-y-4 min-h-[300px]";switch(u){case"io":return _.jsxs("div",{className:L,children:[t.input&&_.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg overflow-auto relative",children:[_.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Input"}),_.jsx(ae,{content:JSON.stringify(JSON.parse(t.input),null,2)}),_.jsx("div",{className:"overflow-auto",children:_.jsx("pre",{className:"text-xs text-blue-700 whitespace-pre-wrap break-all bg-blue-100 p-2 rounded min-w-fit",children:JSON.stringify(JSON.parse(t.input),null,2)})})]}),t.result&&_.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg overflow-auto relative",children:[_.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Result"}),_.jsx(ae,{content:JSON.stringify(JSON.parse(t.result),null,2)}),_.jsx("div",{className:"overflow-auto",children:_.jsx("pre",{className:"text-xs text-blue-700 whitespace-pre-wrap break-all bg-blue-100 p-2 rounded min-w-fit",children:JSON.stringify(JSON.parse(t.result),null,2)})})]}),t.header&&Object.keys(t.header).length>0&&_.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg overflow-auto relative",children:[_.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Header"}),_.jsx(ae,{content:JSON.stringify(t.header,null,2)}),_.jsx("div",{className:"overflow-auto",children:_.jsx("pre",{className:"text-xs text-blue-700 whitespace-pre-wrap break-all bg-blue-100 p-2 rounded min-w-fit",children:JSON.stringify(t.header,null,2)})})]}),t.memo&&Object.keys(t.memo).length>0&&_.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg overflow-auto",children:[_.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Memo"}),_.jsx("div",{className:"overflow-auto",children:_.jsx("pre",{className:"text-xs text-blue-700 whitespace-pre-wrap bg-blue-100 p-2 rounded min-w-fit",children:JSON.stringify(t.memo,null,2)})})]}),t.searchAttributes&&Object.keys(t.searchAttributes).length>0&&_.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg overflow-auto",children:[_.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Search Attributes"}),_.jsx("div",{className:"overflow-auto",children:_.jsx("pre",{className:"text-xs text-blue-700 whitespace-pre-wrap bg-blue-100 p-2 rounded min-w-fit",children:JSON.stringify(t.searchAttributes,null,2)})})]})]});case"error":return _.jsxs("div",{className:L,children:[t.lastFailure&&_.jsxs("div",{className:"bg-red-50 p-4 rounded-lg overflow-auto relative",children:[_.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Last Failure"}),_.jsx(ae,{content:JSON.stringify(JSON.parse(t.lastFailure),null,2)}),_.jsx("div",{className:"overflow-auto",children:_.jsx("pre",{className:"text-xs text-red-700 whitespace-pre-wrap break-all bg-red-100 p-2 rounded min-w-fit",children:JSON.stringify(JSON.parse(t.lastFailure),null,2)})})]}),t.failure&&_.jsxs("div",{className:"bg-red-50 p-4 rounded-lg overflow-auto relative",children:[_.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Failure"}),_.jsx(ae,{content:JSON.stringify(JSON.parse(t.failure),null,2)}),_.jsx("div",{className:"overflow-auto",children:_.jsx("pre",{className:"text-xs text-red-700 whitespace-pre-wrap break-all bg-red-100 p-2 rounded min-w-fit",children:JSON.stringify(JSON.parse(t.failure),null,2)})})]})]});case"time":return _.jsxs("div",{className:L,children:[t.startTime&&t.endTime&&_.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Duration"}),_.jsx("p",{className:"text-purple-700 text-lg font-semibold",children:ph(t.startTime,t.endTime)})]}),t.scheduleTime&&_.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Schedule Time"}),_.jsx("p",{className:"text-purple-700",children:t.scheduleTime})]}),t.startTime&&_.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Start Time"}),_.jsx("p",{className:"text-purple-700",children:t.startTime})]}),t.endTime&&_.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"End Time"}),_.jsx("p",{className:"text-purple-700",children:t.endTime})]}),t.lastStartedTime&&_.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Last Started Time"}),_.jsx("p",{className:"text-purple-700",children:t.lastStartedTime})]}),t.lastAttemptCompleteTime&&_.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Last Attempt Complete Time"}),_.jsx("p",{className:"text-purple-700",children:t.lastAttemptCompleteTime})]}),(t.heartbeatTimeout||t.scheduleToCloseTimeout||t.scheduleToStartTimeout||t.startToCloseTimeout||t.workflowRunTimeout||t.workflowTaskTimeout)&&_.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Timeouts"}),t.heartbeatTimeout&&_.jsxs("p",{className:"text-purple-700",children:["Heartbeat: ",t.heartbeatTimeout]}),t.scheduleToCloseTimeout&&_.jsxs("p",{className:"text-purple-700",children:["Schedule to Close: ",t.scheduleToCloseTimeout]}),t.scheduleToStartTimeout&&_.jsxs("p",{className:"text-purple-700",children:["Schedule to Start: ",t.scheduleToStartTimeout]}),t.startToCloseTimeout&&_.jsxs("p",{className:"text-purple-700",children:["Start to Close: ",t.startToCloseTimeout]}),t.workflowRunTimeout&&_.jsxs("p",{className:"text-purple-700",children:["Workflow Run: ",t.workflowRunTimeout]}),t.workflowTaskTimeout&&_.jsxs("p",{className:"text-purple-700",children:["Workflow Task: ",t.workflowTaskTimeout]})]})]});case"common":return _.jsxs("div",{className:L,children:[_.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Basic Information"}),_.jsxs("div",{className:"space-y-2",children:[_.jsxs("p",{className:"text-green-700",children:["Type: ",t.type]}),t.activityType&&_.jsxs("p",{className:"text-green-700",children:["Activity Type: ",t.activityType]}),t.workflowType&&_.jsxs("p",{className:"text-green-700",children:["Workflow Type: ",t.workflowType]}),_.jsxs("p",{className:"text-green-700",children:["Status: ",t.status]}),t.namespace&&_.jsxs("p",{className:"text-green-700",children:["Namespace: ",t.namespace]}),t.workflowId&&_.jsxs("p",{className:"text-green-700",children:["Workflow ID: ",t.workflowId]}),(t.workflowRunId||t.runId)&&_.jsxs("p",{className:"text-green-700",children:["Run ID: ",t.workflowRunId||t.runId]}),t.activityId&&_.jsxs("p",{className:"text-green-700",children:["Activity ID: ",t.activityId]}),t.workflowTaskCompletedEventId&&_.jsxs("p",{className:"text-green-700",children:["Workflow Task Completed Event ID:"," ",t.workflowTaskCompletedEventId]})]})]}),t.taskQueue&&_.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Task Queue"}),_.jsxs("p",{className:"text-green-700",children:["Name: ",t.taskQueue.name]})]}),t.retryPolicy&&_.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Retry Policy"}),_.jsxs("div",{className:"space-y-2",children:[_.jsxs("p",{className:"text-green-700",children:["Initial Interval: ",t.retryPolicy.initialInterval]}),_.jsxs("p",{className:"text-green-700",children:["Backoff Coefficient: ",t.retryPolicy.backoffCoefficient]}),_.jsxs("p",{className:"text-green-700",children:["Maximum Interval: ",t.retryPolicy.maximumInterval]}),_.jsxs("p",{className:"text-green-700",children:["Maximum Attempts: ",t.retryPolicy.maximumAttempts]}),((pe=t.retryPolicy.nonRetryableErrorTypes)==null?void 0:pe.length)>0&&_.jsxs("div",{children:[_.jsx("p",{className:"text-green-700",children:"Non-retryable Error Types:"}),_.jsx("ul",{className:"list-disc pl-4",children:t.retryPolicy.nonRetryableErrorTypes.map((oe,G)=>_.jsx("li",{className:"text-green-700",children:oe},G))})]})]})]}),t.attempts&&_.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Attempts"}),_.jsxs("p",{className:"text-green-700",children:["Count: ",t.attempts]})]}),t.lastWorkerIdentity&&_.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Worker"}),_.jsxs("p",{className:"text-green-700",children:["Last Identity: ",t.lastWorkerIdentity]})]}),t.workflowReusePolicy&&_.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Workflow Reuse Policy"}),_.jsx("p",{className:"text-green-700",children:t.workflowReusePolicy})]})]})}},ae=({content:L})=>{const pe=()=>{navigator.clipboard.writeText(L)};return _.jsx("button",{onClick:pe,className:"absolute top-4 right-4 p-1.5 rounded bg-white/80 hover:bg-white border border-gray-200 transition-colors",title:"Copy to clipboard",children:_.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-600",children:[_.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),_.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})})};return _.jsxs("div",{ref:d,"data-node-panel":!0,"data-base-z-index":a,className:"fixed bg-white rounded-lg shadow-xl border border-gray-200 overflow-hidden",style:{...ce(),width:p.width,height:p.height,zIndex:q,visibility:"visible",opacity:1,pointerEvents:"auto"},onClick:L=>{L.preventDefault(),L.stopPropagation(),Y()},onMouseDown:L=>{L.preventDefault(),L.stopPropagation(),L.target instanceof HTMLElement&&L.target.closest("[data-drag-handle]")&&F(L)},children:[_.jsx("button",{onClick:L=>{L.preventDefault(),L.stopPropagation(),n(e)},className:"absolute top-2 right-2 p-1.5 hover:bg-gray-100 rounded-full transition-colors z-50",title:"Close panel",children:_.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-500",children:[_.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),_.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),_.jsx("div",{className:"flex absolute top-0 left-0 right-0 h-4 cursor-move","data-drag-handle":!0,onMouseDown:F,children:_.jsx("div",{className:"mx-auto p-1.5 select-none",children:_.jsxs("svg",{width:"20",height:"10",viewBox:"0 0 20 4",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-gray-400 pointer-events-none",children:[_.jsx("circle",{cx:"2",cy:"2",r:"1",fill:"currentColor"}),_.jsx("circle",{cx:"10",cy:"2",r:"1",fill:"currentColor"}),_.jsx("circle",{cx:"18",cy:"2",r:"1",fill:"currentColor"})]})})}),(re||t.type==="activity")&&_.jsxs("div",{className:yr("px-4 py-2 bg-gray-50 border-b",t.type==="activity"&&"pt-6"),children:[_.jsxs("div",{className:"flex items-center justify-between mb-2 pr-8",children:[_.jsx("div",{className:"flex items-center gap-2",children:re&&_.jsxs(_.Fragment,{children:[_.jsxs("svg",{className:"w-4 h-4 text-gray-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[_.jsx("rect",{x:"9",y:"3",width:"6",height:"6",rx:"1"}),_.jsx("rect",{x:"3",y:"15",width:"6",height:"6",rx:"1"}),_.jsx("rect",{x:"15",y:"15",width:"6",height:"6",rx:"1"}),_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3M6 15v-3h12v3"})]}),_.jsx("a",{href:re,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View in Temporal"})]})}),_.jsxs("div",{className:"flex flex-col items-end",children:[_.jsx("span",{className:"text-xs text-gray-500",children:t.namespace}),t.taskQueue&&_.jsx("span",{className:"text-xs text-gray-500",children:t.taskQueue.name})]})]}),_.jsxs("div",{className:"flex flex-col gap-1",children:[t.workflowType&&_.jsxs("span",{className:"text-xs text-gray-500",children:[_.jsx("span",{className:"font-bold",children:"Type:"})," ",_.jsx("span",{className:"font-bold",children:t.workflowType})]}),t.type==="activity"&&t.activityType&&_.jsxs("span",{className:"text-xs text-gray-500",children:[_.jsx("span",{className:"font-bold",children:"Type:"})," ",_.jsx("span",{className:"font-bold",children:t.activityType})]}),t.workflowId&&t.type!=="activity"&&_.jsx("span",{className:"text-xs text-gray-500 select-all font-mono",children:t.workflowId})]})]}),_.jsxs("div",{className:"border-b flex gap-1 px-2 pt-2 bg-gray-50",children:[_.jsx(ve,{tab:"io",label:"Input/Output",disabled:!J}),_.jsx(ve,{tab:"error",label:"Error",disabled:!Q}),_.jsx(ve,{tab:"time",label:"Time",disabled:!se}),_.jsx(ve,{tab:"common",label:"Common"})]}),_.jsx("div",{className:"overflow-y-auto",style:{height:"calc(100% - 116px)"},children:_.jsx("div",{className:"p-4",children:M()})}),_.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 cursor-se-resize",onMouseDown:ue,style:{background:"linear-gradient(135deg, transparent 50%, #CBD5E1 50%)"}})]})}var rD=Object.defineProperty,iD=(e,t,n)=>t in e?rD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Yf=(e,t,n)=>(iD(e,typeof t!="symbol"?t+"":t,n),n);let oD=class{constructor(){Yf(this,"current",this.detect()),Yf(this,"handoffState","pending"),Yf(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Ko=new oD;function cl(e){return Ko.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}function ll(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function eo(){let e=[],t={addEventListener(n,i,a,u){return n.addEventListener(i,a,u),t.add(()=>n.removeEventListener(i,a,u))},requestAnimationFrame(...n){let i=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(i))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let i=setTimeout(...n);return t.add(()=>clearTimeout(i))},microTask(...n){let i={current:!0};return ll(()=>{i.current&&n[0]()}),t.add(()=>{i.current=!1})},style(n,i,a){let u=n.style.getPropertyValue(i);return Object.assign(n.style,{[i]:a}),this.add(()=>{Object.assign(n.style,{[i]:u})})},group(n){let i=eo();return n(i),this.add(()=>i.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let i=e.indexOf(n);if(i>=0)for(let a of e.splice(i,1))a()}},dispose(){for(let n of e.splice(0))n()}};return t}function Nh(){let[e]=N.useState(eo);return N.useEffect(()=>()=>e.dispose(),[e]),e}let Ln=(e,t)=>{Ko.isServer?N.useEffect(e,t):N.useLayoutEffect(e,t)};function Jo(e){let t=N.useRef(e);return Ln(()=>{t.current=e},[e]),t}let Zt=function(e){let t=Jo(e);return ne.useCallback((...n)=>t.current(...n),[t])},aD=N.createContext(void 0);function sD(){return N.useContext(aD)}function Ad(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function Qi(e,t,...n){if(e in t){let a=t[e];return typeof a=="function"?a(...n):a}let i=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(a=>`"${a}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,Qi),i}var Wc=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Wc||{}),Xi=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Xi||{});function wr(){let e=cD();return N.useCallback(t=>uD({mergeRefs:e,...t}),[e])}function uD({ourProps:e,theirProps:t,slot:n,defaultTag:i,features:a,visible:u=!0,name:c,mergeRefs:d}){d=d??lD;let h=mv(t,e);if(u)return mc(h,n,i,c,d);let p=a??0;if(p&2){let{static:g=!1,...v}=h;if(g)return mc(v,n,i,c,d)}if(p&1){let{unmount:g=!0,...v}=h;return Qi(g?0:1,{0(){return null},1(){return mc({...v,hidden:!0,style:{display:"none"}},n,i,c,d)}})}return mc(h,n,i,c,d)}function mc(e,t={},n,i,a){let{as:u=n,children:c,refName:d="ref",...h}=Kf(e,["unmount","static"]),p=e.ref!==void 0?{[d]:e.ref}:{},g=typeof c=="function"?c(t):c;"className"in h&&h.className&&typeof h.className=="function"&&(h.className=h.className(t)),h["aria-labelledby"]&&h["aria-labelledby"]===h.id&&(h["aria-labelledby"]=void 0);let v={};if(t){let x=!1,b=[];for(let[C,A]of Object.entries(t))typeof A=="boolean"&&(x=!0),A===!0&&b.push(C.replace(/([A-Z])/g,R=>`-${R.toLowerCase()}`));if(x){v["data-headlessui-state"]=b.join(" ");for(let C of b)v[`data-${C}`]=""}}if(u===N.Fragment&&(Object.keys(Ro(h)).length>0||Object.keys(Ro(v)).length>0))if(!N.isValidElement(g)||Array.isArray(g)&&g.length>1){if(Object.keys(Ro(h)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${i} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Ro(h)).concat(Object.keys(Ro(v))).map(x=>`  - ${x}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(x=>`  - ${x}`).join(`
`)].join(`
`))}else{let x=g.props,b=x==null?void 0:x.className,C=typeof b=="function"?(...$)=>Ad(b(...$),h.className):Ad(b,h.className),A=C?{className:C}:{},R=mv(g.props,Ro(Kf(h,["ref"])));for(let $ in v)$ in R&&delete v[$];return N.cloneElement(g,Object.assign({},R,v,p,{ref:a(fD(g),p.ref)},A))}return N.createElement(u,Object.assign({},Kf(h,["ref"]),u!==N.Fragment&&p,u!==N.Fragment&&v),g)}function cD(){let e=N.useRef([]),t=N.useCallback(n=>{for(let i of e.current)i!=null&&(typeof i=="function"?i(n):i.current=n)},[]);return(...n)=>{if(!n.every(i=>i==null))return e.current=n,t}}function lD(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function mv(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let i of e)for(let a in i)a.startsWith("on")&&typeof i[a]=="function"?(n[a]!=null||(n[a]=[]),n[a].push(i[a])):t[a]=i[a];if(t.disabled||t["aria-disabled"])for(let i in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(i)&&(n[i]=[a=>{var u;return(u=a==null?void 0:a.preventDefault)==null?void 0:u.call(a)}]);for(let i in n)Object.assign(t,{[i](a,...u){let c=n[i];for(let d of c){if((a instanceof Event||(a==null?void 0:a.nativeEvent)instanceof Event)&&a.defaultPrevented)return;d(a,...u)}}});return t}function Vn(e){var t;return Object.assign(N.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function Ro(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function Kf(e,t=[]){let n=Object.assign({},e);for(let i of t)i in n&&delete n[i];return n}function fD(e){return ne.version.split(".")[0]>="19"?e.props.ref:e.ref}let dD="span";var Bc=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Bc||{});function hD(e,t){var n;let{features:i=1,...a}=e,u={ref:t,"aria-hidden":(i&2)===2?!0:(n=a["aria-hidden"])!=null?n:void 0,hidden:(i&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(i&4)===4&&(i&2)!==2&&{display:"none"}}};return wr()({ourProps:u,theirProps:a,slot:{},defaultTag:dD,name:"Hidden"})}let Dd=Vn(hD),gv=Symbol();function pD(e,t=!0){return Object.assign(e,{[gv]:t})}function ti(...e){let t=N.useRef(e);N.useEffect(()=>{t.current=e},[e]);let n=Zt(i=>{for(let a of t.current)a!=null&&(typeof a=="function"?a(i):a.current=i)});return e.every(i=>i==null||(i==null?void 0:i[gv]))?void 0:n}let kh=N.createContext(null);kh.displayName="DescriptionContext";function yv(){let e=N.useContext(kh);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,yv),t}return e}function mD(){let[e,t]=N.useState([]);return[e.length>0?e.join(" "):void 0,N.useMemo(()=>function(n){let i=Zt(u=>(t(c=>[...c,u]),()=>t(c=>{let d=c.slice(),h=d.indexOf(u);return h!==-1&&d.splice(h,1),d}))),a=N.useMemo(()=>({register:i,slot:n.slot,name:n.name,props:n.props,value:n.value}),[i,n.slot,n.name,n.props,n.value]);return ne.createElement(kh.Provider,{value:a},n.children)},[t])]}let gD="p";function yD(e,t){let n=N.useId(),i=sD(),{id:a=`headlessui-description-${n}`,...u}=e,c=yv(),d=ti(t);Ln(()=>c.register(a),[a,c.register]);let h=i||!1,p=N.useMemo(()=>({...c.slot,disabled:h}),[c.slot,h]),g={ref:d,...c.props,id:a};return wr()({ourProps:g,theirProps:u,slot:p,defaultTag:gD,name:c.name||"Description"})}let vD=Vn(yD),wD=Object.assign(vD,{});var vv=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(vv||{});let xD=N.createContext(()=>{});function bD({value:e,children:t}){return ne.createElement(xD.Provider,{value:e},t)}let _D=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};function wv(e,t){let n=e(),i=new Set;return{getSnapshot(){return n},subscribe(a){return i.add(a),()=>i.delete(a)},dispatch(a,...u){let c=t[a].call(n,...u);c&&(n=c,i.forEach(d=>d()))}}}function xv(e){return N.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}let SD=new _D(()=>wv(()=>[],{ADD(e){return this.includes(e)?this:[...this,e]},REMOVE(e){let t=this.indexOf(e);if(t===-1)return this;let n=this.slice();return n.splice(t,1),n}}));function Ua(e,t){let n=SD.get(t),i=N.useId(),a=xv(n);if(Ln(()=>{if(e)return n.dispatch("ADD",i),()=>n.dispatch("REMOVE",i)},[n,e]),!e)return!1;let u=a.indexOf(i),c=a.length;return u===-1&&(u=c,c+=1),u===c-1}let Id=new Map,qs=new Map;function Rg(e){var t;let n=(t=qs.get(e))!=null?t:0;return qs.set(e,n+1),n!==0?()=>$g(e):(Id.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>$g(e))}function $g(e){var t;let n=(t=qs.get(e))!=null?t:1;if(n===1?qs.delete(e):qs.set(e,n-1),n!==1)return;let i=Id.get(e);i&&(i["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",i["aria-hidden"]),e.inert=i.inert,Id.delete(e))}function ED(e,{allowed:t,disallowed:n}={}){let i=Ua(e,"inert-others");Ln(()=>{var a,u;if(!i)return;let c=eo();for(let h of(a=n==null?void 0:n())!=null?a:[])h&&c.add(Rg(h));let d=(u=t==null?void 0:t())!=null?u:[];for(let h of d){if(!h)continue;let p=cl(h);if(!p)continue;let g=h.parentElement;for(;g&&g!==p.body;){for(let v of g.children)d.some(x=>v.contains(x))||c.add(Rg(v));g=g.parentElement}}return c.dispose},[i,t,n])}function ND(e,t,n){let i=Jo(a=>{let u=a.getBoundingClientRect();u.x===0&&u.y===0&&u.width===0&&u.height===0&&n()});N.useEffect(()=>{if(!e)return;let a=t===null?null:t instanceof HTMLElement?t:t.current;if(!a)return;let u=eo();if(typeof ResizeObserver<"u"){let c=new ResizeObserver(()=>i.current(a));c.observe(a),u.add(()=>c.disconnect())}if(typeof IntersectionObserver<"u"){let c=new IntersectionObserver(()=>i.current(a));c.observe(a),u.add(()=>c.disconnect())}return()=>u.dispose()},[t,i,e])}let zc=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),kD=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var yi=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(yi||{}),Pd=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Pd||{}),TD=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(TD||{});function CD(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(zc)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function OD(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(kD)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var bv=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(bv||{});function AD(e,t=0){var n;return e===((n=cl(e))==null?void 0:n.body)?!1:Qi(t,{0(){return e.matches(zc)},1(){let i=e;for(;i!==null;){if(i.matches(zc))return!0;i=i.parentElement}return!1}})}var DD=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(DD||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function xi(e){e==null||e.focus({preventScroll:!0})}let ID=["textarea","input"].join(",");function PD(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,ID))!=null?n:!1}function MD(e,t=n=>n){return e.slice().sort((n,i)=>{let a=t(n),u=t(i);if(a===null||u===null)return 0;let c=a.compareDocumentPosition(u);return c&Node.DOCUMENT_POSITION_FOLLOWING?-1:c&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Ys(e,t,{sorted:n=!0,relativeTo:i=null,skipElements:a=[]}={}){let u=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,c=Array.isArray(e)?n?MD(e):e:t&64?OD(e):CD(e);a.length>0&&c.length>1&&(c=c.filter(b=>!a.some(C=>C!=null&&"current"in C?(C==null?void 0:C.current)===b:C===b))),i=i??u.activeElement;let d=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),h=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,c.indexOf(i))-1;if(t&4)return Math.max(0,c.indexOf(i))+1;if(t&8)return c.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),p=t&32?{preventScroll:!0}:{},g=0,v=c.length,x;do{if(g>=v||g+v<=0)return 0;let b=h+g;if(t&16)b=(b+v)%v;else{if(b<0)return 3;if(b>=v)return 1}x=c[b],x==null||x.focus(p),g+=d}while(x!==u.activeElement);return t&6&&PD(x)&&x.select(),2}function _v(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function RD(){return/Android/gi.test(window.navigator.userAgent)}function $D(){return _v()||RD()}function Ms(e,t,n,i){let a=Jo(n);N.useEffect(()=>{if(!e)return;function u(c){a.current(c)}return document.addEventListener(t,u,i),()=>document.removeEventListener(t,u,i)},[e,t,i])}function Sv(e,t,n,i){let a=Jo(n);N.useEffect(()=>{if(!e)return;function u(c){a.current(c)}return window.addEventListener(t,u,i),()=>window.removeEventListener(t,u,i)},[e,t,i])}const jg=30;function jD(e,t,n){let i=Ua(e,"outside-click"),a=Jo(n),u=N.useCallback(function(h,p){if(h.defaultPrevented)return;let g=p(h);if(g===null||!g.getRootNode().contains(g)||!g.isConnected)return;let v=function x(b){return typeof b=="function"?x(b()):Array.isArray(b)||b instanceof Set?b:[b]}(t);for(let x of v)if(x!==null&&(x.contains(g)||h.composed&&h.composedPath().includes(x)))return;return!AD(g,bv.Loose)&&g.tabIndex!==-1&&h.preventDefault(),a.current(h,g)},[a,t]),c=N.useRef(null);Ms(i,"pointerdown",h=>{var p,g;c.current=((g=(p=h.composedPath)==null?void 0:p.call(h))==null?void 0:g[0])||h.target},!0),Ms(i,"mousedown",h=>{var p,g;c.current=((g=(p=h.composedPath)==null?void 0:p.call(h))==null?void 0:g[0])||h.target},!0),Ms(i,"click",h=>{$D()||c.current&&(u(h,()=>c.current),c.current=null)},!0);let d=N.useRef({x:0,y:0});Ms(i,"touchstart",h=>{d.current.x=h.touches[0].clientX,d.current.y=h.touches[0].clientY},!0),Ms(i,"touchend",h=>{let p={x:h.changedTouches[0].clientX,y:h.changedTouches[0].clientY};if(!(Math.abs(p.x-d.current.x)>=jg||Math.abs(p.y-d.current.y)>=jg))return u(h,()=>h.target instanceof HTMLElement?h.target:null)},!0),Sv(i,"blur",h=>u(h,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function fu(...e){return N.useMemo(()=>cl(...e),[...e])}function Ev(e,t,n,i){let a=Jo(n);N.useEffect(()=>{e=e??window;function u(c){a.current(c)}return e.addEventListener(t,u,i),()=>e.removeEventListener(t,u,i)},[e,t,i])}function LD(){let e;return{before({doc:t}){var n;let i=t.documentElement,a=(n=t.defaultView)!=null?n:window;e=Math.max(0,a.innerWidth-i.clientWidth)},after({doc:t,d:n}){let i=t.documentElement,a=Math.max(0,i.clientWidth-i.offsetWidth),u=Math.max(0,e-a);n.style(i,"paddingRight",`${u}px`)}}}function FD(){return _v()?{before({doc:e,d:t,meta:n}){function i(a){return n.containers.flatMap(u=>u()).some(u=>u.contains(a))}t.microTask(()=>{var a;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let d=eo();d.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>d.dispose()))}let u=(a=window.scrollY)!=null?a:window.pageYOffset,c=null;t.addEventListener(e,"click",d=>{if(d.target instanceof HTMLElement)try{let h=d.target.closest("a");if(!h)return;let{hash:p}=new URL(h.href),g=e.querySelector(p);g&&!i(g)&&(c=g)}catch{}},!0),t.addEventListener(e,"touchstart",d=>{if(d.target instanceof HTMLElement)if(i(d.target)){let h=d.target;for(;h.parentElement&&i(h.parentElement);)h=h.parentElement;t.style(h,"overscrollBehavior","contain")}else t.style(d.target,"touchAction","none")}),t.addEventListener(e,"touchmove",d=>{if(d.target instanceof HTMLElement){if(d.target.tagName==="INPUT")return;if(i(d.target)){let h=d.target;for(;h.parentElement&&h.dataset.headlessuiPortal!==""&&!(h.scrollHeight>h.clientHeight||h.scrollWidth>h.clientWidth);)h=h.parentElement;h.dataset.headlessuiPortal===""&&d.preventDefault()}else d.preventDefault()}},{passive:!1}),t.add(()=>{var d;let h=(d=window.scrollY)!=null?d:window.pageYOffset;u!==h&&window.scrollTo(0,u),c&&c.isConnected&&(c.scrollIntoView({block:"nearest"}),c=null)})})}}:{}}function WD(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function BD(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let zo=wv(()=>new Map,{PUSH(e,t){var n;let i=(n=this.get(e))!=null?n:{doc:e,count:0,d:eo(),meta:new Set};return i.count++,i.meta.add(t),this.set(e,i),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let i={doc:e,d:t,meta:BD(n)},a=[FD(),LD(),WD()];a.forEach(({before:u})=>u==null?void 0:u(i)),a.forEach(({after:u})=>u==null?void 0:u(i))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});zo.subscribe(()=>{let e=zo.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let i=t.get(n.doc)==="hidden",a=n.count!==0;(a&&!i||!a&&i)&&zo.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&zo.dispatch("TEARDOWN",n)}});function zD(e,t,n=()=>({containers:[]})){let i=xv(zo),a=t?i.get(t):void 0,u=a?a.count>0:!1;return Ln(()=>{if(!(!t||!e))return zo.dispatch("PUSH",t,n),()=>zo.dispatch("POP",t,n)},[e,t]),u}function HD(e,t,n=()=>[document.body]){let i=Ua(e,"scroll-lock");zD(i,t,a=>{var u;return{containers:[...(u=a.containers)!=null?u:[],n]}})}function qD(e=0){let[t,n]=N.useState(e),i=N.useCallback(h=>n(h),[t]),a=N.useCallback(h=>n(p=>p|h),[t]),u=N.useCallback(h=>(t&h)===h,[t]),c=N.useCallback(h=>n(p=>p&~h),[n]),d=N.useCallback(h=>n(p=>p^h),[n]);return{flags:t,setFlag:i,addFlag:a,hasFlag:u,removeFlag:c,toggleFlag:d}}var YD={},Lg,Fg;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((Lg=process==null?void 0:YD)==null?void 0:Lg.NODE_ENV)==="test"&&typeof((Fg=Element==null?void 0:Element.prototype)==null?void 0:Fg.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var KD=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(KD||{});function UD(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function VD(e,t,n,i){let[a,u]=N.useState(n),{hasFlag:c,addFlag:d,removeFlag:h}=qD(e&&a?3:0),p=N.useRef(!1),g=N.useRef(!1),v=Nh();return Ln(()=>{var x;if(e){if(n&&u(!0),!t){n&&d(3);return}return(x=i==null?void 0:i.start)==null||x.call(i,n),GD(t,{inFlight:p,prepare(){g.current?g.current=!1:g.current=p.current,p.current=!0,!g.current&&(n?(d(3),h(4)):(d(4),h(2)))},run(){g.current?n?(h(3),d(4)):(h(4),d(3)):n?h(1):d(1)},done(){var b;g.current&&typeof t.getAnimations=="function"&&t.getAnimations().length>0||(p.current=!1,h(7),n||u(!1),(b=i==null?void 0:i.end)==null||b.call(i,n))}})}},[e,n,t,v]),e?[a,{closed:c(1),enter:c(2),leave:c(4),transition:c(2)||c(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function GD(e,{prepare:t,run:n,done:i,inFlight:a}){let u=eo();return ZD(e,{prepare:t,inFlight:a}),u.nextFrame(()=>{n(),u.requestAnimationFrame(()=>{u.add(XD(e,i))})}),u.dispose}function XD(e,t){var n,i;let a=eo();if(!e)return a.dispose;let u=!1;a.add(()=>{u=!0});let c=(i=(n=e.getAnimations)==null?void 0:n.call(e).filter(d=>d instanceof CSSTransition))!=null?i:[];return c.length===0?(t(),a.dispose):(Promise.allSettled(c.map(d=>d.finished)).then(()=>{u||t()}),a.dispose)}function ZD(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let i=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=i}function Th(e,t){let n=N.useRef([]),i=Zt(e);N.useEffect(()=>{let a=[...n.current];for(let[u,c]of t.entries())if(n.current[u]!==c){let d=i(t,a);return n.current=t,d}},[i,...t])}let fl=N.createContext(null);fl.displayName="OpenClosedContext";var jr=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(jr||{});function dl(){return N.useContext(fl)}function QD({value:e,children:t}){return ne.createElement(fl.Provider,{value:e},t)}function JD({children:e}){return ne.createElement(fl.Provider,{value:null},e)}function eI(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Vi=[];eI(()=>{function e(t){if(!(t.target instanceof HTMLElement)||t.target===document.body||Vi[0]===t.target)return;let n=t.target;n=n.closest(zc),Vi.unshift(n??t.target),Vi=Vi.filter(i=>i!=null&&i.isConnected),Vi.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function Nv(e){let t=Zt(e),n=N.useRef(!1);N.useEffect(()=>(n.current=!1,()=>{n.current=!0,ll(()=>{n.current&&t()})}),[t])}function tI(){let e=typeof document>"u";return"useSyncExternalStore"in Cm?(t=>t.useSyncExternalStore)(Cm)(()=>()=>{},()=>!1,()=>!e):!1}function du(){let e=tI(),[t,n]=N.useState(Ko.isHandoffComplete);return t&&Ko.isHandoffComplete===!1&&n(!1),N.useEffect(()=>{t!==!0&&n(!0)},[t]),N.useEffect(()=>Ko.handoff(),[]),e?!1:t}let kv=N.createContext(!1);function nI(){return N.useContext(kv)}function Wg(e){return ne.createElement(kv.Provider,{value:e.force},e.children)}function rI(e){let t=nI(),n=N.useContext(Cv),i=fu(e),[a,u]=N.useState(()=>{var c;if(!t&&n!==null)return(c=n.current)!=null?c:null;if(Ko.isServer)return null;let d=i==null?void 0:i.getElementById("headlessui-portal-root");if(d)return d;if(i===null)return null;let h=i.createElement("div");return h.setAttribute("id","headlessui-portal-root"),i.body.appendChild(h)});return N.useEffect(()=>{a!==null&&(i!=null&&i.body.contains(a)||i==null||i.body.appendChild(a))},[a,i]),N.useEffect(()=>{t||n!==null&&u(n.current)},[n,u,t]),a}let Tv=N.Fragment,iI=Vn(function(e,t){let n=e,i=N.useRef(null),a=ti(pD(v=>{i.current=v}),t),u=fu(i),c=rI(i),[d]=N.useState(()=>{var v;return Ko.isServer?null:(v=u==null?void 0:u.createElement("div"))!=null?v:null}),h=N.useContext(Md),p=du();Ln(()=>{!c||!d||c.contains(d)||(d.setAttribute("data-headlessui-portal",""),c.appendChild(d))},[c,d]),Ln(()=>{if(d&&h)return h.register(d)},[h,d]),Nv(()=>{var v;!c||!d||(d instanceof Node&&c.contains(d)&&c.removeChild(d),c.childNodes.length<=0&&((v=c.parentElement)==null||v.removeChild(c)))});let g=wr();return p?!c||!d?null:f0.createPortal(g({ourProps:{ref:a},theirProps:n,slot:{},defaultTag:Tv,name:"Portal"}),d):null});function oI(e,t){let n=ti(t),{enabled:i=!0,...a}=e,u=wr();return i?ne.createElement(iI,{...a,ref:n}):u({ourProps:{ref:n},theirProps:a,slot:{},defaultTag:Tv,name:"Portal"})}let aI=N.Fragment,Cv=N.createContext(null);function sI(e,t){let{target:n,...i}=e,a={ref:ti(t)},u=wr();return ne.createElement(Cv.Provider,{value:n},u({ourProps:a,theirProps:i,defaultTag:aI,name:"Popover.Group"}))}let Md=N.createContext(null);function uI(){let e=N.useContext(Md),t=N.useRef([]),n=Zt(u=>(t.current.push(u),e&&e.register(u),()=>i(u))),i=Zt(u=>{let c=t.current.indexOf(u);c!==-1&&t.current.splice(c,1),e&&e.unregister(u)}),a=N.useMemo(()=>({register:n,unregister:i,portals:t}),[n,i,t]);return[t,N.useMemo(()=>function({children:u}){return ne.createElement(Md.Provider,{value:a},u)},[a])]}let cI=Vn(oI),Ov=Vn(sI),lI=Object.assign(cI,{Group:Ov});function fI(e,t=typeof document<"u"?document.defaultView:null,n){let i=Ua(e,"escape");Ev(t,"keydown",a=>{i&&(a.defaultPrevented||a.key===vv.Escape&&n(a))})}function dI(){var e;let[t]=N.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,i]=N.useState((e=t==null?void 0:t.matches)!=null?e:!1);return Ln(()=>{if(!t)return;function a(u){i(u.matches)}return t.addEventListener("change",a),()=>t.removeEventListener("change",a)},[t]),n}function hI({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let i=fu(n),a=Zt(()=>{var u,c;let d=[];for(let h of e)h!==null&&(h instanceof HTMLElement?d.push(h):"current"in h&&h.current instanceof HTMLElement&&d.push(h.current));if(t!=null&&t.current)for(let h of t.current)d.push(h);for(let h of(u=i==null?void 0:i.querySelectorAll("html > *, body > *"))!=null?u:[])h!==document.body&&h!==document.head&&h instanceof HTMLElement&&h.id!=="headlessui-portal-root"&&(n&&(h.contains(n)||h.contains((c=n==null?void 0:n.getRootNode())==null?void 0:c.host))||d.some(p=>h.contains(p))||d.push(h));return d});return{resolveContainers:a,contains:Zt(u=>a().some(c=>c.contains(u)))}}let Av=N.createContext(null);function Bg({children:e,node:t}){let[n,i]=N.useState(null),a=Dv(t??n);return ne.createElement(Av.Provider,{value:a},e,a===null&&ne.createElement(Dd,{features:Bc.Hidden,ref:u=>{var c,d;if(u){for(let h of(d=(c=cl(u))==null?void 0:c.querySelectorAll("html > *, body > *"))!=null?d:[])if(h!==document.body&&h!==document.head&&h instanceof HTMLElement&&h!=null&&h.contains(u)){i(h);break}}}}))}function Dv(e=null){var t;return(t=N.useContext(Av))!=null?t:e}function Ch(){let e=N.useRef(!1);return Ln(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var Bs=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Bs||{});function pI(){let e=N.useRef(0);return Sv(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function Iv(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)n.current instanceof HTMLElement&&t.add(n.current);return t}let mI="div";var jo=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(jo||{});function gI(e,t){let n=N.useRef(null),i=ti(n,t),{initialFocus:a,initialFocusFallback:u,containers:c,features:d=15,...h}=e;du()||(d=0);let p=fu(n);xI(d,{ownerDocument:p});let g=bI(d,{ownerDocument:p,container:n,initialFocus:a,initialFocusFallback:u});_I(d,{ownerDocument:p,container:n,containers:c,previousActiveElement:g});let v=pI(),x=Zt(q=>{let te=n.current;te&&(F=>F())(()=>{Qi(v.current,{[Bs.Forwards]:()=>{Ys(te,yi.First,{skipElements:[q.relatedTarget,u]})},[Bs.Backwards]:()=>{Ys(te,yi.Last,{skipElements:[q.relatedTarget,u]})}})})}),b=Ua(!!(d&2),"focus-trap#tab-lock"),C=Nh(),A=N.useRef(!1),R={ref:i,onKeyDown(q){q.key=="Tab"&&(A.current=!0,C.requestAnimationFrame(()=>{A.current=!1}))},onBlur(q){if(!(d&4))return;let te=Iv(c);n.current instanceof HTMLElement&&te.add(n.current);let F=q.relatedTarget;F instanceof HTMLElement&&F.dataset.headlessuiFocusGuard!=="true"&&(Pv(te,F)||(A.current?Ys(n.current,Qi(v.current,{[Bs.Forwards]:()=>yi.Next,[Bs.Backwards]:()=>yi.Previous})|yi.WrapAround,{relativeTo:q.target}):q.target instanceof HTMLElement&&xi(q.target)))}},$=wr();return ne.createElement(ne.Fragment,null,b&&ne.createElement(Dd,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:x,features:Bc.Focusable}),$({ourProps:R,theirProps:h,defaultTag:mI,name:"FocusTrap"}),b&&ne.createElement(Dd,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:x,features:Bc.Focusable}))}let yI=Vn(gI),vI=Object.assign(yI,{features:jo});function wI(e=!0){let t=N.useRef(Vi.slice());return Th(([n],[i])=>{i===!0&&n===!1&&ll(()=>{t.current.splice(0)}),i===!1&&n===!0&&(t.current=Vi.slice())},[e,Vi,t]),Zt(()=>{var n;return(n=t.current.find(i=>i!=null&&i.isConnected))!=null?n:null})}function xI(e,{ownerDocument:t}){let n=!!(e&8),i=wI(n);Th(()=>{n||(t==null?void 0:t.activeElement)===(t==null?void 0:t.body)&&xi(i())},[n]),Nv(()=>{n&&xi(i())})}function bI(e,{ownerDocument:t,container:n,initialFocus:i,initialFocusFallback:a}){let u=N.useRef(null),c=Ua(!!(e&1),"focus-trap#initial-focus"),d=Ch();return Th(()=>{if(e===0)return;if(!c){a!=null&&a.current&&xi(a.current);return}let h=n.current;h&&ll(()=>{if(!d.current)return;let p=t==null?void 0:t.activeElement;if(i!=null&&i.current){if((i==null?void 0:i.current)===p){u.current=p;return}}else if(h.contains(p)){u.current=p;return}if(i!=null&&i.current)xi(i.current);else{if(e&16){if(Ys(h,yi.First|yi.AutoFocus)!==Pd.Error)return}else if(Ys(h,yi.First)!==Pd.Error)return;if(a!=null&&a.current&&(xi(a.current),(t==null?void 0:t.activeElement)===a.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}u.current=t==null?void 0:t.activeElement})},[a,c,e]),u}function _I(e,{ownerDocument:t,container:n,containers:i,previousActiveElement:a}){let u=Ch(),c=!!(e&4);Ev(t==null?void 0:t.defaultView,"focus",d=>{if(!c||!u.current)return;let h=Iv(i);n.current instanceof HTMLElement&&h.add(n.current);let p=a.current;if(!p)return;let g=d.target;g&&g instanceof HTMLElement?Pv(h,g)?(a.current=g,xi(g)):(d.preventDefault(),d.stopPropagation(),xi(p)):xi(a.current)},!0)}function Pv(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function Mv(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||((t=e.as)!=null?t:$v)!==N.Fragment||ne.Children.count(e.children)===1}let hl=N.createContext(null);hl.displayName="TransitionContext";var SI=(e=>(e.Visible="visible",e.Hidden="hidden",e))(SI||{});function EI(){let e=N.useContext(hl);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function NI(){let e=N.useContext(pl);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let pl=N.createContext(null);pl.displayName="NestingContext";function ml(e){return"children"in e?ml(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function Rv(e,t){let n=Jo(e),i=N.useRef([]),a=Ch(),u=Nh(),c=Zt((b,C=Xi.Hidden)=>{let A=i.current.findIndex(({el:R})=>R===b);A!==-1&&(Qi(C,{[Xi.Unmount](){i.current.splice(A,1)},[Xi.Hidden](){i.current[A].state="hidden"}}),u.microTask(()=>{var R;!ml(i)&&a.current&&((R=n.current)==null||R.call(n))}))}),d=Zt(b=>{let C=i.current.find(({el:A})=>A===b);return C?C.state!=="visible"&&(C.state="visible"):i.current.push({el:b,state:"visible"}),()=>c(b,Xi.Unmount)}),h=N.useRef([]),p=N.useRef(Promise.resolve()),g=N.useRef({enter:[],leave:[]}),v=Zt((b,C,A)=>{h.current.splice(0),t&&(t.chains.current[C]=t.chains.current[C].filter(([R])=>R!==b)),t==null||t.chains.current[C].push([b,new Promise(R=>{h.current.push(R)})]),t==null||t.chains.current[C].push([b,new Promise(R=>{Promise.all(g.current[C].map(([$,q])=>q)).then(()=>R())})]),C==="enter"?p.current=p.current.then(()=>t==null?void 0:t.wait.current).then(()=>A(C)):A(C)}),x=Zt((b,C,A)=>{Promise.all(g.current[C].splice(0).map(([R,$])=>$)).then(()=>{var R;(R=h.current.shift())==null||R()}).then(()=>A(C))});return N.useMemo(()=>({children:i,register:d,unregister:c,onStart:v,onStop:x,wait:p,chains:g}),[d,c,i,v,x,g,p])}let $v=N.Fragment,jv=Wc.RenderStrategy;function kI(e,t){var n,i;let{transition:a=!0,beforeEnter:u,afterEnter:c,beforeLeave:d,afterLeave:h,enter:p,enterFrom:g,enterTo:v,entered:x,leave:b,leaveFrom:C,leaveTo:A,...R}=e,[$,q]=N.useState(null),te=N.useRef(null),F=Mv(e),ue=ti(...F?[te,t,q]:t===null?[]:[t]),ce=(n=R.unmount)==null||n?Xi.Unmount:Xi.Hidden,{show:Y,appear:Q,initial:se}=EI(),[J,U]=N.useState(Y?"visible":"hidden"),re=NI(),{register:ve,unregister:M}=re;Ln(()=>ve(te),[ve,te]),Ln(()=>{if(ce===Xi.Hidden&&te.current){if(Y&&J!=="visible"){U("visible");return}return Qi(J,{hidden:()=>M(te),visible:()=>ve(te)})}},[J,te,ve,M,Y,ce]);let ae=du();Ln(()=>{if(F&&ae&&J==="visible"&&te.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[te,J,ae,F]);let L=se&&!Q,pe=Q&&Y&&se,oe=N.useRef(!1),G=Rv(()=>{oe.current||(U("hidden"),M(te))},re),de=Zt(Ke=>{oe.current=!0;let Ve=Ke?"enter":"leave";G.onStart(te,Ve,Ee=>{Ee==="enter"?u==null||u():Ee==="leave"&&(d==null||d())})}),ge=Zt(Ke=>{let Ve=Ke?"enter":"leave";oe.current=!1,G.onStop(te,Ve,Ee=>{Ee==="enter"?c==null||c():Ee==="leave"&&(h==null||h())}),Ve==="leave"&&!ml(G)&&(U("hidden"),M(te))});N.useEffect(()=>{F&&a||(de(Y),ge(Y))},[Y,F,a]);let Se=!(!a||!F||!ae||L),[,Te]=VD(Se,$,Y,{start:de,end:ge}),Re=Ro({ref:ue,className:((i=Ad(R.className,pe&&p,pe&&g,Te.enter&&p,Te.enter&&Te.closed&&g,Te.enter&&!Te.closed&&v,Te.leave&&b,Te.leave&&!Te.closed&&C,Te.leave&&Te.closed&&A,!Te.transition&&Y&&x))==null?void 0:i.trim())||void 0,...UD(Te)}),Me=0;J==="visible"&&(Me|=jr.Open),J==="hidden"&&(Me|=jr.Closed),Te.enter&&(Me|=jr.Opening),Te.leave&&(Me|=jr.Closing);let Be=wr();return ne.createElement(pl.Provider,{value:G},ne.createElement(QD,{value:Me},Be({ourProps:Re,theirProps:R,defaultTag:$v,features:jv,visible:J==="visible",name:"Transition.Child"})))}function TI(e,t){let{show:n,appear:i=!1,unmount:a=!0,...u}=e,c=N.useRef(null),d=Mv(e),h=ti(...d?[c,t]:t===null?[]:[t]);du();let p=dl();if(n===void 0&&p!==null&&(n=(p&jr.Open)===jr.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[g,v]=N.useState(n?"visible":"hidden"),x=Rv(()=>{n||v("hidden")}),[b,C]=N.useState(!0),A=N.useRef([n]);Ln(()=>{b!==!1&&A.current[A.current.length-1]!==n&&(A.current.push(n),C(!1))},[A,n]);let R=N.useMemo(()=>({show:n,appear:i,initial:b}),[n,i,b]);Ln(()=>{n?v("visible"):!ml(x)&&c.current!==null&&v("hidden")},[n,x]);let $={unmount:a},q=Zt(()=>{var ue;b&&C(!1),(ue=e.beforeEnter)==null||ue.call(e)}),te=Zt(()=>{var ue;b&&C(!1),(ue=e.beforeLeave)==null||ue.call(e)}),F=wr();return ne.createElement(pl.Provider,{value:x},ne.createElement(hl.Provider,{value:R},F({ourProps:{...$,as:N.Fragment,children:ne.createElement(Lv,{ref:h,...$,...u,beforeEnter:q,beforeLeave:te})},theirProps:{},defaultTag:N.Fragment,features:jv,visible:g==="visible",name:"Transition"})))}function CI(e,t){let n=N.useContext(hl)!==null,i=dl()!==null;return ne.createElement(ne.Fragment,null,!n&&i?ne.createElement(Rd,{ref:t,...e}):ne.createElement(Lv,{ref:t,...e}))}let Rd=Vn(TI),Lv=Vn(kI),Oh=Vn(CI),OI=Object.assign(Rd,{Child:Oh,Root:Rd});var AI=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(AI||{}),DI=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(DI||{});let II={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},Ah=N.createContext(null);Ah.displayName="DialogContext";function gl(e){let t=N.useContext(Ah);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,gl),n}return t}function PI(e,t){return Qi(t.type,II,e,t)}let zg=Vn(function(e,t){let n=N.useId(),{id:i=`headlessui-dialog-${n}`,open:a,onClose:u,initialFocus:c,role:d="dialog",autoFocus:h=!0,__demoMode:p=!1,unmount:g=!1,...v}=e,x=N.useRef(!1);d=function(){return d==="dialog"||d==="alertdialog"?d:(x.current||(x.current=!0,console.warn(`Invalid role [${d}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let b=dl();a===void 0&&b!==null&&(a=(b&jr.Open)===jr.Open);let C=N.useRef(null),A=ti(C,t),R=fu(C),$=a?0:1,[q,te]=N.useReducer(PI,{titleId:null,descriptionId:null,panelRef:N.createRef()}),F=Zt(()=>u(!1)),ue=Zt(ge=>te({type:0,id:ge})),ce=du()?$===0:!1,[Y,Q]=uI(),se={get current(){var ge;return(ge=q.panelRef.current)!=null?ge:C.current}},J=Dv(),{resolveContainers:U}=hI({mainTreeNode:J,portals:Y,defaultContainers:[se]}),re=b!==null?(b&jr.Closing)===jr.Closing:!1;ED(p||re?!1:ce,{allowed:Zt(()=>{var ge,Se;return[(Se=(ge=C.current)==null?void 0:ge.closest("[data-headlessui-portal]"))!=null?Se:null]}),disallowed:Zt(()=>{var ge;return[(ge=J==null?void 0:J.closest("body > *:not(#headlessui-portal-root)"))!=null?ge:null]})}),jD(ce,U,ge=>{ge.preventDefault(),F()}),fI(ce,R==null?void 0:R.defaultView,ge=>{ge.preventDefault(),ge.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),F()}),HD(p||re?!1:ce,R,U),ND(ce,C,F);let[ve,M]=mD(),ae=N.useMemo(()=>[{dialogState:$,close:F,setTitleId:ue,unmount:g},q],[$,q,F,ue,g]),L=N.useMemo(()=>({open:$===0}),[$]),pe={ref:A,id:i,role:d,tabIndex:-1,"aria-modal":p?void 0:$===0?!0:void 0,"aria-labelledby":q.titleId,"aria-describedby":ve,unmount:g},oe=!dI(),G=jo.None;ce&&!p&&(G|=jo.RestoreFocus,G|=jo.TabLock,h&&(G|=jo.AutoFocus),oe&&(G|=jo.InitialFocus));let de=wr();return ne.createElement(JD,null,ne.createElement(Wg,{force:!0},ne.createElement(lI,null,ne.createElement(Ah.Provider,{value:ae},ne.createElement(Ov,{target:C},ne.createElement(Wg,{force:!1},ne.createElement(M,{slot:L},ne.createElement(Q,null,ne.createElement(vI,{initialFocus:c,initialFocusFallback:C,containers:U,features:G},ne.createElement(bD,{value:F},de({ourProps:pe,theirProps:v,slot:L,defaultTag:MI,features:RI,visible:$===0,name:"Dialog"})))))))))))}),MI="div",RI=Wc.RenderStrategy|Wc.Static;function $I(e,t){let{transition:n=!1,open:i,...a}=e,u=dl(),c=e.hasOwnProperty("open")||u!==null,d=e.hasOwnProperty("onClose");if(!c&&!d)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!c)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!d)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!u&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(i!==void 0||n)&&!a.static?ne.createElement(Bg,null,ne.createElement(OI,{show:i,transition:n,unmount:a.unmount},ne.createElement(zg,{ref:t,...a}))):ne.createElement(Bg,null,ne.createElement(zg,{ref:t,open:i,...a}))}let jI="div";function LI(e,t){let n=N.useId(),{id:i=`headlessui-dialog-panel-${n}`,transition:a=!1,...u}=e,[{dialogState:c,unmount:d},h]=gl("Dialog.Panel"),p=ti(t,h.panelRef),g=N.useMemo(()=>({open:c===0}),[c]),v=Zt(R=>{R.stopPropagation()}),x={ref:p,id:i,onClick:v},b=a?Oh:N.Fragment,C=a?{unmount:d}:{},A=wr();return ne.createElement(b,{...C},A({ourProps:x,theirProps:u,slot:g,defaultTag:jI,name:"Dialog.Panel"}))}let FI="div";function WI(e,t){let{transition:n=!1,...i}=e,[{dialogState:a,unmount:u}]=gl("Dialog.Backdrop"),c=N.useMemo(()=>({open:a===0}),[a]),d={ref:t,"aria-hidden":!0},h=n?Oh:N.Fragment,p=n?{unmount:u}:{},g=wr();return ne.createElement(h,{...p},g({ourProps:d,theirProps:i,slot:c,defaultTag:FI,name:"Dialog.Backdrop"}))}let BI="h2";function zI(e,t){let n=N.useId(),{id:i=`headlessui-dialog-title-${n}`,...a}=e,[{dialogState:u,setTitleId:c}]=gl("Dialog.Title"),d=ti(t);N.useEffect(()=>(c(i),()=>c(null)),[i,c]);let h=N.useMemo(()=>({open:u===0}),[u]),p={ref:d,id:i};return wr()({ourProps:p,theirProps:a,slot:h,defaultTag:BI,name:"Dialog.Title"})}let HI=Vn($I),Dh=Vn(LI);Vn(WI);let qI=Vn(zI),Fv=Object.assign(HI,{Panel:Dh,Title:qI,Description:wD});const gi=[{id:"WorkflowType",label:"WorkflowType",type:"text"},{id:"WorkflowId",label:"WorkflowId",type:"text"},{id:"RunId",label:"RunId",type:"text"},{id:"ExecutionStatus",label:"Status",type:"status"},{id:"StartTime",label:"StartTime",type:"datetime"},{id:"CloseTime",label:"CloseTime",type:"datetime"},{id:"TaskQueue",label:"TaskQueue",type:"text"}],Hg=[{id:"equals",label:"=",alternatives:["equals","is"],searchOperator:"="},{id:"notEquals",label:"!=",alternatives:["not equals","is not"],searchOperator:"!="},{id:"starts_with",label:"starts with",alternatives:["startswith","start"],searchOperator:"starts_with"},{id:"isNull",label:"is null",alternatives:["null"],searchOperator:"is null"},{id:"isNotNull",label:"is not null",alternatives:["not null"],searchOperator:"is not null"},{id:"greaterThan",label:">",alternatives:["after","greater than"],searchOperator:">"},{id:"lessThan",label:"<",alternatives:["before","less than"],searchOperator:"<"},{id:"between",label:"between",alternatives:[],searchOperator:"between"}],Uf=[{value:"Completed",color:"text-green-700 bg-green-50"},{value:"Running",color:"text-blue-700 bg-blue-50"},{value:"TimedOut",color:"text-orange-700 bg-orange-50"},{value:"Failed",color:"text-red-700 bg-red-50"},{value:"Canceled",color:"text-gray-700 bg-gray-50"},{value:"Terminated",color:"text-yellow-700 bg-yellow-50"},{value:"Continued as New",color:"text-pink-700 bg-pink-50"}],gc=[{id:"equals",label:"=",alternatives:["==","is","="]},{id:"between",label:"between",alternatives:["between"]},{id:"greater",label:">",alternatives:["gt",">"]},{id:"greaterOrEqual",label:">=",alternatives:["gte",">="]},{id:"less",label:"<",alternatives:["lt","<"]},{id:"lessOrEqual",label:"<=",alternatives:["lte","<="]}],Wv=6048e5,YI=864e5,qg=Symbol.for("constructDateFrom");function Ji(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&qg in e?e[qg](t):e instanceof Date?new e.constructor(t):new Date(t)}function zr(e,t){return Ji(t||e,e)}let KI={};function yl(){return KI}function iu(e,t){var d,h,p,g;const n=yl(),i=(t==null?void 0:t.weekStartsOn)??((h=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??n.weekStartsOn??((g=(p=n.locale)==null?void 0:p.options)==null?void 0:g.weekStartsOn)??0,a=zr(e,t==null?void 0:t.in),u=a.getDay(),c=(u<i?7:0)+u-i;return a.setDate(a.getDate()-c),a.setHours(0,0,0,0),a}function Hc(e,t){return iu(e,{...t,weekStartsOn:1})}function Bv(e,t){const n=zr(e,t==null?void 0:t.in),i=n.getFullYear(),a=Ji(n,0);a.setFullYear(i+1,0,4),a.setHours(0,0,0,0);const u=Hc(a),c=Ji(n,0);c.setFullYear(i,0,4),c.setHours(0,0,0,0);const d=Hc(c);return n.getTime()>=u.getTime()?i+1:n.getTime()>=d.getTime()?i:i-1}function Yg(e){const t=zr(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function UI(e,...t){const n=Ji.bind(null,t.find(i=>typeof i=="object"));return t.map(n)}function Kg(e,t){const n=zr(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function VI(e,t,n){const[i,a]=UI(n==null?void 0:n.in,e,t),u=Kg(i),c=Kg(a),d=+u-Yg(u),h=+c-Yg(c);return Math.round((d-h)/YI)}function GI(e,t){const n=Bv(e,t),i=Ji(e,0);return i.setFullYear(n,0,4),i.setHours(0,0,0,0),Hc(i)}function XI(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function ZI(e){return!(!XI(e)&&typeof e!="number"||isNaN(+zr(e)))}function QI(e,t){const n=zr(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const JI={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},eP=(e,t,n)=>{let i;const a=JI[e];return typeof a=="string"?i=a:t===1?i=a.one:i=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function Vf(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const tP={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},nP={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},rP={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},iP={date:Vf({formats:tP,defaultWidth:"full"}),time:Vf({formats:nP,defaultWidth:"full"}),dateTime:Vf({formats:rP,defaultWidth:"full"})},oP={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},aP=(e,t,n,i)=>oP[e];function Rs(e){return(t,n)=>{const i=n!=null&&n.context?String(n.context):"standalone";let a;if(i==="formatting"&&e.formattingValues){const c=e.defaultFormattingWidth||e.defaultWidth,d=n!=null&&n.width?String(n.width):c;a=e.formattingValues[d]||e.formattingValues[c]}else{const c=e.defaultWidth,d=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[d]||e.values[c]}const u=e.argumentCallback?e.argumentCallback(t):t;return a[u]}}const sP={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},uP={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},cP={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},lP={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},fP={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},dP={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},hP=(e,t)=>{const n=Number(e),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},pP={ordinalNumber:hP,era:Rs({values:sP,defaultWidth:"wide"}),quarter:Rs({values:uP,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Rs({values:cP,defaultWidth:"wide"}),day:Rs({values:lP,defaultWidth:"wide"}),dayPeriod:Rs({values:fP,defaultWidth:"wide",formattingValues:dP,defaultFormattingWidth:"wide"})};function $s(e){return(t,n={})=>{const i=n.width,a=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],u=t.match(a);if(!u)return null;const c=u[0],d=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth],h=Array.isArray(d)?gP(d,v=>v.test(c)):mP(d,v=>v.test(c));let p;p=e.valueCallback?e.valueCallback(h):h,p=n.valueCallback?n.valueCallback(p):p;const g=t.slice(c.length);return{value:p,rest:g}}}function mP(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function gP(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function yP(e){return(t,n={})=>{const i=t.match(e.matchPattern);if(!i)return null;const a=i[0],u=t.match(e.parsePattern);if(!u)return null;let c=e.valueCallback?e.valueCallback(u[0]):u[0];c=n.valueCallback?n.valueCallback(c):c;const d=t.slice(a.length);return{value:c,rest:d}}}const vP=/^(\d+)(th|st|nd|rd)?/i,wP=/\d+/i,xP={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},bP={any:[/^b/i,/^(a|c)/i]},_P={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},SP={any:[/1/i,/2/i,/3/i,/4/i]},EP={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},NP={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},kP={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},TP={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},CP={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},OP={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},AP={ordinalNumber:yP({matchPattern:vP,parsePattern:wP,valueCallback:e=>parseInt(e,10)}),era:$s({matchPatterns:xP,defaultMatchWidth:"wide",parsePatterns:bP,defaultParseWidth:"any"}),quarter:$s({matchPatterns:_P,defaultMatchWidth:"wide",parsePatterns:SP,defaultParseWidth:"any",valueCallback:e=>e+1}),month:$s({matchPatterns:EP,defaultMatchWidth:"wide",parsePatterns:NP,defaultParseWidth:"any"}),day:$s({matchPatterns:kP,defaultMatchWidth:"wide",parsePatterns:TP,defaultParseWidth:"any"}),dayPeriod:$s({matchPatterns:CP,defaultMatchWidth:"any",parsePatterns:OP,defaultParseWidth:"any"})},DP={code:"en-US",formatDistance:eP,formatLong:iP,formatRelative:aP,localize:pP,match:AP,options:{weekStartsOn:0,firstWeekContainsDate:1}};function IP(e,t){const n=zr(e,t==null?void 0:t.in);return VI(n,QI(n))+1}function PP(e,t){const n=zr(e,t==null?void 0:t.in),i=+Hc(n)-+GI(n);return Math.round(i/Wv)+1}function zv(e,t){var g,v,x,b;const n=zr(e,t==null?void 0:t.in),i=n.getFullYear(),a=yl(),u=(t==null?void 0:t.firstWeekContainsDate)??((v=(g=t==null?void 0:t.locale)==null?void 0:g.options)==null?void 0:v.firstWeekContainsDate)??a.firstWeekContainsDate??((b=(x=a.locale)==null?void 0:x.options)==null?void 0:b.firstWeekContainsDate)??1,c=Ji((t==null?void 0:t.in)||e,0);c.setFullYear(i+1,0,u),c.setHours(0,0,0,0);const d=iu(c,t),h=Ji((t==null?void 0:t.in)||e,0);h.setFullYear(i,0,u),h.setHours(0,0,0,0);const p=iu(h,t);return+n>=+d?i+1:+n>=+p?i:i-1}function MP(e,t){var d,h,p,g;const n=yl(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((g=(p=n.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??1,a=zv(e,t),u=Ji((t==null?void 0:t.in)||e,0);return u.setFullYear(a,0,i),u.setHours(0,0,0,0),iu(u,t)}function RP(e,t){const n=zr(e,t==null?void 0:t.in),i=+iu(n,t)-+MP(n,t);return Math.round(i/Wv)+1}function Ot(e,t){const n=e<0?"-":"",i=Math.abs(e).toString().padStart(t,"0");return n+i}const qi={y(e,t){const n=e.getFullYear(),i=n>0?n:1-n;return Ot(t==="yy"?i%100:i,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Ot(n+1,2)},d(e,t){return Ot(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Ot(e.getHours()%12||12,t.length)},H(e,t){return Ot(e.getHours(),t.length)},m(e,t){return Ot(e.getMinutes(),t.length)},s(e,t){return Ot(e.getSeconds(),t.length)},S(e,t){const n=t.length,i=e.getMilliseconds(),a=Math.trunc(i*Math.pow(10,n-3));return Ot(a,t.length)}},Da={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ug={G:function(e,t,n){const i=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});case"GGGG":default:return n.era(i,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const i=e.getFullYear(),a=i>0?i:1-i;return n.ordinalNumber(a,{unit:"year"})}return qi.y(e,t)},Y:function(e,t,n,i){const a=zv(e,i),u=a>0?a:1-a;if(t==="YY"){const c=u%100;return Ot(c,2)}return t==="Yo"?n.ordinalNumber(u,{unit:"year"}):Ot(u,t.length)},R:function(e,t){const n=Bv(e);return Ot(n,t.length)},u:function(e,t){const n=e.getFullYear();return Ot(n,t.length)},Q:function(e,t,n){const i=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return Ot(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,t,n){const i=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return Ot(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,t,n){const i=e.getMonth();switch(t){case"M":case"MM":return qi.M(e,t);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(e,t,n){const i=e.getMonth();switch(t){case"L":return String(i+1);case"LL":return Ot(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(e,t,n,i){const a=RP(e,i);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):Ot(a,t.length)},I:function(e,t,n){const i=PP(e);return t==="Io"?n.ordinalNumber(i,{unit:"week"}):Ot(i,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):qi.d(e,t)},D:function(e,t,n){const i=IP(e);return t==="Do"?n.ordinalNumber(i,{unit:"dayOfYear"}):Ot(i,t.length)},E:function(e,t,n){const i=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});case"EEEE":default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(e,t,n,i){const a=e.getDay(),u=(a-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(u);case"ee":return Ot(u,2);case"eo":return n.ordinalNumber(u,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,i){const a=e.getDay(),u=(a-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(u);case"cc":return Ot(u,t.length);case"co":return n.ordinalNumber(u,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const i=e.getDay(),a=i===0?7:i;switch(t){case"i":return String(a);case"ii":return Ot(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});case"iiii":default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const i=e.getHours();let a;switch(i===12?a=Da.noon:i===0?a=Da.midnight:a=i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const i=e.getHours();let a;switch(i>=17?a=Da.evening:i>=12?a=Da.afternoon:i>=4?a=Da.morning:a=Da.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let i=e.getHours()%12;return i===0&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return qi.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):qi.H(e,t)},K:function(e,t,n){const i=e.getHours()%12;return t==="Ko"?n.ordinalNumber(i,{unit:"hour"}):Ot(i,t.length)},k:function(e,t,n){let i=e.getHours();return i===0&&(i=24),t==="ko"?n.ordinalNumber(i,{unit:"hour"}):Ot(i,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):qi.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):qi.s(e,t)},S:function(e,t){return qi.S(e,t)},X:function(e,t,n){const i=e.getTimezoneOffset();if(i===0)return"Z";switch(t){case"X":return Gg(i);case"XXXX":case"XX":return $o(i);case"XXXXX":case"XXX":default:return $o(i,":")}},x:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"x":return Gg(i);case"xxxx":case"xx":return $o(i);case"xxxxx":case"xxx":default:return $o(i,":")}},O:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Vg(i,":");case"OOOO":default:return"GMT"+$o(i,":")}},z:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Vg(i,":");case"zzzz":default:return"GMT"+$o(i,":")}},t:function(e,t,n){const i=Math.trunc(+e/1e3);return Ot(i,t.length)},T:function(e,t,n){return Ot(+e,t.length)}};function Vg(e,t=""){const n=e>0?"-":"+",i=Math.abs(e),a=Math.trunc(i/60),u=i%60;return u===0?n+String(a):n+String(a)+t+Ot(u,2)}function Gg(e,t){return e%60===0?(e>0?"-":"+")+Ot(Math.abs(e)/60,2):$o(e,t)}function $o(e,t=""){const n=e>0?"-":"+",i=Math.abs(e),a=Ot(Math.trunc(i/60),2),u=Ot(i%60,2);return n+a+t+u}const Xg=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Hv=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},$P=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],i=n[1],a=n[2];if(!a)return Xg(e,t);let u;switch(i){case"P":u=t.dateTime({width:"short"});break;case"PP":u=t.dateTime({width:"medium"});break;case"PPP":u=t.dateTime({width:"long"});break;case"PPPP":default:u=t.dateTime({width:"full"});break}return u.replace("{{date}}",Xg(i,t)).replace("{{time}}",Hv(a,t))},jP={p:Hv,P:$P},LP=/^D+$/,FP=/^Y+$/,WP=["D","DD","YY","YYYY"];function BP(e){return LP.test(e)}function zP(e){return FP.test(e)}function HP(e,t,n){const i=qP(e,t,n);if(console.warn(i),WP.includes(e))throw new RangeError(i)}function qP(e,t,n){const i=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${i} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const YP=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,KP=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,UP=/^'([^]*?)'?$/,VP=/''/g,GP=/[a-zA-Z]/;function jn(e,t,n){var g,v,x,b;const i=yl(),a=i.locale??DP,u=i.firstWeekContainsDate??((v=(g=i.locale)==null?void 0:g.options)==null?void 0:v.firstWeekContainsDate)??1,c=i.weekStartsOn??((b=(x=i.locale)==null?void 0:x.options)==null?void 0:b.weekStartsOn)??0,d=zr(e,n==null?void 0:n.in);if(!ZI(d))throw new RangeError("Invalid time value");let h=t.match(KP).map(C=>{const A=C[0];if(A==="p"||A==="P"){const R=jP[A];return R(C,a.formatLong)}return C}).join("").match(YP).map(C=>{if(C==="''")return{isToken:!1,value:"'"};const A=C[0];if(A==="'")return{isToken:!1,value:XP(C)};if(Ug[A])return{isToken:!0,value:C};if(A.match(GP))throw new RangeError("Format string contains an unescaped latin alphabet character `"+A+"`");return{isToken:!1,value:C}});a.localize.preprocessor&&(h=a.localize.preprocessor(d,h));const p={firstWeekContainsDate:u,weekStartsOn:c,locale:a};return h.map(C=>{if(!C.isToken)return C.value;const A=C.value;(zP(A)||BP(A))&&HP(A,t,String(e));const R=Ug[A[0]];return R(d,A,a.localize,p)}).join("")}function XP(e){const t=e.match(UP);return t?t[1].replace(VP,"'"):e}const ZP=(e,t,n,i)=>{if(n==="length"||n==="prototype"||n==="arguments"||n==="caller")return;const a=Object.getOwnPropertyDescriptor(e,n),u=Object.getOwnPropertyDescriptor(t,n);!QP(a,u)&&i||Object.defineProperty(e,n,u)},QP=function(e,t){return e===void 0||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},JP=(e,t)=>{const n=Object.getPrototypeOf(t);n!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,n)},eM=(e,t)=>`/* Wrapped ${e}*/
${t}`,tM=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),nM=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),rM=(e,t,n)=>{const i=n===""?"":`with ${n.trim()}() `,a=eM.bind(null,i,t.toString());Object.defineProperty(a,"name",nM),Object.defineProperty(e,"toString",{...tM,value:a})},iM=(e,t,{ignoreNonConfigurable:n=!1}={})=>{const{name:i}=e;for(const a of Reflect.ownKeys(t))ZP(e,t,a,n);return JP(e,t),rM(e,t,i),e};var oM=iM,$d={exports:{}},aM=()=>{const e={};return e.promise=new Promise((t,n)=>{e.resolve=t,e.reject=n}),e};(function(e,t){var n=Mr&&Mr.__awaiter||function(c,d,h,p){return new(h||(h=Promise))(function(g,v){function x(A){try{C(p.next(A))}catch(R){v(R)}}function b(A){try{C(p.throw(A))}catch(R){v(R)}}function C(A){A.done?g(A.value):new h(function(R){R(A.value)}).then(x,b)}C((p=p.apply(c,d||[])).next())})},i=Mr&&Mr.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(aM);function u(c,d="maxAge"){let h,p,g;const v=()=>n(this,void 0,void 0,function*(){if(h!==void 0)return;const C=A=>n(this,void 0,void 0,function*(){g=a.default();const R=A[1][d]-Date.now();if(R<=0){c.delete(A[0]),g.resolve();return}return h=A[0],p=setTimeout(()=>{c.delete(A[0]),g&&g.resolve()},R),typeof p.unref=="function"&&p.unref(),g.promise});try{for(const A of c)yield C(A)}catch{}h=void 0}),x=()=>{h=void 0,p!==void 0&&(clearTimeout(p),p=void 0),g!==void 0&&(g.reject(void 0),g=void 0)},b=c.set.bind(c);return c.set=(C,A)=>{c.has(C)&&c.delete(C);const R=b(C,A);return h&&h===C&&x(),v(),R},v(),c}t.default=u,e.exports=u,e.exports.default=u})($d,$d.exports);var sM=$d.exports;const uM=oM,cM=sM,Gf=new WeakMap,qv=new WeakMap,qc=(e,{cacheKey:t,cache:n=new Map,maxAge:i}={})=>{typeof i=="number"&&cM(n);const a=function(...u){const c=t?t(u):u[0],d=n.get(c);if(d)return d.data;const h=e.apply(this,u);return n.set(c,{data:h,maxAge:i?Date.now()+i:Number.POSITIVE_INFINITY}),h};return uM(a,e,{ignoreNonConfigurable:!0}),qv.set(a,n),a};qc.decorator=(e={})=>(t,n,i)=>{const a=t[n];if(typeof a!="function")throw new TypeError("The decorated value must be a function");delete i.value,delete i.writable,i.get=function(){if(!Gf.has(this)){const u=qc(a,e);return Gf.set(this,u),u}return Gf.get(this)}};qc.clear=e=>{const t=qv.get(e);if(!t)throw new TypeError("Can't clear a function that was not memoized!");if(typeof t.clear!="function")throw new TypeError("The cache Map can't be cleared!");t.clear()};var lM=qc;const Yv=Zd(lM);function fM(e){return typeof e=="string"}function dM(e,t,n){return n.indexOf(e)===t}function hM(e){return e.toLowerCase()===e}function Zg(e){return e.indexOf(",")===-1?e:e.split(",")}function jd(e){if(!e)return e;if(e==="C"||e==="posix"||e==="POSIX")return"en-US";if(e.indexOf(".")!==-1){var t=e.split(".")[0],n=t===void 0?"":t;return jd(n)}if(e.indexOf("@")!==-1){var i=e.split("@")[0],n=i===void 0?"":i;return jd(n)}if(e.indexOf("-")===-1||!hM(e))return e;var a=e.split("-"),u=a[0],c=a[1],d=c===void 0?"":c;return"".concat(u,"-").concat(d.toUpperCase())}function pM(e){var t=e===void 0?{}:e,n=t.useFallbackLocale,i=n===void 0?!0:n,a=t.fallbackLocale,u=a===void 0?"en-US":a,c=[];if(typeof navigator<"u"){for(var d=navigator.languages||[],h=[],p=0,g=d;p<g.length;p++){var v=g[p];h=h.concat(Zg(v))}var x=navigator.language,b=x&&Zg(x);c=c.concat(h,b)}return i&&c.push(u),c.filter(fM).map(jd).filter(dM)}var mM=Yv(pM,{cacheKey:JSON.stringify});function gM(e){return mM(e)[0]||null}var Kv=Yv(gM,{cacheKey:JSON.stringify});function Ni(e,t,n){return function(a,u){u===void 0&&(u=n);var c=e(a)+u;return t(c)}}function hu(e){return function(n){return new Date(e(n).getTime()-1)}}function pu(e,t){return function(i){return[e(i),t(i)]}}function Ht(e){if(e instanceof Date)return e.getFullYear();if(typeof e=="number")return e;var t=parseInt(e,10);if(typeof e=="string"&&!isNaN(t))return t;throw new Error("Failed to get year from date: ".concat(e,"."))}function to(e){if(e instanceof Date)return e.getMonth();throw new Error("Failed to get month from date: ".concat(e,"."))}function vl(e){if(e instanceof Date)return e.getDate();throw new Error("Failed to get year from date: ".concat(e,"."))}function Va(e){var t=Ht(e),n=t+(-t+1)%100,i=new Date;return i.setFullYear(n,0,1),i.setHours(0,0,0,0),i}var yM=Ni(Ht,Va,-100),Uv=Ni(Ht,Va,100),Ih=hu(Uv),vM=Ni(Ht,Ih,-100),Vv=pu(Va,Ih);function no(e){var t=Ht(e),n=t+(-t+1)%10,i=new Date;return i.setFullYear(n,0,1),i.setHours(0,0,0,0),i}var Gv=Ni(Ht,no,-10),Ph=Ni(Ht,no,10),wl=hu(Ph),Xv=Ni(Ht,wl,-10),Zv=pu(no,wl);function Ga(e){var t=Ht(e),n=new Date;return n.setFullYear(t,0,1),n.setHours(0,0,0,0),n}var Qv=Ni(Ht,Ga,-1),Mh=Ni(Ht,Ga,1),xl=hu(Mh),Jv=Ni(Ht,xl,-1),wM=pu(Ga,xl);function Rh(e,t){return function(i,a){a===void 0&&(a=t);var u=Ht(i),c=to(i)+a,d=new Date;return d.setFullYear(u,c,1),d.setHours(0,0,0,0),e(d)}}function ea(e){var t=Ht(e),n=to(e),i=new Date;return i.setFullYear(t,n,1),i.setHours(0,0,0,0),i}var ew=Rh(ea,-1),$h=Rh(ea,1),mu=hu($h),tw=Rh(mu,-1),xM=pu(ea,mu);function bM(e,t){return function(i,a){a===void 0&&(a=t);var u=Ht(i),c=to(i),d=vl(i)+a,h=new Date;return h.setFullYear(u,c,d),h.setHours(0,0,0,0),e(h)}}function gu(e){var t=Ht(e),n=to(e),i=vl(e),a=new Date;return a.setFullYear(t,n,i),a.setHours(0,0,0,0),a}var _M=bM(gu,1),jh=hu(_M),SM=pu(gu,jh);function nw(e){return vl(mu(e))}var _n={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},EM={gregory:["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],hebrew:["he","he-IL"],islamic:["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"]},Lh=[0,1,2,3,4,5,6],Xf=new Map;function NM(e){return function(n,i){var a=n||Kv();Xf.has(a)||Xf.set(a,new Map);var u=Xf.get(a);return u.has(e)||u.set(e,new Intl.DateTimeFormat(a||void 0,e).format),u.get(e)(i)}}function kM(e){var t=new Date(e);return new Date(t.setHours(12))}function ta(e){return function(t,n){return NM(e)(t,kM(n))}}var TM={day:"numeric"},CM={day:"numeric",month:"long",year:"numeric"},OM={month:"long"},AM={month:"long",year:"numeric"},DM={weekday:"short"},IM={weekday:"long"},PM={year:"numeric"},MM=ta(TM),RM=ta(CM),$M=ta(OM),rw=ta(AM),jM=ta(DM),LM=ta(IM),bl=ta(PM),FM=Lh[0],WM=Lh[5],Qg=Lh[6];function ou(e,t){t===void 0&&(t=_n.ISO_8601);var n=e.getDay();switch(t){case _n.ISO_8601:return(n+6)%7;case _n.ISLAMIC:return(n+1)%7;case _n.HEBREW:case _n.GREGORY:return n;default:throw new Error("Unsupported calendar type.")}}function BM(e){var t=Va(e);return Ht(t)}function zM(e){var t=no(e);return Ht(t)}function Ld(e,t){t===void 0&&(t=_n.ISO_8601);var n=Ht(e),i=to(e),a=e.getDate()-ou(e,t);return new Date(n,i,a)}function HM(e,t){t===void 0&&(t=_n.ISO_8601);var n=t===_n.GREGORY?_n.GREGORY:_n.ISO_8601,i=Ld(e,t),a=Ht(e)+1,u,c;do u=new Date(a,0,n===_n.ISO_8601?4:1),c=Ld(u,t),a-=1;while(e<c);return Math.round((i.getTime()-c.getTime())/(864e5*7))+1}function Uo(e,t){switch(e){case"century":return Va(t);case"decade":return no(t);case"year":return Ga(t);case"month":return ea(t);case"day":return gu(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function qM(e,t){switch(e){case"century":return yM(t);case"decade":return Gv(t);case"year":return Qv(t);case"month":return ew(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function iw(e,t){switch(e){case"century":return Uv(t);case"decade":return Ph(t);case"year":return Mh(t);case"month":return $h(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function YM(e,t){switch(e){case"decade":return Gv(t,-100);case"year":return Qv(t,-10);case"month":return ew(t,-12);default:throw new Error("Invalid rangeType: ".concat(e))}}function KM(e,t){switch(e){case"decade":return Ph(t,100);case"year":return Mh(t,10);case"month":return $h(t,12);default:throw new Error("Invalid rangeType: ".concat(e))}}function ow(e,t){switch(e){case"century":return Ih(t);case"decade":return wl(t);case"year":return xl(t);case"month":return mu(t);case"day":return jh(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function UM(e,t){switch(e){case"century":return vM(t);case"decade":return Xv(t);case"year":return Jv(t);case"month":return tw(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function VM(e,t){switch(e){case"decade":return Xv(t,-100);case"year":return Jv(t,-10);case"month":return tw(t,-12);default:throw new Error("Invalid rangeType: ".concat(e))}}function Jg(e,t){switch(e){case"century":return Vv(t);case"decade":return Zv(t);case"year":return wM(t);case"month":return xM(t);case"day":return SM(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function GM(e,t,n){var i=[t,n].sort(function(a,u){return a.getTime()-u.getTime()});return[Uo(e,i[0]),ow(e,i[1])]}function aw(e,t,n){return n.map(function(i){return(t||bl)(e,i)}).join("  ")}function XM(e,t,n){return aw(e,t,Vv(n))}function sw(e,t,n){return aw(e,t,Zv(n))}function ZM(e){return e.getDay()===new Date().getDay()}function uw(e,t){t===void 0&&(t=_n.ISO_8601);var n=e.getDay();switch(t){case _n.ISLAMIC:case _n.HEBREW:return n===WM||n===Qg;case _n.ISO_8601:case _n.GREGORY:return n===Qg||n===FM;default:throw new Error("Unsupported calendar type.")}}var Zr="react-calendar__navigation";function QM(e){var t=e.activeStartDate,n=e.drillUp,i=e.formatMonthYear,a=i===void 0?rw:i,u=e.formatYear,c=u===void 0?bl:u,d=e.locale,h=e.maxDate,p=e.minDate,g=e.navigationAriaLabel,v=g===void 0?"":g,x=e.navigationAriaLive,b=e.navigationLabel,C=e.next2AriaLabel,A=C===void 0?"":C,R=e.next2Label,$=R===void 0?"":R,q=e.nextAriaLabel,te=q===void 0?"":q,F=e.nextLabel,ue=F===void 0?"":F,ce=e.prev2AriaLabel,Y=ce===void 0?"":ce,Q=e.prev2Label,se=Q===void 0?"":Q,J=e.prevAriaLabel,U=J===void 0?"":J,re=e.prevLabel,ve=re===void 0?"":re,M=e.setActiveStartDate,ae=e.showDoubleView,L=e.view,pe=e.views,oe=pe.indexOf(L)>0,G=L!=="century",de=qM(L,t),ge=G?YM(L,t):void 0,Se=iw(L,t),Te=G?KM(L,t):void 0,Re=function(){if(de.getFullYear()<0)return!0;var Ge=UM(L,t);return p&&p>=Ge}(),Me=G&&function(){if(ge.getFullYear()<0)return!0;var Ge=VM(L,t);return p&&p>=Ge}(),Be=h&&h<Se,Ke=G&&h&&h<Te;function Ve(){M(de,"prev")}function Ee(){M(ge,"prev2")}function rt(){M(Se,"next")}function xt(){M(Te,"next2")}function ze(Ge){var it=function(){switch(L){case"century":return XM(d,c,Ge);case"decade":return sw(d,c,Ge);case"year":return c(d,Ge);case"month":return a(d,Ge);default:throw new Error("Invalid view: ".concat(L,"."))}}();return b?b({date:Ge,label:it,locale:d||Kv()||void 0,view:L}):it}function Nt(){var Ge="".concat(Zr,"__label");return _.jsxs("button",{"aria-label":v,"aria-live":x,className:Ge,disabled:!oe,onClick:n,style:{flexGrow:1},type:"button",children:[_.jsx("span",{className:"".concat(Ge,"__labelText ").concat(Ge,"__labelText--from"),children:ze(t)}),ae?_.jsxs(_.Fragment,{children:[_.jsx("span",{className:"".concat(Ge,"__divider"),children:"  "}),_.jsx("span",{className:"".concat(Ge,"__labelText ").concat(Ge,"__labelText--to"),children:ze(Se)})]}):null]})}return _.jsxs("div",{className:Zr,children:[se!==null&&G?_.jsx("button",{"aria-label":Y,className:"".concat(Zr,"__arrow ").concat(Zr,"__prev2-button"),disabled:Me,onClick:Ee,type:"button",children:se}):null,ve!==null&&_.jsx("button",{"aria-label":U,className:"".concat(Zr,"__arrow ").concat(Zr,"__prev-button"),disabled:Re,onClick:Ve,type:"button",children:ve}),Nt(),ue!==null&&_.jsx("button",{"aria-label":te,className:"".concat(Zr,"__arrow ").concat(Zr,"__next-button"),disabled:Be,onClick:rt,type:"button",children:ue}),$!==null&&G?_.jsx("button",{"aria-label":A,className:"".concat(Zr,"__arrow ").concat(Zr,"__next2-button"),disabled:Ke,onClick:xt,type:"button",children:$}):null]})}var Ra=function(){return Ra=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Ra.apply(this,arguments)},JM=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n};function e0(e){return"".concat(e,"%")}function Fh(e){var t=e.children,n=e.className,i=e.count,a=e.direction,u=e.offset,c=e.style,d=e.wrap,h=JM(e,["children","className","count","direction","offset","style","wrap"]);return _.jsx("div",Ra({className:n,style:Ra({display:"flex",flexDirection:a,flexWrap:d?"wrap":"nowrap"},c)},h,{children:N.Children.map(t,function(p,g){var v=u&&g===0?e0(100*u/i):null;return N.cloneElement(p,Ra(Ra({},p.props),{style:{flexBasis:e0(100/i),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:v,marginInlineStart:v,marginInlineEnd:0}}))})}))}function eR(e,t,n){return t&&t>e?t:n&&n<e?n:e}function au(e,t){return t[0]<=e&&t[1]>=e}function tR(e,t){return e[0]<=t[0]&&e[1]>=t[1]}function cw(e,t){return au(e[0],t)||au(e[1],t)}function t0(e,t,n){var i=cw(t,e),a=[];if(i){a.push(n);var u=au(e[0],t),c=au(e[1],t);u&&a.push("".concat(n,"Start")),c&&a.push("".concat(n,"End")),u&&c&&a.push("".concat(n,"BothEnds"))}return a}function nR(e){return Array.isArray(e)?e[0]!==null&&e[1]!==null:e!==null}function rR(e){if(!e)throw new Error("args is required");var t=e.value,n=e.date,i=e.hover,a="react-calendar__tile",u=[a];if(!n)return u;var c=new Date,d=function(){if(Array.isArray(n))return n;var b=e.dateType;if(!b)throw new Error("dateType is required when date is not an array of two dates");return Jg(b,n)}();if(au(c,d)&&u.push("".concat(a,"--now")),!t||!nR(t))return u;var h=function(){if(Array.isArray(t))return t;var b=e.valueType;if(!b)throw new Error("valueType is required when value is not an array of two dates");return Jg(b,t)}();tR(h,d)?u.push("".concat(a,"--active")):cw(h,d)&&u.push("".concat(a,"--hasActive"));var p=t0(h,d,"".concat(a,"--range"));u.push.apply(u,p);var g=Array.isArray(t)?t:[t];if(i&&g.length===1){var v=i>h[0]?[h[0],i]:[i,h[0]],x=t0(v,d,"".concat(a,"--hover"));u.push.apply(u,x)}return u}function _l(e){for(var t=e.className,n=e.count,i=n===void 0?3:n,a=e.dateTransform,u=e.dateType,c=e.end,d=e.hover,h=e.offset,p=e.renderTile,g=e.start,v=e.step,x=v===void 0?1:v,b=e.value,C=e.valueType,A=[],R=g;R<=c;R+=x){var $=a(R);A.push(p({classes:rR({date:$,dateType:u,hover:d,value:b,valueType:C}),date:$}))}return _.jsx(Fh,{className:t,count:i,offset:h,wrap:!0,children:A})}function Sl(e){var t=e.activeStartDate,n=e.children,i=e.classes,a=e.date,u=e.formatAbbr,c=e.locale,d=e.maxDate,h=e.maxDateTransform,p=e.minDate,g=e.minDateTransform,v=e.onClick,x=e.onMouseOver,b=e.style,C=e.tileClassName,A=e.tileContent,R=e.tileDisabled,$=e.view,q=N.useMemo(function(){var F={activeStartDate:t,date:a,view:$};return typeof C=="function"?C(F):C},[t,a,C,$]),te=N.useMemo(function(){var F={activeStartDate:t,date:a,view:$};return typeof A=="function"?A(F):A},[t,a,A,$]);return _.jsxs("button",{className:yr(i,q),disabled:p&&g(p)>a||d&&h(d)<a||(R==null?void 0:R({activeStartDate:t,date:a,view:$})),onClick:v?function(F){return v(a,F)}:void 0,onFocus:x?function(){return x(a)}:void 0,onMouseOver:x?function(){return x(a)}:void 0,style:b,type:"button",children:[u?_.jsx("abbr",{"aria-label":u(c,a),children:n}):n,te]})}var Fd=function(){return Fd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Fd.apply(this,arguments)},iR=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n},n0="react-calendar__century-view__decades__decade";function oR(e){var t=e.classes,n=t===void 0?[]:t,i=e.currentCentury,a=e.formatYear,u=a===void 0?bl:a,c=iR(e,["classes","currentCentury","formatYear"]),d=c.date,h=c.locale,p=[];return n&&p.push.apply(p,n),p.push(n0),Va(d).getFullYear()!==i&&p.push("".concat(n0,"--neighboringCentury")),_.jsx(Sl,Fd({},c,{classes:p,maxDateTransform:wl,minDateTransform:no,view:"century",children:sw(h,u,d)}))}var Wd=function(){return Wd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Wd.apply(this,arguments)},r0=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n};function aR(e){var t=e.activeStartDate,n=e.hover,i=e.showNeighboringCentury,a=e.value,u=e.valueType,c=r0(e,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),d=BM(t),h=d+(i?119:99);return _.jsx(_l,{className:"react-calendar__century-view__decades",dateTransform:no,dateType:"decade",end:h,hover:n,renderTile:function(p){var g=p.date,v=r0(p,["date"]);return _.jsx(oR,Wd({},c,v,{activeStartDate:t,currentCentury:d,date:g}),g.getTime())},start:d,step:10,value:a,valueType:u})}var Bd=function(){return Bd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Bd.apply(this,arguments)};function sR(e){function t(){return _.jsx(aR,Bd({},e))}return _.jsx("div",{className:"react-calendar__century-view",children:t()})}var zd=function(){return zd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},zd.apply(this,arguments)},uR=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n},i0="react-calendar__decade-view__years__year";function cR(e){var t=e.classes,n=t===void 0?[]:t,i=e.currentDecade,a=e.formatYear,u=a===void 0?bl:a,c=uR(e,["classes","currentDecade","formatYear"]),d=c.date,h=c.locale,p=[];return n&&p.push.apply(p,n),p.push(i0),no(d).getFullYear()!==i&&p.push("".concat(i0,"--neighboringDecade")),_.jsx(Sl,zd({},c,{classes:p,maxDateTransform:xl,minDateTransform:Ga,view:"decade",children:u(h,d)}))}var Hd=function(){return Hd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Hd.apply(this,arguments)},o0=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n};function lR(e){var t=e.activeStartDate,n=e.hover,i=e.showNeighboringDecade,a=e.value,u=e.valueType,c=o0(e,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),d=zM(t),h=d+(i?11:9);return _.jsx(_l,{className:"react-calendar__decade-view__years",dateTransform:Ga,dateType:"year",end:h,hover:n,renderTile:function(p){var g=p.date,v=o0(p,["date"]);return _.jsx(cR,Hd({},c,v,{activeStartDate:t,currentDecade:d,date:g}),g.getTime())},start:d,value:a,valueType:u})}var qd=function(){return qd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},qd.apply(this,arguments)};function fR(e){function t(){return _.jsx(lR,qd({},e))}return _.jsx("div",{className:"react-calendar__decade-view",children:t()})}var Yd=function(){return Yd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Yd.apply(this,arguments)},dR=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n},a0=function(e,t,n){if(n||arguments.length===2)for(var i=0,a=t.length,u;i<a;i++)(u||!(i in t))&&(u||(u=Array.prototype.slice.call(t,0,i)),u[i]=t[i]);return e.concat(u||Array.prototype.slice.call(t))},hR="react-calendar__year-view__months__month";function pR(e){var t=e.classes,n=t===void 0?[]:t,i=e.formatMonth,a=i===void 0?$M:i,u=e.formatMonthYear,c=u===void 0?rw:u,d=dR(e,["classes","formatMonth","formatMonthYear"]),h=d.date,p=d.locale;return _.jsx(Sl,Yd({},d,{classes:a0(a0([],n,!0),[hR],!1),formatAbbr:c,maxDateTransform:mu,minDateTransform:ea,view:"year",children:a(p,h)}))}var Kd=function(){return Kd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Kd.apply(this,arguments)},s0=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n};function mR(e){var t=e.activeStartDate,n=e.hover,i=e.value,a=e.valueType,u=s0(e,["activeStartDate","hover","value","valueType"]),c=0,d=11,h=Ht(t);return _.jsx(_l,{className:"react-calendar__year-view__months",dateTransform:function(p){var g=new Date;return g.setFullYear(h,p,1),ea(g)},dateType:"month",end:d,hover:n,renderTile:function(p){var g=p.date,v=s0(p,["date"]);return _.jsx(pR,Kd({},u,v,{activeStartDate:t,date:g}),g.getTime())},start:c,value:i,valueType:a})}var Ud=function(){return Ud=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Ud.apply(this,arguments)};function gR(e){function t(){return _.jsx(mR,Ud({},e))}return _.jsx("div",{className:"react-calendar__year-view",children:t()})}var Vd=function(){return Vd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Vd.apply(this,arguments)},yR=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n},Zf="react-calendar__month-view__days__day";function vR(e){var t=e.calendarType,n=e.classes,i=n===void 0?[]:n,a=e.currentMonthIndex,u=e.formatDay,c=u===void 0?MM:u,d=e.formatLongDate,h=d===void 0?RM:d,p=yR(e,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),g=p.date,v=p.locale,x=[];return i&&x.push.apply(x,i),x.push(Zf),uw(g,t)&&x.push("".concat(Zf,"--weekend")),g.getMonth()!==a&&x.push("".concat(Zf,"--neighboringMonth")),_.jsx(Sl,Vd({},p,{classes:x,formatAbbr:h,maxDateTransform:jh,minDateTransform:gu,view:"month",children:c(v,g)}))}var Gd=function(){return Gd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Gd.apply(this,arguments)},u0=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n};function wR(e){var t=e.activeStartDate,n=e.calendarType,i=e.hover,a=e.showFixedNumberOfWeeks,u=e.showNeighboringMonth,c=e.value,d=e.valueType,h=u0(e,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),p=Ht(t),g=to(t),v=a||u,x=ou(t,n),b=v?0:x,C=(v?-x:0)+1,A=function(){if(a)return C+6*7-1;var R=nw(t);if(u){var $=new Date;$.setFullYear(p,g,R),$.setHours(0,0,0,0);var q=7-ou($,n)-1;return R+q}return R}();return _.jsx(_l,{className:"react-calendar__month-view__days",count:7,dateTransform:function(R){var $=new Date;return $.setFullYear(p,g,R),gu($)},dateType:"day",hover:i,end:A,renderTile:function(R){var $=R.date,q=u0(R,["date"]);return _.jsx(vR,Gd({},h,q,{activeStartDate:t,calendarType:n,currentMonthIndex:g,date:$}),$.getTime())},offset:b,start:C,value:c,valueType:d})}var lw="react-calendar__month-view__weekdays",Qf="".concat(lw,"__weekday");function xR(e){for(var t=e.calendarType,n=e.formatShortWeekday,i=n===void 0?jM:n,a=e.formatWeekday,u=a===void 0?LM:a,c=e.locale,d=e.onMouseLeave,h=new Date,p=ea(h),g=Ht(p),v=to(p),x=[],b=1;b<=7;b+=1){var C=new Date(g,v,b-ou(p,t)),A=u(c,C);x.push(_.jsx("div",{className:yr(Qf,ZM(C)&&"".concat(Qf,"--current"),uw(C,t)&&"".concat(Qf,"--weekend")),children:_.jsx("abbr",{"aria-label":A,title:A,children:i(c,C).replace(".","")})},b))}return _.jsx(Fh,{className:lw,count:7,onFocus:d,onMouseOver:d,children:x})}var Yc=function(){return Yc=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Yc.apply(this,arguments)},c0=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n},l0="react-calendar__tile";function bR(e){var t=e.onClickWeekNumber,n=e.weekNumber,i=_.jsx("span",{children:n});if(t){var a=e.date,u=e.onClickWeekNumber,c=e.weekNumber,d=c0(e,["date","onClickWeekNumber","weekNumber"]);return _.jsx("button",Yc({},d,{className:l0,onClick:function(h){return u(c,a,h)},type:"button",children:i}))}else{e.date,e.onClickWeekNumber,e.weekNumber;var d=c0(e,["date","onClickWeekNumber","weekNumber"]);return _.jsx("div",Yc({},d,{className:l0,children:i}))}}function _R(e){var t=e.activeStartDate,n=e.calendarType,i=e.onClickWeekNumber,a=e.onMouseLeave,u=e.showFixedNumberOfWeeks,c=function(){if(u)return 6;var p=nw(t),g=ou(t,n),v=p-(7-g);return 1+Math.ceil(v/7)}(),d=function(){for(var p=Ht(t),g=to(t),v=vl(t),x=[],b=0;b<c;b+=1)x.push(Ld(new Date(p,g,v+b*7),n));return x}(),h=d.map(function(p){return HM(p,n)});return _.jsx(Fh,{className:"react-calendar__month-view__weekNumbers",count:c,direction:"column",onFocus:a,onMouseOver:a,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0},children:h.map(function(p,g){var v=d[g];if(!v)throw new Error("date is not defined");return _.jsx(bR,{date:v,onClickWeekNumber:i,weekNumber:p},p)})})}var Xd=function(){return Xd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Xd.apply(this,arguments)},SR=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n};function ER(e){if(e)for(var t=0,n=Object.entries(EM);t<n.length;t++){var i=n[t],a=i[0],u=i[1];if(u.includes(e))return a}return _n.ISO_8601}function NR(e){var t=e.activeStartDate,n=e.locale,i=e.onMouseLeave,a=e.showFixedNumberOfWeeks,u=e.calendarType,c=u===void 0?ER(n):u,d=e.formatShortWeekday,h=e.formatWeekday,p=e.onClickWeekNumber,g=e.showWeekNumbers,v=SR(e,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function x(){return _.jsx(xR,{calendarType:c,formatShortWeekday:d,formatWeekday:h,locale:n,onMouseLeave:i})}function b(){return g?_.jsx(_R,{activeStartDate:t,calendarType:c,onClickWeekNumber:p,onMouseLeave:i,showFixedNumberOfWeeks:a}):null}function C(){return _.jsx(wR,Xd({calendarType:c},v))}var A="react-calendar__month-view";return _.jsx("div",{className:yr(A,g?"".concat(A,"--weekNumbers"):""),children:_.jsxs("div",{style:{display:"flex",alignItems:"flex-end"},children:[b(),_.jsxs("div",{style:{flexGrow:1,width:"100%"},children:[x(),C()]})]})})}var $a=function(){return $a=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},$a.apply(this,arguments)},yc="react-calendar",Nc=["century","decade","year","month"],kR=["decade","year","month","day"],Wh=new Date;Wh.setFullYear(1,0,1);Wh.setHours(0,0,0,0);var TR=new Date(864e13);function zs(e){return e instanceof Date?e:new Date(e)}function fw(e,t){return Nc.slice(Nc.indexOf(e),Nc.indexOf(t)+1)}function CR(e,t,n){var i=fw(t,n);return i.indexOf(e)!==-1}function Bh(e,t,n){return e&&CR(e,t,n)?e:n}function dw(e){var t=Nc.indexOf(e);return kR[t]}function OR(e,t){var n=Array.isArray(e)?e[t]:e;if(!n)return null;var i=zs(n);if(Number.isNaN(i.getTime()))throw new Error("Invalid date: ".concat(e));return i}function hw(e,t){var n=e.value,i=e.minDate,a=e.maxDate,u=e.maxDetail,c=OR(n,t);if(!c)return null;var d=dw(u),h=function(){switch(t){case 0:return Uo(d,c);case 1:return ow(d,c);default:throw new Error("Invalid index value: ".concat(t))}}();return eR(h,i,a)}var zh=function(e){return hw(e,0)},pw=function(e){return hw(e,1)},AR=function(e){return[zh,pw].map(function(t){return t(e)})};function mw(e){var t=e.maxDate,n=e.maxDetail,i=e.minDate,a=e.minDetail,u=e.value,c=e.view,d=Bh(c,a,n),h=zh({value:u,minDate:i,maxDate:t,maxDetail:n})||new Date;return Uo(d,h)}function DR(e){var t=e.activeStartDate,n=e.defaultActiveStartDate,i=e.defaultValue,a=e.defaultView,u=e.maxDate,c=e.maxDetail,d=e.minDate,h=e.minDetail,p=e.value,g=e.view,v=Bh(g,h,c),x=t||n;return x?Uo(v,x):mw({maxDate:u,maxDetail:c,minDate:d,minDetail:h,value:p||i,view:g||a})}function Jf(e){return e&&(!Array.isArray(e)||e.length===1)}function vc(e,t){return e instanceof Date&&t instanceof Date&&e.getTime()===t.getTime()}var ed=N.forwardRef(function(t,n){var i=t.activeStartDate,a=t.allowPartialRange,u=t.calendarType,c=t.className,d=t.defaultActiveStartDate,h=t.defaultValue,p=t.defaultView,g=t.formatDay,v=t.formatLongDate,x=t.formatMonth,b=t.formatMonthYear,C=t.formatShortWeekday,A=t.formatWeekday,R=t.formatYear,$=t.goToRangeStartOnSelect,q=$===void 0?!0:$,te=t.inputRef,F=t.locale,ue=t.maxDate,ce=ue===void 0?TR:ue,Y=t.maxDetail,Q=Y===void 0?"month":Y,se=t.minDate,J=se===void 0?Wh:se,U=t.minDetail,re=U===void 0?"century":U,ve=t.navigationAriaLabel,M=t.navigationAriaLive,ae=t.navigationLabel,L=t.next2AriaLabel,pe=t.next2Label,oe=t.nextAriaLabel,G=t.nextLabel,de=t.onActiveStartDateChange,ge=t.onChange,Se=t.onClickDay,Te=t.onClickDecade,Re=t.onClickMonth,Me=t.onClickWeekNumber,Be=t.onClickYear,Ke=t.onDrillDown,Ve=t.onDrillUp,Ee=t.onViewChange,rt=t.prev2AriaLabel,xt=t.prev2Label,ze=t.prevAriaLabel,Nt=t.prevLabel,Ge=t.returnValue,it=Ge===void 0?"start":Ge,Et=t.selectRange,et=t.showDoubleView,We=t.showFixedNumberOfWeeks,Ft=t.showNavigation,Wt=Ft===void 0?!0:Ft,bt=t.showNeighboringCentury,an=t.showNeighboringDecade,qt=t.showNeighboringMonth,sn=qt===void 0?!0:qt,Qt=t.showWeekNumbers,Yt=t.tileClassName,tn=t.tileContent,Kt=t.tileDisabled,un=t.value,fn=t.view,_t=N.useState(d),Bt=_t[0],Ut=_t[1],$t=N.useState(null),je=$t[0],zt=$t[1],le=N.useState(Array.isArray(h)?h.map(function(ot){return ot!==null?zs(ot):null}):h!=null?zs(h):null),xe=le[0],fe=le[1],Oe=N.useState(p),Le=Oe[0],qe=Oe[1],Ue=i||Bt||DR({activeStartDate:i,defaultActiveStartDate:d,defaultValue:h,defaultView:p,maxDate:ce,maxDetail:Q,minDate:J,minDetail:re,value:un,view:fn}),Ze=function(){var ot=function(){return Et&&Jf(xe)?xe:un!==void 0?un:xe}();return ot?Array.isArray(ot)?ot.map(function(vt){return vt!==null?zs(vt):null}):ot!==null?zs(ot):null:null}(),En=dw(Q),ct=Bh(fn||Le,re,Q),jt=fw(re,Q),Fn=Et?je:null,xr=jt.indexOf(ct)<jt.length-1,br=jt.indexOf(ct)>0,St=N.useCallback(function(ot){var vt=function(){switch(it){case"start":return zh;case"end":return pw;case"range":return AR;default:throw new Error("Invalid returnValue.")}}();return vt({maxDate:ce,maxDetail:Q,minDate:J,value:ot})},[ce,Q,J,it]),Mt=N.useCallback(function(ot,vt){Ut(ot);var Dt={action:vt,activeStartDate:ot,value:Ze,view:ct};de&&!vc(Ue,ot)&&de(Dt)},[Ue,de,Ze,ct]),ar=N.useCallback(function(ot,vt){var Dt=function(){switch(ct){case"century":return Te;case"decade":return Be;case"year":return Re;case"month":return Se;default:throw new Error("Invalid view: ".concat(ct,"."))}}();Dt&&Dt(ot,vt)},[Se,Te,Re,Be,ct]),sr=N.useCallback(function(ot,vt){if(xr){ar(ot,vt);var Dt=jt[jt.indexOf(ct)+1];if(!Dt)throw new Error("Attempted to drill down from the lowest view.");Ut(ot),qe(Dt);var Vt={action:"drillDown",activeStartDate:ot,value:Ze,view:Dt};de&&!vc(Ue,ot)&&de(Vt),Ee&&ct!==Dt&&Ee(Vt),Ke&&Ke(Vt)}},[Ue,xr,de,ar,Ke,Ee,Ze,ct,jt]),ur=N.useCallback(function(){if(br){var ot=jt[jt.indexOf(ct)-1];if(!ot)throw new Error("Attempted to drill up from the highest view.");var vt=Uo(ot,Ue);Ut(vt),qe(ot);var Dt={action:"drillUp",activeStartDate:vt,value:Ze,view:ot};de&&!vc(Ue,vt)&&de(Dt),Ee&&ct!==ot&&Ee(Dt),Ve&&Ve(Dt)}},[Ue,br,de,Ve,Ee,Ze,ct,jt]),cr=N.useCallback(function(ot,vt){var Dt=Ze;ar(ot,vt);var Vt=Et&&!Jf(Dt),mn;if(Et)if(Vt)mn=Uo(En,ot);else{if(!Dt)throw new Error("previousValue is required");if(Array.isArray(Dt))throw new Error("previousValue must not be an array");mn=GM(En,Dt,ot)}else mn=St(ot);var _r=!Et||Vt||q?mw({maxDate:ce,maxDetail:Q,minDate:J,minDetail:re,value:mn,view:ct}):null;vt.persist(),Ut(_r),fe(mn);var It={action:"onChange",activeStartDate:_r,value:mn,view:ct};if(de&&!vc(Ue,_r)&&de(It),ge)if(Et){var vn=Jf(mn);if(!vn)ge(mn||null,vt);else if(a){if(Array.isArray(mn))throw new Error("value must not be an array");ge([mn||null,null],vt)}}else ge(mn||null,vt)},[Ue,a,St,q,ce,Q,J,re,de,ge,ar,Et,Ze,En,ct]);function ro(ot){zt(ot)}function Nn(){zt(null)}N.useImperativeHandle(n,function(){return{activeStartDate:Ue,drillDown:sr,drillUp:ur,onChange:cr,setActiveStartDate:Mt,value:Ze,view:ct}},[Ue,sr,ur,cr,Mt,Ze,ct]);function Gn(ot){var vt=ot?iw(ct,Ue):Uo(ct,Ue),Dt=xr?sr:cr,Vt={activeStartDate:vt,hover:Fn,locale:F,maxDate:ce,minDate:J,onClick:Dt,onMouseOver:Et?ro:void 0,tileClassName:Yt,tileContent:tn,tileDisabled:Kt,value:Ze,valueType:En};switch(ct){case"century":return _.jsx(sR,$a({formatYear:R,showNeighboringCentury:bt},Vt));case"decade":return _.jsx(fR,$a({formatYear:R,showNeighboringDecade:an},Vt));case"year":return _.jsx(gR,$a({formatMonth:x,formatMonthYear:b},Vt));case"month":return _.jsx(NR,$a({calendarType:u,formatDay:g,formatLongDate:v,formatShortWeekday:C,formatWeekday:A,onClickWeekNumber:Me,onMouseLeave:Et?Nn:void 0,showFixedNumberOfWeeks:typeof We<"u"?We:et,showNeighboringMonth:sn,showWeekNumbers:Qt},Vt));default:throw new Error("Invalid view: ".concat(ct,"."))}}function In(){return Wt?_.jsx(QM,{activeStartDate:Ue,drillUp:ur,formatMonthYear:b,formatYear:R,locale:F,maxDate:ce,minDate:J,navigationAriaLabel:ve,navigationAriaLive:M,navigationLabel:ae,next2AriaLabel:L,next2Label:pe,nextAriaLabel:oe,nextLabel:G,prev2AriaLabel:rt,prev2Label:xt,prevAriaLabel:ze,prevLabel:Nt,setActiveStartDate:Mt,showDoubleView:et,view:ct,views:jt}):null}var Hr=Array.isArray(Ze)?Ze:[Ze];return _.jsxs("div",{className:yr(yc,Et&&Hr.length===1&&"".concat(yc,"--selectRange"),et&&"".concat(yc,"--doubleView"),c),ref:te,children:[In(),_.jsxs("div",{className:"".concat(yc,"__viewContainer"),onBlur:Et?Nn:void 0,onMouseLeave:Et?Nn:void 0,children:[Gn(),et?Gn(!0):null]})]})});function IR({onSelect:e,onClose:t,showTime:n=!0,isBetweenMode:i=!1}){const[a,u]=N.useState(new Date),[c,d]=N.useState(new Date),[h,p]=N.useState(jn(new Date,"HH")),[g,v]=N.useState(jn(new Date,"mm")),[x,b]=N.useState(jn(new Date,"ss")),[C,A]=N.useState(jn(new Date,"HH")),[R,$]=N.useState(jn(new Date,"mm")),[q,te]=N.useState(jn(new Date,"ss")),[F,ue]=N.useState(!1),[ce,Y]=N.useState(!1),Q=N.useRef(null);N.useEffect(()=>{function U(re){Q.current&&!Q.current.contains(re.target)&&t()}return document.addEventListener("mousedown",U),()=>document.removeEventListener("mousedown",U)},[t]),N.useEffect(()=>{function U(re){re.key==="Enter"&&(re.preventDefault(),re.stopPropagation(),se(),t())}return document.addEventListener("keydown",U),()=>document.removeEventListener("keydown",U)},[a,c,h,g,x,C,R,q,i,t]);const se=()=>{if(i){const U=new Date(a);U.setHours(parseInt(h),parseInt(g),parseInt(x));const re=new Date(c);re.setHours(parseInt(C),parseInt(R),parseInt(q)),e({start:U,end:re})}else{const U=new Date(a);U.setHours(parseInt(h),parseInt(g),parseInt(x)),e({start:U})}t()},J=({label:U,hours:re,minutes:ve,seconds:M,setHours:ae,setMinutes:L,setSeconds:pe})=>_.jsxs("div",{className:"flex flex-col gap-2",children:[_.jsx("div",{className:"text-sm font-medium text-gray-700",children:U}),_.jsxs("div",{className:"flex justify-between items-center gap-4 p-4 bg-gray-50 rounded-lg",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("input",{type:"number",min:"0",max:"23",value:re,onChange:oe=>ae(oe.target.value.padStart(2,"0")),className:"w-16 px-3 py-2 bg-white border rounded-md text-center text-lg font-medium text-gray-700"}),_.jsx("span",{className:"text-gray-500 text-sm",children:"hrs"})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("input",{type:"number",min:"0",max:"59",value:ve,onChange:oe=>L(oe.target.value.padStart(2,"0")),className:"w-16 px-3 py-2 bg-white border rounded-md text-center text-lg font-medium text-gray-700"}),_.jsx("span",{className:"text-gray-500 text-sm",children:"min"})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("input",{type:"number",min:"0",max:"59",value:M,onChange:oe=>pe(oe.target.value.padStart(2,"0")),className:"w-16 px-3 py-2 bg-white border rounded-md text-center text-lg font-medium text-gray-700"}),_.jsx("span",{className:"text-gray-500 text-sm",children:"sec"})]})]})]});return _.jsxs("div",{ref:Q,className:"bg-white rounded-lg shadow-xl p-4 w-[400px]",style:{marginTop:"0.5rem"},children:[_.jsxs("div",{className:"flex items-center justify-between mb-4 border-b pb-2",children:[_.jsx("h3",{className:"text-lg font-medium text-gray-700",children:i?"Select Date Range":"Select Date"}),_.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:""})]}),i?_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{children:[_.jsxs("button",{onClick:()=>ue(!F),className:"flex items-center gap-2 hover:bg-gray-50 px-2 py-1 rounded-md",children:[_.jsx("span",{className:"text-gray-600",children:""}),_.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Start: ",jn(a,"EEE MMM dd yyyy")]})]}),F&&_.jsx(ed,{onChange:U=>{u(U),ue(!1)},value:a,className:"border-0 mt-2"}),n&&_.jsx(J,{label:"Start Time",hours:h,minutes:g,seconds:x,setHours:p,setMinutes:v,setSeconds:b})]}),_.jsxs("div",{children:[_.jsxs("button",{onClick:()=>Y(!ce),className:"flex items-center gap-2 hover:bg-gray-50 px-2 py-1 rounded-md",children:[_.jsx("span",{className:"text-gray-600",children:""}),_.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["End: ",jn(c,"EEE MMM dd yyyy")]})]}),ce&&_.jsx(ed,{onChange:U=>{d(U),Y(!1)},value:c,className:"border-0 mt-2"}),n&&_.jsx(J,{label:"End Time",hours:C,minutes:R,seconds:q,setHours:A,setMinutes:$,setSeconds:te})]})]}):_.jsxs(_.Fragment,{children:[_.jsxs("button",{onClick:()=>ue(!F),className:"flex items-center gap-2 hover:bg-gray-50 px-2 py-1 rounded-md mb-4",children:[_.jsx("span",{className:"text-gray-600",children:""}),_.jsx("span",{className:"text-lg font-medium text-gray-700",children:jn(a,"EEE MMM dd yyyy")})]}),F&&_.jsx("div",{className:"mb-4",children:_.jsx(ed,{onChange:U=>{u(U),ue(!1)},value:a,className:"border-0"})}),n&&_.jsx(J,{label:"Time",hours:h,minutes:g,seconds:x,setHours:p,setMinutes:v,setSeconds:b})]}),_.jsx("button",{onClick:se,className:"w-full mt-4 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:"Apply"})]})}function PR({isOpen:e,onClose:t}){const[n,i]=N.useState([]),[a,u]=N.useState(""),[c,d]=N.useState([]),[h,p]=N.useState("");N.useEffect(()=>{e&&(async()=>{const R=await tu("namespaces"),$=await tu("searchParameters");R&&i(R),$&&d($)})()},[e]);const g=async()=>{await bd("namespaces",n),await bd("searchParameters",c),t()},v=()=>{a&&!n.includes(a)&&(i([...n,a]),u(""))},x=A=>{i(n.filter((R,$)=>$!==A))},b=()=>{const A=h.split(",").map(R=>R.trim()).filter(R=>R&&!c.includes(R));A.length&&(d([...c,...A]),p(""))},C=A=>{d(c.filter((R,$)=>$!==A))};return e?_.jsxs(Fv,{open:e,onClose:t,className:"relative z-[2000]",children:[_.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),_.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:_.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:_.jsxs(Dh,{className:"w-[600px] transform overflow-hidden rounded-lg bg-white text-left align-middle shadow-xl transition-all",children:[_.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[_.jsx("h2",{className:"text-xl font-semibold",children:"Search Settings"}),_.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full","aria-label":"Close",children:_.jsx(Hs,{size:20})})]}),_.jsxs("div",{className:"p-6 overflow-y-auto",children:[_.jsxs("div",{className:"mb-6",children:[_.jsx("h3",{className:"text-lg font-medium mb-2",children:"Namespaces"}),_.jsxs("div",{className:"flex gap-2 mb-2",children:[_.jsx("input",{type:"text",value:a,onChange:A=>u(A.target.value),onKeyDown:A=>A.key==="Enter"&&v(),placeholder:"Add namespace...",className:"flex-1 p-2 border rounded"}),_.jsx("button",{onClick:v,className:"p-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:_.jsx(wg,{size:20})})]}),_.jsx("div",{className:"flex flex-wrap gap-2",children:n.map((A,R)=>_.jsxs("div",{className:"bg-gray-100 px-3 py-1 rounded-full flex items-center gap-2",children:[_.jsx("span",{children:A}),_.jsx("button",{onClick:()=>x(R),className:"hover:text-red-500",children:_.jsx(Hs,{size:16})})]},R))})]}),_.jsxs("div",{children:[_.jsx("h3",{className:"text-lg font-medium mb-2",children:"Search Parameters"}),_.jsxs("div",{className:"flex gap-2 mb-2",children:[_.jsx("input",{type:"text",value:h,onChange:A=>p(A.target.value),onKeyDown:A=>A.key==="Enter"&&b(),placeholder:"Add parameters (comma-separated)...",className:"flex-1 p-2 border rounded"}),_.jsx("button",{onClick:b,className:"p-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:_.jsx(wg,{size:20})})]}),_.jsx("div",{className:"flex flex-wrap gap-2",children:c.map((A,R)=>_.jsxs("div",{className:"bg-gray-100 px-3 py-1 rounded-full flex items-center gap-2",children:[_.jsx("span",{children:A}),_.jsx("button",{onClick:()=>C(R),className:"hover:text-red-500",children:_.jsx(Hs,{size:16})})]},R))})]})]}),_.jsxs("div",{className:"p-4 border-t flex justify-end gap-2",children:[_.jsx("button",{onClick:t,className:"px-4 py-2 border rounded hover:bg-gray-50",children:"Cancel"}),_.jsx("button",{onClick:g,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Save"})]})]})})})]}):null}function MR({isOpen:e,onClose:t,onTemporalModalSubmit:n,onShowNodeData:i}){const[a,u]=N.useState(""),[c,d]=N.useState([]),[h,p]=N.useState([]),[g,v]=N.useState(!1),[x,b]=N.useState(-1),[C,A]=N.useState(!1),[R,$]=N.useState(!1),q=ne.useRef(null),[te,F]=N.useState(null),[ue,ce]=N.useState(null),Y=N.useRef(null),[Q,se]=N.useState(!1),[J,U]=N.useState([]),[re,ve]=N.useState([]),[M,ae]=N.useState(""),[L,pe]=N.useState([]),[oe,G]=N.useState(1),[de,ge]=N.useState(1),[Se,Te]=N.useState([{id:"status",label:"Status",width:120},{id:"taskQueue",label:"Task Queue",width:150},{id:"workflowType",label:"Workflow Type",width:180},{id:"execution",label:"Workflow ID",width:200},{id:"execution",label:"Run ID",width:200},{id:"duration",label:"Duration",width:180},{id:"startTime",label:"Start Time",width:180},{id:"closeTime",label:"Close Time",width:180}]),[Re,Me]=N.useState(!1),[Be,Ke]=N.useState(!1),[Ve,Ee]=N.useState(!1),rt=Yo(iv),xt=async()=>{const le=await tu("searchParameters");if(le){const xe=le.map(fe=>({id:fe,label:fe,type:"text"}));U(xe)}},ze=async()=>{const le=await tu("namespaces")||[];ve(le),!M&&le.length>0&&ae(le[0])};N.useEffect(()=>{e&&xt()},[e]),N.useEffect(()=>{ze()},[e]),N.useEffect(()=>{(async()=>{if(e&&M){const xe=bt();Me(!0);try{const fe=await Og(M,xe);pe(fe.executions||[]),ge(Math.min(Math.ceil(fe.executions.length/100),10)),G(1)}catch(fe){console.error("Error executing initial search:",fe)}finally{Me(!1)}}})()},[e,M]),N.useEffect(()=>{if(Ve){const le=()=>{document.querySelectorAll('[data-workflow-loaded="true"]').length>0?(Ee(!1),t()):setTimeout(le,500)};setTimeout(le,1e3)}},[Ve,t]);const Nt=le=>{if(le.type==="datetime")return gc.map(fe=>({text:`${le.label} ${fe.label}`,disabled:!1}));if(le.type==="status"){const fe=c.filter(Oe=>Oe.field==="ExecutionStatus").map(Oe=>Oe.value);return Uf.filter(Oe=>!fe.includes(Oe.value)).map(Oe=>({text:`${le.label} = '${Oe.value}'`,displayText:Oe.value,disabled:!1,color:Oe.color}))}return Hg.filter(fe=>["equals","notEquals","starts_with"].includes(fe.id)).map(fe=>({text:`${le.label} ${fe.label}`,disabled:!1}))},Ge=()=>c.filter(le=>le.field==="ExecutionStatus").flatMap(le=>{const xe=le.raw.match(/Status\s*=\s*'([^']+)'/gi);return xe?xe.map(fe=>{const Oe=fe.match(/Status\s*=\s*['"]([^'"]+)['"]/i);return(Oe==null?void 0:Oe[1])??""}):[]}),it=le=>{const xe=le.toLowerCase().trim();if(xe.startsWith("status")){const Le=Ge();return Uf.filter(qe=>!Le.includes(qe.value)).map(qe=>{var Ue;return{text:`Status = '${qe.value}'`,fullText:c.some(Ze=>Ze.field==="ExecutionStatus")?`${(Ue=c.find(Ze=>Ze.field==="ExecutionStatus"))==null?void 0:Ue.raw} OR Status = '${qe.value}'`:`Status = '${qe.value}'`,displayText:qe.value,disabled:!1,color:qe.color}})}if(C)return[];const fe=[...gi,...J],Oe=new Set(c.map(Le=>Le.field));return fe.filter(Le=>Le.label.toLowerCase().includes(xe)).map(Le=>({text:Le.label,disabled:Le.type!=="status"&&Oe.has(Le.id)}))},Et=le=>{const xe=le.target.value;if(u(xe),xe.endsWith(" ")){const fe=xe.trim().split(/\s+/);if(fe.length===2){const[Oe,Le]=fe,qe=gi.find(Ze=>Oe.toLowerCase()===Ze.label.toLowerCase()&&Ze.type==="datetime"),Ue=gc.some(Ze=>Ze.label===Le||Ze.alternatives.includes(Le));qe&&Ue&&(ce(qe.label),Yt())}}if((!xe.trim()||xe.trim().toLowerCase()==="status")&&$(!1),!R||xe.trim().toLowerCase()==="status"){b(-1);const fe=it(xe);p(fe),fe.length>0&&b(0)}},et=le=>le.match(/^Status\s*=\s*['"][^'"]+['"](\s+OR\s+Status\s*=\s*['"][^'"]+['"])*$/i)?{field:"ExecutionStatus",operator:"equals",value:le,raw:le,isValid:!0}:null,We=le=>{if(!g){if(le.key==="Backspace"&&a.length<=1&&$(!1),h.length>0&&!R&&(le.key==="ArrowDown"?(le.preventDefault(),b(xe=>xe<h.length-1?xe+1:xe)):le.key==="ArrowUp"?(le.preventDefault(),b(xe=>xe>0?xe-1:0)):le.key==="Enter"&&x>=0&&(le.preventDefault(),qt(h[x]))),le.key==="Enter"||le.key==="Tab"){le.preventDefault();const xe=a.trim();if(xe.length===0&&c.length>0){Wt();return}if(xe.toLowerCase().startsWith("status")){const fe=et(xe);fe&&(d(Oe=>[...Oe.filter(Le=>Le.field!=="ExecutionStatus"),fe]),u(""),$(!1),p([]))}else{const fe=sn(xe);fe&&fe.isValid&&(d(Oe=>[...Oe,fe]),u(""),$(!1),p([]))}}else if(le.key==="Backspace"&&a.trim()===""&&c.length>0){le.preventDefault();const xe=c[c.length-1];xe.field==="ExecutionStatus"?(d(c.filter(fe=>fe.field!=="ExecutionStatus")),u(xe.raw),$(!0),p([])):an(c.length-1)}if(le.key===" "){const xe=a.trim().split(/\s+/),fe=xe[0],Oe=gi.find(Le=>fe.toLowerCase()===Le.label.toLowerCase()&&Le.type==="datetime");if(Oe&&(ce(Oe.label),xe.length===2)){const Le=xe[1];gc.some(Ue=>Ue.label===Le||Ue.alternatives.includes(Le))&&Yt()}}}},Ft=le=>{const[xe,fe]=a.trim().split(/\s+/);if(gi.find(Le=>xe.toLowerCase()===Le.label.toLowerCase())&&fe){let Le;if(fe.toLowerCase()==="between"&&le.start&&le.end){const qe=jn(le.start,"yyyy-MM-dd HH:mm:ss"),Ue=jn(le.end,"yyyy-MM-dd HH:mm:ss"),Ze=`${xe} between '${qe}' and '${Ue}'`;Le=sn(Ze)}else if(le.start){const qe=jn(le.start,"yyyy-MM-dd HH:mm:ss"),Ue=`${xe} ${fe} '${qe}'`;Le=sn(Ue)}Le&&(d(qe=>[...qe,Le]),u(""),v(!1),ce(null),p([]),b(-1))}},Wt=async()=>{const le=bt();console.log("searchQuery",le),Me(!0);try{const xe=await Og(M,le);pe(xe.executions||[]),ge(Math.min(Math.ceil(xe.executions.length/100),10)),G(1)}catch(xe){console.error("Error executing search:",xe)}finally{Me(!1)}},bt=()=>{const le=[];return c.forEach(xe=>{if(xe.field==="ExecutionStatus"){const fe=xe.raw.split(/\s+OR\s+/).map(Oe=>{const Le=Oe.match(/Status\s*=\s*['"]([^'"]+)['"]/i);return Le?`\`ExecutionStatus\`="${Le[1]}"`:null}).filter(Boolean);fe.length>0&&le.push(`(${fe.join(" OR ")})`)}else if(xe.operator==="between"&&xe.value){const[fe,Oe]=xe.value.split(" and ");le.push(`\`${xe.field}\` BETWEEN "${fe}" AND "${Oe}"`)}else le.push(`\`${xe.field}\` ${xe.operator} "${xe.value}"`)}),le.length===0?"":le.join(" AND ")},an=le=>{var Oe;const xe=c[le],fe=gi.find(Le=>Le.id===xe.field);if((fe==null?void 0:fe.type)==="datetime"){d(c.filter((Le,qe)=>qe!==le));return}if(xe.field==="ExecutionStatus"){const Le=c.filter(qe=>qe.field!=="ExecutionStatus");d(Le),u(xe.raw),$(!0),p([])}else d(c.filter((Le,qe)=>qe!==le)),u(xe.raw);A(!1),(Oe=Y.current)==null||Oe.focus()},qt=le=>{var xe;if(!le.disabled){if(le.color){const fe=c.filter(qe=>qe.field==="ExecutionStatus"),Oe=c.filter(qe=>qe.field!=="ExecutionStatus");let Le;if(fe.length>0){const qe=`${fe[0].raw} OR Status = '${le.displayText}'`;Le=et(qe)}else Le=et(`Status = '${le.displayText}'`);if(Le){const qe=c.findIndex(Ze=>Ze.field==="ExecutionStatus"),Ue=[...Oe];qe>=0?Ue.splice(qe,0,Le):Ue.push(Le),d(Ue)}u(""),p([]),$(!1)}else{const fe=le.text.split(/\s+/);if(u(le.text+" "),fe.length===2){const[Oe,Le]=fe,qe=gi.find(Ze=>Oe.toLowerCase()===Ze.label.toLowerCase()&&Ze.type==="datetime"),Ue=gc.some(Ze=>Ze.label===Le||Ze.alternatives.includes(Le));qe&&Ue&&(ce(qe.label),requestAnimationFrame(()=>{Yt()}))}else{const Oe=gi.find(Le=>Le.label===le.text);p(Oe?Nt(Oe):[]),b(0),A(!1),v(!1)}}(xe=Y.current)==null||xe.focus()}},sn=le=>{if(!le.trim())return null;const xe=/^([a-zA-Z]+)\s*(=|!=|>|>=|<|<=|between|starts\s*with)\s*['"]([^'"]+)['"](?:\s+and\s+['"]([^'"]+)['"])?$/,fe=le.match(xe);if(!fe)return{field:"",operator:"",value:null,raw:le,isValid:!1};let[,Oe,Le,qe,Ue]=fe;const Ze=gi.find(ct=>Oe.toLowerCase()===ct.label.toLowerCase()),En=Hg.find(ct=>ct.label===Le||ct.alternatives.includes(Le.toLowerCase())||ct.searchOperator===Le);if(!En)return{field:"",operator:"",value:null,raw:le,isValid:!1};if((Ze==null?void 0:Ze.type)==="datetime"){const ct=new Date(qe);qe=jn(ct,"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"),Ue=Ue?jn(new Date(Ue),"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"):""}return{field:Ze?Ze.id:Oe,operator:En.searchOperator,value:Ue?`${qe} and ${Ue}`:qe,raw:le,isValid:!0}},Qt=le=>le.isValid?le.field==="ExecutionStatus"||[...gi,...J].some(fe=>fe.id.toLowerCase()===le.field.toLowerCase())?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800";ne.useEffect(()=>{q.current&&q.current.scrollIntoView({block:"nearest"})},[x]);const Yt=()=>{var fe;if(!Y.current)return;const le=(fe=Y.current)==null?void 0:fe.getBoundingClientRect(),xe=document.querySelector('[role="dialog"]');if(le&&xe){const Oe=xe.getBoundingClientRect(),Le=(Oe.width-400)/2;F({x:Le,y:le.bottom-Oe.top+5}),v(!0)}},tn=async()=>{se(!1),await xt(),await ze()},Kt=le=>{le.stopPropagation(),se(!0)},un=()=>{p([]),b(-1)},fn=le=>{p([]),b(-1)},_t=(le,xe)=>{Te(fe=>{const Oe=[...fe];return Oe[le]={...Oe[le],width:xe},Oe})},Bt=le=>{const xe=Uf.find(fe=>fe.value.toLowerCase()===le.toLowerCase());return(xe==null?void 0:xe.color)||"gray"},Ut=le=>jn(new Date(le),"yyyy-MM-dd HH:mm:ss"),$t=async(le,xe)=>{xe.stopPropagation();try{const fe=await WA(M,le.execution.workflowId,le.execution.runId),Oe={x:Math.min(xe.clientX,window.innerWidth-600),y:Math.min(xe.clientY,window.innerHeight-400)};i?i(fe,Oe,3e3):rt({data:fe,position:Oe,baseZIndex:3e3})}catch(fe){console.error("Error fetching workflow details:",fe)}},je=()=>{const le=(oe-1)*100,xe=le+100,fe=L.slice(le,xe);return _.jsxs("div",{className:"flex flex-col h-full",children:[_.jsx("div",{className:"flex-none px-4 py-3 border-b bg-gray-50 z-[50]",children:_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",le+1,"-",Math.min(xe,L.length)," of"," ",L.length," results"]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("button",{onClick:()=>G(Oe=>Math.max(1,Oe-1)),disabled:oe===1,className:"p-1.5 rounded hover:bg-gray-200 disabled:opacity-50 disabled:hover:bg-transparent transition-colors",children:_.jsx(BO,{size:16})}),_.jsxs("span",{className:"text-sm font-medium",children:[oe," / ",de]}),_.jsx("button",{onClick:()=>G(Oe=>Math.min(de,Oe+1)),disabled:oe===de,className:"p-1.5 rounded hover:bg-gray-200 disabled:opacity-50 disabled:hover:bg-transparent transition-colors",children:_.jsx(zO,{size:16})})]})]})}),_.jsx("div",{className:"flex-1 overflow-auto",children:_.jsx("div",{className:"inline-block min-w-full align-middle",children:_.jsx("div",{className:"relative",children:_.jsxs("table",{className:"min-w-full border-collapse",children:[_.jsx("thead",{children:_.jsxs("tr",{children:[_.jsx("th",{className:"sticky top-0 border-b border-gray-200 bg-gray-50 z-10",style:{width:50},children:_.jsx("div",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"})}),Se.map((Oe,Le)=>_.jsxs("th",{className:"sticky top-0 border-b border-gray-200 bg-gray-50 z-10",style:{width:Oe.width},children:[_.jsx("div",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:Oe.label}),_.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1 cursor-col-resize hover:bg-blue-500 group",onMouseDown:qe=>{const Ue=qe.pageX,Ze=Oe.width,En=jt=>{const Fn=jt.pageX-Ue;_t(Le,Math.max(100,Ze+Fn))},ct=()=>{document.removeEventListener("mousemove",En),document.removeEventListener("mouseup",ct)};document.addEventListener("mousemove",En),document.addEventListener("mouseup",ct)},children:_.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-px bg-gray-200 group-hover:bg-blue-500"})})]},`${Oe.id}-${Le}`))]})}),_.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:fe.map(Oe=>_.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[_.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-left",children:_.jsxs("div",{className:"flex gap-2",children:[_.jsx("button",{onClick:Le=>{Le.stopPropagation(),Ee(!0),n({workflowId:Oe.execution.workflowId,namespace:M,runId:Oe.execution.runId}).then(()=>{Ee(!1),t()}).catch(qe=>{console.error("Error loading workflow:",qe),Ee(!1)})},className:"p-1 hover:bg-gray-200 rounded-full transition-colors",title:"View workflow details",children:_.jsx(Hy,{size:16,className:"text-gray-600"})}),_.jsx("button",{onClick:Le=>$t(Oe,Le),className:"p-1 hover:bg-gray-200 rounded-full transition-colors",title:"Quick view",children:_.jsx(HO,{size:16,className:"text-gray-600"})})]})}),_.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-left",children:_.jsx("div",{className:`inline-flex items-center gap-2 px-2.5 py-1 rounded-full text-xs font-medium
                          ${Bt(Oe.status)}`,children:Oe.status})}),_.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-left",children:Oe.taskQueue}),_.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-left",children:Oe.type.name}),_.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-medium text-left",children:Oe.execution.workflowId}),_.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 font-mono text-left",children:Oe.execution.runId}),_.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-left",children:ph(Oe.startTime,Oe.closeTime||new Date().toISOString())||""}),_.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-left",children:Ut(Oe.startTime)}),_.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-left",children:Oe.closeTime?Ut(Oe.closeTime):""})]},`${Oe.execution.workflowId}-${Oe.execution.runId}`))})]})})})})]})},zt=_.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[_.jsx("span",{className:"text-gray-700 font-medium",children:"Namespace:"}),_.jsxs("div",{className:"relative",children:[_.jsxs("button",{onClick:()=>Ke(!Be),className:"w-64 p-2 border rounded-lg bg-white flex items-center justify-between",children:[_.jsx("span",{children:M}),_.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform ${Be?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),Be&&_.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border rounded-lg shadow-lg",children:re.map(le=>_.jsx("button",{className:"w-full px-4 py-2 text-left hover:bg-gray-100 first:rounded-t-lg last:rounded-b-lg",onClick:()=>{ae(le),Ke(!1)},children:le},le))})]})]});return e?_.jsxs(_.Fragment,{children:[_.jsxs(Fv,{open:e,onClose:le=>{var xe;if(le===!1&&((xe=document.activeElement)==null?void 0:xe.tagName)==="BODY"){t();return}},className:"relative z-[1000]",children:[_.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true",onClick:le=>{le.preventDefault(),le.stopPropagation()},onMouseDown:le=>{const xe=document.querySelector("[data-node-panel]");if(xe&&(xe===le.target||xe.contains(le.target))){le.preventDefault(),le.stopPropagation();return}},onMouseUp:le=>{const xe=document.querySelector("[data-node-panel]");if(xe&&(xe===le.target||xe.contains(le.target))){le.preventDefault(),le.stopPropagation();return}le.preventDefault(),le.stopPropagation()}}),Ve&&_.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:_.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl flex items-center gap-4",children:[_.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-blue-500 border-t-transparent"}),_.jsx("span",{className:"text-gray-700",children:"Loading workflow..."})]})}),_.jsx("div",{className:"fixed inset-0",onClick:fn,children:_.jsx("div",{className:"flex min-h-full items-start justify-center p-4 text-center",children:_.jsxs(Dh,{className:"bg-white rounded-xl w-full max-w-[120rem] h-[90vh] flex flex-col shadow-2xl relative",onClick:le=>le.stopPropagation(),children:[_.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 rounded-full hover:bg-gray-100 transition-colors z-50","aria-label":"Close modal",children:_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-500",children:[_.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),_.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),_.jsxs("div",{className:"p-6 flex-none border-b relative",children:[zt,_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Search settings",onClick:Kt,children:_.jsx(KO,{size:20,className:"text-gray-600"})}),_.jsxs("div",{className:"flex-1",children:[_.jsxs("div",{className:"flex flex-wrap gap-2 items-center p-2 border rounded-lg bg-gray-50 min-h-[40px]",children:[c.map((le,xe)=>_.jsxs("div",{className:`px-2 py-1 rounded-md ${Qt(le)} flex items-center gap-1 group`,children:[_.jsx("span",{onClick:()=>an(xe),className:"flex-1 cursor-pointer",children:le.raw}),_.jsx("button",{onClick:fe=>{fe.stopPropagation(),d(Oe=>Oe.filter((Le,qe)=>qe!==xe))},className:"text-current opacity-50 hover:opacity-100 transition-opacity","aria-label":"Remove token",children:_.jsx(Hs,{size:14})})]},xe)),_.jsx("input",{ref:Y,type:"text",value:a,onChange:Et,onClick:un,onKeyDown:We,className:"flex-1 min-w-[200px] bg-transparent outline-none",placeholder:c.length>0?"Add another filter...":"Type to search. For example, WorkflowType = 'MyWorkflowType'"})]}),h.length>0&&_.jsx("div",{className:"absolute mt-1 w-1/2 max-h-60 overflow-auto rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[60]",children:h.map((le,xe)=>_.jsx("button",{ref:xe===x?q:null,className:`relative cursor-default select-none py-2 pl-3 pr-9 w-full text-left transition-colors ${le.disabled?"text-gray-400":"text-gray-900"} ${xe===x||le.disabled?"bg-gray-50":"bg-white hover:bg-gray-50"}`,onClick:()=>!le.disabled&&qt(le),disabled:le.disabled,children:_.jsx("span",{className:`inline-block truncate ${le.color?RR(le.color,!1):""}`,children:le.displayText||le.text})},xe))})]}),_.jsx("button",{onClick:Wt,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Search"})]})]}),_.jsx("div",{className:"flex-1 overflow-y-auto",children:Re?_.jsx("div",{className:"flex items-center justify-center h-full",children:_.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-gray-200 border-t-blue-500"})}):L.length>0?je():_.jsx("div",{className:"p-6 text-center text-gray-500",children:"No results to display. Try searching for workflows above."})}),g&&te&&_.jsx("div",{className:"absolute z-[999]",style:{top:"100px"},children:_.jsx(IR,{onSelect:Ft,onClose:()=>{v(!1),F(null)},position:te,showTime:!0,isBetweenMode:a.toLowerCase().includes("between")})})]})})})]}),_.jsx(PR,{isOpen:Q,onClose:tn})]}):null}const RR=(e,t)=>!e||t?"":`px-2 py-0.5 rounded ${e}`,$R=e=>N.useMemo(()=>uA(e),[e]);function jR({id:e,onShowNodeData:t,onSpreadBatchNodes:n}){const i=$R(e),u=nA(i).value;if(!u)return null;const c=()=>{n==null||n(e)},d=h=>{h.stopPropagation(),t(u,{x:h.clientX,y:h.clientY})};return _.jsx(mh,{id:e,onShowNodeData:d,onBatchAction:c,IconComponent:_.jsx("div",{className:"bg-fuchsia-50",children:_.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:_.jsx("path",{d:"M5 12L12 5L19 12L12 19L5 12Z"})})}),TitleComponent:_.jsx("div",{className:"flex items-center h-[2.5rem]",children:_.jsx("h3",{className:"font-semibold text-gray-800 truncate",children:u.activityType})}),TypeLabelComponent:_.jsx("div",{className:"px-2 py-0.5 rounded text-xs font-medium shadow-sm z-10",style:{backgroundColor:"rgb(253 244 255)",color:"rgb(192 38 211)"},children:"activity"}),status:u.status,startTime:u.startTime,endTime:u.endTime,taskQueue:u.taskQueue.name})}function LR(){const e=Yo(bh),t=Wo(Bo),n=Wo(xh),i=Wo(Wa),a=Wo(wh),u=async h=>{try{const p=i.find(Q=>Q.id===h&&Q.type==="batch");if(!p){console.error("No batch node found to expand or node is not a batch node");return}const g=p;if(!g.referencedBatches||g.referencedBatches.length===0){console.error("Batch node has no referenced items to expand");return}if(!t||!n){console.error("Missing graph structure data");return}const v=[],x=g.referencedBatches.map((Q,se)=>{const J="workflowId"in Q&&"workflowRunId"in Q&&!("activityId"in Q);let U;return J?(U=Fr(Q),U===n.id&&(U=`${U}$$batch_item_${se}`),v.push(U),{id:U,type:"workflow",isExpanded:!1}):(U=lu(Q),U===n.id&&(U=`${U}$$batch_item_${se}`),v.push(U),{id:U,type:"activity"})});if(x.length===0){console.warn("No nodes to add after expanding batch");return}const b=x.map(Q=>({id:Q.id,children:[],isBatchNode:!1})),C=d(n,h,b),A=C.id,R=x.filter(Q=>Q.id===A);R.length>0&&(console.error(`ERROR: ${R.length} batch items have the same ID as the parent workflow: ${A}`),R.forEach((Q,se)=>{const J=Q.id;Q.id=`${Q.id}$$batch_item_${se}`,console.log(`Fixed conflicting ID: ${J} -> ${Q.id}`)}));const $=i.filter(Q=>Q.id!==h),q=a.filter(Q=>Q.target_id===h),te=a.filter(Q=>Q.source_id===h),F=[];x.length>0&&q.forEach(Q=>{x.forEach(se=>{F.push({source_id:Q.source_id,target_id:se.id,type:Q.type})})}),x.length>0&&te.forEach(Q=>{x.forEach(se=>{F.push({source_id:se.id,target_id:Q.target_id,type:Q.type})})});const ue=a.filter(Q=>Q.source_id!==h&&Q.target_id!==h),ce=[...$,...x],Y=[...ue,...F];c(C,ce),e({renderTree:C,nodes:ce,edges:Y})}catch(p){console.error("Error expanding batch node:",p)}},c=(h,p)=>{const g=new Set(p.map(b=>b.id)),v=[],x=b=>{g.has(b.id)||v.push(b.id),b.children.forEach(x)};x(h),v.length>0&&console.error("Missing nodes in nodes list that exist in render tree:",v)},d=(h,p,g)=>{let v=!1;const x=new Map;for(const $ of g)x.set($.id,(x.get($.id)||0)+1);const b=Array.from(x.entries()).filter(([$,q])=>q>1).map(([$,q])=>`${$} (${q} times)`);b.length>0&&console.error(`ERROR: Found duplicate IDs in expanded nodes: ${b.join(", ")}`);const C=$=>({id:$.id,children:$.children.map(q=>C(q)),isBatchNode:$.isBatchNode}),A=C(h),R=$=>{if($.id===p){v=!0,console.log(`Found batch node ${p} to expand`);return}for(let q=0;q<$.children.length;q++){const te=$.children[q];if(te.id===p){if(v=!0,g.length>0){if($.children[q]=g[0],g.length>1){const F=g.slice(1);$.children.splice(q+1,0,...F)}}else $.children.splice(q,1),q--;return}R(te)}};return R(A),v||console.error(`Batch node ${p} was not found in the render tree!`),A};return{onSpreadBatchNodes:u}}const FR=e=>N.useMemo(()=>{const t=new Date().toISOString();return{startTime:t,endTime:t,status:"Batched"}},[e]);function WR({id:e,data:t}){const{referencedBatches:n}=t,i=n.length,{startTime:a,endTime:u,status:c}=FR(n),{onSpreadBatchNodes:d}=LR(),h=N.useCallback(()=>{d==null||d(e)},[d,e]),p=N.useMemo(()=>{const g=n.some(x=>"workflowRunId"in x&&"workflowId"in x&&!("activityId"in x)),v=n.some(x=>"activityId"in x);return g&&v?"mixed":g?"workflow":"activity"},[n]);return _.jsx(mh,{id:e,onBatchAction:h,IconComponent:_.jsx("div",{className:"bg-blue-50",children:_.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})}),TitleComponent:_.jsxs("div",{className:"flex flex-col",children:[_.jsx("h3",{className:"font-semibold text-gray-800 truncate",children:p==="workflow"?"Batched Workflows":p==="activity"?"Batched Activities":"Batched Items"}),_.jsxs("p",{className:"text-xs text-gray-500",children:["Contains ",i," ",p==="mixed"?"items":p+(i>1?"s":"")]})]}),TypeLabelComponent:_.jsx("div",{className:"px-2 py-0.5 rounded text-xs font-medium shadow-sm z-10",style:{backgroundColor:"rgb(219 234 254)",color:"rgb(29 78 216)"},children:"batch"}),status:c,startTime:a,endTime:u,taskQueue:"",isLoading:!1,count:i})}const BR=()=>{const[e,t]=N.useState(!0),n=N.useRef(null),i=N.useRef(!0),a=N.useCallback((p,g,v,x=.75,b=800)=>{!p||!i.current||p.setCenter(g,v,{zoom:x,duration:b})},[]),u=N.useCallback(p=>{!p||!i.current||p.fitView({padding:.2,duration:800,minZoom:.4})},[]),c=N.useCallback(p=>{n.current=p},[]),d=N.useCallback(()=>{!n.current||!i.current||n.current.fitView({padding:.2,duration:800,minZoom:.4})},[]),h=N.useCallback(p=>{i.current=p,t(p)},[]);return{autoZoomEnabled:e,setAutoZoomEnabled:h,handleZoom:a,fitView:u,onInit:c,onGraphLoad:d}},zR=(e,t)=>{const n=Wo(ov),i=N.useCallback(()=>{!e.current||!t||e.current.fitView({padding:.2,duration:800,minZoom:.4})},[e,t]);return N.useEffect(()=>{if(t&&n.nodes.length>0){const a=setTimeout(()=>{i()},100);return()=>clearTimeout(a)}},[n.nodes.length,n.edges.length,t,i]),{fitView:i}};function HR(){const[e,t]=ne.useState(!1),n=N.useRef(null),i=.4,{autoZoomEnabled:a,setAutoZoomEnabled:u,onInit:c}=BR(),{fitView:d}=zR(n,a),h=N.useCallback(()=>{a&&d()},[a,d]),p=N.useCallback(g=>{n.current=g,c(g)},[c]);return{isRootLoaded:e,flowInstance:n,MIN_ZOOM:i,autoZoomEnabled:a,setAutoZoomEnabled:u,onInit:p,fitView:h}}function qR({onBeforeSubmit:e}){const[t,n]=N.useState(!1),[i,a]=N.useState(!1),u=Yo(bh),c=async(p,g)=>{const v=await Ky(p,g);for(const b of v)await c(b.workflowId,g);const x=await Yy(p,g);for(const b of x)await QO(p,b.activityId,g);await GO(p,g)};return{isTemporalModalOpen:t,setIsTemporalModalOpen:n,onTemporalModalSubmit:async p=>{if(console.log("[Modal Submit] Starting submission with formData:",p),e&&e(),!await FA())throw new Error("The server is not running. Please start the server and try again.");await Sd(p.namespace,p.workflowId,p.runId,2);const v={workflowId:p.workflowId,workflowRunId:p.runId},x=await xd(p.workflowId,p.runId),{nodes:b,edges:C,virtualTree:A,renderTree:R}=Cg(v,x),$=Fr(v);u({nodes:b,edges:C,structure:A,renderTree:R,rootId:$})},refreshWorkflowData:async(p,g)=>{try{a(!0);const v=await tl(p,g);if(!v){console.error("Workflow not found for refresh");return}await c(p,g);const x=await Sd(v.namespace,p,g,2),b={workflowId:p,workflowRunId:g},C=await xd(p,g),{nodes:A,edges:R,virtualTree:$,renderTree:q}=Cg(b,C),te=Fr(b);u({nodes:A,edges:R,structure:$,renderTree:q,rootId:te})}catch(v){console.error("Error refreshing workflow data:",v)}finally{a(!1)}},isRefreshing:i}}const YR=e=>t=>_.jsx(eD,{...t,onShowNodeData:e}),KR=e=>t=>_.jsx(jR,{...t,onShowNodeData:e}),UR=()=>e=>_.jsx(WR,{...e});let td=null;function VR(){const{MIN_ZOOM:e,autoZoomEnabled:t,setAutoZoomEnabled:n,onInit:i,fitView:a}=HR(),{onTemporalModalSubmit:u,refreshWorkflowData:c,setIsTemporalModalOpen:d}=qR({onBeforeSubmit:()=>{ce()}}),[h,p]=ne.useState(null),[g,v]=ne.useState(!1),[x,b]=N.useState(!0),[C,A]=N.useState(!1),R=ne.useRef(!1),{nodes:$,edges:q}=Wo(ov),te=Wo(il),F=Yo(iv),ue=Yo(PA),ce=Yo(MA),Y=N.useCallback((U,re,ve)=>{F({data:U,position:re,baseZIndex:ve})},[F]),Q=N.useCallback(U=>{ue(U)},[ue]),se=N.useMemo(()=>{if(!td){const U=YR(Y),re=KR(Y),ve=UR();td={workflowNode:U,activityNode:re,batchNode:ve}}return td},[Y]),J=N.useCallback(U=>{i(U),t&&setTimeout(()=>{a()},100)},[i,t,a]);return ne.useEffect(()=>{const U=new URLSearchParams(window.location.search),re=decodeURIComponent(U.get("id")||""),ve=U.get("namespace"),M=U.get("runID");p(null),(async()=>{if(!R.current)if(R.current=!0,re&&ve&&M){v(!0);try{await u({workflowId:re,namespace:ve,runId:M})}catch(L){console.error("Error loading workflow from URL params:",L),p(L instanceof Error?L.message:"An error occurred while loading the workflow")}finally{v(!1)}}else p("Invalid URL parameters"),v(!1)})()},[]),_.jsxs("div",{className:"w-screen h-screen flex flex-col bg-gray-50",children:[g&&_.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:_.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-xl flex items-center space-x-3",children:[_.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),_.jsx("div",{className:"text-gray-700",children:"Loading workflow data..."})]})}),h&&_.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[_.jsx("strong",{className:"font-bold",children:"Error: "}),_.jsx("span",{className:"block sm:inline",children:h}),_.jsxs("button",{className:"absolute top-0 bottom-0 right-0 px-4 py-3",onClick:()=>p(null),children:[_.jsx("span",{className:"sr-only",children:"Dismiss"}),_.jsx(Hs,{className:"h-5 w-5"})]})]}),_.jsx("div",{className:"flex-grow h-full",children:_.jsxs(jy,{nodes:$,edges:q,nodeTypes:se,onInit:J,minZoom:e,maxZoom:2,fitView:!1,fitViewOptions:{padding:.2,minZoom:e},attributionPosition:"bottom-left",className:"bg-gray-50",onNodesChange:U=>{console.log(`[DEBUG] Nodes changed: ${U.length} changes`)},nodesDraggable:!1,edgesUpdatable:!1,nodeExtent:[[-1/0,-1/0],[1/0,1/0]],defaultViewport:{x:0,y:0,zoom:1},proOptions:{hideAttribution:!0},children:[_.jsx(LO,{}),_.jsx(DO,{}),_.jsx(Zs,{position:"bottom-right",className:"flex items-center gap-2 bg-transparent z-10 mb-2 mr-2",children:_.jsxs("button",{onClick:()=>b(!x),className:"bg-blue-500 px-3 py-1 rounded-lg shadow-lg hover:bg-blue-600 text-white transition-colors",children:[x?"Hide":"Show"," Minimap"]})}),x&&_.jsx(SO,{zoomable:!0,pannable:!0,className:"bg-white rounded-lg shadow-lg",style:{backgroundColor:"white",width:300,height:200},maskColor:"rgba(0, 0, 0, 0.1)",nodeColor:"#aaa",nodeStrokeWidth:3,nodeBorderRadius:2}),_.jsx(Zs,{position:"top-right",className:"flex items-center gap-2 bg-transparent",children:_.jsx("div",{className:"bg-white p-2 rounded-lg shadow-lg",children:_.jsx(tD,{autoZoomEnabled:t,setAutoZoomEnabled:n,refreshWorkflowData:c,isSearchModalOpen:C,setIsSearchModalOpen:A,setIsTemporalModalOpen:d,currentWorkflow:null})})})]})}),te.map(U=>_.jsx(nD,{id:U.id,data:U.node,position:U.position,onClose:Q,baseZIndex:U.baseZIndex},U.id)),_.jsx(MR,{isOpen:C,onClose:()=>A(!1),onTemporalModalSubmit:u,onShowNodeData:Y})]})}p0(document.getElementById("root")).render(_.jsx(N.StrictMode,{children:_.jsx(VR,{})}));
