import{r as k,a as y0,g as eh,R as re,c as Mr,t as Dm}from"./vendor-DBEsKlBz.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(a){if(a.ep)return;a.ep=!0;const u=n(a);fetch(a.href,u)}})();var w0={exports:{}},qc={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SS=k,TS=Symbol.for("react.element"),NS=Symbol.for("react.fragment"),kS=Object.prototype.hasOwnProperty,IS=SS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,CS={key:!0,ref:!0,__self:!0,__source:!0};function x0(e,t,n){var i,a={},u=null,c=null;n!==void 0&&(u=""+n),t.key!==void 0&&(u=""+t.key),t.ref!==void 0&&(c=t.ref);for(i in t)kS.call(t,i)&&!CS.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)a[i]===void 0&&(a[i]=t[i]);return{$$typeof:TS,type:e,key:u,ref:c,props:a,_owner:IS.current}}qc.Fragment=NS;qc.jsx=x0;qc.jsxs=x0;w0.exports=qc;var _=w0.exports,b0,Pm=y0;b0=Pm.createRoot,Pm.hydrateRoot;function Sn(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,i;n<e.length;n++)(i=Sn(e[n]))!==""&&(t+=(t&&" ")+i);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var _0={exports:{}},E0={},S0={exports:{}},T0={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ha=k;function OS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var AS=typeof Object.is=="function"?Object.is:OS,DS=Ha.useState,PS=Ha.useEffect,RS=Ha.useLayoutEffect,MS=Ha.useDebugValue;function LS(e,t){var n=t(),i=DS({inst:{value:n,getSnapshot:t}}),a=i[0].inst,u=i[1];return RS(function(){a.value=n,a.getSnapshot=t,Cf(a)&&u({inst:a})},[e,n,t]),PS(function(){return Cf(a)&&u({inst:a}),e(function(){Cf(a)&&u({inst:a})})},[e]),MS(n),n}function Cf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!AS(e,n)}catch{return!0}}function $S(e,t){return t()}var WS=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?$S:LS;T0.useSyncExternalStore=Ha.useSyncExternalStore!==void 0?Ha.useSyncExternalStore:WS;S0.exports=T0;var FS=S0.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xc=k,jS=FS;function BS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var HS=typeof Object.is=="function"?Object.is:BS,KS=jS.useSyncExternalStore,US=Xc.useRef,zS=Xc.useEffect,YS=Xc.useMemo,VS=Xc.useDebugValue;E0.useSyncExternalStoreWithSelector=function(e,t,n,i,a){var u=US(null);if(u.current===null){var c={hasValue:!1,value:null};u.current=c}else c=u.current;u=YS(function(){function h(b){if(!p){if(p=!0,m=b,b=i(b),a!==void 0&&c.hasValue){var N=c.value;if(a(N,b))return y=N}return y=b}if(N=y,HS(m,b))return N;var S=i(b);return a!==void 0&&a(N,S)?N:(m=b,y=S)}var p=!1,m,y,x=n===void 0?null:n;return[function(){return h(t())},x===null?void 0:function(){return h(x())}]},[t,n,i,a]);var f=KS(e,u[0],u[1]);return zS(function(){c.hasValue=!0,c.value=f},[f]),VS(f),f};_0.exports=E0;var qS=_0.exports;const XS=eh(qS),GS={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Rm=e=>{let t;const n=new Set,i=(m,y)=>{const x=typeof m=="function"?m(t):m;if(!Object.is(x,t)){const b=t;t=y??(typeof x!="object"||x===null)?x:Object.assign({},t,x),n.forEach(N=>N(t,b))}},a=()=>t,h={setState:i,getState:a,getInitialState:()=>p,subscribe:m=>(n.add(m),()=>n.delete(m)),destroy:()=>{(GS?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},p=t=e(i,a,h);return h},ZS=e=>e?Rm(e):Rm,{useDebugValue:QS}=re,{useSyncExternalStoreWithSelector:JS}=XS,eT=e=>e;function N0(e,t=eT,n){const i=JS(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return QS(i),i}const Mm=(e,t)=>{const n=ZS(e),i=(a,u=t)=>N0(n,a,u);return Object.assign(i,n),i},tT=(e,t)=>e?Mm(e,t):Mm;function qn(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[i,a]of e)if(!Object.is(a,t.get(i)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(e[i],t[i]))return!1;return!0}var nT={value:()=>{}};function Gc(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new bc(n)}function bc(e){this._=e}function rT(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",a=n.indexOf(".");if(a>=0&&(i=n.slice(a+1),n=n.slice(0,a)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}bc.prototype=Gc.prototype={constructor:bc,on:function(e,t){var n=this._,i=rT(e+"",n),a,u=-1,c=i.length;if(arguments.length<2){for(;++u<c;)if((a=(e=i[u]).type)&&(a=iT(n[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++u<c;)if(a=(e=i[u]).type)n[a]=Lm(n[a],e.name,t);else if(t==null)for(a in n)n[a]=Lm(n[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new bc(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var n=new Array(a),i=0,a,u;i<a;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(u=this._[e],i=0,a=u.length;i<a;++i)u[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],a=0,u=i.length;a<u;++a)i[a].value.apply(t,n)}};function iT(e,t){for(var n=0,i=e.length,a;n<i;++n)if((a=e[n]).name===t)return a.value}function Lm(e,t,n){for(var i=0,a=e.length;i<a;++i)if(e[i].name===t){e[i]=nT,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var od="http://www.w3.org/1999/xhtml";const $m={svg:"http://www.w3.org/2000/svg",xhtml:od,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Zc(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),$m.hasOwnProperty(t)?{space:$m[t],local:e}:e}function oT(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===od&&t.documentElement.namespaceURI===od?t.createElement(e):t.createElementNS(n,e)}}function aT(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function k0(e){var t=Zc(e);return(t.local?aT:oT)(t)}function sT(){}function th(e){return e==null?sT:function(){return this.querySelector(e)}}function uT(e){typeof e!="function"&&(e=th(e));for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a)for(var u=t[a],c=u.length,f=i[a]=new Array(c),h,p,m=0;m<c;++m)(h=u[m])&&(p=e.call(h,h.__data__,m,u))&&("__data__"in h&&(p.__data__=h.__data__),f[m]=p);return new ir(i,this._parents)}function cT(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function lT(){return[]}function I0(e){return e==null?lT:function(){return this.querySelectorAll(e)}}function fT(e){return function(){return cT(e.apply(this,arguments))}}function dT(e){typeof e=="function"?e=fT(e):e=I0(e);for(var t=this._groups,n=t.length,i=[],a=[],u=0;u<n;++u)for(var c=t[u],f=c.length,h,p=0;p<f;++p)(h=c[p])&&(i.push(e.call(h,h.__data__,p,c)),a.push(h));return new ir(i,a)}function C0(e){return function(){return this.matches(e)}}function O0(e){return function(t){return t.matches(e)}}var hT=Array.prototype.find;function pT(e){return function(){return hT.call(this.children,e)}}function mT(){return this.firstElementChild}function gT(e){return this.select(e==null?mT:pT(typeof e=="function"?e:O0(e)))}var vT=Array.prototype.filter;function yT(){return Array.from(this.children)}function wT(e){return function(){return vT.call(this.children,e)}}function xT(e){return this.selectAll(e==null?yT:wT(typeof e=="function"?e:O0(e)))}function bT(e){typeof e!="function"&&(e=C0(e));for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a)for(var u=t[a],c=u.length,f=i[a]=[],h,p=0;p<c;++p)(h=u[p])&&e.call(h,h.__data__,p,u)&&f.push(h);return new ir(i,this._parents)}function A0(e){return new Array(e.length)}function _T(){return new ir(this._enter||this._groups.map(A0),this._parents)}function Ic(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Ic.prototype={constructor:Ic,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ET(e){return function(){return e}}function ST(e,t,n,i,a,u){for(var c=0,f,h=t.length,p=u.length;c<p;++c)(f=t[c])?(f.__data__=u[c],i[c]=f):n[c]=new Ic(e,u[c]);for(;c<h;++c)(f=t[c])&&(a[c]=f)}function TT(e,t,n,i,a,u,c){var f,h,p=new Map,m=t.length,y=u.length,x=new Array(m),b;for(f=0;f<m;++f)(h=t[f])&&(x[f]=b=c.call(h,h.__data__,f,t)+"",p.has(b)?a[f]=h:p.set(b,h));for(f=0;f<y;++f)b=c.call(e,u[f],f,u)+"",(h=p.get(b))?(i[f]=h,h.__data__=u[f],p.delete(b)):n[f]=new Ic(e,u[f]);for(f=0;f<m;++f)(h=t[f])&&p.get(x[f])===h&&(a[f]=h)}function NT(e){return e.__data__}function kT(e,t){if(!arguments.length)return Array.from(this,NT);var n=t?TT:ST,i=this._parents,a=this._groups;typeof e!="function"&&(e=ET(e));for(var u=a.length,c=new Array(u),f=new Array(u),h=new Array(u),p=0;p<u;++p){var m=i[p],y=a[p],x=y.length,b=IT(e.call(m,m&&m.__data__,p,i)),N=b.length,S=f[p]=new Array(N),C=c[p]=new Array(N),L=h[p]=new Array(x);n(m,y,S,C,L,b,t);for(var U=0,te=0,F,ue;U<N;++U)if(F=S[U]){for(U>=te&&(te=U+1);!(ue=C[te])&&++te<N;);F._next=ue||null}}return c=new ir(c,i),c._enter=f,c._exit=h,c}function IT(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function CT(){return new ir(this._exit||this._groups.map(A0),this._parents)}function OT(e,t,n){var i=this.enter(),a=this,u=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),n==null?u.remove():n(u),i&&a?i.merge(a).order():a}function AT(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,a=n.length,u=i.length,c=Math.min(a,u),f=new Array(a),h=0;h<c;++h)for(var p=n[h],m=i[h],y=p.length,x=f[h]=new Array(y),b,N=0;N<y;++N)(b=p[N]||m[N])&&(x[N]=b);for(;h<a;++h)f[h]=n[h];return new ir(f,this._parents)}function DT(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],a=i.length-1,u=i[a],c;--a>=0;)(c=i[a])&&(u&&c.compareDocumentPosition(u)^4&&u.parentNode.insertBefore(c,u),u=c);return this}function PT(e){e||(e=RT);function t(y,x){return y&&x?e(y.__data__,x.__data__):!y-!x}for(var n=this._groups,i=n.length,a=new Array(i),u=0;u<i;++u){for(var c=n[u],f=c.length,h=a[u]=new Array(f),p,m=0;m<f;++m)(p=c[m])&&(h[m]=p);h.sort(t)}return new ir(a,this._parents).order()}function RT(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function MT(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function LT(){return Array.from(this)}function $T(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],a=0,u=i.length;a<u;++a){var c=i[a];if(c)return c}return null}function WT(){let e=0;for(const t of this)++e;return e}function FT(){return!this.node()}function jT(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var a=t[n],u=0,c=a.length,f;u<c;++u)(f=a[u])&&e.call(f,f.__data__,u,a);return this}function BT(e){return function(){this.removeAttribute(e)}}function HT(e){return function(){this.removeAttributeNS(e.space,e.local)}}function KT(e,t){return function(){this.setAttribute(e,t)}}function UT(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function zT(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function YT(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function VT(e,t){var n=Zc(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?HT:BT:typeof t=="function"?n.local?YT:zT:n.local?UT:KT)(n,t))}function D0(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function qT(e){return function(){this.style.removeProperty(e)}}function XT(e,t,n){return function(){this.style.setProperty(e,t,n)}}function GT(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function ZT(e,t,n){return arguments.length>1?this.each((t==null?qT:typeof t=="function"?GT:XT)(e,t,n??"")):Ka(this.node(),e)}function Ka(e,t){return e.style.getPropertyValue(t)||D0(e).getComputedStyle(e,null).getPropertyValue(t)}function QT(e){return function(){delete this[e]}}function JT(e,t){return function(){this[e]=t}}function eN(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function tN(e,t){return arguments.length>1?this.each((t==null?QT:typeof t=="function"?eN:JT)(e,t)):this.node()[e]}function P0(e){return e.trim().split(/^|\s+/)}function nh(e){return e.classList||new R0(e)}function R0(e){this._node=e,this._names=P0(e.getAttribute("class")||"")}R0.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function M0(e,t){for(var n=nh(e),i=-1,a=t.length;++i<a;)n.add(t[i])}function L0(e,t){for(var n=nh(e),i=-1,a=t.length;++i<a;)n.remove(t[i])}function nN(e){return function(){M0(this,e)}}function rN(e){return function(){L0(this,e)}}function iN(e,t){return function(){(t.apply(this,arguments)?M0:L0)(this,e)}}function oN(e,t){var n=P0(e+"");if(arguments.length<2){for(var i=nh(this.node()),a=-1,u=n.length;++a<u;)if(!i.contains(n[a]))return!1;return!0}return this.each((typeof t=="function"?iN:t?nN:rN)(n,t))}function aN(){this.textContent=""}function sN(e){return function(){this.textContent=e}}function uN(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function cN(e){return arguments.length?this.each(e==null?aN:(typeof e=="function"?uN:sN)(e)):this.node().textContent}function lN(){this.innerHTML=""}function fN(e){return function(){this.innerHTML=e}}function dN(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function hN(e){return arguments.length?this.each(e==null?lN:(typeof e=="function"?dN:fN)(e)):this.node().innerHTML}function pN(){this.nextSibling&&this.parentNode.appendChild(this)}function mN(){return this.each(pN)}function gN(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function vN(){return this.each(gN)}function yN(e){var t=typeof e=="function"?e:k0(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function wN(){return null}function xN(e,t){var n=typeof e=="function"?e:k0(e),i=t==null?wN:typeof t=="function"?t:th(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function bN(){var e=this.parentNode;e&&e.removeChild(this)}function _N(){return this.each(bN)}function EN(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function SN(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function TN(e){return this.select(e?SN:EN)}function NN(e){return arguments.length?this.property("__data__",e):this.node().__data__}function kN(e){return function(t){e.call(this,t,this.__data__)}}function IN(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function CN(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,a=t.length,u;n<a;++n)u=t[n],(!e.type||u.type===e.type)&&u.name===e.name?this.removeEventListener(u.type,u.listener,u.options):t[++i]=u;++i?t.length=i:delete this.__on}}}function ON(e,t,n){return function(){var i=this.__on,a,u=kN(t);if(i){for(var c=0,f=i.length;c<f;++c)if((a=i[c]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=u,a.options=n),a.value=t;return}}this.addEventListener(e.type,u,n),a={type:e.type,name:e.name,value:t,listener:u,options:n},i?i.push(a):this.__on=[a]}}function AN(e,t,n){var i=IN(e+""),a,u=i.length,c;if(arguments.length<2){var f=this.node().__on;if(f){for(var h=0,p=f.length,m;h<p;++h)for(a=0,m=f[h];a<u;++a)if((c=i[a]).type===m.type&&c.name===m.name)return m.value}return}for(f=t?ON:CN,a=0;a<u;++a)this.each(f(i[a],t,n));return this}function $0(e,t,n){var i=D0(e),a=i.CustomEvent;typeof a=="function"?a=new a(t,n):(a=i.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function DN(e,t){return function(){return $0(this,e,t)}}function PN(e,t){return function(){return $0(this,e,t.apply(this,arguments))}}function RN(e,t){return this.each((typeof t=="function"?PN:DN)(e,t))}function*MN(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],a=0,u=i.length,c;a<u;++a)(c=i[a])&&(yield c)}var W0=[null];function ir(e,t){this._groups=e,this._parents=t}function cu(){return new ir([[document.documentElement]],W0)}function LN(){return this}ir.prototype=cu.prototype={constructor:ir,select:uT,selectAll:dT,selectChild:gT,selectChildren:xT,filter:bT,data:kT,enter:_T,exit:CT,join:OT,merge:AT,selection:LN,order:DT,sort:PT,call:MT,nodes:LT,node:$T,size:WT,empty:FT,each:jT,attr:VT,style:ZT,property:tN,classed:oN,text:cN,html:hN,raise:mN,lower:vN,append:yN,insert:xN,remove:_N,clone:TN,datum:NN,on:AN,dispatch:RN,[Symbol.iterator]:MN};function vr(e){return typeof e=="string"?new ir([[document.querySelector(e)]],[document.documentElement]):new ir([[e]],W0)}function $N(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Rr(e,t){if(e=$N(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const WN={passive:!1},qs={capture:!0,passive:!1};function Of(e){e.stopImmediatePropagation()}function Wa(e){e.preventDefault(),e.stopImmediatePropagation()}function F0(e){var t=e.document.documentElement,n=vr(e).on("dragstart.drag",Wa,qs);"onselectstart"in t?n.on("selectstart.drag",Wa,qs):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function j0(e,t){var n=e.document.documentElement,i=vr(e).on("dragstart.drag",null);t&&(i.on("click.drag",Wa,qs),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const sc=e=>()=>e;function ad(e,{sourceEvent:t,subject:n,target:i,identifier:a,active:u,x:c,y:f,dx:h,dy:p,dispatch:m}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:u,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:f,enumerable:!0,configurable:!0},dx:{value:h,enumerable:!0,configurable:!0},dy:{value:p,enumerable:!0,configurable:!0},_:{value:m}})}ad.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function FN(e){return!e.ctrlKey&&!e.button}function jN(){return this.parentNode}function BN(e,t){return t??{x:e.x,y:e.y}}function HN(){return navigator.maxTouchPoints||"ontouchstart"in this}function KN(){var e=FN,t=jN,n=BN,i=HN,a={},u=Gc("start","drag","end"),c=0,f,h,p,m,y=0;function x(F){F.on("mousedown.drag",b).filter(i).on("touchstart.drag",C).on("touchmove.drag",L,WN).on("touchend.drag touchcancel.drag",U).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(F,ue){if(!(m||!e.call(this,F,ue))){var ce=te(this,t.call(this,F,ue),F,ue,"mouse");ce&&(vr(F.view).on("mousemove.drag",N,qs).on("mouseup.drag",S,qs),F0(F.view),Of(F),p=!1,f=F.clientX,h=F.clientY,ce("start",F))}}function N(F){if(Wa(F),!p){var ue=F.clientX-f,ce=F.clientY-h;p=ue*ue+ce*ce>y}a.mouse("drag",F)}function S(F){vr(F.view).on("mousemove.drag mouseup.drag",null),j0(F.view,p),Wa(F),a.mouse("end",F)}function C(F,ue){if(e.call(this,F,ue)){var ce=F.changedTouches,z=t.call(this,F,ue),Q=ce.length,se,J;for(se=0;se<Q;++se)(J=te(this,z,F,ue,ce[se].identifier,ce[se]))&&(Of(F),J("start",F,ce[se]))}}function L(F){var ue=F.changedTouches,ce=ue.length,z,Q;for(z=0;z<ce;++z)(Q=a[ue[z].identifier])&&(Wa(F),Q("drag",F,ue[z]))}function U(F){var ue=F.changedTouches,ce=ue.length,z,Q;for(m&&clearTimeout(m),m=setTimeout(function(){m=null},500),z=0;z<ce;++z)(Q=a[ue[z].identifier])&&(Of(F),Q("end",F,ue[z]))}function te(F,ue,ce,z,Q,se){var J=u.copy(),V=Rr(se||ce,ue),ne,ye,M;if((M=n.call(F,new ad("beforestart",{sourceEvent:ce,target:x,identifier:Q,active:c,x:V[0],y:V[1],dx:0,dy:0,dispatch:J}),z))!=null)return ne=M.x-V[0]||0,ye=M.y-V[1]||0,function ae(W,pe,oe){var X=V,de;switch(W){case"start":a[Q]=ae,de=c++;break;case"end":delete a[Q],--c;case"drag":V=Rr(oe||pe,ue),de=c;break}J.call(W,F,new ad(W,{sourceEvent:pe,subject:M,target:x,identifier:Q,active:de,x:V[0]+ne,y:V[1]+ye,dx:V[0]-X[0],dy:V[1]-X[1],dispatch:J}),z)}}return x.filter=function(F){return arguments.length?(e=typeof F=="function"?F:sc(!!F),x):e},x.container=function(F){return arguments.length?(t=typeof F=="function"?F:sc(F),x):t},x.subject=function(F){return arguments.length?(n=typeof F=="function"?F:sc(F),x):n},x.touchable=function(F){return arguments.length?(i=typeof F=="function"?F:sc(!!F),x):i},x.on=function(){var F=u.on.apply(u,arguments);return F===u?x:F},x.clickDistance=function(F){return arguments.length?(y=(F=+F)*F,x):Math.sqrt(y)},x}function rh(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function B0(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function lu(){}var Xs=.7,Cc=1/Xs,Fa="\\s*([+-]?\\d+)\\s*",Gs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Jr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",UN=/^#([0-9a-f]{3,8})$/,zN=new RegExp(`^rgb\\(${Fa},${Fa},${Fa}\\)$`),YN=new RegExp(`^rgb\\(${Jr},${Jr},${Jr}\\)$`),VN=new RegExp(`^rgba\\(${Fa},${Fa},${Fa},${Gs}\\)$`),qN=new RegExp(`^rgba\\(${Jr},${Jr},${Jr},${Gs}\\)$`),XN=new RegExp(`^hsl\\(${Gs},${Jr},${Jr}\\)$`),GN=new RegExp(`^hsla\\(${Gs},${Jr},${Jr},${Gs}\\)$`),Wm={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};rh(lu,Zs,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Fm,formatHex:Fm,formatHex8:ZN,formatHsl:QN,formatRgb:jm,toString:jm});function Fm(){return this.rgb().formatHex()}function ZN(){return this.rgb().formatHex8()}function QN(){return H0(this).formatHsl()}function jm(){return this.rgb().formatRgb()}function Zs(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=UN.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Bm(t):n===3?new Vn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?uc(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?uc(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=zN.exec(e))?new Vn(t[1],t[2],t[3],1):(t=YN.exec(e))?new Vn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=VN.exec(e))?uc(t[1],t[2],t[3],t[4]):(t=qN.exec(e))?uc(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=XN.exec(e))?Um(t[1],t[2]/100,t[3]/100,1):(t=GN.exec(e))?Um(t[1],t[2]/100,t[3]/100,t[4]):Wm.hasOwnProperty(e)?Bm(Wm[e]):e==="transparent"?new Vn(NaN,NaN,NaN,0):null}function Bm(e){return new Vn(e>>16&255,e>>8&255,e&255,1)}function uc(e,t,n,i){return i<=0&&(e=t=n=NaN),new Vn(e,t,n,i)}function JN(e){return e instanceof lu||(e=Zs(e)),e?(e=e.rgb(),new Vn(e.r,e.g,e.b,e.opacity)):new Vn}function sd(e,t,n,i){return arguments.length===1?JN(e):new Vn(e,t,n,i??1)}function Vn(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}rh(Vn,sd,B0(lu,{brighter(e){return e=e==null?Cc:Math.pow(Cc,e),new Vn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Xs:Math.pow(Xs,e),new Vn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Vn(Uo(this.r),Uo(this.g),Uo(this.b),Oc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Hm,formatHex:Hm,formatHex8:ek,formatRgb:Km,toString:Km}));function Hm(){return`#${Fo(this.r)}${Fo(this.g)}${Fo(this.b)}`}function ek(){return`#${Fo(this.r)}${Fo(this.g)}${Fo(this.b)}${Fo((isNaN(this.opacity)?1:this.opacity)*255)}`}function Km(){const e=Oc(this.opacity);return`${e===1?"rgb(":"rgba("}${Uo(this.r)}, ${Uo(this.g)}, ${Uo(this.b)}${e===1?")":`, ${e})`}`}function Oc(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Uo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Fo(e){return e=Uo(e),(e<16?"0":"")+e.toString(16)}function Um(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Lr(e,t,n,i)}function H0(e){if(e instanceof Lr)return new Lr(e.h,e.s,e.l,e.opacity);if(e instanceof lu||(e=Zs(e)),!e)return new Lr;if(e instanceof Lr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,a=Math.min(t,n,i),u=Math.max(t,n,i),c=NaN,f=u-a,h=(u+a)/2;return f?(t===u?c=(n-i)/f+(n<i)*6:n===u?c=(i-t)/f+2:c=(t-n)/f+4,f/=h<.5?u+a:2-u-a,c*=60):f=h>0&&h<1?0:c,new Lr(c,f,h,e.opacity)}function tk(e,t,n,i){return arguments.length===1?H0(e):new Lr(e,t,n,i??1)}function Lr(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}rh(Lr,tk,B0(lu,{brighter(e){return e=e==null?Cc:Math.pow(Cc,e),new Lr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Xs:Math.pow(Xs,e),new Lr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,a=2*n-i;return new Vn(Af(e>=240?e-240:e+120,a,i),Af(e,a,i),Af(e<120?e+240:e-120,a,i),this.opacity)},clamp(){return new Lr(zm(this.h),cc(this.s),cc(this.l),Oc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Oc(this.opacity);return`${e===1?"hsl(":"hsla("}${zm(this.h)}, ${cc(this.s)*100}%, ${cc(this.l)*100}%${e===1?")":`, ${e})`}`}}));function zm(e){return e=(e||0)%360,e<0?e+360:e}function cc(e){return Math.max(0,Math.min(1,e||0))}function Af(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const K0=e=>()=>e;function nk(e,t){return function(n){return e+n*t}}function rk(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function ik(e){return(e=+e)==1?U0:function(t,n){return n-t?rk(t,n,e):K0(isNaN(t)?n:t)}}function U0(e,t){var n=t-e;return n?nk(e,n):K0(isNaN(e)?t:e)}const Ym=function e(t){var n=ik(t);function i(a,u){var c=n((a=sd(a)).r,(u=sd(u)).r),f=n(a.g,u.g),h=n(a.b,u.b),p=U0(a.opacity,u.opacity);return function(m){return a.r=c(m),a.g=f(m),a.b=h(m),a.opacity=p(m),a+""}}return i.gamma=e,i}(1);function Yi(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var ud=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Df=new RegExp(ud.source,"g");function ok(e){return function(){return e}}function ak(e){return function(t){return e(t)+""}}function sk(e,t){var n=ud.lastIndex=Df.lastIndex=0,i,a,u,c=-1,f=[],h=[];for(e=e+"",t=t+"";(i=ud.exec(e))&&(a=Df.exec(t));)(u=a.index)>n&&(u=t.slice(n,u),f[c]?f[c]+=u:f[++c]=u),(i=i[0])===(a=a[0])?f[c]?f[c]+=a:f[++c]=a:(f[++c]=null,h.push({i:c,x:Yi(i,a)})),n=Df.lastIndex;return n<t.length&&(u=t.slice(n),f[c]?f[c]+=u:f[++c]=u),f.length<2?h[0]?ak(h[0].x):ok(t):(t=h.length,function(p){for(var m=0,y;m<t;++m)f[(y=h[m]).i]=y.x(p);return f.join("")})}var Vm=180/Math.PI,cd={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function z0(e,t,n,i,a,u){var c,f,h;return(c=Math.sqrt(e*e+t*t))&&(e/=c,t/=c),(h=e*n+t*i)&&(n-=e*h,i-=t*h),(f=Math.sqrt(n*n+i*i))&&(n/=f,i/=f,h/=f),e*i<t*n&&(e=-e,t=-t,h=-h,c=-c),{translateX:a,translateY:u,rotate:Math.atan2(t,e)*Vm,skewX:Math.atan(h)*Vm,scaleX:c,scaleY:f}}var lc;function uk(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?cd:z0(t.a,t.b,t.c,t.d,t.e,t.f)}function ck(e){return e==null||(lc||(lc=document.createElementNS("http://www.w3.org/2000/svg","g")),lc.setAttribute("transform",e),!(e=lc.transform.baseVal.consolidate()))?cd:(e=e.matrix,z0(e.a,e.b,e.c,e.d,e.e,e.f))}function Y0(e,t,n,i){function a(p){return p.length?p.pop()+" ":""}function u(p,m,y,x,b,N){if(p!==y||m!==x){var S=b.push("translate(",null,t,null,n);N.push({i:S-4,x:Yi(p,y)},{i:S-2,x:Yi(m,x)})}else(y||x)&&b.push("translate("+y+t+x+n)}function c(p,m,y,x){p!==m?(p-m>180?m+=360:m-p>180&&(p+=360),x.push({i:y.push(a(y)+"rotate(",null,i)-2,x:Yi(p,m)})):m&&y.push(a(y)+"rotate("+m+i)}function f(p,m,y,x){p!==m?x.push({i:y.push(a(y)+"skewX(",null,i)-2,x:Yi(p,m)}):m&&y.push(a(y)+"skewX("+m+i)}function h(p,m,y,x,b,N){if(p!==y||m!==x){var S=b.push(a(b)+"scale(",null,",",null,")");N.push({i:S-4,x:Yi(p,y)},{i:S-2,x:Yi(m,x)})}else(y!==1||x!==1)&&b.push(a(b)+"scale("+y+","+x+")")}return function(p,m){var y=[],x=[];return p=e(p),m=e(m),u(p.translateX,p.translateY,m.translateX,m.translateY,y,x),c(p.rotate,m.rotate,y,x),f(p.skewX,m.skewX,y,x),h(p.scaleX,p.scaleY,m.scaleX,m.scaleY,y,x),p=m=null,function(b){for(var N=-1,S=x.length,C;++N<S;)y[(C=x[N]).i]=C.x(b);return y.join("")}}}var lk=Y0(uk,"px, ","px)","deg)"),fk=Y0(ck,", ",")",")"),dk=1e-12;function qm(e){return((e=Math.exp(e))+1/e)/2}function hk(e){return((e=Math.exp(e))-1/e)/2}function pk(e){return((e=Math.exp(2*e))-1)/(e+1)}const mk=function e(t,n,i){function a(u,c){var f=u[0],h=u[1],p=u[2],m=c[0],y=c[1],x=c[2],b=m-f,N=y-h,S=b*b+N*N,C,L;if(S<dk)L=Math.log(x/p)/t,C=function(z){return[f+z*b,h+z*N,p*Math.exp(t*z*L)]};else{var U=Math.sqrt(S),te=(x*x-p*p+i*S)/(2*p*n*U),F=(x*x-p*p-i*S)/(2*x*n*U),ue=Math.log(Math.sqrt(te*te+1)-te),ce=Math.log(Math.sqrt(F*F+1)-F);L=(ce-ue)/t,C=function(z){var Q=z*L,se=qm(ue),J=p/(n*U)*(se*pk(t*Q+ue)-hk(ue));return[f+J*b,h+J*N,p*se/qm(t*Q+ue)]}}return C.duration=L*1e3*t/Math.SQRT2,C}return a.rho=function(u){var c=Math.max(.001,+u),f=c*c,h=f*f;return e(c,f,h)},a}(Math.SQRT2,2,4);var Ua=0,Ws=0,Cs=0,V0=1e3,Ac,Fs,Dc=0,Xo=0,Qc=0,Qs=typeof performance=="object"&&performance.now?performance:Date,q0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ih(){return Xo||(q0(gk),Xo=Qs.now()+Qc)}function gk(){Xo=0}function Pc(){this._call=this._time=this._next=null}Pc.prototype=X0.prototype={constructor:Pc,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ih():+n)+(t==null?0:+t),!this._next&&Fs!==this&&(Fs?Fs._next=this:Ac=this,Fs=this),this._call=e,this._time=n,ld()},stop:function(){this._call&&(this._call=null,this._time=1/0,ld())}};function X0(e,t,n){var i=new Pc;return i.restart(e,t,n),i}function vk(){ih(),++Ua;for(var e=Ac,t;e;)(t=Xo-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ua}function Xm(){Xo=(Dc=Qs.now())+Qc,Ua=Ws=0;try{vk()}finally{Ua=0,wk(),Xo=0}}function yk(){var e=Qs.now(),t=e-Dc;t>V0&&(Qc-=t,Dc=e)}function wk(){for(var e,t=Ac,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ac=n);Fs=e,ld(i)}function ld(e){if(!Ua){Ws&&(Ws=clearTimeout(Ws));var t=e-Xo;t>24?(e<1/0&&(Ws=setTimeout(Xm,e-Qs.now()-Qc)),Cs&&(Cs=clearInterval(Cs))):(Cs||(Dc=Qs.now(),Cs=setInterval(yk,V0)),Ua=1,q0(Xm))}}function Gm(e,t,n){var i=new Pc;return t=t==null?0:+t,i.restart(a=>{i.stop(),e(a+t)},t,n),i}var xk=Gc("start","end","cancel","interrupt"),bk=[],G0=0,Zm=1,fd=2,_c=3,Qm=4,dd=5,Ec=6;function Jc(e,t,n,i,a,u){var c=e.__transition;if(!c)e.__transition={};else if(n in c)return;_k(e,n,{name:t,index:i,group:a,on:xk,tween:bk,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:G0})}function oh(e,t){var n=Br(e,t);if(n.state>G0)throw new Error("too late; already scheduled");return n}function ei(e,t){var n=Br(e,t);if(n.state>_c)throw new Error("too late; already running");return n}function Br(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function _k(e,t,n){var i=e.__transition,a;i[t]=n,n.timer=X0(u,0,n.time);function u(p){n.state=Zm,n.timer.restart(c,n.delay,n.time),n.delay<=p&&c(p-n.delay)}function c(p){var m,y,x,b;if(n.state!==Zm)return h();for(m in i)if(b=i[m],b.name===n.name){if(b.state===_c)return Gm(c);b.state===Qm?(b.state=Ec,b.timer.stop(),b.on.call("interrupt",e,e.__data__,b.index,b.group),delete i[m]):+m<t&&(b.state=Ec,b.timer.stop(),b.on.call("cancel",e,e.__data__,b.index,b.group),delete i[m])}if(Gm(function(){n.state===_c&&(n.state=Qm,n.timer.restart(f,n.delay,n.time),f(p))}),n.state=fd,n.on.call("start",e,e.__data__,n.index,n.group),n.state===fd){for(n.state=_c,a=new Array(x=n.tween.length),m=0,y=-1;m<x;++m)(b=n.tween[m].value.call(e,e.__data__,n.index,n.group))&&(a[++y]=b);a.length=y+1}}function f(p){for(var m=p<n.duration?n.ease.call(null,p/n.duration):(n.timer.restart(h),n.state=dd,1),y=-1,x=a.length;++y<x;)a[y].call(e,m);n.state===dd&&(n.on.call("end",e,e.__data__,n.index,n.group),h())}function h(){n.state=Ec,n.timer.stop(),delete i[t];for(var p in i)return;delete e.__transition}}function Sc(e,t){var n=e.__transition,i,a,u=!0,c;if(n){t=t==null?null:t+"";for(c in n){if((i=n[c]).name!==t){u=!1;continue}a=i.state>fd&&i.state<dd,i.state=Ec,i.timer.stop(),i.on.call(a?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[c]}u&&delete e.__transition}}function Ek(e){return this.each(function(){Sc(this,e)})}function Sk(e,t){var n,i;return function(){var a=ei(this,e),u=a.tween;if(u!==n){i=n=u;for(var c=0,f=i.length;c<f;++c)if(i[c].name===t){i=i.slice(),i.splice(c,1);break}}a.tween=i}}function Tk(e,t,n){var i,a;if(typeof n!="function")throw new Error;return function(){var u=ei(this,e),c=u.tween;if(c!==i){a=(i=c).slice();for(var f={name:t,value:n},h=0,p=a.length;h<p;++h)if(a[h].name===t){a[h]=f;break}h===p&&a.push(f)}u.tween=a}}function Nk(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=Br(this.node(),n).tween,a=0,u=i.length,c;a<u;++a)if((c=i[a]).name===e)return c.value;return null}return this.each((t==null?Sk:Tk)(n,e,t))}function ah(e,t,n){var i=e._id;return e.each(function(){var a=ei(this,i);(a.value||(a.value={}))[t]=n.apply(this,arguments)}),function(a){return Br(a,i).value[t]}}function Z0(e,t){var n;return(typeof t=="number"?Yi:t instanceof Zs?Ym:(n=Zs(t))?(t=n,Ym):sk)(e,t)}function kk(e){return function(){this.removeAttribute(e)}}function Ik(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ck(e,t,n){var i,a=n+"",u;return function(){var c=this.getAttribute(e);return c===a?null:c===i?u:u=t(i=c,n)}}function Ok(e,t,n){var i,a=n+"",u;return function(){var c=this.getAttributeNS(e.space,e.local);return c===a?null:c===i?u:u=t(i=c,n)}}function Ak(e,t,n){var i,a,u;return function(){var c,f=n(this),h;return f==null?void this.removeAttribute(e):(c=this.getAttribute(e),h=f+"",c===h?null:c===i&&h===a?u:(a=h,u=t(i=c,f)))}}function Dk(e,t,n){var i,a,u;return function(){var c,f=n(this),h;return f==null?void this.removeAttributeNS(e.space,e.local):(c=this.getAttributeNS(e.space,e.local),h=f+"",c===h?null:c===i&&h===a?u:(a=h,u=t(i=c,f)))}}function Pk(e,t){var n=Zc(e),i=n==="transform"?fk:Z0;return this.attrTween(e,typeof t=="function"?(n.local?Dk:Ak)(n,i,ah(this,"attr."+e,t)):t==null?(n.local?Ik:kk)(n):(n.local?Ok:Ck)(n,i,t))}function Rk(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Mk(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Lk(e,t){var n,i;function a(){var u=t.apply(this,arguments);return u!==i&&(n=(i=u)&&Mk(e,u)),n}return a._value=t,a}function $k(e,t){var n,i;function a(){var u=t.apply(this,arguments);return u!==i&&(n=(i=u)&&Rk(e,u)),n}return a._value=t,a}function Wk(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=Zc(e);return this.tween(n,(i.local?Lk:$k)(i,t))}function Fk(e,t){return function(){oh(this,e).delay=+t.apply(this,arguments)}}function jk(e,t){return t=+t,function(){oh(this,e).delay=t}}function Bk(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Fk:jk)(t,e)):Br(this.node(),t).delay}function Hk(e,t){return function(){ei(this,e).duration=+t.apply(this,arguments)}}function Kk(e,t){return t=+t,function(){ei(this,e).duration=t}}function Uk(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Hk:Kk)(t,e)):Br(this.node(),t).duration}function zk(e,t){if(typeof t!="function")throw new Error;return function(){ei(this,e).ease=t}}function Yk(e){var t=this._id;return arguments.length?this.each(zk(t,e)):Br(this.node(),t).ease}function Vk(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ei(this,e).ease=n}}function qk(e){if(typeof e!="function")throw new Error;return this.each(Vk(this._id,e))}function Xk(e){typeof e!="function"&&(e=C0(e));for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a)for(var u=t[a],c=u.length,f=i[a]=[],h,p=0;p<c;++p)(h=u[p])&&e.call(h,h.__data__,p,u)&&f.push(h);return new _i(i,this._parents,this._name,this._id)}function Gk(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,a=n.length,u=Math.min(i,a),c=new Array(i),f=0;f<u;++f)for(var h=t[f],p=n[f],m=h.length,y=c[f]=new Array(m),x,b=0;b<m;++b)(x=h[b]||p[b])&&(y[b]=x);for(;f<i;++f)c[f]=t[f];return new _i(c,this._parents,this._name,this._id)}function Zk(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Qk(e,t,n){var i,a,u=Zk(t)?oh:ei;return function(){var c=u(this,e),f=c.on;f!==i&&(a=(i=f).copy()).on(t,n),c.on=a}}function Jk(e,t){var n=this._id;return arguments.length<2?Br(this.node(),n).on.on(e):this.each(Qk(n,e,t))}function eI(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function tI(){return this.on("end.remove",eI(this._id))}function nI(e){var t=this._name,n=this._id;typeof e!="function"&&(e=th(e));for(var i=this._groups,a=i.length,u=new Array(a),c=0;c<a;++c)for(var f=i[c],h=f.length,p=u[c]=new Array(h),m,y,x=0;x<h;++x)(m=f[x])&&(y=e.call(m,m.__data__,x,f))&&("__data__"in m&&(y.__data__=m.__data__),p[x]=y,Jc(p[x],t,n,x,p,Br(m,n)));return new _i(u,this._parents,t,n)}function rI(e){var t=this._name,n=this._id;typeof e!="function"&&(e=I0(e));for(var i=this._groups,a=i.length,u=[],c=[],f=0;f<a;++f)for(var h=i[f],p=h.length,m,y=0;y<p;++y)if(m=h[y]){for(var x=e.call(m,m.__data__,y,h),b,N=Br(m,n),S=0,C=x.length;S<C;++S)(b=x[S])&&Jc(b,t,n,S,x,N);u.push(x),c.push(m)}return new _i(u,c,t,n)}var iI=cu.prototype.constructor;function oI(){return new iI(this._groups,this._parents)}function aI(e,t){var n,i,a;return function(){var u=Ka(this,e),c=(this.style.removeProperty(e),Ka(this,e));return u===c?null:u===n&&c===i?a:a=t(n=u,i=c)}}function Q0(e){return function(){this.style.removeProperty(e)}}function sI(e,t,n){var i,a=n+"",u;return function(){var c=Ka(this,e);return c===a?null:c===i?u:u=t(i=c,n)}}function uI(e,t,n){var i,a,u;return function(){var c=Ka(this,e),f=n(this),h=f+"";return f==null&&(h=f=(this.style.removeProperty(e),Ka(this,e))),c===h?null:c===i&&h===a?u:(a=h,u=t(i=c,f))}}function cI(e,t){var n,i,a,u="style."+t,c="end."+u,f;return function(){var h=ei(this,e),p=h.on,m=h.value[u]==null?f||(f=Q0(t)):void 0;(p!==n||a!==m)&&(i=(n=p).copy()).on(c,a=m),h.on=i}}function lI(e,t,n){var i=(e+="")=="transform"?lk:Z0;return t==null?this.styleTween(e,aI(e,i)).on("end.style."+e,Q0(e)):typeof t=="function"?this.styleTween(e,uI(e,i,ah(this,"style."+e,t))).each(cI(this._id,e)):this.styleTween(e,sI(e,i,t),n).on("end.style."+e,null)}function fI(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function dI(e,t,n){var i,a;function u(){var c=t.apply(this,arguments);return c!==a&&(i=(a=c)&&fI(e,c,n)),i}return u._value=t,u}function hI(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,dI(e,t,n??""))}function pI(e){return function(){this.textContent=e}}function mI(e){return function(){var t=e(this);this.textContent=t??""}}function gI(e){return this.tween("text",typeof e=="function"?mI(ah(this,"text",e)):pI(e==null?"":e+""))}function vI(e){return function(t){this.textContent=e.call(this,t)}}function yI(e){var t,n;function i(){var a=e.apply(this,arguments);return a!==n&&(t=(n=a)&&vI(a)),t}return i._value=e,i}function wI(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,yI(e))}function xI(){for(var e=this._name,t=this._id,n=J0(),i=this._groups,a=i.length,u=0;u<a;++u)for(var c=i[u],f=c.length,h,p=0;p<f;++p)if(h=c[p]){var m=Br(h,t);Jc(h,e,n,p,c,{time:m.time+m.delay+m.duration,delay:0,duration:m.duration,ease:m.ease})}return new _i(i,this._parents,e,n)}function bI(){var e,t,n=this,i=n._id,a=n.size();return new Promise(function(u,c){var f={value:c},h={value:function(){--a===0&&u()}};n.each(function(){var p=ei(this,i),m=p.on;m!==e&&(t=(e=m).copy(),t._.cancel.push(f),t._.interrupt.push(f),t._.end.push(h)),p.on=t}),a===0&&u()})}var _I=0;function _i(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function J0(){return++_I}var gi=cu.prototype;_i.prototype={constructor:_i,select:nI,selectAll:rI,selectChild:gi.selectChild,selectChildren:gi.selectChildren,filter:Xk,merge:Gk,selection:oI,transition:xI,call:gi.call,nodes:gi.nodes,node:gi.node,size:gi.size,empty:gi.empty,each:gi.each,on:Jk,attr:Pk,attrTween:Wk,style:lI,styleTween:hI,text:gI,textTween:wI,remove:tI,tween:Nk,delay:Bk,duration:Uk,ease:Yk,easeVarying:qk,end:bI,[Symbol.iterator]:gi[Symbol.iterator]};function EI(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var SI={time:null,delay:0,duration:250,ease:EI};function TI(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function NI(e){var t,n;e instanceof _i?(t=e._id,e=e._name):(t=J0(),(n=SI).time=ih(),e=e==null?null:e+"");for(var i=this._groups,a=i.length,u=0;u<a;++u)for(var c=i[u],f=c.length,h,p=0;p<f;++p)(h=c[p])&&Jc(h,e,t,p,c,n||TI(h,t));return new _i(i,this._parents,e,t)}cu.prototype.interrupt=Ek;cu.prototype.transition=NI;const fc=e=>()=>e;function kI(e,{sourceEvent:t,target:n,transform:i,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function wi(e,t,n){this.k=e,this.x=t,this.y=n}wi.prototype={constructor:wi,scale:function(e){return e===1?this:new wi(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new wi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var xi=new wi(1,0,0);wi.prototype;function Pf(e){e.stopImmediatePropagation()}function Os(e){e.preventDefault(),e.stopImmediatePropagation()}function II(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function CI(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Jm(){return this.__zoom||xi}function OI(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function AI(){return navigator.maxTouchPoints||"ontouchstart"in this}function DI(e,t,n){var i=e.invertX(t[0][0])-n[0][0],a=e.invertX(t[1][0])-n[1][0],u=e.invertY(t[0][1])-n[0][1],c=e.invertY(t[1][1])-n[1][1];return e.translate(a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a),c>u?(u+c)/2:Math.min(0,u)||Math.max(0,c))}function ev(){var e=II,t=CI,n=DI,i=OI,a=AI,u=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],f=250,h=mk,p=Gc("start","zoom","end"),m,y,x,b=500,N=150,S=0,C=10;function L(M){M.property("__zoom",Jm).on("wheel.zoom",Q,{passive:!1}).on("mousedown.zoom",se).on("dblclick.zoom",J).filter(a).on("touchstart.zoom",V).on("touchmove.zoom",ne).on("touchend.zoom touchcancel.zoom",ye).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}L.transform=function(M,ae,W,pe){var oe=M.selection?M.selection():M;oe.property("__zoom",Jm),M!==oe?ue(M,ae,W,pe):oe.interrupt().each(function(){ce(this,arguments).event(pe).start().zoom(null,typeof ae=="function"?ae.apply(this,arguments):ae).end()})},L.scaleBy=function(M,ae,W,pe){L.scaleTo(M,function(){var oe=this.__zoom.k,X=typeof ae=="function"?ae.apply(this,arguments):ae;return oe*X},W,pe)},L.scaleTo=function(M,ae,W,pe){L.transform(M,function(){var oe=t.apply(this,arguments),X=this.__zoom,de=W==null?F(oe):typeof W=="function"?W.apply(this,arguments):W,ge=X.invert(de),Ee=typeof ae=="function"?ae.apply(this,arguments):ae;return n(te(U(X,Ee),de,ge),oe,c)},W,pe)},L.translateBy=function(M,ae,W,pe){L.transform(M,function(){return n(this.__zoom.translate(typeof ae=="function"?ae.apply(this,arguments):ae,typeof W=="function"?W.apply(this,arguments):W),t.apply(this,arguments),c)},null,pe)},L.translateTo=function(M,ae,W,pe,oe){L.transform(M,function(){var X=t.apply(this,arguments),de=this.__zoom,ge=pe==null?F(X):typeof pe=="function"?pe.apply(this,arguments):pe;return n(xi.translate(ge[0],ge[1]).scale(de.k).translate(typeof ae=="function"?-ae.apply(this,arguments):-ae,typeof W=="function"?-W.apply(this,arguments):-W),X,c)},pe,oe)};function U(M,ae){return ae=Math.max(u[0],Math.min(u[1],ae)),ae===M.k?M:new wi(ae,M.x,M.y)}function te(M,ae,W){var pe=ae[0]-W[0]*M.k,oe=ae[1]-W[1]*M.k;return pe===M.x&&oe===M.y?M:new wi(M.k,pe,oe)}function F(M){return[(+M[0][0]+ +M[1][0])/2,(+M[0][1]+ +M[1][1])/2]}function ue(M,ae,W,pe){M.on("start.zoom",function(){ce(this,arguments).event(pe).start()}).on("interrupt.zoom end.zoom",function(){ce(this,arguments).event(pe).end()}).tween("zoom",function(){var oe=this,X=arguments,de=ce(oe,X).event(pe),ge=t.apply(oe,X),Ee=W==null?F(ge):typeof W=="function"?W.apply(oe,X):W,ke=Math.max(ge[1][0]-ge[0][0],ge[1][1]-ge[0][1]),Me=oe.__zoom,Re=typeof ae=="function"?ae.apply(oe,X):ae,Be=h(Me.invert(Ee).concat(ke/Me.k),Re.invert(Ee).concat(ke/Re.k));return function(Ye){if(Ye===1)Ye=Re;else{var qe=Be(Ye),Se=ke/qe[2];Ye=new wi(Se,Ee[0]-qe[0]*Se,Ee[1]-qe[1]*Se)}de.zoom(null,Ye)}})}function ce(M,ae,W){return!W&&M.__zooming||new z(M,ae)}function z(M,ae){this.that=M,this.args=ae,this.active=0,this.sourceEvent=null,this.extent=t.apply(M,ae),this.taps=0}z.prototype={event:function(M){return M&&(this.sourceEvent=M),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(M,ae){return this.mouse&&M!=="mouse"&&(this.mouse[1]=ae.invert(this.mouse[0])),this.touch0&&M!=="touch"&&(this.touch0[1]=ae.invert(this.touch0[0])),this.touch1&&M!=="touch"&&(this.touch1[1]=ae.invert(this.touch1[0])),this.that.__zoom=ae,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(M){var ae=vr(this.that).datum();p.call(M,this.that,new kI(M,{sourceEvent:this.sourceEvent,target:L,type:M,transform:this.that.__zoom,dispatch:p}),ae)}};function Q(M,...ae){if(!e.apply(this,arguments))return;var W=ce(this,ae).event(M),pe=this.__zoom,oe=Math.max(u[0],Math.min(u[1],pe.k*Math.pow(2,i.apply(this,arguments)))),X=Rr(M);if(W.wheel)(W.mouse[0][0]!==X[0]||W.mouse[0][1]!==X[1])&&(W.mouse[1]=pe.invert(W.mouse[0]=X)),clearTimeout(W.wheel);else{if(pe.k===oe)return;W.mouse=[X,pe.invert(X)],Sc(this),W.start()}Os(M),W.wheel=setTimeout(de,N),W.zoom("mouse",n(te(U(pe,oe),W.mouse[0],W.mouse[1]),W.extent,c));function de(){W.wheel=null,W.end()}}function se(M,...ae){if(x||!e.apply(this,arguments))return;var W=M.currentTarget,pe=ce(this,ae,!0).event(M),oe=vr(M.view).on("mousemove.zoom",Ee,!0).on("mouseup.zoom",ke,!0),X=Rr(M,W),de=M.clientX,ge=M.clientY;F0(M.view),Pf(M),pe.mouse=[X,this.__zoom.invert(X)],Sc(this),pe.start();function Ee(Me){if(Os(Me),!pe.moved){var Re=Me.clientX-de,Be=Me.clientY-ge;pe.moved=Re*Re+Be*Be>S}pe.event(Me).zoom("mouse",n(te(pe.that.__zoom,pe.mouse[0]=Rr(Me,W),pe.mouse[1]),pe.extent,c))}function ke(Me){oe.on("mousemove.zoom mouseup.zoom",null),j0(Me.view,pe.moved),Os(Me),pe.event(Me).end()}}function J(M,...ae){if(e.apply(this,arguments)){var W=this.__zoom,pe=Rr(M.changedTouches?M.changedTouches[0]:M,this),oe=W.invert(pe),X=W.k*(M.shiftKey?.5:2),de=n(te(U(W,X),pe,oe),t.apply(this,ae),c);Os(M),f>0?vr(this).transition().duration(f).call(ue,de,pe,M):vr(this).call(L.transform,de,pe,M)}}function V(M,...ae){if(e.apply(this,arguments)){var W=M.touches,pe=W.length,oe=ce(this,ae,M.changedTouches.length===pe).event(M),X,de,ge,Ee;for(Pf(M),de=0;de<pe;++de)ge=W[de],Ee=Rr(ge,this),Ee=[Ee,this.__zoom.invert(Ee),ge.identifier],oe.touch0?!oe.touch1&&oe.touch0[2]!==Ee[2]&&(oe.touch1=Ee,oe.taps=0):(oe.touch0=Ee,X=!0,oe.taps=1+!!m);m&&(m=clearTimeout(m)),X&&(oe.taps<2&&(y=Ee[0],m=setTimeout(function(){m=null},b)),Sc(this),oe.start())}}function ne(M,...ae){if(this.__zooming){var W=ce(this,ae).event(M),pe=M.changedTouches,oe=pe.length,X,de,ge,Ee;for(Os(M),X=0;X<oe;++X)de=pe[X],ge=Rr(de,this),W.touch0&&W.touch0[2]===de.identifier?W.touch0[0]=ge:W.touch1&&W.touch1[2]===de.identifier&&(W.touch1[0]=ge);if(de=W.that.__zoom,W.touch1){var ke=W.touch0[0],Me=W.touch0[1],Re=W.touch1[0],Be=W.touch1[1],Ye=(Ye=Re[0]-ke[0])*Ye+(Ye=Re[1]-ke[1])*Ye,qe=(qe=Be[0]-Me[0])*qe+(qe=Be[1]-Me[1])*qe;de=U(de,Math.sqrt(Ye/qe)),ge=[(ke[0]+Re[0])/2,(ke[1]+Re[1])/2],Ee=[(Me[0]+Be[0])/2,(Me[1]+Be[1])/2]}else if(W.touch0)ge=W.touch0[0],Ee=W.touch0[1];else return;W.zoom("touch",n(te(de,ge,Ee),W.extent,c))}}function ye(M,...ae){if(this.__zooming){var W=ce(this,ae).event(M),pe=M.changedTouches,oe=pe.length,X,de;for(Pf(M),x&&clearTimeout(x),x=setTimeout(function(){x=null},b),X=0;X<oe;++X)de=pe[X],W.touch0&&W.touch0[2]===de.identifier?delete W.touch0:W.touch1&&W.touch1[2]===de.identifier&&delete W.touch1;if(W.touch1&&!W.touch0&&(W.touch0=W.touch1,delete W.touch1),W.touch0)W.touch0[1]=this.__zoom.invert(W.touch0[0]);else if(W.end(),W.taps===2&&(de=Rr(de,this),Math.hypot(y[0]-de[0],y[1]-de[1])<C)){var ge=vr(this).on("dblclick.zoom");ge&&ge.apply(this,arguments)}}}return L.wheelDelta=function(M){return arguments.length?(i=typeof M=="function"?M:fc(+M),L):i},L.filter=function(M){return arguments.length?(e=typeof M=="function"?M:fc(!!M),L):e},L.touchable=function(M){return arguments.length?(a=typeof M=="function"?M:fc(!!M),L):a},L.extent=function(M){return arguments.length?(t=typeof M=="function"?M:fc([[+M[0][0],+M[0][1]],[+M[1][0],+M[1][1]]]),L):t},L.scaleExtent=function(M){return arguments.length?(u[0]=+M[0],u[1]=+M[1],L):[u[0],u[1]]},L.translateExtent=function(M){return arguments.length?(c[0][0]=+M[0][0],c[1][0]=+M[1][0],c[0][1]=+M[0][1],c[1][1]=+M[1][1],L):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},L.constrain=function(M){return arguments.length?(n=M,L):n},L.duration=function(M){return arguments.length?(f=+M,L):f},L.interpolate=function(M){return arguments.length?(h=M,L):h},L.on=function(){var M=p.on.apply(p,arguments);return M===p?L:M},L.clickDistance=function(M){return arguments.length?(S=(M=+M)*M,L):Math.sqrt(S)},L.tapDistance=function(M){return arguments.length?(C=+M,L):C},L}const el=k.createContext(null),PI=el.Provider,Ei={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},tv=Ei.error001();function Mt(e,t){const n=k.useContext(el);if(n===null)throw new Error(tv);return N0(n,e,t)}const mn=()=>{const e=k.useContext(el);if(e===null)throw new Error(tv);return k.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},RI=e=>e.userSelectionActive?"none":"all";function Js({position:e,children:t,className:n,style:i,...a}){const u=Mt(RI),c=`${e}`.split("-");return re.createElement("div",{className:Sn(["react-flow__panel",n,...c]),style:{...i,pointerEvents:u},...a},t)}function MI({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:re.createElement(Js,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},re.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const LI=({x:e,y:t,label:n,labelStyle:i={},labelShowBg:a=!0,labelBgStyle:u={},labelBgPadding:c=[2,4],labelBgBorderRadius:f=2,children:h,className:p,...m})=>{const y=k.useRef(null),[x,b]=k.useState({x:0,y:0,width:0,height:0}),N=Sn(["react-flow__edge-textwrapper",p]);return k.useEffect(()=>{if(y.current){const S=y.current.getBBox();b({x:S.x,y:S.y,width:S.width,height:S.height})}},[n]),typeof n>"u"||!n?null:re.createElement("g",{transform:`translate(${e-x.width/2} ${t-x.height/2})`,className:N,visibility:x.width?"visible":"hidden",...m},a&&re.createElement("rect",{width:x.width+2*c[0],x:-c[0],y:-c[1],height:x.height+2*c[1],className:"react-flow__edge-textbg",style:u,rx:f,ry:f}),re.createElement("text",{className:"react-flow__edge-text",y:x.height/2,dy:"0.3em",ref:y,style:i},n),h)};var $I=k.memo(LI);const sh=e=>({width:e.offsetWidth,height:e.offsetHeight}),za=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),uh=(e={x:0,y:0},t)=>({x:za(e.x,t[0][0],t[1][0]),y:za(e.y,t[0][1],t[1][1])}),eg=(e,t,n)=>e<t?za(Math.abs(e-t),1,50)/50:e>n?-za(Math.abs(e-n),1,50)/50:0,nv=(e,t)=>{const n=eg(e.x,35,t.width-35)*20,i=eg(e.y,35,t.height-35)*20;return[n,i]},rv=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},iv=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),eu=({x:e,y:t,width:n,height:i})=>({x:e,y:t,x2:e+n,y2:t+i}),ov=({x:e,y:t,x2:n,y2:i})=>({x:e,y:t,width:n-e,height:i-t}),tg=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),WI=(e,t)=>ov(iv(eu(e),eu(t))),hd=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),i=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*i)},FI=e=>wr(e.width)&&wr(e.height)&&wr(e.x)&&wr(e.y),wr=e=>!isNaN(e)&&isFinite(e),en=Symbol.for("internals"),av=["Enter"," ","Escape"],jI=(e,t)=>{},BI=e=>"nativeEvent"in e;function pd(e){var a,u;const t=BI(e)?e.nativeEvent:e,n=((u=(a=t.composedPath)==null?void 0:a.call(t))==null?void 0:u[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const sv=e=>"clientX"in e,Qi=(e,t)=>{var u,c;const n=sv(e),i=n?e.clientX:(u=e.touches)==null?void 0:u[0].clientX,a=n?e.clientY:(c=e.touches)==null?void 0:c[0].clientY;return{x:i-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}},Rc=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},fu=({id:e,path:t,labelX:n,labelY:i,label:a,labelStyle:u,labelShowBg:c,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:m,markerEnd:y,markerStart:x,interactionWidth:b=20})=>re.createElement(re.Fragment,null,re.createElement("path",{id:e,style:m,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:y,markerStart:x}),b&&re.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:b,className:"react-flow__edge-interaction"}),a&&wr(n)&&wr(i)?re.createElement($I,{x:n,y:i,label:a,labelStyle:u,labelShowBg:c,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p}):null);fu.displayName="BaseEdge";function As(e,t,n){return n===void 0?n:i=>{const a=t().edges.find(u=>u.id===e);a&&n(i,{...a})}}function uv({sourceX:e,sourceY:t,targetX:n,targetY:i}){const a=Math.abs(n-e)/2,u=n<e?n+a:n-a,c=Math.abs(i-t)/2,f=i<t?i+c:i-c;return[u,f,a,c]}function cv({sourceX:e,sourceY:t,targetX:n,targetY:i,sourceControlX:a,sourceControlY:u,targetControlX:c,targetControlY:f}){const h=e*.125+a*.375+c*.375+n*.125,p=t*.125+u*.375+f*.375+i*.125,m=Math.abs(h-e),y=Math.abs(p-t);return[h,p,m,y]}var Go;(function(e){e.Strict="strict",e.Loose="loose"})(Go||(Go={}));var jo;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(jo||(jo={}));var tu;(function(e){e.Partial="partial",e.Full="full"})(tu||(tu={}));var qi;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(qi||(qi={}));var Mc;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Mc||(Mc={}));var ze;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(ze||(ze={}));function ng({pos:e,x1:t,y1:n,x2:i,y2:a}){return e===ze.Left||e===ze.Right?[.5*(t+i),n]:[t,.5*(n+a)]}function lv({sourceX:e,sourceY:t,sourcePosition:n=ze.Bottom,targetX:i,targetY:a,targetPosition:u=ze.Top}){const[c,f]=ng({pos:n,x1:e,y1:t,x2:i,y2:a}),[h,p]=ng({pos:u,x1:i,y1:a,x2:e,y2:t}),[m,y,x,b]=cv({sourceX:e,sourceY:t,targetX:i,targetY:a,sourceControlX:c,sourceControlY:f,targetControlX:h,targetControlY:p});return[`M${e},${t} C${c},${f} ${h},${p} ${i},${a}`,m,y,x,b]}const ch=k.memo(({sourceX:e,sourceY:t,targetX:n,targetY:i,sourcePosition:a=ze.Bottom,targetPosition:u=ze.Top,label:c,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:y,style:x,markerEnd:b,markerStart:N,interactionWidth:S})=>{const[C,L,U]=lv({sourceX:e,sourceY:t,sourcePosition:a,targetX:n,targetY:i,targetPosition:u});return re.createElement(fu,{path:C,labelX:L,labelY:U,label:c,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:y,style:x,markerEnd:b,markerStart:N,interactionWidth:S})});ch.displayName="SimpleBezierEdge";const rg={[ze.Left]:{x:-1,y:0},[ze.Right]:{x:1,y:0},[ze.Top]:{x:0,y:-1},[ze.Bottom]:{x:0,y:1}},HI=({source:e,sourcePosition:t=ze.Bottom,target:n})=>t===ze.Left||t===ze.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},ig=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function KI({source:e,sourcePosition:t=ze.Bottom,target:n,targetPosition:i=ze.Top,center:a,offset:u}){const c=rg[t],f=rg[i],h={x:e.x+c.x*u,y:e.y+c.y*u},p={x:n.x+f.x*u,y:n.y+f.y*u},m=HI({source:h,sourcePosition:t,target:p}),y=m.x!==0?"x":"y",x=m[y];let b=[],N,S;const C={x:0,y:0},L={x:0,y:0},[U,te,F,ue]=uv({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(c[y]*f[y]===-1){N=a.x??U,S=a.y??te;const z=[{x:N,y:h.y},{x:N,y:p.y}],Q=[{x:h.x,y:S},{x:p.x,y:S}];c[y]===x?b=y==="x"?z:Q:b=y==="x"?Q:z}else{const z=[{x:h.x,y:p.y}],Q=[{x:p.x,y:h.y}];if(y==="x"?b=c.x===x?Q:z:b=c.y===x?z:Q,t===i){const ye=Math.abs(e[y]-n[y]);if(ye<=u){const M=Math.min(u-1,u-ye);c[y]===x?C[y]=(h[y]>e[y]?-1:1)*M:L[y]=(p[y]>n[y]?-1:1)*M}}if(t!==i){const ye=y==="x"?"y":"x",M=c[y]===f[ye],ae=h[ye]>p[ye],W=h[ye]<p[ye];(c[y]===1&&(!M&&ae||M&&W)||c[y]!==1&&(!M&&W||M&&ae))&&(b=y==="x"?z:Q)}const se={x:h.x+C.x,y:h.y+C.y},J={x:p.x+L.x,y:p.y+L.y},V=Math.max(Math.abs(se.x-b[0].x),Math.abs(J.x-b[0].x)),ne=Math.max(Math.abs(se.y-b[0].y),Math.abs(J.y-b[0].y));V>=ne?(N=(se.x+J.x)/2,S=b[0].y):(N=b[0].x,S=(se.y+J.y)/2)}return[[e,{x:h.x+C.x,y:h.y+C.y},...b,{x:p.x+L.x,y:p.y+L.y},n],N,S,F,ue]}function UI(e,t,n,i){const a=Math.min(ig(e,t)/2,ig(t,n)/2,i),{x:u,y:c}=t;if(e.x===u&&u===n.x||e.y===c&&c===n.y)return`L${u} ${c}`;if(e.y===c){const p=e.x<n.x?-1:1,m=e.y<n.y?1:-1;return`L ${u+a*p},${c}Q ${u},${c} ${u},${c+a*m}`}const f=e.x<n.x?1:-1,h=e.y<n.y?-1:1;return`L ${u},${c+a*h}Q ${u},${c} ${u+a*f},${c}`}function md({sourceX:e,sourceY:t,sourcePosition:n=ze.Bottom,targetX:i,targetY:a,targetPosition:u=ze.Top,borderRadius:c=5,centerX:f,centerY:h,offset:p=20}){const[m,y,x,b,N]=KI({source:{x:e,y:t},sourcePosition:n,target:{x:i,y:a},targetPosition:u,center:{x:f,y:h},offset:p});return[m.reduce((C,L,U)=>{let te="";return U>0&&U<m.length-1?te=UI(m[U-1],L,m[U+1],c):te=`${U===0?"M":"L"}${L.x} ${L.y}`,C+=te,C},""),y,x,b,N]}const tl=k.memo(({sourceX:e,sourceY:t,targetX:n,targetY:i,label:a,labelStyle:u,labelShowBg:c,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:m,sourcePosition:y=ze.Bottom,targetPosition:x=ze.Top,markerEnd:b,markerStart:N,pathOptions:S,interactionWidth:C})=>{const[L,U,te]=md({sourceX:e,sourceY:t,sourcePosition:y,targetX:n,targetY:i,targetPosition:x,borderRadius:S==null?void 0:S.borderRadius,offset:S==null?void 0:S.offset});return re.createElement(fu,{path:L,labelX:U,labelY:te,label:a,labelStyle:u,labelShowBg:c,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:m,markerEnd:b,markerStart:N,interactionWidth:C})});tl.displayName="SmoothStepEdge";const lh=k.memo(e=>{var t;return re.createElement(tl,{...e,pathOptions:k.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});lh.displayName="StepEdge";function zI({sourceX:e,sourceY:t,targetX:n,targetY:i}){const[a,u,c,f]=uv({sourceX:e,sourceY:t,targetX:n,targetY:i});return[`M ${e},${t}L ${n},${i}`,a,u,c,f]}const fh=k.memo(({sourceX:e,sourceY:t,targetX:n,targetY:i,label:a,labelStyle:u,labelShowBg:c,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:m,markerEnd:y,markerStart:x,interactionWidth:b})=>{const[N,S,C]=zI({sourceX:e,sourceY:t,targetX:n,targetY:i});return re.createElement(fu,{path:N,labelX:S,labelY:C,label:a,labelStyle:u,labelShowBg:c,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:m,markerEnd:y,markerStart:x,interactionWidth:b})});fh.displayName="StraightEdge";function dc(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function og({pos:e,x1:t,y1:n,x2:i,y2:a,c:u}){switch(e){case ze.Left:return[t-dc(t-i,u),n];case ze.Right:return[t+dc(i-t,u),n];case ze.Top:return[t,n-dc(n-a,u)];case ze.Bottom:return[t,n+dc(a-n,u)]}}function fv({sourceX:e,sourceY:t,sourcePosition:n=ze.Bottom,targetX:i,targetY:a,targetPosition:u=ze.Top,curvature:c=.25}){const[f,h]=og({pos:n,x1:e,y1:t,x2:i,y2:a,c}),[p,m]=og({pos:u,x1:i,y1:a,x2:e,y2:t,c}),[y,x,b,N]=cv({sourceX:e,sourceY:t,targetX:i,targetY:a,sourceControlX:f,sourceControlY:h,targetControlX:p,targetControlY:m});return[`M${e},${t} C${f},${h} ${p},${m} ${i},${a}`,y,x,b,N]}const Lc=k.memo(({sourceX:e,sourceY:t,targetX:n,targetY:i,sourcePosition:a=ze.Bottom,targetPosition:u=ze.Top,label:c,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:y,style:x,markerEnd:b,markerStart:N,pathOptions:S,interactionWidth:C})=>{const[L,U,te]=fv({sourceX:e,sourceY:t,sourcePosition:a,targetX:n,targetY:i,targetPosition:u,curvature:S==null?void 0:S.curvature});return re.createElement(fu,{path:L,labelX:U,labelY:te,label:c,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:y,style:x,markerEnd:b,markerStart:N,interactionWidth:C})});Lc.displayName="BezierEdge";const dh=k.createContext(null),YI=dh.Provider;dh.Consumer;const VI=()=>k.useContext(dh),qI=e=>"id"in e&&"source"in e&&"target"in e,XI=({source:e,sourceHandle:t,target:n,targetHandle:i})=>`reactflow__edge-${e}${t||""}-${n}${i||""}`,gd=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(i=>`${i}=${e[i]}`).join("&")}`,GI=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),ZI=(e,t)=>{if(!e.source||!e.target)return t;let n;return qI(e)?n={...e}:n={...e,id:XI(e)},GI(n,t)?t:t.concat(n)},vd=({x:e,y:t},[n,i,a],u,[c,f])=>{const h={x:(e-n)/a,y:(t-i)/a};return u?{x:c*Math.round(h.x/c),y:f*Math.round(h.y/f)}:h},dv=({x:e,y:t},[n,i,a])=>({x:e*a+n,y:t*a+i}),zo=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],i=(e.height??0)*t[1],a={x:e.position.x-n,y:e.position.y-i};return{...a,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-i}:a}},nl=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((i,a)=>{const{x:u,y:c}=zo(a,t).positionAbsolute;return iv(i,eu({x:u,y:c,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return ov(n)},hv=(e,t,[n,i,a]=[0,0,1],u=!1,c=!1,f=[0,0])=>{const h={x:(t.x-n)/a,y:(t.y-i)/a,width:t.width/a,height:t.height/a},p=[];return e.forEach(m=>{const{width:y,height:x,selectable:b=!0,hidden:N=!1}=m;if(c&&!b||N)return!1;const{positionAbsolute:S}=zo(m,f),C={x:S.x,y:S.y,width:y||0,height:x||0},L=hd(h,C),U=typeof y>"u"||typeof x>"u"||y===null||x===null,te=u&&L>0,F=(y||0)*(x||0);(U||te||L>=F||m.dragging)&&p.push(m)}),p},pv=(e,t)=>{const n=e.map(i=>i.id);return t.filter(i=>n.includes(i.source)||n.includes(i.target))},mv=(e,t,n,i,a,u=.1)=>{const c=t/(e.width*(1+u)),f=n/(e.height*(1+u)),h=Math.min(c,f),p=za(h,i,a),m=e.x+e.width/2,y=e.y+e.height/2,x=t/2-m*p,b=n/2-y*p;return{x,y:b,zoom:p}},Ro=(e,t=0)=>e.transition().duration(t);function ag(e,t,n,i){return(t[n]||[]).reduce((a,u)=>{var c,f;return`${e.id}-${u.id}-${n}`!==i&&a.push({id:u.id||null,type:n,nodeId:e.id,x:(((c=e.positionAbsolute)==null?void 0:c.x)??0)+u.x+u.width/2,y:(((f=e.positionAbsolute)==null?void 0:f.y)??0)+u.y+u.height/2}),a},[])}function QI(e,t,n,i,a,u){const{x:c,y:f}=Qi(e),p=t.elementsFromPoint(c,f).find(N=>N.classList.contains("react-flow__handle"));if(p){const N=p.getAttribute("data-nodeid");if(N){const S=hh(void 0,p),C=p.getAttribute("data-handleid"),L=u({nodeId:N,id:C,type:S});if(L){const U=a.find(te=>te.nodeId===N&&te.type===S&&te.id===C);return{handle:{id:C,type:S,nodeId:N,x:(U==null?void 0:U.x)||n.x,y:(U==null?void 0:U.y)||n.y},validHandleResult:L}}}}let m=[],y=1/0;if(a.forEach(N=>{const S=Math.sqrt((N.x-n.x)**2+(N.y-n.y)**2);if(S<=i){const C=u(N);S<=y&&(S<y?m=[{handle:N,validHandleResult:C}]:S===y&&m.push({handle:N,validHandleResult:C}),y=S)}}),!m.length)return{handle:null,validHandleResult:gv()};if(m.length===1)return m[0];const x=m.some(({validHandleResult:N})=>N.isValid),b=m.some(({handle:N})=>N.type==="target");return m.find(({handle:N,validHandleResult:S})=>b?N.type==="target":x?S.isValid:!0)||m[0]}const JI={source:null,target:null,sourceHandle:null,targetHandle:null},gv=()=>({handleDomNode:null,isValid:!1,connection:JI,endHandle:null});function vv(e,t,n,i,a,u,c){const f=a==="target",h=c.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),p={...gv(),handleDomNode:h};if(h){const m=hh(void 0,h),y=h.getAttribute("data-nodeid"),x=h.getAttribute("data-handleid"),b=h.classList.contains("connectable"),N=h.classList.contains("connectableend"),S={source:f?y:n,sourceHandle:f?x:i,target:f?n:y,targetHandle:f?i:x};p.connection=S,b&&N&&(t===Go.Strict?f&&m==="source"||!f&&m==="target":y!==n||x!==i)&&(p.endHandle={nodeId:y,handleId:x,type:m},p.isValid=u(S))}return p}function eC({nodes:e,nodeId:t,handleId:n,handleType:i}){return e.reduce((a,u)=>{if(u[en]){const{handleBounds:c}=u[en];let f=[],h=[];c&&(f=ag(u,c,"source",`${t}-${n}-${i}`),h=ag(u,c,"target",`${t}-${n}-${i}`)),a.push(...f,...h)}return a},[])}function hh(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Rf(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function tC(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function yv({event:e,handleId:t,nodeId:n,onConnect:i,isTarget:a,getState:u,setState:c,isValidConnection:f,edgeUpdaterType:h,onReconnectEnd:p}){const m=rv(e.target),{connectionMode:y,domNode:x,autoPanOnConnect:b,connectionRadius:N,onConnectStart:S,panBy:C,getNodes:L,cancelConnection:U}=u();let te=0,F;const{x:ue,y:ce}=Qi(e),z=m==null?void 0:m.elementFromPoint(ue,ce),Q=hh(h,z),se=x==null?void 0:x.getBoundingClientRect();if(!se||!Q)return;let J,V=Qi(e,se),ne=!1,ye=null,M=!1,ae=null;const W=eC({nodes:L(),nodeId:n,handleId:t,handleType:Q}),pe=()=>{if(!b)return;const[de,ge]=nv(V,se);C({x:de,y:ge}),te=requestAnimationFrame(pe)};c({connectionPosition:V,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:Q,connectionStartHandle:{nodeId:n,handleId:t,type:Q},connectionEndHandle:null}),S==null||S(e,{nodeId:n,handleId:t,handleType:Q});function oe(de){const{transform:ge}=u();V=Qi(de,se);const{handle:Ee,validHandleResult:ke}=QI(de,m,vd(V,ge,!1,[1,1]),N,W,Me=>vv(Me,y,n,t,a?"target":"source",f,m));if(F=Ee,ne||(pe(),ne=!0),ae=ke.handleDomNode,ye=ke.connection,M=ke.isValid,c({connectionPosition:F&&M?dv({x:F.x,y:F.y},ge):V,connectionStatus:tC(!!F,M),connectionEndHandle:ke.endHandle}),!F&&!M&&!ae)return Rf(J);ye.source!==ye.target&&ae&&(Rf(J),J=ae,ae.classList.add("connecting","react-flow__handle-connecting"),ae.classList.toggle("valid",M),ae.classList.toggle("react-flow__handle-valid",M))}function X(de){var ge,Ee;(F||ae)&&ye&&M&&(i==null||i(ye)),(Ee=(ge=u()).onConnectEnd)==null||Ee.call(ge,de),h&&(p==null||p(de)),Rf(J),U(),cancelAnimationFrame(te),ne=!1,M=!1,ye=null,ae=null,m.removeEventListener("mousemove",oe),m.removeEventListener("mouseup",X),m.removeEventListener("touchmove",oe),m.removeEventListener("touchend",X)}m.addEventListener("mousemove",oe),m.addEventListener("mouseup",X),m.addEventListener("touchmove",oe),m.addEventListener("touchend",X)}const sg=()=>!0,nC=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),rC=(e,t,n)=>i=>{const{connectionStartHandle:a,connectionEndHandle:u,connectionClickStartHandle:c}=i;return{connecting:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.handleId)===t&&(a==null?void 0:a.type)===n||(u==null?void 0:u.nodeId)===e&&(u==null?void 0:u.handleId)===t&&(u==null?void 0:u.type)===n,clickConnecting:(c==null?void 0:c.nodeId)===e&&(c==null?void 0:c.handleId)===t&&(c==null?void 0:c.type)===n}},wv=k.forwardRef(({type:e="source",position:t=ze.Top,isValidConnection:n,isConnectable:i=!0,isConnectableStart:a=!0,isConnectableEnd:u=!0,id:c,onConnect:f,children:h,className:p,onMouseDown:m,onTouchStart:y,...x},b)=>{var se,J;const N=c||null,S=e==="target",C=mn(),L=VI(),{connectOnClick:U,noPanClassName:te}=Mt(nC,qn),{connecting:F,clickConnecting:ue}=Mt(rC(L,N,e),qn);L||(J=(se=C.getState()).onError)==null||J.call(se,"010",Ei.error010());const ce=V=>{const{defaultEdgeOptions:ne,onConnect:ye,hasDefaultEdges:M}=C.getState(),ae={...ne,...V};if(M){const{edges:W,setEdges:pe}=C.getState();pe(ZI(ae,W))}ye==null||ye(ae),f==null||f(ae)},z=V=>{if(!L)return;const ne=sv(V);a&&(ne&&V.button===0||!ne)&&yv({event:V,handleId:N,nodeId:L,onConnect:ce,isTarget:S,getState:C.getState,setState:C.setState,isValidConnection:n||C.getState().isValidConnection||sg}),ne?m==null||m(V):y==null||y(V)},Q=V=>{const{onClickConnectStart:ne,onClickConnectEnd:ye,connectionClickStartHandle:M,connectionMode:ae,isValidConnection:W}=C.getState();if(!L||!M&&!a)return;if(!M){ne==null||ne(V,{nodeId:L,handleId:N,handleType:e}),C.setState({connectionClickStartHandle:{nodeId:L,type:e,handleId:N}});return}const pe=rv(V.target),oe=n||W||sg,{connection:X,isValid:de}=vv({nodeId:L,id:N,type:e},ae,M.nodeId,M.handleId||null,M.type,oe,pe);de&&ce(X),ye==null||ye(V),C.setState({connectionClickStartHandle:null})};return re.createElement("div",{"data-handleid":N,"data-nodeid":L,"data-handlepos":t,"data-id":`${L}-${N}-${e}`,className:Sn(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",te,p,{source:!S,target:S,connectable:i,connectablestart:a,connectableend:u,connecting:ue,connectionindicator:i&&(a&&!F||u&&F)}]),onMouseDown:z,onTouchStart:z,onClick:U?Q:void 0,ref:b,...x},h)});wv.displayName="Handle";var Gi=k.memo(wv);const xv=({data:e,isConnectable:t,targetPosition:n=ze.Top,sourcePosition:i=ze.Bottom})=>re.createElement(re.Fragment,null,re.createElement(Gi,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,re.createElement(Gi,{type:"source",position:i,isConnectable:t}));xv.displayName="DefaultNode";var yd=k.memo(xv);const bv=({data:e,isConnectable:t,sourcePosition:n=ze.Bottom})=>re.createElement(re.Fragment,null,e==null?void 0:e.label,re.createElement(Gi,{type:"source",position:n,isConnectable:t}));bv.displayName="InputNode";var _v=k.memo(bv);const Ev=({data:e,isConnectable:t,targetPosition:n=ze.Top})=>re.createElement(re.Fragment,null,re.createElement(Gi,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);Ev.displayName="OutputNode";var Sv=k.memo(Ev);const ph=()=>null;ph.displayName="GroupNode";const iC=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),hc=e=>e.id;function oC(e,t){return qn(e.selectedNodes.map(hc),t.selectedNodes.map(hc))&&qn(e.selectedEdges.map(hc),t.selectedEdges.map(hc))}const Tv=k.memo(({onSelectionChange:e})=>{const t=mn(),{selectedNodes:n,selectedEdges:i}=Mt(iC,oC);return k.useEffect(()=>{const a={nodes:n,edges:i};e==null||e(a),t.getState().onSelectionChange.forEach(u=>u(a))},[n,i,e]),null});Tv.displayName="SelectionListener";const aC=e=>!!e.onSelectionChange;function sC({onSelectionChange:e}){const t=Mt(aC);return e||t?re.createElement(Tv,{onSelectionChange:e}):null}const uC=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Ia(e,t){k.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function mt(e,t,n){k.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const cC=({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,onConnect:a,onConnectStart:u,onConnectEnd:c,onClickConnectStart:f,onClickConnectEnd:h,nodesDraggable:p,nodesConnectable:m,nodesFocusable:y,edgesFocusable:x,edgesUpdatable:b,elevateNodesOnSelect:N,minZoom:S,maxZoom:C,nodeExtent:L,onNodesChange:U,onEdgesChange:te,elementsSelectable:F,connectionMode:ue,snapGrid:ce,snapToGrid:z,translateExtent:Q,connectOnClick:se,defaultEdgeOptions:J,fitView:V,fitViewOptions:ne,onNodesDelete:ye,onEdgesDelete:M,onNodeDrag:ae,onNodeDragStart:W,onNodeDragStop:pe,onSelectionDrag:oe,onSelectionDragStart:X,onSelectionDragStop:de,noPanClassName:ge,nodeOrigin:Ee,rfId:ke,autoPanOnConnect:Me,autoPanOnNodeDrag:Re,onError:Be,connectionRadius:Ye,isValidConnection:qe,nodeDragThreshold:Se})=>{const{setNodes:rt,setEdges:xt,setDefaultNodesAndEdges:He,setMinZoom:Tt,setMaxZoom:Xe,setTranslateExtent:it,setNodeExtent:St,reset:et}=Mt(uC,qn),je=mn();return k.useEffect(()=>{const Ft=i==null?void 0:i.map(jt=>({...jt,...J}));return He(n,Ft),()=>{et()}},[]),mt("defaultEdgeOptions",J,je.setState),mt("connectionMode",ue,je.setState),mt("onConnect",a,je.setState),mt("onConnectStart",u,je.setState),mt("onConnectEnd",c,je.setState),mt("onClickConnectStart",f,je.setState),mt("onClickConnectEnd",h,je.setState),mt("nodesDraggable",p,je.setState),mt("nodesConnectable",m,je.setState),mt("nodesFocusable",y,je.setState),mt("edgesFocusable",x,je.setState),mt("edgesUpdatable",b,je.setState),mt("elementsSelectable",F,je.setState),mt("elevateNodesOnSelect",N,je.setState),mt("snapToGrid",z,je.setState),mt("snapGrid",ce,je.setState),mt("onNodesChange",U,je.setState),mt("onEdgesChange",te,je.setState),mt("connectOnClick",se,je.setState),mt("fitViewOnInit",V,je.setState),mt("fitViewOnInitOptions",ne,je.setState),mt("onNodesDelete",ye,je.setState),mt("onEdgesDelete",M,je.setState),mt("onNodeDrag",ae,je.setState),mt("onNodeDragStart",W,je.setState),mt("onNodeDragStop",pe,je.setState),mt("onSelectionDrag",oe,je.setState),mt("onSelectionDragStart",X,je.setState),mt("onSelectionDragStop",de,je.setState),mt("noPanClassName",ge,je.setState),mt("nodeOrigin",Ee,je.setState),mt("rfId",ke,je.setState),mt("autoPanOnConnect",Me,je.setState),mt("autoPanOnNodeDrag",Re,je.setState),mt("onError",Be,je.setState),mt("connectionRadius",Ye,je.setState),mt("isValidConnection",qe,je.setState),mt("nodeDragThreshold",Se,je.setState),Ia(e,rt),Ia(t,xt),Ia(S,Tt),Ia(C,Xe),Ia(Q,it),Ia(L,St),null},ug={display:"none"},lC={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Nv="react-flow__node-desc",kv="react-flow__edge-desc",fC="react-flow__aria-live",dC=e=>e.ariaLiveMessage;function hC({rfId:e}){const t=Mt(dC);return re.createElement("div",{id:`${fC}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:lC},t)}function pC({rfId:e,disableKeyboardA11y:t}){return re.createElement(re.Fragment,null,re.createElement("div",{id:`${Nv}-${e}`,style:ug},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),re.createElement("div",{id:`${kv}-${e}`,style:ug},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&re.createElement(hC,{rfId:e}))}var nu=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,i]=k.useState(!1),a=k.useRef(!1),u=k.useRef(new Set([])),[c,f]=k.useMemo(()=>{if(e!==null){const p=(Array.isArray(e)?e:[e]).filter(y=>typeof y=="string").map(y=>y.split("+")),m=p.reduce((y,x)=>y.concat(...x),[]);return[p,m]}return[[],[]]},[e]);return k.useEffect(()=>{const h=typeof document<"u"?document:null,p=(t==null?void 0:t.target)||h;if(e!==null){const m=b=>{if(a.current=b.ctrlKey||b.metaKey||b.shiftKey,(!a.current||a.current&&!t.actInsideInputWithModifier)&&pd(b))return!1;const S=lg(b.code,f);u.current.add(b[S]),cg(c,u.current,!1)&&(b.preventDefault(),i(!0))},y=b=>{if((!a.current||a.current&&!t.actInsideInputWithModifier)&&pd(b))return!1;const S=lg(b.code,f);cg(c,u.current,!0)?(i(!1),u.current.clear()):u.current.delete(b[S]),b.key==="Meta"&&u.current.clear(),a.current=!1},x=()=>{u.current.clear(),i(!1)};return p==null||p.addEventListener("keydown",m),p==null||p.addEventListener("keyup",y),window.addEventListener("blur",x),()=>{p==null||p.removeEventListener("keydown",m),p==null||p.removeEventListener("keyup",y),window.removeEventListener("blur",x)}}},[e,i]),n};function cg(e,t,n){return e.filter(i=>n||i.length===t.size).some(i=>i.every(a=>t.has(a)))}function lg(e,t){return t.includes(e)?"code":"key"}function Iv(e,t,n,i){var f,h;const a=e.parentNode||e.parentId;if(!a)return n;const u=t.get(a),c=zo(u,i);return Iv(u,t,{x:(n.x??0)+c.x,y:(n.y??0)+c.y,z:(((f=u[en])==null?void 0:f.z)??0)>(n.z??0)?((h=u[en])==null?void 0:h.z)??0:n.z??0},i)}function Cv(e,t,n){e.forEach(i=>{var u;const a=i.parentNode||i.parentId;if(a&&!e.has(a))throw new Error(`Parent node ${a} not found`);if(a||n!=null&&n[i.id]){const{x:c,y:f,z:h}=Iv(i,e,{...i.position,z:((u=i[en])==null?void 0:u.z)??0},t);i.positionAbsolute={x:c,y:f},i[en].z=h,n!=null&&n[i.id]&&(i[en].isParent=!0)}})}function Mf(e,t,n,i){const a=new Map,u={},c=i?1e3:0;return e.forEach(f=>{var b;const h=(wr(f.zIndex)?f.zIndex:0)+(f.selected?c:0),p=t.get(f.id),m={...f,positionAbsolute:{x:f.position.x,y:f.position.y}},y=f.parentNode||f.parentId;y&&(u[y]=!0);const x=(p==null?void 0:p.type)&&(p==null?void 0:p.type)!==f.type;Object.defineProperty(m,en,{enumerable:!1,value:{handleBounds:x||(b=p==null?void 0:p[en])==null?void 0:b.handleBounds,z:h}}),a.set(f.id,m)}),Cv(a,n,u),a}function Ov(e,t={}){const{getNodes:n,width:i,height:a,minZoom:u,maxZoom:c,d3Zoom:f,d3Selection:h,fitViewOnInitDone:p,fitViewOnInit:m,nodeOrigin:y}=e(),x=t.initial&&!p&&m;if(f&&h&&(x||!t.initial)){const N=n().filter(C=>{var U;const L=t.includeHiddenNodes?C.width&&C.height:!C.hidden;return(U=t.nodes)!=null&&U.length?L&&t.nodes.some(te=>te.id===C.id):L}),S=N.every(C=>C.width&&C.height);if(N.length>0&&S){const C=nl(N,y),{x:L,y:U,zoom:te}=mv(C,i,a,t.minZoom??u,t.maxZoom??c,t.padding??.1),F=xi.translate(L,U).scale(te);return typeof t.duration=="number"&&t.duration>0?f.transform(Ro(h,t.duration),F):f.transform(h,F),!0}}return!1}function mC(e,t){return e.forEach(n=>{const i=t.get(n.id);i&&t.set(i.id,{...i,[en]:i[en],selected:n.selected})}),new Map(t)}function gC(e,t){return t.map(n=>{const i=e.find(a=>a.id===n.id);return i&&(n.selected=i.selected),n})}function pc({changedNodes:e,changedEdges:t,get:n,set:i}){const{nodeInternals:a,edges:u,onNodesChange:c,onEdgesChange:f,hasDefaultNodes:h,hasDefaultEdges:p}=n();e!=null&&e.length&&(h&&i({nodeInternals:mC(e,a)}),c==null||c(e)),t!=null&&t.length&&(p&&i({edges:gC(t,u)}),f==null||f(t))}const Ca=()=>{},vC={zoomIn:Ca,zoomOut:Ca,zoomTo:Ca,getZoom:()=>1,setViewport:Ca,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Ca,fitBounds:Ca,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},yC=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),wC=()=>{const e=mn(),{d3Zoom:t,d3Selection:n}=Mt(yC,qn);return k.useMemo(()=>n&&t?{zoomIn:a=>t.scaleBy(Ro(n,a==null?void 0:a.duration),1.2),zoomOut:a=>t.scaleBy(Ro(n,a==null?void 0:a.duration),1/1.2),zoomTo:(a,u)=>t.scaleTo(Ro(n,u==null?void 0:u.duration),a),getZoom:()=>e.getState().transform[2],setViewport:(a,u)=>{const[c,f,h]=e.getState().transform,p=xi.translate(a.x??c,a.y??f).scale(a.zoom??h);t.transform(Ro(n,u==null?void 0:u.duration),p)},getViewport:()=>{const[a,u,c]=e.getState().transform;return{x:a,y:u,zoom:c}},fitView:a=>Ov(e.getState,a),setCenter:(a,u,c)=>{const{width:f,height:h,maxZoom:p}=e.getState(),m=typeof(c==null?void 0:c.zoom)<"u"?c.zoom:p,y=f/2-a*m,x=h/2-u*m,b=xi.translate(y,x).scale(m);t.transform(Ro(n,c==null?void 0:c.duration),b)},fitBounds:(a,u)=>{const{width:c,height:f,minZoom:h,maxZoom:p}=e.getState(),{x:m,y,zoom:x}=mv(a,c,f,h,p,(u==null?void 0:u.padding)??.1),b=xi.translate(m,y).scale(x);t.transform(Ro(n,u==null?void 0:u.duration),b)},project:a=>{const{transform:u,snapToGrid:c,snapGrid:f}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),vd(a,u,c,f)},screenToFlowPosition:a=>{const{transform:u,snapToGrid:c,snapGrid:f,domNode:h}=e.getState();if(!h)return a;const{x:p,y:m}=h.getBoundingClientRect(),y={x:a.x-p,y:a.y-m};return vd(y,u,c,f)},flowToScreenPosition:a=>{const{transform:u,domNode:c}=e.getState();if(!c)return a;const{x:f,y:h}=c.getBoundingClientRect(),p=dv(a,u);return{x:p.x+f,y:p.y+h}},viewportInitialized:!0}:vC,[t,n])};function mh(){const e=wC(),t=mn(),n=k.useCallback(()=>t.getState().getNodes().map(S=>({...S})),[]),i=k.useCallback(S=>t.getState().nodeInternals.get(S),[]),a=k.useCallback(()=>{const{edges:S=[]}=t.getState();return S.map(C=>({...C}))},[]),u=k.useCallback(S=>{const{edges:C=[]}=t.getState();return C.find(L=>L.id===S)},[]),c=k.useCallback(S=>{const{getNodes:C,setNodes:L,hasDefaultNodes:U,onNodesChange:te}=t.getState(),F=C(),ue=typeof S=="function"?S(F):S;if(U)L(ue);else if(te){const ce=ue.length===0?F.map(z=>({type:"remove",id:z.id})):ue.map(z=>({item:z,type:"reset"}));te(ce)}},[]),f=k.useCallback(S=>{const{edges:C=[],setEdges:L,hasDefaultEdges:U,onEdgesChange:te}=t.getState(),F=typeof S=="function"?S(C):S;if(U)L(F);else if(te){const ue=F.length===0?C.map(ce=>({type:"remove",id:ce.id})):F.map(ce=>({item:ce,type:"reset"}));te(ue)}},[]),h=k.useCallback(S=>{const C=Array.isArray(S)?S:[S],{getNodes:L,setNodes:U,hasDefaultNodes:te,onNodesChange:F}=t.getState();if(te){const ce=[...L(),...C];U(ce)}else if(F){const ue=C.map(ce=>({item:ce,type:"add"}));F(ue)}},[]),p=k.useCallback(S=>{const C=Array.isArray(S)?S:[S],{edges:L=[],setEdges:U,hasDefaultEdges:te,onEdgesChange:F}=t.getState();if(te)U([...L,...C]);else if(F){const ue=C.map(ce=>({item:ce,type:"add"}));F(ue)}},[]),m=k.useCallback(()=>{const{getNodes:S,edges:C=[],transform:L}=t.getState(),[U,te,F]=L;return{nodes:S().map(ue=>({...ue})),edges:C.map(ue=>({...ue})),viewport:{x:U,y:te,zoom:F}}},[]),y=k.useCallback(({nodes:S,edges:C})=>{const{nodeInternals:L,getNodes:U,edges:te,hasDefaultNodes:F,hasDefaultEdges:ue,onNodesDelete:ce,onEdgesDelete:z,onNodesChange:Q,onEdgesChange:se}=t.getState(),J=(S||[]).map(ae=>ae.id),V=(C||[]).map(ae=>ae.id),ne=U().reduce((ae,W)=>{const pe=W.parentNode||W.parentId,oe=!J.includes(W.id)&&pe&&ae.find(de=>de.id===pe);return(typeof W.deletable=="boolean"?W.deletable:!0)&&(J.includes(W.id)||oe)&&ae.push(W),ae},[]),ye=te.filter(ae=>typeof ae.deletable=="boolean"?ae.deletable:!0),M=ye.filter(ae=>V.includes(ae.id));if(ne||M){const ae=pv(ne,ye),W=[...M,...ae],pe=W.reduce((oe,X)=>(oe.includes(X.id)||oe.push(X.id),oe),[]);if((ue||F)&&(ue&&t.setState({edges:te.filter(oe=>!pe.includes(oe.id))}),F&&(ne.forEach(oe=>{L.delete(oe.id)}),t.setState({nodeInternals:new Map(L)}))),pe.length>0&&(z==null||z(W),se&&se(pe.map(oe=>({id:oe,type:"remove"})))),ne.length>0&&(ce==null||ce(ne),Q)){const oe=ne.map(X=>({id:X.id,type:"remove"}));Q(oe)}}},[]),x=k.useCallback(S=>{const C=FI(S),L=C?null:t.getState().nodeInternals.get(S.id);return!C&&!L?[null,null,C]:[C?S:tg(L),L,C]},[]),b=k.useCallback((S,C=!0,L)=>{const[U,te,F]=x(S);return U?(L||t.getState().getNodes()).filter(ue=>{if(!F&&(ue.id===te.id||!ue.positionAbsolute))return!1;const ce=tg(ue),z=hd(ce,U);return C&&z>0||z>=U.width*U.height}):[]},[]),N=k.useCallback((S,C,L=!0)=>{const[U]=x(S);if(!U)return!1;const te=hd(U,C);return L&&te>0||te>=U.width*U.height},[]);return k.useMemo(()=>({...e,getNodes:n,getNode:i,getEdges:a,getEdge:u,setNodes:c,setEdges:f,addNodes:h,addEdges:p,toObject:m,deleteElements:y,getIntersectingNodes:b,isNodeIntersecting:N}),[e,n,i,a,u,c,f,h,p,m,y,b,N])}const xC={actInsideInputWithModifier:!1};var bC=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=mn(),{deleteElements:i}=mh(),a=nu(e,xC),u=nu(t);k.useEffect(()=>{if(a){const{edges:c,getNodes:f}=n.getState(),h=f().filter(m=>m.selected),p=c.filter(m=>m.selected);i({nodes:h,edges:p}),n.setState({nodesSelectionActive:!1})}},[a]),k.useEffect(()=>{n.setState({multiSelectionActive:u})},[u])};function _C(e){const t=mn();k.useEffect(()=>{let n;const i=()=>{var u,c;if(!e.current)return;const a=sh(e.current);(a.height===0||a.width===0)&&((c=(u=t.getState()).onError)==null||c.call(u,"004",Ei.error004())),t.setState({width:a.width||500,height:a.height||500})};return i(),window.addEventListener("resize",i),e.current&&(n=new ResizeObserver(()=>i()),n.observe(e.current)),()=>{window.removeEventListener("resize",i),n&&e.current&&n.unobserve(e.current)}},[])}const gh={position:"absolute",width:"100%",height:"100%",top:0,left:0},EC=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,mc=e=>({x:e.x,y:e.y,zoom:e.k}),Oa=(e,t)=>e.target.closest(`.${t}`),fg=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),dg=e=>{const t=e.ctrlKey&&Rc()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},SC=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),TC=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:i,zoomOnScroll:a=!0,zoomOnPinch:u=!0,panOnScroll:c=!1,panOnScrollSpeed:f=.5,panOnScrollMode:h=jo.Free,zoomOnDoubleClick:p=!0,elementsSelectable:m,panOnDrag:y=!0,defaultViewport:x,translateExtent:b,minZoom:N,maxZoom:S,zoomActivationKeyCode:C,preventScrolling:L=!0,children:U,noWheelClassName:te,noPanClassName:F})=>{const ue=k.useRef(),ce=mn(),z=k.useRef(!1),Q=k.useRef(!1),se=k.useRef(null),J=k.useRef({x:0,y:0,zoom:0}),{d3Zoom:V,d3Selection:ne,d3ZoomHandler:ye,userSelectionActive:M}=Mt(SC,qn),ae=nu(C),W=k.useRef(0),pe=k.useRef(!1),oe=k.useRef();return _C(se),k.useEffect(()=>{if(se.current){const X=se.current.getBoundingClientRect(),de=ev().scaleExtent([N,S]).translateExtent(b),ge=vr(se.current).call(de),Ee=xi.translate(x.x,x.y).scale(za(x.zoom,N,S)),ke=[[0,0],[X.width,X.height]],Me=de.constrain()(Ee,ke,b);de.transform(ge,Me),de.wheelDelta(dg),ce.setState({d3Zoom:de,d3Selection:ge,d3ZoomHandler:ge.on("wheel.zoom"),transform:[Me.x,Me.y,Me.k],domNode:se.current.closest(".react-flow")})}},[]),k.useEffect(()=>{ne&&V&&(c&&!ae&&!M?ne.on("wheel.zoom",X=>{if(Oa(X,te))return!1;X.preventDefault(),X.stopImmediatePropagation();const de=ne.property("__zoom").k||1;if(X.ctrlKey&&u){const qe=Rr(X),Se=dg(X),rt=de*Math.pow(2,Se);V.scaleTo(ne,rt,qe,X);return}const ge=X.deltaMode===1?20:1;let Ee=h===jo.Vertical?0:X.deltaX*ge,ke=h===jo.Horizontal?0:X.deltaY*ge;!Rc()&&X.shiftKey&&h!==jo.Vertical&&(Ee=X.deltaY*ge,ke=0),V.translateBy(ne,-(Ee/de)*f,-(ke/de)*f,{internal:!0});const Me=mc(ne.property("__zoom")),{onViewportChangeStart:Re,onViewportChange:Be,onViewportChangeEnd:Ye}=ce.getState();clearTimeout(oe.current),pe.current||(pe.current=!0,t==null||t(X,Me),Re==null||Re(Me)),pe.current&&(e==null||e(X,Me),Be==null||Be(Me),oe.current=setTimeout(()=>{n==null||n(X,Me),Ye==null||Ye(Me),pe.current=!1},150))},{passive:!1}):typeof ye<"u"&&ne.on("wheel.zoom",function(X,de){if(!L&&X.type==="wheel"&&!X.ctrlKey||Oa(X,te))return null;X.preventDefault(),ye.call(this,X,de)},{passive:!1}))},[M,c,h,ne,V,ye,ae,u,L,te,t,e,n]),k.useEffect(()=>{V&&V.on("start",X=>{var Ee,ke;if(!X.sourceEvent||X.sourceEvent.internal)return null;W.current=(Ee=X.sourceEvent)==null?void 0:Ee.button;const{onViewportChangeStart:de}=ce.getState(),ge=mc(X.transform);z.current=!0,J.current=ge,((ke=X.sourceEvent)==null?void 0:ke.type)==="mousedown"&&ce.setState({paneDragging:!0}),de==null||de(ge),t==null||t(X.sourceEvent,ge)})},[V,t]),k.useEffect(()=>{V&&(M&&!z.current?V.on("zoom",null):M||V.on("zoom",X=>{var ge;const{onViewportChange:de}=ce.getState();if(ce.setState({transform:[X.transform.x,X.transform.y,X.transform.k]}),Q.current=!!(i&&fg(y,W.current??0)),(e||de)&&!((ge=X.sourceEvent)!=null&&ge.internal)){const Ee=mc(X.transform);de==null||de(Ee),e==null||e(X.sourceEvent,Ee)}}))},[M,V,e,y,i]),k.useEffect(()=>{V&&V.on("end",X=>{if(!X.sourceEvent||X.sourceEvent.internal)return null;const{onViewportChangeEnd:de}=ce.getState();if(z.current=!1,ce.setState({paneDragging:!1}),i&&fg(y,W.current??0)&&!Q.current&&i(X.sourceEvent),Q.current=!1,(n||de)&&EC(J.current,X.transform)){const ge=mc(X.transform);J.current=ge,clearTimeout(ue.current),ue.current=setTimeout(()=>{de==null||de(ge),n==null||n(X.sourceEvent,ge)},c?150:0)}})},[V,c,y,n,i]),k.useEffect(()=>{V&&V.filter(X=>{const de=ae||a,ge=u&&X.ctrlKey;if((y===!0||Array.isArray(y)&&y.includes(1))&&X.button===1&&X.type==="mousedown"&&(Oa(X,"react-flow__node")||Oa(X,"react-flow__edge")))return!0;if(!y&&!de&&!c&&!p&&!u||M||!p&&X.type==="dblclick"||Oa(X,te)&&X.type==="wheel"||Oa(X,F)&&(X.type!=="wheel"||c&&X.type==="wheel"&&!ae)||!u&&X.ctrlKey&&X.type==="wheel"||!de&&!c&&!ge&&X.type==="wheel"||!y&&(X.type==="mousedown"||X.type==="touchstart")||Array.isArray(y)&&!y.includes(X.button)&&X.type==="mousedown")return!1;const Ee=Array.isArray(y)&&y.includes(X.button)||!X.button||X.button<=1;return(!X.ctrlKey||X.type==="wheel")&&Ee})},[M,V,a,u,c,p,y,m,ae]),re.createElement("div",{className:"react-flow__renderer",ref:se,style:gh},U)},NC=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function kC(){const{userSelectionActive:e,userSelectionRect:t}=Mt(NC,qn);return e&&t?re.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function hg(e,t){const n=t.parentNode||t.parentId,i=e.find(a=>a.id===n);if(i){const a=t.position.x+t.width-i.width,u=t.position.y+t.height-i.height;if(a>0||u>0||t.position.x<0||t.position.y<0){if(i.style={...i.style},i.style.width=i.style.width??i.width,i.style.height=i.style.height??i.height,a>0&&(i.style.width+=a),u>0&&(i.style.height+=u),t.position.x<0){const c=Math.abs(t.position.x);i.position.x=i.position.x-c,i.style.width+=c,t.position.x=0}if(t.position.y<0){const c=Math.abs(t.position.y);i.position.y=i.position.y-c,i.style.height+=c,t.position.y=0}i.width=i.style.width,i.height=i.style.height}}}function IC(e,t){if(e.some(i=>i.type==="reset"))return e.filter(i=>i.type==="reset").map(i=>i.item);const n=e.filter(i=>i.type==="add").map(i=>i.item);return t.reduce((i,a)=>{const u=e.filter(f=>f.id===a.id);if(u.length===0)return i.push(a),i;const c={...a};for(const f of u)if(f)switch(f.type){case"select":{c.selected=f.selected;break}case"position":{typeof f.position<"u"&&(c.position=f.position),typeof f.positionAbsolute<"u"&&(c.positionAbsolute=f.positionAbsolute),typeof f.dragging<"u"&&(c.dragging=f.dragging),c.expandParent&&hg(i,c);break}case"dimensions":{typeof f.dimensions<"u"&&(c.width=f.dimensions.width,c.height=f.dimensions.height),typeof f.updateStyle<"u"&&(c.style={...c.style||{},...f.dimensions}),typeof f.resizing=="boolean"&&(c.resizing=f.resizing),c.expandParent&&hg(i,c);break}case"remove":return i}return i.push(c),i},n)}function CC(e,t){return IC(e,t)}const Vi=(e,t)=>({id:e,type:"select",selected:t});function Pa(e,t){return e.reduce((n,i)=>{const a=t.includes(i.id);return!i.selected&&a?(i.selected=!0,n.push(Vi(i.id,!0))):i.selected&&!a&&(i.selected=!1,n.push(Vi(i.id,!1))),n},[])}const Lf=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},OC=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Av=k.memo(({isSelecting:e,selectionMode:t=tu.Full,panOnDrag:n,onSelectionStart:i,onSelectionEnd:a,onPaneClick:u,onPaneContextMenu:c,onPaneScroll:f,onPaneMouseEnter:h,onPaneMouseMove:p,onPaneMouseLeave:m,children:y})=>{const x=k.useRef(null),b=mn(),N=k.useRef(0),S=k.useRef(0),C=k.useRef(),{userSelectionActive:L,elementsSelectable:U,dragging:te}=Mt(OC,qn),F=()=>{b.setState({userSelectionActive:!1,userSelectionRect:null}),N.current=0,S.current=0},ue=ye=>{u==null||u(ye),b.getState().resetSelectedElements(),b.setState({nodesSelectionActive:!1})},ce=ye=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){ye.preventDefault();return}c==null||c(ye)},z=f?ye=>f(ye):void 0,Q=ye=>{const{resetSelectedElements:M,domNode:ae}=b.getState();if(C.current=ae==null?void 0:ae.getBoundingClientRect(),!U||!e||ye.button!==0||ye.target!==x.current||!C.current)return;const{x:W,y:pe}=Qi(ye,C.current);M(),b.setState({userSelectionRect:{width:0,height:0,startX:W,startY:pe,x:W,y:pe}}),i==null||i(ye)},se=ye=>{const{userSelectionRect:M,nodeInternals:ae,edges:W,transform:pe,onNodesChange:oe,onEdgesChange:X,nodeOrigin:de,getNodes:ge}=b.getState();if(!e||!C.current||!M)return;b.setState({userSelectionActive:!0,nodesSelectionActive:!1});const Ee=Qi(ye,C.current),ke=M.startX??0,Me=M.startY??0,Re={...M,x:Ee.x<ke?Ee.x:ke,y:Ee.y<Me?Ee.y:Me,width:Math.abs(Ee.x-ke),height:Math.abs(Ee.y-Me)},Be=ge(),Ye=hv(ae,Re,pe,t===tu.Partial,!0,de),qe=pv(Ye,W).map(rt=>rt.id),Se=Ye.map(rt=>rt.id);if(N.current!==Se.length){N.current=Se.length;const rt=Pa(Be,Se);rt.length&&(oe==null||oe(rt))}if(S.current!==qe.length){S.current=qe.length;const rt=Pa(W,qe);rt.length&&(X==null||X(rt))}b.setState({userSelectionRect:Re})},J=ye=>{if(ye.button!==0)return;const{userSelectionRect:M}=b.getState();!L&&M&&ye.target===x.current&&(ue==null||ue(ye)),b.setState({nodesSelectionActive:N.current>0}),F(),a==null||a(ye)},V=ye=>{L&&(b.setState({nodesSelectionActive:N.current>0}),a==null||a(ye)),F()},ne=U&&(e||L);return re.createElement("div",{className:Sn(["react-flow__pane",{dragging:te,selection:e}]),onClick:ne?void 0:Lf(ue,x),onContextMenu:Lf(ce,x),onWheel:Lf(z,x),onMouseEnter:ne?void 0:h,onMouseDown:ne?Q:void 0,onMouseMove:ne?se:p,onMouseUp:ne?J:void 0,onMouseLeave:ne?V:m,ref:x,style:gh},y,re.createElement(kC,null))});Av.displayName="Pane";function Dv(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const i=t.get(n);return i?i.selected?!0:Dv(i,t):!1}function pg(e,t,n){let i=e;do{if(i!=null&&i.matches(t))return!0;if(i===n.current)return!1;i=i.parentElement}while(i);return!1}function AC(e,t,n,i){return Array.from(e.values()).filter(a=>(a.selected||a.id===i)&&(!a.parentNode||a.parentId||!Dv(a,e))&&(a.draggable||t&&typeof a.draggable>"u")).map(a=>{var u,c;return{id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((u=a.positionAbsolute)==null?void 0:u.x)??0),y:n.y-(((c=a.positionAbsolute)==null?void 0:c.y)??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}})}function DC(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function Pv(e,t,n,i,a=[0,0],u){const c=DC(e,e.extent||i);let f=c;const h=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(h&&e.width&&e.height){const y=n.get(h),{x,y:b}=zo(y,a).positionAbsolute;f=y&&wr(x)&&wr(b)&&wr(y.width)&&wr(y.height)?[[x+e.width*a[0],b+e.height*a[1]],[x+y.width-e.width+e.width*a[0],b+y.height-e.height+e.height*a[1]]]:f}else u==null||u("005",Ei.error005()),f=c;else if(e.extent&&h&&e.extent!=="parent"){const y=n.get(h),{x,y:b}=zo(y,a).positionAbsolute;f=[[e.extent[0][0]+x,e.extent[0][1]+b],[e.extent[1][0]+x,e.extent[1][1]+b]]}let p={x:0,y:0};if(h){const y=n.get(h);p=zo(y,a).positionAbsolute}const m=f&&f!=="parent"?uh(t,f):t;return{position:{x:m.x-p.x,y:m.y-p.y},positionAbsolute:m}}function $f({nodeId:e,dragItems:t,nodeInternals:n}){const i=t.map(a=>({...n.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[e?i.find(a=>a.id===e):i[0],i]}const mg=(e,t,n,i)=>{const a=t.querySelectorAll(e);if(!a||!a.length)return null;const u=Array.from(a),c=t.getBoundingClientRect(),f={x:c.width*i[0],y:c.height*i[1]};return u.map(h=>{const p=h.getBoundingClientRect();return{id:h.getAttribute("data-handleid"),position:h.getAttribute("data-handlepos"),x:(p.left-c.left-f.x)/n,y:(p.top-c.top-f.y)/n,...sh(h)}})};function Ds(e,t,n){return n===void 0?n:i=>{const a=t().nodeInternals.get(e);a&&n(i,{...a})}}function wd({id:e,store:t,unselect:n=!1,nodeRef:i}){const{addSelectedNodes:a,unselectNodesAndEdges:u,multiSelectionActive:c,nodeInternals:f,onError:h}=t.getState(),p=f.get(e);if(!p){h==null||h("012",Ei.error012(e));return}t.setState({nodesSelectionActive:!1}),p.selected?(n||p.selected&&c)&&(u({nodes:[p],edges:[]}),requestAnimationFrame(()=>{var m;return(m=i==null?void 0:i.current)==null?void 0:m.blur()})):a([e])}function PC(){const e=mn();return k.useCallback(({sourceEvent:n})=>{const{transform:i,snapGrid:a,snapToGrid:u}=e.getState(),c=n.touches?n.touches[0].clientX:n.clientX,f=n.touches?n.touches[0].clientY:n.clientY,h={x:(c-i[0])/i[2],y:(f-i[1])/i[2]};return{xSnapped:u?a[0]*Math.round(h.x/a[0]):h.x,ySnapped:u?a[1]*Math.round(h.y/a[1]):h.y,...h}},[])}function Wf(e){return(t,n,i)=>e==null?void 0:e(t,i)}function Rv({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:i,nodeId:a,isSelectable:u,selectNodesOnDrag:c}){const f=mn(),[h,p]=k.useState(!1),m=k.useRef([]),y=k.useRef({x:null,y:null}),x=k.useRef(0),b=k.useRef(null),N=k.useRef({x:0,y:0}),S=k.useRef(null),C=k.useRef(!1),L=k.useRef(!1),U=k.useRef(!1),te=PC();return k.useEffect(()=>{if(e!=null&&e.current){const F=vr(e.current),ue=({x:Q,y:se})=>{const{nodeInternals:J,onNodeDrag:V,onSelectionDrag:ne,updateNodePositions:ye,nodeExtent:M,snapGrid:ae,snapToGrid:W,nodeOrigin:pe,onError:oe}=f.getState();y.current={x:Q,y:se};let X=!1,de={x:0,y:0,x2:0,y2:0};if(m.current.length>1&&M){const Ee=nl(m.current,pe);de=eu(Ee)}if(m.current=m.current.map(Ee=>{const ke={x:Q-Ee.distance.x,y:se-Ee.distance.y};W&&(ke.x=ae[0]*Math.round(ke.x/ae[0]),ke.y=ae[1]*Math.round(ke.y/ae[1]));const Me=[[M[0][0],M[0][1]],[M[1][0],M[1][1]]];m.current.length>1&&M&&!Ee.extent&&(Me[0][0]=Ee.positionAbsolute.x-de.x+M[0][0],Me[1][0]=Ee.positionAbsolute.x+(Ee.width??0)-de.x2+M[1][0],Me[0][1]=Ee.positionAbsolute.y-de.y+M[0][1],Me[1][1]=Ee.positionAbsolute.y+(Ee.height??0)-de.y2+M[1][1]);const Re=Pv(Ee,ke,J,Me,pe,oe);return X=X||Ee.position.x!==Re.position.x||Ee.position.y!==Re.position.y,Ee.position=Re.position,Ee.positionAbsolute=Re.positionAbsolute,Ee}),!X)return;ye(m.current,!0,!0),p(!0);const ge=a?V:Wf(ne);if(ge&&S.current){const[Ee,ke]=$f({nodeId:a,dragItems:m.current,nodeInternals:J});ge(S.current,Ee,ke)}},ce=()=>{if(!b.current)return;const[Q,se]=nv(N.current,b.current);if(Q!==0||se!==0){const{transform:J,panBy:V}=f.getState();y.current.x=(y.current.x??0)-Q/J[2],y.current.y=(y.current.y??0)-se/J[2],V({x:Q,y:se})&&ue(y.current)}x.current=requestAnimationFrame(ce)},z=Q=>{var pe;const{nodeInternals:se,multiSelectionActive:J,nodesDraggable:V,unselectNodesAndEdges:ne,onNodeDragStart:ye,onSelectionDragStart:M}=f.getState();L.current=!0;const ae=a?ye:Wf(M);(!c||!u)&&!J&&a&&((pe=se.get(a))!=null&&pe.selected||ne()),a&&u&&c&&wd({id:a,store:f,nodeRef:e});const W=te(Q);if(y.current=W,m.current=AC(se,V,W,a),ae&&m.current){const[oe,X]=$f({nodeId:a,dragItems:m.current,nodeInternals:se});ae(Q.sourceEvent,oe,X)}};if(t)F.on(".drag",null);else{const Q=KN().on("start",se=>{const{domNode:J,nodeDragThreshold:V}=f.getState();V===0&&z(se),U.current=!1;const ne=te(se);y.current=ne,b.current=(J==null?void 0:J.getBoundingClientRect())||null,N.current=Qi(se.sourceEvent,b.current)}).on("drag",se=>{var ye,M;const J=te(se),{autoPanOnNodeDrag:V,nodeDragThreshold:ne}=f.getState();if(se.sourceEvent.type==="touchmove"&&se.sourceEvent.touches.length>1&&(U.current=!0),!U.current){if(!C.current&&L.current&&V&&(C.current=!0,ce()),!L.current){const ae=J.xSnapped-(((ye=y==null?void 0:y.current)==null?void 0:ye.x)??0),W=J.ySnapped-(((M=y==null?void 0:y.current)==null?void 0:M.y)??0);Math.sqrt(ae*ae+W*W)>ne&&z(se)}(y.current.x!==J.xSnapped||y.current.y!==J.ySnapped)&&m.current&&L.current&&(S.current=se.sourceEvent,N.current=Qi(se.sourceEvent,b.current),ue(J))}}).on("end",se=>{if(!(!L.current||U.current)&&(p(!1),C.current=!1,L.current=!1,cancelAnimationFrame(x.current),m.current)){const{updateNodePositions:J,nodeInternals:V,onNodeDragStop:ne,onSelectionDragStop:ye}=f.getState(),M=a?ne:Wf(ye);if(J(m.current,!1,!1),M){const[ae,W]=$f({nodeId:a,dragItems:m.current,nodeInternals:V});M(se.sourceEvent,ae,W)}}}).filter(se=>{const J=se.target;return!se.button&&(!n||!pg(J,`.${n}`,e))&&(!i||pg(J,i,e))});return F.call(Q),()=>{F.on(".drag",null)}}}},[e,t,n,i,u,f,a,c,te]),h}function Mv(){const e=mn();return k.useCallback(n=>{const{nodeInternals:i,nodeExtent:a,updateNodePositions:u,getNodes:c,snapToGrid:f,snapGrid:h,onError:p,nodesDraggable:m}=e.getState(),y=c().filter(U=>U.selected&&(U.draggable||m&&typeof U.draggable>"u")),x=f?h[0]:5,b=f?h[1]:5,N=n.isShiftPressed?4:1,S=n.x*x*N,C=n.y*b*N,L=y.map(U=>{if(U.positionAbsolute){const te={x:U.positionAbsolute.x+S,y:U.positionAbsolute.y+C};f&&(te.x=h[0]*Math.round(te.x/h[0]),te.y=h[1]*Math.round(te.y/h[1]));const{positionAbsolute:F,position:ue}=Pv(U,te,i,a,void 0,p);U.position=ue,U.positionAbsolute=F}return U});u(L,!0,!1)},[])}const ja={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Ps=e=>{const t=({id:n,type:i,data:a,xPos:u,yPos:c,xPosOrigin:f,yPosOrigin:h,selected:p,onClick:m,onMouseEnter:y,onMouseMove:x,onMouseLeave:b,onContextMenu:N,onDoubleClick:S,style:C,className:L,isDraggable:U,isSelectable:te,isConnectable:F,isFocusable:ue,selectNodesOnDrag:ce,sourcePosition:z,targetPosition:Q,hidden:se,resizeObserver:J,dragHandle:V,zIndex:ne,isParent:ye,noDragClassName:M,noPanClassName:ae,initialized:W,disableKeyboardA11y:pe,ariaLabel:oe,rfId:X,hasHandleBounds:de})=>{const ge=mn(),Ee=k.useRef(null),ke=k.useRef(null),Me=k.useRef(z),Re=k.useRef(Q),Be=k.useRef(i),Ye=te||U||m||y||x||b,qe=Mv(),Se=Ds(n,ge.getState,y),rt=Ds(n,ge.getState,x),xt=Ds(n,ge.getState,b),He=Ds(n,ge.getState,N),Tt=Ds(n,ge.getState,S),Xe=et=>{const{nodeDragThreshold:je}=ge.getState();if(te&&(!ce||!U||je>0)&&wd({id:n,store:ge,nodeRef:Ee}),m){const Ft=ge.getState().nodeInternals.get(n);Ft&&m(et,{...Ft})}},it=et=>{if(!pd(et)&&!pe)if(av.includes(et.key)&&te){const je=et.key==="Escape";wd({id:n,store:ge,unselect:je,nodeRef:Ee})}else U&&p&&Object.prototype.hasOwnProperty.call(ja,et.key)&&(ge.setState({ariaLiveMessage:`Moved selected node ${et.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~u}, y: ${~~c}`}),qe({x:ja[et.key].x,y:ja[et.key].y,isShiftPressed:et.shiftKey}))};k.useEffect(()=>()=>{ke.current&&(J==null||J.unobserve(ke.current),ke.current=null)},[]),k.useEffect(()=>{if(Ee.current&&!se){const et=Ee.current;(!W||!de||ke.current!==et)&&(ke.current&&(J==null||J.unobserve(ke.current)),J==null||J.observe(et),ke.current=et)}},[se,W,de]),k.useEffect(()=>{const et=Be.current!==i,je=Me.current!==z,Ft=Re.current!==Q;Ee.current&&(et||je||Ft)&&(et&&(Be.current=i),je&&(Me.current=z),Ft&&(Re.current=Q),ge.getState().updateNodeDimensions([{id:n,nodeElement:Ee.current,forceUpdate:!0}]))},[n,i,z,Q]);const St=Rv({nodeRef:Ee,disabled:se||!U,noDragClassName:M,handleSelector:V,nodeId:n,isSelectable:te,selectNodesOnDrag:ce});return se?null:re.createElement("div",{className:Sn(["react-flow__node",`react-flow__node-${i}`,{[ae]:U},L,{selected:p,selectable:te,parent:ye,dragging:St}]),ref:Ee,style:{zIndex:ne,transform:`translate(${f}px,${h}px)`,pointerEvents:Ye?"all":"none",visibility:W?"visible":"hidden",...C},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:Se,onMouseMove:rt,onMouseLeave:xt,onContextMenu:He,onClick:Xe,onDoubleClick:Tt,onKeyDown:ue?it:void 0,tabIndex:ue?0:void 0,role:ue?"button":void 0,"aria-describedby":pe?void 0:`${Nv}-${X}`,"aria-label":oe},re.createElement(YI,{value:n},re.createElement(e,{id:n,data:a,type:i,xPos:u,yPos:c,selected:p,isConnectable:F,sourcePosition:z,targetPosition:Q,dragging:St,dragHandle:V,zIndex:ne})))};return t.displayName="NodeWrapper",k.memo(t)};const RC=e=>{const t=e.getNodes().filter(n=>n.selected);return{...nl(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function MC({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const i=mn(),{width:a,height:u,x:c,y:f,transformString:h,userSelectionActive:p}=Mt(RC,qn),m=Mv(),y=k.useRef(null);if(k.useEffect(()=>{var N;n||(N=y.current)==null||N.focus({preventScroll:!0})},[n]),Rv({nodeRef:y}),p||!a||!u)return null;const x=e?N=>{const S=i.getState().getNodes().filter(C=>C.selected);e(N,S)}:void 0,b=N=>{Object.prototype.hasOwnProperty.call(ja,N.key)&&m({x:ja[N.key].x,y:ja[N.key].y,isShiftPressed:N.shiftKey})};return re.createElement("div",{className:Sn(["react-flow__nodesselection","react-flow__container",t]),style:{transform:h}},re.createElement("div",{ref:y,className:"react-flow__nodesselection-rect",onContextMenu:x,tabIndex:n?void 0:-1,onKeyDown:n?void 0:b,style:{width:a,height:u,top:f,left:c}}))}var LC=k.memo(MC);const $C=e=>e.nodesSelectionActive,Lv=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:u,onPaneScroll:c,deleteKeyCode:f,onMove:h,onMoveStart:p,onMoveEnd:m,selectionKeyCode:y,selectionOnDrag:x,selectionMode:b,onSelectionStart:N,onSelectionEnd:S,multiSelectionKeyCode:C,panActivationKeyCode:L,zoomActivationKeyCode:U,elementsSelectable:te,zoomOnScroll:F,zoomOnPinch:ue,panOnScroll:ce,panOnScrollSpeed:z,panOnScrollMode:Q,zoomOnDoubleClick:se,panOnDrag:J,defaultViewport:V,translateExtent:ne,minZoom:ye,maxZoom:M,preventScrolling:ae,onSelectionContextMenu:W,noWheelClassName:pe,noPanClassName:oe,disableKeyboardA11y:X})=>{const de=Mt($C),ge=nu(y),Ee=nu(L),ke=Ee||J,Me=Ee||ce,Re=ge||x&&ke!==!0;return bC({deleteKeyCode:f,multiSelectionKeyCode:C}),re.createElement(TC,{onMove:h,onMoveStart:p,onMoveEnd:m,onPaneContextMenu:u,elementsSelectable:te,zoomOnScroll:F,zoomOnPinch:ue,panOnScroll:Me,panOnScrollSpeed:z,panOnScrollMode:Q,zoomOnDoubleClick:se,panOnDrag:!ge&&ke,defaultViewport:V,translateExtent:ne,minZoom:ye,maxZoom:M,zoomActivationKeyCode:U,preventScrolling:ae,noWheelClassName:pe,noPanClassName:oe},re.createElement(Av,{onSelectionStart:N,onSelectionEnd:S,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:u,onPaneScroll:c,panOnDrag:ke,isSelecting:!!Re,selectionMode:b},e,de&&re.createElement(LC,{onSelectionContextMenu:W,noPanClassName:oe,disableKeyboardA11y:X})))};Lv.displayName="FlowRenderer";var WC=k.memo(Lv);function FC(e){return Mt(k.useCallback(n=>e?hv(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function jC(e){const t={input:Ps(e.input||_v),default:Ps(e.default||yd),output:Ps(e.output||Sv),group:Ps(e.group||ph)},n={},i=Object.keys(e).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,u)=>(a[u]=Ps(e[u]||yd),a),n);return{...t,...i}}const BC=({x:e,y:t,width:n,height:i,origin:a})=>!n||!i?{x:e,y:t}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:e,y:t}:{x:e-n*a[0],y:t-i*a[1]},HC=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),$v=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:i,elementsSelectable:a,updateNodeDimensions:u,onError:c}=Mt(HC,qn),f=FC(e.onlyRenderVisibleElements),h=k.useRef(),p=k.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const m=new ResizeObserver(y=>{const x=y.map(b=>({id:b.target.getAttribute("data-id"),nodeElement:b.target,forceUpdate:!0}));u(x)});return h.current=m,m},[]);return k.useEffect(()=>()=>{var m;(m=h==null?void 0:h.current)==null||m.disconnect()},[]),re.createElement("div",{className:"react-flow__nodes",style:gh},f.map(m=>{var ue,ce,z;let y=m.type||"default";e.nodeTypes[y]||(c==null||c("003",Ei.error003(y)),y="default");const x=e.nodeTypes[y]||e.nodeTypes.default,b=!!(m.draggable||t&&typeof m.draggable>"u"),N=!!(m.selectable||a&&typeof m.selectable>"u"),S=!!(m.connectable||n&&typeof m.connectable>"u"),C=!!(m.focusable||i&&typeof m.focusable>"u"),L=e.nodeExtent?uh(m.positionAbsolute,e.nodeExtent):m.positionAbsolute,U=(L==null?void 0:L.x)??0,te=(L==null?void 0:L.y)??0,F=BC({x:U,y:te,width:m.width??0,height:m.height??0,origin:e.nodeOrigin});return re.createElement(x,{key:m.id,id:m.id,className:m.className,style:m.style,type:y,data:m.data,sourcePosition:m.sourcePosition||ze.Bottom,targetPosition:m.targetPosition||ze.Top,hidden:m.hidden,xPos:U,yPos:te,xPosOrigin:F.x,yPosOrigin:F.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!m.selected,isDraggable:b,isSelectable:N,isConnectable:S,isFocusable:C,resizeObserver:p,dragHandle:m.dragHandle,zIndex:((ue=m[en])==null?void 0:ue.z)??0,isParent:!!((ce=m[en])!=null&&ce.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!m.width&&!!m.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:m.ariaLabel,hasHandleBounds:!!((z=m[en])!=null&&z.handleBounds)})}))};$v.displayName="NodeRenderer";var KC=k.memo($v);const UC=(e,t,n)=>n===ze.Left?e-t:n===ze.Right?e+t:e,zC=(e,t,n)=>n===ze.Top?e-t:n===ze.Bottom?e+t:e,gg="react-flow__edgeupdater",vg=({position:e,centerX:t,centerY:n,radius:i=10,onMouseDown:a,onMouseEnter:u,onMouseOut:c,type:f})=>re.createElement("circle",{onMouseDown:a,onMouseEnter:u,onMouseOut:c,className:Sn([gg,`${gg}-${f}`]),cx:UC(t,i,e),cy:zC(n,i,e),r:i,stroke:"transparent",fill:"transparent"}),YC=()=>!0;var Aa=e=>{const t=({id:n,className:i,type:a,data:u,onClick:c,onEdgeDoubleClick:f,selected:h,animated:p,label:m,labelStyle:y,labelShowBg:x,labelBgStyle:b,labelBgPadding:N,labelBgBorderRadius:S,style:C,source:L,target:U,sourceX:te,sourceY:F,targetX:ue,targetY:ce,sourcePosition:z,targetPosition:Q,elementsSelectable:se,hidden:J,sourceHandleId:V,targetHandleId:ne,onContextMenu:ye,onMouseEnter:M,onMouseMove:ae,onMouseLeave:W,reconnectRadius:pe,onReconnect:oe,onReconnectStart:X,onReconnectEnd:de,markerEnd:ge,markerStart:Ee,rfId:ke,ariaLabel:Me,isFocusable:Re,isReconnectable:Be,pathOptions:Ye,interactionWidth:qe,disableKeyboardA11y:Se})=>{const rt=k.useRef(null),[xt,He]=k.useState(!1),[Tt,Xe]=k.useState(!1),it=mn(),St=k.useMemo(()=>`url('#${gd(Ee,ke)}')`,[Ee,ke]),et=k.useMemo(()=>`url('#${gd(ge,ke)}')`,[ge,ke]);if(J)return null;const je=_t=>{var le;const{edges:Bt,addSelectedEdges:Vt,unselectNodesAndEdges:Lt,multiSelectionActive:$e}=it.getState(),Ht=Bt.find(xe=>xe.id===n);Ht&&(se&&(it.setState({nodesSelectionActive:!1}),Ht.selected&&$e?(Lt({nodes:[],edges:[Ht]}),(le=rt.current)==null||le.blur()):Vt([n])),c&&c(_t,Ht))},Ft=As(n,it.getState,f),jt=As(n,it.getState,ye),bt=As(n,it.getState,M),sn=As(n,it.getState,ae),Ut=As(n,it.getState,W),un=(_t,Bt)=>{if(_t.button!==0)return;const{edges:Vt,isValidConnection:Lt}=it.getState(),$e=Bt?U:L,Ht=(Bt?ne:V)||null,le=Bt?"target":"source",xe=Lt||YC,fe=Bt,Ce=Vt.find(Ve=>Ve.id===n);Xe(!0),X==null||X(_t,Ce,le);const We=Ve=>{Xe(!1),de==null||de(Ve,Ce,le)};yv({event:_t,handleId:Ht,nodeId:$e,onConnect:Ve=>oe==null?void 0:oe(Ce,Ve),isTarget:fe,getState:it.getState,setState:it.setState,isValidConnection:xe,edgeUpdaterType:le,onReconnectEnd:We})},Qt=_t=>un(_t,!0),zt=_t=>un(_t,!1),tn=()=>He(!0),Yt=()=>He(!1),cn=!se&&!c,dn=_t=>{var Bt;if(!Se&&av.includes(_t.key)&&se){const{unselectNodesAndEdges:Vt,addSelectedEdges:Lt,edges:$e}=it.getState();_t.key==="Escape"?((Bt=rt.current)==null||Bt.blur(),Vt({edges:[$e.find(le=>le.id===n)]})):Lt([n])}};return re.createElement("g",{className:Sn(["react-flow__edge",`react-flow__edge-${a}`,i,{selected:h,animated:p,inactive:cn,updating:xt}]),onClick:je,onDoubleClick:Ft,onContextMenu:jt,onMouseEnter:bt,onMouseMove:sn,onMouseLeave:Ut,onKeyDown:Re?dn:void 0,tabIndex:Re?0:void 0,role:Re?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":Me===null?void 0:Me||`Edge from ${L} to ${U}`,"aria-describedby":Re?`${kv}-${ke}`:void 0,ref:rt},!Tt&&re.createElement(e,{id:n,source:L,target:U,selected:h,animated:p,label:m,labelStyle:y,labelShowBg:x,labelBgStyle:b,labelBgPadding:N,labelBgBorderRadius:S,data:u,style:C,sourceX:te,sourceY:F,targetX:ue,targetY:ce,sourcePosition:z,targetPosition:Q,sourceHandleId:V,targetHandleId:ne,markerStart:St,markerEnd:et,pathOptions:Ye,interactionWidth:qe}),Be&&re.createElement(re.Fragment,null,(Be==="source"||Be===!0)&&re.createElement(vg,{position:z,centerX:te,centerY:F,radius:pe,onMouseDown:Qt,onMouseEnter:tn,onMouseOut:Yt,type:"source"}),(Be==="target"||Be===!0)&&re.createElement(vg,{position:Q,centerX:ue,centerY:ce,radius:pe,onMouseDown:zt,onMouseEnter:tn,onMouseOut:Yt,type:"target"})))};return t.displayName="EdgeWrapper",k.memo(t)};function VC(e){const t={default:Aa(e.default||Lc),straight:Aa(e.bezier||fh),step:Aa(e.step||lh),smoothstep:Aa(e.step||tl),simplebezier:Aa(e.simplebezier||ch)},n={},i=Object.keys(e).filter(a=>!["default","bezier"].includes(a)).reduce((a,u)=>(a[u]=Aa(e[u]||Lc),a),n);return{...t,...i}}function yg(e,t,n=null){const i=((n==null?void 0:n.x)||0)+t.x,a=((n==null?void 0:n.y)||0)+t.y,u=(n==null?void 0:n.width)||t.width,c=(n==null?void 0:n.height)||t.height;switch(e){case ze.Top:return{x:i+u/2,y:a};case ze.Right:return{x:i+u,y:a+c/2};case ze.Bottom:return{x:i+u/2,y:a+c};case ze.Left:return{x:i,y:a+c/2}}}function wg(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const qC=(e,t,n,i,a,u)=>{const c=yg(n,e,t),f=yg(u,i,a);return{sourceX:c.x,sourceY:c.y,targetX:f.x,targetY:f.y}};function XC({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:i,targetWidth:a,targetHeight:u,width:c,height:f,transform:h}){const p={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+a),y2:Math.max(e.y+i,t.y+u)};p.x===p.x2&&(p.x2+=1),p.y===p.y2&&(p.y2+=1);const m=eu({x:(0-h[0])/h[2],y:(0-h[1])/h[2],width:c/h[2],height:f/h[2]}),y=Math.max(0,Math.min(m.x2,p.x2)-Math.max(m.x,p.x)),x=Math.max(0,Math.min(m.y2,p.y2)-Math.max(m.y,p.y));return Math.ceil(y*x)>0}function xg(e){var i,a,u,c,f;const t=((i=e==null?void 0:e[en])==null?void 0:i.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.x)<"u"&&typeof((u=e==null?void 0:e.positionAbsolute)==null?void 0:u.y)<"u";return[{x:((c=e==null?void 0:e.positionAbsolute)==null?void 0:c.x)||0,y:((f=e==null?void 0:e.positionAbsolute)==null?void 0:f.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const GC=[{level:0,isMaxLevel:!0,edges:[]}];function ZC(e,t,n=!1){let i=-1;const a=e.reduce((c,f)=>{var m,y;const h=wr(f.zIndex);let p=h?f.zIndex:0;if(n){const x=t.get(f.target),b=t.get(f.source),N=f.selected||(x==null?void 0:x.selected)||(b==null?void 0:b.selected),S=Math.max(((m=b==null?void 0:b[en])==null?void 0:m.z)||0,((y=x==null?void 0:x[en])==null?void 0:y.z)||0,1e3);p=(h?f.zIndex:0)+(N?S:0)}return c[p]?c[p].push(f):c[p]=[f],i=p>i?p:i,c},{}),u=Object.entries(a).map(([c,f])=>{const h=+c;return{edges:f,level:h,isMaxLevel:h===i}});return u.length===0?GC:u}function QC(e,t,n){const i=Mt(k.useCallback(a=>e?a.edges.filter(u=>{const c=t.get(u.source),f=t.get(u.target);return(c==null?void 0:c.width)&&(c==null?void 0:c.height)&&(f==null?void 0:f.width)&&(f==null?void 0:f.height)&&XC({sourcePos:c.positionAbsolute||{x:0,y:0},targetPos:f.positionAbsolute||{x:0,y:0},sourceWidth:c.width,sourceHeight:c.height,targetWidth:f.width,targetHeight:f.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[e,t]));return ZC(i,t,n)}const JC=({color:e="none",strokeWidth:t=1})=>re.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),eO=({color:e="none",strokeWidth:t=1})=>re.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),bg={[Mc.Arrow]:JC,[Mc.ArrowClosed]:eO};function tO(e){const t=mn();return k.useMemo(()=>{var a,u;return Object.prototype.hasOwnProperty.call(bg,e)?bg[e]:((u=(a=t.getState()).onError)==null||u.call(a,"009",Ei.error009(e)),null)},[e])}const nO=({id:e,type:t,color:n,width:i=12.5,height:a=12.5,markerUnits:u="strokeWidth",strokeWidth:c,orient:f="auto-start-reverse"})=>{const h=tO(t);return h?re.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${i}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:u,orient:f,refX:"0",refY:"0"},re.createElement(h,{color:n,strokeWidth:c})):null},rO=({defaultColor:e,rfId:t})=>n=>{const i=[];return n.edges.reduce((a,u)=>([u.markerStart,u.markerEnd].forEach(c=>{if(c&&typeof c=="object"){const f=gd(c,t);i.includes(f)||(a.push({id:f,color:c.color||e,...c}),i.push(f))}}),a),[]).sort((a,u)=>a.id.localeCompare(u.id))},Wv=({defaultColor:e,rfId:t})=>{const n=Mt(k.useCallback(rO({defaultColor:e,rfId:t}),[e,t]),(i,a)=>!(i.length!==a.length||i.some((u,c)=>u.id!==a[c].id)));return re.createElement("defs",null,n.map(i=>re.createElement(nO,{id:i.id,key:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient})))};Wv.displayName="MarkerDefinitions";var iO=k.memo(Wv);const oO=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),Fv=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:i,edgeTypes:a,noPanClassName:u,onEdgeContextMenu:c,onEdgeMouseEnter:f,onEdgeMouseMove:h,onEdgeMouseLeave:p,onEdgeClick:m,onEdgeDoubleClick:y,onReconnect:x,onReconnectStart:b,onReconnectEnd:N,reconnectRadius:S,children:C,disableKeyboardA11y:L})=>{const{edgesFocusable:U,edgesUpdatable:te,elementsSelectable:F,width:ue,height:ce,connectionMode:z,nodeInternals:Q,onError:se}=Mt(oO,qn),J=QC(t,Q,n);return ue?re.createElement(re.Fragment,null,J.map(({level:V,edges:ne,isMaxLevel:ye})=>re.createElement("svg",{key:V,style:{zIndex:V},width:ue,height:ce,className:"react-flow__edges react-flow__container"},ye&&re.createElement(iO,{defaultColor:e,rfId:i}),re.createElement("g",null,ne.map(M=>{const[ae,W,pe]=xg(Q.get(M.source)),[oe,X,de]=xg(Q.get(M.target));if(!pe||!de)return null;let ge=M.type||"default";a[ge]||(se==null||se("011",Ei.error011(ge)),ge="default");const Ee=a[ge]||a.default,ke=z===Go.Strict?X.target:(X.target??[]).concat(X.source??[]),Me=wg(W.source,M.sourceHandle),Re=wg(ke,M.targetHandle),Be=(Me==null?void 0:Me.position)||ze.Bottom,Ye=(Re==null?void 0:Re.position)||ze.Top,qe=!!(M.focusable||U&&typeof M.focusable>"u"),Se=M.reconnectable||M.updatable,rt=typeof x<"u"&&(Se||te&&typeof Se>"u");if(!Me||!Re)return se==null||se("008",Ei.error008(Me,M)),null;const{sourceX:xt,sourceY:He,targetX:Tt,targetY:Xe}=qC(ae,Me,Be,oe,Re,Ye);return re.createElement(Ee,{key:M.id,id:M.id,className:Sn([M.className,u]),type:ge,data:M.data,selected:!!M.selected,animated:!!M.animated,hidden:!!M.hidden,label:M.label,labelStyle:M.labelStyle,labelShowBg:M.labelShowBg,labelBgStyle:M.labelBgStyle,labelBgPadding:M.labelBgPadding,labelBgBorderRadius:M.labelBgBorderRadius,style:M.style,source:M.source,target:M.target,sourceHandleId:M.sourceHandle,targetHandleId:M.targetHandle,markerEnd:M.markerEnd,markerStart:M.markerStart,sourceX:xt,sourceY:He,targetX:Tt,targetY:Xe,sourcePosition:Be,targetPosition:Ye,elementsSelectable:F,onContextMenu:c,onMouseEnter:f,onMouseMove:h,onMouseLeave:p,onClick:m,onEdgeDoubleClick:y,onReconnect:x,onReconnectStart:b,onReconnectEnd:N,reconnectRadius:S,rfId:i,ariaLabel:M.ariaLabel,isFocusable:qe,isReconnectable:rt,pathOptions:"pathOptions"in M?M.pathOptions:void 0,interactionWidth:M.interactionWidth,disableKeyboardA11y:L})})))),C):null};Fv.displayName="EdgeRenderer";var aO=k.memo(Fv);const sO=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function uO({children:e}){const t=Mt(sO);return re.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function cO(e){const t=mh(),n=k.useRef(!1);k.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const lO={[ze.Left]:ze.Right,[ze.Right]:ze.Left,[ze.Top]:ze.Bottom,[ze.Bottom]:ze.Top},jv=({nodeId:e,handleType:t,style:n,type:i=qi.Bezier,CustomComponent:a,connectionStatus:u})=>{var ce,z,Q;const{fromNode:c,handleId:f,toX:h,toY:p,connectionMode:m}=Mt(k.useCallback(se=>({fromNode:se.nodeInternals.get(e),handleId:se.connectionHandleId,toX:(se.connectionPosition.x-se.transform[0])/se.transform[2],toY:(se.connectionPosition.y-se.transform[1])/se.transform[2],connectionMode:se.connectionMode}),[e]),qn),y=(ce=c==null?void 0:c[en])==null?void 0:ce.handleBounds;let x=y==null?void 0:y[t];if(m===Go.Loose&&(x=x||(y==null?void 0:y[t==="source"?"target":"source"])),!c||!x)return null;const b=f?x.find(se=>se.id===f):x[0],N=b?b.x+b.width/2:(c.width??0)/2,S=b?b.y+b.height/2:c.height??0,C=(((z=c.positionAbsolute)==null?void 0:z.x)??0)+N,L=(((Q=c.positionAbsolute)==null?void 0:Q.y)??0)+S,U=b==null?void 0:b.position,te=U?lO[U]:null;if(!U||!te)return null;if(a)return re.createElement(a,{connectionLineType:i,connectionLineStyle:n,fromNode:c,fromHandle:b,fromX:C,fromY:L,toX:h,toY:p,fromPosition:U,toPosition:te,connectionStatus:u});let F="";const ue={sourceX:C,sourceY:L,sourcePosition:U,targetX:h,targetY:p,targetPosition:te};return i===qi.Bezier?[F]=fv(ue):i===qi.Step?[F]=md({...ue,borderRadius:0}):i===qi.SmoothStep?[F]=md(ue):i===qi.SimpleBezier?[F]=lv(ue):F=`M${C},${L} ${h},${p}`,re.createElement("path",{d:F,fill:"none",className:"react-flow__connection-path",style:n})};jv.displayName="ConnectionLine";const fO=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function dO({containerStyle:e,style:t,type:n,component:i}){const{nodeId:a,handleType:u,nodesConnectable:c,width:f,height:h,connectionStatus:p}=Mt(fO,qn);return!(a&&u&&f&&c)?null:re.createElement("svg",{style:e,width:f,height:h,className:"react-flow__edges react-flow__connectionline react-flow__container"},re.createElement("g",{className:Sn(["react-flow__connection",p])},re.createElement(jv,{nodeId:a,handleType:u,style:t,type:n,CustomComponent:i,connectionStatus:p})))}function _g(e,t){return k.useRef(null),mn(),k.useMemo(()=>t(e),[e])}const Bv=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:i,onMoveEnd:a,onInit:u,onNodeClick:c,onEdgeClick:f,onNodeDoubleClick:h,onEdgeDoubleClick:p,onNodeMouseEnter:m,onNodeMouseMove:y,onNodeMouseLeave:x,onNodeContextMenu:b,onSelectionContextMenu:N,onSelectionStart:S,onSelectionEnd:C,connectionLineType:L,connectionLineStyle:U,connectionLineComponent:te,connectionLineContainerStyle:F,selectionKeyCode:ue,selectionOnDrag:ce,selectionMode:z,multiSelectionKeyCode:Q,panActivationKeyCode:se,zoomActivationKeyCode:J,deleteKeyCode:V,onlyRenderVisibleElements:ne,elementsSelectable:ye,selectNodesOnDrag:M,defaultViewport:ae,translateExtent:W,minZoom:pe,maxZoom:oe,preventScrolling:X,defaultMarkerColor:de,zoomOnScroll:ge,zoomOnPinch:Ee,panOnScroll:ke,panOnScrollSpeed:Me,panOnScrollMode:Re,zoomOnDoubleClick:Be,panOnDrag:Ye,onPaneClick:qe,onPaneMouseEnter:Se,onPaneMouseMove:rt,onPaneMouseLeave:xt,onPaneScroll:He,onPaneContextMenu:Tt,onEdgeContextMenu:Xe,onEdgeMouseEnter:it,onEdgeMouseMove:St,onEdgeMouseLeave:et,onReconnect:je,onReconnectStart:Ft,onReconnectEnd:jt,reconnectRadius:bt,noDragClassName:sn,noWheelClassName:Ut,noPanClassName:un,elevateEdgesOnSelect:Qt,disableKeyboardA11y:zt,nodeOrigin:tn,nodeExtent:Yt,rfId:cn})=>{const dn=_g(e,jC),_t=_g(t,VC);return cO(u),re.createElement(WC,{onPaneClick:qe,onPaneMouseEnter:Se,onPaneMouseMove:rt,onPaneMouseLeave:xt,onPaneContextMenu:Tt,onPaneScroll:He,deleteKeyCode:V,selectionKeyCode:ue,selectionOnDrag:ce,selectionMode:z,onSelectionStart:S,onSelectionEnd:C,multiSelectionKeyCode:Q,panActivationKeyCode:se,zoomActivationKeyCode:J,elementsSelectable:ye,onMove:n,onMoveStart:i,onMoveEnd:a,zoomOnScroll:ge,zoomOnPinch:Ee,zoomOnDoubleClick:Be,panOnScroll:ke,panOnScrollSpeed:Me,panOnScrollMode:Re,panOnDrag:Ye,defaultViewport:ae,translateExtent:W,minZoom:pe,maxZoom:oe,onSelectionContextMenu:N,preventScrolling:X,noDragClassName:sn,noWheelClassName:Ut,noPanClassName:un,disableKeyboardA11y:zt},re.createElement(uO,null,re.createElement(aO,{edgeTypes:_t,onEdgeClick:f,onEdgeDoubleClick:p,onlyRenderVisibleElements:ne,onEdgeContextMenu:Xe,onEdgeMouseEnter:it,onEdgeMouseMove:St,onEdgeMouseLeave:et,onReconnect:je,onReconnectStart:Ft,onReconnectEnd:jt,reconnectRadius:bt,defaultMarkerColor:de,noPanClassName:un,elevateEdgesOnSelect:!!Qt,disableKeyboardA11y:zt,rfId:cn},re.createElement(dO,{style:U,type:L,component:te,containerStyle:F})),re.createElement("div",{className:"react-flow__edgelabel-renderer"}),re.createElement(KC,{nodeTypes:dn,onNodeClick:c,onNodeDoubleClick:h,onNodeMouseEnter:m,onNodeMouseMove:y,onNodeMouseLeave:x,onNodeContextMenu:b,selectNodesOnDrag:M,onlyRenderVisibleElements:ne,noPanClassName:un,noDragClassName:sn,disableKeyboardA11y:zt,nodeOrigin:tn,nodeExtent:Yt,rfId:cn})))};Bv.displayName="GraphView";var hO=k.memo(Bv);const xd=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Ui={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:xd,nodeExtent:xd,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Go.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:jI,isValidConnection:void 0},pO=()=>tT((e,t)=>({...Ui,setNodes:n=>{const{nodeInternals:i,nodeOrigin:a,elevateNodesOnSelect:u}=t();e({nodeInternals:Mf(n,i,a,u)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:i={}}=t();e({edges:n.map(a=>({...i,...a}))})},setDefaultNodesAndEdges:(n,i)=>{const a=typeof n<"u",u=typeof i<"u",c=a?Mf(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:c,edges:u?i:[],hasDefaultNodes:a,hasDefaultEdges:u})},updateNodeDimensions:n=>{const{onNodesChange:i,nodeInternals:a,fitViewOnInit:u,fitViewOnInitDone:c,fitViewOnInitOptions:f,domNode:h,nodeOrigin:p}=t(),m=h==null?void 0:h.querySelector(".react-flow__viewport");if(!m)return;const y=window.getComputedStyle(m),{m22:x}=new window.DOMMatrixReadOnly(y.transform),b=n.reduce((S,C)=>{const L=a.get(C.id);if(L!=null&&L.hidden)a.set(L.id,{...L,[en]:{...L[en],handleBounds:void 0}});else if(L){const U=sh(C.nodeElement);!!(U.width&&U.height&&(L.width!==U.width||L.height!==U.height||C.forceUpdate))&&(a.set(L.id,{...L,[en]:{...L[en],handleBounds:{source:mg(".source",C.nodeElement,x,p),target:mg(".target",C.nodeElement,x,p)}},...U}),S.push({id:L.id,type:"dimensions",dimensions:U}))}return S},[]);Cv(a,p);const N=c||u&&!c&&Ov(t,{initial:!0,...f});e({nodeInternals:new Map(a),fitViewOnInitDone:N}),(b==null?void 0:b.length)>0&&(i==null||i(b))},updateNodePositions:(n,i=!0,a=!1)=>{const{triggerNodeChanges:u}=t(),c=n.map(f=>{const h={id:f.id,type:"position",dragging:a};return i&&(h.positionAbsolute=f.positionAbsolute,h.position=f.position),h});u(c)},triggerNodeChanges:n=>{const{onNodesChange:i,nodeInternals:a,hasDefaultNodes:u,nodeOrigin:c,getNodes:f,elevateNodesOnSelect:h}=t();if(n!=null&&n.length){if(u){const p=CC(n,f()),m=Mf(p,a,c,h);e({nodeInternals:m})}i==null||i(n)}},addSelectedNodes:n=>{const{multiSelectionActive:i,edges:a,getNodes:u}=t();let c,f=null;i?c=n.map(h=>Vi(h,!0)):(c=Pa(u(),n),f=Pa(a,[])),pc({changedNodes:c,changedEdges:f,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:i,edges:a,getNodes:u}=t();let c,f=null;i?c=n.map(h=>Vi(h,!0)):(c=Pa(a,n),f=Pa(u(),[])),pc({changedNodes:f,changedEdges:c,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:i}={})=>{const{edges:a,getNodes:u}=t(),c=n||u(),f=i||a,h=c.map(m=>(m.selected=!1,Vi(m.id,!1))),p=f.map(m=>Vi(m.id,!1));pc({changedNodes:h,changedEdges:p,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:i,maxZoom:a}=t();i==null||i.scaleExtent([n,a]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:i,minZoom:a}=t();i==null||i.scaleExtent([a,n]),e({maxZoom:n})},setTranslateExtent:n=>{var i;(i=t().d3Zoom)==null||i.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:i}=t(),u=i().filter(f=>f.selected).map(f=>Vi(f.id,!1)),c=n.filter(f=>f.selected).map(f=>Vi(f.id,!1));pc({changedNodes:u,changedEdges:c,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:i}=t();i.forEach(a=>{a.positionAbsolute=uh(a.position,n)}),e({nodeExtent:n,nodeInternals:new Map(i)})},panBy:n=>{const{transform:i,width:a,height:u,d3Zoom:c,d3Selection:f,translateExtent:h}=t();if(!c||!f||!n.x&&!n.y)return!1;const p=xi.translate(i[0]+n.x,i[1]+n.y).scale(i[2]),m=[[0,0],[a,u]],y=c==null?void 0:c.constrain()(p,m,h);return c.transform(f,y),i[0]!==y.x||i[1]!==y.y||i[2]!==y.k},cancelConnection:()=>e({connectionNodeId:Ui.connectionNodeId,connectionHandleId:Ui.connectionHandleId,connectionHandleType:Ui.connectionHandleType,connectionStatus:Ui.connectionStatus,connectionStartHandle:Ui.connectionStartHandle,connectionEndHandle:Ui.connectionEndHandle}),reset:()=>e({...Ui})}),Object.is),Hv=({children:e})=>{const t=k.useRef(null);return t.current||(t.current=pO()),re.createElement(PI,{value:t.current},e)};Hv.displayName="ReactFlowProvider";const Kv=({children:e})=>k.useContext(el)?re.createElement(re.Fragment,null,e):re.createElement(Hv,null,e);Kv.displayName="ReactFlowWrapper";const mO={input:_v,default:yd,output:Sv,group:ph},gO={default:Lc,straight:fh,step:lh,smoothstep:tl,simplebezier:ch},vO=[0,0],yO=[15,15],wO={x:0,y:0,zoom:1},xO={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Uv=k.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,className:a,nodeTypes:u=mO,edgeTypes:c=gO,onNodeClick:f,onEdgeClick:h,onInit:p,onMove:m,onMoveStart:y,onMoveEnd:x,onConnect:b,onConnectStart:N,onConnectEnd:S,onClickConnectStart:C,onClickConnectEnd:L,onNodeMouseEnter:U,onNodeMouseMove:te,onNodeMouseLeave:F,onNodeContextMenu:ue,onNodeDoubleClick:ce,onNodeDragStart:z,onNodeDrag:Q,onNodeDragStop:se,onNodesDelete:J,onEdgesDelete:V,onSelectionChange:ne,onSelectionDragStart:ye,onSelectionDrag:M,onSelectionDragStop:ae,onSelectionContextMenu:W,onSelectionStart:pe,onSelectionEnd:oe,connectionMode:X=Go.Strict,connectionLineType:de=qi.Bezier,connectionLineStyle:ge,connectionLineComponent:Ee,connectionLineContainerStyle:ke,deleteKeyCode:Me="Backspace",selectionKeyCode:Re="Shift",selectionOnDrag:Be=!1,selectionMode:Ye=tu.Full,panActivationKeyCode:qe="Space",multiSelectionKeyCode:Se=Rc()?"Meta":"Control",zoomActivationKeyCode:rt=Rc()?"Meta":"Control",snapToGrid:xt=!1,snapGrid:He=yO,onlyRenderVisibleElements:Tt=!1,selectNodesOnDrag:Xe=!0,nodesDraggable:it,nodesConnectable:St,nodesFocusable:et,nodeOrigin:je=vO,edgesFocusable:Ft,edgesUpdatable:jt,elementsSelectable:bt,defaultViewport:sn=wO,minZoom:Ut=.5,maxZoom:un=2,translateExtent:Qt=xd,preventScrolling:zt=!0,nodeExtent:tn,defaultMarkerColor:Yt="#b1b1b7",zoomOnScroll:cn=!0,zoomOnPinch:dn=!0,panOnScroll:_t=!1,panOnScrollSpeed:Bt=.5,panOnScrollMode:Vt=jo.Free,zoomOnDoubleClick:Lt=!0,panOnDrag:$e=!0,onPaneClick:Ht,onPaneMouseEnter:le,onPaneMouseMove:xe,onPaneMouseLeave:fe,onPaneScroll:Ce,onPaneContextMenu:We,children:Ue,onEdgeContextMenu:Ve,onEdgeDoubleClick:Ze,onEdgeMouseEnter:Tn,onEdgeMouseMove:ct,onEdgeMouseLeave:$t,onEdgeUpdate:jn,onEdgeUpdateStart:br,onEdgeUpdateEnd:_r,onReconnect:Et,onReconnectStart:Rt,onReconnectEnd:sr,reconnectRadius:ur=10,edgeUpdaterRadius:cr=10,onNodesChange:lr,onEdgesChange:io,noDragClassName:Nn="nodrag",noWheelClassName:Gn="nowheel",noPanClassName:Pn="nopan",fitView:Ur=!1,fitViewOptions:ot,connectOnClick:yt=!0,attributionPosition:At,proOptions:qt,defaultEdgeOptions:gn,elevateNodesOnSelect:Er=!0,elevateEdgesOnSelect:Dt=!1,disableKeyboardA11y:wn=!1,autoPanOnConnect:Zn=!0,autoPanOnNodeDrag:ri=!0,connectionRadius:zr=20,isValidConnection:ki,onError:oo,style:Ii,id:Qn,nodeDragThreshold:ao,...Ci},ra)=>{const st=Qn||"1";return re.createElement("div",{...Ci,style:{...Ii,...xO},ref:ra,className:Sn(["react-flow",a]),"data-testid":"rf__wrapper",id:Qn},re.createElement(Kv,null,re.createElement(hO,{onInit:p,onMove:m,onMoveStart:y,onMoveEnd:x,onNodeClick:f,onEdgeClick:h,onNodeMouseEnter:U,onNodeMouseMove:te,onNodeMouseLeave:F,onNodeContextMenu:ue,onNodeDoubleClick:ce,nodeTypes:u,edgeTypes:c,connectionLineType:de,connectionLineStyle:ge,connectionLineComponent:Ee,connectionLineContainerStyle:ke,selectionKeyCode:Re,selectionOnDrag:Be,selectionMode:Ye,deleteKeyCode:Me,multiSelectionKeyCode:Se,panActivationKeyCode:qe,zoomActivationKeyCode:rt,onlyRenderVisibleElements:Tt,selectNodesOnDrag:Xe,defaultViewport:sn,translateExtent:Qt,minZoom:Ut,maxZoom:un,preventScrolling:zt,zoomOnScroll:cn,zoomOnPinch:dn,zoomOnDoubleClick:Lt,panOnScroll:_t,panOnScrollSpeed:Bt,panOnScrollMode:Vt,panOnDrag:$e,onPaneClick:Ht,onPaneMouseEnter:le,onPaneMouseMove:xe,onPaneMouseLeave:fe,onPaneScroll:Ce,onPaneContextMenu:We,onSelectionContextMenu:W,onSelectionStart:pe,onSelectionEnd:oe,onEdgeContextMenu:Ve,onEdgeDoubleClick:Ze,onEdgeMouseEnter:Tn,onEdgeMouseMove:ct,onEdgeMouseLeave:$t,onReconnect:Et??jn,onReconnectStart:Rt??br,onReconnectEnd:sr??_r,reconnectRadius:ur??cr,defaultMarkerColor:Yt,noDragClassName:Nn,noWheelClassName:Gn,noPanClassName:Pn,elevateEdgesOnSelect:Dt,rfId:st,disableKeyboardA11y:wn,nodeOrigin:je,nodeExtent:tn}),re.createElement(cC,{nodes:e,edges:t,defaultNodes:n,defaultEdges:i,onConnect:b,onConnectStart:N,onConnectEnd:S,onClickConnectStart:C,onClickConnectEnd:L,nodesDraggable:it,nodesConnectable:St,nodesFocusable:et,edgesFocusable:Ft,edgesUpdatable:jt,elementsSelectable:bt,elevateNodesOnSelect:Er,minZoom:Ut,maxZoom:un,nodeExtent:tn,onNodesChange:lr,onEdgesChange:io,snapToGrid:xt,snapGrid:He,connectionMode:X,translateExtent:Qt,connectOnClick:yt,defaultEdgeOptions:gn,fitView:Ur,fitViewOptions:ot,onNodesDelete:J,onEdgesDelete:V,onNodeDragStart:z,onNodeDrag:Q,onNodeDragStop:se,onSelectionDrag:M,onSelectionDragStart:ye,onSelectionDragStop:ae,noPanClassName:Pn,nodeOrigin:je,rfId:st,autoPanOnConnect:Zn,autoPanOnNodeDrag:ri,onError:oo,connectionRadius:zr,isValidConnection:ki,nodeDragThreshold:ao}),re.createElement(sC,{onSelectionChange:ne}),Ue,re.createElement(MI,{proOptions:qt,position:At}),re.createElement(pC,{rfId:st,disableKeyboardA11y:wn})))});Uv.displayName="ReactFlow";function zv(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[i,a]of e)if(!Object.is(a,t.get(i)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(e[i],t[i]))return!1;return!0}const Yv=({id:e,x:t,y:n,width:i,height:a,style:u,color:c,strokeColor:f,strokeWidth:h,className:p,borderRadius:m,shapeRendering:y,onClick:x,selected:b})=>{const{background:N,backgroundColor:S}=u||{},C=c||N||S;return re.createElement("rect",{className:Sn(["react-flow__minimap-node",{selected:b},p]),x:t,y:n,rx:m,ry:m,width:i,height:a,fill:C,stroke:f,strokeWidth:h,shapeRendering:y,onClick:x?L=>x(L,e):void 0})};Yv.displayName="MiniMapNode";var bO=k.memo(Yv);const _O=e=>e.nodeOrigin,EO=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),Ff=e=>e instanceof Function?e:()=>e;function SO({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:i=5,nodeStrokeWidth:a=2,nodeComponent:u=bO,onClick:c}){const f=Mt(EO,zv),h=Mt(_O),p=Ff(t),m=Ff(e),y=Ff(n),x=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return re.createElement(re.Fragment,null,f.map(b=>{const{x:N,y:S}=zo(b,h).positionAbsolute;return re.createElement(u,{key:b.id,x:N,y:S,width:b.width,height:b.height,style:b.style,selected:b.selected,className:y(b),color:p(b),borderRadius:i,strokeColor:m(b),strokeWidth:a,shapeRendering:x,onClick:c,id:b.id})}))}var TO=k.memo(SO);const NO=200,kO=150,IO=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?WI(nl(t,e.nodeOrigin),n):n,rfId:e.rfId}},CO="react-flow__minimap-desc";function Vv({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:i="#e2e2e2",nodeClassName:a="",nodeBorderRadius:u=5,nodeStrokeWidth:c=2,nodeComponent:f,maskColor:h="rgb(240, 240, 240, 0.6)",maskStrokeColor:p="none",maskStrokeWidth:m=1,position:y="bottom-right",onClick:x,onNodeClick:b,pannable:N=!1,zoomable:S=!1,ariaLabel:C="React Flow mini map",inversePan:L=!1,zoomStep:U=10,offsetScale:te=5}){const F=mn(),ue=k.useRef(null),{boundingRect:ce,viewBB:z,rfId:Q}=Mt(IO,zv),se=(e==null?void 0:e.width)??NO,J=(e==null?void 0:e.height)??kO,V=ce.width/se,ne=ce.height/J,ye=Math.max(V,ne),M=ye*se,ae=ye*J,W=te*ye,pe=ce.x-(M-ce.width)/2-W,oe=ce.y-(ae-ce.height)/2-W,X=M+W*2,de=ae+W*2,ge=`${CO}-${Q}`,Ee=k.useRef(0);Ee.current=ye,k.useEffect(()=>{if(ue.current){const Re=vr(ue.current),Be=Se=>{const{transform:rt,d3Selection:xt,d3Zoom:He}=F.getState();if(Se.sourceEvent.type!=="wheel"||!xt||!He)return;const Tt=-Se.sourceEvent.deltaY*(Se.sourceEvent.deltaMode===1?.05:Se.sourceEvent.deltaMode?1:.002)*U,Xe=rt[2]*Math.pow(2,Tt);He.scaleTo(xt,Xe)},Ye=Se=>{const{transform:rt,d3Selection:xt,d3Zoom:He,translateExtent:Tt,width:Xe,height:it}=F.getState();if(Se.sourceEvent.type!=="mousemove"||!xt||!He)return;const St=Ee.current*Math.max(1,rt[2])*(L?-1:1),et={x:rt[0]-Se.sourceEvent.movementX*St,y:rt[1]-Se.sourceEvent.movementY*St},je=[[0,0],[Xe,it]],Ft=xi.translate(et.x,et.y).scale(rt[2]),jt=He.constrain()(Ft,je,Tt);He.transform(xt,jt)},qe=ev().on("zoom",N?Ye:null).on("zoom.wheel",S?Be:null);return Re.call(qe),()=>{Re.on("zoom",null)}}},[N,S,L,U]);const ke=x?Re=>{const Be=Rr(Re);x(Re,{x:Be[0],y:Be[1]})}:void 0,Me=b?(Re,Be)=>{const Ye=F.getState().nodeInternals.get(Be);b(Re,Ye)}:void 0;return re.createElement(Js,{position:y,style:e,className:Sn(["react-flow__minimap",t]),"data-testid":"rf__minimap"},re.createElement("svg",{width:se,height:J,viewBox:`${pe} ${oe} ${X} ${de}`,role:"img","aria-labelledby":ge,ref:ue,onClick:ke},C&&re.createElement("title",{id:ge},C),re.createElement(TO,{onClick:Me,nodeColor:i,nodeStrokeColor:n,nodeBorderRadius:u,nodeClassName:a,nodeStrokeWidth:c,nodeComponent:f}),re.createElement("path",{className:"react-flow__minimap-mask",d:`M${pe-W},${oe-W}h${X+W*2}v${de+W*2}h${-X-W*2}z
        M${z.x},${z.y}h${z.width}v${z.height}h${-z.width}z`,fill:h,fillRule:"evenodd",stroke:p,strokeWidth:m,pointerEvents:"none"})))}Vv.displayName="MiniMap";var OO=k.memo(Vv);function AO(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[i,a]of e)if(!Object.is(a,t.get(i)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(e[i],t[i]))return!1;return!0}function DO(){return re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},re.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function PO(){return re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},re.createElement("path",{d:"M0 0h32v4.2H0z"}))}function RO(){return re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},re.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function MO(){return re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},re.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function LO(){return re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},re.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const js=({children:e,className:t,...n})=>re.createElement("button",{type:"button",className:Sn(["react-flow__controls-button",t]),...n},e);js.displayName="ControlButton";const $O=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),qv=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:i=!0,fitViewOptions:a,onZoomIn:u,onZoomOut:c,onFitView:f,onInteractiveChange:h,className:p,children:m,position:y="bottom-left"})=>{const x=mn(),[b,N]=k.useState(!1),{isInteractive:S,minZoomReached:C,maxZoomReached:L}=Mt($O,AO),{zoomIn:U,zoomOut:te,fitView:F}=mh();if(k.useEffect(()=>{N(!0)},[]),!b)return null;const ue=()=>{U(),u==null||u()},ce=()=>{te(),c==null||c()},z=()=>{F(a),f==null||f()},Q=()=>{x.setState({nodesDraggable:!S,nodesConnectable:!S,elementsSelectable:!S}),h==null||h(!S)};return re.createElement(Js,{className:Sn(["react-flow__controls",p]),position:y,style:e,"data-testid":"rf__controls"},t&&re.createElement(re.Fragment,null,re.createElement(js,{onClick:ue,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:L},re.createElement(DO,null)),re.createElement(js,{onClick:ce,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:C},re.createElement(PO,null))),n&&re.createElement(js,{className:"react-flow__controls-fitview",onClick:z,title:"fit view","aria-label":"fit view"},re.createElement(RO,null)),i&&re.createElement(js,{className:"react-flow__controls-interactive",onClick:Q,title:"toggle interactivity","aria-label":"toggle interactivity"},S?re.createElement(LO,null):re.createElement(MO,null)),m)};qv.displayName="Controls";var WO=k.memo(qv);function FO(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[i,a]of e)if(!Object.is(a,t.get(i)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(e[i],t[i]))return!1;return!0}var Fr;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Fr||(Fr={}));function jO({color:e,dimensions:t,lineWidth:n}){return re.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function BO({color:e,radius:t}){return re.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const HO={[Fr.Dots]:"#91919a",[Fr.Lines]:"#eee",[Fr.Cross]:"#e2e2e2"},KO={[Fr.Dots]:1,[Fr.Lines]:1,[Fr.Cross]:6},UO=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Xv({id:e,variant:t=Fr.Dots,gap:n=20,size:i,lineWidth:a=1,offset:u=2,color:c,style:f,className:h}){const p=k.useRef(null),{transform:m,patternId:y}=Mt(UO,FO),x=c||HO[t],b=i||KO[t],N=t===Fr.Dots,S=t===Fr.Cross,C=Array.isArray(n)?n:[n,n],L=[C[0]*m[2]||1,C[1]*m[2]||1],U=b*m[2],te=S?[U,U]:L,F=N?[U/u,U/u]:[te[0]/u,te[1]/u];return re.createElement("svg",{className:Sn(["react-flow__background",h]),style:{...f,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:p,"data-testid":"rf__background"},re.createElement("pattern",{id:y+e,x:m[0]%L[0],y:m[1]%L[1],width:L[0],height:L[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${F[0]},-${F[1]})`},N?re.createElement(BO,{color:x,radius:U/u}):re.createElement(jO,{dimensions:te,color:x,lineWidth:a})),re.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${y+e})`}))}Xv.displayName="Background";var zO=k.memo(Xv);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var YO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ti=(e,t)=>{const n=k.forwardRef(({color:i="currentColor",size:a=24,strokeWidth:u=2,absoluteStrokeWidth:c,className:f="",children:h,...p},m)=>k.createElement("svg",{ref:m,...YO,width:a,height:a,stroke:i,strokeWidth:c?Number(u)*24/Number(a):u,className:["lucide",`lucide-${VO(e)}`,f].join(" "),...p},[...t.map(([y,x])=>k.createElement(y,x)),...Array.isArray(h)?h:[h]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=Ti("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XO=Ti("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GO=Ti("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZO=Ti("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QO=Ti("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eg=Ti("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=Ti("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JO=Ti("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=Ti("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var Zv={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(Mr,function(){var n=function(s,d){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,w){g.__proto__=w}||function(g,w){for(var E in w)Object.prototype.hasOwnProperty.call(w,E)&&(g[E]=w[E])})(s,d)},i=function(){return(i=Object.assign||function(s){for(var d,g=1,w=arguments.length;g<w;g++)for(var E in d=arguments[g])Object.prototype.hasOwnProperty.call(d,E)&&(s[E]=d[E]);return s}).apply(this,arguments)};function a(s,d,g){for(var w,E=0,A=d.length;E<A;E++)!w&&E in d||((w=w||Array.prototype.slice.call(d,0,E))[E]=d[E]);return s.concat(w||Array.prototype.slice.call(d))}var u=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Mr,c=Object.keys,f=Array.isArray;function h(s,d){return typeof d!="object"||c(d).forEach(function(g){s[g]=d[g]}),s}typeof Promise>"u"||u.Promise||(u.Promise=Promise);var p=Object.getPrototypeOf,m={}.hasOwnProperty;function y(s,d){return m.call(s,d)}function x(s,d){typeof d=="function"&&(d=d(p(s))),(typeof Reflect>"u"?c:Reflect.ownKeys)(d).forEach(function(g){N(s,g,d[g])})}var b=Object.defineProperty;function N(s,d,g,w){b(s,d,h(g&&y(g,"get")&&typeof g.get=="function"?{get:g.get,set:g.set,configurable:!0}:{value:g,configurable:!0,writable:!0},w))}function S(s){return{from:function(d){return s.prototype=Object.create(d.prototype),N(s.prototype,"constructor",s),{extend:x.bind(null,s.prototype)}}}}var C=Object.getOwnPropertyDescriptor,L=[].slice;function U(s,d,g){return L.call(s,d,g)}function te(s,d){return d(s)}function F(s){if(!s)throw new Error("Assertion Failed")}function ue(s){u.setImmediate?setImmediate(s):setTimeout(s,0)}function ce(s,d){if(typeof d=="string"&&y(s,d))return s[d];if(!d)return s;if(typeof d!="string"){for(var g=[],w=0,E=d.length;w<E;++w){var A=ce(s,d[w]);g.push(A)}return g}var $=d.indexOf(".");if($!==-1){var H=s[d.substr(0,$)];return H==null?void 0:ce(H,d.substr($+1))}}function z(s,d,g){if(s&&d!==void 0&&!("isFrozen"in Object&&Object.isFrozen(s)))if(typeof d!="string"&&"length"in d){F(typeof g!="string"&&"length"in g);for(var w=0,E=d.length;w<E;++w)z(s,d[w],g[w])}else{var A,$,H=d.indexOf(".");H!==-1?(A=d.substr(0,H),($=d.substr(H+1))===""?g===void 0?f(s)&&!isNaN(parseInt(A))?s.splice(A,1):delete s[A]:s[A]=g:z(H=!(H=s[A])||!y(s,A)?s[A]={}:H,$,g)):g===void 0?f(s)&&!isNaN(parseInt(d))?s.splice(d,1):delete s[d]:s[d]=g}}function Q(s){var d,g={};for(d in s)y(s,d)&&(g[d]=s[d]);return g}var se=[].concat;function J(s){return se.apply([],s)}var Sr="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(J([8,16,32,64].map(function(s){return["Int","Uint","Float"].map(function(d){return d+s+"Array"})}))).filter(function(s){return u[s]}),V=new Set(Sr.map(function(s){return u[s]})),ne=null;function ye(s){return ne=new WeakMap,s=function d(g){if(!g||typeof g!="object")return g;var w=ne.get(g);if(w)return w;if(f(g)){w=[],ne.set(g,w);for(var E=0,A=g.length;E<A;++E)w.push(d(g[E]))}else if(V.has(g.constructor))w=g;else{var $,H=p(g);for($ in w=H===Object.prototype?{}:Object.create(H),ne.set(g,w),g)y(g,$)&&(w[$]=d(g[$]))}return w}(s),ne=null,s}var M={}.toString;function ae(s){return M.call(s).slice(8,-1)}var W=typeof Symbol<"u"?Symbol.iterator:"@@iterator",pe=typeof W=="symbol"?function(s){var d;return s!=null&&(d=s[W])&&d.apply(s)}:function(){return null};function oe(s,d){return d=s.indexOf(d),0<=d&&s.splice(d,1),0<=d}var X={};function de(s){var d,g,w,E;if(arguments.length===1){if(f(s))return s.slice();if(this===X&&typeof s=="string")return[s];if(E=pe(s)){for(g=[];!(w=E.next()).done;)g.push(w.value);return g}if(s==null)return[s];if(typeof(d=s.length)!="number")return[s];for(g=new Array(d);d--;)g[d]=s[d];return g}for(d=arguments.length,g=new Array(d);d--;)g[d]=arguments[d];return g}var ge=typeof Symbol<"u"?function(s){return s[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Qt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Hn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Qt),Ee={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ke(s,d){this.name=s,this.message=d}function Me(s,d){return s+". Errors: "+Object.keys(d).map(function(g){return d[g].toString()}).filter(function(g,w,E){return E.indexOf(g)===w}).join(`
`)}function Re(s,d,g,w){this.failures=d,this.failedKeys=w,this.successCount=g,this.message=Me(s,d)}function Be(s,d){this.name="BulkError",this.failures=Object.keys(d).map(function(g){return d[g]}),this.failuresByPos=d,this.message=Me(s,this.failures)}S(ke).from(Error).extend({toString:function(){return this.name+": "+this.message}}),S(Re).from(ke),S(Be).from(ke);var Ye=Hn.reduce(function(s,d){return s[d]=d+"Error",s},{}),qe=ke,Se=Hn.reduce(function(s,d){var g=d+"Error";function w(E,A){this.name=g,E?typeof E=="string"?(this.message="".concat(E).concat(A?`
 `+A:""),this.inner=A||null):typeof E=="object"&&(this.message="".concat(E.name," ").concat(E.message),this.inner=E):(this.message=Ee[d]||g,this.inner=null)}return S(w).from(qe),s[d]=w,s},{});Se.Syntax=SyntaxError,Se.Type=TypeError,Se.Range=RangeError;var rt=Qt.reduce(function(s,d){return s[d+"Error"]=Se[d],s},{}),xt=Hn.reduce(function(s,d){return["Syntax","Type","Range"].indexOf(d)===-1&&(s[d+"Error"]=Se[d]),s},{});function He(){}function Tt(s){return s}function Xe(s,d){return s==null||s===Tt?d:function(g){return d(s(g))}}function it(s,d){return function(){s.apply(this,arguments),d.apply(this,arguments)}}function St(s,d){return s===He?d:function(){var g=s.apply(this,arguments);g!==void 0&&(arguments[0]=g);var w=this.onsuccess,E=this.onerror;this.onsuccess=null,this.onerror=null;var A=d.apply(this,arguments);return w&&(this.onsuccess=this.onsuccess?it(w,this.onsuccess):w),E&&(this.onerror=this.onerror?it(E,this.onerror):E),A!==void 0?A:g}}function et(s,d){return s===He?d:function(){s.apply(this,arguments);var g=this.onsuccess,w=this.onerror;this.onsuccess=this.onerror=null,d.apply(this,arguments),g&&(this.onsuccess=this.onsuccess?it(g,this.onsuccess):g),w&&(this.onerror=this.onerror?it(w,this.onerror):w)}}function je(s,d){return s===He?d:function(g){var w=s.apply(this,arguments);h(g,w);var E=this.onsuccess,A=this.onerror;return this.onsuccess=null,this.onerror=null,g=d.apply(this,arguments),E&&(this.onsuccess=this.onsuccess?it(E,this.onsuccess):E),A&&(this.onerror=this.onerror?it(A,this.onerror):A),w===void 0?g===void 0?void 0:g:h(w,g)}}function Ft(s,d){return s===He?d:function(){return d.apply(this,arguments)!==!1&&s.apply(this,arguments)}}function jt(s,d){return s===He?d:function(){var g=s.apply(this,arguments);if(g&&typeof g.then=="function"){for(var w=this,E=arguments.length,A=new Array(E);E--;)A[E]=arguments[E];return g.then(function(){return d.apply(w,A)})}return d.apply(this,arguments)}}xt.ModifyError=Re,xt.DexieError=ke,xt.BulkError=Be;var bt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function sn(s){bt=s}var Ut={},un=100,Sr=typeof Promise>"u"?[]:function(){var s=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[s,p(s),s];var d=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[d,p(d),s]}(),Qt=Sr[0],Hn=Sr[1],Sr=Sr[2],Hn=Hn&&Hn.then,zt=Qt&&Qt.constructor,tn=!!Sr,Yt=function(s,d){Ht.push([s,d]),dn&&(queueMicrotask(ct),dn=!1)},cn=!0,dn=!0,_t=[],Bt=[],Vt=Tt,Lt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:He,pgp:!1,env:{},finalize:He},$e=Lt,Ht=[],le=0,xe=[];function fe(s){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var d=this._PSD=$e;if(typeof s!="function"){if(s!==Ut)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Ue(this,this._value))}this._state=null,this._value=null,++d.ref,function g(w,E){try{E(function(A){if(w._state===null){if(A===w)throw new TypeError("A promise cannot be resolved with itself.");var $=w._lib&&$t();A&&typeof A.then=="function"?g(w,function(H,Z){A instanceof fe?A._then(H,Z):A.then(H,Z)}):(w._state=!0,w._value=A,Ve(w)),$&&jn()}},Ue.bind(null,w))}catch(A){Ue(w,A)}}(this,s)}var Ce={get:function(){var s=$e,d=lr;function g(w,E){var A=this,$=!s.global&&(s!==$e||d!==lr),H=$&&!Pn(),Z=new fe(function(I,R){Ze(A,new We(gn(w,s,$,H),gn(E,s,$,H),I,R,s))});return this._consoleTask&&(Z._consoleTask=this._consoleTask),Z}return g.prototype=Ut,g},set:function(s){N(this,"then",s&&s.prototype===Ut?Ce:{get:function(){return s},set:Ce.set})}};function We(s,d,g,w,E){this.onFulfilled=typeof s=="function"?s:null,this.onRejected=typeof d=="function"?d:null,this.resolve=g,this.reject=w,this.psd=E}function Ue(s,d){var g,w;Bt.push(d),s._state===null&&(g=s._lib&&$t(),d=Vt(d),s._state=!1,s._value=d,w=s,_t.some(function(E){return E._value===w._value})||_t.push(w),Ve(s),g&&jn())}function Ve(s){var d=s._listeners;s._listeners=[];for(var g=0,w=d.length;g<w;++g)Ze(s,d[g]);var E=s._PSD;--E.ref||E.finalize(),le===0&&(++le,Yt(function(){--le==0&&br()},[]))}function Ze(s,d){if(s._state!==null){var g=s._state?d.onFulfilled:d.onRejected;if(g===null)return(s._state?d.resolve:d.reject)(s._value);++d.psd.ref,++le,Yt(Tn,[g,s,d])}else s._listeners.push(d)}function Tn(s,d,g){try{var w,E=d._value;!d._state&&Bt.length&&(Bt=[]),w=bt&&d._consoleTask?d._consoleTask.run(function(){return s(E)}):s(E),d._state||Bt.indexOf(E)!==-1||function(A){for(var $=_t.length;$;)if(_t[--$]._value===A._value)return _t.splice($,1)}(d),g.resolve(w)}catch(A){g.reject(A)}finally{--le==0&&br(),--g.psd.ref||g.psd.finalize()}}function ct(){qt(Lt,function(){$t()&&jn()})}function $t(){var s=cn;return dn=cn=!1,s}function jn(){var s,d,g;do for(;0<Ht.length;)for(s=Ht,Ht=[],g=s.length,d=0;d<g;++d){var w=s[d];w[0].apply(null,w[1])}while(0<Ht.length);dn=cn=!0}function br(){var s=_t;_t=[],s.forEach(function(w){w._PSD.onunhandled.call(null,w._value,w)});for(var d=xe.slice(0),g=d.length;g;)d[--g]()}function _r(s){return new fe(Ut,!1,s)}function Et(s,d){var g=$e;return function(){var w=$t(),E=$e;try{return yt(g,!0),s.apply(this,arguments)}catch(A){d&&d(A)}finally{yt(E,!1),w&&jn()}}}x(fe.prototype,{then:Ce,_then:function(s,d){Ze(this,new We(null,null,s,d,$e))},catch:function(s){if(arguments.length===1)return this.then(null,s);var d=s,g=arguments[1];return typeof d=="function"?this.then(null,function(w){return(w instanceof d?g:_r)(w)}):this.then(null,function(w){return(w&&w.name===d?g:_r)(w)})},finally:function(s){return this.then(function(d){return fe.resolve(s()).then(function(){return d})},function(d){return fe.resolve(s()).then(function(){return _r(d)})})},timeout:function(s,d){var g=this;return s<1/0?new fe(function(w,E){var A=setTimeout(function(){return E(new Se.Timeout(d))},s);g.then(w,E).finally(clearTimeout.bind(null,A))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&N(fe.prototype,Symbol.toStringTag,"Dexie.Promise"),Lt.env=At(),x(fe,{all:function(){var s=de.apply(null,arguments).map(Ur);return new fe(function(d,g){s.length===0&&d([]);var w=s.length;s.forEach(function(E,A){return fe.resolve(E).then(function($){s[A]=$,--w||d(s)},g)})})},resolve:function(s){return s instanceof fe?s:s&&typeof s.then=="function"?new fe(function(d,g){s.then(d,g)}):new fe(Ut,!0,s)},reject:_r,race:function(){var s=de.apply(null,arguments).map(Ur);return new fe(function(d,g){s.map(function(w){return fe.resolve(w).then(d,g)})})},PSD:{get:function(){return $e},set:function(s){return $e=s}},totalEchoes:{get:function(){return lr}},newPSD:Nn,usePSD:qt,scheduler:{get:function(){return Yt},set:function(s){Yt=s}},rejectionMapper:{get:function(){return Vt},set:function(s){Vt=s}},follow:function(s,d){return new fe(function(g,w){return Nn(function(E,A){var $=$e;$.unhandleds=[],$.onunhandled=A,$.finalize=it(function(){var H,Z=this;H=function(){Z.unhandleds.length===0?E():A(Z.unhandleds[0])},xe.push(function I(){H(),xe.splice(xe.indexOf(I),1)}),++le,Yt(function(){--le==0&&br()},[])},$.finalize),s()},d,g,w)})}}),zt&&(zt.allSettled&&N(fe,"allSettled",function(){var s=de.apply(null,arguments).map(Ur);return new fe(function(d){s.length===0&&d([]);var g=s.length,w=new Array(g);s.forEach(function(E,A){return fe.resolve(E).then(function($){return w[A]={status:"fulfilled",value:$}},function($){return w[A]={status:"rejected",reason:$}}).then(function(){return--g||d(w)})})})}),zt.any&&typeof AggregateError<"u"&&N(fe,"any",function(){var s=de.apply(null,arguments).map(Ur);return new fe(function(d,g){s.length===0&&g(new AggregateError([]));var w=s.length,E=new Array(w);s.forEach(function(A,$){return fe.resolve(A).then(function(H){return d(H)},function(H){E[$]=H,--w||g(new AggregateError(E))})})})}),zt.withResolvers&&(fe.withResolvers=zt.withResolvers));var Rt={awaits:0,echoes:0,id:0},sr=0,ur=[],cr=0,lr=0,io=0;function Nn(s,d,g,w){var E=$e,A=Object.create(E);return A.parent=E,A.ref=0,A.global=!1,A.id=++io,Lt.env,A.env=tn?{Promise:fe,PromiseProp:{value:fe,configurable:!0,writable:!0},all:fe.all,race:fe.race,allSettled:fe.allSettled,any:fe.any,resolve:fe.resolve,reject:fe.reject}:{},d&&h(A,d),++E.ref,A.finalize=function(){--this.parent.ref||this.parent.finalize()},w=qt(A,s,g,w),A.ref===0&&A.finalize(),w}function Gn(){return Rt.id||(Rt.id=++sr),++Rt.awaits,Rt.echoes+=un,Rt.id}function Pn(){return!!Rt.awaits&&(--Rt.awaits==0&&(Rt.id=0),Rt.echoes=Rt.awaits*un,!0)}function Ur(s){return Rt.echoes&&s&&s.constructor===zt?(Gn(),s.then(function(d){return Pn(),d},function(d){return Pn(),Dt(d)})):s}function ot(){var s=ur[ur.length-1];ur.pop(),yt(s,!1)}function yt(s,d){var g,w=$e;(d?!Rt.echoes||cr++&&s===$e:!cr||--cr&&s===$e)||queueMicrotask(d?(function(E){++lr,Rt.echoes&&--Rt.echoes!=0||(Rt.echoes=Rt.awaits=Rt.id=0),ur.push($e),yt(E,!0)}).bind(null,s):ot),s!==$e&&($e=s,w===Lt&&(Lt.env=At()),tn&&(g=Lt.env.Promise,d=s.env,(w.global||s.global)&&(Object.defineProperty(u,"Promise",d.PromiseProp),g.all=d.all,g.race=d.race,g.resolve=d.resolve,g.reject=d.reject,d.allSettled&&(g.allSettled=d.allSettled),d.any&&(g.any=d.any))))}function At(){var s=u.Promise;return tn?{Promise:s,PromiseProp:Object.getOwnPropertyDescriptor(u,"Promise"),all:s.all,race:s.race,allSettled:s.allSettled,any:s.any,resolve:s.resolve,reject:s.reject}:{}}function qt(s,d,g,w,E){var A=$e;try{return yt(s,!0),d(g,w,E)}finally{yt(A,!1)}}function gn(s,d,g,w){return typeof s!="function"?s:function(){var E=$e;g&&Gn(),yt(d,!0);try{return s.apply(this,arguments)}finally{yt(E,!1),w&&queueMicrotask(Pn)}}}function Er(s){Promise===zt&&Rt.echoes===0?cr===0?s():enqueueNativeMicroTask(s):setTimeout(s,0)}(""+Hn).indexOf("[native code]")===-1&&(Gn=Pn=He);var Dt=fe.reject,wn="",Zn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ri="String expected.",zr=[],ki="__dbnames",oo="readonly",Ii="readwrite";function Qn(s,d){return s?d?function(){return s.apply(this,arguments)&&d.apply(this,arguments)}:s:d}var ao={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ci(s){return typeof s!="string"||/\./.test(s)?function(d){return d}:function(d){return d[s]===void 0&&s in d&&delete(d=ye(d))[s],d}}function ra(){throw Se.Type()}function st(s,d){try{var g=wu(s),w=wu(d);if(g!==w)return g==="Array"?1:w==="Array"?-1:g==="binary"?1:w==="binary"?-1:g==="string"?1:w==="string"?-1:g==="Date"?1:w!=="Date"?NaN:-1;switch(g){case"number":case"Date":case"string":return d<s?1:s<d?-1:0;case"binary":return function(E,A){for(var $=E.length,H=A.length,Z=$<H?$:H,I=0;I<Z;++I)if(E[I]!==A[I])return E[I]<A[I]?-1:1;return $===H?0:$<H?-1:1}(Za(s),Za(d));case"Array":return function(E,A){for(var $=E.length,H=A.length,Z=$<H?$:H,I=0;I<Z;++I){var R=st(E[I],A[I]);if(R!==0)return R}return $===H?0:$<H?-1:1}(s,d)}}catch{}return NaN}function wu(s){var d=typeof s;return d!="object"?d:ArrayBuffer.isView(s)?"binary":(s=ae(s),s==="ArrayBuffer"?"binary":s)}function Za(s){return s instanceof Uint8Array?s:ArrayBuffer.isView(s)?new Uint8Array(s.buffer,s.byteOffset,s.byteLength):new Uint8Array(s)}var Qa=(Ot.prototype._trans=function(s,d,g){var w=this._tx||$e.trans,E=this.name,A=bt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(s==="readonly"?"read":"write"," ").concat(this.name));function $(I,R,O){if(!O.schema[E])throw new Se.NotFound("Table "+E+" not part of transaction");return d(O.idbtrans,O)}var H=$t();try{var Z=w&&w.db._novip===this.db._novip?w===$e.trans?w._promise(s,$,g):Nn(function(){return w._promise(s,$,g)},{trans:w,transless:$e.transless||$e}):function I(R,O,K,j){if(R.idbdb&&(R._state.openComplete||$e.letThrough||R._vip)){var q=R._createTransaction(O,K,R._dbSchema);try{q.create(),R._state.PR1398_maxLoop=3}catch(ee){return ee.name===Ye.InvalidState&&R.isOpen()&&0<--R._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),R.close({disableAutoOpen:!1}),R.open().then(function(){return I(R,O,K,j)})):Dt(ee)}return q._promise(O,function(ee,Y){return Nn(function(){return $e.trans=q,j(ee,Y,q)})}).then(function(ee){if(O==="readwrite")try{q.idbtrans.commit()}catch{}return O==="readonly"?ee:q._completion.then(function(){return ee})})}if(R._state.openComplete)return Dt(new Se.DatabaseClosed(R._state.dbOpenError));if(!R._state.isBeingOpened){if(!R._state.autoOpen)return Dt(new Se.DatabaseClosed);R.open().catch(He)}return R._state.dbReadyPromise.then(function(){return I(R,O,K,j)})}(this.db,s,[this.name],$);return A&&(Z._consoleTask=A,Z=Z.catch(function(I){return console.trace(I),Dt(I)})),Z}finally{H&&jn()}},Ot.prototype.get=function(s,d){var g=this;return s&&s.constructor===Object?this.where(s).first(d):s==null?Dt(new Se.Type("Invalid argument to Table.get()")):this._trans("readonly",function(w){return g.core.get({trans:w,key:s}).then(function(E){return g.hook.reading.fire(E)})}).then(d)},Ot.prototype.where=function(s){if(typeof s=="string")return new this.db.WhereClause(this,s);if(f(s))return new this.db.WhereClause(this,"[".concat(s.join("+"),"]"));var d=c(s);if(d.length===1)return this.where(d[0]).equals(s[d[0]]);var g=this.schema.indexes.concat(this.schema.primKey).filter(function(H){if(H.compound&&d.every(function(I){return 0<=H.keyPath.indexOf(I)})){for(var Z=0;Z<d.length;++Z)if(d.indexOf(H.keyPath[Z])===-1)return!1;return!0}return!1}).sort(function(H,Z){return H.keyPath.length-Z.keyPath.length})[0];if(g&&this.db._maxKey!==wn){var A=g.keyPath.slice(0,d.length);return this.where(A).equals(A.map(function(Z){return s[Z]}))}!g&&bt&&console.warn("The query ".concat(JSON.stringify(s)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(d.join("+"),"]"));var w=this.schema.idxByName;function E(H,Z){return st(H,Z)===0}var $=d.reduce(function(O,Z){var I=O[0],R=O[1],O=w[Z],K=s[Z];return[I||O,I||!O?Qn(R,O&&O.multi?function(j){return j=ce(j,Z),f(j)&&j.some(function(q){return E(K,q)})}:function(j){return E(K,ce(j,Z))}):R]},[null,null]),A=$[0],$=$[1];return A?this.where(A.name).equals(s[A.keyPath]).filter($):g?this.filter($):this.where(d).equals("")},Ot.prototype.filter=function(s){return this.toCollection().and(s)},Ot.prototype.count=function(s){return this.toCollection().count(s)},Ot.prototype.offset=function(s){return this.toCollection().offset(s)},Ot.prototype.limit=function(s){return this.toCollection().limit(s)},Ot.prototype.each=function(s){return this.toCollection().each(s)},Ot.prototype.toArray=function(s){return this.toCollection().toArray(s)},Ot.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Ot.prototype.orderBy=function(s){return new this.db.Collection(new this.db.WhereClause(this,f(s)?"[".concat(s.join("+"),"]"):s))},Ot.prototype.reverse=function(){return this.toCollection().reverse()},Ot.prototype.mapToClass=function(s){var d,g=this.db,w=this.name;function E(){return d!==null&&d.apply(this,arguments)||this}(this.schema.mappedClass=s).prototype instanceof ra&&(function(Z,I){if(typeof I!="function"&&I!==null)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");function R(){this.constructor=Z}n(Z,I),Z.prototype=I===null?Object.create(I):(R.prototype=I.prototype,new R)}(E,d=s),Object.defineProperty(E.prototype,"db",{get:function(){return g},enumerable:!1,configurable:!0}),E.prototype.table=function(){return w},s=E);for(var A=new Set,$=s.prototype;$;$=p($))Object.getOwnPropertyNames($).forEach(function(Z){return A.add(Z)});function H(Z){if(!Z)return Z;var I,R=Object.create(s.prototype);for(I in Z)if(!A.has(I))try{R[I]=Z[I]}catch{}return R}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=H,this.hook("reading",H),s},Ot.prototype.defineClass=function(){return this.mapToClass(function(s){h(this,s)})},Ot.prototype.add=function(s,d){var g=this,w=this.schema.primKey,E=w.auto,A=w.keyPath,$=s;return A&&E&&($=Ci(A)(s)),this._trans("readwrite",function(H){return g.core.mutate({trans:H,type:"add",keys:d!=null?[d]:null,values:[$]})}).then(function(H){return H.numFailures?fe.reject(H.failures[0]):H.lastResult}).then(function(H){if(A)try{z(s,A,H)}catch{}return H})},Ot.prototype.update=function(s,d){return typeof s!="object"||f(s)?this.where(":id").equals(s).modify(d):(s=ce(s,this.schema.primKey.keyPath),s===void 0?Dt(new Se.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(s).modify(d))},Ot.prototype.put=function(s,d){var g=this,w=this.schema.primKey,E=w.auto,A=w.keyPath,$=s;return A&&E&&($=Ci(A)(s)),this._trans("readwrite",function(H){return g.core.mutate({trans:H,type:"put",values:[$],keys:d!=null?[d]:null})}).then(function(H){return H.numFailures?fe.reject(H.failures[0]):H.lastResult}).then(function(H){if(A)try{z(s,A,H)}catch{}return H})},Ot.prototype.delete=function(s){var d=this;return this._trans("readwrite",function(g){return d.core.mutate({trans:g,type:"delete",keys:[s]})}).then(function(g){return g.numFailures?fe.reject(g.failures[0]):void 0})},Ot.prototype.clear=function(){var s=this;return this._trans("readwrite",function(d){return s.core.mutate({trans:d,type:"deleteRange",range:ao})}).then(function(d){return d.numFailures?fe.reject(d.failures[0]):void 0})},Ot.prototype.bulkGet=function(s){var d=this;return this._trans("readonly",function(g){return d.core.getMany({keys:s,trans:g}).then(function(w){return w.map(function(E){return d.hook.reading.fire(E)})})})},Ot.prototype.bulkAdd=function(s,d,g){var w=this,E=Array.isArray(d)?d:void 0,A=(g=g||(E?void 0:d))?g.allKeys:void 0;return this._trans("readwrite",function($){var I=w.schema.primKey,H=I.auto,I=I.keyPath;if(I&&E)throw new Se.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(E&&E.length!==s.length)throw new Se.InvalidArgument("Arguments objects and keys must have the same length");var Z=s.length,I=I&&H?s.map(Ci(I)):s;return w.core.mutate({trans:$,type:"add",keys:E,values:I,wantResults:A}).then(function(q){var O=q.numFailures,K=q.results,j=q.lastResult,q=q.failures;if(O===0)return A?K:j;throw new Be("".concat(w.name,".bulkAdd(): ").concat(O," of ").concat(Z," operations failed"),q)})})},Ot.prototype.bulkPut=function(s,d,g){var w=this,E=Array.isArray(d)?d:void 0,A=(g=g||(E?void 0:d))?g.allKeys:void 0;return this._trans("readwrite",function($){var I=w.schema.primKey,H=I.auto,I=I.keyPath;if(I&&E)throw new Se.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(E&&E.length!==s.length)throw new Se.InvalidArgument("Arguments objects and keys must have the same length");var Z=s.length,I=I&&H?s.map(Ci(I)):s;return w.core.mutate({trans:$,type:"put",keys:E,values:I,wantResults:A}).then(function(q){var O=q.numFailures,K=q.results,j=q.lastResult,q=q.failures;if(O===0)return A?K:j;throw new Be("".concat(w.name,".bulkPut(): ").concat(O," of ").concat(Z," operations failed"),q)})})},Ot.prototype.bulkUpdate=function(s){var d=this,g=this.core,w=s.map(function($){return $.key}),E=s.map(function($){return $.changes}),A=[];return this._trans("readwrite",function($){return g.getMany({trans:$,keys:w,cache:"clone"}).then(function(H){var Z=[],I=[];s.forEach(function(O,K){var j=O.key,q=O.changes,ee=H[K];if(ee){for(var Y=0,he=Object.keys(q);Y<he.length;Y++){var ve=he[Y],me=q[ve];if(ve===d.schema.primKey.keyPath){if(st(me,j)!==0)throw new Se.Constraint("Cannot update primary key in bulkUpdate()")}else z(ee,ve,me)}A.push(K),Z.push(j),I.push(ee)}});var R=Z.length;return g.mutate({trans:$,type:"put",keys:Z,values:I,updates:{keys:w,changeSpecs:E}}).then(function(O){var K=O.numFailures,j=O.failures;if(K===0)return R;for(var q=0,ee=Object.keys(j);q<ee.length;q++){var Y,he=ee[q],ve=A[Number(he)];ve!=null&&(Y=j[he],delete j[he],j[ve]=Y)}throw new Be("".concat(d.name,".bulkUpdate(): ").concat(K," of ").concat(R," operations failed"),j)})})})},Ot.prototype.bulkDelete=function(s){var d=this,g=s.length;return this._trans("readwrite",function(w){return d.core.mutate({trans:w,type:"delete",keys:s})}).then(function($){var E=$.numFailures,A=$.lastResult,$=$.failures;if(E===0)return A;throw new Be("".concat(d.name,".bulkDelete(): ").concat(E," of ").concat(g," operations failed"),$)})},Ot);function Ot(){}function ii(s){function d($,H){if(H){for(var Z=arguments.length,I=new Array(Z-1);--Z;)I[Z-1]=arguments[Z];return g[$].subscribe.apply(null,I),s}if(typeof $=="string")return g[$]}var g={};d.addEventType=A;for(var w=1,E=arguments.length;w<E;++w)A(arguments[w]);return d;function A($,H,Z){if(typeof $!="object"){var I;H=H||Ft;var R={subscribers:[],fire:Z=Z||He,subscribe:function(O){R.subscribers.indexOf(O)===-1&&(R.subscribers.push(O),R.fire=H(R.fire,O))},unsubscribe:function(O){R.subscribers=R.subscribers.filter(function(K){return K!==O}),R.fire=R.subscribers.reduce(H,Z)}};return g[$]=d[$]=R}c(I=$).forEach(function(O){var K=I[O];if(f(K))A(O,I[O][0],I[O][1]);else{if(K!=="asap")throw new Se.InvalidArgument("Invalid event config");var j=A(O,Tt,function(){for(var q=arguments.length,ee=new Array(q);q--;)ee[q]=arguments[q];j.subscribers.forEach(function(Y){ue(function(){Y.apply(null,ee)})})})}})}}function so(s,d){return S(d).from({prototype:s}),d}function oi(s,d){return!(s.filter||s.algorithm||s.or)&&(d?s.justLimit:!s.replayFilter)}function Oi(s,d){s.filter=Qn(s.filter,d)}function ia(s,d,g){var w=s.replayFilter;s.replayFilter=w?function(){return Qn(w(),d())}:d,s.justLimit=g&&!w}function oa(s,d){if(s.isPrimKey)return d.primaryKey;var g=d.getIndexByKeyPath(s.index);if(!g)throw new Se.Schema("KeyPath "+s.index+" on object store "+d.name+" is not indexed");return g}function Ja(s,d,g){var w=oa(s,d.schema);return d.openCursor({trans:g,values:!s.keysOnly,reverse:s.dir==="prev",unique:!!s.unique,query:{index:w,range:s.range}})}function uo(s,d,g,w){var E=s.replayFilter?Qn(s.filter,s.replayFilter()):s.filter;if(s.or){var A={},$=function(H,Z,I){var R,O;E&&!E(Z,I,function(K){return Z.stop(K)},function(K){return Z.fail(K)})||((O=""+(R=Z.primaryKey))=="[object ArrayBuffer]"&&(O=""+new Uint8Array(R)),y(A,O)||(A[O]=!0,d(H,Z,I)))};return Promise.all([s.or._iterate($,g),aa(Ja(s,w,g),s.algorithm,$,!s.keysOnly&&s.valueMapper)])}return aa(Ja(s,w,g),Qn(s.algorithm,E),d,!s.keysOnly&&s.valueMapper)}function aa(s,d,g,w){var E=Et(w?function(A,$,H){return g(w(A),$,H)}:g);return s.then(function(A){if(A)return A.start(function(){var $=function(){return A.continue()};d&&!d(A,function(H){return $=H},function(H){A.stop(H),$=He},function(H){A.fail(H),$=He})||E(A.value,A,function(H){return $=H}),$()})})}var Sr=Symbol(),Ai=(sa.prototype.execute=function(s){if(this.add!==void 0){var d=this.add;if(f(d))return a(a([],f(s)?s:[],!0),d).sort();if(typeof d=="number")return(Number(s)||0)+d;if(typeof d=="bigint")try{return BigInt(s)+d}catch{return BigInt(0)+d}throw new TypeError("Invalid term ".concat(d))}if(this.remove!==void 0){var g=this.remove;if(f(g))return f(s)?s.filter(function(w){return!g.includes(w)}).sort():[];if(typeof g=="number")return Number(s)-g;if(typeof g=="bigint")try{return BigInt(s)-g}catch{return BigInt(0)-g}throw new TypeError("Invalid subtrahend ".concat(g))}return d=(d=this.replacePrefix)===null||d===void 0?void 0:d[0],d&&typeof s=="string"&&s.startsWith(d)?this.replacePrefix[1]+s.substring(d.length):s},sa);function sa(s){Object.assign(this,s)}var es=(ht.prototype._read=function(s,d){var g=this._ctx;return g.error?g.table._trans(null,Dt.bind(null,g.error)):g.table._trans("readonly",s).then(d)},ht.prototype._write=function(s){var d=this._ctx;return d.error?d.table._trans(null,Dt.bind(null,d.error)):d.table._trans("readwrite",s,"locked")},ht.prototype._addAlgorithm=function(s){var d=this._ctx;d.algorithm=Qn(d.algorithm,s)},ht.prototype._iterate=function(s,d){return uo(this._ctx,s,d,this._ctx.table.core)},ht.prototype.clone=function(s){var d=Object.create(this.constructor.prototype),g=Object.create(this._ctx);return s&&h(g,s),d._ctx=g,d},ht.prototype.raw=function(){return this._ctx.valueMapper=null,this},ht.prototype.each=function(s){var d=this._ctx;return this._read(function(g){return uo(d,s,g,d.table.core)})},ht.prototype.count=function(s){var d=this;return this._read(function(g){var w=d._ctx,E=w.table.core;if(oi(w,!0))return E.count({trans:g,query:{index:oa(w,E.schema),range:w.range}}).then(function($){return Math.min($,w.limit)});var A=0;return uo(w,function(){return++A,!1},g,E).then(function(){return A})}).then(s)},ht.prototype.sortBy=function(s,d){var g=s.split(".").reverse(),w=g[0],E=g.length-1;function A(Z,I){return I?A(Z[g[I]],I-1):Z[w]}var $=this._ctx.dir==="next"?1:-1;function H(Z,I){return st(A(Z,E),A(I,E))*$}return this.toArray(function(Z){return Z.sort(H)}).then(d)},ht.prototype.toArray=function(s){var d=this;return this._read(function(g){var w=d._ctx;if(w.dir==="next"&&oi(w,!0)&&0<w.limit){var E=w.valueMapper,A=oa(w,w.table.core.schema);return w.table.core.query({trans:g,limit:w.limit,values:!0,query:{index:A,range:w.range}}).then(function(H){return H=H.result,E?H.map(E):H})}var $=[];return uo(w,function(H){return $.push(H)},g,w.table.core).then(function(){return $})},s)},ht.prototype.offset=function(s){var d=this._ctx;return s<=0||(d.offset+=s,oi(d)?ia(d,function(){var g=s;return function(w,E){return g===0||(g===1?--g:E(function(){w.advance(g),g=0}),!1)}}):ia(d,function(){var g=s;return function(){return--g<0}})),this},ht.prototype.limit=function(s){return this._ctx.limit=Math.min(this._ctx.limit,s),ia(this._ctx,function(){var d=s;return function(g,w,E){return--d<=0&&w(E),0<=d}},!0),this},ht.prototype.until=function(s,d){return Oi(this._ctx,function(g,w,E){return!s(g.value)||(w(E),d)}),this},ht.prototype.first=function(s){return this.limit(1).toArray(function(d){return d[0]}).then(s)},ht.prototype.last=function(s){return this.reverse().first(s)},ht.prototype.filter=function(s){var d;return Oi(this._ctx,function(g){return s(g.value)}),(d=this._ctx).isMatch=Qn(d.isMatch,s),this},ht.prototype.and=function(s){return this.filter(s)},ht.prototype.or=function(s){return new this.db.WhereClause(this._ctx.table,s,this)},ht.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ht.prototype.desc=function(){return this.reverse()},ht.prototype.eachKey=function(s){var d=this._ctx;return d.keysOnly=!d.isMatch,this.each(function(g,w){s(w.key,w)})},ht.prototype.eachUniqueKey=function(s){return this._ctx.unique="unique",this.eachKey(s)},ht.prototype.eachPrimaryKey=function(s){var d=this._ctx;return d.keysOnly=!d.isMatch,this.each(function(g,w){s(w.primaryKey,w)})},ht.prototype.keys=function(s){var d=this._ctx;d.keysOnly=!d.isMatch;var g=[];return this.each(function(w,E){g.push(E.key)}).then(function(){return g}).then(s)},ht.prototype.primaryKeys=function(s){var d=this._ctx;if(d.dir==="next"&&oi(d,!0)&&0<d.limit)return this._read(function(w){var E=oa(d,d.table.core.schema);return d.table.core.query({trans:w,values:!1,limit:d.limit,query:{index:E,range:d.range}})}).then(function(w){return w.result}).then(s);d.keysOnly=!d.isMatch;var g=[];return this.each(function(w,E){g.push(E.primaryKey)}).then(function(){return g}).then(s)},ht.prototype.uniqueKeys=function(s){return this._ctx.unique="unique",this.keys(s)},ht.prototype.firstKey=function(s){return this.limit(1).keys(function(d){return d[0]}).then(s)},ht.prototype.lastKey=function(s){return this.reverse().firstKey(s)},ht.prototype.distinct=function(){var s=this._ctx,s=s.index&&s.table.schema.idxByName[s.index];if(!s||!s.multi)return this;var d={};return Oi(this._ctx,function(E){var w=E.primaryKey.toString(),E=y(d,w);return d[w]=!0,!E}),this},ht.prototype.modify=function(s){var d=this,g=this._ctx;return this._write(function(w){var E,A,$;$=typeof s=="function"?s:(E=c(s),A=E.length,function(Y){for(var he=!1,ve=0;ve<A;++ve){var me=E[ve],we=s[me],Oe=ce(Y,me);we instanceof Ai?(z(Y,me,we.execute(Oe)),he=!0):Oe!==we&&(z(Y,me,we),he=!0)}return he});var H=g.table.core,O=H.schema.primaryKey,Z=O.outbound,I=O.extractKey,R=200,O=d.db._options.modifyChunkSize;O&&(R=typeof O=="object"?O[H.name]||O["*"]||200:O);function K(Y,me){var ve=me.failures,me=me.numFailures;q+=Y-me;for(var we=0,Oe=c(ve);we<Oe.length;we++){var De=Oe[we];j.push(ve[De])}}var j=[],q=0,ee=[];return d.clone().primaryKeys().then(function(Y){function he(me){var we=Math.min(R,Y.length-me);return H.getMany({trans:w,keys:Y.slice(me,me+we),cache:"immutable"}).then(function(Oe){for(var De=[],Ie=[],Ae=Z?[]:null,Te=[],Pe=0;Pe<we;++Pe){var Fe=Oe[Pe],nt={value:ye(Fe),primKey:Y[me+Pe]};$.call(nt,nt.value,nt)!==!1&&(nt.value==null?Te.push(Y[me+Pe]):Z||st(I(Fe),I(nt.value))===0?(Ie.push(nt.value),Z&&Ae.push(Y[me+Pe])):(Te.push(Y[me+Pe]),De.push(nt.value)))}return Promise.resolve(0<De.length&&H.mutate({trans:w,type:"add",values:De}).then(function(lt){for(var ft in lt.failures)Te.splice(parseInt(ft),1);K(De.length,lt)})).then(function(){return(0<Ie.length||ve&&typeof s=="object")&&H.mutate({trans:w,type:"put",keys:Ae,values:Ie,criteria:ve,changeSpec:typeof s!="function"&&s,isAdditionalChunk:0<me}).then(function(lt){return K(Ie.length,lt)})}).then(function(){return(0<Te.length||ve&&s===ua)&&H.mutate({trans:w,type:"delete",keys:Te,criteria:ve,isAdditionalChunk:0<me}).then(function(lt){return K(Te.length,lt)})}).then(function(){return Y.length>me+we&&he(me+R)})})}var ve=oi(g)&&g.limit===1/0&&(typeof s!="function"||s===ua)&&{index:g.index,range:g.range};return he(0).then(function(){if(0<j.length)throw new Re("Error modifying one or more objects",j,q,ee);return Y.length})})})},ht.prototype.delete=function(){var s=this._ctx,d=s.range;return oi(s)&&(s.isPrimKey||d.type===3)?this._write(function(g){var w=s.table.core.schema.primaryKey,E=d;return s.table.core.count({trans:g,query:{index:w,range:E}}).then(function(A){return s.table.core.mutate({trans:g,type:"deleteRange",range:E}).then(function($){var H=$.failures;if($.lastResult,$.results,$=$.numFailures,$)throw new Re("Could not delete some values",Object.keys(H).map(function(Z){return H[Z]}),A-$);return A-$})})}):this.modify(ua)},ht);function ht(){}var ua=function(s,d){return d.value=null};function xu(s,d){return s<d?-1:s===d?0:1}function kl(s,d){return d<s?-1:s===d?0:1}function kn(s,d,g){return s=s instanceof _u?new s.Collection(s):s,s._ctx.error=new(g||TypeError)(d),s}function ai(s){return new s.Collection(s,function(){return bu("")}).limit(0)}function co(s,d,g,w){var E,A,$,H,Z,I,R,O=g.length;if(!g.every(function(q){return typeof q=="string"}))return kn(s,ri);function K(q){E=q==="next"?function(Y){return Y.toUpperCase()}:function(Y){return Y.toLowerCase()},A=q==="next"?function(Y){return Y.toLowerCase()}:function(Y){return Y.toUpperCase()},$=q==="next"?xu:kl;var ee=g.map(function(Y){return{lower:A(Y),upper:E(Y)}}).sort(function(Y,he){return $(Y.lower,he.lower)});H=ee.map(function(Y){return Y.upper}),Z=ee.map(function(Y){return Y.lower}),R=(I=q)==="next"?"":w}K("next"),s=new s.Collection(s,function(){return Tr(H[0],Z[O-1]+w)}),s._ondirectionchange=function(q){K(q)};var j=0;return s._addAlgorithm(function(q,ee,Y){var he=q.key;if(typeof he!="string")return!1;var ve=A(he);if(d(ve,Z,j))return!0;for(var me=null,we=j;we<O;++we){var Oe=function(De,Ie,Ae,Te,Pe,Fe){for(var nt=Math.min(De.length,Te.length),lt=-1,ft=0;ft<nt;++ft){var Rn=Ie[ft];if(Rn!==Te[ft])return Pe(De[ft],Ae[ft])<0?De.substr(0,ft)+Ae[ft]+Ae.substr(ft+1):Pe(De[ft],Te[ft])<0?De.substr(0,ft)+Te[ft]+Ae.substr(ft+1):0<=lt?De.substr(0,lt)+Ie[lt]+Ae.substr(lt+1):null;Pe(De[ft],Rn)<0&&(lt=ft)}return nt<Te.length&&Fe==="next"?De+Ae.substr(De.length):nt<De.length&&Fe==="prev"?De.substr(0,Ae.length):lt<0?null:De.substr(0,lt)+Te[lt]+Ae.substr(lt+1)}(he,ve,H[we],Z[we],$,I);Oe===null&&me===null?j=we+1:(me===null||0<$(me,Oe))&&(me=Oe)}return ee(me!==null?function(){q.continue(me+R)}:Y),!1}),s}function Tr(s,d,g,w){return{type:2,lower:s,upper:d,lowerOpen:g,upperOpen:w}}function bu(s){return{type:1,lower:s,upper:s}}var _u=(Object.defineProperty(ln.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),ln.prototype.between=function(s,d,g,w){g=g!==!1,w=w===!0;try{return 0<this._cmp(s,d)||this._cmp(s,d)===0&&(g||w)&&(!g||!w)?ai(this):new this.Collection(this,function(){return Tr(s,d,!g,!w)})}catch{return kn(this,Zn)}},ln.prototype.equals=function(s){return s==null?kn(this,Zn):new this.Collection(this,function(){return bu(s)})},ln.prototype.above=function(s){return s==null?kn(this,Zn):new this.Collection(this,function(){return Tr(s,void 0,!0)})},ln.prototype.aboveOrEqual=function(s){return s==null?kn(this,Zn):new this.Collection(this,function(){return Tr(s,void 0,!1)})},ln.prototype.below=function(s){return s==null?kn(this,Zn):new this.Collection(this,function(){return Tr(void 0,s,!1,!0)})},ln.prototype.belowOrEqual=function(s){return s==null?kn(this,Zn):new this.Collection(this,function(){return Tr(void 0,s)})},ln.prototype.startsWith=function(s){return typeof s!="string"?kn(this,ri):this.between(s,s+wn,!0,!0)},ln.prototype.startsWithIgnoreCase=function(s){return s===""?this.startsWith(s):co(this,function(d,g){return d.indexOf(g[0])===0},[s],wn)},ln.prototype.equalsIgnoreCase=function(s){return co(this,function(d,g){return d===g[0]},[s],"")},ln.prototype.anyOfIgnoreCase=function(){var s=de.apply(X,arguments);return s.length===0?ai(this):co(this,function(d,g){return g.indexOf(d)!==-1},s,"")},ln.prototype.startsWithAnyOfIgnoreCase=function(){var s=de.apply(X,arguments);return s.length===0?ai(this):co(this,function(d,g){return g.some(function(w){return d.indexOf(w)===0})},s,wn)},ln.prototype.anyOf=function(){var s=this,d=de.apply(X,arguments),g=this._cmp;try{d.sort(g)}catch{return kn(this,Zn)}if(d.length===0)return ai(this);var w=new this.Collection(this,function(){return Tr(d[0],d[d.length-1])});w._ondirectionchange=function(A){g=A==="next"?s._ascending:s._descending,d.sort(g)};var E=0;return w._addAlgorithm(function(A,$,H){for(var Z=A.key;0<g(Z,d[E]);)if(++E===d.length)return $(H),!1;return g(Z,d[E])===0||($(function(){A.continue(d[E])}),!1)}),w},ln.prototype.notEqual=function(s){return this.inAnyRange([[-1/0,s],[s,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},ln.prototype.noneOf=function(){var s=de.apply(X,arguments);if(s.length===0)return new this.Collection(this);try{s.sort(this._ascending)}catch{return kn(this,Zn)}var d=s.reduce(function(g,w){return g?g.concat([[g[g.length-1][1],w]]):[[-1/0,w]]},null);return d.push([s[s.length-1],this.db._maxKey]),this.inAnyRange(d,{includeLowers:!1,includeUppers:!1})},ln.prototype.inAnyRange=function(he,d){var g=this,w=this._cmp,E=this._ascending,A=this._descending,$=this._min,H=this._max;if(he.length===0)return ai(this);if(!he.every(function(ve){return ve[0]!==void 0&&ve[1]!==void 0&&E(ve[0],ve[1])<=0}))return kn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Se.InvalidArgument);var Z=!d||d.includeLowers!==!1,I=d&&d.includeUppers===!0,R,O=E;function K(ve,me){return O(ve[0],me[0])}try{(R=he.reduce(function(ve,me){for(var we=0,Oe=ve.length;we<Oe;++we){var De=ve[we];if(w(me[0],De[1])<0&&0<w(me[1],De[0])){De[0]=$(De[0],me[0]),De[1]=H(De[1],me[1]);break}}return we===Oe&&ve.push(me),ve},[])).sort(K)}catch{return kn(this,Zn)}var j=0,q=I?function(ve){return 0<E(ve,R[j][1])}:function(ve){return 0<=E(ve,R[j][1])},ee=Z?function(ve){return 0<A(ve,R[j][0])}:function(ve){return 0<=A(ve,R[j][0])},Y=q,he=new this.Collection(this,function(){return Tr(R[0][0],R[R.length-1][1],!Z,!I)});return he._ondirectionchange=function(ve){O=ve==="next"?(Y=q,E):(Y=ee,A),R.sort(K)},he._addAlgorithm(function(ve,me,we){for(var Oe,De=ve.key;Y(De);)if(++j===R.length)return me(we),!1;return!q(Oe=De)&&!ee(Oe)||(g._cmp(De,R[j][1])===0||g._cmp(De,R[j][0])===0||me(function(){O===E?ve.continue(R[j][0]):ve.continue(R[j][1])}),!1)}),he},ln.prototype.startsWithAnyOf=function(){var s=de.apply(X,arguments);return s.every(function(d){return typeof d=="string"})?s.length===0?ai(this):this.inAnyRange(s.map(function(d){return[d,d+wn]})):kn(this,"startsWithAnyOf() only works with strings")},ln);function ln(){}function Jn(s){return Et(function(d){return lo(d),s(d.target.error),!1})}function lo(s){s.stopPropagation&&s.stopPropagation(),s.preventDefault&&s.preventDefault()}var fo="storagemutated",ts="x-storagemutated-1",Yr=ii(null,fo),ns=(fr.prototype._lock=function(){return F(!$e.global),++this._reculock,this._reculock!==1||$e.global||($e.lockOwnerFor=this),this},fr.prototype._unlock=function(){if(F(!$e.global),--this._reculock==0)for($e.global||($e.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var s=this._blockedFuncs.shift();try{qt(s[1],s[0])}catch{}}return this},fr.prototype._locked=function(){return this._reculock&&$e.lockOwnerFor!==this},fr.prototype.create=function(s){var d=this;if(!this.mode)return this;var g=this.db.idbdb,w=this.db._state.dbOpenError;if(F(!this.idbtrans),!s&&!g)switch(w&&w.name){case"DatabaseClosedError":throw new Se.DatabaseClosed(w);case"MissingAPIError":throw new Se.MissingAPI(w.message,w);default:throw new Se.OpenFailed(w)}if(!this.active)throw new Se.TransactionInactive;return F(this._completion._state===null),(s=this.idbtrans=s||(this.db.core||g).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Et(function(E){lo(E),d._reject(s.error)}),s.onabort=Et(function(E){lo(E),d.active&&d._reject(new Se.Abort(s.error)),d.active=!1,d.on("abort").fire(E)}),s.oncomplete=Et(function(){d.active=!1,d._resolve(),"mutatedParts"in s&&Yr.storagemutated.fire(s.mutatedParts)}),this},fr.prototype._promise=function(s,d,g){var w=this;if(s==="readwrite"&&this.mode!=="readwrite")return Dt(new Se.ReadOnly("Transaction is readonly"));if(!this.active)return Dt(new Se.TransactionInactive);if(this._locked())return new fe(function(A,$){w._blockedFuncs.push([function(){w._promise(s,d,g).then(A,$)},$e])});if(g)return Nn(function(){var A=new fe(function($,H){w._lock();var Z=d($,H,w);Z&&Z.then&&Z.then($,H)});return A.finally(function(){return w._unlock()}),A._lib=!0,A});var E=new fe(function(A,$){var H=d(A,$,w);H&&H.then&&H.then(A,$)});return E._lib=!0,E},fr.prototype._root=function(){return this.parent?this.parent._root():this},fr.prototype.waitFor=function(s){var d,g=this._root(),w=fe.resolve(s);g._waitingFor?g._waitingFor=g._waitingFor.then(function(){return w}):(g._waitingFor=w,g._waitingQueue=[],d=g.idbtrans.objectStore(g.storeNames[0]),function A(){for(++g._spinCount;g._waitingQueue.length;)g._waitingQueue.shift()();g._waitingFor&&(d.get(-1/0).onsuccess=A)}());var E=g._waitingFor;return new fe(function(A,$){w.then(function(H){return g._waitingQueue.push(Et(A.bind(null,H)))},function(H){return g._waitingQueue.push(Et($.bind(null,H)))}).finally(function(){g._waitingFor===E&&(g._waitingFor=null)})})},fr.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Se.Abort))},fr.prototype.table=function(s){var d=this._memoizedTables||(this._memoizedTables={});if(y(d,s))return d[s];var g=this.schema[s];if(!g)throw new Se.NotFound("Table "+s+" not part of transaction");return g=new this.db.Table(s,g,this),g.core=this.db.core.table(s),d[s]=g},fr);function fr(){}function rs(s,d,g,w,E,A,$){return{name:s,keyPath:d,unique:g,multi:w,auto:E,compound:A,src:(g&&!$?"&":"")+(w?"*":"")+(E?"++":"")+Eu(d)}}function Eu(s){return typeof s=="string"?s:s?"["+[].join.call(s,"+")+"]":""}function is(s,d,g){return{name:s,primKey:d,indexes:g,mappedClass:null,idxByName:(w=function(E){return[E.name,E]},g.reduce(function(E,A,$){return $=w(A,$),$&&(E[$[0]]=$[1]),E},{}))};var w}var ho=function(s){try{return s.only([[]]),ho=function(){return[[]]},[[]]}catch{return ho=function(){return wn},wn}};function kt(s){return s==null?function(){}:typeof s=="string"?(d=s).split(".").length===1?function(g){return g[d]}:function(g){return ce(g,d)}:function(g){return ce(g,s)};var d}function It(s){return[].slice.call(s)}var Il=0;function po(s){return s==null?":id":typeof s=="string"?s:"[".concat(s.join("+"),"]")}function Cl(s,d,Z){function w(Y){if(Y.type===3)return null;if(Y.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var j=Y.lower,q=Y.upper,ee=Y.lowerOpen,Y=Y.upperOpen;return j===void 0?q===void 0?null:d.upperBound(q,!!Y):q===void 0?d.lowerBound(j,!!ee):d.bound(j,q,!!ee,!!Y)}function E(K){var j,q=K.name;return{name:q,schema:K,mutate:function(ee){var Y=ee.trans,he=ee.type,ve=ee.keys,me=ee.values,we=ee.range;return new Promise(function(Oe,De){Oe=Et(Oe);var Ie=Y.objectStore(q),Ae=Ie.keyPath==null,Te=he==="put"||he==="add";if(!Te&&he!=="delete"&&he!=="deleteRange")throw new Error("Invalid operation type: "+he);var Pe,Fe=(ve||me||{length:1}).length;if(ve&&me&&ve.length!==me.length)throw new Error("Given keys array must have same length as given values array.");if(Fe===0)return Oe({numFailures:0,failures:{},results:[],lastResult:void 0});function nt(fn){++Rn,lo(fn)}var lt=[],ft=[],Rn=0;if(he==="deleteRange"){if(we.type===4)return Oe({numFailures:Rn,failures:ft,results:[],lastResult:void 0});we.type===3?lt.push(Pe=Ie.clear()):lt.push(Pe=Ie.delete(w(we)))}else{var Ae=Te?Ae?[me,ve]:[me,null]:[ve,null],tt=Ae[0],Wt=Ae[1];if(Te)for(var nn=0;nn<Fe;++nn)lt.push(Pe=Wt&&Wt[nn]!==void 0?Ie[he](tt[nn],Wt[nn]):Ie[he](tt[nn])),Pe.onerror=nt;else for(nn=0;nn<Fe;++nn)lt.push(Pe=Ie[he](tt[nn])),Pe.onerror=nt}function To(fn){fn=fn.target.result,lt.forEach(function(qr,wa){return qr.error!=null&&(ft[wa]=qr.error)}),Oe({numFailures:Rn,failures:ft,results:he==="delete"?ve:lt.map(function(qr){return qr.result}),lastResult:fn})}Pe.onerror=function(fn){nt(fn),To(fn)},Pe.onsuccess=To})},getMany:function(ee){var Y=ee.trans,he=ee.keys;return new Promise(function(ve,me){ve=Et(ve);for(var we,Oe=Y.objectStore(q),De=he.length,Ie=new Array(De),Ae=0,Te=0,Pe=function(lt){lt=lt.target,Ie[lt._pos]=lt.result,++Te===Ae&&ve(Ie)},Fe=Jn(me),nt=0;nt<De;++nt)he[nt]!=null&&((we=Oe.get(he[nt]))._pos=nt,we.onsuccess=Pe,we.onerror=Fe,++Ae);Ae===0&&ve(Ie)})},get:function(ee){var Y=ee.trans,he=ee.key;return new Promise(function(ve,me){ve=Et(ve);var we=Y.objectStore(q).get(he);we.onsuccess=function(Oe){return ve(Oe.target.result)},we.onerror=Jn(me)})},query:(j=I,function(ee){return new Promise(function(Y,he){Y=Et(Y);var ve,me,we,Ae=ee.trans,Oe=ee.values,De=ee.limit,Pe=ee.query,Ie=De===1/0?void 0:De,Te=Pe.index,Pe=Pe.range,Ae=Ae.objectStore(q),Te=Te.isPrimaryKey?Ae:Ae.index(Te.name),Pe=w(Pe);if(De===0)return Y({result:[]});j?((Ie=Oe?Te.getAll(Pe,Ie):Te.getAllKeys(Pe,Ie)).onsuccess=function(Fe){return Y({result:Fe.target.result})},Ie.onerror=Jn(he)):(ve=0,me=!Oe&&"openKeyCursor"in Te?Te.openKeyCursor(Pe):Te.openCursor(Pe),we=[],me.onsuccess=function(Fe){var nt=me.result;return nt?(we.push(Oe?nt.value:nt.primaryKey),++ve===De?Y({result:we}):void nt.continue()):Y({result:we})},me.onerror=Jn(he))})}),openCursor:function(ee){var Y=ee.trans,he=ee.values,ve=ee.query,me=ee.reverse,we=ee.unique;return new Promise(function(Oe,De){Oe=Et(Oe);var Te=ve.index,Ie=ve.range,Ae=Y.objectStore(q),Ae=Te.isPrimaryKey?Ae:Ae.index(Te.name),Te=me?we?"prevunique":"prev":we?"nextunique":"next",Pe=!he&&"openKeyCursor"in Ae?Ae.openKeyCursor(w(Ie),Te):Ae.openCursor(w(Ie),Te);Pe.onerror=Jn(De),Pe.onsuccess=Et(function(Fe){var nt,lt,ft,Rn,tt=Pe.result;tt?(tt.___id=++Il,tt.done=!1,nt=tt.continue.bind(tt),lt=(lt=tt.continuePrimaryKey)&&lt.bind(tt),ft=tt.advance.bind(tt),Rn=function(){throw new Error("Cursor not stopped")},tt.trans=Y,tt.stop=tt.continue=tt.continuePrimaryKey=tt.advance=function(){throw new Error("Cursor not started")},tt.fail=Et(De),tt.next=function(){var Wt=this,nn=1;return this.start(function(){return nn--?Wt.continue():Wt.stop()}).then(function(){return Wt})},tt.start=function(Wt){function nn(){if(Pe.result)try{Wt()}catch(fn){tt.fail(fn)}else tt.done=!0,tt.start=function(){throw new Error("Cursor behind last entry")},tt.stop()}var To=new Promise(function(fn,qr){fn=Et(fn),Pe.onerror=Jn(qr),tt.fail=qr,tt.stop=function(wa){tt.stop=tt.continue=tt.continuePrimaryKey=tt.advance=Rn,fn(wa)}});return Pe.onsuccess=Et(function(fn){Pe.onsuccess=nn,nn()}),tt.continue=nt,tt.continuePrimaryKey=lt,tt.advance=ft,nn(),To},Oe(tt)):Oe(null)},De)})},count:function(ee){var Y=ee.query,he=ee.trans,ve=Y.index,me=Y.range;return new Promise(function(we,Oe){var De=he.objectStore(q),Ie=ve.isPrimaryKey?De:De.index(ve.name),De=w(me),Ie=De?Ie.count(De):Ie.count();Ie.onsuccess=Et(function(Ae){return we(Ae.target.result)}),Ie.onerror=Jn(Oe)})}}}var A,$,H,R=($=Z,H=It((A=s).objectStoreNames),{schema:{name:A.name,tables:H.map(function(K){return $.objectStore(K)}).map(function(K){var j=K.keyPath,Y=K.autoIncrement,q=f(j),ee={},Y={name:K.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:j==null,compound:q,keyPath:j,autoIncrement:Y,unique:!0,extractKey:kt(j)},indexes:It(K.indexNames).map(function(he){return K.index(he)}).map(function(we){var ve=we.name,me=we.unique,Oe=we.multiEntry,we=we.keyPath,Oe={name:ve,compound:f(we),keyPath:we,unique:me,multiEntry:Oe,extractKey:kt(we)};return ee[po(we)]=Oe}),getIndexByKeyPath:function(he){return ee[po(he)]}};return ee[":id"]=Y.primaryKey,j!=null&&(ee[po(j)]=Y.primaryKey),Y})},hasGetAll:0<H.length&&"getAll"in $.objectStore(H[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),Z=R.schema,I=R.hasGetAll,R=Z.tables.map(E),O={};return R.forEach(function(K){return O[K.name]=K}),{stack:"dbcore",transaction:s.transaction.bind(s),table:function(K){if(!O[K])throw new Error("Table '".concat(K,"' not found"));return O[K]},MIN_KEY:-1/0,MAX_KEY:ho(d),schema:Z}}function Ol(s,d,g,w){var E=g.IDBKeyRange;return g.indexedDB,{dbcore:(w=Cl(d,E,w),s.dbcore.reduce(function(A,$){return $=$.create,i(i({},A),$(A))},w))}}function ca(s,w){var g=w.db,w=Ol(s._middlewares,g,s._deps,w);s.core=w.dbcore,s.tables.forEach(function(E){var A=E.name;s.core.schema.tables.some(function($){return $.name===A})&&(E.core=s.core.table(A),s[A]instanceof s.Table&&(s[A].core=E.core))})}function la(s,d,g,w){g.forEach(function(E){var A=w[E];d.forEach(function($){var H=function Z(I,R){return C(I,R)||(I=p(I))&&Z(I,R)}($,E);(!H||"value"in H&&H.value===void 0)&&($===s.Transaction.prototype||$ instanceof s.Transaction?N($,E,{get:function(){return this.table(E)},set:function(Z){b(this,E,{value:Z,writable:!0,configurable:!0,enumerable:!0})}}):$[E]=new s.Table(E,A))})})}function fa(s,d){d.forEach(function(g){for(var w in g)g[w]instanceof s.Table&&delete g[w]})}function Al(s,d){return s._cfg.version-d._cfg.version}function hn(s,d,g,w){var E=s._dbSchema;g.objectStoreNames.contains("$meta")&&!E.$meta&&(E.$meta=is("$meta",as("")[0],[]),s._storeNames.push("$meta"));var A=s._createTransaction("readwrite",s._storeNames,E);A.create(g),A._completion.catch(w);var $=A._reject.bind(A),H=$e.transless||$e;Nn(function(){return $e.trans=A,$e.transless=H,d!==0?(ca(s,g),I=d,((Z=A).storeNames.includes("$meta")?Z.table("$meta").get("version").then(function(R){return R??I}):fe.resolve(I)).then(function(R){return K=R,j=A,q=g,ee=[],R=(O=s)._versions,Y=O._dbSchema=mo(0,O.idbdb,q),(R=R.filter(function(he){return he._cfg.version>=K})).length!==0?(R.forEach(function(he){ee.push(function(){var ve=Y,me=he._cfg.dbschema;go(O,ve,q),go(O,me,q),Y=O._dbSchema=me;var we=Nr(ve,me);we.add.forEach(function(Te){da(q,Te[0],Te[1].primKey,Te[1].indexes)}),we.change.forEach(function(Te){if(Te.recreate)throw new Se.Upgrade("Not yet support for changing primary key");var Pe=q.objectStore(Te.name);Te.add.forEach(function(Fe){return xn(Pe,Fe)}),Te.change.forEach(function(Fe){Pe.deleteIndex(Fe.name),xn(Pe,Fe)}),Te.del.forEach(function(Fe){return Pe.deleteIndex(Fe)})});var Oe=he._cfg.contentUpgrade;if(Oe&&he._cfg.version>K){ca(O,q),j._memoizedTables={};var De=Q(me);we.del.forEach(function(Te){De[Te]=ve[Te]}),fa(O,[O.Transaction.prototype]),la(O,[O.Transaction.prototype],c(De),De),j.schema=De;var Ie,Ae=ge(Oe);return Ae&&Gn(),we=fe.follow(function(){var Te;(Ie=Oe(j))&&Ae&&(Te=Pn.bind(null,null),Ie.then(Te,Te))}),Ie&&typeof Ie.then=="function"?fe.resolve(Ie):we.then(function(){return Ie})}}),ee.push(function(ve){var me,we,Oe=he._cfg.dbschema;me=Oe,we=ve,[].slice.call(we.db.objectStoreNames).forEach(function(De){return me[De]==null&&we.db.deleteObjectStore(De)}),fa(O,[O.Transaction.prototype]),la(O,[O.Transaction.prototype],O._storeNames,O._dbSchema),j.schema=O._dbSchema}),ee.push(function(ve){O.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(O.idbdb.version/10)===he._cfg.version?(O.idbdb.deleteObjectStore("$meta"),delete O._dbSchema.$meta,O._storeNames=O._storeNames.filter(function(me){return me!=="$meta"})):ve.objectStore("$meta").put(he._cfg.version,"version"))})}),function he(){return ee.length?fe.resolve(ee.shift()(j.idbtrans)).then(he):fe.resolve()}().then(function(){ha(Y,q)})):fe.resolve();var O,K,j,q,ee,Y}).catch($)):(c(E).forEach(function(R){da(g,R,E[R].primKey,E[R].indexes)}),ca(s,g),void fe.follow(function(){return s.on.populate.fire(A)}).catch($));var Z,I})}function os(s,d){ha(s._dbSchema,d),d.db.version%10!=0||d.objectStoreNames.contains("$meta")||d.db.createObjectStore("$meta").add(Math.ceil(d.db.version/10-1),"version");var g=mo(0,s.idbdb,d);go(s,s._dbSchema,d);for(var w=0,E=Nr(g,s._dbSchema).change;w<E.length;w++){var A=function($){if($.change.length||$.recreate)return console.warn("Unable to patch indexes of table ".concat($.name," because it has changes on the type of index or primary key.")),{value:void 0};var H=d.objectStore($.name);$.add.forEach(function(Z){bt&&console.debug("Dexie upgrade patch: Creating missing index ".concat($.name,".").concat(Z.src)),xn(H,Z)})}(E[w]);if(typeof A=="object")return A.value}}function Nr(s,d){var g,w={del:[],add:[],change:[]};for(g in s)d[g]||w.del.push(g);for(g in d){var E=s[g],A=d[g];if(E){var $={name:g,def:A,recreate:!1,del:[],add:[],change:[]};if(""+(E.primKey.keyPath||"")!=""+(A.primKey.keyPath||"")||E.primKey.auto!==A.primKey.auto)$.recreate=!0,w.change.push($);else{var H=E.idxByName,Z=A.idxByName,I=void 0;for(I in H)Z[I]||$.del.push(I);for(I in Z){var R=H[I],O=Z[I];R?R.src!==O.src&&$.change.push(O):$.add.push(O)}(0<$.del.length||0<$.add.length||0<$.change.length)&&w.change.push($)}}else w.add.push([g,A])}return w}function da(s,d,g,w){var E=s.db.createObjectStore(d,g.keyPath?{keyPath:g.keyPath,autoIncrement:g.auto}:{autoIncrement:g.auto});return w.forEach(function(A){return xn(E,A)}),E}function ha(s,d){c(s).forEach(function(g){d.db.objectStoreNames.contains(g)||(bt&&console.debug("Dexie: Creating missing table",g),da(d,g,s[g].primKey,s[g].indexes))})}function xn(s,d){s.createIndex(d.name,d.keyPath,{unique:d.unique,multiEntry:d.multi})}function mo(s,d,g){var w={};return U(d.objectStoreNames,0).forEach(function(E){for(var A=g.objectStore(E),$=rs(Eu(I=A.keyPath),I||"",!0,!1,!!A.autoIncrement,I&&typeof I!="string",!0),H=[],Z=0;Z<A.indexNames.length;++Z){var R=A.index(A.indexNames[Z]),I=R.keyPath,R=rs(R.name,I,!!R.unique,!!R.multiEntry,!1,I&&typeof I!="string",!1);H.push(R)}w[E]=is(E,$,H)}),w}function go(s,d,g){for(var w=g.db.objectStoreNames,E=0;E<w.length;++E){var A=w[E],$=g.objectStore(A);s._hasGetAll="getAll"in $;for(var H=0;H<$.indexNames.length;++H){var Z=$.indexNames[H],I=$.index(Z).keyPath,R=typeof I=="string"?I:"["+U(I).join("+")+"]";!d[A]||(I=d[A].idxByName[R])&&(I.name=Z,delete d[A].idxByName[R],d[A].idxByName[Z]=I)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&u.WorkerGlobalScope&&u instanceof u.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(s._hasGetAll=!1)}function as(s){return s.split(",").map(function(d,g){var w=(d=d.trim()).replace(/([&*]|\+\+)/g,""),E=/^\[/.test(w)?w.match(/^\[(.*)\]$/)[1].split("+"):w;return rs(w,E||null,/\&/.test(d),/\*/.test(d),/\+\+/.test(d),f(E),g===0)})}var Su=(vo.prototype._parseStoresSpec=function(s,d){c(s).forEach(function(g){if(s[g]!==null){var w=as(s[g]),E=w.shift();if(E.unique=!0,E.multi)throw new Se.Schema("Primary key cannot be multi-valued");w.forEach(function(A){if(A.auto)throw new Se.Schema("Only primary key can be marked as autoIncrement (++)");if(!A.keyPath)throw new Se.Schema("Index must have a name and cannot be an empty string")}),d[g]=is(g,E,w)}})},vo.prototype.stores=function(g){var d=this.db;this._cfg.storesSource=this._cfg.storesSource?h(this._cfg.storesSource,g):g;var g=d._versions,w={},E={};return g.forEach(function(A){h(w,A._cfg.storesSource),E=A._cfg.dbschema={},A._parseStoresSpec(w,E)}),d._dbSchema=E,fa(d,[d._allTables,d,d.Transaction.prototype]),la(d,[d._allTables,d,d.Transaction.prototype,this._cfg.tables],c(E),E),d._storeNames=c(E),this},vo.prototype.upgrade=function(s){return this._cfg.contentUpgrade=jt(this._cfg.contentUpgrade||He,s),this},vo);function vo(){}function pa(s,d){var g=s._dbNamesDB;return g||(g=s._dbNamesDB=new Cr(ki,{addons:[],indexedDB:s,IDBKeyRange:d})).version(1).stores({dbnames:"name"}),g.table("dbnames")}function bn(s){return s&&typeof s.databases=="function"}function ss(s){return Nn(function(){return $e.letThrough=!0,s()})}function In(s){return!("from"in s)}var vn=function(s,d){if(!this){var g=new vn;return s&&"d"in s&&h(g,s),g}h(this,arguments.length?{d:1,from:s,to:1<arguments.length?d:s}:{d:0})};function Di(s,d,g){var w=st(d,g);if(!isNaN(w)){if(0<w)throw RangeError();if(In(s))return h(s,{from:d,to:g,d:1});var E=s.l,w=s.r;if(st(g,s.from)<0)return E?Di(E,d,g):s.l={from:d,to:g,d:1,l:null,r:null},Pt(s);if(0<st(d,s.to))return w?Di(w,d,g):s.r={from:d,to:g,d:1,l:null,r:null},Pt(s);st(d,s.from)<0&&(s.from=d,s.l=null,s.d=w?w.d+1:1),0<st(g,s.to)&&(s.to=g,s.r=null,s.d=s.l?s.l.d+1:1),g=!s.r,E&&!s.l&&Bn(s,E),w&&g&&Bn(s,w)}}function Bn(s,d){In(d)||function g(w,Z){var A=Z.from,$=Z.to,H=Z.l,Z=Z.r;Di(w,A,$),H&&g(w,H),Z&&g(w,Z)}(s,d)}function yo(s,d){var g=Pi(d),w=g.next();if(w.done)return!1;for(var E=w.value,A=Pi(s),$=A.next(E.from),H=$.value;!w.done&&!$.done;){if(st(H.from,E.to)<=0&&0<=st(H.to,E.from))return!0;st(E.from,H.from)<0?E=(w=g.next(H.from)).value:H=($=A.next(E.from)).value}return!1}function Pi(s){var d=In(s)?null:{s:0,n:s};return{next:function(g){for(var w=0<arguments.length;d;)switch(d.s){case 0:if(d.s=1,w)for(;d.n.l&&st(g,d.n.from)<0;)d={up:d,n:d.n.l,s:1};else for(;d.n.l;)d={up:d,n:d.n.l,s:1};case 1:if(d.s=2,!w||st(g,d.n.to)<=0)return{value:d.n,done:!1};case 2:if(d.n.r){d.s=3,d={up:d,n:d.n.r,s:0};continue}case 3:d=d.up}return{done:!0}}}}function Pt(s){var d,g,w=(((d=s.r)===null||d===void 0?void 0:d.d)||0)-(((g=s.l)===null||g===void 0?void 0:g.d)||0),E=1<w?"r":w<-1?"l":"";E&&(d=E=="r"?"l":"r",g=i({},s),w=s[E],s.from=w.from,s.to=w.to,s[E]=w[E],g[E]=w[d],(s[d]=g).d=kr(g)),s.d=kr(s)}function kr(g){var d=g.r,g=g.l;return(d?g?Math.max(d.d,g.d):d.d:g?g.d:0)+1}function Ri(s,d){return c(d).forEach(function(g){s[g]?Bn(s[g],d[g]):s[g]=function w(E){var A,$,H={};for(A in E)y(E,A)&&($=E[A],H[A]=!$||typeof $!="object"||V.has($.constructor)?$:w($));return H}(d[g])}),s}function us(s,d){return s.all||d.all||Object.keys(s).some(function(g){return d[g]&&yo(d[g],s[g])})}x(vn.prototype,((Hn={add:function(s){return Bn(this,s),this},addKey:function(s){return Di(this,s,s),this},addKeys:function(s){var d=this;return s.forEach(function(g){return Di(d,g,g)}),this},hasKey:function(s){var d=Pi(this).next(s).value;return d&&st(d.from,s)<=0&&0<=st(d.to,s)}})[W]=function(){return Pi(this)},Hn));var Ir={},cs={},ls=!1;function ma(s){Ri(cs,s),ls||(ls=!0,setTimeout(function(){ls=!1,ga(cs,!(cs={}))},0))}function ga(s,d){d===void 0&&(d=!1);var g=new Set;if(s.all)for(var w=0,E=Object.values(Ir);w<E.length;w++)wo($=E[w],s,g,d);else for(var A in s){var $,H=/^idb\:\/\/(.*)\/(.*)\//.exec(A);H&&(A=H[1],H=H[2],($=Ir["idb://".concat(A,"/").concat(H)])&&wo($,s,g,d))}g.forEach(function(Z){return Z()})}function wo(s,d,g,w){for(var E=[],A=0,$=Object.entries(s.queries.query);A<$.length;A++){for(var H=$[A],Z=H[0],I=[],R=0,O=H[1];R<O.length;R++){var K=O[R];us(d,K.obsSet)?K.subscribers.forEach(function(Y){return g.add(Y)}):w&&I.push(K)}w&&E.push([Z,I])}if(w)for(var j=0,q=E;j<q.length;j++){var ee=q[j],Z=ee[0],I=ee[1];s.queries.query[Z]=I}}function Mi(s){var d=s._state,g=s._deps.indexedDB;if(d.isBeingOpened||s.idbdb)return d.dbReadyPromise.then(function(){return d.dbOpenError?Dt(d.dbOpenError):s});d.isBeingOpened=!0,d.dbOpenError=null,d.openComplete=!1;var w=d.openCanceller,E=Math.round(10*s.verno),A=!1;function $(){if(d.openCanceller!==w)throw new Se.DatabaseClosed("db.open() was cancelled")}function H(){return new fe(function(K,j){if($(),!g)throw new Se.MissingAPI;var q=s.name,ee=d.autoSchema||!E?g.open(q):g.open(q,E);if(!ee)throw new Se.MissingAPI;ee.onerror=Jn(j),ee.onblocked=Et(s._fireOnBlocked),ee.onupgradeneeded=Et(function(Y){var he;R=ee.transaction,d.autoSchema&&!s._options.allowEmptyDB?(ee.onerror=lo,R.abort(),ee.result.close(),(he=g.deleteDatabase(q)).onsuccess=he.onerror=Et(function(){j(new Se.NoSuchDatabase("Database ".concat(q," doesnt exist")))})):(R.onerror=Jn(j),Y=Y.oldVersion>Math.pow(2,62)?0:Y.oldVersion,O=Y<1,s.idbdb=ee.result,A&&os(s,R),hn(s,Y/10,R,j))},j),ee.onsuccess=Et(function(){R=null;var Y,he,ve,me,we,Oe=s.idbdb=ee.result,De=U(Oe.objectStoreNames);if(0<De.length)try{var Ie=Oe.transaction((me=De).length===1?me[0]:me,"readonly");if(d.autoSchema)he=Oe,ve=Ie,(Y=s).verno=he.version/10,ve=Y._dbSchema=mo(0,he,ve),Y._storeNames=U(he.objectStoreNames,0),la(Y,[Y._allTables],c(ve),ve);else if(go(s,s._dbSchema,Ie),((we=Nr(mo(0,(we=s).idbdb,Ie),we._dbSchema)).add.length||we.change.some(function(Ae){return Ae.add.length||Ae.change.length}))&&!A)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Oe.close(),E=Oe.version+1,A=!0,K(H());ca(s,Ie)}catch{}zr.push(s),Oe.onversionchange=Et(function(Ae){d.vcFired=!0,s.on("versionchange").fire(Ae)}),Oe.onclose=Et(function(Ae){s.on("close").fire(Ae)}),O&&(we=s._deps,Ie=q,Oe=we.indexedDB,we=we.IDBKeyRange,bn(Oe)||Ie===ki||pa(Oe,we).put({name:Ie}).catch(He)),K()},j)}).catch(function(K){switch(K==null?void 0:K.name){case"UnknownError":if(0<d.PR1398_maxLoop)return d.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),H();break;case"VersionError":if(0<E)return E=0,H()}return fe.reject(K)})}var Z,I=d.dbReadyResolve,R=null,O=!1;return fe.race([w,(typeof navigator>"u"?fe.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(K){function j(){return indexedDB.databases().finally(K)}Z=setInterval(j,100),j()}).finally(function(){return clearInterval(Z)}):Promise.resolve()).then(H)]).then(function(){return $(),d.onReadyBeingFired=[],fe.resolve(ss(function(){return s.on.ready.fire(s.vip)})).then(function K(){if(0<d.onReadyBeingFired.length){var j=d.onReadyBeingFired.reduce(jt,He);return d.onReadyBeingFired=[],fe.resolve(ss(function(){return j(s.vip)})).then(K)}})}).finally(function(){d.openCanceller===w&&(d.onReadyBeingFired=null,d.isBeingOpened=!1)}).catch(function(K){d.dbOpenError=K;try{R&&R.abort()}catch{}return w===d.openCanceller&&s._close(),Dt(K)}).finally(function(){d.openComplete=!0,I()}).then(function(){var K;return O&&(K={},s.tables.forEach(function(j){j.schema.indexes.forEach(function(q){q.name&&(K["idb://".concat(s.name,"/").concat(j.name,"/").concat(q.name)]=new vn(-1/0,[[[]]]))}),K["idb://".concat(s.name,"/").concat(j.name,"/")]=K["idb://".concat(s.name,"/").concat(j.name,"/:dels")]=new vn(-1/0,[[[]]])}),Yr(fo).fire(K),ga(K,!0)),s})}function fs(s){function d(A){return s.next(A)}var g=E(d),w=E(function(A){return s.throw(A)});function E(A){return function(Z){var H=A(Z),Z=H.value;return H.done?Z:Z&&typeof Z.then=="function"?Z.then(g,w):f(Z)?Promise.all(Z).then(g,w):g(Z)}}return E(d)()}function xo(s,d,g){for(var w=f(s)?s.slice():[s],E=0;E<g;++E)w.push(d);return w}var Tu={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(s){return i(i({},s),{table:function(d){var g=s.table(d),w=g.schema,E={},A=[];function $(O,K,j){var q=po(O),ee=E[q]=E[q]||[],Y=O==null?0:typeof O=="string"?1:O.length,he=0<K,he=i(i({},j),{name:he?"".concat(q,"(virtual-from:").concat(j.name,")"):j.name,lowLevelIndex:j,isVirtual:he,keyTail:K,keyLength:Y,extractKey:kt(O),unique:!he&&j.unique});return ee.push(he),he.isPrimaryKey||A.push(he),1<Y&&$(Y===2?O[0]:O.slice(0,Y-1),K+1,j),ee.sort(function(ve,me){return ve.keyTail-me.keyTail}),he}d=$(w.primaryKey.keyPath,0,w.primaryKey),E[":id"]=[d];for(var H=0,Z=w.indexes;H<Z.length;H++){var I=Z[H];$(I.keyPath,0,I)}function R(O){var K,j=O.query.index;return j.isVirtual?i(i({},O),{query:{index:j.lowLevelIndex,range:(K=O.query.range,j=j.keyTail,{type:K.type===1?2:K.type,lower:xo(K.lower,K.lowerOpen?s.MAX_KEY:s.MIN_KEY,j),lowerOpen:!0,upper:xo(K.upper,K.upperOpen?s.MIN_KEY:s.MAX_KEY,j),upperOpen:!0})}}):O}return i(i({},g),{schema:i(i({},w),{primaryKey:d,indexes:A,getIndexByKeyPath:function(O){return(O=E[po(O)])&&O[0]}}),count:function(O){return g.count(R(O))},query:function(O){return g.query(R(O))},openCursor:function(O){var K=O.query.index,j=K.keyTail,q=K.isVirtual,ee=K.keyLength;return q?g.openCursor(R(O)).then(function(he){return he&&Y(he)}):g.openCursor(O);function Y(he){return Object.create(he,{continue:{value:function(ve){ve!=null?he.continue(xo(ve,O.reverse?s.MAX_KEY:s.MIN_KEY,j)):O.unique?he.continue(he.key.slice(0,ee).concat(O.reverse?s.MIN_KEY:s.MAX_KEY,j)):he.continue()}},continuePrimaryKey:{value:function(ve,me){he.continuePrimaryKey(xo(ve,s.MAX_KEY,j),me)}},primaryKey:{get:function(){return he.primaryKey}},key:{get:function(){var ve=he.key;return ee===1?ve[0]:ve.slice(0,ee)}},value:{get:function(){return he.value}}})}}})}})}};function bo(s,d,g,w){return g=g||{},w=w||"",c(s).forEach(function(E){var A,$,H;y(d,E)?(A=s[E],$=d[E],typeof A=="object"&&typeof $=="object"&&A&&$?(H=ae(A))!==ae($)?g[w+E]=d[E]:H==="Object"?bo(A,$,g,w+E+"."):A!==$&&(g[w+E]=d[E]):A!==$&&(g[w+E]=d[E])):g[w+E]=void 0}),c(d).forEach(function(E){y(s,E)||(g[w+E]=d[E])}),g}function _o(s,d){return d.type==="delete"?d.keys:d.keys||d.values.map(s.extractKey)}var Nu={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(s){return i(i({},s),{table:function(d){var g=s.table(d),w=g.schema.primaryKey;return i(i({},g),{mutate:function(E){var A=$e.trans,$=A.table(d).hook,H=$.deleting,Z=$.creating,I=$.updating;switch(E.type){case"add":if(Z.fire===He)break;return A._promise("readwrite",function(){return R(E)},!0);case"put":if(Z.fire===He&&I.fire===He)break;return A._promise("readwrite",function(){return R(E)},!0);case"delete":if(H.fire===He)break;return A._promise("readwrite",function(){return R(E)},!0);case"deleteRange":if(H.fire===He)break;return A._promise("readwrite",function(){return function O(K,j,q){return g.query({trans:K,values:!1,query:{index:w,range:j},limit:q}).then(function(ee){var Y=ee.result;return R({type:"delete",keys:Y,trans:K}).then(function(he){return 0<he.numFailures?Promise.reject(he.failures[0]):Y.length<q?{failures:[],numFailures:0,lastResult:void 0}:O(K,i(i({},j),{lower:Y[Y.length-1],lowerOpen:!0}),q)})})}(E.trans,E.range,1e4)},!0)}return g.mutate(E);function R(O){var K,j,q,ee=$e.trans,Y=O.keys||_o(w,O);if(!Y)throw new Error("Keys missing");return(O=O.type==="add"||O.type==="put"?i(i({},O),{keys:Y}):i({},O)).type!=="delete"&&(O.values=a([],O.values)),O.keys&&(O.keys=a([],O.keys)),K=g,q=Y,((j=O).type==="add"?Promise.resolve([]):K.getMany({trans:j.trans,keys:q,cache:"immutable"})).then(function(he){var ve=Y.map(function(me,we){var Oe,De,Ie,Ae=he[we],Te={onerror:null,onsuccess:null};return O.type==="delete"?H.fire.call(Te,me,Ae,ee):O.type==="add"||Ae===void 0?(Oe=Z.fire.call(Te,me,O.values[we],ee),me==null&&Oe!=null&&(O.keys[we]=me=Oe,w.outbound||z(O.values[we],w.keyPath,me))):(Oe=bo(Ae,O.values[we]),(De=I.fire.call(Te,Oe,me,Ae,ee))&&(Ie=O.values[we],Object.keys(De).forEach(function(Pe){y(Ie,Pe)?Ie[Pe]=De[Pe]:z(Ie,Pe,De[Pe])}))),Te});return g.mutate(O).then(function(me){for(var we=me.failures,Oe=me.results,De=me.numFailures,me=me.lastResult,Ie=0;Ie<Y.length;++Ie){var Ae=(Oe||Y)[Ie],Te=ve[Ie];Ae==null?Te.onerror&&Te.onerror(we[Ie]):Te.onsuccess&&Te.onsuccess(O.type==="put"&&he[Ie]?O.values[Ie]:Ae)}return{failures:we,results:Oe,numFailures:De,lastResult:me}}).catch(function(me){return ve.forEach(function(we){return we.onerror&&we.onerror(me)}),Promise.reject(me)})})}}})}})}};function ku(s,d,g){try{if(!d||d.keys.length<s.length)return null;for(var w=[],E=0,A=0;E<d.keys.length&&A<s.length;++E)st(d.keys[E],s[A])===0&&(w.push(g?ye(d.values[E]):d.values[E]),++A);return w.length===s.length?w:null}catch{return null}}var ds={stack:"dbcore",level:-1,create:function(s){return{table:function(d){var g=s.table(d);return i(i({},g),{getMany:function(w){if(!w.cache)return g.getMany(w);var E=ku(w.keys,w.trans._cache,w.cache==="clone");return E?fe.resolve(E):g.getMany(w).then(function(A){return w.trans._cache={keys:w.keys,values:w.cache==="clone"?ye(A):A},A})},mutate:function(w){return w.type!=="add"&&(w.trans._cache=null),g.mutate(w)}})}}}};function va(s,d){return s.trans.mode==="readonly"&&!!s.subscr&&!s.trans.explicit&&s.trans.db._options.cache!=="disabled"&&!d.schema.primaryKey.outbound}function Iu(s,d){switch(s){case"query":return d.values&&!d.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Cu={stack:"dbcore",level:0,name:"Observability",create:function(s){var d=s.schema.name,g=new vn(s.MIN_KEY,s.MAX_KEY);return i(i({},s),{transaction:function(w,E,A){if($e.subscr&&E!=="readonly")throw new Se.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat($e.querier));return s.transaction(w,E,A)},table:function(w){var E=s.table(w),A=E.schema,$=A.primaryKey,O=A.indexes,H=$.extractKey,Z=$.outbound,I=$.autoIncrement&&O.filter(function(j){return j.compound&&j.keyPath.includes($.keyPath)}),R=i(i({},E),{mutate:function(j){function q(Pe){return Pe="idb://".concat(d,"/").concat(w,"/").concat(Pe),me[Pe]||(me[Pe]=new vn)}var ee,Y,he,ve=j.trans,me=j.mutatedParts||(j.mutatedParts={}),we=q(""),Oe=q(":dels"),De=j.type,Te=j.type==="deleteRange"?[j.range]:j.type==="delete"?[j.keys]:j.values.length<50?[_o($,j).filter(function(Pe){return Pe}),j.values]:[],Ie=Te[0],Ae=Te[1],Te=j.trans._cache;return f(Ie)?(we.addKeys(Ie),(Te=De==="delete"||Ie.length===Ae.length?ku(Ie,Te):null)||Oe.addKeys(Ie),(Te||Ae)&&(ee=q,Y=Te,he=Ae,A.indexes.forEach(function(Pe){var Fe=ee(Pe.name||"");function nt(ft){return ft!=null?Pe.extractKey(ft):null}function lt(ft){return Pe.multiEntry&&f(ft)?ft.forEach(function(Rn){return Fe.addKey(Rn)}):Fe.addKey(ft)}(Y||he).forEach(function(ft,Wt){var tt=Y&&nt(Y[Wt]),Wt=he&&nt(he[Wt]);st(tt,Wt)!==0&&(tt!=null&&lt(tt),Wt!=null&&lt(Wt))})}))):Ie?(Ae={from:(Ae=Ie.lower)!==null&&Ae!==void 0?Ae:s.MIN_KEY,to:(Ae=Ie.upper)!==null&&Ae!==void 0?Ae:s.MAX_KEY},Oe.add(Ae),we.add(Ae)):(we.add(g),Oe.add(g),A.indexes.forEach(function(Pe){return q(Pe.name).add(g)})),E.mutate(j).then(function(Pe){return!Ie||j.type!=="add"&&j.type!=="put"||(we.addKeys(Pe.results),I&&I.forEach(function(Fe){for(var nt=j.values.map(function(tt){return Fe.extractKey(tt)}),lt=Fe.keyPath.findIndex(function(tt){return tt===$.keyPath}),ft=0,Rn=Pe.results.length;ft<Rn;++ft)nt[ft][lt]=Pe.results[ft];q(Fe.name).addKeys(nt)})),ve.mutatedParts=Ri(ve.mutatedParts||{},me),Pe})}}),O=function(q){var ee=q.query,q=ee.index,ee=ee.range;return[q,new vn((q=ee.lower)!==null&&q!==void 0?q:s.MIN_KEY,(ee=ee.upper)!==null&&ee!==void 0?ee:s.MAX_KEY)]},K={get:function(j){return[$,new vn(j.key)]},getMany:function(j){return[$,new vn().addKeys(j.keys)]},count:O,query:O,openCursor:O};return c(K).forEach(function(j){R[j]=function(q){var ee=$e.subscr,Y=!!ee,he=va($e,E)&&Iu(j,q)?q.obsSet={}:ee;if(Y){var ve=function(Ae){return Ae="idb://".concat(d,"/").concat(w,"/").concat(Ae),he[Ae]||(he[Ae]=new vn)},me=ve(""),we=ve(":dels"),ee=K[j](q),Y=ee[0],ee=ee[1];if((j==="query"&&Y.isPrimaryKey&&!q.values?we:ve(Y.name||"")).add(ee),!Y.isPrimaryKey){if(j!=="count"){var Oe=j==="query"&&Z&&q.values&&E.query(i(i({},q),{values:!1}));return E[j].apply(this,arguments).then(function(Ae){if(j==="query"){if(Z&&q.values)return Oe.then(function(nt){return nt=nt.result,me.addKeys(nt),Ae});var Te=q.values?Ae.result.map(H):Ae.result;(q.values?me:we).addKeys(Te)}else if(j==="openCursor"){var Pe=Ae,Fe=q.values;return Pe&&Object.create(Pe,{key:{get:function(){return we.addKey(Pe.primaryKey),Pe.key}},primaryKey:{get:function(){var nt=Pe.primaryKey;return we.addKey(nt),nt}},value:{get:function(){return Fe&&me.addKey(Pe.primaryKey),Pe.value}}})}return Ae})}we.add(g)}}return E[j].apply(this,arguments)}}),R}})}};function Cn(s,d,g){if(g.numFailures===0)return d;if(d.type==="deleteRange")return null;var w=d.keys?d.keys.length:"values"in d&&d.values?d.values.length:1;return g.numFailures===w?null:(d=i({},d),f(d.keys)&&(d.keys=d.keys.filter(function(E,A){return!(A in g.failures)})),"values"in d&&f(d.values)&&(d.values=d.values.filter(function(E,A){return!(A in g.failures)})),d)}function Eo(s,d){return g=s,((w=d).lower===void 0||(w.lowerOpen?0<st(g,w.lower):0<=st(g,w.lower)))&&(s=s,(d=d).upper===void 0||(d.upperOpen?st(s,d.upper)<0:st(s,d.upper)<=0));var g,w}function Li(s,d,K,w,E,A){if(!K||K.length===0)return s;var $=d.query.index,H=$.multiEntry,Z=d.query.range,I=w.schema.primaryKey.extractKey,R=$.extractKey,O=($.lowLevelIndex||$).extractKey,K=K.reduce(function(j,q){var ee=j,Y=[];if(q.type==="add"||q.type==="put")for(var he=new vn,ve=q.values.length-1;0<=ve;--ve){var me,we=q.values[ve],Oe=I(we);he.hasKey(Oe)||(me=R(we),(H&&f(me)?me.some(function(Pe){return Eo(Pe,Z)}):Eo(me,Z))&&(he.addKey(Oe),Y.push(we)))}switch(q.type){case"add":var De=new vn().addKeys(d.values?j.map(function(Fe){return I(Fe)}):j),ee=j.concat(d.values?Y.filter(function(Fe){return Fe=I(Fe),!De.hasKey(Fe)&&(De.addKey(Fe),!0)}):Y.map(function(Fe){return I(Fe)}).filter(function(Fe){return!De.hasKey(Fe)&&(De.addKey(Fe),!0)}));break;case"put":var Ie=new vn().addKeys(q.values.map(function(Fe){return I(Fe)}));ee=j.filter(function(Fe){return!Ie.hasKey(d.values?I(Fe):Fe)}).concat(d.values?Y:Y.map(function(Fe){return I(Fe)}));break;case"delete":var Ae=new vn().addKeys(q.keys);ee=j.filter(function(Fe){return!Ae.hasKey(d.values?I(Fe):Fe)});break;case"deleteRange":var Te=q.range;ee=j.filter(function(Fe){return!Eo(I(Fe),Te)})}return ee},s);return K===s?s:(K.sort(function(j,q){return st(O(j),O(q))||st(I(j),I(q))}),d.limit&&d.limit<1/0&&(K.length>d.limit?K.length=d.limit:s.length===d.limit&&K.length<d.limit&&(E.dirty=!0)),A?Object.freeze(K):K)}function hs(s,d){return st(s.lower,d.lower)===0&&st(s.upper,d.upper)===0&&!!s.lowerOpen==!!d.lowerOpen&&!!s.upperOpen==!!d.upperOpen}function Ou(s,d){return function(g,w,E,A){if(g===void 0)return w!==void 0?-1:0;if(w===void 0)return 1;if((w=st(g,w))===0){if(E&&A)return 0;if(E)return 1;if(A)return-1}return w}(s.lower,d.lower,s.lowerOpen,d.lowerOpen)<=0&&0<=function(g,w,E,A){if(g===void 0)return w!==void 0?1:0;if(w===void 0)return-1;if((w=st(g,w))===0){if(E&&A)return 0;if(E)return-1;if(A)return 1}return w}(s.upper,d.upper,s.upperOpen,d.upperOpen)}function Dl(s,d,g,w){s.subscribers.add(g),w.addEventListener("abort",function(){var E,A;s.subscribers.delete(g),s.subscribers.size===0&&(E=s,A=d,setTimeout(function(){E.subscribers.size===0&&oe(A,E)},3e3))})}var Pl={stack:"dbcore",level:0,name:"Cache",create:function(s){var d=s.schema.name;return i(i({},s),{transaction:function(g,w,E){var A,$,H=s.transaction(g,w,E);return w==="readwrite"&&($=(A=new AbortController).signal,E=function(Z){return function(){if(A.abort(),w==="readwrite"){for(var I=new Set,R=0,O=g;R<O.length;R++){var K=O[R],j=Ir["idb://".concat(d,"/").concat(K)];if(j){var q=s.table(K),ee=j.optimisticOps.filter(function(Fe){return Fe.trans===H});if(H._explicit&&Z&&H.mutatedParts)for(var Y=0,he=Object.values(j.queries.query);Y<he.length;Y++)for(var ve=0,me=(De=he[Y]).slice();ve<me.length;ve++)us((Ie=me[ve]).obsSet,H.mutatedParts)&&(oe(De,Ie),Ie.subscribers.forEach(function(Fe){return I.add(Fe)}));else if(0<ee.length){j.optimisticOps=j.optimisticOps.filter(function(Fe){return Fe.trans!==H});for(var we=0,Oe=Object.values(j.queries.query);we<Oe.length;we++)for(var De,Ie,Ae,Te=0,Pe=(De=Oe[we]).slice();Te<Pe.length;Te++)(Ie=Pe[Te]).res!=null&&H.mutatedParts&&(Z&&!Ie.dirty?(Ae=Object.isFrozen(Ie.res),Ae=Li(Ie.res,Ie.req,ee,q,Ie,Ae),Ie.dirty?(oe(De,Ie),Ie.subscribers.forEach(function(Fe){return I.add(Fe)})):Ae!==Ie.res&&(Ie.res=Ae,Ie.promise=fe.resolve({result:Ae}))):(Ie.dirty&&oe(De,Ie),Ie.subscribers.forEach(function(Fe){return I.add(Fe)})))}}}I.forEach(function(Fe){return Fe()})}}},H.addEventListener("abort",E(!1),{signal:$}),H.addEventListener("error",E(!1),{signal:$}),H.addEventListener("complete",E(!0),{signal:$})),H},table:function(g){var w=s.table(g),E=w.schema.primaryKey;return i(i({},w),{mutate:function(A){var $=$e.trans;if(E.outbound||$.db._options.cache==="disabled"||$.explicit||$.idbtrans.mode!=="readwrite")return w.mutate(A);var H=Ir["idb://".concat(d,"/").concat(g)];return H?($=w.mutate(A),A.type!=="add"&&A.type!=="put"||!(50<=A.values.length||_o(E,A).some(function(Z){return Z==null}))?(H.optimisticOps.push(A),A.mutatedParts&&ma(A.mutatedParts),$.then(function(Z){0<Z.numFailures&&(oe(H.optimisticOps,A),(Z=Cn(0,A,Z))&&H.optimisticOps.push(Z),A.mutatedParts&&ma(A.mutatedParts))}),$.catch(function(){oe(H.optimisticOps,A),A.mutatedParts&&ma(A.mutatedParts)})):$.then(function(Z){var I=Cn(0,i(i({},A),{values:A.values.map(function(R,O){var K;return Z.failures[O]?R:(R=(K=E.keyPath)!==null&&K!==void 0&&K.includes(".")?ye(R):i({},R),z(R,E.keyPath,Z.results[O]),R)})}),Z);H.optimisticOps.push(I),queueMicrotask(function(){return A.mutatedParts&&ma(A.mutatedParts)})}),$):w.mutate(A)},query:function(A){if(!va($e,w)||!Iu("query",A))return w.query(A);var $=((I=$e.trans)===null||I===void 0?void 0:I.db._options.cache)==="immutable",O=$e,H=O.requery,Z=O.signal,I=function(q,ee,Y,he){var ve=Ir["idb://".concat(q,"/").concat(ee)];if(!ve)return[];if(!(ee=ve.queries[Y]))return[null,!1,ve,null];var me=ee[(he.query?he.query.index.name:null)||""];if(!me)return[null,!1,ve,null];switch(Y){case"query":var we=me.find(function(Oe){return Oe.req.limit===he.limit&&Oe.req.values===he.values&&hs(Oe.req.query.range,he.query.range)});return we?[we,!0,ve,me]:[me.find(function(Oe){return("limit"in Oe.req?Oe.req.limit:1/0)>=he.limit&&(!he.values||Oe.req.values)&&Ou(Oe.req.query.range,he.query.range)}),!1,ve,me];case"count":return we=me.find(function(Oe){return hs(Oe.req.query.range,he.query.range)}),[we,!!we,ve,me]}}(d,g,"query",A),R=I[0],O=I[1],K=I[2],j=I[3];return R&&O?R.obsSet=A.obsSet:(O=w.query(A).then(function(q){var ee=q.result;if(R&&(R.res=ee),$){for(var Y=0,he=ee.length;Y<he;++Y)Object.freeze(ee[Y]);Object.freeze(ee)}else q.result=ye(ee);return q}).catch(function(q){return j&&R&&oe(j,R),Promise.reject(q)}),R={obsSet:A.obsSet,promise:O,subscribers:new Set,type:"query",req:A,dirty:!1},j?j.push(R):(j=[R],(K=K||(Ir["idb://".concat(d,"/").concat(g)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[A.query.index.name||""]=j)),Dl(R,j,H,Z),R.promise.then(function(q){return{result:Li(q.result,A,K==null?void 0:K.optimisticOps,w,R,$)}})}})}})}};function ya(s,d){return new Proxy(s,{get:function(g,w,E){return w==="db"?d:Reflect.get(g,w,E)}})}var Cr=(Xt.prototype.version=function(s){if(isNaN(s)||s<.1)throw new Se.Type("Given version is not a positive number");if(s=Math.round(10*s)/10,this.idbdb||this._state.isBeingOpened)throw new Se.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,s);var d=this._versions,g=d.filter(function(w){return w._cfg.version===s})[0];return g||(g=new this.Version(s),d.push(g),d.sort(Al),g.stores({}),this._state.autoSchema=!1,g)},Xt.prototype._whenReady=function(s){var d=this;return this.idbdb&&(this._state.openComplete||$e.letThrough||this._vip)?s():new fe(function(g,w){if(d._state.openComplete)return w(new Se.DatabaseClosed(d._state.dbOpenError));if(!d._state.isBeingOpened){if(!d._state.autoOpen)return void w(new Se.DatabaseClosed);d.open().catch(He)}d._state.dbReadyPromise.then(g,w)}).then(s)},Xt.prototype.use=function(s){var d=s.stack,g=s.create,w=s.level,E=s.name;return E&&this.unuse({stack:d,name:E}),s=this._middlewares[d]||(this._middlewares[d]=[]),s.push({stack:d,create:g,level:w??10,name:E}),s.sort(function(A,$){return A.level-$.level}),this},Xt.prototype.unuse=function(s){var d=s.stack,g=s.name,w=s.create;return d&&this._middlewares[d]&&(this._middlewares[d]=this._middlewares[d].filter(function(E){return w?E.create!==w:!!g&&E.name!==g})),this},Xt.prototype.open=function(){var s=this;return qt(Lt,function(){return Mi(s)})},Xt.prototype._close=function(){var s=this._state,d=zr.indexOf(this);if(0<=d&&zr.splice(d,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}s.isBeingOpened||(s.dbReadyPromise=new fe(function(g){s.dbReadyResolve=g}),s.openCanceller=new fe(function(g,w){s.cancelOpen=w}))},Xt.prototype.close=function(g){var d=(g===void 0?{disableAutoOpen:!0}:g).disableAutoOpen,g=this._state;d?(g.isBeingOpened&&g.cancelOpen(new Se.DatabaseClosed),this._close(),g.autoOpen=!1,g.dbOpenError=new Se.DatabaseClosed):(this._close(),g.autoOpen=this._options.autoOpen||g.isBeingOpened,g.openComplete=!1,g.dbOpenError=null)},Xt.prototype.delete=function(s){var d=this;s===void 0&&(s={disableAutoOpen:!0});var g=0<arguments.length&&typeof arguments[0]!="object",w=this._state;return new fe(function(E,A){function $(){d.close(s);var H=d._deps.indexedDB.deleteDatabase(d.name);H.onsuccess=Et(function(){var Z,I,R;Z=d._deps,I=d.name,R=Z.indexedDB,Z=Z.IDBKeyRange,bn(R)||I===ki||pa(R,Z).delete(I).catch(He),E()}),H.onerror=Jn(A),H.onblocked=d._fireOnBlocked}if(g)throw new Se.InvalidArgument("Invalid closeOptions argument to db.delete()");w.isBeingOpened?w.dbReadyPromise.then($):$()})},Xt.prototype.backendDB=function(){return this.idbdb},Xt.prototype.isOpen=function(){return this.idbdb!==null},Xt.prototype.hasBeenClosed=function(){var s=this._state.dbOpenError;return s&&s.name==="DatabaseClosed"},Xt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Xt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Xt.prototype,"tables",{get:function(){var s=this;return c(this._allTables).map(function(d){return s._allTables[d]})},enumerable:!1,configurable:!0}),Xt.prototype.transaction=function(){var s=(function(d,g,w){var E=arguments.length;if(E<2)throw new Se.InvalidArgument("Too few arguments");for(var A=new Array(E-1);--E;)A[E-1]=arguments[E];return w=A.pop(),[d,J(A),w]}).apply(this,arguments);return this._transaction.apply(this,s)},Xt.prototype._transaction=function(s,d,g){var w=this,E=$e.trans;E&&E.db===this&&s.indexOf("!")===-1||(E=null);var A,$,H=s.indexOf("?")!==-1;s=s.replace("!","").replace("?","");try{if($=d.map(function(I){if(I=I instanceof w.Table?I.name:I,typeof I!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return I}),s=="r"||s===oo)A=oo;else{if(s!="rw"&&s!=Ii)throw new Se.InvalidArgument("Invalid transaction mode: "+s);A=Ii}if(E){if(E.mode===oo&&A===Ii){if(!H)throw new Se.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");E=null}E&&$.forEach(function(I){if(E&&E.storeNames.indexOf(I)===-1){if(!H)throw new Se.SubTransaction("Table "+I+" not included in parent transaction.");E=null}}),H&&E&&!E.active&&(E=null)}}catch(I){return E?E._promise(null,function(R,O){O(I)}):Dt(I)}var Z=(function I(R,O,K,j,q){return fe.resolve().then(function(){var ee=$e.transless||$e,Y=R._createTransaction(O,K,R._dbSchema,j);if(Y.explicit=!0,ee={trans:Y,transless:ee},j)Y.idbtrans=j.idbtrans;else try{Y.create(),Y.idbtrans._explicit=!0,R._state.PR1398_maxLoop=3}catch(me){return me.name===Ye.InvalidState&&R.isOpen()&&0<--R._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),R.close({disableAutoOpen:!1}),R.open().then(function(){return I(R,O,K,null,q)})):Dt(me)}var he,ve=ge(q);return ve&&Gn(),ee=fe.follow(function(){var me;(he=q.call(Y,Y))&&(ve?(me=Pn.bind(null,null),he.then(me,me)):typeof he.next=="function"&&typeof he.throw=="function"&&(he=fs(he)))},ee),(he&&typeof he.then=="function"?fe.resolve(he).then(function(me){return Y.active?me:Dt(new Se.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):ee.then(function(){return he})).then(function(me){return j&&Y._resolve(),Y._completion.then(function(){return me})}).catch(function(me){return Y._reject(me),Dt(me)})})}).bind(null,this,A,$,E,g);return E?E._promise(A,Z,"lock"):$e.trans?qt($e.transless,function(){return w._whenReady(Z)}):this._whenReady(Z)},Xt.prototype.table=function(s){if(!y(this._allTables,s))throw new Se.InvalidTable("Table ".concat(s," does not exist"));return this._allTables[s]},Xt);function Xt(s,d){var g=this;this._middlewares={},this.verno=0;var w=Xt.dependencies;this._options=d=i({addons:Xt.addons,autoOpen:!0,indexedDB:w.indexedDB,IDBKeyRange:w.IDBKeyRange,cache:"cloned"},d),this._deps={indexedDB:d.indexedDB,IDBKeyRange:d.IDBKeyRange},w=d.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var E,A,$,H,Z,I={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:He,dbReadyPromise:null,cancelOpen:He,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:d.autoOpen};I.dbReadyPromise=new fe(function(O){I.dbReadyResolve=O}),I.openCanceller=new fe(function(O,K){I.cancelOpen=K}),this._state=I,this.name=s,this.on=ii(this,"populate","blocked","versionchange","close",{ready:[jt,He]}),this.on.ready.subscribe=te(this.on.ready.subscribe,function(O){return function(K,j){Xt.vip(function(){var q,ee=g._state;ee.openComplete?(ee.dbOpenError||fe.resolve().then(K),j&&O(K)):ee.onReadyBeingFired?(ee.onReadyBeingFired.push(K),j&&O(K)):(O(K),q=g,j||O(function Y(){q.on.ready.unsubscribe(K),q.on.ready.unsubscribe(Y)}))})}}),this.Collection=(E=this,so(es.prototype,function(he,Y){this.db=E;var j=ao,q=null;if(Y)try{j=Y()}catch(ve){q=ve}var ee=he._ctx,Y=ee.table,he=Y.hook.reading.fire;this._ctx={table:Y,index:ee.index,isPrimKey:!ee.index||Y.schema.primKey.keyPath&&ee.index===Y.schema.primKey.name,range:j,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:q,or:ee.or,valueMapper:he!==Tt?he:null}})),this.Table=(A=this,so(Qa.prototype,function(O,K,j){this.db=A,this._tx=j,this.name=O,this.schema=K,this.hook=A._allTables[O]?A._allTables[O].hook:ii(null,{creating:[St,He],reading:[Xe,Tt],updating:[je,He],deleting:[et,He]})})),this.Transaction=($=this,so(ns.prototype,function(O,K,j,q,ee){var Y=this;this.db=$,this.mode=O,this.storeNames=K,this.schema=j,this.chromeTransactionDurability=q,this.idbtrans=null,this.on=ii(this,"complete","error","abort"),this.parent=ee||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new fe(function(he,ve){Y._resolve=he,Y._reject=ve}),this._completion.then(function(){Y.active=!1,Y.on.complete.fire()},function(he){var ve=Y.active;return Y.active=!1,Y.on.error.fire(he),Y.parent?Y.parent._reject(he):ve&&Y.idbtrans&&Y.idbtrans.abort(),Dt(he)})})),this.Version=(H=this,so(Su.prototype,function(O){this.db=H,this._cfg={version:O,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(Z=this,so(_u.prototype,function(O,K,j){if(this.db=Z,this._ctx={table:O,index:K===":id"?null:K,or:j},this._cmp=this._ascending=st,this._descending=function(q,ee){return st(ee,q)},this._max=function(q,ee){return 0<st(q,ee)?q:ee},this._min=function(q,ee){return st(q,ee)<0?q:ee},this._IDBKeyRange=Z._deps.IDBKeyRange,!this._IDBKeyRange)throw new Se.MissingAPI})),this.on("versionchange",function(O){0<O.newVersion?console.warn("Another connection wants to upgrade database '".concat(g.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(g.name,"'. Closing db now to resume the delete request.")),g.close({disableAutoOpen:!1})}),this.on("blocked",function(O){!O.newVersion||O.newVersion<O.oldVersion?console.warn("Dexie.delete('".concat(g.name,"') was blocked")):console.warn("Upgrade '".concat(g.name,"' blocked by other connection holding version ").concat(O.oldVersion/10))}),this._maxKey=ho(d.IDBKeyRange),this._createTransaction=function(O,K,j,q){return new g.Transaction(O,K,j,g._options.chromeTransactionDurability,q)},this._fireOnBlocked=function(O){g.on("blocked").fire(O),zr.filter(function(K){return K.name===g.name&&K!==g&&!K._state.vcFired}).map(function(K){return K.on("versionchange").fire(O)})},this.use(ds),this.use(Pl),this.use(Cu),this.use(Tu),this.use(Nu);var R=new Proxy(this,{get:function(O,K,j){if(K==="_vip")return!0;if(K==="table")return function(ee){return ya(g.table(ee),R)};var q=Reflect.get(O,K,j);return q instanceof Qa?ya(q,R):K==="tables"?q.map(function(ee){return ya(ee,R)}):K==="_createTransaction"?function(){return ya(q.apply(this,arguments),R)}:q}});this.vip=R,w.forEach(function(O){return O(g)})}var Or,Hn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Rl=(So.prototype.subscribe=function(s,d,g){return this._subscribe(s&&typeof s!="function"?s:{next:s,error:d,complete:g})},So.prototype[Hn]=function(){return this},So);function So(s){this._subscribe=s}try{Or={indexedDB:u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.msIndexedDB,IDBKeyRange:u.IDBKeyRange||u.webkitIDBKeyRange}}catch{Or={indexedDB:null,IDBKeyRange:null}}function ps(s){var d,g=!1,w=new Rl(function(E){var A=ge(s),$,H=!1,Z={},I={},R={get closed(){return H},unsubscribe:function(){H||(H=!0,$&&$.abort(),O&&Yr.storagemutated.unsubscribe(j))}};E.start&&E.start(R);var O=!1,K=function(){return Er(q)},j=function(ee){Ri(Z,ee),us(I,Z)&&K()},q=function(){var ee,Y,he;!H&&Or.indexedDB&&(Z={},ee={},$&&$.abort(),$=new AbortController,he=function(ve){var me=$t();try{A&&Gn();var we=Nn(s,ve);return we=A?we.finally(Pn):we}finally{me&&jn()}}(Y={subscr:ee,signal:$.signal,requery:K,querier:s,trans:null}),Promise.resolve(he).then(function(ve){g=!0,d=ve,H||Y.signal.aborted||(Z={},function(me){for(var we in me)if(y(me,we))return;return 1}(I=ee)||O||(Yr(fo,j),O=!0),Er(function(){return!H&&E.next&&E.next(ve)}))},function(ve){g=!1,["DatabaseClosedError","AbortError"].includes(ve==null?void 0:ve.name)||H||Er(function(){H||E.error&&E.error(ve)})}))};return setTimeout(K,0),R});return w.hasValue=function(){return g},w.getValue=function(){return d},w}var On=Cr;function $i(s){var d=Vr;try{Vr=!0,Yr.storagemutated.fire(s),ga(s,!0)}finally{Vr=d}}x(On,i(i({},xt),{delete:function(s){return new On(s,{addons:[]}).delete()},exists:function(s){return new On(s,{addons:[]}).open().then(function(d){return d.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(s){try{return d=On.dependencies,g=d.indexedDB,d=d.IDBKeyRange,(bn(g)?Promise.resolve(g.databases()).then(function(w){return w.map(function(E){return E.name}).filter(function(E){return E!==ki})}):pa(g,d).toCollection().primaryKeys()).then(s)}catch{return Dt(new Se.MissingAPI)}var d,g},defineClass:function(){return function(s){h(this,s)}},ignoreTransaction:function(s){return $e.trans?qt($e.transless,s):s()},vip:ss,async:function(s){return function(){try{var d=fs(s.apply(this,arguments));return d&&typeof d.then=="function"?d:fe.resolve(d)}catch(g){return Dt(g)}}},spawn:function(s,d,g){try{var w=fs(s.apply(g,d||[]));return w&&typeof w.then=="function"?w:fe.resolve(w)}catch(E){return Dt(E)}},currentTransaction:{get:function(){return $e.trans||null}},waitFor:function(s,d){return d=fe.resolve(typeof s=="function"?On.ignoreTransaction(s):s).timeout(d||6e4),$e.trans?$e.trans.waitFor(d):d},Promise:fe,debug:{get:function(){return bt},set:function(s){sn(s)}},derive:S,extend:h,props:x,override:te,Events:ii,on:Yr,liveQuery:ps,extendObservabilitySet:Ri,getByKeyPath:ce,setByKeyPath:z,delByKeyPath:function(s,d){typeof d=="string"?z(s,d,void 0):"length"in d&&[].map.call(d,function(g){z(s,g,void 0)})},shallowClone:Q,deepClone:ye,getObjectDiff:bo,cmp:st,asap:ue,minKey:-1/0,addons:[],connections:zr,errnames:Ye,dependencies:Or,cache:Ir,semVer:"4.0.10",version:"4.0.10".split(".").map(function(s){return parseInt(s)}).reduce(function(s,d,g){return s+d/Math.pow(10,2*g)})})),On.maxKey=ho(On.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Yr(fo,function(s){Vr||(s=new CustomEvent(ts,{detail:s}),Vr=!0,dispatchEvent(s),Vr=!1)}),addEventListener(ts,function(s){s=s.detail,Vr||$i(s)}));var Wi,Vr=!1,Au=function(){};return typeof BroadcastChannel<"u"&&((Au=function(){(Wi=new BroadcastChannel(ts)).onmessage=function(s){return s.data&&$i(s.data)}})(),typeof Wi.unref=="function"&&Wi.unref(),Yr(fo,function(s){Vr||Wi.postMessage(s)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(s){if(!Cr.disableBfCache&&s.persisted){bt&&console.debug("Dexie: handling persisted pagehide"),Wi!=null&&Wi.close();for(var d=0,g=zr;d<g.length;d++)g[d].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(s){!Cr.disableBfCache&&s.persisted&&(bt&&console.debug("Dexie: handling persisted pageshow"),Au(),$i({all:new vn(-1/0,[[]])}))})),fe.rejectionMapper=function(s,d){return!s||s instanceof ke||s instanceof TypeError||s instanceof SyntaxError||!s.name||!rt[s.name]?s:(d=new rt[s.name](d||s.message,s),"stack"in s&&N(d,"stack",{get:function(){return this.inner.stack}}),d)},sn(bt),i(Cr,Object.freeze({__proto__:null,Dexie:Cr,liveQuery:ps,Entity:ra,cmp:st,PropModSymbol:Sr,PropModification:Ai,replacePrefix:function(s,d){return new Ai({replacePrefix:[s,d]})},add:function(s){return new Ai({add:s})},remove:function(s){return new Ai({remove:s})},default:Cr,RangeSet:vn,mergeRanges:Bn,rangesOverlap:yo}),{default:Cr}),Cr})})(Zv);var eA=Zv.exports;const bd=eh(eA),Sg=Symbol.for("Dexie"),_d=globalThis[Sg]||(globalThis[Sg]=bd);if(bd.semVer!==_d.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${bd.semVer} and ${_d.semVer}`);class tA extends _d{constructor(){super("TemporalDB"),this.version(3).stores({workflows:"[workflowId+runId],[parentWorkflowId+parentWorkflowRunId], parentWorkflowId, parentWorkflowRunId",activities:"[activityId+workflowId+workflowRunId],[workflowId+workflowRunId], workflowId, workflowRunId",settings:"id"})}}const ti=new tA;async function Tg(e){try{await ti.workflows.put(e),console.debug("Workflow added successfully:",e)}catch(t){console.error("Failed to add workflow:",t,e)}}async function rl(e,t){if(t)try{const n=await ti.workflows.get({workflowId:e,runId:t});return console.debug("Retrieved Workflow:",n),n}catch(n){console.error("Failed to retrieve workflow:",n);return}}async function nA(e,t){try{await ti.workflows.where({workflowId:e,runId:t}).delete(),console.debug(`Deleted Workflow with ID: ${e}`)}catch(n){console.error("Failed to delete workflow:",n)}}async function rA(e){try{await ti.activities.put(e),console.debug("Activity added successfully:",e)}catch(t){console.error("Failed to add activity:",t,e)}}async function iA(e,t,n){try{const i=await ti.activities.get({activityId:t,workflowId:e,workflowRunId:n});return console.debug("Retrieved Activity:",i),i}catch(i){console.error("Failed to retrieve activity:",i);return}}async function oA(e,t,n){try{await ti.activities.where({activityId:t,workflowId:e,workflowRunId:n}).delete(),console.debug(`Deleted Activity with ID: ${t}`)}catch(i){console.error("Failed to delete activity:",i)}}async function Qv(e,t){try{return await ti.activities.where(["workflowId","workflowRunId"]).equals([e,t]).toArray()}catch(n){return console.error("Failed to retrieve activities by workflowId:",n),[]}}async function Jv(e,t){try{return await ti.workflows.where(["parentWorkflowId","parentWorkflowRunId"]).equals([e,t]).toArray()}catch(n){return console.error("Failed to retrieve child workflows:",n),[]}}async function Ed(e,t){const n=await rl(e,t);if(!n)throw new Error(`Root workflow not found for ${e} ${t}`);const i=await Jv(e,t),a=await Qv(e,t);return[n,...i,...a]}async function ru(e){try{const t=await ti.settings.get(e);return t==null?void 0:t.value}catch(t){console.error("Failed to retrieve setting:",t);return}}async function Sd(e,t){try{await ti.settings.put({id:e,value:t}),console.debug(`Setting ${e} updated successfully:`,t)}catch(n){console.error("Failed to update setting:",n)}}var $c=function(){return $c=Object.assign||function(t){for(var n,i=1,a=arguments.length;i<a;i++){n=arguments[i];for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&(t[u]=n[u])}return t},$c.apply(this,arguments)};function aA(){var e=k.useRef(!1),t=k.useCallback(function(){return e.current},[]);return k.useEffect(function(){return e.current=!0,function(){e.current=!1}},[]),t}function sA(e,t,n){t===void 0&&(t=[]),n===void 0&&(n={loading:!1});var i=k.useRef(0),a=aA(),u=k.useState(n),c=u[0],f=u[1],h=k.useCallback(function(){for(var p=[],m=0;m<arguments.length;m++)p[m]=arguments[m];var y=++i.current;return c.loading||f(function(x){return $c($c({},x),{loading:!0})}),e.apply(void 0,p).then(function(x){return a()&&y===i.current&&f({value:x,loading:!1}),x},function(x){return a()&&y===i.current&&f({error:x,loading:!1}),x})},t);return[c,h]}function ey(e,t){t===void 0&&(t=[]);var n=sA(e,t,{loading:!0}),i=n[0],a=n[1];return k.useEffect(function(){a()},[a]),i}const uA=e=>ey(async()=>{const n=await rl(e.workflowId,e.workflowRunId);if(!n)throw new Error("Workflow data not found");return n},[e]),cA=e=>ey(async()=>{const n=await iA(e.workflowId,e.activityId,e.workflowRunId);if(!n)throw new Error("Activity data not found");return n},[e]);var an=(e=>(e.WORKFLOW_EXECUTION_STARTED="EVENT_TYPE_WORKFLOW_EXECUTION_STARTED",e.WORKFLOW_TASK_SCHEDULED="EVENT_TYPE_WORKFLOW_TASK_SCHEDULED",e.WORKFLOW_TASK_STARTED="EVENT_TYPE_WORKFLOW_TASK_STARTED",e.WORKFLOW_TASK_COMPLETED="EVENT_TYPE_WORKFLOW_TASK_COMPLETED",e.ACTIVITY_TASK_SCHEDULED="EVENT_TYPE_ACTIVITY_TASK_SCHEDULED",e.ACTIVITY_TASK_STARTED="EVENT_TYPE_ACTIVITY_TASK_STARTED",e.ACTIVITY_TASK_COMPLETED="EVENT_TYPE_ACTIVITY_TASK_COMPLETED",e.ACTIVITY_TASK_FAILED="EVENT_TYPE_ACTIVITY_TASK_FAILED",e.ACTIVITY_TASK_TIMED_OUT="EVENT_TYPE_ACTIVITY_TASK_TIMED_OUT",e.ACTIVITY_TASK_CANCELED="EVENT_TYPE_ACTIVITY_TASK_CANCELED",e.WORKFLOW_EXECUTION_COMPLETED="EVENT_TYPE_WORKFLOW_EXECUTION_COMPLETED",e.WORKFLOW_EXECUTION_FAILED="EVENT_TYPE_WORKFLOW_EXECUTION_FAILED",e.WORKFLOW_EXECUTION_TIMED_OUT="EVENT_TYPE_WORKFLOW_EXECUTION_TIMED_OUT",e.WORKFLOW_EXECUTION_CANCELED="EVENT_TYPE_WORKFLOW_EXECUTION_CANCELED",e.WORKFLOW_EXECUTION_TERMINATED="EVENT_TYPE_WORKFLOW_EXECUTION_TERMINATED",e.START_CHILD_WORKFLOW_EXECUTION_INITIATED="EVENT_TYPE_START_CHILD_WORKFLOW_EXECUTION_INITIATED",e.CHILD_WORKFLOW_EXECUTION_STARTED="EVENT_TYPE_CHILD_WORKFLOW_EXECUTION_STARTED",e.CHILD_WORKFLOW_EXECUTION_COMPLETED="EVENT_TYPE_CHILD_WORKFLOW_EXECUTION_COMPLETED",e.START_CHILD_WORKFLOW_EXECUTION_FAILED="EVENT_TYPE_START_CHILD_WORKFLOW_EXECUTION_FAILED",e))(an||{});const Si=e=>e.type==="workflow"||e.type==="childWorkflow",ty=e=>e.type==="activity",Jo=e=>({workflowId:e.workflowId,workflowRunId:e.runId}),lA=e=>({workflowId:e.workflowId,workflowRunId:e.workflowRunId}),fA=e=>{if(!(!e.parentWorkflowId||!e.parentWorkflowRunId))return{workflowId:e.parentWorkflowId,workflowRunId:e.parentWorkflowRunId}},il=e=>({activityId:e.activityId,workflowId:e.workflowId,workflowRunId:e.workflowRunId}),dA=e=>Si(e)?fA(e):lA(e);function Bs(e){var n;if(!e||e.length===0)return;if(e.length===1)return(n=e[0])!=null&&n.data?atob(e[0].data):"null";const t=e.map(i=>i!=null&&i.data?atob(i.data):"null").filter(i=>i!==void 0);return t.length>0?`[${t.join(", ")}]`:void 0}async function Ng(e,t,n){var f,h,p,m,y,x,b;const i=[],a={},u={},c=hA(e,t,n);i.push(c);for(const N of e)switch(N.eventType){case an.WORKFLOW_EXECUTION_STARTED:{if(!c)throw console.error("Root workflow not found"),new Error("Root workflow not found");break}case an.WORKFLOW_EXECUTION_COMPLETED:case an.WORKFLOW_EXECUTION_FAILED:case an.WORKFLOW_EXECUTION_TIMED_OUT:case an.WORKFLOW_EXECUTION_CANCELED:case an.WORKFLOW_EXECUTION_TERMINATED:{const S=i[0];S&&(S.endTime=N.eventTime,S.relatedEventIds=S.relatedEventIds||[],S.relatedEventIds.push(N.eventId),S.status=kg(N.eventType)),N.eventType===an.WORKFLOW_EXECUTION_COMPLETED&&(S.result=Bs((h=(f=N.workflowExecutionCompletedEventAttributes)==null?void 0:f.result)==null?void 0:h.payloads)),N.eventType===an.WORKFLOW_EXECUTION_FAILED&&(S.result=JSON.stringify(N.workflowExecutionFailedEventAttributes)),N.eventType===an.WORKFLOW_EXECUTION_TERMINATED&&(S.result=JSON.stringify(N.workflowExecutionTerminatedEventAttributes));break}case an.ACTIVITY_TASK_SCHEDULED:{const S=N.activityTaskScheduledEventAttributes;if(S){const C={type:"activity",activityId:S.activityId,activityType:S.activityType.name,workflowId:c.workflowId,workflowRunId:c.runId,scheduleTime:N.eventTime,scheduleToCloseTimeout:S.scheduleToCloseTimeout,scheduleToStartTimeout:S.scheduleToStartTimeout,startToCloseTimeout:S.startToCloseTimeout,heartbeatTimeout:S.heartbeatTimeout,retryPolicy:S.retryPolicy,input:Bs((p=S.input)==null?void 0:p.payloads),status:"SCHEDULED",relatedEventIds:[N.eventId],workflowTaskCompletedEventId:S.workflowTaskCompletedEventId,taskId:N.taskId,sortEventTime:N.eventTime,sortEventId:N.eventId,taskQueue:S.taskQueue,startTime:""};u[N.eventId]=C,i.push(C)}break}case an.ACTIVITY_TASK_STARTED:{const S=N.activityTaskStartedEventAttributes;if(S){const C=u[S.scheduledEventId];C.status==="SCHEDULED"&&(C.status="STARTED"),C.startTime=N.eventTime,C.relatedEventIds=C.relatedEventIds||[],C.relatedEventIds.push(N.eventId),(m=N.activityTaskStartedEventAttributes)!=null&&m.lastFailure&&(C.lastFailure=JSON.stringify(N.activityTaskStartedEventAttributes.lastFailure))}break}case an.ACTIVITY_TASK_COMPLETED:{const S=N.activityTaskCompletedEventAttributes;if(S){const C=u[S.scheduledEventId];C&&(C.endTime=N.eventTime,C.status="COMPLETED",C.relatedEventIds=C.relatedEventIds||[],C.relatedEventIds.push(N.eventId),C.result=Bs((y=S.result)==null?void 0:y.payloads))}break}case an.ACTIVITY_TASK_FAILED:{const S=N.activityTaskFailedEventAttributes;if(S){const C=u[S.scheduledEventId];C&&(C.endTime=N.eventTime,C.status="FAILED",C.relatedEventIds=C.relatedEventIds||[],C.relatedEventIds.push(N.eventId),C.failure=JSON.stringify(S.failure))}break}case an.ACTIVITY_TASK_TIMED_OUT:{const S=N.activityTaskTimedOutEventAttributes;if(S){const C=u[S.scheduledEventId];C&&(C.endTime=N.eventTime,C.status="TIMED_OUT",C.relatedEventIds=C.relatedEventIds||[],C.relatedEventIds.push(N.eventId))}break}case an.ACTIVITY_TASK_CANCELED:{const S=N.activityTaskCanceledEventAttributes;if(S){const C=u[S.scheduledEventId];C&&(C.endTime=N.eventTime,C.status=kg(N.eventType),C.relatedEventIds=C.relatedEventIds||[],C.relatedEventIds.push(N.eventId))}break}case an.START_CHILD_WORKFLOW_EXECUTION_INITIATED:{const S=N.startChildWorkflowExecutionInitiatedEventAttributes;if(S){const C={type:"childWorkflow",workflowId:S.workflowId,startTime:N.eventTime,status:"INITIATED",parentWorkflowId:c.workflowId,parentWorkflowRunId:c.runId,runId:"",workflowType:(x=S.workflowType)==null?void 0:x.name,relatedEventIds:[N.eventId],workflowTaskCompletedEventId:S.workflowTaskCompletedEventId,namespace:S.namespace,taskQueue:S.taskQueue,workflowRunTimeout:S.workflowRunTimeout,workflowTaskTimeout:S.workflowTaskTimeout,workflowReusePolicy:S.workflowReusePolicy,header:S.header,memo:S.memo,searchAttributes:S.searchAttributes,taskId:N.taskId,sortEventTime:"",sortEventId:""};a[N.eventId]=C,i.push(C)}break}case an.CHILD_WORKFLOW_EXECUTION_STARTED:{const S=N.childWorkflowExecutionStartedEventAttributes;if(S&&S.workflowExecution){const C=a[S.initiatedEventId];C&&(C.startTime=N.eventTime,C.relatedEventIds=C.relatedEventIds||[],C.relatedEventIds.push(N.eventId),C.runId=S.workflowExecution.runId,C.status="RUNNING",C.sortEventTime=N.eventTime,C.sortEventId=N.eventId)}break}case an.CHILD_WORKFLOW_EXECUTION_COMPLETED:{const S=N.childWorkflowExecutionCompletedEventAttributes;if(S){const C=a[S.initiatedEventId];C&&(C.endTime=N.eventTime,C.status="COMPLETED",C.relatedEventIds=C.relatedEventIds||[],C.relatedEventIds.push(N.eventId),C.result=Bs((b=S.result)==null?void 0:b.payloads))}break}case an.START_CHILD_WORKFLOW_EXECUTION_FAILED:{const S=N.startChildWorkflowExecutionFailedEventAttributes;if(S){const C=a[S.initiatedEventId];C&&(S.cause==="START_CHILD_WORKFLOW_EXECUTION_FAILED_CAUSE_WORKFLOW_ALREADY_EXISTS"?(C.runId="",C.status="RUNNING"):S.cause==="WORKFLOW_ID_REUSE_POLICY_ALLOW_DUPLICATE_FAILED_ONLY"&&(C.status="INITIATED",C.runId=""))}break}}return i}function hA(e,t,n){var i,a,u;for(const c of e)if(c.eventType===an.WORKFLOW_EXECUTION_STARTED){const f=c.workflowExecutionStartedEventAttributes;if(f)return{type:"workflow",workflowId:f.workflowId,runId:n,workflowType:f.workflowType.name,startTime:c.eventTime,status:"RUNNING",relatedEventIds:[c.eventId],input:Bs((i=f.input)==null?void 0:i.payloads),header:f.header,attempts:f.attempt,searchAttributes:f.searchAttributes,memo:f.memo,taskQueue:f.taskQueue,namespace:t,parentWorkflowId:(a=f.parentWorkflowExecution)==null?void 0:a.workflowId,parentWorkflowRunId:(u=f.parentWorkflowExecution)==null?void 0:u.runId,parentWorkflowNamespace:f.parentWorkflowNamespace,originalExecutionRunId:f.originalExecutionRunId,firstExecutionRunId:f.firstExecutionRunId,workflowTaskTimeout:f.workflowTaskTimeout,workflowRunTimeout:f.workflowRunTimeout,taskId:c.taskId,sortEventTime:c.eventTime,sortEventId:c.eventId,workflowTaskCompletedEventId:""}}throw new Error("Root workflow not found")}function kg(e){switch(e){case"EVENT_TYPE_WORKFLOW_EXECUTION_STARTED":case"EVENT_TYPE_CHILD_WORKFLOW_EXECUTION_STARTED":case"EVENT_TYPE_ACTIVITY_TASK_STARTED":return"RUNNING";case"EVENT_TYPE_WORKFLOW_EXECUTION_COMPLETED":case"EVENT_TYPE_CHILD_WORKFLOW_EXECUTION_COMPLETED":case"EVENT_TYPE_ACTIVITY_TASK_COMPLETED":return"COMPLETED";case"EVENT_TYPE_WORKFLOW_EXECUTION_FAILED":case"EVENT_TYPE_CHILD_WORKFLOW_EXECUTION_FAILED":case"EVENT_TYPE_ACTIVITY_TASK_FAILED":return"FAILED";case"EVENT_TYPE_WORKFLOW_EXECUTION_TIMED_OUT":case"EVENT_TYPE_CHILD_WORKFLOW_EXECUTION_TIMED_OUT":case"EVENT_TYPE_ACTIVITY_TASK_TIMED_OUT":return"TIMED_OUT";case"EVENT_TYPE_WORKFLOW_EXECUTION_CANCELED":case"EVENT_TYPE_CHILD_WORKFLOW_EXECUTION_CANCELED":case"EVENT_TYPE_ACTIVITY_TASK_CANCELED":return"CANCELED";case"EVENT_TYPE_WORKFLOW_EXECUTION_TERMINATED":case"EVENT_TYPE_CHILD_WORKFLOW_EXECUTION_TERMINATED":return"TERMINATED";case"EVENT_TYPE_ACTIVITY_TASK_SCHEDULED":return"SCHEDULED";default:return e}}function Ig(e){switch(e){case"WORKFLOW_EXECUTION_STATUS_RUNNING":return"RUNNING";case"WORKFLOW_EXECUTION_STATUS_COMPLETED":return"COMPLETED";case"WORKFLOW_EXECUTION_STATUS_FAILED":return"FAILED";case"WORKFLOW_EXECUTION_STATUS_TIMED_OUT":return"TIMED_OUT";case"WORKFLOW_EXECUTION_STATUS_CANCELED":return"CANCELED";case"WORKFLOW_EXECUTION_STATUS_TERMINATED":return"TERMINATED";default:return e}}const pA=e=>({id:e.id,data:e,type:"workflowNode",position:{x:0,y:0}}),mA=e=>({id:e.id,data:e,type:"activityNode",position:{x:0,y:0}}),Cg=e=>{if(e.type==="workflow")return pA(e);if(e.type==="activity")return mA(e);if(e.type==="batch")return{id:e.id,data:e,type:"batchNode",position:{x:0,y:0}};throw new Error("Invalid node data type")},jr=e=>`${e.workflowId}$$${e.workflowRunId}`,ny=e=>{const[t,n]=e.split("$$");return{workflowId:t,workflowRunId:n}},du=e=>`${e.workflowId}$$${e.workflowRunId}$$${e.activityId}`,gA=e=>{const[t,n,i]=e.split("$$");return{workflowId:t,workflowRunId:n,activityId:i}},ry=e=>{if(e.__isBatch){const t=e,i=t.__batchItems.map(a=>Si(a)?Jo(a):il(a));return{id:t.__originalId+"_batch",type:"batch",referencedBatches:i}}if(Si(e))return vA(e);if(ty(e))return yA(e);throw new Error("Invalid chronological item type")},vA=e=>({type:"workflow",id:jr(Jo(e))}),yA=e=>({type:"activity",id:du(il(e))}),Hs=e=>Si(e)?jr(Jo(e)):du(il(e));function iy(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=iy(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function yr(){for(var e,t,n=0,i="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=iy(e))&&(i&&(i+=" "),i+=t);return i}const vh=(e,t)=>{if(!e||!t)return null;const n=new Date(e),a=new Date(t).getTime()-n.getTime(),u=Math.floor(a/1e3),c=Math.floor(u/60),f=Math.floor(c/60),h=[];return f>0&&h.push(`${f}h`),c%60>0&&h.push(`${c%60}m`),u%60>0&&h.push(`${u%60}s`),a%1e3>0&&h.push(`${a%1e3}ms`),h.join(" ")},jf=e=>{switch(e.toLowerCase()){case"completed":return"border-green-500";case"running":return"border-blue-500";case"retrying":return"border-orange-600";case"pending":return"border-purple-600";case"terminated":return"border-yellow-500";case"failed":return"border-red-600";default:return"border-gray-500"}},wA=e=>{switch(e.toLowerCase()){case"completed":return"text-green-600 bg-green-50";case"retrying":return"text-orange-700 bg-orange-100";case"running":return"text-blue-600 bg-blue-50";case"pending":return"text-purple-700 bg-purple-100";case"terminated":return"text-yellow-600 bg-yellow-50";case"failed":return"text-red-700 bg-red-100";default:return"text-gray-600 bg-gray-50"}},yh=k.memo(({id:e,onShowNodeData:t,onBatchAction:n,onClick:i,IconComponent:a,TitleComponent:u,TypeLabelComponent:c,ExtraActionsComponent:f,status:h,startTime:p,endTime:m,taskQueue:y,count:x})=>{const b=x&&x>1;return _.jsxs("div",{className:"relative min-w-[450px]",children:[_.jsx(Gi,{type:"source",position:ze.Right,id:`${e}-right`,style:{top:"50%",transform:"translateY(-50%)"}}),_.jsx(Gi,{type:"target",position:ze.Left,id:`${e}-left`,style:{top:"50%",transform:"translateY(-50%)"}}),_.jsx(Gi,{type:"source",position:ze.Bottom,id:`${e}-bottom`,style:{left:"25px"}}),_.jsx(Gi,{type:"target",position:ze.Top,id:`${e}-top`,style:{left:"25px"}}),_.jsxs("div",{className:"relative",children:[b&&_.jsxs(_.Fragment,{children:[_.jsx("div",{className:yr("absolute rounded-xl shadow-lg border-2 transition-all duration-300",jf(h),"opacity-40"),style:{top:"-8px",left:"-8px",width:"100%",height:"100%",pointerEvents:"none"},children:_.jsx("div",{className:"p-4 bg-white rounded-xl"})}),_.jsx("div",{className:yr("absolute rounded-xl shadow-lg border-2 transition-all duration-300",jf(h),"opacity-70"),style:{top:"-4px",left:"-4px",width:"100%",height:"100%",pointerEvents:"none"},children:_.jsx("div",{className:"p-4 bg-white rounded-xl"})})]}),_.jsx("div",{className:yr("rounded-xl shadow-lg border-2 transition-all duration-300 relative",jf(h)),children:_.jsxs("div",{className:yr("p-4 relative bg-white rounded-xl",i&&!b&&"cursor-pointer"),onClick:i,children:[_.jsxs("div",{className:"absolute -top-2.5 -right-2.5 flex gap-1",children:[b&&n&&_.jsx("div",{onClick:N=>{N.stopPropagation(),n()},className:"w-6 h-6 flex items-center justify-center bg-blue-500 hover:bg-blue-600 rounded-full text-white shadow-lg z-10 cursor-pointer",children:_.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4.5a6.5 6.5 0 1 0 4.135 11.286l3.572 3.572a1 1 0 0 0 1.414-1.414l-3.572-3.572A6.5 6.5 0 0 0 11 4.5z"})})}),!b&&t&&_.jsx("div",{onClick:N=>{N.stopPropagation(),t(N)},className:"w-6 h-6 flex items-center justify-center bg-gray-500 hover:bg-gray-600 rounded-full text-white shadow-lg z-10 cursor-pointer",children:_.jsx(QO,{className:"w-3 h-3"})}),f]}),_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"w-8 h-8 rounded flex items-center justify-center flex-shrink-0",children:a}),_.jsx("div",{className:"min-w-0",children:u})]}),_.jsxs("div",{className:"absolute -top-3 left-3 flex gap-2",children:[c,_.jsx("div",{className:yr("px-2 py-0.5 rounded text-xs font-medium shadow-sm z-10",wA(h)),children:(h==null?void 0:h.toLowerCase())||"unknown"}),b&&_.jsxs("div",{className:"px-2 py-0.5 rounded text-xs font-medium shadow-sm z-10",style:{backgroundColor:"rgba(224, 242, 254, 0.9)",color:"#0369a1"},children:["batch: ",x]}),p&&m&&_.jsx("div",{className:"px-2 py-0.5 rounded text-xs font-medium shadow-sm z-10",style:{backgroundColor:"rgba(236, 254, 255, 0.9)",color:"#0891b2"},children:vh(p,m)})]}),y&&_.jsx("div",{className:"absolute -bottom-2.5 right-2",children:_.jsx("div",{className:"px-2 py-0.5 rounded text-xs font-medium shadow-sm",style:{backgroundColor:"rgba(240, 253, 244, 0.9)",color:"#166534",fontSize:"0.7rem"},children:y})})]})})]})]})}),Ra={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Og=(e,t)=>e.unstable_is?e.unstable_is(t):t===e,Ag=e=>"init"in e,Bf=e=>!!e.write,Dg=e=>"v"in e||"e"in e,gc=e=>{if("e"in e)throw e.e;if((Ra?"production":void 0)!=="production"&&!("v"in e))throw new Error("[Bug] atom state is not initialized");return e.v},oy=Symbol(),wh=e=>e[oy],Td=e=>{var t;return xh(e)&&!((t=wh(e))!=null&&t[1])},xA=(e,t)=>{const n=wh(e);if(n)n[1]=!0,n[0].forEach(i=>i(t));else if((Ra?"production":void 0)!=="production")throw new Error("[Bug] cancelable promise not found")},bA=e=>{if(wh(e))return;const t=[new Set,!1];e[oy]=t;const n=()=>{t[1]=!0};e.then(n,n),e.onCancel=i=>{t[0].add(i)}},xh=e=>typeof(e==null?void 0:e.then)=="function",ay=(e,t,n)=>{n.p.has(e)||(n.p.add(e),t.then(()=>{n.p.delete(e)},()=>{n.p.delete(e)}))},Hf=(e,t,n)=>{const i=n(e),a="v"in i,u=i.v,c=Td(i.v)?i.v:null;if(xh(t)){bA(t);for(const f of i.d.keys())ay(e,t,n(f))}i.v=t,delete i.e,(!a||!Object.is(u,i.v))&&(++i.n,c&&xA(c,t))},Pg=(e,t,n)=>{var i;const a=new Set;for(const u of((i=n.get(e))==null?void 0:i.t)||[])n.has(u)&&a.add(u);for(const u of t.p)a.add(u);return a},_A=()=>{const e=new Set,t=()=>{e.forEach(n=>n())};return t.add=n=>(e.add(n),()=>{e.delete(n)}),t},Kf=()=>{const e={},t=new WeakMap,n=i=>{var a,u;(a=t.get(e))==null||a.forEach(c=>c(i)),(u=t.get(i))==null||u.forEach(c=>c())};return n.add=(i,a)=>{const u=i||e,c=(t.has(u)?t:t.set(u,new Set)).get(u);return c.add(a),()=>{c==null||c.delete(a),c.size||t.delete(u)}},n},EA=e=>(e.c||(e.c=Kf()),e.m||(e.m=Kf()),e.u||(e.u=Kf()),e.f||(e.f=_A()),e),SA=Symbol(),TA=(e=new WeakMap,t=new WeakMap,n=new WeakMap,i=new Set,a=new Set,u=new Set,c={},f=(x,...b)=>x.read(...b),h=(x,...b)=>x.write(...b),p=(x,b)=>{var N;return(N=x.unstable_onInit)==null?void 0:N.call(x,b)},m=(x,b)=>{var N;return(N=x.onMount)==null?void 0:N.call(x,b)},...y)=>{const x=y[0]||(z=>{if((Ra?"production":void 0)!=="production"&&!z)throw new Error("Atom is undefined or null");let Q=e.get(z);return Q||(Q={d:new Map,p:new Set,n:0},e.set(z,Q),p==null||p(z,ce)),Q}),b=y[1]||(()=>{let z,Q;const se=J=>{try{J()}catch(V){z||(z=!0,Q=V)}};do{c.f&&se(c.f);const J=new Set,V=J.add.bind(J);i.forEach(ne=>{var ye;return(ye=t.get(ne))==null?void 0:ye.l.forEach(V)}),i.clear(),u.forEach(V),u.clear(),a.forEach(V),a.clear(),J.forEach(se),i.size&&N()}while(i.size||u.size||a.size);if(z)throw Q}),N=y[2]||(()=>{const z=[],Q=new WeakSet,se=new WeakSet,J=Array.from(i);for(;J.length;){const V=J[J.length-1],ne=x(V);if(se.has(V)){J.pop();continue}if(Q.has(V)){if(n.get(V)===ne.n)z.push([V,ne]);else if((Ra?"production":void 0)!=="production"&&n.has(V))throw new Error("[Bug] invalidated atom exists");se.add(V),J.pop();continue}Q.add(V);for(const ye of Pg(V,ne,t))Q.has(ye)||J.push(ye)}for(let V=z.length-1;V>=0;--V){const[ne,ye]=z[V];let M=!1;for(const ae of ye.d.keys())if(ae!==ne&&i.has(ae)){M=!0;break}M&&(S(ne),U(ne)),n.delete(ne)}}),S=y[3]||(z=>{var Q,se;const J=x(z);if(Dg(J)&&(t.has(z)&&n.get(z)!==J.n||Array.from(J.d).every(([oe,X])=>S(oe).n===X)))return J;J.d.clear();let V=!0;const ne=()=>{t.has(z)&&(U(z),N(),b())},ye=oe=>{var X;if(Og(z,oe)){const ge=x(oe);if(!Dg(ge))if(Ag(oe))Hf(oe,oe.init,x);else throw new Error("no atom init");return gc(ge)}const de=S(oe);try{return gc(de)}finally{J.d.set(oe,de.n),Td(J.v)&&ay(z,J.v,de),(X=t.get(oe))==null||X.t.add(z),V||ne()}};let M,ae;const W={get signal(){return M||(M=new AbortController),M.signal},get setSelf(){return(Ra?"production":void 0)!=="production"&&!Bf(z)&&console.warn("setSelf function cannot be used with read-only atom"),!ae&&Bf(z)&&(ae=(...oe)=>{if((Ra?"production":void 0)!=="production"&&V&&console.warn("setSelf function cannot be called in sync"),!V)try{return L(z,...oe)}finally{N(),b()}}),ae}},pe=J.n;try{const oe=f(z,ye,W);return Hf(z,oe,x),xh(oe)&&((Q=oe.onCancel)==null||Q.call(oe,()=>M==null?void 0:M.abort()),oe.then(ne,ne)),J}catch(oe){return delete J.v,J.e=oe,++J.n,J}finally{V=!1,pe!==J.n&&n.get(z)===pe&&(n.set(z,J.n),i.add(z),(se=c.c)==null||se.call(c,z))}}),C=y[4]||(z=>{const Q=[z];for(;Q.length;){const se=Q.pop(),J=x(se);for(const V of Pg(se,J,t)){const ne=x(V);n.set(V,ne.n),Q.push(V)}}}),L=y[5]||((z,...Q)=>{let se=!0;const J=ne=>gc(S(ne)),V=(ne,...ye)=>{var M;const ae=x(ne);try{if(Og(z,ne)){if(!Ag(ne))throw new Error("atom not writable");const W=ae.n,pe=ye[0];Hf(ne,pe,x),U(ne),W!==ae.n&&(i.add(ne),(M=c.c)==null||M.call(c,ne),C(ne));return}else return L(ne,...ye)}finally{se||(N(),b())}};try{return h(z,J,V,...Q)}finally{se=!1}}),U=y[6]||(z=>{var Q;const se=x(z),J=t.get(z);if(J&&!Td(se.v)){for(const[V,ne]of se.d)if(!J.d.has(V)){const ye=x(V);te(V).t.add(z),J.d.add(V),ne!==ye.n&&(i.add(V),(Q=c.c)==null||Q.call(c,V),C(V))}for(const V of J.d||[])if(!se.d.has(V)){J.d.delete(V);const ne=F(V);ne==null||ne.t.delete(z)}}}),te=y[7]||(z=>{var Q;const se=x(z);let J=t.get(z);if(!J){S(z);for(const V of se.d.keys())te(V).t.add(z);if(J={l:new Set,d:new Set(se.d.keys()),t:new Set},t.set(z,J),(Q=c.m)==null||Q.call(c,z),Bf(z)){const V=()=>{let ne=!0;const ye=(...M)=>{try{return L(z,...M)}finally{ne||(N(),b())}};try{const M=m(z,ye);M&&(J.u=()=>{ne=!0;try{M()}finally{ne=!1}})}finally{ne=!1}};a.add(V)}}return J}),F=y[8]||(z=>{var Q;const se=x(z);let J=t.get(z);if(J&&!J.l.size&&!Array.from(J.t).some(V=>{var ne;return(ne=t.get(V))==null?void 0:ne.d.has(z)})){J.u&&u.add(J.u),J=void 0,t.delete(z),(Q=c.u)==null||Q.call(c,z);for(const V of se.d.keys()){const ne=F(V);ne==null||ne.t.delete(z)}return}return J}),ue=[e,t,n,i,a,u,c,f,h,p,m,x,b,N,S,C,L,U,te,F],ce={get:z=>gc(S(z)),set:(z,...Q)=>{try{return L(z,...Q)}finally{N(),b()}},sub:(z,Q)=>{const J=te(z).l;return J.add(Q),b(),()=>{J.delete(Q),F(z),b()}}};return Object.defineProperty(ce,SA,{value:ue}),ce},sy=TA,NA=EA,bh={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1};let kA=0;function Hr(e,t){const n=`atom${++kA}`,i={toString(){return(bh?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof e=="function"?i.read=e:(i.init=e,i.read=IA,i.write=CA),t&&(i.write=t),i}function IA(e){return e(this)}function CA(e,t,n){return t(this,typeof n=="function"?n(e(this)):n)}const OA=()=>{let e=0;const t=NA({}),n=new WeakMap,i=new WeakMap,a=sy(n,i,void 0,void 0,void 0,void 0,t,void 0,(f,h,p,...m)=>e?p(f,...m):f.write(h,p,...m)),u=new Set;return t.m.add(void 0,f=>{u.add(f);const h=n.get(f);h.m=i.get(f)}),t.u.add(void 0,f=>{u.delete(f);const h=n.get(f);delete h.m}),Object.assign(a,{dev4_get_internal_weak_map:()=>n,dev4_get_mounted_atoms:()=>u,dev4_restore_atoms:f=>{const h={read:()=>null,write:(p,m)=>{++e;try{for(const[y,x]of f)"init"in y&&m(y,x)}finally{--e}}};a.set(h)}})},AA=()=>(bh?"production":void 0)!=="production"?OA():sy();let Rs;const DA=()=>(Rs||(Rs=AA(),(bh?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=Rs),globalThis.__JOTAI_DEFAULT_STORE__!==Rs&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),Rs),uy={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1},PA=k.createContext(void 0),ol=e=>k.useContext(PA)||DA(),cy=e=>typeof(e==null?void 0:e.then)=="function",RA=e=>{e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t})},MA=re.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(RA(e),e)}),Uf=new WeakMap,LA=e=>{let t=Uf.get(e);return t||(t=new Promise((n,i)=>{let a=e;const u=h=>p=>{a===h&&n(p)},c=h=>p=>{a===h&&i(p)},f=h=>{"onCancel"in h&&typeof h.onCancel=="function"&&h.onCancel(p=>{if((uy?"production":void 0)!=="production"&&p===h)throw new Error("[Bug] p is not updated even after cancelation");cy(p)?(Uf.set(p,t),a=p,p.then(u(p),c(p)),f(p)):n(p)})};e.then(u(e),c(e)),f(e)}),Uf.set(e,t)),t};function Bo(e,t){const n=ol(),[[i,a,u],c]=k.useReducer(p=>{const m=n.get(e);return Object.is(p[0],m)&&p[1]===n&&p[2]===e?p:[m,n,e]},void 0,()=>[n.get(e),n,e]);let f=i;if((a!==n||u!==e)&&(c(),f=n.get(e)),k.useEffect(()=>{const p=n.sub(e,()=>{c()});return c(),p},[n,e,void 0]),k.useDebugValue(f),cy(f)){const p=LA(f);return MA(p)}return f}function Yo(e,t){const n=ol();return k.useCallback((...a)=>{if((uy?"production":void 0)!=="production"&&!("write"in e))throw new Error("not writable atom");return n.set(e,...a)},[n,e])}const Rg=e=>{const t=`${e.source_id}->${e.target_id}`;return e.type==="child"?{id:t,source:e.source_id,sourceHandle:`${e.source_id}-right`,target:e.target_id,type:"step",targetHandle:`${e.target_id}-left`}:{id:t,source:e.source_id,sourceHandle:`${e.source_id}-bottom`,target:e.target_id,targetHandle:`${e.target_id}-top`,type:"step",animated:!0}},$A=500;function WA(e){return $A}function FA(e,t,n,i){if(!t.find(u=>u.id===e))return{nodes:t,edges:n};try{const u=jA(i,t),c=new Set(u.map(h=>h.id)),f=n.filter(h=>c.has(h.source)&&c.has(h.target));return{nodes:u,edges:f}}catch(u){return console.error("[DEBUG] Error in layoutRenderTree:",u),{nodes:t,edges:n}}}function jA(e,t){const n=new Map;t.forEach(f=>n.set(f.id,f));const i=new Map,a=new Set,u=(f,h=0,p=0,m=0,y=null)=>{const x=n.get(f.id);if(!x||a.has(x.id))return;a.add(x.id);const b=WA();let N;m===0?N=y!==null?y:0:N=(y!==null?y:0)+m*110;const S={...x,position:{x:p,y:N},style:{...x.style,width:b}};i.set(S.id,S),f.children.forEach((C,L)=>{u(C,h+1,p+b+100,L,S.position.y)})};u(e);const c=[];return t.forEach(f=>{if(i.has(f.id))c.push(i.get(f.id));else{const h={...f,position:f.position||{x:0,y:0}};c.push(h)}}),c}const Ba=Hr([]),_h=Hr([]),ly=Hr(null),Ho=Hr(null),Eh=Hr(null),al=Hr([]),fy=Hr(null,(e,t,n)=>{const{data:i,position:a,baseZIndex:u}=n,c=Si(i)?jr(Jo(i)):ty(i)?du(il(i)):null;c&&t(al,f=>{const h=f.findIndex(p=>p.id===c);return h>=0?f.map((p,m)=>m===h?{...p,position:a,baseZIndex:Math.max(u||0,1e3+f.length)}:p):[...f,{id:c,node:i,position:a,baseZIndex:Math.max(u||0,1e3+f.length)}]})}),BA=Hr(null,(e,t,n)=>{t(al,i=>i.filter(a=>a.id!==n))}),HA=Hr(null,(e,t)=>{t(al,[])}),Sh=Hr(null,(e,t,n)=>{n.nodes!==void 0&&t(Ba,n.nodes),n.edges!==void 0&&t(_h,n.edges),n.structure!==void 0&&t(Ho,n.structure),n.renderTree!==void 0&&t(Eh,n.renderTree),n.rootId!==void 0&&t(ly,n.rootId)}),dy=Hr(e=>{const t=e(Ba),n=e(_h),i=e(Eh),a=e(ly);if(!i){const b=t.map(Cg),N=n.map(Rg);return{nodes:b,edges:N}}const u=new Set,c=(b,N=0)=>{if(u.add(b.id),b.children.length>0)for(const S of b.children)c(S,N+1)};c(i);const h=t.filter(b=>u.has(b.id)).map(Cg),m=n.filter(b=>u.has(b.source_id)&&u.has(b.target_id)).map(Rg);if(!a)return{nodes:h,edges:m};const{nodes:y,edges:x}=FA(a,h,m,i);return{nodes:y,edges:x}});var Wc={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Wc.exports;(function(e,t){(function(){var n,i="4.17.21",a=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",c="Expected a function",f="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",p=500,m="__lodash_placeholder__",y=1,x=2,b=4,N=1,S=2,C=1,L=2,U=4,te=8,F=16,ue=32,ce=64,z=128,Q=256,se=512,J=30,V="...",ne=800,ye=16,M=1,ae=2,W=3,pe=1/0,oe=9007199254740991,X=17976931348623157e292,de=NaN,ge=4294967295,Ee=ge-1,ke=ge>>>1,Me=[["ary",z],["bind",C],["bindKey",L],["curry",te],["curryRight",F],["flip",se],["partial",ue],["partialRight",ce],["rearg",Q]],Re="[object Arguments]",Be="[object Array]",Ye="[object AsyncFunction]",qe="[object Boolean]",Se="[object Date]",rt="[object DOMException]",xt="[object Error]",He="[object Function]",Tt="[object GeneratorFunction]",Xe="[object Map]",it="[object Number]",St="[object Null]",et="[object Object]",je="[object Promise]",Ft="[object Proxy]",jt="[object RegExp]",bt="[object Set]",sn="[object String]",Ut="[object Symbol]",un="[object Undefined]",Qt="[object WeakMap]",zt="[object WeakSet]",tn="[object ArrayBuffer]",Yt="[object DataView]",cn="[object Float32Array]",dn="[object Float64Array]",_t="[object Int8Array]",Bt="[object Int16Array]",Vt="[object Int32Array]",Lt="[object Uint8Array]",$e="[object Uint8ClampedArray]",Ht="[object Uint16Array]",le="[object Uint32Array]",xe=/\b__p \+= '';/g,fe=/\b(__p \+=) '' \+/g,Ce=/(__e\(.*?\)|\b__t\)) \+\n'';/g,We=/&(?:amp|lt|gt|quot|#39);/g,Ue=/[&<>"']/g,Ve=RegExp(We.source),Ze=RegExp(Ue.source),Tn=/<%-([\s\S]+?)%>/g,ct=/<%([\s\S]+?)%>/g,$t=/<%=([\s\S]+?)%>/g,jn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,br=/^\w*$/,_r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Et=/[\\^$.*+?()[\]{}|]/g,Rt=RegExp(Et.source),sr=/^\s+/,ur=/\s/,cr=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,lr=/\{\n\/\* \[wrapped with (.+)\] \*/,io=/,? & /,Nn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Gn=/[()=,{}\[\]\/\s]/,Pn=/\\(\\)?/g,Ur=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ot=/\w*$/,yt=/^[-+]0x[0-9a-f]+$/i,At=/^0b[01]+$/i,qt=/^\[object .+?Constructor\]$/,gn=/^0o[0-7]+$/i,Er=/^(?:0|[1-9]\d*)$/,Dt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,wn=/($^)/,Zn=/['\n\r\u2028\u2029\\]/g,ri="\\ud800-\\udfff",zr="\\u0300-\\u036f",ki="\\ufe20-\\ufe2f",oo="\\u20d0-\\u20ff",Ii=zr+ki+oo,Qn="\\u2700-\\u27bf",ao="a-z\\xdf-\\xf6\\xf8-\\xff",Ci="\\xac\\xb1\\xd7\\xf7",ra="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",st="\\u2000-\\u206f",wu=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Za="A-Z\\xc0-\\xd6\\xd8-\\xde",Qa="\\ufe0e\\ufe0f",Ot=Ci+ra+st+wu,ii="[']",so="["+ri+"]",oi="["+Ot+"]",Oi="["+Ii+"]",ia="\\d+",oa="["+Qn+"]",Ja="["+ao+"]",uo="[^"+ri+Ot+ia+Qn+ao+Za+"]",aa="\\ud83c[\\udffb-\\udfff]",Sr="(?:"+Oi+"|"+aa+")",Ai="[^"+ri+"]",sa="(?:\\ud83c[\\udde6-\\uddff]){2}",es="[\\ud800-\\udbff][\\udc00-\\udfff]",ht="["+Za+"]",ua="\\u200d",xu="(?:"+Ja+"|"+uo+")",kl="(?:"+ht+"|"+uo+")",kn="(?:"+ii+"(?:d|ll|m|re|s|t|ve))?",ai="(?:"+ii+"(?:D|LL|M|RE|S|T|VE))?",co=Sr+"?",Tr="["+Qa+"]?",bu="(?:"+ua+"(?:"+[Ai,sa,es].join("|")+")"+Tr+co+")*",_u="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ln="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Jn=Tr+co+bu,lo="(?:"+[oa,sa,es].join("|")+")"+Jn,fo="(?:"+[Ai+Oi+"?",Oi,sa,es,so].join("|")+")",ts=RegExp(ii,"g"),Yr=RegExp(Oi,"g"),ns=RegExp(aa+"(?="+aa+")|"+fo+Jn,"g"),fr=RegExp([ht+"?"+Ja+"+"+kn+"(?="+[oi,ht,"$"].join("|")+")",kl+"+"+ai+"(?="+[oi,ht+xu,"$"].join("|")+")",ht+"?"+xu+"+"+kn,ht+"+"+ai,ln,_u,ia,lo].join("|"),"g"),rs=RegExp("["+ua+ri+Ii+Qa+"]"),Eu=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,is=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ho=-1,kt={};kt[cn]=kt[dn]=kt[_t]=kt[Bt]=kt[Vt]=kt[Lt]=kt[$e]=kt[Ht]=kt[le]=!0,kt[Re]=kt[Be]=kt[tn]=kt[qe]=kt[Yt]=kt[Se]=kt[xt]=kt[He]=kt[Xe]=kt[it]=kt[et]=kt[jt]=kt[bt]=kt[sn]=kt[Qt]=!1;var It={};It[Re]=It[Be]=It[tn]=It[Yt]=It[qe]=It[Se]=It[cn]=It[dn]=It[_t]=It[Bt]=It[Vt]=It[Xe]=It[it]=It[et]=It[jt]=It[bt]=It[sn]=It[Ut]=It[Lt]=It[$e]=It[Ht]=It[le]=!0,It[xt]=It[He]=It[Qt]=!1;var Il={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},po={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Cl={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ol={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ca=parseFloat,la=parseInt,fa=typeof Mr=="object"&&Mr&&Mr.Object===Object&&Mr,Al=typeof self=="object"&&self&&self.Object===Object&&self,hn=fa||Al||Function("return this")(),os=t&&!t.nodeType&&t,Nr=os&&!0&&e&&!e.nodeType&&e,da=Nr&&Nr.exports===os,ha=da&&fa.process,xn=function(){try{var I=Nr&&Nr.require&&Nr.require("util").types;return I||ha&&ha.binding&&ha.binding("util")}catch{}}(),mo=xn&&xn.isArrayBuffer,go=xn&&xn.isDate,as=xn&&xn.isMap,Su=xn&&xn.isRegExp,vo=xn&&xn.isSet,pa=xn&&xn.isTypedArray;function bn(I,R,O){switch(O.length){case 0:return I.call(R);case 1:return I.call(R,O[0]);case 2:return I.call(R,O[0],O[1]);case 3:return I.call(R,O[0],O[1],O[2])}return I.apply(R,O)}function ss(I,R,O,K){for(var j=-1,q=I==null?0:I.length;++j<q;){var ee=I[j];R(K,ee,O(ee),I)}return K}function In(I,R){for(var O=-1,K=I==null?0:I.length;++O<K&&R(I[O],O,I)!==!1;);return I}function vn(I,R){for(var O=I==null?0:I.length;O--&&R(I[O],O,I)!==!1;);return I}function Di(I,R){for(var O=-1,K=I==null?0:I.length;++O<K;)if(!R(I[O],O,I))return!1;return!0}function Bn(I,R){for(var O=-1,K=I==null?0:I.length,j=0,q=[];++O<K;){var ee=I[O];R(ee,O,I)&&(q[j++]=ee)}return q}function yo(I,R){var O=I==null?0:I.length;return!!O&&Mi(I,R,0)>-1}function Pi(I,R,O){for(var K=-1,j=I==null?0:I.length;++K<j;)if(O(R,I[K]))return!0;return!1}function Pt(I,R){for(var O=-1,K=I==null?0:I.length,j=Array(K);++O<K;)j[O]=R(I[O],O,I);return j}function kr(I,R){for(var O=-1,K=R.length,j=I.length;++O<K;)I[j+O]=R[O];return I}function Ri(I,R,O,K){var j=-1,q=I==null?0:I.length;for(K&&q&&(O=I[++j]);++j<q;)O=R(O,I[j],j,I);return O}function us(I,R,O,K){var j=I==null?0:I.length;for(K&&j&&(O=I[--j]);j--;)O=R(O,I[j],j,I);return O}function Ir(I,R){for(var O=-1,K=I==null?0:I.length;++O<K;)if(R(I[O],O,I))return!0;return!1}var cs=bo("length");function ls(I){return I.split("")}function ma(I){return I.match(Nn)||[]}function ga(I,R,O){var K;return O(I,function(j,q,ee){if(R(j,q,ee))return K=q,!1}),K}function wo(I,R,O,K){for(var j=I.length,q=O+(K?1:-1);K?q--:++q<j;)if(R(I[q],q,I))return q;return-1}function Mi(I,R,O){return R===R?Vr(I,R,O):wo(I,xo,O)}function fs(I,R,O,K){for(var j=O-1,q=I.length;++j<q;)if(K(I[j],R))return j;return-1}function xo(I){return I!==I}function Tu(I,R){var O=I==null?0:I.length;return O?ds(I,R)/O:de}function bo(I){return function(R){return R==null?n:R[I]}}function _o(I){return function(R){return I==null?n:I[R]}}function Nu(I,R,O,K,j){return j(I,function(q,ee,Y){O=K?(K=!1,q):R(O,q,ee,Y)}),O}function ku(I,R){var O=I.length;for(I.sort(R);O--;)I[O]=I[O].value;return I}function ds(I,R){for(var O,K=-1,j=I.length;++K<j;){var q=R(I[K]);q!==n&&(O=O===n?q:O+q)}return O}function va(I,R){for(var O=-1,K=Array(I);++O<I;)K[O]=R(O);return K}function Iu(I,R){return Pt(R,function(O){return[O,I[O]]})}function Cu(I){return I&&I.slice(0,g(I)+1).replace(sr,"")}function Cn(I){return function(R){return I(R)}}function Eo(I,R){return Pt(R,function(O){return I[O]})}function Li(I,R){return I.has(R)}function hs(I,R){for(var O=-1,K=I.length;++O<K&&Mi(R,I[O],0)>-1;);return O}function Ou(I,R){for(var O=I.length;O--&&Mi(R,I[O],0)>-1;);return O}function Dl(I,R){for(var O=I.length,K=0;O--;)I[O]===R&&++K;return K}var Pl=_o(Il),ya=_o(po);function Cr(I){return"\\"+Ol[I]}function Xt(I,R){return I==null?n:I[R]}function Or(I){return rs.test(I)}function Hn(I){return Eu.test(I)}function Rl(I){for(var R,O=[];!(R=I.next()).done;)O.push(R.value);return O}function So(I){var R=-1,O=Array(I.size);return I.forEach(function(K,j){O[++R]=[j,K]}),O}function ps(I,R){return function(O){return I(R(O))}}function On(I,R){for(var O=-1,K=I.length,j=0,q=[];++O<K;){var ee=I[O];(ee===R||ee===m)&&(I[O]=m,q[j++]=O)}return q}function $i(I){var R=-1,O=Array(I.size);return I.forEach(function(K){O[++R]=K}),O}function Wi(I){var R=-1,O=Array(I.size);return I.forEach(function(K){O[++R]=[K,K]}),O}function Vr(I,R,O){for(var K=O-1,j=I.length;++K<j;)if(I[K]===R)return K;return-1}function Au(I,R,O){for(var K=O+1;K--;)if(I[K]===R)return K;return K}function s(I){return Or(I)?E(I):cs(I)}function d(I){return Or(I)?A(I):ls(I)}function g(I){for(var R=I.length;R--&&ur.test(I.charAt(R)););return R}var w=_o(Cl);function E(I){for(var R=ns.lastIndex=0;ns.test(I);)++R;return R}function A(I){return I.match(ns)||[]}function $(I){return I.match(fr)||[]}var H=function I(R){R=R==null?hn:Z.defaults(hn.Object(),R,Z.pick(hn,is));var O=R.Array,K=R.Date,j=R.Error,q=R.Function,ee=R.Math,Y=R.Object,he=R.RegExp,ve=R.String,me=R.TypeError,we=O.prototype,Oe=q.prototype,De=Y.prototype,Ie=R["__core-js_shared__"],Ae=Oe.toString,Te=De.hasOwnProperty,Pe=0,Fe=function(){var r=/[^.]+$/.exec(Ie&&Ie.keys&&Ie.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),nt=De.toString,lt=Ae.call(Y),ft=hn._,Rn=he("^"+Ae.call(Te).replace(Et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=da?R.Buffer:n,Wt=R.Symbol,nn=R.Uint8Array,To=tt?tt.allocUnsafe:n,fn=ps(Y.getPrototypeOf,Y),qr=Y.create,wa=De.propertyIsEnumerable,Du=we.splice,Vh=Wt?Wt.isConcatSpreadable:n,ms=Wt?Wt.iterator:n,No=Wt?Wt.toStringTag:n,Pu=function(){try{var r=Ao(Y,"defineProperty");return r({},"",{}),r}catch{}}(),Ew=R.clearTimeout!==hn.clearTimeout&&R.clearTimeout,Sw=K&&K.now!==hn.Date.now&&K.now,Tw=R.setTimeout!==hn.setTimeout&&R.setTimeout,Ru=ee.ceil,Mu=ee.floor,Ml=Y.getOwnPropertySymbols,Nw=tt?tt.isBuffer:n,qh=R.isFinite,kw=we.join,Iw=ps(Y.keys,Y),pn=ee.max,An=ee.min,Cw=K.now,Ow=R.parseInt,Xh=ee.random,Aw=we.reverse,Ll=Ao(R,"DataView"),gs=Ao(R,"Map"),$l=Ao(R,"Promise"),xa=Ao(R,"Set"),vs=Ao(R,"WeakMap"),ys=Ao(Y,"create"),Lu=vs&&new vs,ba={},Dw=Do(Ll),Pw=Do(gs),Rw=Do($l),Mw=Do(xa),Lw=Do(vs),$u=Wt?Wt.prototype:n,ws=$u?$u.valueOf:n,Gh=$u?$u.toString:n;function D(r){if(Jt(r)&&!at(r)&&!(r instanceof vt)){if(r instanceof dr)return r;if(Te.call(r,"__wrapped__"))return Zp(r)}return new dr(r)}var _a=function(){function r(){}return function(o){if(!Gt(o))return{};if(qr)return qr(o);r.prototype=o;var l=new r;return r.prototype=n,l}}();function Wu(){}function dr(r,o){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!o,this.__index__=0,this.__values__=n}D.templateSettings={escape:Tn,evaluate:ct,interpolate:$t,variable:"",imports:{_:D}},D.prototype=Wu.prototype,D.prototype.constructor=D,dr.prototype=_a(Wu.prototype),dr.prototype.constructor=dr;function vt(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ge,this.__views__=[]}function $w(){var r=new vt(this.__wrapped__);return r.__actions__=Kn(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=Kn(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=Kn(this.__views__),r}function Ww(){if(this.__filtered__){var r=new vt(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}function Fw(){var r=this.__wrapped__.value(),o=this.__dir__,l=at(r),v=o<0,T=l?r.length:0,P=Zx(0,T,this.__views__),B=P.start,G=P.end,ie=G-B,be=v?G:B-1,_e=this.__iteratees__,Ne=_e.length,Le=0,Ke=An(ie,this.__takeCount__);if(!l||!v&&T==ie&&Ke==ie)return xp(r,this.__actions__);var Qe=[];e:for(;ie--&&Le<Ke;){be+=o;for(var dt=-1,Je=r[be];++dt<Ne;){var gt=_e[dt],wt=gt.iteratee,nr=gt.type,$n=wt(Je);if(nr==ae)Je=$n;else if(!$n){if(nr==M)continue e;break e}}Qe[Le++]=Je}return Qe}vt.prototype=_a(Wu.prototype),vt.prototype.constructor=vt;function ko(r){var o=-1,l=r==null?0:r.length;for(this.clear();++o<l;){var v=r[o];this.set(v[0],v[1])}}function jw(){this.__data__=ys?ys(null):{},this.size=0}function Bw(r){var o=this.has(r)&&delete this.__data__[r];return this.size-=o?1:0,o}function Hw(r){var o=this.__data__;if(ys){var l=o[r];return l===h?n:l}return Te.call(o,r)?o[r]:n}function Kw(r){var o=this.__data__;return ys?o[r]!==n:Te.call(o,r)}function Uw(r,o){var l=this.__data__;return this.size+=this.has(r)?0:1,l[r]=ys&&o===n?h:o,this}ko.prototype.clear=jw,ko.prototype.delete=Bw,ko.prototype.get=Hw,ko.prototype.has=Kw,ko.prototype.set=Uw;function si(r){var o=-1,l=r==null?0:r.length;for(this.clear();++o<l;){var v=r[o];this.set(v[0],v[1])}}function zw(){this.__data__=[],this.size=0}function Yw(r){var o=this.__data__,l=Fu(o,r);if(l<0)return!1;var v=o.length-1;return l==v?o.pop():Du.call(o,l,1),--this.size,!0}function Vw(r){var o=this.__data__,l=Fu(o,r);return l<0?n:o[l][1]}function qw(r){return Fu(this.__data__,r)>-1}function Xw(r,o){var l=this.__data__,v=Fu(l,r);return v<0?(++this.size,l.push([r,o])):l[v][1]=o,this}si.prototype.clear=zw,si.prototype.delete=Yw,si.prototype.get=Vw,si.prototype.has=qw,si.prototype.set=Xw;function ui(r){var o=-1,l=r==null?0:r.length;for(this.clear();++o<l;){var v=r[o];this.set(v[0],v[1])}}function Gw(){this.size=0,this.__data__={hash:new ko,map:new(gs||si),string:new ko}}function Zw(r){var o=Zu(this,r).delete(r);return this.size-=o?1:0,o}function Qw(r){return Zu(this,r).get(r)}function Jw(r){return Zu(this,r).has(r)}function ex(r,o){var l=Zu(this,r),v=l.size;return l.set(r,o),this.size+=l.size==v?0:1,this}ui.prototype.clear=Gw,ui.prototype.delete=Zw,ui.prototype.get=Qw,ui.prototype.has=Jw,ui.prototype.set=ex;function Io(r){var o=-1,l=r==null?0:r.length;for(this.__data__=new ui;++o<l;)this.add(r[o])}function tx(r){return this.__data__.set(r,h),this}function nx(r){return this.__data__.has(r)}Io.prototype.add=Io.prototype.push=tx,Io.prototype.has=nx;function Ar(r){var o=this.__data__=new si(r);this.size=o.size}function rx(){this.__data__=new si,this.size=0}function ix(r){var o=this.__data__,l=o.delete(r);return this.size=o.size,l}function ox(r){return this.__data__.get(r)}function ax(r){return this.__data__.has(r)}function sx(r,o){var l=this.__data__;if(l instanceof si){var v=l.__data__;if(!gs||v.length<a-1)return v.push([r,o]),this.size=++l.size,this;l=this.__data__=new ui(v)}return l.set(r,o),this.size=l.size,this}Ar.prototype.clear=rx,Ar.prototype.delete=ix,Ar.prototype.get=ox,Ar.prototype.has=ax,Ar.prototype.set=sx;function Zh(r,o){var l=at(r),v=!l&&Po(r),T=!l&&!v&&Ki(r),P=!l&&!v&&!T&&Na(r),B=l||v||T||P,G=B?va(r.length,ve):[],ie=G.length;for(var be in r)(o||Te.call(r,be))&&!(B&&(be=="length"||T&&(be=="offset"||be=="parent")||P&&(be=="buffer"||be=="byteLength"||be=="byteOffset")||di(be,ie)))&&G.push(be);return G}function Qh(r){var o=r.length;return o?r[ql(0,o-1)]:n}function ux(r,o){return Qu(Kn(r),Co(o,0,r.length))}function cx(r){return Qu(Kn(r))}function Wl(r,o,l){(l!==n&&!Dr(r[o],l)||l===n&&!(o in r))&&ci(r,o,l)}function xs(r,o,l){var v=r[o];(!(Te.call(r,o)&&Dr(v,l))||l===n&&!(o in r))&&ci(r,o,l)}function Fu(r,o){for(var l=r.length;l--;)if(Dr(r[l][0],o))return l;return-1}function lx(r,o,l,v){return Fi(r,function(T,P,B){o(v,T,l(T),B)}),v}function Jh(r,o){return r&&Gr(o,yn(o),r)}function fx(r,o){return r&&Gr(o,zn(o),r)}function ci(r,o,l){o=="__proto__"&&Pu?Pu(r,o,{configurable:!0,enumerable:!0,value:l,writable:!0}):r[o]=l}function Fl(r,o){for(var l=-1,v=o.length,T=O(v),P=r==null;++l<v;)T[l]=P?n:xf(r,o[l]);return T}function Co(r,o,l){return r===r&&(l!==n&&(r=r<=l?r:l),o!==n&&(r=r>=o?r:o)),r}function hr(r,o,l,v,T,P){var B,G=o&y,ie=o&x,be=o&b;if(l&&(B=T?l(r,v,T,P):l(r)),B!==n)return B;if(!Gt(r))return r;var _e=at(r);if(_e){if(B=Jx(r),!G)return Kn(r,B)}else{var Ne=Dn(r),Le=Ne==He||Ne==Tt;if(Ki(r))return Ep(r,G);if(Ne==et||Ne==Re||Le&&!T){if(B=ie||Le?{}:Hp(r),!G)return ie?Hx(r,fx(B,r)):Bx(r,Jh(B,r))}else{if(!It[Ne])return T?r:{};B=eb(r,Ne,G)}}P||(P=new Ar);var Ke=P.get(r);if(Ke)return Ke;P.set(r,B),vm(r)?r.forEach(function(Je){B.add(hr(Je,o,l,Je,r,P))}):mm(r)&&r.forEach(function(Je,gt){B.set(gt,hr(Je,o,l,gt,r,P))});var Qe=be?ie?af:of:ie?zn:yn,dt=_e?n:Qe(r);return In(dt||r,function(Je,gt){dt&&(gt=Je,Je=r[gt]),xs(B,gt,hr(Je,o,l,gt,r,P))}),B}function dx(r){var o=yn(r);return function(l){return ep(l,r,o)}}function ep(r,o,l){var v=l.length;if(r==null)return!v;for(r=Y(r);v--;){var T=l[v],P=o[T],B=r[T];if(B===n&&!(T in r)||!P(B))return!1}return!0}function tp(r,o,l){if(typeof r!="function")throw new me(c);return ks(function(){r.apply(n,l)},o)}function bs(r,o,l,v){var T=-1,P=yo,B=!0,G=r.length,ie=[],be=o.length;if(!G)return ie;l&&(o=Pt(o,Cn(l))),v?(P=Pi,B=!1):o.length>=a&&(P=Li,B=!1,o=new Io(o));e:for(;++T<G;){var _e=r[T],Ne=l==null?_e:l(_e);if(_e=v||_e!==0?_e:0,B&&Ne===Ne){for(var Le=be;Le--;)if(o[Le]===Ne)continue e;ie.push(_e)}else P(o,Ne,v)||ie.push(_e)}return ie}var Fi=Ip(Xr),np=Ip(Bl,!0);function hx(r,o){var l=!0;return Fi(r,function(v,T,P){return l=!!o(v,T,P),l}),l}function ju(r,o,l){for(var v=-1,T=r.length;++v<T;){var P=r[v],B=o(P);if(B!=null&&(G===n?B===B&&!tr(B):l(B,G)))var G=B,ie=P}return ie}function px(r,o,l,v){var T=r.length;for(l=ut(l),l<0&&(l=-l>T?0:T+l),v=v===n||v>T?T:ut(v),v<0&&(v+=T),v=l>v?0:wm(v);l<v;)r[l++]=o;return r}function rp(r,o){var l=[];return Fi(r,function(v,T,P){o(v,T,P)&&l.push(v)}),l}function _n(r,o,l,v,T){var P=-1,B=r.length;for(l||(l=nb),T||(T=[]);++P<B;){var G=r[P];o>0&&l(G)?o>1?_n(G,o-1,l,v,T):kr(T,G):v||(T[T.length]=G)}return T}var jl=Cp(),ip=Cp(!0);function Xr(r,o){return r&&jl(r,o,yn)}function Bl(r,o){return r&&ip(r,o,yn)}function Bu(r,o){return Bn(o,function(l){return hi(r[l])})}function Oo(r,o){o=Bi(o,r);for(var l=0,v=o.length;r!=null&&l<v;)r=r[Zr(o[l++])];return l&&l==v?r:n}function op(r,o,l){var v=o(r);return at(r)?v:kr(v,l(r))}function Mn(r){return r==null?r===n?un:St:No&&No in Y(r)?Gx(r):cb(r)}function Hl(r,o){return r>o}function mx(r,o){return r!=null&&Te.call(r,o)}function gx(r,o){return r!=null&&o in Y(r)}function vx(r,o,l){return r>=An(o,l)&&r<pn(o,l)}function Kl(r,o,l){for(var v=l?Pi:yo,T=r[0].length,P=r.length,B=P,G=O(P),ie=1/0,be=[];B--;){var _e=r[B];B&&o&&(_e=Pt(_e,Cn(o))),ie=An(_e.length,ie),G[B]=!l&&(o||T>=120&&_e.length>=120)?new Io(B&&_e):n}_e=r[0];var Ne=-1,Le=G[0];e:for(;++Ne<T&&be.length<ie;){var Ke=_e[Ne],Qe=o?o(Ke):Ke;if(Ke=l||Ke!==0?Ke:0,!(Le?Li(Le,Qe):v(be,Qe,l))){for(B=P;--B;){var dt=G[B];if(!(dt?Li(dt,Qe):v(r[B],Qe,l)))continue e}Le&&Le.push(Qe),be.push(Ke)}}return be}function yx(r,o,l,v){return Xr(r,function(T,P,B){o(v,l(T),P,B)}),v}function _s(r,o,l){o=Bi(o,r),r=Yp(r,o);var v=r==null?r:r[Zr(mr(o))];return v==null?n:bn(v,r,l)}function ap(r){return Jt(r)&&Mn(r)==Re}function wx(r){return Jt(r)&&Mn(r)==tn}function xx(r){return Jt(r)&&Mn(r)==Se}function Es(r,o,l,v,T){return r===o?!0:r==null||o==null||!Jt(r)&&!Jt(o)?r!==r&&o!==o:bx(r,o,l,v,Es,T)}function bx(r,o,l,v,T,P){var B=at(r),G=at(o),ie=B?Be:Dn(r),be=G?Be:Dn(o);ie=ie==Re?et:ie,be=be==Re?et:be;var _e=ie==et,Ne=be==et,Le=ie==be;if(Le&&Ki(r)){if(!Ki(o))return!1;B=!0,_e=!1}if(Le&&!_e)return P||(P=new Ar),B||Na(r)?Fp(r,o,l,v,T,P):qx(r,o,ie,l,v,T,P);if(!(l&N)){var Ke=_e&&Te.call(r,"__wrapped__"),Qe=Ne&&Te.call(o,"__wrapped__");if(Ke||Qe){var dt=Ke?r.value():r,Je=Qe?o.value():o;return P||(P=new Ar),T(dt,Je,l,v,P)}}return Le?(P||(P=new Ar),Xx(r,o,l,v,T,P)):!1}function _x(r){return Jt(r)&&Dn(r)==Xe}function Ul(r,o,l,v){var T=l.length,P=T,B=!v;if(r==null)return!P;for(r=Y(r);T--;){var G=l[T];if(B&&G[2]?G[1]!==r[G[0]]:!(G[0]in r))return!1}for(;++T<P;){G=l[T];var ie=G[0],be=r[ie],_e=G[1];if(B&&G[2]){if(be===n&&!(ie in r))return!1}else{var Ne=new Ar;if(v)var Le=v(be,_e,ie,r,o,Ne);if(!(Le===n?Es(_e,be,N|S,v,Ne):Le))return!1}}return!0}function sp(r){if(!Gt(r)||ib(r))return!1;var o=hi(r)?Rn:qt;return o.test(Do(r))}function Ex(r){return Jt(r)&&Mn(r)==jt}function Sx(r){return Jt(r)&&Dn(r)==bt}function Tx(r){return Jt(r)&&ic(r.length)&&!!kt[Mn(r)]}function up(r){return typeof r=="function"?r:r==null?Yn:typeof r=="object"?at(r)?fp(r[0],r[1]):lp(r):Om(r)}function zl(r){if(!Ns(r))return Iw(r);var o=[];for(var l in Y(r))Te.call(r,l)&&l!="constructor"&&o.push(l);return o}function Nx(r){if(!Gt(r))return ub(r);var o=Ns(r),l=[];for(var v in r)v=="constructor"&&(o||!Te.call(r,v))||l.push(v);return l}function Yl(r,o){return r<o}function cp(r,o){var l=-1,v=Un(r)?O(r.length):[];return Fi(r,function(T,P,B){v[++l]=o(T,P,B)}),v}function lp(r){var o=uf(r);return o.length==1&&o[0][2]?Up(o[0][0],o[0][1]):function(l){return l===r||Ul(l,r,o)}}function fp(r,o){return lf(r)&&Kp(o)?Up(Zr(r),o):function(l){var v=xf(l,r);return v===n&&v===o?bf(l,r):Es(o,v,N|S)}}function Hu(r,o,l,v,T){r!==o&&jl(o,function(P,B){if(T||(T=new Ar),Gt(P))kx(r,o,B,l,Hu,v,T);else{var G=v?v(df(r,B),P,B+"",r,o,T):n;G===n&&(G=P),Wl(r,B,G)}},zn)}function kx(r,o,l,v,T,P,B){var G=df(r,l),ie=df(o,l),be=B.get(ie);if(be){Wl(r,l,be);return}var _e=P?P(G,ie,l+"",r,o,B):n,Ne=_e===n;if(Ne){var Le=at(ie),Ke=!Le&&Ki(ie),Qe=!Le&&!Ke&&Na(ie);_e=ie,Le||Ke||Qe?at(G)?_e=G:rn(G)?_e=Kn(G):Ke?(Ne=!1,_e=Ep(ie,!0)):Qe?(Ne=!1,_e=Sp(ie,!0)):_e=[]:Is(ie)||Po(ie)?(_e=G,Po(G)?_e=xm(G):(!Gt(G)||hi(G))&&(_e=Hp(ie))):Ne=!1}Ne&&(B.set(ie,_e),T(_e,ie,v,P,B),B.delete(ie)),Wl(r,l,_e)}function dp(r,o){var l=r.length;if(l)return o+=o<0?l:0,di(o,l)?r[o]:n}function hp(r,o,l){o.length?o=Pt(o,function(P){return at(P)?function(B){return Oo(B,P.length===1?P[0]:P)}:P}):o=[Yn];var v=-1;o=Pt(o,Cn(Ge()));var T=cp(r,function(P,B,G){var ie=Pt(o,function(be){return be(P)});return{criteria:ie,index:++v,value:P}});return ku(T,function(P,B){return jx(P,B,l)})}function Ix(r,o){return pp(r,o,function(l,v){return bf(r,v)})}function pp(r,o,l){for(var v=-1,T=o.length,P={};++v<T;){var B=o[v],G=Oo(r,B);l(G,B)&&Ss(P,Bi(B,r),G)}return P}function Cx(r){return function(o){return Oo(o,r)}}function Vl(r,o,l,v){var T=v?fs:Mi,P=-1,B=o.length,G=r;for(r===o&&(o=Kn(o)),l&&(G=Pt(r,Cn(l)));++P<B;)for(var ie=0,be=o[P],_e=l?l(be):be;(ie=T(G,_e,ie,v))>-1;)G!==r&&Du.call(G,ie,1),Du.call(r,ie,1);return r}function mp(r,o){for(var l=r?o.length:0,v=l-1;l--;){var T=o[l];if(l==v||T!==P){var P=T;di(T)?Du.call(r,T,1):Zl(r,T)}}return r}function ql(r,o){return r+Mu(Xh()*(o-r+1))}function Ox(r,o,l,v){for(var T=-1,P=pn(Ru((o-r)/(l||1)),0),B=O(P);P--;)B[v?P:++T]=r,r+=l;return B}function Xl(r,o){var l="";if(!r||o<1||o>oe)return l;do o%2&&(l+=r),o=Mu(o/2),o&&(r+=r);while(o);return l}function pt(r,o){return hf(zp(r,o,Yn),r+"")}function Ax(r){return Qh(ka(r))}function Dx(r,o){var l=ka(r);return Qu(l,Co(o,0,l.length))}function Ss(r,o,l,v){if(!Gt(r))return r;o=Bi(o,r);for(var T=-1,P=o.length,B=P-1,G=r;G!=null&&++T<P;){var ie=Zr(o[T]),be=l;if(ie==="__proto__"||ie==="constructor"||ie==="prototype")return r;if(T!=B){var _e=G[ie];be=v?v(_e,ie,G):n,be===n&&(be=Gt(_e)?_e:di(o[T+1])?[]:{})}xs(G,ie,be),G=G[ie]}return r}var gp=Lu?function(r,o){return Lu.set(r,o),r}:Yn,Px=Pu?function(r,o){return Pu(r,"toString",{configurable:!0,enumerable:!1,value:Ef(o),writable:!0})}:Yn;function Rx(r){return Qu(ka(r))}function pr(r,o,l){var v=-1,T=r.length;o<0&&(o=-o>T?0:T+o),l=l>T?T:l,l<0&&(l+=T),T=o>l?0:l-o>>>0,o>>>=0;for(var P=O(T);++v<T;)P[v]=r[v+o];return P}function Mx(r,o){var l;return Fi(r,function(v,T,P){return l=o(v,T,P),!l}),!!l}function Ku(r,o,l){var v=0,T=r==null?v:r.length;if(typeof o=="number"&&o===o&&T<=ke){for(;v<T;){var P=v+T>>>1,B=r[P];B!==null&&!tr(B)&&(l?B<=o:B<o)?v=P+1:T=P}return T}return Gl(r,o,Yn,l)}function Gl(r,o,l,v){var T=0,P=r==null?0:r.length;if(P===0)return 0;o=l(o);for(var B=o!==o,G=o===null,ie=tr(o),be=o===n;T<P;){var _e=Mu((T+P)/2),Ne=l(r[_e]),Le=Ne!==n,Ke=Ne===null,Qe=Ne===Ne,dt=tr(Ne);if(B)var Je=v||Qe;else be?Je=Qe&&(v||Le):G?Je=Qe&&Le&&(v||!Ke):ie?Je=Qe&&Le&&!Ke&&(v||!dt):Ke||dt?Je=!1:Je=v?Ne<=o:Ne<o;Je?T=_e+1:P=_e}return An(P,Ee)}function vp(r,o){for(var l=-1,v=r.length,T=0,P=[];++l<v;){var B=r[l],G=o?o(B):B;if(!l||!Dr(G,ie)){var ie=G;P[T++]=B===0?0:B}}return P}function yp(r){return typeof r=="number"?r:tr(r)?de:+r}function er(r){if(typeof r=="string")return r;if(at(r))return Pt(r,er)+"";if(tr(r))return Gh?Gh.call(r):"";var o=r+"";return o=="0"&&1/r==-pe?"-0":o}function ji(r,o,l){var v=-1,T=yo,P=r.length,B=!0,G=[],ie=G;if(l)B=!1,T=Pi;else if(P>=a){var be=o?null:Yx(r);if(be)return $i(be);B=!1,T=Li,ie=new Io}else ie=o?[]:G;e:for(;++v<P;){var _e=r[v],Ne=o?o(_e):_e;if(_e=l||_e!==0?_e:0,B&&Ne===Ne){for(var Le=ie.length;Le--;)if(ie[Le]===Ne)continue e;o&&ie.push(Ne),G.push(_e)}else T(ie,Ne,l)||(ie!==G&&ie.push(Ne),G.push(_e))}return G}function Zl(r,o){return o=Bi(o,r),r=Yp(r,o),r==null||delete r[Zr(mr(o))]}function wp(r,o,l,v){return Ss(r,o,l(Oo(r,o)),v)}function Uu(r,o,l,v){for(var T=r.length,P=v?T:-1;(v?P--:++P<T)&&o(r[P],P,r););return l?pr(r,v?0:P,v?P+1:T):pr(r,v?P+1:0,v?T:P)}function xp(r,o){var l=r;return l instanceof vt&&(l=l.value()),Ri(o,function(v,T){return T.func.apply(T.thisArg,kr([v],T.args))},l)}function Ql(r,o,l){var v=r.length;if(v<2)return v?ji(r[0]):[];for(var T=-1,P=O(v);++T<v;)for(var B=r[T],G=-1;++G<v;)G!=T&&(P[T]=bs(P[T]||B,r[G],o,l));return ji(_n(P,1),o,l)}function bp(r,o,l){for(var v=-1,T=r.length,P=o.length,B={};++v<T;){var G=v<P?o[v]:n;l(B,r[v],G)}return B}function Jl(r){return rn(r)?r:[]}function ef(r){return typeof r=="function"?r:Yn}function Bi(r,o){return at(r)?r:lf(r,o)?[r]:Gp(Nt(r))}var Lx=pt;function Hi(r,o,l){var v=r.length;return l=l===n?v:l,!o&&l>=v?r:pr(r,o,l)}var _p=Ew||function(r){return hn.clearTimeout(r)};function Ep(r,o){if(o)return r.slice();var l=r.length,v=To?To(l):new r.constructor(l);return r.copy(v),v}function tf(r){var o=new r.constructor(r.byteLength);return new nn(o).set(new nn(r)),o}function $x(r,o){var l=o?tf(r.buffer):r.buffer;return new r.constructor(l,r.byteOffset,r.byteLength)}function Wx(r){var o=new r.constructor(r.source,ot.exec(r));return o.lastIndex=r.lastIndex,o}function Fx(r){return ws?Y(ws.call(r)):{}}function Sp(r,o){var l=o?tf(r.buffer):r.buffer;return new r.constructor(l,r.byteOffset,r.length)}function Tp(r,o){if(r!==o){var l=r!==n,v=r===null,T=r===r,P=tr(r),B=o!==n,G=o===null,ie=o===o,be=tr(o);if(!G&&!be&&!P&&r>o||P&&B&&ie&&!G&&!be||v&&B&&ie||!l&&ie||!T)return 1;if(!v&&!P&&!be&&r<o||be&&l&&T&&!v&&!P||G&&l&&T||!B&&T||!ie)return-1}return 0}function jx(r,o,l){for(var v=-1,T=r.criteria,P=o.criteria,B=T.length,G=l.length;++v<B;){var ie=Tp(T[v],P[v]);if(ie){if(v>=G)return ie;var be=l[v];return ie*(be=="desc"?-1:1)}}return r.index-o.index}function Np(r,o,l,v){for(var T=-1,P=r.length,B=l.length,G=-1,ie=o.length,be=pn(P-B,0),_e=O(ie+be),Ne=!v;++G<ie;)_e[G]=o[G];for(;++T<B;)(Ne||T<P)&&(_e[l[T]]=r[T]);for(;be--;)_e[G++]=r[T++];return _e}function kp(r,o,l,v){for(var T=-1,P=r.length,B=-1,G=l.length,ie=-1,be=o.length,_e=pn(P-G,0),Ne=O(_e+be),Le=!v;++T<_e;)Ne[T]=r[T];for(var Ke=T;++ie<be;)Ne[Ke+ie]=o[ie];for(;++B<G;)(Le||T<P)&&(Ne[Ke+l[B]]=r[T++]);return Ne}function Kn(r,o){var l=-1,v=r.length;for(o||(o=O(v));++l<v;)o[l]=r[l];return o}function Gr(r,o,l,v){var T=!l;l||(l={});for(var P=-1,B=o.length;++P<B;){var G=o[P],ie=v?v(l[G],r[G],G,l,r):n;ie===n&&(ie=r[G]),T?ci(l,G,ie):xs(l,G,ie)}return l}function Bx(r,o){return Gr(r,cf(r),o)}function Hx(r,o){return Gr(r,jp(r),o)}function zu(r,o){return function(l,v){var T=at(l)?ss:lx,P=o?o():{};return T(l,r,Ge(v,2),P)}}function Ea(r){return pt(function(o,l){var v=-1,T=l.length,P=T>1?l[T-1]:n,B=T>2?l[2]:n;for(P=r.length>3&&typeof P=="function"?(T--,P):n,B&&Ln(l[0],l[1],B)&&(P=T<3?n:P,T=1),o=Y(o);++v<T;){var G=l[v];G&&r(o,G,v,P)}return o})}function Ip(r,o){return function(l,v){if(l==null)return l;if(!Un(l))return r(l,v);for(var T=l.length,P=o?T:-1,B=Y(l);(o?P--:++P<T)&&v(B[P],P,B)!==!1;);return l}}function Cp(r){return function(o,l,v){for(var T=-1,P=Y(o),B=v(o),G=B.length;G--;){var ie=B[r?G:++T];if(l(P[ie],ie,P)===!1)break}return o}}function Kx(r,o,l){var v=o&C,T=Ts(r);function P(){var B=this&&this!==hn&&this instanceof P?T:r;return B.apply(v?l:this,arguments)}return P}function Op(r){return function(o){o=Nt(o);var l=Or(o)?d(o):n,v=l?l[0]:o.charAt(0),T=l?Hi(l,1).join(""):o.slice(1);return v[r]()+T}}function Sa(r){return function(o){return Ri(Im(km(o).replace(ts,"")),r,"")}}function Ts(r){return function(){var o=arguments;switch(o.length){case 0:return new r;case 1:return new r(o[0]);case 2:return new r(o[0],o[1]);case 3:return new r(o[0],o[1],o[2]);case 4:return new r(o[0],o[1],o[2],o[3]);case 5:return new r(o[0],o[1],o[2],o[3],o[4]);case 6:return new r(o[0],o[1],o[2],o[3],o[4],o[5]);case 7:return new r(o[0],o[1],o[2],o[3],o[4],o[5],o[6])}var l=_a(r.prototype),v=r.apply(l,o);return Gt(v)?v:l}}function Ux(r,o,l){var v=Ts(r);function T(){for(var P=arguments.length,B=O(P),G=P,ie=Ta(T);G--;)B[G]=arguments[G];var be=P<3&&B[0]!==ie&&B[P-1]!==ie?[]:On(B,ie);if(P-=be.length,P<l)return Mp(r,o,Yu,T.placeholder,n,B,be,n,n,l-P);var _e=this&&this!==hn&&this instanceof T?v:r;return bn(_e,this,B)}return T}function Ap(r){return function(o,l,v){var T=Y(o);if(!Un(o)){var P=Ge(l,3);o=yn(o),l=function(G){return P(T[G],G,T)}}var B=r(o,l,v);return B>-1?T[P?o[B]:B]:n}}function Dp(r){return fi(function(o){var l=o.length,v=l,T=dr.prototype.thru;for(r&&o.reverse();v--;){var P=o[v];if(typeof P!="function")throw new me(c);if(T&&!B&&Gu(P)=="wrapper")var B=new dr([],!0)}for(v=B?v:l;++v<l;){P=o[v];var G=Gu(P),ie=G=="wrapper"?sf(P):n;ie&&ff(ie[0])&&ie[1]==(z|te|ue|Q)&&!ie[4].length&&ie[9]==1?B=B[Gu(ie[0])].apply(B,ie[3]):B=P.length==1&&ff(P)?B[G]():B.thru(P)}return function(){var be=arguments,_e=be[0];if(B&&be.length==1&&at(_e))return B.plant(_e).value();for(var Ne=0,Le=l?o[Ne].apply(this,be):_e;++Ne<l;)Le=o[Ne].call(this,Le);return Le}})}function Yu(r,o,l,v,T,P,B,G,ie,be){var _e=o&z,Ne=o&C,Le=o&L,Ke=o&(te|F),Qe=o&se,dt=Le?n:Ts(r);function Je(){for(var gt=arguments.length,wt=O(gt),nr=gt;nr--;)wt[nr]=arguments[nr];if(Ke)var $n=Ta(Je),rr=Dl(wt,$n);if(v&&(wt=Np(wt,v,T,Ke)),P&&(wt=kp(wt,P,B,Ke)),gt-=rr,Ke&&gt<be){var on=On(wt,$n);return Mp(r,o,Yu,Je.placeholder,l,wt,on,G,ie,be-gt)}var Pr=Ne?l:this,mi=Le?Pr[r]:r;return gt=wt.length,G?wt=lb(wt,G):Qe&&gt>1&&wt.reverse(),_e&&ie<gt&&(wt.length=ie),this&&this!==hn&&this instanceof Je&&(mi=dt||Ts(mi)),mi.apply(Pr,wt)}return Je}function Pp(r,o){return function(l,v){return yx(l,r,o(v),{})}}function Vu(r,o){return function(l,v){var T;if(l===n&&v===n)return o;if(l!==n&&(T=l),v!==n){if(T===n)return v;typeof l=="string"||typeof v=="string"?(l=er(l),v=er(v)):(l=yp(l),v=yp(v)),T=r(l,v)}return T}}function nf(r){return fi(function(o){return o=Pt(o,Cn(Ge())),pt(function(l){var v=this;return r(o,function(T){return bn(T,v,l)})})})}function qu(r,o){o=o===n?" ":er(o);var l=o.length;if(l<2)return l?Xl(o,r):o;var v=Xl(o,Ru(r/s(o)));return Or(o)?Hi(d(v),0,r).join(""):v.slice(0,r)}function zx(r,o,l,v){var T=o&C,P=Ts(r);function B(){for(var G=-1,ie=arguments.length,be=-1,_e=v.length,Ne=O(_e+ie),Le=this&&this!==hn&&this instanceof B?P:r;++be<_e;)Ne[be]=v[be];for(;ie--;)Ne[be++]=arguments[++G];return bn(Le,T?l:this,Ne)}return B}function Rp(r){return function(o,l,v){return v&&typeof v!="number"&&Ln(o,l,v)&&(l=v=n),o=pi(o),l===n?(l=o,o=0):l=pi(l),v=v===n?o<l?1:-1:pi(v),Ox(o,l,v,r)}}function Xu(r){return function(o,l){return typeof o=="string"&&typeof l=="string"||(o=gr(o),l=gr(l)),r(o,l)}}function Mp(r,o,l,v,T,P,B,G,ie,be){var _e=o&te,Ne=_e?B:n,Le=_e?n:B,Ke=_e?P:n,Qe=_e?n:P;o|=_e?ue:ce,o&=~(_e?ce:ue),o&U||(o&=~(C|L));var dt=[r,o,T,Ke,Ne,Qe,Le,G,ie,be],Je=l.apply(n,dt);return ff(r)&&Vp(Je,dt),Je.placeholder=v,qp(Je,r,o)}function rf(r){var o=ee[r];return function(l,v){if(l=gr(l),v=v==null?0:An(ut(v),292),v&&qh(l)){var T=(Nt(l)+"e").split("e"),P=o(T[0]+"e"+(+T[1]+v));return T=(Nt(P)+"e").split("e"),+(T[0]+"e"+(+T[1]-v))}return o(l)}}var Yx=xa&&1/$i(new xa([,-0]))[1]==pe?function(r){return new xa(r)}:Nf;function Lp(r){return function(o){var l=Dn(o);return l==Xe?So(o):l==bt?Wi(o):Iu(o,r(o))}}function li(r,o,l,v,T,P,B,G){var ie=o&L;if(!ie&&typeof r!="function")throw new me(c);var be=v?v.length:0;if(be||(o&=~(ue|ce),v=T=n),B=B===n?B:pn(ut(B),0),G=G===n?G:ut(G),be-=T?T.length:0,o&ce){var _e=v,Ne=T;v=T=n}var Le=ie?n:sf(r),Ke=[r,o,l,v,T,_e,Ne,P,B,G];if(Le&&sb(Ke,Le),r=Ke[0],o=Ke[1],l=Ke[2],v=Ke[3],T=Ke[4],G=Ke[9]=Ke[9]===n?ie?0:r.length:pn(Ke[9]-be,0),!G&&o&(te|F)&&(o&=~(te|F)),!o||o==C)var Qe=Kx(r,o,l);else o==te||o==F?Qe=Ux(r,o,G):(o==ue||o==(C|ue))&&!T.length?Qe=zx(r,o,l,v):Qe=Yu.apply(n,Ke);var dt=Le?gp:Vp;return qp(dt(Qe,Ke),r,o)}function $p(r,o,l,v){return r===n||Dr(r,De[l])&&!Te.call(v,l)?o:r}function Wp(r,o,l,v,T,P){return Gt(r)&&Gt(o)&&(P.set(o,r),Hu(r,o,n,Wp,P),P.delete(o)),r}function Vx(r){return Is(r)?n:r}function Fp(r,o,l,v,T,P){var B=l&N,G=r.length,ie=o.length;if(G!=ie&&!(B&&ie>G))return!1;var be=P.get(r),_e=P.get(o);if(be&&_e)return be==o&&_e==r;var Ne=-1,Le=!0,Ke=l&S?new Io:n;for(P.set(r,o),P.set(o,r);++Ne<G;){var Qe=r[Ne],dt=o[Ne];if(v)var Je=B?v(dt,Qe,Ne,o,r,P):v(Qe,dt,Ne,r,o,P);if(Je!==n){if(Je)continue;Le=!1;break}if(Ke){if(!Ir(o,function(gt,wt){if(!Li(Ke,wt)&&(Qe===gt||T(Qe,gt,l,v,P)))return Ke.push(wt)})){Le=!1;break}}else if(!(Qe===dt||T(Qe,dt,l,v,P))){Le=!1;break}}return P.delete(r),P.delete(o),Le}function qx(r,o,l,v,T,P,B){switch(l){case Yt:if(r.byteLength!=o.byteLength||r.byteOffset!=o.byteOffset)return!1;r=r.buffer,o=o.buffer;case tn:return!(r.byteLength!=o.byteLength||!P(new nn(r),new nn(o)));case qe:case Se:case it:return Dr(+r,+o);case xt:return r.name==o.name&&r.message==o.message;case jt:case sn:return r==o+"";case Xe:var G=So;case bt:var ie=v&N;if(G||(G=$i),r.size!=o.size&&!ie)return!1;var be=B.get(r);if(be)return be==o;v|=S,B.set(r,o);var _e=Fp(G(r),G(o),v,T,P,B);return B.delete(r),_e;case Ut:if(ws)return ws.call(r)==ws.call(o)}return!1}function Xx(r,o,l,v,T,P){var B=l&N,G=of(r),ie=G.length,be=of(o),_e=be.length;if(ie!=_e&&!B)return!1;for(var Ne=ie;Ne--;){var Le=G[Ne];if(!(B?Le in o:Te.call(o,Le)))return!1}var Ke=P.get(r),Qe=P.get(o);if(Ke&&Qe)return Ke==o&&Qe==r;var dt=!0;P.set(r,o),P.set(o,r);for(var Je=B;++Ne<ie;){Le=G[Ne];var gt=r[Le],wt=o[Le];if(v)var nr=B?v(wt,gt,Le,o,r,P):v(gt,wt,Le,r,o,P);if(!(nr===n?gt===wt||T(gt,wt,l,v,P):nr)){dt=!1;break}Je||(Je=Le=="constructor")}if(dt&&!Je){var $n=r.constructor,rr=o.constructor;$n!=rr&&"constructor"in r&&"constructor"in o&&!(typeof $n=="function"&&$n instanceof $n&&typeof rr=="function"&&rr instanceof rr)&&(dt=!1)}return P.delete(r),P.delete(o),dt}function fi(r){return hf(zp(r,n,em),r+"")}function of(r){return op(r,yn,cf)}function af(r){return op(r,zn,jp)}var sf=Lu?function(r){return Lu.get(r)}:Nf;function Gu(r){for(var o=r.name+"",l=ba[o],v=Te.call(ba,o)?l.length:0;v--;){var T=l[v],P=T.func;if(P==null||P==r)return T.name}return o}function Ta(r){var o=Te.call(D,"placeholder")?D:r;return o.placeholder}function Ge(){var r=D.iteratee||Sf;return r=r===Sf?up:r,arguments.length?r(arguments[0],arguments[1]):r}function Zu(r,o){var l=r.__data__;return rb(o)?l[typeof o=="string"?"string":"hash"]:l.map}function uf(r){for(var o=yn(r),l=o.length;l--;){var v=o[l],T=r[v];o[l]=[v,T,Kp(T)]}return o}function Ao(r,o){var l=Xt(r,o);return sp(l)?l:n}function Gx(r){var o=Te.call(r,No),l=r[No];try{r[No]=n;var v=!0}catch{}var T=nt.call(r);return v&&(o?r[No]=l:delete r[No]),T}var cf=Ml?function(r){return r==null?[]:(r=Y(r),Bn(Ml(r),function(o){return wa.call(r,o)}))}:kf,jp=Ml?function(r){for(var o=[];r;)kr(o,cf(r)),r=fn(r);return o}:kf,Dn=Mn;(Ll&&Dn(new Ll(new ArrayBuffer(1)))!=Yt||gs&&Dn(new gs)!=Xe||$l&&Dn($l.resolve())!=je||xa&&Dn(new xa)!=bt||vs&&Dn(new vs)!=Qt)&&(Dn=function(r){var o=Mn(r),l=o==et?r.constructor:n,v=l?Do(l):"";if(v)switch(v){case Dw:return Yt;case Pw:return Xe;case Rw:return je;case Mw:return bt;case Lw:return Qt}return o});function Zx(r,o,l){for(var v=-1,T=l.length;++v<T;){var P=l[v],B=P.size;switch(P.type){case"drop":r+=B;break;case"dropRight":o-=B;break;case"take":o=An(o,r+B);break;case"takeRight":r=pn(r,o-B);break}}return{start:r,end:o}}function Qx(r){var o=r.match(lr);return o?o[1].split(io):[]}function Bp(r,o,l){o=Bi(o,r);for(var v=-1,T=o.length,P=!1;++v<T;){var B=Zr(o[v]);if(!(P=r!=null&&l(r,B)))break;r=r[B]}return P||++v!=T?P:(T=r==null?0:r.length,!!T&&ic(T)&&di(B,T)&&(at(r)||Po(r)))}function Jx(r){var o=r.length,l=new r.constructor(o);return o&&typeof r[0]=="string"&&Te.call(r,"index")&&(l.index=r.index,l.input=r.input),l}function Hp(r){return typeof r.constructor=="function"&&!Ns(r)?_a(fn(r)):{}}function eb(r,o,l){var v=r.constructor;switch(o){case tn:return tf(r);case qe:case Se:return new v(+r);case Yt:return $x(r,l);case cn:case dn:case _t:case Bt:case Vt:case Lt:case $e:case Ht:case le:return Sp(r,l);case Xe:return new v;case it:case sn:return new v(r);case jt:return Wx(r);case bt:return new v;case Ut:return Fx(r)}}function tb(r,o){var l=o.length;if(!l)return r;var v=l-1;return o[v]=(l>1?"& ":"")+o[v],o=o.join(l>2?", ":" "),r.replace(cr,`{
/* [wrapped with `+o+`] */
`)}function nb(r){return at(r)||Po(r)||!!(Vh&&r&&r[Vh])}function di(r,o){var l=typeof r;return o=o??oe,!!o&&(l=="number"||l!="symbol"&&Er.test(r))&&r>-1&&r%1==0&&r<o}function Ln(r,o,l){if(!Gt(l))return!1;var v=typeof o;return(v=="number"?Un(l)&&di(o,l.length):v=="string"&&o in l)?Dr(l[o],r):!1}function lf(r,o){if(at(r))return!1;var l=typeof r;return l=="number"||l=="symbol"||l=="boolean"||r==null||tr(r)?!0:br.test(r)||!jn.test(r)||o!=null&&r in Y(o)}function rb(r){var o=typeof r;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?r!=="__proto__":r===null}function ff(r){var o=Gu(r),l=D[o];if(typeof l!="function"||!(o in vt.prototype))return!1;if(r===l)return!0;var v=sf(l);return!!v&&r===v[0]}function ib(r){return!!Fe&&Fe in r}var ob=Ie?hi:If;function Ns(r){var o=r&&r.constructor,l=typeof o=="function"&&o.prototype||De;return r===l}function Kp(r){return r===r&&!Gt(r)}function Up(r,o){return function(l){return l==null?!1:l[r]===o&&(o!==n||r in Y(l))}}function ab(r){var o=nc(r,function(v){return l.size===p&&l.clear(),v}),l=o.cache;return o}function sb(r,o){var l=r[1],v=o[1],T=l|v,P=T<(C|L|z),B=v==z&&l==te||v==z&&l==Q&&r[7].length<=o[8]||v==(z|Q)&&o[7].length<=o[8]&&l==te;if(!(P||B))return r;v&C&&(r[2]=o[2],T|=l&C?0:U);var G=o[3];if(G){var ie=r[3];r[3]=ie?Np(ie,G,o[4]):G,r[4]=ie?On(r[3],m):o[4]}return G=o[5],G&&(ie=r[5],r[5]=ie?kp(ie,G,o[6]):G,r[6]=ie?On(r[5],m):o[6]),G=o[7],G&&(r[7]=G),v&z&&(r[8]=r[8]==null?o[8]:An(r[8],o[8])),r[9]==null&&(r[9]=o[9]),r[0]=o[0],r[1]=T,r}function ub(r){var o=[];if(r!=null)for(var l in Y(r))o.push(l);return o}function cb(r){return nt.call(r)}function zp(r,o,l){return o=pn(o===n?r.length-1:o,0),function(){for(var v=arguments,T=-1,P=pn(v.length-o,0),B=O(P);++T<P;)B[T]=v[o+T];T=-1;for(var G=O(o+1);++T<o;)G[T]=v[T];return G[o]=l(B),bn(r,this,G)}}function Yp(r,o){return o.length<2?r:Oo(r,pr(o,0,-1))}function lb(r,o){for(var l=r.length,v=An(o.length,l),T=Kn(r);v--;){var P=o[v];r[v]=di(P,l)?T[P]:n}return r}function df(r,o){if(!(o==="constructor"&&typeof r[o]=="function")&&o!="__proto__")return r[o]}var Vp=Xp(gp),ks=Tw||function(r,o){return hn.setTimeout(r,o)},hf=Xp(Px);function qp(r,o,l){var v=o+"";return hf(r,tb(v,fb(Qx(v),l)))}function Xp(r){var o=0,l=0;return function(){var v=Cw(),T=ye-(v-l);if(l=v,T>0){if(++o>=ne)return arguments[0]}else o=0;return r.apply(n,arguments)}}function Qu(r,o){var l=-1,v=r.length,T=v-1;for(o=o===n?v:o;++l<o;){var P=ql(l,T),B=r[P];r[P]=r[l],r[l]=B}return r.length=o,r}var Gp=ab(function(r){var o=[];return r.charCodeAt(0)===46&&o.push(""),r.replace(_r,function(l,v,T,P){o.push(T?P.replace(Pn,"$1"):v||l)}),o});function Zr(r){if(typeof r=="string"||tr(r))return r;var o=r+"";return o=="0"&&1/r==-pe?"-0":o}function Do(r){if(r!=null){try{return Ae.call(r)}catch{}try{return r+""}catch{}}return""}function fb(r,o){return In(Me,function(l){var v="_."+l[0];o&l[1]&&!yo(r,v)&&r.push(v)}),r.sort()}function Zp(r){if(r instanceof vt)return r.clone();var o=new dr(r.__wrapped__,r.__chain__);return o.__actions__=Kn(r.__actions__),o.__index__=r.__index__,o.__values__=r.__values__,o}function db(r,o,l){(l?Ln(r,o,l):o===n)?o=1:o=pn(ut(o),0);var v=r==null?0:r.length;if(!v||o<1)return[];for(var T=0,P=0,B=O(Ru(v/o));T<v;)B[P++]=pr(r,T,T+=o);return B}function hb(r){for(var o=-1,l=r==null?0:r.length,v=0,T=[];++o<l;){var P=r[o];P&&(T[v++]=P)}return T}function pb(){var r=arguments.length;if(!r)return[];for(var o=O(r-1),l=arguments[0],v=r;v--;)o[v-1]=arguments[v];return kr(at(l)?Kn(l):[l],_n(o,1))}var mb=pt(function(r,o){return rn(r)?bs(r,_n(o,1,rn,!0)):[]}),gb=pt(function(r,o){var l=mr(o);return rn(l)&&(l=n),rn(r)?bs(r,_n(o,1,rn,!0),Ge(l,2)):[]}),vb=pt(function(r,o){var l=mr(o);return rn(l)&&(l=n),rn(r)?bs(r,_n(o,1,rn,!0),n,l):[]});function yb(r,o,l){var v=r==null?0:r.length;return v?(o=l||o===n?1:ut(o),pr(r,o<0?0:o,v)):[]}function wb(r,o,l){var v=r==null?0:r.length;return v?(o=l||o===n?1:ut(o),o=v-o,pr(r,0,o<0?0:o)):[]}function xb(r,o){return r&&r.length?Uu(r,Ge(o,3),!0,!0):[]}function bb(r,o){return r&&r.length?Uu(r,Ge(o,3),!0):[]}function _b(r,o,l,v){var T=r==null?0:r.length;return T?(l&&typeof l!="number"&&Ln(r,o,l)&&(l=0,v=T),px(r,o,l,v)):[]}function Qp(r,o,l){var v=r==null?0:r.length;if(!v)return-1;var T=l==null?0:ut(l);return T<0&&(T=pn(v+T,0)),wo(r,Ge(o,3),T)}function Jp(r,o,l){var v=r==null?0:r.length;if(!v)return-1;var T=v-1;return l!==n&&(T=ut(l),T=l<0?pn(v+T,0):An(T,v-1)),wo(r,Ge(o,3),T,!0)}function em(r){var o=r==null?0:r.length;return o?_n(r,1):[]}function Eb(r){var o=r==null?0:r.length;return o?_n(r,pe):[]}function Sb(r,o){var l=r==null?0:r.length;return l?(o=o===n?1:ut(o),_n(r,o)):[]}function Tb(r){for(var o=-1,l=r==null?0:r.length,v={};++o<l;){var T=r[o];v[T[0]]=T[1]}return v}function tm(r){return r&&r.length?r[0]:n}function Nb(r,o,l){var v=r==null?0:r.length;if(!v)return-1;var T=l==null?0:ut(l);return T<0&&(T=pn(v+T,0)),Mi(r,o,T)}function kb(r){var o=r==null?0:r.length;return o?pr(r,0,-1):[]}var Ib=pt(function(r){var o=Pt(r,Jl);return o.length&&o[0]===r[0]?Kl(o):[]}),Cb=pt(function(r){var o=mr(r),l=Pt(r,Jl);return o===mr(l)?o=n:l.pop(),l.length&&l[0]===r[0]?Kl(l,Ge(o,2)):[]}),Ob=pt(function(r){var o=mr(r),l=Pt(r,Jl);return o=typeof o=="function"?o:n,o&&l.pop(),l.length&&l[0]===r[0]?Kl(l,n,o):[]});function Ab(r,o){return r==null?"":kw.call(r,o)}function mr(r){var o=r==null?0:r.length;return o?r[o-1]:n}function Db(r,o,l){var v=r==null?0:r.length;if(!v)return-1;var T=v;return l!==n&&(T=ut(l),T=T<0?pn(v+T,0):An(T,v-1)),o===o?Au(r,o,T):wo(r,xo,T,!0)}function Pb(r,o){return r&&r.length?dp(r,ut(o)):n}var Rb=pt(nm);function nm(r,o){return r&&r.length&&o&&o.length?Vl(r,o):r}function Mb(r,o,l){return r&&r.length&&o&&o.length?Vl(r,o,Ge(l,2)):r}function Lb(r,o,l){return r&&r.length&&o&&o.length?Vl(r,o,n,l):r}var $b=fi(function(r,o){var l=r==null?0:r.length,v=Fl(r,o);return mp(r,Pt(o,function(T){return di(T,l)?+T:T}).sort(Tp)),v});function Wb(r,o){var l=[];if(!(r&&r.length))return l;var v=-1,T=[],P=r.length;for(o=Ge(o,3);++v<P;){var B=r[v];o(B,v,r)&&(l.push(B),T.push(v))}return mp(r,T),l}function pf(r){return r==null?r:Aw.call(r)}function Fb(r,o,l){var v=r==null?0:r.length;return v?(l&&typeof l!="number"&&Ln(r,o,l)?(o=0,l=v):(o=o==null?0:ut(o),l=l===n?v:ut(l)),pr(r,o,l)):[]}function jb(r,o){return Ku(r,o)}function Bb(r,o,l){return Gl(r,o,Ge(l,2))}function Hb(r,o){var l=r==null?0:r.length;if(l){var v=Ku(r,o);if(v<l&&Dr(r[v],o))return v}return-1}function Kb(r,o){return Ku(r,o,!0)}function Ub(r,o,l){return Gl(r,o,Ge(l,2),!0)}function zb(r,o){var l=r==null?0:r.length;if(l){var v=Ku(r,o,!0)-1;if(Dr(r[v],o))return v}return-1}function Yb(r){return r&&r.length?vp(r):[]}function Vb(r,o){return r&&r.length?vp(r,Ge(o,2)):[]}function qb(r){var o=r==null?0:r.length;return o?pr(r,1,o):[]}function Xb(r,o,l){return r&&r.length?(o=l||o===n?1:ut(o),pr(r,0,o<0?0:o)):[]}function Gb(r,o,l){var v=r==null?0:r.length;return v?(o=l||o===n?1:ut(o),o=v-o,pr(r,o<0?0:o,v)):[]}function Zb(r,o){return r&&r.length?Uu(r,Ge(o,3),!1,!0):[]}function Qb(r,o){return r&&r.length?Uu(r,Ge(o,3)):[]}var Jb=pt(function(r){return ji(_n(r,1,rn,!0))}),e_=pt(function(r){var o=mr(r);return rn(o)&&(o=n),ji(_n(r,1,rn,!0),Ge(o,2))}),t_=pt(function(r){var o=mr(r);return o=typeof o=="function"?o:n,ji(_n(r,1,rn,!0),n,o)});function n_(r){return r&&r.length?ji(r):[]}function r_(r,o){return r&&r.length?ji(r,Ge(o,2)):[]}function i_(r,o){return o=typeof o=="function"?o:n,r&&r.length?ji(r,n,o):[]}function mf(r){if(!(r&&r.length))return[];var o=0;return r=Bn(r,function(l){if(rn(l))return o=pn(l.length,o),!0}),va(o,function(l){return Pt(r,bo(l))})}function rm(r,o){if(!(r&&r.length))return[];var l=mf(r);return o==null?l:Pt(l,function(v){return bn(o,n,v)})}var o_=pt(function(r,o){return rn(r)?bs(r,o):[]}),a_=pt(function(r){return Ql(Bn(r,rn))}),s_=pt(function(r){var o=mr(r);return rn(o)&&(o=n),Ql(Bn(r,rn),Ge(o,2))}),u_=pt(function(r){var o=mr(r);return o=typeof o=="function"?o:n,Ql(Bn(r,rn),n,o)}),c_=pt(mf);function l_(r,o){return bp(r||[],o||[],xs)}function f_(r,o){return bp(r||[],o||[],Ss)}var d_=pt(function(r){var o=r.length,l=o>1?r[o-1]:n;return l=typeof l=="function"?(r.pop(),l):n,rm(r,l)});function im(r){var o=D(r);return o.__chain__=!0,o}function h_(r,o){return o(r),r}function Ju(r,o){return o(r)}var p_=fi(function(r){var o=r.length,l=o?r[0]:0,v=this.__wrapped__,T=function(P){return Fl(P,r)};return o>1||this.__actions__.length||!(v instanceof vt)||!di(l)?this.thru(T):(v=v.slice(l,+l+(o?1:0)),v.__actions__.push({func:Ju,args:[T],thisArg:n}),new dr(v,this.__chain__).thru(function(P){return o&&!P.length&&P.push(n),P}))});function m_(){return im(this)}function g_(){return new dr(this.value(),this.__chain__)}function v_(){this.__values__===n&&(this.__values__=ym(this.value()));var r=this.__index__>=this.__values__.length,o=r?n:this.__values__[this.__index__++];return{done:r,value:o}}function y_(){return this}function w_(r){for(var o,l=this;l instanceof Wu;){var v=Zp(l);v.__index__=0,v.__values__=n,o?T.__wrapped__=v:o=v;var T=v;l=l.__wrapped__}return T.__wrapped__=r,o}function x_(){var r=this.__wrapped__;if(r instanceof vt){var o=r;return this.__actions__.length&&(o=new vt(this)),o=o.reverse(),o.__actions__.push({func:Ju,args:[pf],thisArg:n}),new dr(o,this.__chain__)}return this.thru(pf)}function b_(){return xp(this.__wrapped__,this.__actions__)}var __=zu(function(r,o,l){Te.call(r,l)?++r[l]:ci(r,l,1)});function E_(r,o,l){var v=at(r)?Di:hx;return l&&Ln(r,o,l)&&(o=n),v(r,Ge(o,3))}function S_(r,o){var l=at(r)?Bn:rp;return l(r,Ge(o,3))}var T_=Ap(Qp),N_=Ap(Jp);function k_(r,o){return _n(ec(r,o),1)}function I_(r,o){return _n(ec(r,o),pe)}function C_(r,o,l){return l=l===n?1:ut(l),_n(ec(r,o),l)}function om(r,o){var l=at(r)?In:Fi;return l(r,Ge(o,3))}function am(r,o){var l=at(r)?vn:np;return l(r,Ge(o,3))}var O_=zu(function(r,o,l){Te.call(r,l)?r[l].push(o):ci(r,l,[o])});function A_(r,o,l,v){r=Un(r)?r:ka(r),l=l&&!v?ut(l):0;var T=r.length;return l<0&&(l=pn(T+l,0)),oc(r)?l<=T&&r.indexOf(o,l)>-1:!!T&&Mi(r,o,l)>-1}var D_=pt(function(r,o,l){var v=-1,T=typeof o=="function",P=Un(r)?O(r.length):[];return Fi(r,function(B){P[++v]=T?bn(o,B,l):_s(B,o,l)}),P}),P_=zu(function(r,o,l){ci(r,l,o)});function ec(r,o){var l=at(r)?Pt:cp;return l(r,Ge(o,3))}function R_(r,o,l,v){return r==null?[]:(at(o)||(o=o==null?[]:[o]),l=v?n:l,at(l)||(l=l==null?[]:[l]),hp(r,o,l))}var M_=zu(function(r,o,l){r[l?0:1].push(o)},function(){return[[],[]]});function L_(r,o,l){var v=at(r)?Ri:Nu,T=arguments.length<3;return v(r,Ge(o,4),l,T,Fi)}function $_(r,o,l){var v=at(r)?us:Nu,T=arguments.length<3;return v(r,Ge(o,4),l,T,np)}function W_(r,o){var l=at(r)?Bn:rp;return l(r,rc(Ge(o,3)))}function F_(r){var o=at(r)?Qh:Ax;return o(r)}function j_(r,o,l){(l?Ln(r,o,l):o===n)?o=1:o=ut(o);var v=at(r)?ux:Dx;return v(r,o)}function B_(r){var o=at(r)?cx:Rx;return o(r)}function H_(r){if(r==null)return 0;if(Un(r))return oc(r)?s(r):r.length;var o=Dn(r);return o==Xe||o==bt?r.size:zl(r).length}function K_(r,o,l){var v=at(r)?Ir:Mx;return l&&Ln(r,o,l)&&(o=n),v(r,Ge(o,3))}var U_=pt(function(r,o){if(r==null)return[];var l=o.length;return l>1&&Ln(r,o[0],o[1])?o=[]:l>2&&Ln(o[0],o[1],o[2])&&(o=[o[0]]),hp(r,_n(o,1),[])}),tc=Sw||function(){return hn.Date.now()};function z_(r,o){if(typeof o!="function")throw new me(c);return r=ut(r),function(){if(--r<1)return o.apply(this,arguments)}}function sm(r,o,l){return o=l?n:o,o=r&&o==null?r.length:o,li(r,z,n,n,n,n,o)}function um(r,o){var l;if(typeof o!="function")throw new me(c);return r=ut(r),function(){return--r>0&&(l=o.apply(this,arguments)),r<=1&&(o=n),l}}var gf=pt(function(r,o,l){var v=C;if(l.length){var T=On(l,Ta(gf));v|=ue}return li(r,v,o,l,T)}),cm=pt(function(r,o,l){var v=C|L;if(l.length){var T=On(l,Ta(cm));v|=ue}return li(o,v,r,l,T)});function lm(r,o,l){o=l?n:o;var v=li(r,te,n,n,n,n,n,o);return v.placeholder=lm.placeholder,v}function fm(r,o,l){o=l?n:o;var v=li(r,F,n,n,n,n,n,o);return v.placeholder=fm.placeholder,v}function dm(r,o,l){var v,T,P,B,G,ie,be=0,_e=!1,Ne=!1,Le=!0;if(typeof r!="function")throw new me(c);o=gr(o)||0,Gt(l)&&(_e=!!l.leading,Ne="maxWait"in l,P=Ne?pn(gr(l.maxWait)||0,o):P,Le="trailing"in l?!!l.trailing:Le);function Ke(on){var Pr=v,mi=T;return v=T=n,be=on,B=r.apply(mi,Pr),B}function Qe(on){return be=on,G=ks(gt,o),_e?Ke(on):B}function dt(on){var Pr=on-ie,mi=on-be,Am=o-Pr;return Ne?An(Am,P-mi):Am}function Je(on){var Pr=on-ie,mi=on-be;return ie===n||Pr>=o||Pr<0||Ne&&mi>=P}function gt(){var on=tc();if(Je(on))return wt(on);G=ks(gt,dt(on))}function wt(on){return G=n,Le&&v?Ke(on):(v=T=n,B)}function nr(){G!==n&&_p(G),be=0,v=ie=T=G=n}function $n(){return G===n?B:wt(tc())}function rr(){var on=tc(),Pr=Je(on);if(v=arguments,T=this,ie=on,Pr){if(G===n)return Qe(ie);if(Ne)return _p(G),G=ks(gt,o),Ke(ie)}return G===n&&(G=ks(gt,o)),B}return rr.cancel=nr,rr.flush=$n,rr}var Y_=pt(function(r,o){return tp(r,1,o)}),V_=pt(function(r,o,l){return tp(r,gr(o)||0,l)});function q_(r){return li(r,se)}function nc(r,o){if(typeof r!="function"||o!=null&&typeof o!="function")throw new me(c);var l=function(){var v=arguments,T=o?o.apply(this,v):v[0],P=l.cache;if(P.has(T))return P.get(T);var B=r.apply(this,v);return l.cache=P.set(T,B)||P,B};return l.cache=new(nc.Cache||ui),l}nc.Cache=ui;function rc(r){if(typeof r!="function")throw new me(c);return function(){var o=arguments;switch(o.length){case 0:return!r.call(this);case 1:return!r.call(this,o[0]);case 2:return!r.call(this,o[0],o[1]);case 3:return!r.call(this,o[0],o[1],o[2])}return!r.apply(this,o)}}function X_(r){return um(2,r)}var G_=Lx(function(r,o){o=o.length==1&&at(o[0])?Pt(o[0],Cn(Ge())):Pt(_n(o,1),Cn(Ge()));var l=o.length;return pt(function(v){for(var T=-1,P=An(v.length,l);++T<P;)v[T]=o[T].call(this,v[T]);return bn(r,this,v)})}),vf=pt(function(r,o){var l=On(o,Ta(vf));return li(r,ue,n,o,l)}),hm=pt(function(r,o){var l=On(o,Ta(hm));return li(r,ce,n,o,l)}),Z_=fi(function(r,o){return li(r,Q,n,n,n,o)});function Q_(r,o){if(typeof r!="function")throw new me(c);return o=o===n?o:ut(o),pt(r,o)}function J_(r,o){if(typeof r!="function")throw new me(c);return o=o==null?0:pn(ut(o),0),pt(function(l){var v=l[o],T=Hi(l,0,o);return v&&kr(T,v),bn(r,this,T)})}function e1(r,o,l){var v=!0,T=!0;if(typeof r!="function")throw new me(c);return Gt(l)&&(v="leading"in l?!!l.leading:v,T="trailing"in l?!!l.trailing:T),dm(r,o,{leading:v,maxWait:o,trailing:T})}function t1(r){return sm(r,1)}function n1(r,o){return vf(ef(o),r)}function r1(){if(!arguments.length)return[];var r=arguments[0];return at(r)?r:[r]}function i1(r){return hr(r,b)}function o1(r,o){return o=typeof o=="function"?o:n,hr(r,b,o)}function a1(r){return hr(r,y|b)}function s1(r,o){return o=typeof o=="function"?o:n,hr(r,y|b,o)}function u1(r,o){return o==null||ep(r,o,yn(o))}function Dr(r,o){return r===o||r!==r&&o!==o}var c1=Xu(Hl),l1=Xu(function(r,o){return r>=o}),Po=ap(function(){return arguments}())?ap:function(r){return Jt(r)&&Te.call(r,"callee")&&!wa.call(r,"callee")},at=O.isArray,f1=mo?Cn(mo):wx;function Un(r){return r!=null&&ic(r.length)&&!hi(r)}function rn(r){return Jt(r)&&Un(r)}function d1(r){return r===!0||r===!1||Jt(r)&&Mn(r)==qe}var Ki=Nw||If,h1=go?Cn(go):xx;function p1(r){return Jt(r)&&r.nodeType===1&&!Is(r)}function m1(r){if(r==null)return!0;if(Un(r)&&(at(r)||typeof r=="string"||typeof r.splice=="function"||Ki(r)||Na(r)||Po(r)))return!r.length;var o=Dn(r);if(o==Xe||o==bt)return!r.size;if(Ns(r))return!zl(r).length;for(var l in r)if(Te.call(r,l))return!1;return!0}function g1(r,o){return Es(r,o)}function v1(r,o,l){l=typeof l=="function"?l:n;var v=l?l(r,o):n;return v===n?Es(r,o,n,l):!!v}function yf(r){if(!Jt(r))return!1;var o=Mn(r);return o==xt||o==rt||typeof r.message=="string"&&typeof r.name=="string"&&!Is(r)}function y1(r){return typeof r=="number"&&qh(r)}function hi(r){if(!Gt(r))return!1;var o=Mn(r);return o==He||o==Tt||o==Ye||o==Ft}function pm(r){return typeof r=="number"&&r==ut(r)}function ic(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=oe}function Gt(r){var o=typeof r;return r!=null&&(o=="object"||o=="function")}function Jt(r){return r!=null&&typeof r=="object"}var mm=as?Cn(as):_x;function w1(r,o){return r===o||Ul(r,o,uf(o))}function x1(r,o,l){return l=typeof l=="function"?l:n,Ul(r,o,uf(o),l)}function b1(r){return gm(r)&&r!=+r}function _1(r){if(ob(r))throw new j(u);return sp(r)}function E1(r){return r===null}function S1(r){return r==null}function gm(r){return typeof r=="number"||Jt(r)&&Mn(r)==it}function Is(r){if(!Jt(r)||Mn(r)!=et)return!1;var o=fn(r);if(o===null)return!0;var l=Te.call(o,"constructor")&&o.constructor;return typeof l=="function"&&l instanceof l&&Ae.call(l)==lt}var wf=Su?Cn(Su):Ex;function T1(r){return pm(r)&&r>=-oe&&r<=oe}var vm=vo?Cn(vo):Sx;function oc(r){return typeof r=="string"||!at(r)&&Jt(r)&&Mn(r)==sn}function tr(r){return typeof r=="symbol"||Jt(r)&&Mn(r)==Ut}var Na=pa?Cn(pa):Tx;function N1(r){return r===n}function k1(r){return Jt(r)&&Dn(r)==Qt}function I1(r){return Jt(r)&&Mn(r)==zt}var C1=Xu(Yl),O1=Xu(function(r,o){return r<=o});function ym(r){if(!r)return[];if(Un(r))return oc(r)?d(r):Kn(r);if(ms&&r[ms])return Rl(r[ms]());var o=Dn(r),l=o==Xe?So:o==bt?$i:ka;return l(r)}function pi(r){if(!r)return r===0?r:0;if(r=gr(r),r===pe||r===-pe){var o=r<0?-1:1;return o*X}return r===r?r:0}function ut(r){var o=pi(r),l=o%1;return o===o?l?o-l:o:0}function wm(r){return r?Co(ut(r),0,ge):0}function gr(r){if(typeof r=="number")return r;if(tr(r))return de;if(Gt(r)){var o=typeof r.valueOf=="function"?r.valueOf():r;r=Gt(o)?o+"":o}if(typeof r!="string")return r===0?r:+r;r=Cu(r);var l=At.test(r);return l||gn.test(r)?la(r.slice(2),l?2:8):yt.test(r)?de:+r}function xm(r){return Gr(r,zn(r))}function A1(r){return r?Co(ut(r),-oe,oe):r===0?r:0}function Nt(r){return r==null?"":er(r)}var D1=Ea(function(r,o){if(Ns(o)||Un(o)){Gr(o,yn(o),r);return}for(var l in o)Te.call(o,l)&&xs(r,l,o[l])}),bm=Ea(function(r,o){Gr(o,zn(o),r)}),ac=Ea(function(r,o,l,v){Gr(o,zn(o),r,v)}),P1=Ea(function(r,o,l,v){Gr(o,yn(o),r,v)}),R1=fi(Fl);function M1(r,o){var l=_a(r);return o==null?l:Jh(l,o)}var L1=pt(function(r,o){r=Y(r);var l=-1,v=o.length,T=v>2?o[2]:n;for(T&&Ln(o[0],o[1],T)&&(v=1);++l<v;)for(var P=o[l],B=zn(P),G=-1,ie=B.length;++G<ie;){var be=B[G],_e=r[be];(_e===n||Dr(_e,De[be])&&!Te.call(r,be))&&(r[be]=P[be])}return r}),$1=pt(function(r){return r.push(n,Wp),bn(_m,n,r)});function W1(r,o){return ga(r,Ge(o,3),Xr)}function F1(r,o){return ga(r,Ge(o,3),Bl)}function j1(r,o){return r==null?r:jl(r,Ge(o,3),zn)}function B1(r,o){return r==null?r:ip(r,Ge(o,3),zn)}function H1(r,o){return r&&Xr(r,Ge(o,3))}function K1(r,o){return r&&Bl(r,Ge(o,3))}function U1(r){return r==null?[]:Bu(r,yn(r))}function z1(r){return r==null?[]:Bu(r,zn(r))}function xf(r,o,l){var v=r==null?n:Oo(r,o);return v===n?l:v}function Y1(r,o){return r!=null&&Bp(r,o,mx)}function bf(r,o){return r!=null&&Bp(r,o,gx)}var V1=Pp(function(r,o,l){o!=null&&typeof o.toString!="function"&&(o=nt.call(o)),r[o]=l},Ef(Yn)),q1=Pp(function(r,o,l){o!=null&&typeof o.toString!="function"&&(o=nt.call(o)),Te.call(r,o)?r[o].push(l):r[o]=[l]},Ge),X1=pt(_s);function yn(r){return Un(r)?Zh(r):zl(r)}function zn(r){return Un(r)?Zh(r,!0):Nx(r)}function G1(r,o){var l={};return o=Ge(o,3),Xr(r,function(v,T,P){ci(l,o(v,T,P),v)}),l}function Z1(r,o){var l={};return o=Ge(o,3),Xr(r,function(v,T,P){ci(l,T,o(v,T,P))}),l}var Q1=Ea(function(r,o,l){Hu(r,o,l)}),_m=Ea(function(r,o,l,v){Hu(r,o,l,v)}),J1=fi(function(r,o){var l={};if(r==null)return l;var v=!1;o=Pt(o,function(P){return P=Bi(P,r),v||(v=P.length>1),P}),Gr(r,af(r),l),v&&(l=hr(l,y|x|b,Vx));for(var T=o.length;T--;)Zl(l,o[T]);return l});function eE(r,o){return Em(r,rc(Ge(o)))}var tE=fi(function(r,o){return r==null?{}:Ix(r,o)});function Em(r,o){if(r==null)return{};var l=Pt(af(r),function(v){return[v]});return o=Ge(o),pp(r,l,function(v,T){return o(v,T[0])})}function nE(r,o,l){o=Bi(o,r);var v=-1,T=o.length;for(T||(T=1,r=n);++v<T;){var P=r==null?n:r[Zr(o[v])];P===n&&(v=T,P=l),r=hi(P)?P.call(r):P}return r}function rE(r,o,l){return r==null?r:Ss(r,o,l)}function iE(r,o,l,v){return v=typeof v=="function"?v:n,r==null?r:Ss(r,o,l,v)}var Sm=Lp(yn),Tm=Lp(zn);function oE(r,o,l){var v=at(r),T=v||Ki(r)||Na(r);if(o=Ge(o,4),l==null){var P=r&&r.constructor;T?l=v?new P:[]:Gt(r)?l=hi(P)?_a(fn(r)):{}:l={}}return(T?In:Xr)(r,function(B,G,ie){return o(l,B,G,ie)}),l}function aE(r,o){return r==null?!0:Zl(r,o)}function sE(r,o,l){return r==null?r:wp(r,o,ef(l))}function uE(r,o,l,v){return v=typeof v=="function"?v:n,r==null?r:wp(r,o,ef(l),v)}function ka(r){return r==null?[]:Eo(r,yn(r))}function cE(r){return r==null?[]:Eo(r,zn(r))}function lE(r,o,l){return l===n&&(l=o,o=n),l!==n&&(l=gr(l),l=l===l?l:0),o!==n&&(o=gr(o),o=o===o?o:0),Co(gr(r),o,l)}function fE(r,o,l){return o=pi(o),l===n?(l=o,o=0):l=pi(l),r=gr(r),vx(r,o,l)}function dE(r,o,l){if(l&&typeof l!="boolean"&&Ln(r,o,l)&&(o=l=n),l===n&&(typeof o=="boolean"?(l=o,o=n):typeof r=="boolean"&&(l=r,r=n)),r===n&&o===n?(r=0,o=1):(r=pi(r),o===n?(o=r,r=0):o=pi(o)),r>o){var v=r;r=o,o=v}if(l||r%1||o%1){var T=Xh();return An(r+T*(o-r+ca("1e-"+((T+"").length-1))),o)}return ql(r,o)}var hE=Sa(function(r,o,l){return o=o.toLowerCase(),r+(l?Nm(o):o)});function Nm(r){return _f(Nt(r).toLowerCase())}function km(r){return r=Nt(r),r&&r.replace(Dt,Pl).replace(Yr,"")}function pE(r,o,l){r=Nt(r),o=er(o);var v=r.length;l=l===n?v:Co(ut(l),0,v);var T=l;return l-=o.length,l>=0&&r.slice(l,T)==o}function mE(r){return r=Nt(r),r&&Ze.test(r)?r.replace(Ue,ya):r}function gE(r){return r=Nt(r),r&&Rt.test(r)?r.replace(Et,"\\$&"):r}var vE=Sa(function(r,o,l){return r+(l?"-":"")+o.toLowerCase()}),yE=Sa(function(r,o,l){return r+(l?" ":"")+o.toLowerCase()}),wE=Op("toLowerCase");function xE(r,o,l){r=Nt(r),o=ut(o);var v=o?s(r):0;if(!o||v>=o)return r;var T=(o-v)/2;return qu(Mu(T),l)+r+qu(Ru(T),l)}function bE(r,o,l){r=Nt(r),o=ut(o);var v=o?s(r):0;return o&&v<o?r+qu(o-v,l):r}function _E(r,o,l){r=Nt(r),o=ut(o);var v=o?s(r):0;return o&&v<o?qu(o-v,l)+r:r}function EE(r,o,l){return l||o==null?o=0:o&&(o=+o),Ow(Nt(r).replace(sr,""),o||0)}function SE(r,o,l){return(l?Ln(r,o,l):o===n)?o=1:o=ut(o),Xl(Nt(r),o)}function TE(){var r=arguments,o=Nt(r[0]);return r.length<3?o:o.replace(r[1],r[2])}var NE=Sa(function(r,o,l){return r+(l?"_":"")+o.toLowerCase()});function kE(r,o,l){return l&&typeof l!="number"&&Ln(r,o,l)&&(o=l=n),l=l===n?ge:l>>>0,l?(r=Nt(r),r&&(typeof o=="string"||o!=null&&!wf(o))&&(o=er(o),!o&&Or(r))?Hi(d(r),0,l):r.split(o,l)):[]}var IE=Sa(function(r,o,l){return r+(l?" ":"")+_f(o)});function CE(r,o,l){return r=Nt(r),l=l==null?0:Co(ut(l),0,r.length),o=er(o),r.slice(l,l+o.length)==o}function OE(r,o,l){var v=D.templateSettings;l&&Ln(r,o,l)&&(o=n),r=Nt(r),o=ac({},o,v,$p);var T=ac({},o.imports,v.imports,$p),P=yn(T),B=Eo(T,P),G,ie,be=0,_e=o.interpolate||wn,Ne="__p += '",Le=he((o.escape||wn).source+"|"+_e.source+"|"+(_e===$t?Ur:wn).source+"|"+(o.evaluate||wn).source+"|$","g"),Ke="//# sourceURL="+(Te.call(o,"sourceURL")?(o.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ho+"]")+`
`;r.replace(Le,function(Je,gt,wt,nr,$n,rr){return wt||(wt=nr),Ne+=r.slice(be,rr).replace(Zn,Cr),gt&&(G=!0,Ne+=`' +
__e(`+gt+`) +
'`),$n&&(ie=!0,Ne+=`';
`+$n+`;
__p += '`),wt&&(Ne+=`' +
((__t = (`+wt+`)) == null ? '' : __t) +
'`),be=rr+Je.length,Je}),Ne+=`';
`;var Qe=Te.call(o,"variable")&&o.variable;if(!Qe)Ne=`with (obj) {
`+Ne+`
}
`;else if(Gn.test(Qe))throw new j(f);Ne=(ie?Ne.replace(xe,""):Ne).replace(fe,"$1").replace(Ce,"$1;"),Ne="function("+(Qe||"obj")+`) {
`+(Qe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(G?", __e = _.escape":"")+(ie?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ne+`return __p
}`;var dt=Cm(function(){return q(P,Ke+"return "+Ne).apply(n,B)});if(dt.source=Ne,yf(dt))throw dt;return dt}function AE(r){return Nt(r).toLowerCase()}function DE(r){return Nt(r).toUpperCase()}function PE(r,o,l){if(r=Nt(r),r&&(l||o===n))return Cu(r);if(!r||!(o=er(o)))return r;var v=d(r),T=d(o),P=hs(v,T),B=Ou(v,T)+1;return Hi(v,P,B).join("")}function RE(r,o,l){if(r=Nt(r),r&&(l||o===n))return r.slice(0,g(r)+1);if(!r||!(o=er(o)))return r;var v=d(r),T=Ou(v,d(o))+1;return Hi(v,0,T).join("")}function ME(r,o,l){if(r=Nt(r),r&&(l||o===n))return r.replace(sr,"");if(!r||!(o=er(o)))return r;var v=d(r),T=hs(v,d(o));return Hi(v,T).join("")}function LE(r,o){var l=J,v=V;if(Gt(o)){var T="separator"in o?o.separator:T;l="length"in o?ut(o.length):l,v="omission"in o?er(o.omission):v}r=Nt(r);var P=r.length;if(Or(r)){var B=d(r);P=B.length}if(l>=P)return r;var G=l-s(v);if(G<1)return v;var ie=B?Hi(B,0,G).join(""):r.slice(0,G);if(T===n)return ie+v;if(B&&(G+=ie.length-G),wf(T)){if(r.slice(G).search(T)){var be,_e=ie;for(T.global||(T=he(T.source,Nt(ot.exec(T))+"g")),T.lastIndex=0;be=T.exec(_e);)var Ne=be.index;ie=ie.slice(0,Ne===n?G:Ne)}}else if(r.indexOf(er(T),G)!=G){var Le=ie.lastIndexOf(T);Le>-1&&(ie=ie.slice(0,Le))}return ie+v}function $E(r){return r=Nt(r),r&&Ve.test(r)?r.replace(We,w):r}var WE=Sa(function(r,o,l){return r+(l?" ":"")+o.toUpperCase()}),_f=Op("toUpperCase");function Im(r,o,l){return r=Nt(r),o=l?n:o,o===n?Hn(r)?$(r):ma(r):r.match(o)||[]}var Cm=pt(function(r,o){try{return bn(r,n,o)}catch(l){return yf(l)?l:new j(l)}}),FE=fi(function(r,o){return In(o,function(l){l=Zr(l),ci(r,l,gf(r[l],r))}),r});function jE(r){var o=r==null?0:r.length,l=Ge();return r=o?Pt(r,function(v){if(typeof v[1]!="function")throw new me(c);return[l(v[0]),v[1]]}):[],pt(function(v){for(var T=-1;++T<o;){var P=r[T];if(bn(P[0],this,v))return bn(P[1],this,v)}})}function BE(r){return dx(hr(r,y))}function Ef(r){return function(){return r}}function HE(r,o){return r==null||r!==r?o:r}var KE=Dp(),UE=Dp(!0);function Yn(r){return r}function Sf(r){return up(typeof r=="function"?r:hr(r,y))}function zE(r){return lp(hr(r,y))}function YE(r,o){return fp(r,hr(o,y))}var VE=pt(function(r,o){return function(l){return _s(l,r,o)}}),qE=pt(function(r,o){return function(l){return _s(r,l,o)}});function Tf(r,o,l){var v=yn(o),T=Bu(o,v);l==null&&!(Gt(o)&&(T.length||!v.length))&&(l=o,o=r,r=this,T=Bu(o,yn(o)));var P=!(Gt(l)&&"chain"in l)||!!l.chain,B=hi(r);return In(T,function(G){var ie=o[G];r[G]=ie,B&&(r.prototype[G]=function(){var be=this.__chain__;if(P||be){var _e=r(this.__wrapped__),Ne=_e.__actions__=Kn(this.__actions__);return Ne.push({func:ie,args:arguments,thisArg:r}),_e.__chain__=be,_e}return ie.apply(r,kr([this.value()],arguments))})}),r}function XE(){return hn._===this&&(hn._=ft),this}function Nf(){}function GE(r){return r=ut(r),pt(function(o){return dp(o,r)})}var ZE=nf(Pt),QE=nf(Di),JE=nf(Ir);function Om(r){return lf(r)?bo(Zr(r)):Cx(r)}function eS(r){return function(o){return r==null?n:Oo(r,o)}}var tS=Rp(),nS=Rp(!0);function kf(){return[]}function If(){return!1}function rS(){return{}}function iS(){return""}function oS(){return!0}function aS(r,o){if(r=ut(r),r<1||r>oe)return[];var l=ge,v=An(r,ge);o=Ge(o),r-=ge;for(var T=va(v,o);++l<r;)o(l);return T}function sS(r){return at(r)?Pt(r,Zr):tr(r)?[r]:Kn(Gp(Nt(r)))}function uS(r){var o=++Pe;return Nt(r)+o}var cS=Vu(function(r,o){return r+o},0),lS=rf("ceil"),fS=Vu(function(r,o){return r/o},1),dS=rf("floor");function hS(r){return r&&r.length?ju(r,Yn,Hl):n}function pS(r,o){return r&&r.length?ju(r,Ge(o,2),Hl):n}function mS(r){return Tu(r,Yn)}function gS(r,o){return Tu(r,Ge(o,2))}function vS(r){return r&&r.length?ju(r,Yn,Yl):n}function yS(r,o){return r&&r.length?ju(r,Ge(o,2),Yl):n}var wS=Vu(function(r,o){return r*o},1),xS=rf("round"),bS=Vu(function(r,o){return r-o},0);function _S(r){return r&&r.length?ds(r,Yn):0}function ES(r,o){return r&&r.length?ds(r,Ge(o,2)):0}return D.after=z_,D.ary=sm,D.assign=D1,D.assignIn=bm,D.assignInWith=ac,D.assignWith=P1,D.at=R1,D.before=um,D.bind=gf,D.bindAll=FE,D.bindKey=cm,D.castArray=r1,D.chain=im,D.chunk=db,D.compact=hb,D.concat=pb,D.cond=jE,D.conforms=BE,D.constant=Ef,D.countBy=__,D.create=M1,D.curry=lm,D.curryRight=fm,D.debounce=dm,D.defaults=L1,D.defaultsDeep=$1,D.defer=Y_,D.delay=V_,D.difference=mb,D.differenceBy=gb,D.differenceWith=vb,D.drop=yb,D.dropRight=wb,D.dropRightWhile=xb,D.dropWhile=bb,D.fill=_b,D.filter=S_,D.flatMap=k_,D.flatMapDeep=I_,D.flatMapDepth=C_,D.flatten=em,D.flattenDeep=Eb,D.flattenDepth=Sb,D.flip=q_,D.flow=KE,D.flowRight=UE,D.fromPairs=Tb,D.functions=U1,D.functionsIn=z1,D.groupBy=O_,D.initial=kb,D.intersection=Ib,D.intersectionBy=Cb,D.intersectionWith=Ob,D.invert=V1,D.invertBy=q1,D.invokeMap=D_,D.iteratee=Sf,D.keyBy=P_,D.keys=yn,D.keysIn=zn,D.map=ec,D.mapKeys=G1,D.mapValues=Z1,D.matches=zE,D.matchesProperty=YE,D.memoize=nc,D.merge=Q1,D.mergeWith=_m,D.method=VE,D.methodOf=qE,D.mixin=Tf,D.negate=rc,D.nthArg=GE,D.omit=J1,D.omitBy=eE,D.once=X_,D.orderBy=R_,D.over=ZE,D.overArgs=G_,D.overEvery=QE,D.overSome=JE,D.partial=vf,D.partialRight=hm,D.partition=M_,D.pick=tE,D.pickBy=Em,D.property=Om,D.propertyOf=eS,D.pull=Rb,D.pullAll=nm,D.pullAllBy=Mb,D.pullAllWith=Lb,D.pullAt=$b,D.range=tS,D.rangeRight=nS,D.rearg=Z_,D.reject=W_,D.remove=Wb,D.rest=Q_,D.reverse=pf,D.sampleSize=j_,D.set=rE,D.setWith=iE,D.shuffle=B_,D.slice=Fb,D.sortBy=U_,D.sortedUniq=Yb,D.sortedUniqBy=Vb,D.split=kE,D.spread=J_,D.tail=qb,D.take=Xb,D.takeRight=Gb,D.takeRightWhile=Zb,D.takeWhile=Qb,D.tap=h_,D.throttle=e1,D.thru=Ju,D.toArray=ym,D.toPairs=Sm,D.toPairsIn=Tm,D.toPath=sS,D.toPlainObject=xm,D.transform=oE,D.unary=t1,D.union=Jb,D.unionBy=e_,D.unionWith=t_,D.uniq=n_,D.uniqBy=r_,D.uniqWith=i_,D.unset=aE,D.unzip=mf,D.unzipWith=rm,D.update=sE,D.updateWith=uE,D.values=ka,D.valuesIn=cE,D.without=o_,D.words=Im,D.wrap=n1,D.xor=a_,D.xorBy=s_,D.xorWith=u_,D.zip=c_,D.zipObject=l_,D.zipObjectDeep=f_,D.zipWith=d_,D.entries=Sm,D.entriesIn=Tm,D.extend=bm,D.extendWith=ac,Tf(D,D),D.add=cS,D.attempt=Cm,D.camelCase=hE,D.capitalize=Nm,D.ceil=lS,D.clamp=lE,D.clone=i1,D.cloneDeep=a1,D.cloneDeepWith=s1,D.cloneWith=o1,D.conformsTo=u1,D.deburr=km,D.defaultTo=HE,D.divide=fS,D.endsWith=pE,D.eq=Dr,D.escape=mE,D.escapeRegExp=gE,D.every=E_,D.find=T_,D.findIndex=Qp,D.findKey=W1,D.findLast=N_,D.findLastIndex=Jp,D.findLastKey=F1,D.floor=dS,D.forEach=om,D.forEachRight=am,D.forIn=j1,D.forInRight=B1,D.forOwn=H1,D.forOwnRight=K1,D.get=xf,D.gt=c1,D.gte=l1,D.has=Y1,D.hasIn=bf,D.head=tm,D.identity=Yn,D.includes=A_,D.indexOf=Nb,D.inRange=fE,D.invoke=X1,D.isArguments=Po,D.isArray=at,D.isArrayBuffer=f1,D.isArrayLike=Un,D.isArrayLikeObject=rn,D.isBoolean=d1,D.isBuffer=Ki,D.isDate=h1,D.isElement=p1,D.isEmpty=m1,D.isEqual=g1,D.isEqualWith=v1,D.isError=yf,D.isFinite=y1,D.isFunction=hi,D.isInteger=pm,D.isLength=ic,D.isMap=mm,D.isMatch=w1,D.isMatchWith=x1,D.isNaN=b1,D.isNative=_1,D.isNil=S1,D.isNull=E1,D.isNumber=gm,D.isObject=Gt,D.isObjectLike=Jt,D.isPlainObject=Is,D.isRegExp=wf,D.isSafeInteger=T1,D.isSet=vm,D.isString=oc,D.isSymbol=tr,D.isTypedArray=Na,D.isUndefined=N1,D.isWeakMap=k1,D.isWeakSet=I1,D.join=Ab,D.kebabCase=vE,D.last=mr,D.lastIndexOf=Db,D.lowerCase=yE,D.lowerFirst=wE,D.lt=C1,D.lte=O1,D.max=hS,D.maxBy=pS,D.mean=mS,D.meanBy=gS,D.min=vS,D.minBy=yS,D.stubArray=kf,D.stubFalse=If,D.stubObject=rS,D.stubString=iS,D.stubTrue=oS,D.multiply=wS,D.nth=Pb,D.noConflict=XE,D.noop=Nf,D.now=tc,D.pad=xE,D.padEnd=bE,D.padStart=_E,D.parseInt=EE,D.random=dE,D.reduce=L_,D.reduceRight=$_,D.repeat=SE,D.replace=TE,D.result=nE,D.round=xS,D.runInContext=I,D.sample=F_,D.size=H_,D.snakeCase=NE,D.some=K_,D.sortedIndex=jb,D.sortedIndexBy=Bb,D.sortedIndexOf=Hb,D.sortedLastIndex=Kb,D.sortedLastIndexBy=Ub,D.sortedLastIndexOf=zb,D.startCase=IE,D.startsWith=CE,D.subtract=bS,D.sum=_S,D.sumBy=ES,D.template=OE,D.times=aS,D.toFinite=pi,D.toInteger=ut,D.toLength=wm,D.toLower=AE,D.toNumber=gr,D.toSafeInteger=A1,D.toString=Nt,D.toUpper=DE,D.trim=PE,D.trimEnd=RE,D.trimStart=ME,D.truncate=LE,D.unescape=$E,D.uniqueId=uS,D.upperCase=WE,D.upperFirst=_f,D.each=om,D.eachRight=am,D.first=tm,Tf(D,function(){var r={};return Xr(D,function(o,l){Te.call(D.prototype,l)||(r[l]=o)}),r}(),{chain:!1}),D.VERSION=i,In(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){D[r].placeholder=D}),In(["drop","take"],function(r,o){vt.prototype[r]=function(l){l=l===n?1:pn(ut(l),0);var v=this.__filtered__&&!o?new vt(this):this.clone();return v.__filtered__?v.__takeCount__=An(l,v.__takeCount__):v.__views__.push({size:An(l,ge),type:r+(v.__dir__<0?"Right":"")}),v},vt.prototype[r+"Right"]=function(l){return this.reverse()[r](l).reverse()}}),In(["filter","map","takeWhile"],function(r,o){var l=o+1,v=l==M||l==W;vt.prototype[r]=function(T){var P=this.clone();return P.__iteratees__.push({iteratee:Ge(T,3),type:l}),P.__filtered__=P.__filtered__||v,P}}),In(["head","last"],function(r,o){var l="take"+(o?"Right":"");vt.prototype[r]=function(){return this[l](1).value()[0]}}),In(["initial","tail"],function(r,o){var l="drop"+(o?"":"Right");vt.prototype[r]=function(){return this.__filtered__?new vt(this):this[l](1)}}),vt.prototype.compact=function(){return this.filter(Yn)},vt.prototype.find=function(r){return this.filter(r).head()},vt.prototype.findLast=function(r){return this.reverse().find(r)},vt.prototype.invokeMap=pt(function(r,o){return typeof r=="function"?new vt(this):this.map(function(l){return _s(l,r,o)})}),vt.prototype.reject=function(r){return this.filter(rc(Ge(r)))},vt.prototype.slice=function(r,o){r=ut(r);var l=this;return l.__filtered__&&(r>0||o<0)?new vt(l):(r<0?l=l.takeRight(-r):r&&(l=l.drop(r)),o!==n&&(o=ut(o),l=o<0?l.dropRight(-o):l.take(o-r)),l)},vt.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},vt.prototype.toArray=function(){return this.take(ge)},Xr(vt.prototype,function(r,o){var l=/^(?:filter|find|map|reject)|While$/.test(o),v=/^(?:head|last)$/.test(o),T=D[v?"take"+(o=="last"?"Right":""):o],P=v||/^find/.test(o);T&&(D.prototype[o]=function(){var B=this.__wrapped__,G=v?[1]:arguments,ie=B instanceof vt,be=G[0],_e=ie||at(B),Ne=function(gt){var wt=T.apply(D,kr([gt],G));return v&&Le?wt[0]:wt};_e&&l&&typeof be=="function"&&be.length!=1&&(ie=_e=!1);var Le=this.__chain__,Ke=!!this.__actions__.length,Qe=P&&!Le,dt=ie&&!Ke;if(!P&&_e){B=dt?B:new vt(this);var Je=r.apply(B,G);return Je.__actions__.push({func:Ju,args:[Ne],thisArg:n}),new dr(Je,Le)}return Qe&&dt?r.apply(this,G):(Je=this.thru(Ne),Qe?v?Je.value()[0]:Je.value():Je)})}),In(["pop","push","shift","sort","splice","unshift"],function(r){var o=we[r],l=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",v=/^(?:pop|shift)$/.test(r);D.prototype[r]=function(){var T=arguments;if(v&&!this.__chain__){var P=this.value();return o.apply(at(P)?P:[],T)}return this[l](function(B){return o.apply(at(B)?B:[],T)})}}),Xr(vt.prototype,function(r,o){var l=D[o];if(l){var v=l.name+"";Te.call(ba,v)||(ba[v]=[]),ba[v].push({name:o,func:l})}}),ba[Yu(n,L).name]=[{name:"wrapper",func:n}],vt.prototype.clone=$w,vt.prototype.reverse=Ww,vt.prototype.value=Fw,D.prototype.at=p_,D.prototype.chain=m_,D.prototype.commit=g_,D.prototype.next=v_,D.prototype.plant=w_,D.prototype.reverse=x_,D.prototype.toJSON=D.prototype.valueOf=D.prototype.value=b_,D.prototype.first=D.prototype.head,ms&&(D.prototype[ms]=y_),D},Z=H();Nr?((Nr.exports=Z)._=Z,os._=Z):hn._=Z}).call(Mr)})(Wc,Wc.exports);var Th=Wc.exports;const Nh=(e,t)=>{const n=e.sortEventTime.localeCompare(t.sortEventTime);return n!==0?n:!e.sortEventId||!t.sortEventId?0:parseInt(e.sortEventId)-parseInt(t.sortEventId)},Mg=(e,t)=>{if(!t.find(h=>Si(h)&&Th.isEqual(Jo(h),e)))throw new Error(`Root workflow node ${e.workflowId} not found`);const i=py(t),a=hy(e,t),u=UA(i),c=Tc(a,u),f=Nc(c);return{nodes:u,edges:f,virtualTree:a,renderTree:c}},hy=(e,t)=>{const n=t.find(c=>Si(c)&&Th.isEqual(Jo(c),e));if(!n)throw new Error(`Root workflow node ${e.workflowId} not found`);const i={id:Hs(n),children:[]},a=new Set;a.add(Hs(n));const u=[{nodeId:Hs(n),treeNode:i}];for(;u.length>0;){const{nodeId:c,treeNode:f}=u.shift(),p=t.filter(m=>{const y=dA(m);return y?jr(y)===c:!1}).sort(Nh);for(const m of p){const y=Hs(m);if(a.has(y))continue;a.add(y);const x={id:y,children:[]};f.children.push(x),u.push({nodeId:y,treeNode:x})}}return i},Tc=(e,t)=>{const n=new Map,i=new Map,a=new Set;t.forEach(h=>{n.set(h.id,h.type),h.type==="batch"&&i.set(h.id,h)});const u=new Map;i.forEach((h,p)=>{h.referencedBatches.forEach(m=>{const y="activityId"in m?du(m):jr(m);u.set(y,p)})});const c=new Set,f=h=>{if(a.has(h.id))return c.add(h.id),{id:h.id,children:[]};if(a.add(h.id),h.isExpanded===!1)return c.add(h.id),{id:h.id,children:[]};const p=[],m=new Map;for(const y of h.children){const x=u.get(y.id);x?(m.has(x)||m.set(x,[]),m.get(x).push(y),c.add(y.id)):p.push(f(y))}for(const[y,x]of m){const b={id:y,children:[],isBatchNode:!0};c.add(y);const N=x[0],S=h.children.findIndex(C=>C.id===N.id);S!==-1?p.splice(S,0,b):p.push(b)}return c.add(h.id),{id:h.id,children:p}};return f(e)},Nc=e=>{const t=[],n=new Set,i=f=>{n.add(f.id),f.children.forEach(h=>i(h))};i(e);const a=new Set,u=(f,h=null)=>{const p=f.children;if(p.length===0)return;const m=p[0];if(n.has(f.id)){if(n.has(m.id)){const y=`${f.id}:${m.id}:child`;a.has(y)||(a.add(y),t.push({source_id:f.id,target_id:m.id,type:"child"}))}}for(let y=0;y<p.length-1;y++){const x=p[y],b=p[y+1];if(!n.has(x.id)||!n.has(b.id))continue;const N=`${x.id}:${b.id}:sibling`;a.has(N)||(a.add(N),t.push({source_id:x.id,target_id:b.id,type:"sibling"}))}p.forEach(y=>u(y,f.id))};return u(e),t.filter(f=>n.has(f.source_id)&&n.has(f.target_id))},py=e=>{const t={};let n=[];for(const i of e){let a=i.workflowTaskCompletedEventId;if(a===void 0||a==="-1"){n.push(i);continue}t[a]||(t[a]=[]),t[a].push(i)}for(const i in t){const a=t[i];if(a.length<=5){n=n.concat(a);continue}const u=a[0],c=KA(u,a);n.push(c)}return n.sort(Nh),py.originalItems=e,n},KA=(e,t)=>{const i=[...t].sort(Nh)[0],a={...e,sortEventTime:i.sortEventTime,sortEventId:i.sortEventId||e.sortEventId||"0",workflowTaskCompletedEventId:i.workflowTaskCompletedEventId||e.workflowTaskCompletedEventId||"0"},u=Hs(e);return a.__isBatch=!0,a.__batchItems=t,a.__batchCount=t.length,a.__originalId=u,a},UA=e=>e.map(t=>ry(t));class zA{constructor(){this.endpoint="localhost:7531"}async checkHealth(){const t=`http://${this.endpoint}/health`;return(await fetch(t)).ok}async searchWorkflows(t,n){t||(t="");const i=`http://${this.endpoint}/search?namespace=${n}&query=${encodeURIComponent(t)}`,a=await fetch(i);if(!a.ok)throw new Error(`Failed to search workflows. Status: ${a.status}`);const u=await a.json();if(!u.executions)return{executions:[]};for(let c of u.executions)c.status=Ig(c.status).toLowerCase().split("_").map(f=>f.charAt(0).toUpperCase()+f.slice(1)).join("");return u}async getRootWorkflowData(t,n,i){const a=await this.getWorkflowHistoryData(t,n,i);return(await Ng(a,t,i)).filter(c=>c.type==="workflow")}async getRootWorkflowEnrichedData(t,n,i){const a=await this.getWorkflowHistoryData(t,n,i),u=await Ng(a,t,i);return await this.enrichChildWorkflows(u,t),u}async enrichChildWorkflows(t,n){var i,a,u,c;for(const f of t)if((f.type==="workflow"||f.type==="childWorkflow")&&f.status!=="COMPLETED"){const h=await this.getWorkflowData(n,f.workflowId,f.runId);if(f.status=Ig(h.workflowExecutionInfo.status),f.startTime=h.workflowExecutionInfo.startTime,f.endTime=h.workflowExecutionInfo.closeTime,f.parentWorkflowId=(a=(i=h.workflowExecutionInfo)==null?void 0:i.parentExecution)==null?void 0:a.workflowId,f.parentWorkflowRunId=(c=(u=h.workflowExecutionInfo)==null?void 0:u.parentExecution)==null?void 0:c.runId,h.pendingActivities)for(const p of h.pendingActivities){const m=t.find(y=>y.type==="activity"&&y.activityId===p.activityId);m&&(m.attempts=p.attempt,m.attempts&&m.attempts>1&&(m.status="RETRYING"),m.status=="SCHEDULED"&&(m.status="PENDING"),m.lastStartedTime=p.lastStartedTime,m.lastAttemptCompleteTime=p.lastAttemptCompleteTime,m.lastWorkerIdentity=p.lastWorkerIdentity,p.lastFailure&&(m.lastFailure=JSON.stringify(p.lastFailure)))}}}async getWorkflowData(t,n,i=""){const a=`http://${this.endpoint}/workflow/data?namespace=${t}&id=${encodeURIComponent(n)}&runId=${i}`,u=await fetch(a);if(!u.ok)throw u.status===404?new Error(`workflow ${n} not found`):new Error(`Failed to fetch workflow data. Status: ${u.status}`);return await u.json()}async getWorkflowHistoryData(t,n,i){const a=`http://${this.endpoint}/workflow?id=${encodeURIComponent(n)}&namespace=${t}&runId=${i}`,u=await fetch(a);if(!u.ok)throw new Error(`Failed to fetch workflow history. Status: ${u.status}`);return await u.json()}}const sl=new zA,YA=async(e,t,n)=>(n||(n=""),await sl.getRootWorkflowEnrichedData(e,t,n)),VA=async()=>{try{return await sl.checkHealth()}catch{return!1}};async function Nd(e,t,n,i=0){const a=[{id:t,runId:n,workflowTaskCompletedEventId:"-1",depth:i}],u=new Set;for(;a.length>0;){const{id:c,runId:f,workflowTaskCompletedEventId:h,depth:p}=a.shift();if(u.has(c))continue;const m=await rl(c,f);if(m&&!m.isPlaceholder){u.add(c);continue}try{const y=await YA(e,c,f);u.add(c);const x=[];for(const b of y)b.type==="workflow"?await Tg({...b,workflowTaskCompletedEventId:h,isPlaceholder:!1}):b.type==="childWorkflow"?(x.push({workflowId:b.workflowId,workflowRunId:b.runId,workflowTaskCompletedEventId:b.workflowTaskCompletedEventId}),await Tg({...b,type:"workflow",isPlaceholder:!0})):b.type==="activity"&&await rA(b);p>0&&x.length>0&&x.forEach(b=>{a.push({id:b.workflowId,runId:b.workflowRunId,workflowTaskCompletedEventId:b.workflowTaskCompletedEventId,depth:p-1})})}catch(y){console.error("Error processing workflow:",y)}}}const Lg=async(e,t)=>await sl.searchWorkflows(t,e),qA=async(e,t,n)=>(await sl.getRootWorkflowData(e,t,n)).filter(a=>a.type==="workflow"&&a.workflowId===t&&a.runId===n)[0];var my=Symbol.for("immer-nothing"),$g=Symbol.for("immer-draftable"),or=Symbol.for("immer-state");function $r(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ya=Object.getPrototypeOf;function Va(e){return!!e&&!!e[or]}function Zo(e){var t;return e?gy(e)||Array.isArray(e)||!!e[$g]||!!((t=e.constructor)!=null&&t[$g])||cl(e)||ll(e):!1}var XA=Object.prototype.constructor.toString();function gy(e){if(!e||typeof e!="object")return!1;const t=Ya(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===XA}function Fc(e,t){ul(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,i)=>t(i,n,e))}function ul(e){const t=e[or];return t?t.type_:Array.isArray(e)?1:cl(e)?2:ll(e)?3:0}function kd(e,t){return ul(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function vy(e,t,n){const i=ul(e);i===2?e.set(t,n):i===3?e.add(n):e[t]=n}function GA(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function cl(e){return e instanceof Map}function ll(e){return e instanceof Set}function Mo(e){return e.copy_||e.base_}function Id(e,t){if(cl(e))return new Map(e);if(ll(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=gy(e);if(t===!0||t==="class_only"&&!n){const i=Object.getOwnPropertyDescriptors(e);delete i[or];let a=Reflect.ownKeys(i);for(let u=0;u<a.length;u++){const c=a[u],f=i[c];f.writable===!1&&(f.writable=!0,f.configurable=!0),(f.get||f.set)&&(i[c]={configurable:!0,writable:!0,enumerable:f.enumerable,value:e[c]})}return Object.create(Ya(e),i)}else{const i=Ya(e);if(i!==null&&n)return{...e};const a=Object.create(i);return Object.assign(a,e)}}function kh(e,t=!1){return fl(e)||Va(e)||!Zo(e)||(ul(e)>1&&(e.set=e.add=e.clear=e.delete=ZA),Object.freeze(e),t&&Object.entries(e).forEach(([n,i])=>kh(i,!0))),e}function ZA(){$r(2)}function fl(e){return Object.isFrozen(e)}var QA={};function Qo(e){const t=QA[e];return t||$r(0,e),t}var iu;function yy(){return iu}function JA(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Wg(e,t){t&&(Qo("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Cd(e){Od(e),e.drafts_.forEach(eD),e.drafts_=null}function Od(e){e===iu&&(iu=e.parent_)}function Fg(e){return iu=JA(iu,e)}function eD(e){const t=e[or];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function jg(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[or].modified_&&(Cd(t),$r(4)),Zo(e)&&(e=jc(t,e),t.parent_||Bc(t,e)),t.patches_&&Qo("Patches").generateReplacementPatches_(n[or].base_,e,t.patches_,t.inversePatches_)):e=jc(t,n,[]),Cd(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==my?e:void 0}function jc(e,t,n){if(fl(t))return t;const i=t[or];if(!i)return Fc(t,(a,u)=>Bg(e,i,t,a,u,n)),t;if(i.scope_!==e)return t;if(!i.modified_)return Bc(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let u=a,c=!1;i.type_===3&&(u=new Set(a),a.clear(),c=!0),Fc(u,(f,h)=>Bg(e,i,a,f,h,n,c)),Bc(e,a,!1),n&&e.patches_&&Qo("Patches").generatePatches_(i,n,e.patches_,e.inversePatches_)}return i.copy_}function Bg(e,t,n,i,a,u,c){if(Va(a)){const f=u&&t&&t.type_!==3&&!kd(t.assigned_,i)?u.concat(i):void 0,h=jc(e,a,f);if(vy(n,i,h),Va(h))e.canAutoFreeze_=!1;else return}else c&&n.add(a);if(Zo(a)&&!fl(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;jc(e,a),(!t||!t.scope_.parent_)&&typeof i!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,i)&&Bc(e,a)}}function Bc(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&kh(t,n)}function tD(e,t){const n=Array.isArray(e),i={type_:n?1:0,scope_:t?t.scope_:yy(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=i,u=Ih;n&&(a=[i],u=ou);const{revoke:c,proxy:f}=Proxy.revocable(a,u);return i.draft_=f,i.revoke_=c,f}var Ih={get(e,t){if(t===or)return e;const n=Mo(e);if(!kd(n,t))return nD(e,n,t);const i=n[t];return e.finalized_||!Zo(i)?i:i===zf(e.base_,t)?(Yf(e),e.copy_[t]=Dd(i,e)):i},has(e,t){return t in Mo(e)},ownKeys(e){return Reflect.ownKeys(Mo(e))},set(e,t,n){const i=wy(Mo(e),t);if(i!=null&&i.set)return i.set.call(e.draft_,n),!0;if(!e.modified_){const a=zf(Mo(e),t),u=a==null?void 0:a[or];if(u&&u.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(GA(n,a)&&(n!==void 0||kd(e.base_,t)))return!0;Yf(e),Ad(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return zf(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Yf(e),Ad(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Mo(e),i=Reflect.getOwnPropertyDescriptor(n,t);return i&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:i.enumerable,value:n[t]}},defineProperty(){$r(11)},getPrototypeOf(e){return Ya(e.base_)},setPrototypeOf(){$r(12)}},ou={};Fc(Ih,(e,t)=>{ou[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});ou.deleteProperty=function(e,t){return ou.set.call(this,e,t,void 0)};ou.set=function(e,t,n){return Ih.set.call(this,e[0],t,n,e[0])};function zf(e,t){const n=e[or];return(n?Mo(n):e)[t]}function nD(e,t,n){var a;const i=wy(t,n);return i?"value"in i?i.value:(a=i.get)==null?void 0:a.call(e.draft_):void 0}function wy(e,t){if(!(t in e))return;let n=Ya(e);for(;n;){const i=Object.getOwnPropertyDescriptor(n,t);if(i)return i;n=Ya(n)}}function Ad(e){e.modified_||(e.modified_=!0,e.parent_&&Ad(e.parent_))}function Yf(e){e.copy_||(e.copy_=Id(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var rD=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,i)=>{if(typeof t=="function"&&typeof n!="function"){const u=n;n=t;const c=this;return function(h=u,...p){return c.produce(h,m=>n.call(this,m,...p))}}typeof n!="function"&&$r(6),i!==void 0&&typeof i!="function"&&$r(7);let a;if(Zo(t)){const u=Fg(this),c=Dd(t,void 0);let f=!0;try{a=n(c),f=!1}finally{f?Cd(u):Od(u)}return Wg(u,i),jg(a,u)}else if(!t||typeof t!="object"){if(a=n(t),a===void 0&&(a=t),a===my&&(a=void 0),this.autoFreeze_&&kh(a,!0),i){const u=[],c=[];Qo("Patches").generateReplacementPatches_(t,a,u,c),i(u,c)}return a}else $r(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(c,...f)=>this.produceWithPatches(c,h=>t(h,...f));let i,a;return[this.produce(t,n,(c,f)=>{i=c,a=f}),i,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Zo(e)||$r(8),Va(e)&&(e=iD(e));const t=Fg(this),n=Dd(e,void 0);return n[or].isManual_=!0,Od(t),n}finishDraft(e,t){const n=e&&e[or];(!n||!n.isManual_)&&$r(9);const{scope_:i}=n;return Wg(i,t),jg(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}n>-1&&(t=t.slice(n+1));const i=Qo("Patches").applyPatches_;return Va(e)?i(e,t):this.produce(e,a=>i(a,t))}};function Dd(e,t){const n=cl(e)?Qo("MapSet").proxyMap_(e,t):ll(e)?Qo("MapSet").proxySet_(e,t):tD(e,t);return(t?t.scope_:yy()).drafts_.push(n),n}function iD(e){return Va(e)||$r(10,e),xy(e)}function xy(e){if(!Zo(e)||fl(e))return e;const t=e[or];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Id(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Id(e,!0);return Fc(n,(i,a)=>{vy(n,i,xy(a))}),t&&(t.finalized_=!1),n}var ar=new rD,Vf=ar.produce;ar.produceWithPatches.bind(ar);ar.setAutoFreeze.bind(ar);ar.setUseStrictShallowCopy.bind(ar);ar.applyPatches.bind(ar);ar.createDraft.bind(ar);ar.finishDraft.bind(ar);const Ma=(e,t)=>{if(e.id===t)return e;for(const n of e.children){const i=Ma(n,t);if(i)return i}return null},by=(e,t)=>{for(const n of e.children)if(n.id===t)return e;for(const n of e.children){const i=by(n,t);if(i)return i}return null};function oD(){const[e,t]=k.useState(!1),[n,i]=k.useState(!1),a=Yo(Sh),u=ol(),c=async(p,m,y)=>{try{t(!0);const x=u.get(Ho),b=u.get(Ba),N=jr({workflowId:m,workflowRunId:y});if(await Nd(p,m,y,2),x){const ue=Ma(x,N);if(ue&&ue.children&&ue.children.length>0){const ce=Vf(x,se=>{const J=Ma(se,N);J&&(J.isExpanded=!0)}),z=Tc(ce,b),Q=Nc(z);return a({structure:ce,renderTree:z,edges:Q}),!0}}const S=await Ed(m,y),C={workflowId:m,workflowRunId:y};if(!S.find(ue=>Si(ue)&&Th.isEqual(Jo(ue),C)))return console.error("[expandChildWorkflowNode] Root workflow node not found"),!1;const U=hy(C,S),te=u.get(Ho),F=u.get(Ba);if(te&&U){const ue=S.map(ne=>{if(!(Si(ne)&&ne.workflowId===C.workflowId&&ne.runId===C.workflowRunId))return ry(ne)}).filter(ne=>ne!==void 0),ce=new Set(F.map(ne=>ne.id)),z=ue.filter(ne=>!ce.has(ne.id)),Q=[...F,...z],se=Vf(te,ne=>{const ye=Ma(ne,N);ye?(ye.children=U.children,ye.isExpanded=!0):console.error(`[expandChildWorkflowNode] Could not find node ${N} in virtual tree to update!`)}),J=Tc(se,Q),V=Nc(J);return a({nodes:Q,edges:V,structure:se,renderTree:J}),!0}return console.error("[expandChildWorkflowNode] Could not update graph - virtual tree or subgraph missing"),!1}catch(x){return console.error("[expandChildWorkflowNode] Error expanding workflow:",x),!1}finally{t(!1)}},f=async(p,m)=>{try{i(!0);const y=u.get(Ho),x=u.get(Ba),b=jr({workflowId:p,workflowRunId:m});if(y){const N=Vf(y,L=>{const U=Ma(L,b);U&&(U.isExpanded=!1)}),S=Tc(N,x),C=Nc(S);a({structure:N,renderTree:S,edges:C})}return!0}catch(y){return console.error("Failed to collapse workflow node:",y),!1}finally{i(!1)}};return{expandChildWorkflowNode:c,collapseChildWorkflowNode:f,collapseSiblingWorkflowNodes:async(p,m)=>{const y=u.get(Ho);if(!y)return{success:!0,message:"No graph structure available"};const x=jr({workflowId:p,workflowRunId:m}),b=by(y,x);if(!b)return{success:!1,message:"Could not find parent node"};const N=[];for(const S of b.children)if(S.id!==x&&S.isExpanded){const C=ny(S.id);N.push(f(C.workflowId,C.workflowRunId))}return await Promise.all(N),{success:!0,message:"Collapsed sibling nodes"}},isExpanding:e,isCollapsing:n}}const aD=(e,t=50)=>e?e.length<=t?e:e.slice(0,t)+"...":"",sD=e=>k.useMemo(()=>ny(e),[e]),uD=k.memo(({id:e,data:t,onSpreadBatchNodes:n,onShowNodeData:i})=>{const a=sD(t.id),u=uA(a),{expandChildWorkflowNode:c,collapseChildWorkflowNode:f,collapseSiblingWorkflowNodes:h}=oD(),[p,m]=k.useState(!1),[y,x]=k.useState(!1),b=k.useRef(!1),N=u.value,S=ol(),C=k.useCallback(async()=>{if(!u.loading&&N){const F=S.get(Ho);let ue=t.isExpanded;if(F){const ce=Ma(F,t.id);ce&&(ue=ce.isExpanded)}if(ue)await f(N.workflowId,N.runId);else{m(!0),b.current=!0;const ce=setTimeout(()=>{b.current&&x(!0)},100);try{await h(N.workflowId,N.runId),await new Promise(z=>setTimeout(z,50)),await c(N.namespace,N.workflowId,N.runId)}finally{clearTimeout(ce),b.current=!1,m(!1),x(!1)}}}},[u.loading,t,c,f,h,N,e]),L=k.useCallback(()=>{N&&(f(N.workflowId,N.runId),requestAnimationFrame(()=>{n==null||n(e)}))},[f,N,n,e]),U=k.useCallback(F=>{N&&i(N,{x:F.clientX,y:F.clientY})},[N,i]);return k.useMemo(()=>{var F;return u.error||!N?null:_.jsxs("div",{className:"relative",children:[_.jsx("div",{className:yr(p&&"pointer-events-none opacity-75"),children:_.jsx(yh,{id:e,onShowNodeData:U,onBatchAction:L,onClick:C,IconComponent:_.jsx("div",{className:"bg-amber-50",children:_.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[_.jsx("rect",{x:"9",y:"3",width:"6",height:"6",rx:"1"}),_.jsx("rect",{x:"3",y:"15",width:"6",height:"6",rx:"1"}),_.jsx("rect",{x:"15",y:"15",width:"6",height:"6",rx:"1"}),_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3M6 15v-3h12v3"})]})}),TitleComponent:_.jsxs(_.Fragment,{children:[_.jsx("h3",{className:"font-semibold text-gray-800 truncate",children:N.workflowType}),_.jsx("p",{className:"text-xs text-gray-500 overflow-hidden text-ellipsis",children:aD(e)})]}),TypeLabelComponent:_.jsx("div",{className:"px-2 py-0.5 rounded text-xs font-medium shadow-sm z-10",style:{backgroundColor:"rgb(254 243 199)",color:"rgb(217 119 6)"},children:"workflow"}),status:N.status,startTime:N.startTime,endTime:N.endTime,taskQueue:(F=N.taskQueue)==null?void 0:F.name})}),y&&_.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none bg-white bg-opacity-50 z-20",children:_.jsx("div",{className:"bg-white p-3 rounded-full shadow-lg",children:_.jsx(ZO,{className:"w-8 h-8 text-blue-500 animate-spin"})})})]})},[e,N,u.error,u.loading,C,L,U,p,y])}),cD=({autoZoomEnabled:e,setAutoZoomEnabled:t,refreshWorkflowData:n,currentWorkflow:i,setIsSearchModalOpen:a})=>{k.useEffect(()=>{(async()=>{const f=await ru("autoZoomEnabled");f!==void 0&&t(f)})()},[t]);const u=async()=>{const c=!e;t(c),await Sd("autoZoomEnabled",c)};return _.jsxs("div",{className:"flex gap-2 items-center",children:[_.jsxs("button",{className:`px-3 py-1 rounded ${e?"bg-green-500 text-white":"bg-gray-200 text-gray-700"}`,onClick:u,children:["Auto Zoom ",e?"On":"Off"]}),_.jsx("button",{className:"px-3 py-1 rounded bg-blue-500 text-white hover:bg-blue-600",onClick:()=>a(!0),children:_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(Gv,{className:"h-4 w-4"}),"Search"]})})]})};function lD({id:e,data:t,onClose:n,position:i,baseZIndex:a=100}){const[u,c]=k.useState("io"),f=k.useRef(null),h=k.useRef(null),[p,m]=k.useState({width:600,height:600}),[y,x]=k.useState(!1),[b,N]=k.useState(!1),S=k.useRef({x:0,y:0,width:0,height:0}),[C,L]=k.useState({x:0,y:0}),[U,te]=k.useState(a);k.useEffect(()=>{t&&t!==h.current&&(c("io"),h.current=t)},[t]),k.useEffect(()=>{const W=f.current;W&&(W.style.display="none",W.scrollTop=0,W.style.display="")},[t,u]),k.useEffect(()=>{te(W=>Math.max(W,a))},[a]),k.useEffect(()=>{t&&i&&setTimeout(()=>{f.current&&(f.current.style.display="none",f.current.offsetHeight,f.current.style.display="",f.current.style.visibility="visible",f.current.style.opacity="1",z())},50)},[t,i]);const F=W=>{var oe;if(!W.target||!(W.target instanceof HTMLElement)||!W.target.closest("[data-drag-handle]"))return;W.preventDefault(),W.stopPropagation(),x(!0);const pe=(oe=f.current)==null?void 0:oe.getBoundingClientRect();pe&&(S.current={x:W.clientX-pe.left,y:W.clientY-pe.top,width:p.width,height:p.height}),document.body.style.userSelect="none"},ue=W=>{var pe,oe;W.stopPropagation(),W.preventDefault(),N(!0),S.current={x:W.clientX,y:W.clientY,width:((pe=f.current)==null?void 0:pe.offsetWidth)||p.width,height:((oe=f.current)==null?void 0:oe.offsetHeight)||p.height},document.body.style.userSelect="none"};k.useEffect(()=>{const W=X=>{if(!(!y&&!b))if(X.preventDefault(),X.stopPropagation(),b&&f.current){const de=X.clientX-S.current.x,ge=X.clientY-S.current.y,Ee=Math.max(300,S.current.width+de),ke=Math.max(400,S.current.height+ge);(Ee!==p.width||ke!==p.height)&&m({width:Ee,height:ke})}else y&&L({x:X.clientX-S.current.x-i.x,y:X.clientY-S.current.y-i.y})},pe=X=>{X.preventDefault(),X.stopPropagation(),requestAnimationFrame(()=>{x(!1),N(!1),document.body.style.userSelect=""})},oe=new AbortController;return(y||b)&&(window.addEventListener("mousemove",W,{signal:oe.signal,capture:!0}),window.addEventListener("mouseup",pe,{signal:oe.signal,capture:!0})),()=>{oe.abort()}},[y,b,i,p]);const ce=()=>{if(!i)return{};const W=20,pe=window.innerWidth,oe=window.innerHeight,X=Math.min(Math.max(W,i.x+C.x),pe-p.width-W),de=Math.min(Math.max(W,i.y+C.y),oe-p.height-W);return{left:X,top:de}},z=()=>{const W=document.querySelectorAll("[data-node-panel]"),pe=Array.from(W).reduce((oe,X)=>{const de=parseInt(window.getComputedStyle(X).zIndex)||a;return Math.max(oe,de)},a);te(pe+1)};if(!t||!i)return null;const Q=!!(t.lastFailure||t.failure),se=!!(t.scheduleTime||t.startTime||t.endTime),J=!!(t.input||t.result||t.memo&&Object.keys(t.memo).length>0||t.searchAttributes&&Object.keys(t.searchAttributes).length>0),ne=t.type==="workflow"&&t.namespace&&t.workflowId?`https://cloud.temporal.io/namespaces/${t.namespace}/workflows/${t.workflowId}`:null,ye=({tab:W,label:pe,disabled:oe})=>_.jsx("button",{onClick:()=>!oe&&c(W),disabled:oe,className:yr("px-4 py-2 text-sm font-medium transition-colors rounded-t-lg","focus:outline-none",oe&&"opacity-50 cursor-not-allowed",u===W?{io:"bg-blue-100 text-blue-800",error:"bg-red-100 text-red-800",time:"bg-purple-100 text-purple-800",common:"bg-green-100 text-green-800"}[W]:"text-gray-600 hover:bg-gray-100"),children:pe}),M=()=>{var pe;const W="space-y-4 min-h-[300px]";switch(u){case"io":return _.jsxs("div",{className:W,children:[t.input&&_.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg overflow-auto relative",children:[_.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Input"}),_.jsx(ae,{content:JSON.stringify(JSON.parse(t.input),null,2)}),_.jsx("div",{className:"overflow-auto",children:_.jsx("pre",{className:"text-xs text-blue-700 whitespace-pre-wrap break-all bg-blue-100 p-2 rounded min-w-fit",children:JSON.stringify(JSON.parse(t.input),null,2)})})]}),t.result&&_.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg overflow-auto relative",children:[_.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Result"}),_.jsx(ae,{content:JSON.stringify(JSON.parse(t.result),null,2)}),_.jsx("div",{className:"overflow-auto",children:_.jsx("pre",{className:"text-xs text-blue-700 whitespace-pre-wrap break-all bg-blue-100 p-2 rounded min-w-fit",children:JSON.stringify(JSON.parse(t.result),null,2)})})]}),t.header&&Object.keys(t.header).length>0&&_.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg overflow-auto relative",children:[_.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Header"}),_.jsx(ae,{content:JSON.stringify(t.header,null,2)}),_.jsx("div",{className:"overflow-auto",children:_.jsx("pre",{className:"text-xs text-blue-700 whitespace-pre-wrap break-all bg-blue-100 p-2 rounded min-w-fit",children:JSON.stringify(t.header,null,2)})})]}),t.memo&&Object.keys(t.memo).length>0&&_.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg overflow-auto",children:[_.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Memo"}),_.jsx("div",{className:"overflow-auto",children:_.jsx("pre",{className:"text-xs text-blue-700 whitespace-pre-wrap bg-blue-100 p-2 rounded min-w-fit",children:JSON.stringify(t.memo,null,2)})})]}),t.searchAttributes&&Object.keys(t.searchAttributes).length>0&&_.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg overflow-auto",children:[_.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Search Attributes"}),_.jsx("div",{className:"overflow-auto",children:_.jsx("pre",{className:"text-xs text-blue-700 whitespace-pre-wrap bg-blue-100 p-2 rounded min-w-fit",children:JSON.stringify(t.searchAttributes,null,2)})})]})]});case"error":return _.jsxs("div",{className:W,children:[t.lastFailure&&_.jsxs("div",{className:"bg-red-50 p-4 rounded-lg overflow-auto relative",children:[_.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Last Failure"}),_.jsx(ae,{content:JSON.stringify(JSON.parse(t.lastFailure),null,2)}),_.jsx("div",{className:"overflow-auto",children:_.jsx("pre",{className:"text-xs text-red-700 whitespace-pre-wrap break-all bg-red-100 p-2 rounded min-w-fit",children:JSON.stringify(JSON.parse(t.lastFailure),null,2)})})]}),t.failure&&_.jsxs("div",{className:"bg-red-50 p-4 rounded-lg overflow-auto relative",children:[_.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Failure"}),_.jsx(ae,{content:JSON.stringify(JSON.parse(t.failure),null,2)}),_.jsx("div",{className:"overflow-auto",children:_.jsx("pre",{className:"text-xs text-red-700 whitespace-pre-wrap break-all bg-red-100 p-2 rounded min-w-fit",children:JSON.stringify(JSON.parse(t.failure),null,2)})})]})]});case"time":return _.jsxs("div",{className:W,children:[t.startTime&&t.endTime&&_.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Duration"}),_.jsx("p",{className:"text-purple-700 text-lg font-semibold",children:vh(t.startTime,t.endTime)})]}),t.scheduleTime&&_.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Schedule Time"}),_.jsx("p",{className:"text-purple-700",children:t.scheduleTime})]}),t.startTime&&_.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Start Time"}),_.jsx("p",{className:"text-purple-700",children:t.startTime})]}),t.endTime&&_.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"End Time"}),_.jsx("p",{className:"text-purple-700",children:t.endTime})]}),t.lastStartedTime&&_.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Last Started Time"}),_.jsx("p",{className:"text-purple-700",children:t.lastStartedTime})]}),t.lastAttemptCompleteTime&&_.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Last Attempt Complete Time"}),_.jsx("p",{className:"text-purple-700",children:t.lastAttemptCompleteTime})]}),(t.heartbeatTimeout||t.scheduleToCloseTimeout||t.scheduleToStartTimeout||t.startToCloseTimeout||t.workflowRunTimeout||t.workflowTaskTimeout)&&_.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Timeouts"}),t.heartbeatTimeout&&_.jsxs("p",{className:"text-purple-700",children:["Heartbeat: ",t.heartbeatTimeout]}),t.scheduleToCloseTimeout&&_.jsxs("p",{className:"text-purple-700",children:["Schedule to Close: ",t.scheduleToCloseTimeout]}),t.scheduleToStartTimeout&&_.jsxs("p",{className:"text-purple-700",children:["Schedule to Start: ",t.scheduleToStartTimeout]}),t.startToCloseTimeout&&_.jsxs("p",{className:"text-purple-700",children:["Start to Close: ",t.startToCloseTimeout]}),t.workflowRunTimeout&&_.jsxs("p",{className:"text-purple-700",children:["Workflow Run: ",t.workflowRunTimeout]}),t.workflowTaskTimeout&&_.jsxs("p",{className:"text-purple-700",children:["Workflow Task: ",t.workflowTaskTimeout]})]})]});case"common":return _.jsxs("div",{className:W,children:[_.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Basic Information"}),_.jsxs("div",{className:"space-y-2",children:[_.jsxs("p",{className:"text-green-700",children:["Type: ",t.type]}),t.activityType&&_.jsxs("p",{className:"text-green-700",children:["Activity Type: ",t.activityType]}),t.workflowType&&_.jsxs("p",{className:"text-green-700",children:["Workflow Type: ",t.workflowType]}),_.jsxs("p",{className:"text-green-700",children:["Status: ",t.status]}),t.namespace&&_.jsxs("p",{className:"text-green-700",children:["Namespace: ",t.namespace]}),t.workflowId&&_.jsxs("p",{className:"text-green-700",children:["Workflow ID: ",t.workflowId]}),(t.workflowRunId||t.runId)&&_.jsxs("p",{className:"text-green-700",children:["Run ID: ",t.workflowRunId||t.runId]}),t.activityId&&_.jsxs("p",{className:"text-green-700",children:["Activity ID: ",t.activityId]}),t.workflowTaskCompletedEventId&&_.jsxs("p",{className:"text-green-700",children:["Workflow Task Completed Event ID:"," ",t.workflowTaskCompletedEventId]})]})]}),t.taskQueue&&_.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Task Queue"}),_.jsxs("p",{className:"text-green-700",children:["Name: ",t.taskQueue.name]})]}),t.retryPolicy&&_.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Retry Policy"}),_.jsxs("div",{className:"space-y-2",children:[_.jsxs("p",{className:"text-green-700",children:["Initial Interval: ",t.retryPolicy.initialInterval]}),_.jsxs("p",{className:"text-green-700",children:["Backoff Coefficient: ",t.retryPolicy.backoffCoefficient]}),_.jsxs("p",{className:"text-green-700",children:["Maximum Interval: ",t.retryPolicy.maximumInterval]}),_.jsxs("p",{className:"text-green-700",children:["Maximum Attempts: ",t.retryPolicy.maximumAttempts]}),((pe=t.retryPolicy.nonRetryableErrorTypes)==null?void 0:pe.length)>0&&_.jsxs("div",{children:[_.jsx("p",{className:"text-green-700",children:"Non-retryable Error Types:"}),_.jsx("ul",{className:"list-disc pl-4",children:t.retryPolicy.nonRetryableErrorTypes.map((oe,X)=>_.jsx("li",{className:"text-green-700",children:oe},X))})]})]})]}),t.attempts&&_.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Attempts"}),_.jsxs("p",{className:"text-green-700",children:["Count: ",t.attempts]})]}),t.lastWorkerIdentity&&_.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Worker"}),_.jsxs("p",{className:"text-green-700",children:["Last Identity: ",t.lastWorkerIdentity]})]}),t.workflowReusePolicy&&_.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Workflow Reuse Policy"}),_.jsx("p",{className:"text-green-700",children:t.workflowReusePolicy})]})]})}},ae=({content:W})=>{const pe=()=>{navigator.clipboard.writeText(W)};return _.jsx("button",{onClick:pe,className:"absolute top-4 right-4 p-1.5 rounded bg-white/80 hover:bg-white border border-gray-200 transition-colors",title:"Copy to clipboard",children:_.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-600",children:[_.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),_.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})})};return _.jsxs("div",{ref:f,"data-node-panel":!0,"data-base-z-index":a,className:"fixed bg-white rounded-lg shadow-xl border border-gray-200 overflow-hidden",style:{...ce(),width:p.width,height:p.height,zIndex:U,visibility:"visible",opacity:1,pointerEvents:"auto"},onClick:W=>{W.preventDefault(),W.stopPropagation(),z()},onMouseDown:W=>{W.preventDefault(),W.stopPropagation(),W.target instanceof HTMLElement&&W.target.closest("[data-drag-handle]")&&F(W)},children:[_.jsx("button",{onClick:W=>{W.preventDefault(),W.stopPropagation(),n()},className:"absolute top-2 right-2 p-1.5 hover:bg-gray-100 rounded-full transition-colors z-50",title:"Close panel",children:_.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-500",children:[_.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),_.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),_.jsx("div",{className:"flex absolute top-0 left-0 right-0 h-4 cursor-move","data-drag-handle":!0,onMouseDown:F,children:_.jsx("div",{className:"mx-auto p-1.5 select-none",children:_.jsxs("svg",{width:"20",height:"10",viewBox:"0 0 20 4",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-gray-400 pointer-events-none",children:[_.jsx("circle",{cx:"2",cy:"2",r:"1",fill:"currentColor"}),_.jsx("circle",{cx:"10",cy:"2",r:"1",fill:"currentColor"}),_.jsx("circle",{cx:"18",cy:"2",r:"1",fill:"currentColor"})]})})}),(ne||t.type==="activity")&&_.jsxs("div",{className:yr("px-4 py-2 bg-gray-50 border-b",t.type==="activity"&&"pt-6"),children:[_.jsxs("div",{className:"flex items-center justify-between mb-2 pr-8",children:[_.jsx("div",{className:"flex items-center gap-2",children:ne&&_.jsxs(_.Fragment,{children:[_.jsxs("svg",{className:"w-4 h-4 text-gray-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[_.jsx("rect",{x:"9",y:"3",width:"6",height:"6",rx:"1"}),_.jsx("rect",{x:"3",y:"15",width:"6",height:"6",rx:"1"}),_.jsx("rect",{x:"15",y:"15",width:"6",height:"6",rx:"1"}),_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3M6 15v-3h12v3"})]}),_.jsx("a",{href:ne,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm font-medium",onClick:W=>{W.stopPropagation(),window.open(ne,"_blank","noopener,noreferrer")},children:"View in Temporal"})]})}),_.jsxs("div",{className:"flex flex-col items-end",children:[_.jsx("span",{className:"text-xs text-gray-500",children:t.namespace}),t.taskQueue&&_.jsx("span",{className:"text-xs text-gray-500",children:t.taskQueue.name})]})]}),_.jsxs("div",{className:"flex flex-col gap-1",children:[t.workflowType&&_.jsxs("span",{className:"text-xs text-gray-500",children:[_.jsx("span",{className:"font-bold",children:"Type:"})," ",_.jsx("span",{className:"font-bold",children:t.workflowType})]}),t.type==="activity"&&t.activityType&&_.jsxs("span",{className:"text-xs text-gray-500",children:[_.jsx("span",{className:"font-bold",children:"Type:"})," ",_.jsx("span",{className:"font-bold",children:t.activityType})]}),t.workflowId&&t.type!=="activity"&&_.jsx("span",{className:"text-xs text-gray-500 select-all font-mono",children:t.workflowId})]})]}),_.jsxs("div",{className:"border-b flex gap-1 px-2 pt-2 bg-gray-50",children:[_.jsx(ye,{tab:"io",label:"Input/Output",disabled:!J}),_.jsx(ye,{tab:"error",label:"Error",disabled:!Q}),_.jsx(ye,{tab:"time",label:"Time",disabled:!se}),_.jsx(ye,{tab:"common",label:"Common"})]}),_.jsx("div",{className:"overflow-y-auto",style:{height:"calc(100% - 116px)"},children:_.jsx("div",{className:"p-4",children:M()})}),_.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 cursor-se-resize",onMouseDown:ue,style:{background:"linear-gradient(135deg, transparent 50%, #CBD5E1 50%)"}})]})}var fD=Object.defineProperty,dD=(e,t,n)=>t in e?fD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qf=(e,t,n)=>(dD(e,typeof t!="symbol"?t+"":t,n),n);let hD=class{constructor(){qf(this,"current",this.detect()),qf(this,"handoffState","pending"),qf(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Vo=new hD;function dl(e){return Vo.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}function hl(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function to(){let e=[],t={addEventListener(n,i,a,u){return n.addEventListener(i,a,u),t.add(()=>n.removeEventListener(i,a,u))},requestAnimationFrame(...n){let i=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(i))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let i=setTimeout(...n);return t.add(()=>clearTimeout(i))},microTask(...n){let i={current:!0};return hl(()=>{i.current&&n[0]()}),t.add(()=>{i.current=!1})},style(n,i,a){let u=n.style.getPropertyValue(i);return Object.assign(n.style,{[i]:a}),this.add(()=>{Object.assign(n.style,{[i]:u})})},group(n){let i=to();return n(i),this.add(()=>i.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let i=e.indexOf(n);if(i>=0)for(let a of e.splice(i,1))a()}},dispose(){for(let n of e.splice(0))n()}};return t}function Ch(){let[e]=k.useState(to);return k.useEffect(()=>()=>e.dispose(),[e]),e}let Fn=(e,t)=>{Vo.isServer?k.useEffect(e,t):k.useLayoutEffect(e,t)};function ea(e){let t=k.useRef(e);return Fn(()=>{t.current=e},[e]),t}let Zt=function(e){let t=ea(e);return re.useCallback((...n)=>t.current(...n),[t])},pD=k.createContext(void 0);function mD(){return k.useContext(pD)}function Pd(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function Ji(e,t,...n){if(e in t){let a=t[e];return typeof a=="function"?a(...n):a}let i=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(a=>`"${a}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,Ji),i}var Hc=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Hc||{}),Zi=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Zi||{});function xr(){let e=vD();return k.useCallback(t=>gD({mergeRefs:e,...t}),[e])}function gD({ourProps:e,theirProps:t,slot:n,defaultTag:i,features:a,visible:u=!0,name:c,mergeRefs:f}){f=f??yD;let h=_y(t,e);if(u)return vc(h,n,i,c,f);let p=a??0;if(p&2){let{static:m=!1,...y}=h;if(m)return vc(y,n,i,c,f)}if(p&1){let{unmount:m=!0,...y}=h;return Ji(m?0:1,{0(){return null},1(){return vc({...y,hidden:!0,style:{display:"none"}},n,i,c,f)}})}return vc(h,n,i,c,f)}function vc(e,t={},n,i,a){let{as:u=n,children:c,refName:f="ref",...h}=Xf(e,["unmount","static"]),p=e.ref!==void 0?{[f]:e.ref}:{},m=typeof c=="function"?c(t):c;"className"in h&&h.className&&typeof h.className=="function"&&(h.className=h.className(t)),h["aria-labelledby"]&&h["aria-labelledby"]===h.id&&(h["aria-labelledby"]=void 0);let y={};if(t){let x=!1,b=[];for(let[N,S]of Object.entries(t))typeof S=="boolean"&&(x=!0),S===!0&&b.push(N.replace(/([A-Z])/g,C=>`-${C.toLowerCase()}`));if(x){y["data-headlessui-state"]=b.join(" ");for(let N of b)y[`data-${N}`]=""}}if(u===k.Fragment&&(Object.keys(Lo(h)).length>0||Object.keys(Lo(y)).length>0))if(!k.isValidElement(m)||Array.isArray(m)&&m.length>1){if(Object.keys(Lo(h)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${i} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Lo(h)).concat(Object.keys(Lo(y))).map(x=>`  - ${x}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(x=>`  - ${x}`).join(`
`)].join(`
`))}else{let x=m.props,b=x==null?void 0:x.className,N=typeof b=="function"?(...L)=>Pd(b(...L),h.className):Pd(b,h.className),S=N?{className:N}:{},C=_y(m.props,Lo(Xf(h,["ref"])));for(let L in y)L in C&&delete y[L];return k.cloneElement(m,Object.assign({},C,y,p,{ref:a(wD(m),p.ref)},S))}return k.createElement(u,Object.assign({},Xf(h,["ref"]),u!==k.Fragment&&p,u!==k.Fragment&&y),m)}function vD(){let e=k.useRef([]),t=k.useCallback(n=>{for(let i of e.current)i!=null&&(typeof i=="function"?i(n):i.current=n)},[]);return(...n)=>{if(!n.every(i=>i==null))return e.current=n,t}}function yD(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function _y(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let i of e)for(let a in i)a.startsWith("on")&&typeof i[a]=="function"?(n[a]!=null||(n[a]=[]),n[a].push(i[a])):t[a]=i[a];if(t.disabled||t["aria-disabled"])for(let i in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(i)&&(n[i]=[a=>{var u;return(u=a==null?void 0:a.preventDefault)==null?void 0:u.call(a)}]);for(let i in n)Object.assign(t,{[i](a,...u){let c=n[i];for(let f of c){if((a instanceof Event||(a==null?void 0:a.nativeEvent)instanceof Event)&&a.defaultPrevented)return;f(a,...u)}}});return t}function Xn(e){var t;return Object.assign(k.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function Lo(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function Xf(e,t=[]){let n=Object.assign({},e);for(let i of t)i in n&&delete n[i];return n}function wD(e){return re.version.split(".")[0]>="19"?e.props.ref:e.ref}let xD="span";var Kc=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Kc||{});function bD(e,t){var n;let{features:i=1,...a}=e,u={ref:t,"aria-hidden":(i&2)===2?!0:(n=a["aria-hidden"])!=null?n:void 0,hidden:(i&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(i&4)===4&&(i&2)!==2&&{display:"none"}}};return xr()({ourProps:u,theirProps:a,slot:{},defaultTag:xD,name:"Hidden"})}let Rd=Xn(bD),Ey=Symbol();function _D(e,t=!0){return Object.assign(e,{[Ey]:t})}function ni(...e){let t=k.useRef(e);k.useEffect(()=>{t.current=e},[e]);let n=Zt(i=>{for(let a of t.current)a!=null&&(typeof a=="function"?a(i):a.current=i)});return e.every(i=>i==null||(i==null?void 0:i[Ey]))?void 0:n}let Oh=k.createContext(null);Oh.displayName="DescriptionContext";function Sy(){let e=k.useContext(Oh);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Sy),t}return e}function ED(){let[e,t]=k.useState([]);return[e.length>0?e.join(" "):void 0,k.useMemo(()=>function(n){let i=Zt(u=>(t(c=>[...c,u]),()=>t(c=>{let f=c.slice(),h=f.indexOf(u);return h!==-1&&f.splice(h,1),f}))),a=k.useMemo(()=>({register:i,slot:n.slot,name:n.name,props:n.props,value:n.value}),[i,n.slot,n.name,n.props,n.value]);return re.createElement(Oh.Provider,{value:a},n.children)},[t])]}let SD="p";function TD(e,t){let n=k.useId(),i=mD(),{id:a=`headlessui-description-${n}`,...u}=e,c=Sy(),f=ni(t);Fn(()=>c.register(a),[a,c.register]);let h=i||!1,p=k.useMemo(()=>({...c.slot,disabled:h}),[c.slot,h]),m={ref:f,...c.props,id:a};return xr()({ourProps:m,theirProps:u,slot:p,defaultTag:SD,name:c.name||"Description"})}let ND=Xn(TD),kD=Object.assign(ND,{});var Ty=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(Ty||{});let ID=k.createContext(()=>{});function CD({value:e,children:t}){return re.createElement(ID.Provider,{value:e},t)}let OD=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};function Ny(e,t){let n=e(),i=new Set;return{getSnapshot(){return n},subscribe(a){return i.add(a),()=>i.delete(a)},dispatch(a,...u){let c=t[a].call(n,...u);c&&(n=c,i.forEach(f=>f()))}}}function ky(e){return k.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}let AD=new OD(()=>Ny(()=>[],{ADD(e){return this.includes(e)?this:[...this,e]},REMOVE(e){let t=this.indexOf(e);if(t===-1)return this;let n=this.slice();return n.splice(t,1),n}}));function qa(e,t){let n=AD.get(t),i=k.useId(),a=ky(n);if(Fn(()=>{if(e)return n.dispatch("ADD",i),()=>n.dispatch("REMOVE",i)},[n,e]),!e)return!1;let u=a.indexOf(i),c=a.length;return u===-1&&(u=c,c+=1),u===c-1}let Md=new Map,Ys=new Map;function Hg(e){var t;let n=(t=Ys.get(e))!=null?t:0;return Ys.set(e,n+1),n!==0?()=>Kg(e):(Md.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>Kg(e))}function Kg(e){var t;let n=(t=Ys.get(e))!=null?t:1;if(n===1?Ys.delete(e):Ys.set(e,n-1),n!==1)return;let i=Md.get(e);i&&(i["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",i["aria-hidden"]),e.inert=i.inert,Md.delete(e))}function DD(e,{allowed:t,disallowed:n}={}){let i=qa(e,"inert-others");Fn(()=>{var a,u;if(!i)return;let c=to();for(let h of(a=n==null?void 0:n())!=null?a:[])h&&c.add(Hg(h));let f=(u=t==null?void 0:t())!=null?u:[];for(let h of f){if(!h)continue;let p=dl(h);if(!p)continue;let m=h.parentElement;for(;m&&m!==p.body;){for(let y of m.children)f.some(x=>y.contains(x))||c.add(Hg(y));m=m.parentElement}}return c.dispose},[i,t,n])}function PD(e,t,n){let i=ea(a=>{let u=a.getBoundingClientRect();u.x===0&&u.y===0&&u.width===0&&u.height===0&&n()});k.useEffect(()=>{if(!e)return;let a=t===null?null:t instanceof HTMLElement?t:t.current;if(!a)return;let u=to();if(typeof ResizeObserver<"u"){let c=new ResizeObserver(()=>i.current(a));c.observe(a),u.add(()=>c.disconnect())}if(typeof IntersectionObserver<"u"){let c=new IntersectionObserver(()=>i.current(a));c.observe(a),u.add(()=>c.disconnect())}return()=>u.dispose()},[t,i,e])}let Uc=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),RD=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var yi=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(yi||{}),Ld=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Ld||{}),MD=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(MD||{});function LD(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Uc)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function $D(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(RD)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var Iy=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(Iy||{});function WD(e,t=0){var n;return e===((n=dl(e))==null?void 0:n.body)?!1:Ji(t,{0(){return e.matches(Uc)},1(){let i=e;for(;i!==null;){if(i.matches(Uc))return!0;i=i.parentElement}return!1}})}var FD=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(FD||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function bi(e){e==null||e.focus({preventScroll:!0})}let jD=["textarea","input"].join(",");function BD(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,jD))!=null?n:!1}function HD(e,t=n=>n){return e.slice().sort((n,i)=>{let a=t(n),u=t(i);if(a===null||u===null)return 0;let c=a.compareDocumentPosition(u);return c&Node.DOCUMENT_POSITION_FOLLOWING?-1:c&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Vs(e,t,{sorted:n=!0,relativeTo:i=null,skipElements:a=[]}={}){let u=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,c=Array.isArray(e)?n?HD(e):e:t&64?$D(e):LD(e);a.length>0&&c.length>1&&(c=c.filter(b=>!a.some(N=>N!=null&&"current"in N?(N==null?void 0:N.current)===b:N===b))),i=i??u.activeElement;let f=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),h=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,c.indexOf(i))-1;if(t&4)return Math.max(0,c.indexOf(i))+1;if(t&8)return c.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),p=t&32?{preventScroll:!0}:{},m=0,y=c.length,x;do{if(m>=y||m+y<=0)return 0;let b=h+m;if(t&16)b=(b+y)%y;else{if(b<0)return 3;if(b>=y)return 1}x=c[b],x==null||x.focus(p),m+=f}while(x!==u.activeElement);return t&6&&BD(x)&&x.select(),2}function Cy(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function KD(){return/Android/gi.test(window.navigator.userAgent)}function UD(){return Cy()||KD()}function Ms(e,t,n,i){let a=ea(n);k.useEffect(()=>{if(!e)return;function u(c){a.current(c)}return document.addEventListener(t,u,i),()=>document.removeEventListener(t,u,i)},[e,t,i])}function Oy(e,t,n,i){let a=ea(n);k.useEffect(()=>{if(!e)return;function u(c){a.current(c)}return window.addEventListener(t,u,i),()=>window.removeEventListener(t,u,i)},[e,t,i])}const Ug=30;function zD(e,t,n){let i=qa(e,"outside-click"),a=ea(n),u=k.useCallback(function(h,p){if(h.defaultPrevented)return;let m=p(h);if(m===null||!m.getRootNode().contains(m)||!m.isConnected)return;let y=function x(b){return typeof b=="function"?x(b()):Array.isArray(b)||b instanceof Set?b:[b]}(t);for(let x of y)if(x!==null&&(x.contains(m)||h.composed&&h.composedPath().includes(x)))return;return!WD(m,Iy.Loose)&&m.tabIndex!==-1&&h.preventDefault(),a.current(h,m)},[a,t]),c=k.useRef(null);Ms(i,"pointerdown",h=>{var p,m;c.current=((m=(p=h.composedPath)==null?void 0:p.call(h))==null?void 0:m[0])||h.target},!0),Ms(i,"mousedown",h=>{var p,m;c.current=((m=(p=h.composedPath)==null?void 0:p.call(h))==null?void 0:m[0])||h.target},!0),Ms(i,"click",h=>{UD()||c.current&&(u(h,()=>c.current),c.current=null)},!0);let f=k.useRef({x:0,y:0});Ms(i,"touchstart",h=>{f.current.x=h.touches[0].clientX,f.current.y=h.touches[0].clientY},!0),Ms(i,"touchend",h=>{let p={x:h.changedTouches[0].clientX,y:h.changedTouches[0].clientY};if(!(Math.abs(p.x-f.current.x)>=Ug||Math.abs(p.y-f.current.y)>=Ug))return u(h,()=>h.target instanceof HTMLElement?h.target:null)},!0),Oy(i,"blur",h=>u(h,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function hu(...e){return k.useMemo(()=>dl(...e),[...e])}function Ay(e,t,n,i){let a=ea(n);k.useEffect(()=>{e=e??window;function u(c){a.current(c)}return e.addEventListener(t,u,i),()=>e.removeEventListener(t,u,i)},[e,t,i])}function YD(){let e;return{before({doc:t}){var n;let i=t.documentElement,a=(n=t.defaultView)!=null?n:window;e=Math.max(0,a.innerWidth-i.clientWidth)},after({doc:t,d:n}){let i=t.documentElement,a=Math.max(0,i.clientWidth-i.offsetWidth),u=Math.max(0,e-a);n.style(i,"paddingRight",`${u}px`)}}}function VD(){return Cy()?{before({doc:e,d:t,meta:n}){function i(a){return n.containers.flatMap(u=>u()).some(u=>u.contains(a))}t.microTask(()=>{var a;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let f=to();f.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>f.dispose()))}let u=(a=window.scrollY)!=null?a:window.pageYOffset,c=null;t.addEventListener(e,"click",f=>{if(f.target instanceof HTMLElement)try{let h=f.target.closest("a");if(!h)return;let{hash:p}=new URL(h.href),m=e.querySelector(p);m&&!i(m)&&(c=m)}catch{}},!0),t.addEventListener(e,"touchstart",f=>{if(f.target instanceof HTMLElement)if(i(f.target)){let h=f.target;for(;h.parentElement&&i(h.parentElement);)h=h.parentElement;t.style(h,"overscrollBehavior","contain")}else t.style(f.target,"touchAction","none")}),t.addEventListener(e,"touchmove",f=>{if(f.target instanceof HTMLElement){if(f.target.tagName==="INPUT")return;if(i(f.target)){let h=f.target;for(;h.parentElement&&h.dataset.headlessuiPortal!==""&&!(h.scrollHeight>h.clientHeight||h.scrollWidth>h.clientWidth);)h=h.parentElement;h.dataset.headlessuiPortal===""&&f.preventDefault()}else f.preventDefault()}},{passive:!1}),t.add(()=>{var f;let h=(f=window.scrollY)!=null?f:window.pageYOffset;u!==h&&window.scrollTo(0,u),c&&c.isConnected&&(c.scrollIntoView({block:"nearest"}),c=null)})})}}:{}}function qD(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function XD(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let Ko=Ny(()=>new Map,{PUSH(e,t){var n;let i=(n=this.get(e))!=null?n:{doc:e,count:0,d:to(),meta:new Set};return i.count++,i.meta.add(t),this.set(e,i),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let i={doc:e,d:t,meta:XD(n)},a=[VD(),YD(),qD()];a.forEach(({before:u})=>u==null?void 0:u(i)),a.forEach(({after:u})=>u==null?void 0:u(i))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});Ko.subscribe(()=>{let e=Ko.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let i=t.get(n.doc)==="hidden",a=n.count!==0;(a&&!i||!a&&i)&&Ko.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&Ko.dispatch("TEARDOWN",n)}});function GD(e,t,n=()=>({containers:[]})){let i=ky(Ko),a=t?i.get(t):void 0,u=a?a.count>0:!1;return Fn(()=>{if(!(!t||!e))return Ko.dispatch("PUSH",t,n),()=>Ko.dispatch("POP",t,n)},[e,t]),u}function ZD(e,t,n=()=>[document.body]){let i=qa(e,"scroll-lock");GD(i,t,a=>{var u;return{containers:[...(u=a.containers)!=null?u:[],n]}})}function QD(e=0){let[t,n]=k.useState(e),i=k.useCallback(h=>n(h),[t]),a=k.useCallback(h=>n(p=>p|h),[t]),u=k.useCallback(h=>(t&h)===h,[t]),c=k.useCallback(h=>n(p=>p&~h),[n]),f=k.useCallback(h=>n(p=>p^h),[n]);return{flags:t,setFlag:i,addFlag:a,hasFlag:u,removeFlag:c,toggleFlag:f}}var JD={},zg,Yg;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((zg=process==null?void 0:JD)==null?void 0:zg.NODE_ENV)==="test"&&typeof((Yg=Element==null?void 0:Element.prototype)==null?void 0:Yg.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var e2=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(e2||{});function t2(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function n2(e,t,n,i){let[a,u]=k.useState(n),{hasFlag:c,addFlag:f,removeFlag:h}=QD(e&&a?3:0),p=k.useRef(!1),m=k.useRef(!1),y=Ch();return Fn(()=>{var x;if(e){if(n&&u(!0),!t){n&&f(3);return}return(x=i==null?void 0:i.start)==null||x.call(i,n),r2(t,{inFlight:p,prepare(){m.current?m.current=!1:m.current=p.current,p.current=!0,!m.current&&(n?(f(3),h(4)):(f(4),h(2)))},run(){m.current?n?(h(3),f(4)):(h(4),f(3)):n?h(1):f(1)},done(){var b;m.current&&typeof t.getAnimations=="function"&&t.getAnimations().length>0||(p.current=!1,h(7),n||u(!1),(b=i==null?void 0:i.end)==null||b.call(i,n))}})}},[e,n,t,y]),e?[a,{closed:c(1),enter:c(2),leave:c(4),transition:c(2)||c(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function r2(e,{prepare:t,run:n,done:i,inFlight:a}){let u=to();return o2(e,{prepare:t,inFlight:a}),u.nextFrame(()=>{n(),u.requestAnimationFrame(()=>{u.add(i2(e,i))})}),u.dispose}function i2(e,t){var n,i;let a=to();if(!e)return a.dispose;let u=!1;a.add(()=>{u=!0});let c=(i=(n=e.getAnimations)==null?void 0:n.call(e).filter(f=>f instanceof CSSTransition))!=null?i:[];return c.length===0?(t(),a.dispose):(Promise.allSettled(c.map(f=>f.finished)).then(()=>{u||t()}),a.dispose)}function o2(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let i=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=i}function Ah(e,t){let n=k.useRef([]),i=Zt(e);k.useEffect(()=>{let a=[...n.current];for(let[u,c]of t.entries())if(n.current[u]!==c){let f=i(t,a);return n.current=t,f}},[i,...t])}let pl=k.createContext(null);pl.displayName="OpenClosedContext";var Wr=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Wr||{});function ml(){return k.useContext(pl)}function a2({value:e,children:t}){return re.createElement(pl.Provider,{value:e},t)}function s2({children:e}){return re.createElement(pl.Provider,{value:null},e)}function u2(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Xi=[];u2(()=>{function e(t){if(!(t.target instanceof HTMLElement)||t.target===document.body||Xi[0]===t.target)return;let n=t.target;n=n.closest(Uc),Xi.unshift(n??t.target),Xi=Xi.filter(i=>i!=null&&i.isConnected),Xi.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function Dy(e){let t=Zt(e),n=k.useRef(!1);k.useEffect(()=>(n.current=!1,()=>{n.current=!0,hl(()=>{n.current&&t()})}),[t])}function c2(){let e=typeof document>"u";return"useSyncExternalStore"in Dm?(t=>t.useSyncExternalStore)(Dm)(()=>()=>{},()=>!1,()=>!e):!1}function pu(){let e=c2(),[t,n]=k.useState(Vo.isHandoffComplete);return t&&Vo.isHandoffComplete===!1&&n(!1),k.useEffect(()=>{t!==!0&&n(!0)},[t]),k.useEffect(()=>Vo.handoff(),[]),e?!1:t}let Py=k.createContext(!1);function l2(){return k.useContext(Py)}function Vg(e){return re.createElement(Py.Provider,{value:e.force},e.children)}function f2(e){let t=l2(),n=k.useContext(My),i=hu(e),[a,u]=k.useState(()=>{var c;if(!t&&n!==null)return(c=n.current)!=null?c:null;if(Vo.isServer)return null;let f=i==null?void 0:i.getElementById("headlessui-portal-root");if(f)return f;if(i===null)return null;let h=i.createElement("div");return h.setAttribute("id","headlessui-portal-root"),i.body.appendChild(h)});return k.useEffect(()=>{a!==null&&(i!=null&&i.body.contains(a)||i==null||i.body.appendChild(a))},[a,i]),k.useEffect(()=>{t||n!==null&&u(n.current)},[n,u,t]),a}let Ry=k.Fragment,d2=Xn(function(e,t){let n=e,i=k.useRef(null),a=ni(_D(y=>{i.current=y}),t),u=hu(i),c=f2(i),[f]=k.useState(()=>{var y;return Vo.isServer?null:(y=u==null?void 0:u.createElement("div"))!=null?y:null}),h=k.useContext($d),p=pu();Fn(()=>{!c||!f||c.contains(f)||(f.setAttribute("data-headlessui-portal",""),c.appendChild(f))},[c,f]),Fn(()=>{if(f&&h)return h.register(f)},[h,f]),Dy(()=>{var y;!c||!f||(f instanceof Node&&c.contains(f)&&c.removeChild(f),c.childNodes.length<=0&&((y=c.parentElement)==null||y.removeChild(c)))});let m=xr();return p?!c||!f?null:y0.createPortal(m({ourProps:{ref:a},theirProps:n,slot:{},defaultTag:Ry,name:"Portal"}),f):null});function h2(e,t){let n=ni(t),{enabled:i=!0,...a}=e,u=xr();return i?re.createElement(d2,{...a,ref:n}):u({ourProps:{ref:n},theirProps:a,slot:{},defaultTag:Ry,name:"Portal"})}let p2=k.Fragment,My=k.createContext(null);function m2(e,t){let{target:n,...i}=e,a={ref:ni(t)},u=xr();return re.createElement(My.Provider,{value:n},u({ourProps:a,theirProps:i,defaultTag:p2,name:"Popover.Group"}))}let $d=k.createContext(null);function g2(){let e=k.useContext($d),t=k.useRef([]),n=Zt(u=>(t.current.push(u),e&&e.register(u),()=>i(u))),i=Zt(u=>{let c=t.current.indexOf(u);c!==-1&&t.current.splice(c,1),e&&e.unregister(u)}),a=k.useMemo(()=>({register:n,unregister:i,portals:t}),[n,i,t]);return[t,k.useMemo(()=>function({children:u}){return re.createElement($d.Provider,{value:a},u)},[a])]}let v2=Xn(h2),Ly=Xn(m2),y2=Object.assign(v2,{Group:Ly});function w2(e,t=typeof document<"u"?document.defaultView:null,n){let i=qa(e,"escape");Ay(t,"keydown",a=>{i&&(a.defaultPrevented||a.key===Ty.Escape&&n(a))})}function x2(){var e;let[t]=k.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,i]=k.useState((e=t==null?void 0:t.matches)!=null?e:!1);return Fn(()=>{if(!t)return;function a(u){i(u.matches)}return t.addEventListener("change",a),()=>t.removeEventListener("change",a)},[t]),n}function b2({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let i=hu(n),a=Zt(()=>{var u,c;let f=[];for(let h of e)h!==null&&(h instanceof HTMLElement?f.push(h):"current"in h&&h.current instanceof HTMLElement&&f.push(h.current));if(t!=null&&t.current)for(let h of t.current)f.push(h);for(let h of(u=i==null?void 0:i.querySelectorAll("html > *, body > *"))!=null?u:[])h!==document.body&&h!==document.head&&h instanceof HTMLElement&&h.id!=="headlessui-portal-root"&&(n&&(h.contains(n)||h.contains((c=n==null?void 0:n.getRootNode())==null?void 0:c.host))||f.some(p=>h.contains(p))||f.push(h));return f});return{resolveContainers:a,contains:Zt(u=>a().some(c=>c.contains(u)))}}let $y=k.createContext(null);function qg({children:e,node:t}){let[n,i]=k.useState(null),a=Wy(t??n);return re.createElement($y.Provider,{value:a},e,a===null&&re.createElement(Rd,{features:Kc.Hidden,ref:u=>{var c,f;if(u){for(let h of(f=(c=dl(u))==null?void 0:c.querySelectorAll("html > *, body > *"))!=null?f:[])if(h!==document.body&&h!==document.head&&h instanceof HTMLElement&&h!=null&&h.contains(u)){i(h);break}}}}))}function Wy(e=null){var t;return(t=k.useContext($y))!=null?t:e}function Dh(){let e=k.useRef(!1);return Fn(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var Ks=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Ks||{});function _2(){let e=k.useRef(0);return Oy(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function Fy(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)n.current instanceof HTMLElement&&t.add(n.current);return t}let E2="div";var Wo=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(Wo||{});function S2(e,t){let n=k.useRef(null),i=ni(n,t),{initialFocus:a,initialFocusFallback:u,containers:c,features:f=15,...h}=e;pu()||(f=0);let p=hu(n);I2(f,{ownerDocument:p});let m=C2(f,{ownerDocument:p,container:n,initialFocus:a,initialFocusFallback:u});O2(f,{ownerDocument:p,container:n,containers:c,previousActiveElement:m});let y=_2(),x=Zt(U=>{let te=n.current;te&&(F=>F())(()=>{Ji(y.current,{[Ks.Forwards]:()=>{Vs(te,yi.First,{skipElements:[U.relatedTarget,u]})},[Ks.Backwards]:()=>{Vs(te,yi.Last,{skipElements:[U.relatedTarget,u]})}})})}),b=qa(!!(f&2),"focus-trap#tab-lock"),N=Ch(),S=k.useRef(!1),C={ref:i,onKeyDown(U){U.key=="Tab"&&(S.current=!0,N.requestAnimationFrame(()=>{S.current=!1}))},onBlur(U){if(!(f&4))return;let te=Fy(c);n.current instanceof HTMLElement&&te.add(n.current);let F=U.relatedTarget;F instanceof HTMLElement&&F.dataset.headlessuiFocusGuard!=="true"&&(jy(te,F)||(S.current?Vs(n.current,Ji(y.current,{[Ks.Forwards]:()=>yi.Next,[Ks.Backwards]:()=>yi.Previous})|yi.WrapAround,{relativeTo:U.target}):U.target instanceof HTMLElement&&bi(U.target)))}},L=xr();return re.createElement(re.Fragment,null,b&&re.createElement(Rd,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:x,features:Kc.Focusable}),L({ourProps:C,theirProps:h,defaultTag:E2,name:"FocusTrap"}),b&&re.createElement(Rd,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:x,features:Kc.Focusable}))}let T2=Xn(S2),N2=Object.assign(T2,{features:Wo});function k2(e=!0){let t=k.useRef(Xi.slice());return Ah(([n],[i])=>{i===!0&&n===!1&&hl(()=>{t.current.splice(0)}),i===!1&&n===!0&&(t.current=Xi.slice())},[e,Xi,t]),Zt(()=>{var n;return(n=t.current.find(i=>i!=null&&i.isConnected))!=null?n:null})}function I2(e,{ownerDocument:t}){let n=!!(e&8),i=k2(n);Ah(()=>{n||(t==null?void 0:t.activeElement)===(t==null?void 0:t.body)&&bi(i())},[n]),Dy(()=>{n&&bi(i())})}function C2(e,{ownerDocument:t,container:n,initialFocus:i,initialFocusFallback:a}){let u=k.useRef(null),c=qa(!!(e&1),"focus-trap#initial-focus"),f=Dh();return Ah(()=>{if(e===0)return;if(!c){a!=null&&a.current&&bi(a.current);return}let h=n.current;h&&hl(()=>{if(!f.current)return;let p=t==null?void 0:t.activeElement;if(i!=null&&i.current){if((i==null?void 0:i.current)===p){u.current=p;return}}else if(h.contains(p)){u.current=p;return}if(i!=null&&i.current)bi(i.current);else{if(e&16){if(Vs(h,yi.First|yi.AutoFocus)!==Ld.Error)return}else if(Vs(h,yi.First)!==Ld.Error)return;if(a!=null&&a.current&&(bi(a.current),(t==null?void 0:t.activeElement)===a.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}u.current=t==null?void 0:t.activeElement})},[a,c,e]),u}function O2(e,{ownerDocument:t,container:n,containers:i,previousActiveElement:a}){let u=Dh(),c=!!(e&4);Ay(t==null?void 0:t.defaultView,"focus",f=>{if(!c||!u.current)return;let h=Fy(i);n.current instanceof HTMLElement&&h.add(n.current);let p=a.current;if(!p)return;let m=f.target;m&&m instanceof HTMLElement?jy(h,m)?(a.current=m,bi(m)):(f.preventDefault(),f.stopPropagation(),bi(p)):bi(a.current)},!0)}function jy(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function By(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||((t=e.as)!=null?t:Ky)!==k.Fragment||re.Children.count(e.children)===1}let gl=k.createContext(null);gl.displayName="TransitionContext";var A2=(e=>(e.Visible="visible",e.Hidden="hidden",e))(A2||{});function D2(){let e=k.useContext(gl);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function P2(){let e=k.useContext(vl);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let vl=k.createContext(null);vl.displayName="NestingContext";function yl(e){return"children"in e?yl(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function Hy(e,t){let n=ea(e),i=k.useRef([]),a=Dh(),u=Ch(),c=Zt((b,N=Zi.Hidden)=>{let S=i.current.findIndex(({el:C})=>C===b);S!==-1&&(Ji(N,{[Zi.Unmount](){i.current.splice(S,1)},[Zi.Hidden](){i.current[S].state="hidden"}}),u.microTask(()=>{var C;!yl(i)&&a.current&&((C=n.current)==null||C.call(n))}))}),f=Zt(b=>{let N=i.current.find(({el:S})=>S===b);return N?N.state!=="visible"&&(N.state="visible"):i.current.push({el:b,state:"visible"}),()=>c(b,Zi.Unmount)}),h=k.useRef([]),p=k.useRef(Promise.resolve()),m=k.useRef({enter:[],leave:[]}),y=Zt((b,N,S)=>{h.current.splice(0),t&&(t.chains.current[N]=t.chains.current[N].filter(([C])=>C!==b)),t==null||t.chains.current[N].push([b,new Promise(C=>{h.current.push(C)})]),t==null||t.chains.current[N].push([b,new Promise(C=>{Promise.all(m.current[N].map(([L,U])=>U)).then(()=>C())})]),N==="enter"?p.current=p.current.then(()=>t==null?void 0:t.wait.current).then(()=>S(N)):S(N)}),x=Zt((b,N,S)=>{Promise.all(m.current[N].splice(0).map(([C,L])=>L)).then(()=>{var C;(C=h.current.shift())==null||C()}).then(()=>S(N))});return k.useMemo(()=>({children:i,register:f,unregister:c,onStart:y,onStop:x,wait:p,chains:m}),[f,c,i,y,x,m,p])}let Ky=k.Fragment,Uy=Hc.RenderStrategy;function R2(e,t){var n,i;let{transition:a=!0,beforeEnter:u,afterEnter:c,beforeLeave:f,afterLeave:h,enter:p,enterFrom:m,enterTo:y,entered:x,leave:b,leaveFrom:N,leaveTo:S,...C}=e,[L,U]=k.useState(null),te=k.useRef(null),F=By(e),ue=ni(...F?[te,t,U]:t===null?[]:[t]),ce=(n=C.unmount)==null||n?Zi.Unmount:Zi.Hidden,{show:z,appear:Q,initial:se}=D2(),[J,V]=k.useState(z?"visible":"hidden"),ne=P2(),{register:ye,unregister:M}=ne;Fn(()=>ye(te),[ye,te]),Fn(()=>{if(ce===Zi.Hidden&&te.current){if(z&&J!=="visible"){V("visible");return}return Ji(J,{hidden:()=>M(te),visible:()=>ye(te)})}},[J,te,ye,M,z,ce]);let ae=pu();Fn(()=>{if(F&&ae&&J==="visible"&&te.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[te,J,ae,F]);let W=se&&!Q,pe=Q&&z&&se,oe=k.useRef(!1),X=Hy(()=>{oe.current||(V("hidden"),M(te))},ne),de=Zt(Ye=>{oe.current=!0;let qe=Ye?"enter":"leave";X.onStart(te,qe,Se=>{Se==="enter"?u==null||u():Se==="leave"&&(f==null||f())})}),ge=Zt(Ye=>{let qe=Ye?"enter":"leave";oe.current=!1,X.onStop(te,qe,Se=>{Se==="enter"?c==null||c():Se==="leave"&&(h==null||h())}),qe==="leave"&&!yl(X)&&(V("hidden"),M(te))});k.useEffect(()=>{F&&a||(de(z),ge(z))},[z,F,a]);let Ee=!(!a||!F||!ae||W),[,ke]=n2(Ee,L,z,{start:de,end:ge}),Me=Lo({ref:ue,className:((i=Pd(C.className,pe&&p,pe&&m,ke.enter&&p,ke.enter&&ke.closed&&m,ke.enter&&!ke.closed&&y,ke.leave&&b,ke.leave&&!ke.closed&&N,ke.leave&&ke.closed&&S,!ke.transition&&z&&x))==null?void 0:i.trim())||void 0,...t2(ke)}),Re=0;J==="visible"&&(Re|=Wr.Open),J==="hidden"&&(Re|=Wr.Closed),ke.enter&&(Re|=Wr.Opening),ke.leave&&(Re|=Wr.Closing);let Be=xr();return re.createElement(vl.Provider,{value:X},re.createElement(a2,{value:Re},Be({ourProps:Me,theirProps:C,defaultTag:Ky,features:Uy,visible:J==="visible",name:"Transition.Child"})))}function M2(e,t){let{show:n,appear:i=!1,unmount:a=!0,...u}=e,c=k.useRef(null),f=By(e),h=ni(...f?[c,t]:t===null?[]:[t]);pu();let p=ml();if(n===void 0&&p!==null&&(n=(p&Wr.Open)===Wr.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[m,y]=k.useState(n?"visible":"hidden"),x=Hy(()=>{n||y("hidden")}),[b,N]=k.useState(!0),S=k.useRef([n]);Fn(()=>{b!==!1&&S.current[S.current.length-1]!==n&&(S.current.push(n),N(!1))},[S,n]);let C=k.useMemo(()=>({show:n,appear:i,initial:b}),[n,i,b]);Fn(()=>{n?y("visible"):!yl(x)&&c.current!==null&&y("hidden")},[n,x]);let L={unmount:a},U=Zt(()=>{var ue;b&&N(!1),(ue=e.beforeEnter)==null||ue.call(e)}),te=Zt(()=>{var ue;b&&N(!1),(ue=e.beforeLeave)==null||ue.call(e)}),F=xr();return re.createElement(vl.Provider,{value:x},re.createElement(gl.Provider,{value:C},F({ourProps:{...L,as:k.Fragment,children:re.createElement(zy,{ref:h,...L,...u,beforeEnter:U,beforeLeave:te})},theirProps:{},defaultTag:k.Fragment,features:Uy,visible:m==="visible",name:"Transition"})))}function L2(e,t){let n=k.useContext(gl)!==null,i=ml()!==null;return re.createElement(re.Fragment,null,!n&&i?re.createElement(Wd,{ref:t,...e}):re.createElement(zy,{ref:t,...e}))}let Wd=Xn(M2),zy=Xn(R2),Ph=Xn(L2),$2=Object.assign(Wd,{Child:Ph,Root:Wd});var W2=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(W2||{}),F2=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(F2||{});let j2={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},Rh=k.createContext(null);Rh.displayName="DialogContext";function wl(e){let t=k.useContext(Rh);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,wl),n}return t}function B2(e,t){return Ji(t.type,j2,e,t)}let Xg=Xn(function(e,t){let n=k.useId(),{id:i=`headlessui-dialog-${n}`,open:a,onClose:u,initialFocus:c,role:f="dialog",autoFocus:h=!0,__demoMode:p=!1,unmount:m=!1,...y}=e,x=k.useRef(!1);f=function(){return f==="dialog"||f==="alertdialog"?f:(x.current||(x.current=!0,console.warn(`Invalid role [${f}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let b=ml();a===void 0&&b!==null&&(a=(b&Wr.Open)===Wr.Open);let N=k.useRef(null),S=ni(N,t),C=hu(N),L=a?0:1,[U,te]=k.useReducer(B2,{titleId:null,descriptionId:null,panelRef:k.createRef()}),F=Zt(()=>u(!1)),ue=Zt(ge=>te({type:0,id:ge})),ce=pu()?L===0:!1,[z,Q]=g2(),se={get current(){var ge;return(ge=U.panelRef.current)!=null?ge:N.current}},J=Wy(),{resolveContainers:V}=b2({mainTreeNode:J,portals:z,defaultContainers:[se]}),ne=b!==null?(b&Wr.Closing)===Wr.Closing:!1;DD(p||ne?!1:ce,{allowed:Zt(()=>{var ge,Ee;return[(Ee=(ge=N.current)==null?void 0:ge.closest("[data-headlessui-portal]"))!=null?Ee:null]}),disallowed:Zt(()=>{var ge;return[(ge=J==null?void 0:J.closest("body > *:not(#headlessui-portal-root)"))!=null?ge:null]})}),zD(ce,V,ge=>{ge.preventDefault(),F()}),w2(ce,C==null?void 0:C.defaultView,ge=>{ge.preventDefault(),ge.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),F()}),ZD(p||ne?!1:ce,C,V),PD(ce,N,F);let[ye,M]=ED(),ae=k.useMemo(()=>[{dialogState:L,close:F,setTitleId:ue,unmount:m},U],[L,U,F,ue,m]),W=k.useMemo(()=>({open:L===0}),[L]),pe={ref:S,id:i,role:f,tabIndex:-1,"aria-modal":p?void 0:L===0?!0:void 0,"aria-labelledby":U.titleId,"aria-describedby":ye,unmount:m},oe=!x2(),X=Wo.None;ce&&!p&&(X|=Wo.RestoreFocus,X|=Wo.TabLock,h&&(X|=Wo.AutoFocus),oe&&(X|=Wo.InitialFocus));let de=xr();return re.createElement(s2,null,re.createElement(Vg,{force:!0},re.createElement(y2,null,re.createElement(Rh.Provider,{value:ae},re.createElement(Ly,{target:N},re.createElement(Vg,{force:!1},re.createElement(M,{slot:W},re.createElement(Q,null,re.createElement(N2,{initialFocus:c,initialFocusFallback:N,containers:V,features:X},re.createElement(CD,{value:F},de({ourProps:pe,theirProps:y,slot:W,defaultTag:H2,features:K2,visible:L===0,name:"Dialog"})))))))))))}),H2="div",K2=Hc.RenderStrategy|Hc.Static;function U2(e,t){let{transition:n=!1,open:i,...a}=e,u=ml(),c=e.hasOwnProperty("open")||u!==null,f=e.hasOwnProperty("onClose");if(!c&&!f)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!c)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!f)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!u&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(i!==void 0||n)&&!a.static?re.createElement(qg,null,re.createElement($2,{show:i,transition:n,unmount:a.unmount},re.createElement(Xg,{ref:t,...a}))):re.createElement(qg,null,re.createElement(Xg,{ref:t,open:i,...a}))}let z2="div";function Y2(e,t){let n=k.useId(),{id:i=`headlessui-dialog-panel-${n}`,transition:a=!1,...u}=e,[{dialogState:c,unmount:f},h]=wl("Dialog.Panel"),p=ni(t,h.panelRef),m=k.useMemo(()=>({open:c===0}),[c]),y=Zt(C=>{C.stopPropagation()}),x={ref:p,id:i,onClick:y},b=a?Ph:k.Fragment,N=a?{unmount:f}:{},S=xr();return re.createElement(b,{...N},S({ourProps:x,theirProps:u,slot:m,defaultTag:z2,name:"Dialog.Panel"}))}let V2="div";function q2(e,t){let{transition:n=!1,...i}=e,[{dialogState:a,unmount:u}]=wl("Dialog.Backdrop"),c=k.useMemo(()=>({open:a===0}),[a]),f={ref:t,"aria-hidden":!0},h=n?Ph:k.Fragment,p=n?{unmount:u}:{},m=xr();return re.createElement(h,{...p},m({ourProps:f,theirProps:i,slot:c,defaultTag:V2,name:"Dialog.Backdrop"}))}let X2="h2";function G2(e,t){let n=k.useId(),{id:i=`headlessui-dialog-title-${n}`,...a}=e,[{dialogState:u,setTitleId:c}]=wl("Dialog.Title"),f=ni(t);k.useEffect(()=>(c(i),()=>c(null)),[i,c]);let h=k.useMemo(()=>({open:u===0}),[u]),p={ref:f,id:i};return xr()({ourProps:p,theirProps:a,slot:h,defaultTag:X2,name:"Dialog.Title"})}let Z2=Xn(U2),Mh=Xn(Y2);Xn(q2);let Q2=Xn(G2),Yy=Object.assign(Z2,{Panel:Mh,Title:Q2,Description:kD});const vi=[{id:"WorkflowType",label:"WorkflowType",type:"text"},{id:"WorkflowId",label:"WorkflowId",type:"text"},{id:"RunId",label:"RunId",type:"text"},{id:"ExecutionStatus",label:"Status",type:"status"},{id:"StartTime",label:"StartTime",type:"datetime"},{id:"CloseTime",label:"CloseTime",type:"datetime"},{id:"TaskQueue",label:"TaskQueue",type:"text"}],Gg=[{id:"equals",label:"=",alternatives:["equals","is"],searchOperator:"="},{id:"notEquals",label:"!=",alternatives:["not equals","is not"],searchOperator:"!="},{id:"starts_with",label:"starts with",alternatives:["startswith","start"],searchOperator:"starts_with"},{id:"isNull",label:"is null",alternatives:["null"],searchOperator:"is null"},{id:"isNotNull",label:"is not null",alternatives:["not null"],searchOperator:"is not null"},{id:"greaterThan",label:">",alternatives:["after","greater than"],searchOperator:">"},{id:"lessThan",label:"<",alternatives:["before","less than"],searchOperator:"<"},{id:"between",label:"between",alternatives:[],searchOperator:"between"}],Gf=[{value:"Completed",color:"text-green-700 bg-green-50"},{value:"Running",color:"text-blue-700 bg-blue-50"},{value:"TimedOut",color:"text-orange-700 bg-orange-50"},{value:"Failed",color:"text-red-700 bg-red-50"},{value:"Canceled",color:"text-gray-700 bg-gray-50"},{value:"Terminated",color:"text-yellow-700 bg-yellow-50"},{value:"Continued as New",color:"text-pink-700 bg-pink-50"}],yc=[{id:"equals",label:"=",alternatives:["==","is","="]},{id:"between",label:"between",alternatives:["between"]},{id:"greater",label:">",alternatives:["gt",">"]},{id:"greaterOrEqual",label:">=",alternatives:["gte",">="]},{id:"less",label:"<",alternatives:["lt","<"]},{id:"lessOrEqual",label:"<=",alternatives:["lte","<="]}],Vy=6048e5,J2=864e5,Zg=Symbol.for("constructDateFrom");function eo(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&Zg in e?e[Zg](t):e instanceof Date?new e.constructor(t):new Date(t)}function Kr(e,t){return eo(t||e,e)}let eP={};function xl(){return eP}function au(e,t){var f,h,p,m;const n=xl(),i=(t==null?void 0:t.weekStartsOn)??((h=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:h.weekStartsOn)??n.weekStartsOn??((m=(p=n.locale)==null?void 0:p.options)==null?void 0:m.weekStartsOn)??0,a=Kr(e,t==null?void 0:t.in),u=a.getDay(),c=(u<i?7:0)+u-i;return a.setDate(a.getDate()-c),a.setHours(0,0,0,0),a}function zc(e,t){return au(e,{...t,weekStartsOn:1})}function qy(e,t){const n=Kr(e,t==null?void 0:t.in),i=n.getFullYear(),a=eo(n,0);a.setFullYear(i+1,0,4),a.setHours(0,0,0,0);const u=zc(a),c=eo(n,0);c.setFullYear(i,0,4),c.setHours(0,0,0,0);const f=zc(c);return n.getTime()>=u.getTime()?i+1:n.getTime()>=f.getTime()?i:i-1}function Qg(e){const t=Kr(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function tP(e,...t){const n=eo.bind(null,t.find(i=>typeof i=="object"));return t.map(n)}function Jg(e,t){const n=Kr(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function nP(e,t,n){const[i,a]=tP(n==null?void 0:n.in,e,t),u=Jg(i),c=Jg(a),f=+u-Qg(u),h=+c-Qg(c);return Math.round((f-h)/J2)}function rP(e,t){const n=qy(e,t),i=eo(e,0);return i.setFullYear(n,0,4),i.setHours(0,0,0,0),zc(i)}function iP(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function oP(e){return!(!iP(e)&&typeof e!="number"||isNaN(+Kr(e)))}function aP(e,t){const n=Kr(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const sP={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},uP=(e,t,n)=>{let i;const a=sP[e];return typeof a=="string"?i=a:t===1?i=a.one:i=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function Zf(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const cP={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},lP={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},fP={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},dP={date:Zf({formats:cP,defaultWidth:"full"}),time:Zf({formats:lP,defaultWidth:"full"}),dateTime:Zf({formats:fP,defaultWidth:"full"})},hP={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},pP=(e,t,n,i)=>hP[e];function Ls(e){return(t,n)=>{const i=n!=null&&n.context?String(n.context):"standalone";let a;if(i==="formatting"&&e.formattingValues){const c=e.defaultFormattingWidth||e.defaultWidth,f=n!=null&&n.width?String(n.width):c;a=e.formattingValues[f]||e.formattingValues[c]}else{const c=e.defaultWidth,f=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[f]||e.values[c]}const u=e.argumentCallback?e.argumentCallback(t):t;return a[u]}}const mP={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},gP={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},vP={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},yP={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},wP={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},xP={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},bP=(e,t)=>{const n=Number(e),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},_P={ordinalNumber:bP,era:Ls({values:mP,defaultWidth:"wide"}),quarter:Ls({values:gP,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Ls({values:vP,defaultWidth:"wide"}),day:Ls({values:yP,defaultWidth:"wide"}),dayPeriod:Ls({values:wP,defaultWidth:"wide",formattingValues:xP,defaultFormattingWidth:"wide"})};function $s(e){return(t,n={})=>{const i=n.width,a=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],u=t.match(a);if(!u)return null;const c=u[0],f=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth],h=Array.isArray(f)?SP(f,y=>y.test(c)):EP(f,y=>y.test(c));let p;p=e.valueCallback?e.valueCallback(h):h,p=n.valueCallback?n.valueCallback(p):p;const m=t.slice(c.length);return{value:p,rest:m}}}function EP(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function SP(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function TP(e){return(t,n={})=>{const i=t.match(e.matchPattern);if(!i)return null;const a=i[0],u=t.match(e.parsePattern);if(!u)return null;let c=e.valueCallback?e.valueCallback(u[0]):u[0];c=n.valueCallback?n.valueCallback(c):c;const f=t.slice(a.length);return{value:c,rest:f}}}const NP=/^(\d+)(th|st|nd|rd)?/i,kP=/\d+/i,IP={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},CP={any:[/^b/i,/^(a|c)/i]},OP={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},AP={any:[/1/i,/2/i,/3/i,/4/i]},DP={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},PP={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},RP={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},MP={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},LP={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},$P={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},WP={ordinalNumber:TP({matchPattern:NP,parsePattern:kP,valueCallback:e=>parseInt(e,10)}),era:$s({matchPatterns:IP,defaultMatchWidth:"wide",parsePatterns:CP,defaultParseWidth:"any"}),quarter:$s({matchPatterns:OP,defaultMatchWidth:"wide",parsePatterns:AP,defaultParseWidth:"any",valueCallback:e=>e+1}),month:$s({matchPatterns:DP,defaultMatchWidth:"wide",parsePatterns:PP,defaultParseWidth:"any"}),day:$s({matchPatterns:RP,defaultMatchWidth:"wide",parsePatterns:MP,defaultParseWidth:"any"}),dayPeriod:$s({matchPatterns:LP,defaultMatchWidth:"any",parsePatterns:$P,defaultParseWidth:"any"})},FP={code:"en-US",formatDistance:uP,formatLong:dP,formatRelative:pP,localize:_P,match:WP,options:{weekStartsOn:0,firstWeekContainsDate:1}};function jP(e,t){const n=Kr(e,t==null?void 0:t.in);return nP(n,aP(n))+1}function BP(e,t){const n=Kr(e,t==null?void 0:t.in),i=+zc(n)-+rP(n);return Math.round(i/Vy)+1}function Xy(e,t){var m,y,x,b;const n=Kr(e,t==null?void 0:t.in),i=n.getFullYear(),a=xl(),u=(t==null?void 0:t.firstWeekContainsDate)??((y=(m=t==null?void 0:t.locale)==null?void 0:m.options)==null?void 0:y.firstWeekContainsDate)??a.firstWeekContainsDate??((b=(x=a.locale)==null?void 0:x.options)==null?void 0:b.firstWeekContainsDate)??1,c=eo((t==null?void 0:t.in)||e,0);c.setFullYear(i+1,0,u),c.setHours(0,0,0,0);const f=au(c,t),h=eo((t==null?void 0:t.in)||e,0);h.setFullYear(i,0,u),h.setHours(0,0,0,0);const p=au(h,t);return+n>=+f?i+1:+n>=+p?i:i-1}function HP(e,t){var f,h,p,m;const n=xl(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(p=n.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??1,a=Xy(e,t),u=eo((t==null?void 0:t.in)||e,0);return u.setFullYear(a,0,i),u.setHours(0,0,0,0),au(u,t)}function KP(e,t){const n=Kr(e,t==null?void 0:t.in),i=+au(n,t)-+HP(n,t);return Math.round(i/Vy)+1}function Ct(e,t){const n=e<0?"-":"",i=Math.abs(e).toString().padStart(t,"0");return n+i}const zi={y(e,t){const n=e.getFullYear(),i=n>0?n:1-n;return Ct(t==="yy"?i%100:i,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Ct(n+1,2)},d(e,t){return Ct(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Ct(e.getHours()%12||12,t.length)},H(e,t){return Ct(e.getHours(),t.length)},m(e,t){return Ct(e.getMinutes(),t.length)},s(e,t){return Ct(e.getSeconds(),t.length)},S(e,t){const n=t.length,i=e.getMilliseconds(),a=Math.trunc(i*Math.pow(10,n-3));return Ct(a,t.length)}},Da={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},e0={G:function(e,t,n){const i=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});case"GGGG":default:return n.era(i,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const i=e.getFullYear(),a=i>0?i:1-i;return n.ordinalNumber(a,{unit:"year"})}return zi.y(e,t)},Y:function(e,t,n,i){const a=Xy(e,i),u=a>0?a:1-a;if(t==="YY"){const c=u%100;return Ct(c,2)}return t==="Yo"?n.ordinalNumber(u,{unit:"year"}):Ct(u,t.length)},R:function(e,t){const n=qy(e);return Ct(n,t.length)},u:function(e,t){const n=e.getFullYear();return Ct(n,t.length)},Q:function(e,t,n){const i=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return Ct(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,t,n){const i=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return Ct(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,t,n){const i=e.getMonth();switch(t){case"M":case"MM":return zi.M(e,t);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(e,t,n){const i=e.getMonth();switch(t){case"L":return String(i+1);case"LL":return Ct(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(e,t,n,i){const a=KP(e,i);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):Ct(a,t.length)},I:function(e,t,n){const i=BP(e);return t==="Io"?n.ordinalNumber(i,{unit:"week"}):Ct(i,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):zi.d(e,t)},D:function(e,t,n){const i=jP(e);return t==="Do"?n.ordinalNumber(i,{unit:"dayOfYear"}):Ct(i,t.length)},E:function(e,t,n){const i=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});case"EEEE":default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(e,t,n,i){const a=e.getDay(),u=(a-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(u);case"ee":return Ct(u,2);case"eo":return n.ordinalNumber(u,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,i){const a=e.getDay(),u=(a-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(u);case"cc":return Ct(u,t.length);case"co":return n.ordinalNumber(u,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const i=e.getDay(),a=i===0?7:i;switch(t){case"i":return String(a);case"ii":return Ct(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});case"iiii":default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const i=e.getHours();let a;switch(i===12?a=Da.noon:i===0?a=Da.midnight:a=i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const i=e.getHours();let a;switch(i>=17?a=Da.evening:i>=12?a=Da.afternoon:i>=4?a=Da.morning:a=Da.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let i=e.getHours()%12;return i===0&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return zi.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):zi.H(e,t)},K:function(e,t,n){const i=e.getHours()%12;return t==="Ko"?n.ordinalNumber(i,{unit:"hour"}):Ct(i,t.length)},k:function(e,t,n){let i=e.getHours();return i===0&&(i=24),t==="ko"?n.ordinalNumber(i,{unit:"hour"}):Ct(i,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):zi.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):zi.s(e,t)},S:function(e,t){return zi.S(e,t)},X:function(e,t,n){const i=e.getTimezoneOffset();if(i===0)return"Z";switch(t){case"X":return n0(i);case"XXXX":case"XX":return $o(i);case"XXXXX":case"XXX":default:return $o(i,":")}},x:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"x":return n0(i);case"xxxx":case"xx":return $o(i);case"xxxxx":case"xxx":default:return $o(i,":")}},O:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+t0(i,":");case"OOOO":default:return"GMT"+$o(i,":")}},z:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+t0(i,":");case"zzzz":default:return"GMT"+$o(i,":")}},t:function(e,t,n){const i=Math.trunc(+e/1e3);return Ct(i,t.length)},T:function(e,t,n){return Ct(+e,t.length)}};function t0(e,t=""){const n=e>0?"-":"+",i=Math.abs(e),a=Math.trunc(i/60),u=i%60;return u===0?n+String(a):n+String(a)+t+Ct(u,2)}function n0(e,t){return e%60===0?(e>0?"-":"+")+Ct(Math.abs(e)/60,2):$o(e,t)}function $o(e,t=""){const n=e>0?"-":"+",i=Math.abs(e),a=Ct(Math.trunc(i/60),2),u=Ct(i%60,2);return n+a+t+u}const r0=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Gy=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},UP=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],i=n[1],a=n[2];if(!a)return r0(e,t);let u;switch(i){case"P":u=t.dateTime({width:"short"});break;case"PP":u=t.dateTime({width:"medium"});break;case"PPP":u=t.dateTime({width:"long"});break;case"PPPP":default:u=t.dateTime({width:"full"});break}return u.replace("{{date}}",r0(i,t)).replace("{{time}}",Gy(a,t))},zP={p:Gy,P:UP},YP=/^D+$/,VP=/^Y+$/,qP=["D","DD","YY","YYYY"];function XP(e){return YP.test(e)}function GP(e){return VP.test(e)}function ZP(e,t,n){const i=QP(e,t,n);if(console.warn(i),qP.includes(e))throw new RangeError(i)}function QP(e,t,n){const i=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${i} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const JP=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,eR=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,tR=/^'([^]*?)'?$/,nR=/''/g,rR=/[a-zA-Z]/;function Wn(e,t,n){var m,y,x,b;const i=xl(),a=i.locale??FP,u=i.firstWeekContainsDate??((y=(m=i.locale)==null?void 0:m.options)==null?void 0:y.firstWeekContainsDate)??1,c=i.weekStartsOn??((b=(x=i.locale)==null?void 0:x.options)==null?void 0:b.weekStartsOn)??0,f=Kr(e,n==null?void 0:n.in);if(!oP(f))throw new RangeError("Invalid time value");let h=t.match(eR).map(N=>{const S=N[0];if(S==="p"||S==="P"){const C=zP[S];return C(N,a.formatLong)}return N}).join("").match(JP).map(N=>{if(N==="''")return{isToken:!1,value:"'"};const S=N[0];if(S==="'")return{isToken:!1,value:iR(N)};if(e0[S])return{isToken:!0,value:N};if(S.match(rR))throw new RangeError("Format string contains an unescaped latin alphabet character `"+S+"`");return{isToken:!1,value:N}});a.localize.preprocessor&&(h=a.localize.preprocessor(f,h));const p={firstWeekContainsDate:u,weekStartsOn:c,locale:a};return h.map(N=>{if(!N.isToken)return N.value;const S=N.value;(GP(S)||XP(S))&&ZP(S,t,String(e));const C=e0[S[0]];return C(f,S,a.localize,p)}).join("")}function iR(e){const t=e.match(tR);return t?t[1].replace(nR,"'"):e}const oR=(e,t,n,i)=>{if(n==="length"||n==="prototype"||n==="arguments"||n==="caller")return;const a=Object.getOwnPropertyDescriptor(e,n),u=Object.getOwnPropertyDescriptor(t,n);!aR(a,u)&&i||Object.defineProperty(e,n,u)},aR=function(e,t){return e===void 0||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},sR=(e,t)=>{const n=Object.getPrototypeOf(t);n!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,n)},uR=(e,t)=>`/* Wrapped ${e}*/
${t}`,cR=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),lR=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),fR=(e,t,n)=>{const i=n===""?"":`with ${n.trim()}() `,a=uR.bind(null,i,t.toString());Object.defineProperty(a,"name",lR),Object.defineProperty(e,"toString",{...cR,value:a})},dR=(e,t,{ignoreNonConfigurable:n=!1}={})=>{const{name:i}=e;for(const a of Reflect.ownKeys(t))oR(e,t,a,n);return sR(e,t),fR(e,t,i),e};var hR=dR,Fd={exports:{}},pR=()=>{const e={};return e.promise=new Promise((t,n)=>{e.resolve=t,e.reject=n}),e};(function(e,t){var n=Mr&&Mr.__awaiter||function(c,f,h,p){return new(h||(h=Promise))(function(m,y){function x(S){try{N(p.next(S))}catch(C){y(C)}}function b(S){try{N(p.throw(S))}catch(C){y(C)}}function N(S){S.done?m(S.value):new h(function(C){C(S.value)}).then(x,b)}N((p=p.apply(c,f||[])).next())})},i=Mr&&Mr.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(pR);function u(c,f="maxAge"){let h,p,m;const y=()=>n(this,void 0,void 0,function*(){if(h!==void 0)return;const N=S=>n(this,void 0,void 0,function*(){m=a.default();const C=S[1][f]-Date.now();if(C<=0){c.delete(S[0]),m.resolve();return}return h=S[0],p=setTimeout(()=>{c.delete(S[0]),m&&m.resolve()},C),typeof p.unref=="function"&&p.unref(),m.promise});try{for(const S of c)yield N(S)}catch{}h=void 0}),x=()=>{h=void 0,p!==void 0&&(clearTimeout(p),p=void 0),m!==void 0&&(m.reject(void 0),m=void 0)},b=c.set.bind(c);return c.set=(N,S)=>{c.has(N)&&c.delete(N);const C=b(N,S);return h&&h===N&&x(),y(),C},y(),c}t.default=u,e.exports=u,e.exports.default=u})(Fd,Fd.exports);var mR=Fd.exports;const gR=hR,vR=mR,Qf=new WeakMap,Zy=new WeakMap,Yc=(e,{cacheKey:t,cache:n=new Map,maxAge:i}={})=>{typeof i=="number"&&vR(n);const a=function(...u){const c=t?t(u):u[0],f=n.get(c);if(f)return f.data;const h=e.apply(this,u);return n.set(c,{data:h,maxAge:i?Date.now()+i:Number.POSITIVE_INFINITY}),h};return gR(a,e,{ignoreNonConfigurable:!0}),Zy.set(a,n),a};Yc.decorator=(e={})=>(t,n,i)=>{const a=t[n];if(typeof a!="function")throw new TypeError("The decorated value must be a function");delete i.value,delete i.writable,i.get=function(){if(!Qf.has(this)){const u=Yc(a,e);return Qf.set(this,u),u}return Qf.get(this)}};Yc.clear=e=>{const t=Zy.get(e);if(!t)throw new TypeError("Can't clear a function that was not memoized!");if(typeof t.clear!="function")throw new TypeError("The cache Map can't be cleared!");t.clear()};var yR=Yc;const Qy=eh(yR);function wR(e){return typeof e=="string"}function xR(e,t,n){return n.indexOf(e)===t}function bR(e){return e.toLowerCase()===e}function i0(e){return e.indexOf(",")===-1?e:e.split(",")}function jd(e){if(!e)return e;if(e==="C"||e==="posix"||e==="POSIX")return"en-US";if(e.indexOf(".")!==-1){var t=e.split(".")[0],n=t===void 0?"":t;return jd(n)}if(e.indexOf("@")!==-1){var i=e.split("@")[0],n=i===void 0?"":i;return jd(n)}if(e.indexOf("-")===-1||!bR(e))return e;var a=e.split("-"),u=a[0],c=a[1],f=c===void 0?"":c;return"".concat(u,"-").concat(f.toUpperCase())}function _R(e){var t=e===void 0?{}:e,n=t.useFallbackLocale,i=n===void 0?!0:n,a=t.fallbackLocale,u=a===void 0?"en-US":a,c=[];if(typeof navigator<"u"){for(var f=navigator.languages||[],h=[],p=0,m=f;p<m.length;p++){var y=m[p];h=h.concat(i0(y))}var x=navigator.language,b=x&&i0(x);c=c.concat(h,b)}return i&&c.push(u),c.filter(wR).map(jd).filter(xR)}var ER=Qy(_R,{cacheKey:JSON.stringify});function SR(e){return ER(e)[0]||null}var Jy=Qy(SR,{cacheKey:JSON.stringify});function Ni(e,t,n){return function(a,u){u===void 0&&(u=n);var c=e(a)+u;return t(c)}}function mu(e){return function(n){return new Date(e(n).getTime()-1)}}function gu(e,t){return function(i){return[e(i),t(i)]}}function Kt(e){if(e instanceof Date)return e.getFullYear();if(typeof e=="number")return e;var t=parseInt(e,10);if(typeof e=="string"&&!isNaN(t))return t;throw new Error("Failed to get year from date: ".concat(e,"."))}function no(e){if(e instanceof Date)return e.getMonth();throw new Error("Failed to get month from date: ".concat(e,"."))}function bl(e){if(e instanceof Date)return e.getDate();throw new Error("Failed to get year from date: ".concat(e,"."))}function Xa(e){var t=Kt(e),n=t+(-t+1)%100,i=new Date;return i.setFullYear(n,0,1),i.setHours(0,0,0,0),i}var TR=Ni(Kt,Xa,-100),ew=Ni(Kt,Xa,100),Lh=mu(ew),NR=Ni(Kt,Lh,-100),tw=gu(Xa,Lh);function ro(e){var t=Kt(e),n=t+(-t+1)%10,i=new Date;return i.setFullYear(n,0,1),i.setHours(0,0,0,0),i}var nw=Ni(Kt,ro,-10),$h=Ni(Kt,ro,10),_l=mu($h),rw=Ni(Kt,_l,-10),iw=gu(ro,_l);function Ga(e){var t=Kt(e),n=new Date;return n.setFullYear(t,0,1),n.setHours(0,0,0,0),n}var ow=Ni(Kt,Ga,-1),Wh=Ni(Kt,Ga,1),El=mu(Wh),aw=Ni(Kt,El,-1),kR=gu(Ga,El);function Fh(e,t){return function(i,a){a===void 0&&(a=t);var u=Kt(i),c=no(i)+a,f=new Date;return f.setFullYear(u,c,1),f.setHours(0,0,0,0),e(f)}}function ta(e){var t=Kt(e),n=no(e),i=new Date;return i.setFullYear(t,n,1),i.setHours(0,0,0,0),i}var sw=Fh(ta,-1),jh=Fh(ta,1),vu=mu(jh),uw=Fh(vu,-1),IR=gu(ta,vu);function CR(e,t){return function(i,a){a===void 0&&(a=t);var u=Kt(i),c=no(i),f=bl(i)+a,h=new Date;return h.setFullYear(u,c,f),h.setHours(0,0,0,0),e(h)}}function yu(e){var t=Kt(e),n=no(e),i=bl(e),a=new Date;return a.setFullYear(t,n,i),a.setHours(0,0,0,0),a}var OR=CR(yu,1),Bh=mu(OR),AR=gu(yu,Bh);function cw(e){return bl(vu(e))}var En={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},DR={gregory:["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],hebrew:["he","he-IL"],islamic:["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"]},Hh=[0,1,2,3,4,5,6],Jf=new Map;function PR(e){return function(n,i){var a=n||Jy();Jf.has(a)||Jf.set(a,new Map);var u=Jf.get(a);return u.has(e)||u.set(e,new Intl.DateTimeFormat(a||void 0,e).format),u.get(e)(i)}}function RR(e){var t=new Date(e);return new Date(t.setHours(12))}function na(e){return function(t,n){return PR(e)(t,RR(n))}}var MR={day:"numeric"},LR={day:"numeric",month:"long",year:"numeric"},$R={month:"long"},WR={month:"long",year:"numeric"},FR={weekday:"short"},jR={weekday:"long"},BR={year:"numeric"},HR=na(MR),KR=na(LR),UR=na($R),lw=na(WR),zR=na(FR),YR=na(jR),Sl=na(BR),VR=Hh[0],qR=Hh[5],o0=Hh[6];function su(e,t){t===void 0&&(t=En.ISO_8601);var n=e.getDay();switch(t){case En.ISO_8601:return(n+6)%7;case En.ISLAMIC:return(n+1)%7;case En.HEBREW:case En.GREGORY:return n;default:throw new Error("Unsupported calendar type.")}}function XR(e){var t=Xa(e);return Kt(t)}function GR(e){var t=ro(e);return Kt(t)}function Bd(e,t){t===void 0&&(t=En.ISO_8601);var n=Kt(e),i=no(e),a=e.getDate()-su(e,t);return new Date(n,i,a)}function ZR(e,t){t===void 0&&(t=En.ISO_8601);var n=t===En.GREGORY?En.GREGORY:En.ISO_8601,i=Bd(e,t),a=Kt(e)+1,u,c;do u=new Date(a,0,n===En.ISO_8601?4:1),c=Bd(u,t),a-=1;while(e<c);return Math.round((i.getTime()-c.getTime())/(864e5*7))+1}function qo(e,t){switch(e){case"century":return Xa(t);case"decade":return ro(t);case"year":return Ga(t);case"month":return ta(t);case"day":return yu(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function QR(e,t){switch(e){case"century":return TR(t);case"decade":return nw(t);case"year":return ow(t);case"month":return sw(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function fw(e,t){switch(e){case"century":return ew(t);case"decade":return $h(t);case"year":return Wh(t);case"month":return jh(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function JR(e,t){switch(e){case"decade":return nw(t,-100);case"year":return ow(t,-10);case"month":return sw(t,-12);default:throw new Error("Invalid rangeType: ".concat(e))}}function eM(e,t){switch(e){case"decade":return $h(t,100);case"year":return Wh(t,10);case"month":return jh(t,12);default:throw new Error("Invalid rangeType: ".concat(e))}}function dw(e,t){switch(e){case"century":return Lh(t);case"decade":return _l(t);case"year":return El(t);case"month":return vu(t);case"day":return Bh(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function tM(e,t){switch(e){case"century":return NR(t);case"decade":return rw(t);case"year":return aw(t);case"month":return uw(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function nM(e,t){switch(e){case"decade":return rw(t,-100);case"year":return aw(t,-10);case"month":return uw(t,-12);default:throw new Error("Invalid rangeType: ".concat(e))}}function a0(e,t){switch(e){case"century":return tw(t);case"decade":return iw(t);case"year":return kR(t);case"month":return IR(t);case"day":return AR(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function rM(e,t,n){var i=[t,n].sort(function(a,u){return a.getTime()-u.getTime()});return[qo(e,i[0]),dw(e,i[1])]}function hw(e,t,n){return n.map(function(i){return(t||Sl)(e,i)}).join("  ")}function iM(e,t,n){return hw(e,t,tw(n))}function pw(e,t,n){return hw(e,t,iw(n))}function oM(e){return e.getDay()===new Date().getDay()}function mw(e,t){t===void 0&&(t=En.ISO_8601);var n=e.getDay();switch(t){case En.ISLAMIC:case En.HEBREW:return n===qR||n===o0;case En.ISO_8601:case En.GREGORY:return n===o0||n===VR;default:throw new Error("Unsupported calendar type.")}}var Qr="react-calendar__navigation";function aM(e){var t=e.activeStartDate,n=e.drillUp,i=e.formatMonthYear,a=i===void 0?lw:i,u=e.formatYear,c=u===void 0?Sl:u,f=e.locale,h=e.maxDate,p=e.minDate,m=e.navigationAriaLabel,y=m===void 0?"":m,x=e.navigationAriaLive,b=e.navigationLabel,N=e.next2AriaLabel,S=N===void 0?"":N,C=e.next2Label,L=C===void 0?"":C,U=e.nextAriaLabel,te=U===void 0?"":U,F=e.nextLabel,ue=F===void 0?"":F,ce=e.prev2AriaLabel,z=ce===void 0?"":ce,Q=e.prev2Label,se=Q===void 0?"":Q,J=e.prevAriaLabel,V=J===void 0?"":J,ne=e.prevLabel,ye=ne===void 0?"":ne,M=e.setActiveStartDate,ae=e.showDoubleView,W=e.view,pe=e.views,oe=pe.indexOf(W)>0,X=W!=="century",de=QR(W,t),ge=X?JR(W,t):void 0,Ee=fw(W,t),ke=X?eM(W,t):void 0,Me=function(){if(de.getFullYear()<0)return!0;var Xe=tM(W,t);return p&&p>=Xe}(),Re=X&&function(){if(ge.getFullYear()<0)return!0;var Xe=nM(W,t);return p&&p>=Xe}(),Be=h&&h<Ee,Ye=X&&h&&h<ke;function qe(){M(de,"prev")}function Se(){M(ge,"prev2")}function rt(){M(Ee,"next")}function xt(){M(ke,"next2")}function He(Xe){var it=function(){switch(W){case"century":return iM(f,c,Xe);case"decade":return pw(f,c,Xe);case"year":return c(f,Xe);case"month":return a(f,Xe);default:throw new Error("Invalid view: ".concat(W,"."))}}();return b?b({date:Xe,label:it,locale:f||Jy()||void 0,view:W}):it}function Tt(){var Xe="".concat(Qr,"__label");return _.jsxs("button",{"aria-label":y,"aria-live":x,className:Xe,disabled:!oe,onClick:n,style:{flexGrow:1},type:"button",children:[_.jsx("span",{className:"".concat(Xe,"__labelText ").concat(Xe,"__labelText--from"),children:He(t)}),ae?_.jsxs(_.Fragment,{children:[_.jsx("span",{className:"".concat(Xe,"__divider"),children:"  "}),_.jsx("span",{className:"".concat(Xe,"__labelText ").concat(Xe,"__labelText--to"),children:He(Ee)})]}):null]})}return _.jsxs("div",{className:Qr,children:[se!==null&&X?_.jsx("button",{"aria-label":z,className:"".concat(Qr,"__arrow ").concat(Qr,"__prev2-button"),disabled:Re,onClick:Se,type:"button",children:se}):null,ye!==null&&_.jsx("button",{"aria-label":V,className:"".concat(Qr,"__arrow ").concat(Qr,"__prev-button"),disabled:Me,onClick:qe,type:"button",children:ye}),Tt(),ue!==null&&_.jsx("button",{"aria-label":te,className:"".concat(Qr,"__arrow ").concat(Qr,"__next-button"),disabled:Be,onClick:rt,type:"button",children:ue}),L!==null&&X?_.jsx("button",{"aria-label":S,className:"".concat(Qr,"__arrow ").concat(Qr,"__next2-button"),disabled:Ye,onClick:xt,type:"button",children:L}):null]})}var La=function(){return La=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},La.apply(this,arguments)},sM=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n};function s0(e){return"".concat(e,"%")}function Kh(e){var t=e.children,n=e.className,i=e.count,a=e.direction,u=e.offset,c=e.style,f=e.wrap,h=sM(e,["children","className","count","direction","offset","style","wrap"]);return _.jsx("div",La({className:n,style:La({display:"flex",flexDirection:a,flexWrap:f?"wrap":"nowrap"},c)},h,{children:k.Children.map(t,function(p,m){var y=u&&m===0?s0(100*u/i):null;return k.cloneElement(p,La(La({},p.props),{style:{flexBasis:s0(100/i),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:y,marginInlineStart:y,marginInlineEnd:0}}))})}))}function uM(e,t,n){return t&&t>e?t:n&&n<e?n:e}function uu(e,t){return t[0]<=e&&t[1]>=e}function cM(e,t){return e[0]<=t[0]&&e[1]>=t[1]}function gw(e,t){return uu(e[0],t)||uu(e[1],t)}function u0(e,t,n){var i=gw(t,e),a=[];if(i){a.push(n);var u=uu(e[0],t),c=uu(e[1],t);u&&a.push("".concat(n,"Start")),c&&a.push("".concat(n,"End")),u&&c&&a.push("".concat(n,"BothEnds"))}return a}function lM(e){return Array.isArray(e)?e[0]!==null&&e[1]!==null:e!==null}function fM(e){if(!e)throw new Error("args is required");var t=e.value,n=e.date,i=e.hover,a="react-calendar__tile",u=[a];if(!n)return u;var c=new Date,f=function(){if(Array.isArray(n))return n;var b=e.dateType;if(!b)throw new Error("dateType is required when date is not an array of two dates");return a0(b,n)}();if(uu(c,f)&&u.push("".concat(a,"--now")),!t||!lM(t))return u;var h=function(){if(Array.isArray(t))return t;var b=e.valueType;if(!b)throw new Error("valueType is required when value is not an array of two dates");return a0(b,t)}();cM(h,f)?u.push("".concat(a,"--active")):gw(h,f)&&u.push("".concat(a,"--hasActive"));var p=u0(h,f,"".concat(a,"--range"));u.push.apply(u,p);var m=Array.isArray(t)?t:[t];if(i&&m.length===1){var y=i>h[0]?[h[0],i]:[i,h[0]],x=u0(y,f,"".concat(a,"--hover"));u.push.apply(u,x)}return u}function Tl(e){for(var t=e.className,n=e.count,i=n===void 0?3:n,a=e.dateTransform,u=e.dateType,c=e.end,f=e.hover,h=e.offset,p=e.renderTile,m=e.start,y=e.step,x=y===void 0?1:y,b=e.value,N=e.valueType,S=[],C=m;C<=c;C+=x){var L=a(C);S.push(p({classes:fM({date:L,dateType:u,hover:f,value:b,valueType:N}),date:L}))}return _.jsx(Kh,{className:t,count:i,offset:h,wrap:!0,children:S})}function Nl(e){var t=e.activeStartDate,n=e.children,i=e.classes,a=e.date,u=e.formatAbbr,c=e.locale,f=e.maxDate,h=e.maxDateTransform,p=e.minDate,m=e.minDateTransform,y=e.onClick,x=e.onMouseOver,b=e.style,N=e.tileClassName,S=e.tileContent,C=e.tileDisabled,L=e.view,U=k.useMemo(function(){var F={activeStartDate:t,date:a,view:L};return typeof N=="function"?N(F):N},[t,a,N,L]),te=k.useMemo(function(){var F={activeStartDate:t,date:a,view:L};return typeof S=="function"?S(F):S},[t,a,S,L]);return _.jsxs("button",{className:yr(i,U),disabled:p&&m(p)>a||f&&h(f)<a||(C==null?void 0:C({activeStartDate:t,date:a,view:L})),onClick:y?function(F){return y(a,F)}:void 0,onFocus:x?function(){return x(a)}:void 0,onMouseOver:x?function(){return x(a)}:void 0,style:b,type:"button",children:[u?_.jsx("abbr",{"aria-label":u(c,a),children:n}):n,te]})}var Hd=function(){return Hd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Hd.apply(this,arguments)},dM=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n},c0="react-calendar__century-view__decades__decade";function hM(e){var t=e.classes,n=t===void 0?[]:t,i=e.currentCentury,a=e.formatYear,u=a===void 0?Sl:a,c=dM(e,["classes","currentCentury","formatYear"]),f=c.date,h=c.locale,p=[];return n&&p.push.apply(p,n),p.push(c0),Xa(f).getFullYear()!==i&&p.push("".concat(c0,"--neighboringCentury")),_.jsx(Nl,Hd({},c,{classes:p,maxDateTransform:_l,minDateTransform:ro,view:"century",children:pw(h,u,f)}))}var Kd=function(){return Kd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Kd.apply(this,arguments)},l0=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n};function pM(e){var t=e.activeStartDate,n=e.hover,i=e.showNeighboringCentury,a=e.value,u=e.valueType,c=l0(e,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),f=XR(t),h=f+(i?119:99);return _.jsx(Tl,{className:"react-calendar__century-view__decades",dateTransform:ro,dateType:"decade",end:h,hover:n,renderTile:function(p){var m=p.date,y=l0(p,["date"]);return _.jsx(hM,Kd({},c,y,{activeStartDate:t,currentCentury:f,date:m}),m.getTime())},start:f,step:10,value:a,valueType:u})}var Ud=function(){return Ud=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Ud.apply(this,arguments)};function mM(e){function t(){return _.jsx(pM,Ud({},e))}return _.jsx("div",{className:"react-calendar__century-view",children:t()})}var zd=function(){return zd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},zd.apply(this,arguments)},gM=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n},f0="react-calendar__decade-view__years__year";function vM(e){var t=e.classes,n=t===void 0?[]:t,i=e.currentDecade,a=e.formatYear,u=a===void 0?Sl:a,c=gM(e,["classes","currentDecade","formatYear"]),f=c.date,h=c.locale,p=[];return n&&p.push.apply(p,n),p.push(f0),ro(f).getFullYear()!==i&&p.push("".concat(f0,"--neighboringDecade")),_.jsx(Nl,zd({},c,{classes:p,maxDateTransform:El,minDateTransform:Ga,view:"decade",children:u(h,f)}))}var Yd=function(){return Yd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Yd.apply(this,arguments)},d0=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n};function yM(e){var t=e.activeStartDate,n=e.hover,i=e.showNeighboringDecade,a=e.value,u=e.valueType,c=d0(e,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),f=GR(t),h=f+(i?11:9);return _.jsx(Tl,{className:"react-calendar__decade-view__years",dateTransform:Ga,dateType:"year",end:h,hover:n,renderTile:function(p){var m=p.date,y=d0(p,["date"]);return _.jsx(vM,Yd({},c,y,{activeStartDate:t,currentDecade:f,date:m}),m.getTime())},start:f,value:a,valueType:u})}var Vd=function(){return Vd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Vd.apply(this,arguments)};function wM(e){function t(){return _.jsx(yM,Vd({},e))}return _.jsx("div",{className:"react-calendar__decade-view",children:t()})}var qd=function(){return qd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},qd.apply(this,arguments)},xM=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n},h0=function(e,t,n){if(n||arguments.length===2)for(var i=0,a=t.length,u;i<a;i++)(u||!(i in t))&&(u||(u=Array.prototype.slice.call(t,0,i)),u[i]=t[i]);return e.concat(u||Array.prototype.slice.call(t))},bM="react-calendar__year-view__months__month";function _M(e){var t=e.classes,n=t===void 0?[]:t,i=e.formatMonth,a=i===void 0?UR:i,u=e.formatMonthYear,c=u===void 0?lw:u,f=xM(e,["classes","formatMonth","formatMonthYear"]),h=f.date,p=f.locale;return _.jsx(Nl,qd({},f,{classes:h0(h0([],n,!0),[bM],!1),formatAbbr:c,maxDateTransform:vu,minDateTransform:ta,view:"year",children:a(p,h)}))}var Xd=function(){return Xd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Xd.apply(this,arguments)},p0=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n};function EM(e){var t=e.activeStartDate,n=e.hover,i=e.value,a=e.valueType,u=p0(e,["activeStartDate","hover","value","valueType"]),c=0,f=11,h=Kt(t);return _.jsx(Tl,{className:"react-calendar__year-view__months",dateTransform:function(p){var m=new Date;return m.setFullYear(h,p,1),ta(m)},dateType:"month",end:f,hover:n,renderTile:function(p){var m=p.date,y=p0(p,["date"]);return _.jsx(_M,Xd({},u,y,{activeStartDate:t,date:m}),m.getTime())},start:c,value:i,valueType:a})}var Gd=function(){return Gd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Gd.apply(this,arguments)};function SM(e){function t(){return _.jsx(EM,Gd({},e))}return _.jsx("div",{className:"react-calendar__year-view",children:t()})}var Zd=function(){return Zd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Zd.apply(this,arguments)},TM=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n},ed="react-calendar__month-view__days__day";function NM(e){var t=e.calendarType,n=e.classes,i=n===void 0?[]:n,a=e.currentMonthIndex,u=e.formatDay,c=u===void 0?HR:u,f=e.formatLongDate,h=f===void 0?KR:f,p=TM(e,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),m=p.date,y=p.locale,x=[];return i&&x.push.apply(x,i),x.push(ed),mw(m,t)&&x.push("".concat(ed,"--weekend")),m.getMonth()!==a&&x.push("".concat(ed,"--neighboringMonth")),_.jsx(Nl,Zd({},p,{classes:x,formatAbbr:h,maxDateTransform:Bh,minDateTransform:yu,view:"month",children:c(y,m)}))}var Qd=function(){return Qd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Qd.apply(this,arguments)},m0=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n};function kM(e){var t=e.activeStartDate,n=e.calendarType,i=e.hover,a=e.showFixedNumberOfWeeks,u=e.showNeighboringMonth,c=e.value,f=e.valueType,h=m0(e,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),p=Kt(t),m=no(t),y=a||u,x=su(t,n),b=y?0:x,N=(y?-x:0)+1,S=function(){if(a)return N+6*7-1;var C=cw(t);if(u){var L=new Date;L.setFullYear(p,m,C),L.setHours(0,0,0,0);var U=7-su(L,n)-1;return C+U}return C}();return _.jsx(Tl,{className:"react-calendar__month-view__days",count:7,dateTransform:function(C){var L=new Date;return L.setFullYear(p,m,C),yu(L)},dateType:"day",hover:i,end:S,renderTile:function(C){var L=C.date,U=m0(C,["date"]);return _.jsx(NM,Qd({},h,U,{activeStartDate:t,calendarType:n,currentMonthIndex:m,date:L}),L.getTime())},offset:b,start:N,value:c,valueType:f})}var vw="react-calendar__month-view__weekdays",td="".concat(vw,"__weekday");function IM(e){for(var t=e.calendarType,n=e.formatShortWeekday,i=n===void 0?zR:n,a=e.formatWeekday,u=a===void 0?YR:a,c=e.locale,f=e.onMouseLeave,h=new Date,p=ta(h),m=Kt(p),y=no(p),x=[],b=1;b<=7;b+=1){var N=new Date(m,y,b-su(p,t)),S=u(c,N);x.push(_.jsx("div",{className:yr(td,oM(N)&&"".concat(td,"--current"),mw(N,t)&&"".concat(td,"--weekend")),children:_.jsx("abbr",{"aria-label":S,title:S,children:i(c,N).replace(".","")})},b))}return _.jsx(Kh,{className:vw,count:7,onFocus:f,onMouseOver:f,children:x})}var Vc=function(){return Vc=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Vc.apply(this,arguments)},g0=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n},v0="react-calendar__tile";function CM(e){var t=e.onClickWeekNumber,n=e.weekNumber,i=_.jsx("span",{children:n});if(t){var a=e.date,u=e.onClickWeekNumber,c=e.weekNumber,f=g0(e,["date","onClickWeekNumber","weekNumber"]);return _.jsx("button",Vc({},f,{className:v0,onClick:function(h){return u(c,a,h)},type:"button",children:i}))}else{e.date,e.onClickWeekNumber,e.weekNumber;var f=g0(e,["date","onClickWeekNumber","weekNumber"]);return _.jsx("div",Vc({},f,{className:v0,children:i}))}}function OM(e){var t=e.activeStartDate,n=e.calendarType,i=e.onClickWeekNumber,a=e.onMouseLeave,u=e.showFixedNumberOfWeeks,c=function(){if(u)return 6;var p=cw(t),m=su(t,n),y=p-(7-m);return 1+Math.ceil(y/7)}(),f=function(){for(var p=Kt(t),m=no(t),y=bl(t),x=[],b=0;b<c;b+=1)x.push(Bd(new Date(p,m,y+b*7),n));return x}(),h=f.map(function(p){return ZR(p,n)});return _.jsx(Kh,{className:"react-calendar__month-view__weekNumbers",count:c,direction:"column",onFocus:a,onMouseOver:a,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0},children:h.map(function(p,m){var y=f[m];if(!y)throw new Error("date is not defined");return _.jsx(CM,{date:y,onClickWeekNumber:i,weekNumber:p},p)})})}var Jd=function(){return Jd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Jd.apply(this,arguments)},AM=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n};function DM(e){if(e)for(var t=0,n=Object.entries(DR);t<n.length;t++){var i=n[t],a=i[0],u=i[1];if(u.includes(e))return a}return En.ISO_8601}function PM(e){var t=e.activeStartDate,n=e.locale,i=e.onMouseLeave,a=e.showFixedNumberOfWeeks,u=e.calendarType,c=u===void 0?DM(n):u,f=e.formatShortWeekday,h=e.formatWeekday,p=e.onClickWeekNumber,m=e.showWeekNumbers,y=AM(e,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function x(){return _.jsx(IM,{calendarType:c,formatShortWeekday:f,formatWeekday:h,locale:n,onMouseLeave:i})}function b(){return m?_.jsx(OM,{activeStartDate:t,calendarType:c,onClickWeekNumber:p,onMouseLeave:i,showFixedNumberOfWeeks:a}):null}function N(){return _.jsx(kM,Jd({calendarType:c},y))}var S="react-calendar__month-view";return _.jsx("div",{className:yr(S,m?"".concat(S,"--weekNumbers"):""),children:_.jsxs("div",{style:{display:"flex",alignItems:"flex-end"},children:[b(),_.jsxs("div",{style:{flexGrow:1,width:"100%"},children:[x(),N()]})]})})}var $a=function(){return $a=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},$a.apply(this,arguments)},wc="react-calendar",kc=["century","decade","year","month"],RM=["decade","year","month","day"],Uh=new Date;Uh.setFullYear(1,0,1);Uh.setHours(0,0,0,0);var MM=new Date(864e13);function Us(e){return e instanceof Date?e:new Date(e)}function yw(e,t){return kc.slice(kc.indexOf(e),kc.indexOf(t)+1)}function LM(e,t,n){var i=yw(t,n);return i.indexOf(e)!==-1}function zh(e,t,n){return e&&LM(e,t,n)?e:n}function ww(e){var t=kc.indexOf(e);return RM[t]}function $M(e,t){var n=Array.isArray(e)?e[t]:e;if(!n)return null;var i=Us(n);if(Number.isNaN(i.getTime()))throw new Error("Invalid date: ".concat(e));return i}function xw(e,t){var n=e.value,i=e.minDate,a=e.maxDate,u=e.maxDetail,c=$M(n,t);if(!c)return null;var f=ww(u),h=function(){switch(t){case 0:return qo(f,c);case 1:return dw(f,c);default:throw new Error("Invalid index value: ".concat(t))}}();return uM(h,i,a)}var Yh=function(e){return xw(e,0)},bw=function(e){return xw(e,1)},WM=function(e){return[Yh,bw].map(function(t){return t(e)})};function _w(e){var t=e.maxDate,n=e.maxDetail,i=e.minDate,a=e.minDetail,u=e.value,c=e.view,f=zh(c,a,n),h=Yh({value:u,minDate:i,maxDate:t,maxDetail:n})||new Date;return qo(f,h)}function FM(e){var t=e.activeStartDate,n=e.defaultActiveStartDate,i=e.defaultValue,a=e.defaultView,u=e.maxDate,c=e.maxDetail,f=e.minDate,h=e.minDetail,p=e.value,m=e.view,y=zh(m,h,c),x=t||n;return x?qo(y,x):_w({maxDate:u,maxDetail:c,minDate:f,minDetail:h,value:p||i,view:m||a})}function nd(e){return e&&(!Array.isArray(e)||e.length===1)}function xc(e,t){return e instanceof Date&&t instanceof Date&&e.getTime()===t.getTime()}var rd=k.forwardRef(function(t,n){var i=t.activeStartDate,a=t.allowPartialRange,u=t.calendarType,c=t.className,f=t.defaultActiveStartDate,h=t.defaultValue,p=t.defaultView,m=t.formatDay,y=t.formatLongDate,x=t.formatMonth,b=t.formatMonthYear,N=t.formatShortWeekday,S=t.formatWeekday,C=t.formatYear,L=t.goToRangeStartOnSelect,U=L===void 0?!0:L,te=t.inputRef,F=t.locale,ue=t.maxDate,ce=ue===void 0?MM:ue,z=t.maxDetail,Q=z===void 0?"month":z,se=t.minDate,J=se===void 0?Uh:se,V=t.minDetail,ne=V===void 0?"century":V,ye=t.navigationAriaLabel,M=t.navigationAriaLive,ae=t.navigationLabel,W=t.next2AriaLabel,pe=t.next2Label,oe=t.nextAriaLabel,X=t.nextLabel,de=t.onActiveStartDateChange,ge=t.onChange,Ee=t.onClickDay,ke=t.onClickDecade,Me=t.onClickMonth,Re=t.onClickWeekNumber,Be=t.onClickYear,Ye=t.onDrillDown,qe=t.onDrillUp,Se=t.onViewChange,rt=t.prev2AriaLabel,xt=t.prev2Label,He=t.prevAriaLabel,Tt=t.prevLabel,Xe=t.returnValue,it=Xe===void 0?"start":Xe,St=t.selectRange,et=t.showDoubleView,je=t.showFixedNumberOfWeeks,Ft=t.showNavigation,jt=Ft===void 0?!0:Ft,bt=t.showNeighboringCentury,sn=t.showNeighboringDecade,Ut=t.showNeighboringMonth,un=Ut===void 0?!0:Ut,Qt=t.showWeekNumbers,zt=t.tileClassName,tn=t.tileContent,Yt=t.tileDisabled,cn=t.value,dn=t.view,_t=k.useState(f),Bt=_t[0],Vt=_t[1],Lt=k.useState(null),$e=Lt[0],Ht=Lt[1],le=k.useState(Array.isArray(h)?h.map(function(ot){return ot!==null?Us(ot):null}):h!=null?Us(h):null),xe=le[0],fe=le[1],Ce=k.useState(p),We=Ce[0],Ue=Ce[1],Ve=i||Bt||FM({activeStartDate:i,defaultActiveStartDate:f,defaultValue:h,defaultView:p,maxDate:ce,maxDetail:Q,minDate:J,minDetail:ne,value:cn,view:dn}),Ze=function(){var ot=function(){return St&&nd(xe)?xe:cn!==void 0?cn:xe}();return ot?Array.isArray(ot)?ot.map(function(yt){return yt!==null?Us(yt):null}):ot!==null?Us(ot):null:null}(),Tn=ww(Q),ct=zh(dn||We,ne,Q),$t=yw(ne,Q),jn=St?$e:null,br=$t.indexOf(ct)<$t.length-1,_r=$t.indexOf(ct)>0,Et=k.useCallback(function(ot){var yt=function(){switch(it){case"start":return Yh;case"end":return bw;case"range":return WM;default:throw new Error("Invalid returnValue.")}}();return yt({maxDate:ce,maxDetail:Q,minDate:J,value:ot})},[ce,Q,J,it]),Rt=k.useCallback(function(ot,yt){Vt(ot);var At={action:yt,activeStartDate:ot,value:Ze,view:ct};de&&!xc(Ve,ot)&&de(At)},[Ve,de,Ze,ct]),sr=k.useCallback(function(ot,yt){var At=function(){switch(ct){case"century":return ke;case"decade":return Be;case"year":return Me;case"month":return Ee;default:throw new Error("Invalid view: ".concat(ct,"."))}}();At&&At(ot,yt)},[Ee,ke,Me,Be,ct]),ur=k.useCallback(function(ot,yt){if(br){sr(ot,yt);var At=$t[$t.indexOf(ct)+1];if(!At)throw new Error("Attempted to drill down from the lowest view.");Vt(ot),Ue(At);var qt={action:"drillDown",activeStartDate:ot,value:Ze,view:At};de&&!xc(Ve,ot)&&de(qt),Se&&ct!==At&&Se(qt),Ye&&Ye(qt)}},[Ve,br,de,sr,Ye,Se,Ze,ct,$t]),cr=k.useCallback(function(){if(_r){var ot=$t[$t.indexOf(ct)-1];if(!ot)throw new Error("Attempted to drill up from the highest view.");var yt=qo(ot,Ve);Vt(yt),Ue(ot);var At={action:"drillUp",activeStartDate:yt,value:Ze,view:ot};de&&!xc(Ve,yt)&&de(At),Se&&ct!==ot&&Se(At),qe&&qe(At)}},[Ve,_r,de,qe,Se,Ze,ct,$t]),lr=k.useCallback(function(ot,yt){var At=Ze;sr(ot,yt);var qt=St&&!nd(At),gn;if(St)if(qt)gn=qo(Tn,ot);else{if(!At)throw new Error("previousValue is required");if(Array.isArray(At))throw new Error("previousValue must not be an array");gn=rM(Tn,At,ot)}else gn=Et(ot);var Er=!St||qt||U?_w({maxDate:ce,maxDetail:Q,minDate:J,minDetail:ne,value:gn,view:ct}):null;yt.persist(),Vt(Er),fe(gn);var Dt={action:"onChange",activeStartDate:Er,value:gn,view:ct};if(de&&!xc(Ve,Er)&&de(Dt),ge)if(St){var wn=nd(gn);if(!wn)ge(gn||null,yt);else if(a){if(Array.isArray(gn))throw new Error("value must not be an array");ge([gn||null,null],yt)}}else ge(gn||null,yt)},[Ve,a,Et,U,ce,Q,J,ne,de,ge,sr,St,Ze,Tn,ct]);function io(ot){Ht(ot)}function Nn(){Ht(null)}k.useImperativeHandle(n,function(){return{activeStartDate:Ve,drillDown:ur,drillUp:cr,onChange:lr,setActiveStartDate:Rt,value:Ze,view:ct}},[Ve,ur,cr,lr,Rt,Ze,ct]);function Gn(ot){var yt=ot?fw(ct,Ve):qo(ct,Ve),At=br?ur:lr,qt={activeStartDate:yt,hover:jn,locale:F,maxDate:ce,minDate:J,onClick:At,onMouseOver:St?io:void 0,tileClassName:zt,tileContent:tn,tileDisabled:Yt,value:Ze,valueType:Tn};switch(ct){case"century":return _.jsx(mM,$a({formatYear:C,showNeighboringCentury:bt},qt));case"decade":return _.jsx(wM,$a({formatYear:C,showNeighboringDecade:sn},qt));case"year":return _.jsx(SM,$a({formatMonth:x,formatMonthYear:b},qt));case"month":return _.jsx(PM,$a({calendarType:u,formatDay:m,formatLongDate:y,formatShortWeekday:N,formatWeekday:S,onClickWeekNumber:Re,onMouseLeave:St?Nn:void 0,showFixedNumberOfWeeks:typeof je<"u"?je:et,showNeighboringMonth:un,showWeekNumbers:Qt},qt));default:throw new Error("Invalid view: ".concat(ct,"."))}}function Pn(){return jt?_.jsx(aM,{activeStartDate:Ve,drillUp:cr,formatMonthYear:b,formatYear:C,locale:F,maxDate:ce,minDate:J,navigationAriaLabel:ye,navigationAriaLive:M,navigationLabel:ae,next2AriaLabel:W,next2Label:pe,nextAriaLabel:oe,nextLabel:X,prev2AriaLabel:rt,prev2Label:xt,prevAriaLabel:He,prevLabel:Tt,setActiveStartDate:Rt,showDoubleView:et,view:ct,views:$t}):null}var Ur=Array.isArray(Ze)?Ze:[Ze];return _.jsxs("div",{className:yr(wc,St&&Ur.length===1&&"".concat(wc,"--selectRange"),et&&"".concat(wc,"--doubleView"),c),ref:te,children:[Pn(),_.jsxs("div",{className:"".concat(wc,"__viewContainer"),onBlur:St?Nn:void 0,onMouseLeave:St?Nn:void 0,children:[Gn(),et?Gn(!0):null]})]})});function jM({onSelect:e,onClose:t,showTime:n=!0,isBetweenMode:i=!1}){const[a,u]=k.useState(new Date),[c,f]=k.useState(new Date),[h,p]=k.useState(Wn(new Date,"HH")),[m,y]=k.useState(Wn(new Date,"mm")),[x,b]=k.useState(Wn(new Date,"ss")),[N,S]=k.useState(Wn(new Date,"HH")),[C,L]=k.useState(Wn(new Date,"mm")),[U,te]=k.useState(Wn(new Date,"ss")),[F,ue]=k.useState(!1),[ce,z]=k.useState(!1),Q=k.useRef(null);k.useEffect(()=>{function V(ne){Q.current&&!Q.current.contains(ne.target)&&t()}return document.addEventListener("mousedown",V),()=>document.removeEventListener("mousedown",V)},[t]),k.useEffect(()=>{function V(ne){ne.key==="Enter"&&(ne.preventDefault(),ne.stopPropagation(),se(),t())}return document.addEventListener("keydown",V),()=>document.removeEventListener("keydown",V)},[a,c,h,m,x,N,C,U,i,t]);const se=()=>{if(i){const V=new Date(a);V.setHours(parseInt(h),parseInt(m),parseInt(x));const ne=new Date(c);ne.setHours(parseInt(N),parseInt(C),parseInt(U)),e({start:V,end:ne})}else{const V=new Date(a);V.setHours(parseInt(h),parseInt(m),parseInt(x)),e({start:V})}t()},J=({label:V,hours:ne,minutes:ye,seconds:M,setHours:ae,setMinutes:W,setSeconds:pe})=>_.jsxs("div",{className:"flex flex-col gap-2",children:[_.jsx("div",{className:"text-sm font-medium text-gray-700",children:V}),_.jsxs("div",{className:"flex justify-between items-center gap-4 p-4 bg-gray-50 rounded-lg",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("input",{type:"number",min:"0",max:"23",value:ne,onChange:oe=>ae(oe.target.value.padStart(2,"0")),className:"w-16 px-3 py-2 bg-white border rounded-md text-center text-lg font-medium text-gray-700"}),_.jsx("span",{className:"text-gray-500 text-sm",children:"hrs"})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("input",{type:"number",min:"0",max:"59",value:ye,onChange:oe=>W(oe.target.value.padStart(2,"0")),className:"w-16 px-3 py-2 bg-white border rounded-md text-center text-lg font-medium text-gray-700"}),_.jsx("span",{className:"text-gray-500 text-sm",children:"min"})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("input",{type:"number",min:"0",max:"59",value:M,onChange:oe=>pe(oe.target.value.padStart(2,"0")),className:"w-16 px-3 py-2 bg-white border rounded-md text-center text-lg font-medium text-gray-700"}),_.jsx("span",{className:"text-gray-500 text-sm",children:"sec"})]})]})]});return _.jsxs("div",{ref:Q,className:"bg-white rounded-lg shadow-xl p-4 w-[400px]",style:{marginTop:"0.5rem"},children:[_.jsxs("div",{className:"flex items-center justify-between mb-4 border-b pb-2",children:[_.jsx("h3",{className:"text-lg font-medium text-gray-700",children:i?"Select Date Range":"Select Date"}),_.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:""})]}),i?_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{children:[_.jsxs("button",{onClick:()=>ue(!F),className:"flex items-center gap-2 hover:bg-gray-50 px-2 py-1 rounded-md",children:[_.jsx("span",{className:"text-gray-600",children:""}),_.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Start: ",Wn(a,"EEE MMM dd yyyy")]})]}),F&&_.jsx(rd,{onChange:V=>{u(V),ue(!1)},value:a,className:"border-0 mt-2"}),n&&_.jsx(J,{label:"Start Time",hours:h,minutes:m,seconds:x,setHours:p,setMinutes:y,setSeconds:b})]}),_.jsxs("div",{children:[_.jsxs("button",{onClick:()=>z(!ce),className:"flex items-center gap-2 hover:bg-gray-50 px-2 py-1 rounded-md",children:[_.jsx("span",{className:"text-gray-600",children:""}),_.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["End: ",Wn(c,"EEE MMM dd yyyy")]})]}),ce&&_.jsx(rd,{onChange:V=>{f(V),z(!1)},value:c,className:"border-0 mt-2"}),n&&_.jsx(J,{label:"End Time",hours:N,minutes:C,seconds:U,setHours:S,setMinutes:L,setSeconds:te})]})]}):_.jsxs(_.Fragment,{children:[_.jsxs("button",{onClick:()=>ue(!F),className:"flex items-center gap-2 hover:bg-gray-50 px-2 py-1 rounded-md mb-4",children:[_.jsx("span",{className:"text-gray-600",children:""}),_.jsx("span",{className:"text-lg font-medium text-gray-700",children:Wn(a,"EEE MMM dd yyyy")})]}),F&&_.jsx("div",{className:"mb-4",children:_.jsx(rd,{onChange:V=>{u(V),ue(!1)},value:a,className:"border-0"})}),n&&_.jsx(J,{label:"Time",hours:h,minutes:m,seconds:x,setHours:p,setMinutes:y,setSeconds:b})]}),_.jsx("button",{onClick:se,className:"w-full mt-4 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:"Apply"})]})}function BM({isOpen:e,onClose:t}){const[n,i]=k.useState([]),[a,u]=k.useState(""),[c,f]=k.useState([]),[h,p]=k.useState("");k.useEffect(()=>{e&&(async()=>{const C=await ru("namespaces"),L=await ru("searchParameters");C&&i(C),L&&f(L)})()},[e]);const m=async()=>{await Sd("namespaces",n),await Sd("searchParameters",c),t()},y=()=>{a&&!n.includes(a)&&(i([...n,a]),u(""))},x=S=>{i(n.filter((C,L)=>L!==S))},b=()=>{const S=h.split(",").map(C=>C.trim()).filter(C=>C&&!c.includes(C));S.length&&(f([...c,...S]),p(""))},N=S=>{f(c.filter((C,L)=>L!==S))};return e?_.jsxs(Yy,{open:e,onClose:t,className:"relative z-[2000]",children:[_.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),_.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:_.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:_.jsxs(Mh,{className:"w-[600px] transform overflow-hidden rounded-lg bg-white text-left align-middle shadow-xl transition-all",children:[_.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[_.jsx("h2",{className:"text-xl font-semibold",children:"Search Settings"}),_.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full","aria-label":"Close",children:_.jsx(zs,{size:20})})]}),_.jsxs("div",{className:"p-6 overflow-y-auto",children:[_.jsxs("div",{className:"mb-6",children:[_.jsx("h3",{className:"text-lg font-medium mb-2",children:"Namespaces"}),_.jsxs("div",{className:"flex gap-2 mb-2",children:[_.jsx("input",{type:"text",value:a,onChange:S=>u(S.target.value),onKeyDown:S=>S.key==="Enter"&&y(),placeholder:"Add namespace...",className:"flex-1 p-2 border rounded"}),_.jsx("button",{onClick:y,className:"p-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:_.jsx(Eg,{size:20})})]}),_.jsx("div",{className:"flex flex-wrap gap-2",children:n.map((S,C)=>_.jsxs("div",{className:"bg-gray-100 px-3 py-1 rounded-full flex items-center gap-2",children:[_.jsx("span",{children:S}),_.jsx("button",{onClick:()=>x(C),className:"hover:text-red-500",children:_.jsx(zs,{size:16})})]},C))})]}),_.jsxs("div",{children:[_.jsx("h3",{className:"text-lg font-medium mb-2",children:"Search Parameters"}),_.jsxs("div",{className:"flex gap-2 mb-2",children:[_.jsx("input",{type:"text",value:h,onChange:S=>p(S.target.value),onKeyDown:S=>S.key==="Enter"&&b(),placeholder:"Add parameters (comma-separated)...",className:"flex-1 p-2 border rounded"}),_.jsx("button",{onClick:b,className:"p-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:_.jsx(Eg,{size:20})})]}),_.jsx("div",{className:"flex flex-wrap gap-2",children:c.map((S,C)=>_.jsxs("div",{className:"bg-gray-100 px-3 py-1 rounded-full flex items-center gap-2",children:[_.jsx("span",{children:S}),_.jsx("button",{onClick:()=>N(C),className:"hover:text-red-500",children:_.jsx(zs,{size:16})})]},C))})]})]}),_.jsxs("div",{className:"p-4 border-t flex justify-end gap-2",children:[_.jsx("button",{onClick:t,className:"px-4 py-2 border rounded hover:bg-gray-50",children:"Cancel"}),_.jsx("button",{onClick:m,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Save"})]})]})})})]}):null}function HM({isOpen:e,onClose:t,onTemporalModalSubmit:n,onShowNodeData:i}){const[a,u]=k.useState(""),[c,f]=k.useState([]),[h,p]=k.useState([]),[m,y]=k.useState(!1),[x,b]=k.useState(-1),[N,S]=k.useState(!1),[C,L]=k.useState(!1),U=re.useRef(null),[te,F]=k.useState(null),[ue,ce]=k.useState(null),z=k.useRef(null),[Q,se]=k.useState(!1),[J,V]=k.useState([]),[ne,ye]=k.useState([]),[M,ae]=k.useState(""),[W,pe]=k.useState([]),[oe,X]=k.useState(1),[de,ge]=k.useState(1),[Ee,ke]=k.useState([{id:"status",label:"Status",width:120},{id:"taskQueue",label:"Task Queue",width:150},{id:"workflowType",label:"Workflow Type",width:180},{id:"execution",label:"Workflow ID",width:200},{id:"execution",label:"Run ID",width:200},{id:"duration",label:"Duration",width:180},{id:"startTime",label:"Start Time",width:180},{id:"closeTime",label:"Close Time",width:180}]),[Me,Re]=k.useState(!1),[Be,Ye]=k.useState(!1),[qe,Se]=k.useState(!1),rt=Yo(fy),xt=async()=>{const le=await ru("searchParameters");if(le){const xe=le.map(fe=>({id:fe,label:fe,type:"text"}));V(xe)}},He=async()=>{const le=await ru("namespaces")||[];ye(le),!M&&le.length>0&&ae(le[0])};k.useEffect(()=>{e&&xt()},[e]),k.useEffect(()=>{He()},[e]),k.useEffect(()=>{(async()=>{if(e&&M){const xe=bt();Re(!0);try{const fe=await Lg(M,xe);pe(fe.executions||[]),ge(Math.min(Math.ceil(fe.executions.length/100),10)),X(1)}catch(fe){console.error("Error executing initial search:",fe)}finally{Re(!1)}}})()},[e,M]),k.useEffect(()=>{if(qe){const le=()=>{document.querySelectorAll('[data-workflow-loaded="true"]').length>0?(Se(!1),t()):setTimeout(le,500)};setTimeout(le,1e3)}},[qe,t]);const Tt=le=>{if(le.type==="datetime")return yc.map(fe=>({text:`${le.label} ${fe.label}`,disabled:!1}));if(le.type==="status"){const fe=c.filter(Ce=>Ce.field==="ExecutionStatus").map(Ce=>Ce.value);return Gf.filter(Ce=>!fe.includes(Ce.value)).map(Ce=>({text:`${le.label} = '${Ce.value}'`,displayText:Ce.value,disabled:!1,color:Ce.color}))}return Gg.filter(fe=>["equals","notEquals","starts_with"].includes(fe.id)).map(fe=>({text:`${le.label} ${fe.label}`,disabled:!1}))},Xe=()=>c.filter(le=>le.field==="ExecutionStatus").flatMap(le=>{const xe=le.raw.match(/Status\s*=\s*'([^']+)'/gi);return xe?xe.map(fe=>{const Ce=fe.match(/Status\s*=\s*['"]([^'"]+)['"]/i);return(Ce==null?void 0:Ce[1])??""}):[]}),it=le=>{const xe=le.toLowerCase().trim();if(xe.startsWith("status")){const We=Xe();return Gf.filter(Ue=>!We.includes(Ue.value)).map(Ue=>{var Ve;return{text:`Status = '${Ue.value}'`,fullText:c.some(Ze=>Ze.field==="ExecutionStatus")?`${(Ve=c.find(Ze=>Ze.field==="ExecutionStatus"))==null?void 0:Ve.raw} OR Status = '${Ue.value}'`:`Status = '${Ue.value}'`,displayText:Ue.value,disabled:!1,color:Ue.color}})}if(N)return[];const fe=[...vi,...J],Ce=new Set(c.map(We=>We.field));return fe.filter(We=>We.label.toLowerCase().includes(xe)).map(We=>({text:We.label,disabled:We.type!=="status"&&Ce.has(We.id)}))},St=le=>{const xe=le.target.value;if(u(xe),xe.endsWith(" ")){const fe=xe.trim().split(/\s+/);if(fe.length===2){const[Ce,We]=fe,Ue=vi.find(Ze=>Ce.toLowerCase()===Ze.label.toLowerCase()&&Ze.type==="datetime"),Ve=yc.some(Ze=>Ze.label===We||Ze.alternatives.includes(We));Ue&&Ve&&(ce(Ue.label),zt())}}if((!xe.trim()||xe.trim().toLowerCase()==="status")&&L(!1),!C||xe.trim().toLowerCase()==="status"){b(-1);const fe=it(xe);p(fe),fe.length>0&&b(0)}},et=le=>le.match(/^Status\s*=\s*['"][^'"]+['"](\s+OR\s+Status\s*=\s*['"][^'"]+['"])*$/i)?{field:"ExecutionStatus",operator:"equals",value:le,raw:le,isValid:!0}:null,je=le=>{if(!m){if(le.key==="Backspace"&&a.length<=1&&L(!1),h.length>0&&!C&&(le.key==="ArrowDown"?(le.preventDefault(),b(xe=>xe<h.length-1?xe+1:xe)):le.key==="ArrowUp"?(le.preventDefault(),b(xe=>xe>0?xe-1:0)):le.key==="Enter"&&x>=0&&(le.preventDefault(),Ut(h[x]))),le.key==="Enter"||le.key==="Tab"){le.preventDefault();const xe=a.trim();if(xe.length===0&&c.length>0){jt();return}if(xe.toLowerCase().startsWith("status")){const fe=et(xe);fe&&(f(Ce=>[...Ce.filter(We=>We.field!=="ExecutionStatus"),fe]),u(""),L(!1),p([]))}else{const fe=un(xe);fe&&fe.isValid&&(f(Ce=>[...Ce,fe]),u(""),L(!1),p([]))}}else if(le.key==="Backspace"&&a.trim()===""&&c.length>0){le.preventDefault();const xe=c[c.length-1];xe.field==="ExecutionStatus"?(f(c.filter(fe=>fe.field!=="ExecutionStatus")),u(xe.raw),L(!0),p([])):sn(c.length-1)}if(le.key===" "){const xe=a.trim().split(/\s+/),fe=xe[0],Ce=vi.find(We=>fe.toLowerCase()===We.label.toLowerCase()&&We.type==="datetime");if(Ce&&(ce(Ce.label),xe.length===2)){const We=xe[1];yc.some(Ve=>Ve.label===We||Ve.alternatives.includes(We))&&zt()}}}},Ft=le=>{const[xe,fe]=a.trim().split(/\s+/);if(vi.find(We=>xe.toLowerCase()===We.label.toLowerCase())&&fe){let We;if(fe.toLowerCase()==="between"&&le.start&&le.end){const Ue=Wn(le.start,"yyyy-MM-dd HH:mm:ss"),Ve=Wn(le.end,"yyyy-MM-dd HH:mm:ss"),Ze=`${xe} between '${Ue}' and '${Ve}'`;We=un(Ze)}else if(le.start){const Ue=Wn(le.start,"yyyy-MM-dd HH:mm:ss"),Ve=`${xe} ${fe} '${Ue}'`;We=un(Ve)}We&&(f(Ue=>[...Ue,We]),u(""),y(!1),ce(null),p([]),b(-1))}},jt=async()=>{const le=bt();console.log("searchQuery",le),Re(!0);try{const xe=await Lg(M,le);pe(xe.executions||[]),ge(Math.min(Math.ceil(xe.executions.length/100),10)),X(1)}catch(xe){console.error("Error executing search:",xe)}finally{Re(!1)}},bt=()=>{const le=[];return c.forEach(xe=>{if(xe.field==="ExecutionStatus"){const fe=xe.raw.split(/\s+OR\s+/).map(Ce=>{const We=Ce.match(/Status\s*=\s*['"]([^'"]+)['"]/i);return We?`\`ExecutionStatus\`="${We[1]}"`:null}).filter(Boolean);fe.length>0&&le.push(`(${fe.join(" OR ")})`)}else if(xe.operator==="between"&&xe.value){const[fe,Ce]=xe.value.split(" and ");le.push(`\`${xe.field}\` BETWEEN "${fe}" AND "${Ce}"`)}else le.push(`\`${xe.field}\` ${xe.operator} "${xe.value}"`)}),le.length===0?"":le.join(" AND ")},sn=le=>{var Ce;const xe=c[le],fe=vi.find(We=>We.id===xe.field);if((fe==null?void 0:fe.type)==="datetime"){f(c.filter((We,Ue)=>Ue!==le));return}if(xe.field==="ExecutionStatus"){const We=c.filter(Ue=>Ue.field!=="ExecutionStatus");f(We),u(xe.raw),L(!0),p([])}else f(c.filter((We,Ue)=>Ue!==le)),u(xe.raw);S(!1),(Ce=z.current)==null||Ce.focus()},Ut=le=>{var xe;if(!le.disabled){if(le.color){const fe=c.filter(Ue=>Ue.field==="ExecutionStatus"),Ce=c.filter(Ue=>Ue.field!=="ExecutionStatus");let We;if(fe.length>0){const Ue=`${fe[0].raw} OR Status = '${le.displayText}'`;We=et(Ue)}else We=et(`Status = '${le.displayText}'`);if(We){const Ue=c.findIndex(Ze=>Ze.field==="ExecutionStatus"),Ve=[...Ce];Ue>=0?Ve.splice(Ue,0,We):Ve.push(We),f(Ve)}u(""),p([]),L(!1)}else{const fe=le.text.split(/\s+/);if(u(le.text+" "),fe.length===2){const[Ce,We]=fe,Ue=vi.find(Ze=>Ce.toLowerCase()===Ze.label.toLowerCase()&&Ze.type==="datetime"),Ve=yc.some(Ze=>Ze.label===We||Ze.alternatives.includes(We));Ue&&Ve&&(ce(Ue.label),requestAnimationFrame(()=>{zt()}))}else{const Ce=vi.find(We=>We.label===le.text);p(Ce?Tt(Ce):[]),b(0),S(!1),y(!1)}}(xe=z.current)==null||xe.focus()}},un=le=>{if(!le.trim())return null;const xe=/^([a-zA-Z]+)\s*(=|!=|>|>=|<|<=|between|starts\s*with)\s*['"]([^'"]+)['"](?:\s+and\s+['"]([^'"]+)['"])?$/,fe=le.match(xe);if(!fe)return{field:"",operator:"",value:null,raw:le,isValid:!1};let[,Ce,We,Ue,Ve]=fe;const Ze=vi.find(ct=>Ce.toLowerCase()===ct.label.toLowerCase()),Tn=Gg.find(ct=>ct.label===We||ct.alternatives.includes(We.toLowerCase())||ct.searchOperator===We);if(!Tn)return{field:"",operator:"",value:null,raw:le,isValid:!1};if((Ze==null?void 0:Ze.type)==="datetime"){const ct=new Date(Ue);Ue=Wn(ct,"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"),Ve=Ve?Wn(new Date(Ve),"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"):""}return{field:Ze?Ze.id:Ce,operator:Tn.searchOperator,value:Ve?`${Ue} and ${Ve}`:Ue,raw:le,isValid:!0}},Qt=le=>le.isValid?le.field==="ExecutionStatus"||[...vi,...J].some(fe=>fe.id.toLowerCase()===le.field.toLowerCase())?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800";re.useEffect(()=>{U.current&&U.current.scrollIntoView({block:"nearest"})},[x]);const zt=()=>{var fe;if(!z.current)return;const le=(fe=z.current)==null?void 0:fe.getBoundingClientRect(),xe=document.querySelector('[role="dialog"]');if(le&&xe){const Ce=xe.getBoundingClientRect(),We=(Ce.width-400)/2;F({x:We,y:le.bottom-Ce.top+5}),y(!0)}},tn=async()=>{se(!1),await xt(),await He()},Yt=le=>{le.stopPropagation(),se(!0)},cn=()=>{p([]),b(-1)},dn=le=>{p([]),b(-1)},_t=(le,xe)=>{ke(fe=>{const Ce=[...fe];return Ce[le]={...Ce[le],width:xe},Ce})},Bt=le=>{const xe=Gf.find(fe=>fe.value.toLowerCase()===le.toLowerCase());return(xe==null?void 0:xe.color)||"gray"},Vt=le=>Wn(new Date(le),"yyyy-MM-dd HH:mm:ss"),Lt=async(le,xe)=>{xe.stopPropagation();try{const fe=await qA(M,le.execution.workflowId,le.execution.runId),Ce={x:Math.min(xe.clientX,window.innerWidth-600),y:Math.min(xe.clientY,window.innerHeight-400)};i?i(fe,Ce,3e3):rt({data:fe,position:Ce,baseZIndex:3e3})}catch(fe){console.error("Error fetching workflow details:",fe)}},$e=()=>{const le=(oe-1)*100,xe=le+100,fe=W.slice(le,xe);return _.jsxs("div",{className:"flex flex-col h-full",children:[_.jsx("div",{className:"flex-none px-4 py-3 border-b bg-gray-50 z-[50]",children:_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",le+1,"-",Math.min(xe,W.length)," of"," ",W.length," results"]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("button",{onClick:()=>X(Ce=>Math.max(1,Ce-1)),disabled:oe===1,className:"p-1.5 rounded hover:bg-gray-200 disabled:opacity-50 disabled:hover:bg-transparent transition-colors",children:_.jsx(qO,{size:16})}),_.jsxs("span",{className:"text-sm font-medium",children:[oe," / ",de]}),_.jsx("button",{onClick:()=>X(Ce=>Math.min(de,Ce+1)),disabled:oe===de,className:"p-1.5 rounded hover:bg-gray-200 disabled:opacity-50 disabled:hover:bg-transparent transition-colors",children:_.jsx(XO,{size:16})})]})]})}),_.jsx("div",{className:"flex-1 overflow-auto",children:_.jsx("div",{className:"inline-block min-w-full align-middle",children:_.jsx("div",{className:"relative",children:_.jsxs("table",{className:"min-w-full border-collapse",children:[_.jsx("thead",{children:_.jsxs("tr",{children:[_.jsx("th",{className:"sticky top-0 border-b border-gray-200 bg-gray-50 z-10",style:{width:50},children:_.jsx("div",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"})}),Ee.map((Ce,We)=>_.jsxs("th",{className:"sticky top-0 border-b border-gray-200 bg-gray-50 z-10",style:{width:Ce.width},children:[_.jsx("div",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:Ce.label}),_.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1 cursor-col-resize hover:bg-blue-500 group",onMouseDown:Ue=>{const Ve=Ue.pageX,Ze=Ce.width,Tn=$t=>{const jn=$t.pageX-Ve;_t(We,Math.max(100,Ze+jn))},ct=()=>{document.removeEventListener("mousemove",Tn),document.removeEventListener("mouseup",ct)};document.addEventListener("mousemove",Tn),document.addEventListener("mouseup",ct)},children:_.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-px bg-gray-200 group-hover:bg-blue-500"})})]},`${Ce.id}-${We}`))]})}),_.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:fe.map(Ce=>_.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[_.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-left",children:_.jsxs("div",{className:"flex gap-2",children:[_.jsx("button",{onClick:We=>{We.stopPropagation(),Se(!0),n({workflowId:Ce.execution.workflowId,namespace:M,runId:Ce.execution.runId}).then(()=>{Se(!1),t()}).catch(Ue=>{console.error("Error loading workflow:",Ue),Se(!1)})},className:"p-1 hover:bg-gray-200 rounded-full transition-colors",title:"View workflow details",children:_.jsx(Gv,{size:16,className:"text-gray-600"})}),_.jsx("button",{onClick:We=>Lt(Ce,We),className:"p-1 hover:bg-gray-200 rounded-full transition-colors",title:"Quick view",children:_.jsx(GO,{size:16,className:"text-gray-600"})})]})}),_.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-left",children:_.jsx("div",{className:`inline-flex items-center gap-2 px-2.5 py-1 rounded-full text-xs font-medium
                          ${Bt(Ce.status)}`,children:Ce.status})}),_.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-left",children:Ce.taskQueue}),_.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-left",children:Ce.type.name}),_.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-medium text-left",children:Ce.execution.workflowId}),_.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 font-mono text-left",children:Ce.execution.runId}),_.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-left",children:vh(Ce.startTime,Ce.closeTime||new Date().toISOString())||""}),_.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-left",children:Vt(Ce.startTime)}),_.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-left",children:Ce.closeTime?Vt(Ce.closeTime):""})]},`${Ce.execution.workflowId}-${Ce.execution.runId}`))})]})})})})]})},Ht=_.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[_.jsx("span",{className:"text-gray-700 font-medium",children:"Namespace:"}),_.jsxs("div",{className:"relative",children:[_.jsxs("button",{onClick:()=>Ye(!Be),className:"w-64 p-2 border rounded-lg bg-white flex items-center justify-between",children:[_.jsx("span",{children:M}),_.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform ${Be?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),Be&&_.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border rounded-lg shadow-lg",children:ne.map(le=>_.jsx("button",{className:"w-full px-4 py-2 text-left hover:bg-gray-100 first:rounded-t-lg last:rounded-b-lg",onClick:()=>{ae(le),Ye(!1)},children:le},le))})]})]});return e?_.jsxs(_.Fragment,{children:[_.jsxs(Yy,{open:e,onClose:le=>{var xe;if(le===!1&&((xe=document.activeElement)==null?void 0:xe.tagName)==="BODY"){t();return}},className:"relative z-[90]",children:[_.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true",onClick:le=>{le.preventDefault(),le.stopPropagation()},onMouseDown:le=>{const xe=document.querySelector("[data-node-panel]");if(xe&&(xe===le.target||xe.contains(le.target))){le.preventDefault(),le.stopPropagation();return}},onMouseUp:le=>{const xe=document.querySelector("[data-node-panel]");if(xe&&(xe===le.target||xe.contains(le.target))){le.preventDefault(),le.stopPropagation();return}le.preventDefault(),le.stopPropagation()}}),qe&&_.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:_.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl flex items-center gap-4",children:[_.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-blue-500 border-t-transparent"}),_.jsx("span",{className:"text-gray-700",children:"Loading workflow..."})]})}),_.jsx("div",{className:"fixed inset-0",onClick:dn,children:_.jsx("div",{className:"flex min-h-full items-start justify-center p-4 text-center",children:_.jsxs(Mh,{className:"bg-white rounded-xl w-full max-w-[120rem] h-[90vh] flex flex-col shadow-2xl relative",onClick:le=>le.stopPropagation(),children:[_.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 rounded-full hover:bg-gray-100 transition-colors z-50","aria-label":"Close modal",children:_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-500",children:[_.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),_.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),_.jsxs("div",{className:"p-6 flex-none border-b relative",children:[Ht,_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Search settings",onClick:Yt,children:_.jsx(JO,{size:20,className:"text-gray-600"})}),_.jsxs("div",{className:"flex-1",children:[_.jsxs("div",{className:"flex flex-wrap gap-2 items-center p-2 border rounded-lg bg-gray-50 min-h-[40px]",children:[c.map((le,xe)=>_.jsxs("div",{className:`px-2 py-1 rounded-md ${Qt(le)} flex items-center gap-1 group`,children:[_.jsx("span",{onClick:()=>sn(xe),className:"flex-1 cursor-pointer",children:le.raw}),_.jsx("button",{onClick:fe=>{fe.stopPropagation(),f(Ce=>Ce.filter((We,Ue)=>Ue!==xe))},className:"text-current opacity-50 hover:opacity-100 transition-opacity","aria-label":"Remove token",children:_.jsx(zs,{size:14})})]},xe)),_.jsx("input",{ref:z,type:"text",value:a,onChange:St,onClick:cn,onKeyDown:je,className:"flex-1 min-w-[200px] bg-transparent outline-none",placeholder:c.length>0?"Add another filter...":"Type to search. For example, WorkflowType = 'MyWorkflowType'"})]}),h.length>0&&_.jsx("div",{className:"absolute mt-1 w-1/2 max-h-60 overflow-auto rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[60]",children:h.map((le,xe)=>_.jsx("button",{ref:xe===x?U:null,className:`relative cursor-default select-none py-2 pl-3 pr-9 w-full text-left transition-colors ${le.disabled?"text-gray-400":"text-gray-900"} ${xe===x||le.disabled?"bg-gray-50":"bg-white hover:bg-gray-50"}`,onClick:()=>!le.disabled&&Ut(le),disabled:le.disabled,children:_.jsx("span",{className:`inline-block truncate ${le.color?KM(le.color,!1):""}`,children:le.displayText||le.text})},xe))})]}),_.jsx("button",{onClick:jt,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Search"})]})]}),_.jsx("div",{className:"flex-1 overflow-y-auto",children:Me?_.jsx("div",{className:"flex items-center justify-center h-full",children:_.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-gray-200 border-t-blue-500"})}):W.length>0?$e():_.jsx("div",{className:"p-6 text-center text-gray-500",children:"No results to display. Try searching for workflows above."})}),m&&te&&_.jsx("div",{className:"absolute z-[999]",style:{top:"100px"},children:_.jsx(jM,{onSelect:Ft,onClose:()=>{y(!1),F(null)},position:te,showTime:!0,isBetweenMode:a.toLowerCase().includes("between")})})]})})})]}),_.jsx(BM,{isOpen:Q,onClose:tn})]}):null}const KM=(e,t)=>!e||t?"":`px-2 py-0.5 rounded ${e}`,UM=e=>k.useMemo(()=>gA(e),[e]);function zM({id:e,onShowNodeData:t,onSpreadBatchNodes:n}){const i=UM(e),u=cA(i).value;if(!u)return null;const c=()=>{n==null||n(e)},f=h=>{h.stopPropagation(),t(u,{x:h.clientX,y:h.clientY})};return _.jsx(yh,{id:e,onShowNodeData:f,onBatchAction:c,IconComponent:_.jsx("div",{className:"bg-fuchsia-50",children:_.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:_.jsx("path",{d:"M5 12L12 5L19 12L12 19L5 12Z"})})}),TitleComponent:_.jsx("div",{className:"flex items-center h-[2.5rem]",children:_.jsx("h3",{className:"font-semibold text-gray-800 truncate",children:u.activityType})}),TypeLabelComponent:_.jsx("div",{className:"px-2 py-0.5 rounded text-xs font-medium shadow-sm z-10",style:{backgroundColor:"rgb(253 244 255)",color:"rgb(192 38 211)"},children:"activity"}),status:u.status,startTime:u.startTime,endTime:u.endTime,taskQueue:u.taskQueue.name})}function YM(){const e=Yo(Sh),t=Bo(Ho),n=Bo(Eh),i=Bo(Ba),a=Bo(_h),u=async h=>{try{const p=i.find(Q=>Q.id===h&&Q.type==="batch");if(!p){console.error("No batch node found to expand or node is not a batch node");return}const m=p;if(!m.referencedBatches||m.referencedBatches.length===0){console.error("Batch node has no referenced items to expand");return}if(!t||!n){console.error("Missing graph structure data");return}const y=[],x=m.referencedBatches.map((Q,se)=>{const J="workflowId"in Q&&"workflowRunId"in Q&&!("activityId"in Q);let V;return J?(V=jr(Q),V===n.id&&(V=`${V}$$batch_item_${se}`),y.push(V),{id:V,type:"workflow",isExpanded:!1}):(V=du(Q),V===n.id&&(V=`${V}$$batch_item_${se}`),y.push(V),{id:V,type:"activity"})});if(x.length===0){console.warn("No nodes to add after expanding batch");return}const b=x.map(Q=>({id:Q.id,children:[],isBatchNode:!1})),N=f(n,h,b),S=N.id,C=x.filter(Q=>Q.id===S);C.length>0&&(console.error(`ERROR: ${C.length} batch items have the same ID as the parent workflow: ${S}`),C.forEach((Q,se)=>{const J=Q.id;Q.id=`${Q.id}$$batch_item_${se}`,console.log(`Fixed conflicting ID: ${J} -> ${Q.id}`)}));const L=i.filter(Q=>Q.id!==h),U=a.filter(Q=>Q.target_id===h),te=a.filter(Q=>Q.source_id===h),F=[];x.length>0&&U.forEach(Q=>{x.forEach(se=>{F.push({source_id:Q.source_id,target_id:se.id,type:Q.type})})}),x.length>0&&te.forEach(Q=>{x.forEach(se=>{F.push({source_id:se.id,target_id:Q.target_id,type:Q.type})})});const ue=a.filter(Q=>Q.source_id!==h&&Q.target_id!==h),ce=[...L,...x],z=[...ue,...F];c(N,ce),e({renderTree:N,nodes:ce,edges:z})}catch(p){console.error("Error expanding batch node:",p)}},c=(h,p)=>{const m=new Set(p.map(b=>b.id)),y=[],x=b=>{m.has(b.id)||y.push(b.id),b.children.forEach(x)};x(h),y.length>0&&console.error("Missing nodes in nodes list that exist in render tree:",y)},f=(h,p,m)=>{let y=!1;const x=new Map;for(const L of m)x.set(L.id,(x.get(L.id)||0)+1);const b=Array.from(x.entries()).filter(([L,U])=>U>1).map(([L,U])=>`${L} (${U} times)`);b.length>0&&console.error(`ERROR: Found duplicate IDs in expanded nodes: ${b.join(", ")}`);const N=L=>({id:L.id,children:L.children.map(U=>N(U)),isBatchNode:L.isBatchNode}),S=N(h),C=L=>{if(L.id===p){y=!0,console.log(`Found batch node ${p} to expand`);return}for(let U=0;U<L.children.length;U++){const te=L.children[U];if(te.id===p){if(y=!0,m.length>0){if(L.children[U]=m[0],m.length>1){const F=m.slice(1);L.children.splice(U+1,0,...F)}}else L.children.splice(U,1),U--;return}C(te)}};return C(S),y||console.error(`Batch node ${p} was not found in the render tree!`),S};return{onSpreadBatchNodes:u}}const VM=e=>k.useMemo(()=>{const t=new Date().toISOString();return{startTime:t,endTime:t,status:"Batched"}},[e]);function qM({id:e,data:t}){const{referencedBatches:n}=t,i=n.length,{startTime:a,endTime:u,status:c}=VM(n),{onSpreadBatchNodes:f}=YM(),h=k.useCallback(()=>{f==null||f(e)},[f,e]),p=k.useMemo(()=>{const m=n.some(x=>"workflowRunId"in x&&"workflowId"in x&&!("activityId"in x)),y=n.some(x=>"activityId"in x);return m&&y?"mixed":m?"workflow":"activity"},[n]);return _.jsx(yh,{id:e,onBatchAction:h,IconComponent:_.jsx("div",{className:"bg-blue-50",children:_.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})}),TitleComponent:_.jsxs("div",{className:"flex flex-col",children:[_.jsx("h3",{className:"font-semibold text-gray-800 truncate",children:p==="workflow"?"Batched Workflows":p==="activity"?"Batched Activities":"Batched Items"}),_.jsxs("p",{className:"text-xs text-gray-500",children:["Contains ",i," ",p==="mixed"?"items":p+(i>1?"s":"")]})]}),TypeLabelComponent:_.jsx("div",{className:"px-2 py-0.5 rounded text-xs font-medium shadow-sm z-10",style:{backgroundColor:"rgb(219 234 254)",color:"rgb(29 78 216)"},children:"batch"}),status:c,startTime:a,endTime:u,taskQueue:"",isLoading:!1,count:i})}const XM=()=>{const[e,t]=k.useState(!0),n=k.useRef(null),i=k.useRef(!0),a=k.useCallback((p,m,y,x=.75,b=800)=>{!p||!i.current||p.setCenter(m,y,{zoom:x,duration:b})},[]),u=k.useCallback(p=>{!p||!i.current||p.fitView({padding:.2,duration:800,minZoom:.4})},[]),c=k.useCallback(p=>{n.current=p},[]),f=k.useCallback(()=>{!n.current||!i.current||n.current.fitView({padding:.2,duration:800,minZoom:.4})},[]),h=k.useCallback(p=>{i.current=p,t(p)},[]);return{autoZoomEnabled:e,setAutoZoomEnabled:h,handleZoom:a,fitView:u,onInit:c,onGraphLoad:f}},GM=(e,t)=>{const n=Bo(dy),i=k.useCallback(()=>{!e.current||!t||e.current.fitView({padding:.2,duration:800,minZoom:.4})},[e,t]);return k.useEffect(()=>{if(t&&n.nodes.length>0){const a=setTimeout(()=>{i()},100);return()=>clearTimeout(a)}},[n.nodes.length,n.edges.length,t,i]),{fitView:i}};function ZM(){const[e,t]=re.useState(!1),n=k.useRef(null),i=.4,{autoZoomEnabled:a,setAutoZoomEnabled:u,onInit:c}=XM(),{fitView:f}=GM(n,a),h=k.useCallback(()=>{a&&f()},[a,f]),p=k.useCallback(m=>{n.current=m,c(m)},[c]);return{isRootLoaded:e,flowInstance:n,MIN_ZOOM:i,autoZoomEnabled:a,setAutoZoomEnabled:u,onInit:p,fitView:h}}function QM({onBeforeSubmit:e}){const[t,n]=k.useState(!1),[i,a]=k.useState(!1),u=Yo(Sh),c=async(p,m)=>{const y=await Jv(p,m);for(const b of y)await c(b.workflowId,m);const x=await Qv(p,m);for(const b of x)await oA(p,b.activityId,m);await nA(p,m)};return{isTemporalModalOpen:t,setIsTemporalModalOpen:n,onTemporalModalSubmit:async p=>{if(e&&e(),!await VA())throw new Error("The server is not running. Please start the server and try again.");await Nd(p.namespace,p.workflowId,p.runId,2);const y={workflowId:p.workflowId,workflowRunId:p.runId},x=await Ed(p.workflowId,p.runId),{nodes:b,edges:N,virtualTree:S,renderTree:C}=Mg(y,x),L=jr(y);u({nodes:b,edges:N,structure:S,renderTree:C,rootId:L})},refreshWorkflowData:async(p,m)=>{try{a(!0);const y=await rl(p,m);if(!y){console.error("Workflow not found for refresh");return}await c(p,m);const x=await Nd(y.namespace,p,m,2),b={workflowId:p,workflowRunId:m},N=await Ed(p,m),{nodes:S,edges:C,virtualTree:L,renderTree:U}=Mg(b,N),te=jr(b);u({nodes:S,edges:C,structure:L,renderTree:U,rootId:te})}catch(y){console.error("Error refreshing workflow data:",y)}finally{a(!1)}},isRefreshing:i}}const JM=e=>t=>_.jsx(uD,{...t,onShowNodeData:e}),eL=e=>t=>_.jsx(zM,{...t,onShowNodeData:e}),tL=()=>e=>_.jsx(qM,{...e});let id=null;function nL(){const{MIN_ZOOM:e,autoZoomEnabled:t,setAutoZoomEnabled:n,onInit:i,fitView:a}=ZM(),{onTemporalModalSubmit:u,refreshWorkflowData:c,setIsTemporalModalOpen:f}=QM({onBeforeSubmit:()=>{ce()}}),[h,p]=re.useState(null),[m,y]=re.useState(!1),[x,b]=k.useState(!0),[N,S]=k.useState(!1),C=re.useRef(!1),{nodes:L,edges:U}=Bo(dy),te=Bo(al),F=Yo(fy),ue=Yo(BA),ce=Yo(HA),z=k.useCallback((V,ne,ye)=>{F({data:V,position:ne,baseZIndex:ye})},[F]),Q=k.useCallback(V=>{ue(V)},[ue]),se=k.useMemo(()=>{if(!id){const V=JM(z),ne=eL(z),ye=tL();id={workflowNode:V,activityNode:ne,batchNode:ye}}return id},[z]),J=k.useCallback(V=>{i(V),t&&setTimeout(()=>{a()},100)},[i,t,a]);return re.useEffect(()=>{const V=new URLSearchParams(window.location.search),ne=decodeURIComponent(V.get("id")||""),ye=V.get("namespace"),M=V.get("runID");p(null),(async()=>{if(!C.current)if(C.current=!0,ne&&ye&&M){y(!0);try{await u({workflowId:ne,namespace:ye,runId:M})}catch(W){console.error("Error loading workflow from URL params:",W),p(W instanceof Error?W.message:"An error occurred while loading the workflow")}finally{y(!1)}}else p("Invalid URL parameters"),y(!1)})()},[]),_.jsxs("div",{className:"w-screen h-screen flex flex-col bg-gray-50",children:[m&&_.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:_.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-xl flex items-center space-x-3",children:[_.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),_.jsx("div",{className:"text-gray-700",children:"Loading workflow data..."})]})}),h&&_.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[_.jsx("strong",{className:"font-bold",children:"Error: "}),_.jsx("span",{className:"block sm:inline",children:h}),_.jsxs("button",{className:"absolute top-0 bottom-0 right-0 px-4 py-3",onClick:()=>p(null),children:[_.jsx("span",{className:"sr-only",children:"Dismiss"}),_.jsx(zs,{className:"h-5 w-5"})]})]}),_.jsx("div",{className:"flex-grow h-full",children:_.jsxs(Uv,{nodes:L,edges:U,nodeTypes:se,onInit:J,minZoom:e,maxZoom:2,fitView:!1,fitViewOptions:{padding:.2,minZoom:e},attributionPosition:"bottom-left",className:"bg-gray-50",onNodesChange:V=>{console.debug(`Nodes changed: ${V.length} changes`)},nodesDraggable:!1,edgesUpdatable:!1,nodeExtent:[[-1/0,-1/0],[1/0,1/0]],defaultViewport:{x:0,y:0,zoom:1},proOptions:{hideAttribution:!0},children:[_.jsx(zO,{}),_.jsx(WO,{}),_.jsx(Js,{position:"bottom-right",className:"flex items-center gap-2 bg-transparent z-10 mb-2 mr-2",children:_.jsxs("button",{onClick:()=>b(!x),className:"bg-blue-500 px-3 py-1 rounded-lg shadow-lg hover:bg-blue-600 text-white transition-colors",children:[x?"Hide":"Show"," Minimap"]})}),x&&_.jsx(OO,{zoomable:!0,pannable:!0,className:"bg-white rounded-lg shadow-lg",style:{backgroundColor:"white",width:300,height:200},maskColor:"rgba(0, 0, 0, 0.1)",nodeColor:"#aaa",nodeStrokeWidth:3,nodeBorderRadius:2}),_.jsx(Js,{position:"top-right",className:"flex items-center gap-2 bg-transparent",children:_.jsx("div",{className:"bg-white p-2 rounded-lg shadow-lg",children:_.jsx(cD,{autoZoomEnabled:t,setAutoZoomEnabled:n,refreshWorkflowData:c,isSearchModalOpen:N,setIsSearchModalOpen:S,setIsTemporalModalOpen:f,currentWorkflow:null})})})]})}),te.map(V=>_.jsx(lD,{id:V.id,data:V.node,position:V.position,onClose:()=>Q(V.id),baseZIndex:V.baseZIndex},V.id)),_.jsx(HM,{isOpen:N,onClose:()=>S(!1),onTemporalModalSubmit:u,onShowNodeData:z})]})}b0(document.getElementById("root")).render(_.jsx(k.StrictMode,{children:_.jsx(nL,{})}));
