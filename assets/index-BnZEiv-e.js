import{r as k,a as th,g as nh,R as re,c as Lr,t as Rm}from"./vendor-DBEsKlBz.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(a){if(a.ep)return;a.ep=!0;const u=n(a);fetch(a.href,u)}})();var x0={exports:{}},qc={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TS=k,NS=Symbol.for("react.element"),kS=Symbol.for("react.fragment"),IS=Object.prototype.hasOwnProperty,CS=TS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,OS={key:!0,ref:!0,__self:!0,__source:!0};function b0(e,t,n){var i,a={},u=null,c=null;n!==void 0&&(u=""+n),t.key!==void 0&&(u=""+t.key),t.ref!==void 0&&(c=t.ref);for(i in t)IS.call(t,i)&&!OS.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)a[i]===void 0&&(a[i]=t[i]);return{$$typeof:NS,type:e,key:u,ref:c,props:a,_owner:CS.current}}qc.Fragment=kS;qc.jsx=b0;qc.jsxs=b0;x0.exports=qc;var _=x0.exports,_0,Mm=th;_0=Mm.createRoot,Mm.hydrateRoot;function Sn(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,i;n<e.length;n++)(i=Sn(e[n]))!==""&&(t+=(t&&" ")+i);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var E0={exports:{}},S0={},T0={exports:{}},N0={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ha=k;function AS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var DS=typeof Object.is=="function"?Object.is:AS,PS=Ha.useState,RS=Ha.useEffect,MS=Ha.useLayoutEffect,LS=Ha.useDebugValue;function $S(e,t){var n=t(),i=PS({inst:{value:n,getSnapshot:t}}),a=i[0].inst,u=i[1];return MS(function(){a.value=n,a.getSnapshot=t,Cf(a)&&u({inst:a})},[e,n,t]),RS(function(){return Cf(a)&&u({inst:a}),e(function(){Cf(a)&&u({inst:a})})},[e]),LS(n),n}function Cf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!DS(e,n)}catch{return!0}}function WS(e,t){return t()}var FS=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?WS:$S;N0.useSyncExternalStore=Ha.useSyncExternalStore!==void 0?Ha.useSyncExternalStore:FS;T0.exports=N0;var jS=T0.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xc=k,BS=jS;function HS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var KS=typeof Object.is=="function"?Object.is:HS,zS=BS.useSyncExternalStore,US=Xc.useRef,YS=Xc.useEffect,VS=Xc.useMemo,qS=Xc.useDebugValue;S0.useSyncExternalStoreWithSelector=function(e,t,n,i,a){var u=US(null);if(u.current===null){var c={hasValue:!1,value:null};u.current=c}else c=u.current;u=VS(function(){function h(b){if(!p){if(p=!0,m=b,b=i(b),a!==void 0&&c.hasValue){var N=c.value;if(a(N,b))return y=N}return y=b}if(N=y,KS(m,b))return N;var S=i(b);return a!==void 0&&a(N,S)?N:(m=b,y=S)}var p=!1,m,y,x=n===void 0?null:n;return[function(){return h(t())},x===null?void 0:function(){return h(x())}]},[t,n,i,a]);var f=zS(e,u[0],u[1]);return YS(function(){c.hasValue=!0,c.value=f},[f]),qS(f),f};E0.exports=S0;var XS=E0.exports;const GS=nh(XS),ZS={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Lm=e=>{let t;const n=new Set,i=(m,y)=>{const x=typeof m=="function"?m(t):m;if(!Object.is(x,t)){const b=t;t=y??(typeof x!="object"||x===null)?x:Object.assign({},t,x),n.forEach(N=>N(t,b))}},a=()=>t,h={setState:i,getState:a,getInitialState:()=>p,subscribe:m=>(n.add(m),()=>n.delete(m)),destroy:()=>{(ZS?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},p=t=e(i,a,h);return h},QS=e=>e?Lm(e):Lm,{useDebugValue:JS}=re,{useSyncExternalStoreWithSelector:eT}=GS,tT=e=>e;function k0(e,t=tT,n){const i=eT(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return JS(i),i}const $m=(e,t)=>{const n=QS(e),i=(a,u=t)=>k0(n,a,u);return Object.assign(i,n),i},nT=(e,t)=>e?$m(e,t):$m;function qn(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[i,a]of e)if(!Object.is(a,t.get(i)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(e[i],t[i]))return!1;return!0}var rT={value:()=>{}};function Gc(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new bc(n)}function bc(e){this._=e}function iT(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",a=n.indexOf(".");if(a>=0&&(i=n.slice(a+1),n=n.slice(0,a)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}bc.prototype=Gc.prototype={constructor:bc,on:function(e,t){var n=this._,i=iT(e+"",n),a,u=-1,c=i.length;if(arguments.length<2){for(;++u<c;)if((a=(e=i[u]).type)&&(a=oT(n[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++u<c;)if(a=(e=i[u]).type)n[a]=Wm(n[a],e.name,t);else if(t==null)for(a in n)n[a]=Wm(n[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new bc(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var n=new Array(a),i=0,a,u;i<a;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(u=this._[e],i=0,a=u.length;i<a;++i)u[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],a=0,u=i.length;a<u;++a)i[a].value.apply(t,n)}};function oT(e,t){for(var n=0,i=e.length,a;n<i;++n)if((a=e[n]).name===t)return a.value}function Wm(e,t,n){for(var i=0,a=e.length;i<a;++i)if(e[i].name===t){e[i]=rT,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var od="http://www.w3.org/1999/xhtml";const Fm={svg:"http://www.w3.org/2000/svg",xhtml:od,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Zc(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Fm.hasOwnProperty(t)?{space:Fm[t],local:e}:e}function aT(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===od&&t.documentElement.namespaceURI===od?t.createElement(e):t.createElementNS(n,e)}}function sT(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function I0(e){var t=Zc(e);return(t.local?sT:aT)(t)}function uT(){}function rh(e){return e==null?uT:function(){return this.querySelector(e)}}function cT(e){typeof e!="function"&&(e=rh(e));for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a)for(var u=t[a],c=u.length,f=i[a]=new Array(c),h,p,m=0;m<c;++m)(h=u[m])&&(p=e.call(h,h.__data__,m,u))&&("__data__"in h&&(p.__data__=h.__data__),f[m]=p);return new ir(i,this._parents)}function lT(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function fT(){return[]}function C0(e){return e==null?fT:function(){return this.querySelectorAll(e)}}function dT(e){return function(){return lT(e.apply(this,arguments))}}function hT(e){typeof e=="function"?e=dT(e):e=C0(e);for(var t=this._groups,n=t.length,i=[],a=[],u=0;u<n;++u)for(var c=t[u],f=c.length,h,p=0;p<f;++p)(h=c[p])&&(i.push(e.call(h,h.__data__,p,c)),a.push(h));return new ir(i,a)}function O0(e){return function(){return this.matches(e)}}function A0(e){return function(t){return t.matches(e)}}var pT=Array.prototype.find;function mT(e){return function(){return pT.call(this.children,e)}}function gT(){return this.firstElementChild}function vT(e){return this.select(e==null?gT:mT(typeof e=="function"?e:A0(e)))}var yT=Array.prototype.filter;function wT(){return Array.from(this.children)}function xT(e){return function(){return yT.call(this.children,e)}}function bT(e){return this.selectAll(e==null?wT:xT(typeof e=="function"?e:A0(e)))}function _T(e){typeof e!="function"&&(e=O0(e));for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a)for(var u=t[a],c=u.length,f=i[a]=[],h,p=0;p<c;++p)(h=u[p])&&e.call(h,h.__data__,p,u)&&f.push(h);return new ir(i,this._parents)}function D0(e){return new Array(e.length)}function ET(){return new ir(this._enter||this._groups.map(D0),this._parents)}function Ic(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Ic.prototype={constructor:Ic,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ST(e){return function(){return e}}function TT(e,t,n,i,a,u){for(var c=0,f,h=t.length,p=u.length;c<p;++c)(f=t[c])?(f.__data__=u[c],i[c]=f):n[c]=new Ic(e,u[c]);for(;c<h;++c)(f=t[c])&&(a[c]=f)}function NT(e,t,n,i,a,u,c){var f,h,p=new Map,m=t.length,y=u.length,x=new Array(m),b;for(f=0;f<m;++f)(h=t[f])&&(x[f]=b=c.call(h,h.__data__,f,t)+"",p.has(b)?a[f]=h:p.set(b,h));for(f=0;f<y;++f)b=c.call(e,u[f],f,u)+"",(h=p.get(b))?(i[f]=h,h.__data__=u[f],p.delete(b)):n[f]=new Ic(e,u[f]);for(f=0;f<m;++f)(h=t[f])&&p.get(x[f])===h&&(a[f]=h)}function kT(e){return e.__data__}function IT(e,t){if(!arguments.length)return Array.from(this,kT);var n=t?NT:TT,i=this._parents,a=this._groups;typeof e!="function"&&(e=ST(e));for(var u=a.length,c=new Array(u),f=new Array(u),h=new Array(u),p=0;p<u;++p){var m=i[p],y=a[p],x=y.length,b=CT(e.call(m,m&&m.__data__,p,i)),N=b.length,S=f[p]=new Array(N),C=c[p]=new Array(N),M=h[p]=new Array(x);n(m,y,S,C,M,b,t);for(var z=0,te=0,F,le;z<N;++z)if(F=S[z]){for(z>=te&&(te=z+1);!(le=C[te])&&++te<N;);F._next=le||null}}return c=new ir(c,i),c._enter=f,c._exit=h,c}function CT(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function OT(){return new ir(this._exit||this._groups.map(D0),this._parents)}function AT(e,t,n){var i=this.enter(),a=this,u=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),n==null?u.remove():n(u),i&&a?i.merge(a).order():a}function DT(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,a=n.length,u=i.length,c=Math.min(a,u),f=new Array(a),h=0;h<c;++h)for(var p=n[h],m=i[h],y=p.length,x=f[h]=new Array(y),b,N=0;N<y;++N)(b=p[N]||m[N])&&(x[N]=b);for(;h<a;++h)f[h]=n[h];return new ir(f,this._parents)}function PT(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],a=i.length-1,u=i[a],c;--a>=0;)(c=i[a])&&(u&&c.compareDocumentPosition(u)^4&&u.parentNode.insertBefore(c,u),u=c);return this}function RT(e){e||(e=MT);function t(y,x){return y&&x?e(y.__data__,x.__data__):!y-!x}for(var n=this._groups,i=n.length,a=new Array(i),u=0;u<i;++u){for(var c=n[u],f=c.length,h=a[u]=new Array(f),p,m=0;m<f;++m)(p=c[m])&&(h[m]=p);h.sort(t)}return new ir(a,this._parents).order()}function MT(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function LT(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function $T(){return Array.from(this)}function WT(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],a=0,u=i.length;a<u;++a){var c=i[a];if(c)return c}return null}function FT(){let e=0;for(const t of this)++e;return e}function jT(){return!this.node()}function BT(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var a=t[n],u=0,c=a.length,f;u<c;++u)(f=a[u])&&e.call(f,f.__data__,u,a);return this}function HT(e){return function(){this.removeAttribute(e)}}function KT(e){return function(){this.removeAttributeNS(e.space,e.local)}}function zT(e,t){return function(){this.setAttribute(e,t)}}function UT(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function YT(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function VT(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function qT(e,t){var n=Zc(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?KT:HT:typeof t=="function"?n.local?VT:YT:n.local?UT:zT)(n,t))}function P0(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function XT(e){return function(){this.style.removeProperty(e)}}function GT(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ZT(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function QT(e,t,n){return arguments.length>1?this.each((t==null?XT:typeof t=="function"?ZT:GT)(e,t,n??"")):Ka(this.node(),e)}function Ka(e,t){return e.style.getPropertyValue(t)||P0(e).getComputedStyle(e,null).getPropertyValue(t)}function JT(e){return function(){delete this[e]}}function eN(e,t){return function(){this[e]=t}}function tN(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function nN(e,t){return arguments.length>1?this.each((t==null?JT:typeof t=="function"?tN:eN)(e,t)):this.node()[e]}function R0(e){return e.trim().split(/^|\s+/)}function ih(e){return e.classList||new M0(e)}function M0(e){this._node=e,this._names=R0(e.getAttribute("class")||"")}M0.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function L0(e,t){for(var n=ih(e),i=-1,a=t.length;++i<a;)n.add(t[i])}function $0(e,t){for(var n=ih(e),i=-1,a=t.length;++i<a;)n.remove(t[i])}function rN(e){return function(){L0(this,e)}}function iN(e){return function(){$0(this,e)}}function oN(e,t){return function(){(t.apply(this,arguments)?L0:$0)(this,e)}}function aN(e,t){var n=R0(e+"");if(arguments.length<2){for(var i=ih(this.node()),a=-1,u=n.length;++a<u;)if(!i.contains(n[a]))return!1;return!0}return this.each((typeof t=="function"?oN:t?rN:iN)(n,t))}function sN(){this.textContent=""}function uN(e){return function(){this.textContent=e}}function cN(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function lN(e){return arguments.length?this.each(e==null?sN:(typeof e=="function"?cN:uN)(e)):this.node().textContent}function fN(){this.innerHTML=""}function dN(e){return function(){this.innerHTML=e}}function hN(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function pN(e){return arguments.length?this.each(e==null?fN:(typeof e=="function"?hN:dN)(e)):this.node().innerHTML}function mN(){this.nextSibling&&this.parentNode.appendChild(this)}function gN(){return this.each(mN)}function vN(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function yN(){return this.each(vN)}function wN(e){var t=typeof e=="function"?e:I0(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function xN(){return null}function bN(e,t){var n=typeof e=="function"?e:I0(e),i=t==null?xN:typeof t=="function"?t:rh(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function _N(){var e=this.parentNode;e&&e.removeChild(this)}function EN(){return this.each(_N)}function SN(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function TN(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function NN(e){return this.select(e?TN:SN)}function kN(e){return arguments.length?this.property("__data__",e):this.node().__data__}function IN(e){return function(t){e.call(this,t,this.__data__)}}function CN(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function ON(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,a=t.length,u;n<a;++n)u=t[n],(!e.type||u.type===e.type)&&u.name===e.name?this.removeEventListener(u.type,u.listener,u.options):t[++i]=u;++i?t.length=i:delete this.__on}}}function AN(e,t,n){return function(){var i=this.__on,a,u=IN(t);if(i){for(var c=0,f=i.length;c<f;++c)if((a=i[c]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=u,a.options=n),a.value=t;return}}this.addEventListener(e.type,u,n),a={type:e.type,name:e.name,value:t,listener:u,options:n},i?i.push(a):this.__on=[a]}}function DN(e,t,n){var i=CN(e+""),a,u=i.length,c;if(arguments.length<2){var f=this.node().__on;if(f){for(var h=0,p=f.length,m;h<p;++h)for(a=0,m=f[h];a<u;++a)if((c=i[a]).type===m.type&&c.name===m.name)return m.value}return}for(f=t?AN:ON,a=0;a<u;++a)this.each(f(i[a],t,n));return this}function W0(e,t,n){var i=P0(e),a=i.CustomEvent;typeof a=="function"?a=new a(t,n):(a=i.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function PN(e,t){return function(){return W0(this,e,t)}}function RN(e,t){return function(){return W0(this,e,t.apply(this,arguments))}}function MN(e,t){return this.each((typeof t=="function"?RN:PN)(e,t))}function*LN(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],a=0,u=i.length,c;a<u;++a)(c=i[a])&&(yield c)}var F0=[null];function ir(e,t){this._groups=e,this._parents=t}function cu(){return new ir([[document.documentElement]],F0)}function $N(){return this}ir.prototype=cu.prototype={constructor:ir,select:cT,selectAll:hT,selectChild:vT,selectChildren:bT,filter:_T,data:IT,enter:ET,exit:OT,join:AT,merge:DT,selection:$N,order:PT,sort:RT,call:LT,nodes:$T,node:WT,size:FT,empty:jT,each:BT,attr:qT,style:QT,property:nN,classed:aN,text:lN,html:pN,raise:gN,lower:yN,append:wN,insert:bN,remove:EN,clone:NN,datum:kN,on:DN,dispatch:MN,[Symbol.iterator]:LN};function vr(e){return typeof e=="string"?new ir([[document.querySelector(e)]],[document.documentElement]):new ir([[e]],F0)}function WN(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Mr(e,t){if(e=WN(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const FN={passive:!1},qs={capture:!0,passive:!1};function Of(e){e.stopImmediatePropagation()}function Wa(e){e.preventDefault(),e.stopImmediatePropagation()}function j0(e){var t=e.document.documentElement,n=vr(e).on("dragstart.drag",Wa,qs);"onselectstart"in t?n.on("selectstart.drag",Wa,qs):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function B0(e,t){var n=e.document.documentElement,i=vr(e).on("dragstart.drag",null);t&&(i.on("click.drag",Wa,qs),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const sc=e=>()=>e;function ad(e,{sourceEvent:t,subject:n,target:i,identifier:a,active:u,x:c,y:f,dx:h,dy:p,dispatch:m}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:u,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:f,enumerable:!0,configurable:!0},dx:{value:h,enumerable:!0,configurable:!0},dy:{value:p,enumerable:!0,configurable:!0},_:{value:m}})}ad.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function jN(e){return!e.ctrlKey&&!e.button}function BN(){return this.parentNode}function HN(e,t){return t??{x:e.x,y:e.y}}function KN(){return navigator.maxTouchPoints||"ontouchstart"in this}function zN(){var e=jN,t=BN,n=HN,i=KN,a={},u=Gc("start","drag","end"),c=0,f,h,p,m,y=0;function x(F){F.on("mousedown.drag",b).filter(i).on("touchstart.drag",C).on("touchmove.drag",M,FN).on("touchend.drag touchcancel.drag",z).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(F,le){if(!(m||!e.call(this,F,le))){var ae=te(this,t.call(this,F,le),F,le,"mouse");ae&&(vr(F.view).on("mousemove.drag",N,qs).on("mouseup.drag",S,qs),j0(F.view),Of(F),p=!1,f=F.clientX,h=F.clientY,ae("start",F))}}function N(F){if(Wa(F),!p){var le=F.clientX-f,ae=F.clientY-h;p=le*le+ae*ae>y}a.mouse("drag",F)}function S(F){vr(F.view).on("mousemove.drag mouseup.drag",null),B0(F.view,p),Wa(F),a.mouse("end",F)}function C(F,le){if(e.call(this,F,le)){var ae=F.changedTouches,U=t.call(this,F,le),Q=ae.length,ne,J;for(ne=0;ne<Q;++ne)(J=te(this,U,F,le,ae[ne].identifier,ae[ne]))&&(Of(F),J("start",F,ae[ne]))}}function M(F){var le=F.changedTouches,ae=le.length,U,Q;for(U=0;U<ae;++U)(Q=a[le[U].identifier])&&(Wa(F),Q("drag",F,le[U]))}function z(F){var le=F.changedTouches,ae=le.length,U,Q;for(m&&clearTimeout(m),m=setTimeout(function(){m=null},500),U=0;U<ae;++U)(Q=a[le[U].identifier])&&(Of(F),Q("end",F,le[U]))}function te(F,le,ae,U,Q,ne){var J=u.copy(),Y=Mr(ne||ae,le),ce,ge,R;if((R=n.call(F,new ad("beforestart",{sourceEvent:ae,target:x,identifier:Q,active:c,x:Y[0],y:Y[1],dx:0,dy:0,dispatch:J}),U))!=null)return ce=R.x-Y[0]||0,ge=R.y-Y[1]||0,function se(Z,ye,pe){var W=Y,ie;switch(Z){case"start":a[Q]=se,ie=c++;break;case"end":delete a[Q],--c;case"drag":Y=Mr(pe||ye,le),ie=c;break}J.call(Z,F,new ad(Z,{sourceEvent:ye,subject:R,target:x,identifier:Q,active:ie,x:Y[0]+ce,y:Y[1]+ge,dx:Y[0]-W[0],dy:Y[1]-W[1],dispatch:J}),U)}}return x.filter=function(F){return arguments.length?(e=typeof F=="function"?F:sc(!!F),x):e},x.container=function(F){return arguments.length?(t=typeof F=="function"?F:sc(F),x):t},x.subject=function(F){return arguments.length?(n=typeof F=="function"?F:sc(F),x):n},x.touchable=function(F){return arguments.length?(i=typeof F=="function"?F:sc(!!F),x):i},x.on=function(){var F=u.on.apply(u,arguments);return F===u?x:F},x.clickDistance=function(F){return arguments.length?(y=(F=+F)*F,x):Math.sqrt(y)},x}function oh(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function H0(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function lu(){}var Xs=.7,Cc=1/Xs,Fa="\\s*([+-]?\\d+)\\s*",Gs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Jr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",UN=/^#([0-9a-f]{3,8})$/,YN=new RegExp(`^rgb\\(${Fa},${Fa},${Fa}\\)$`),VN=new RegExp(`^rgb\\(${Jr},${Jr},${Jr}\\)$`),qN=new RegExp(`^rgba\\(${Fa},${Fa},${Fa},${Gs}\\)$`),XN=new RegExp(`^rgba\\(${Jr},${Jr},${Jr},${Gs}\\)$`),GN=new RegExp(`^hsl\\(${Gs},${Jr},${Jr}\\)$`),ZN=new RegExp(`^hsla\\(${Gs},${Jr},${Jr},${Gs}\\)$`),jm={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};oh(lu,Zs,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Bm,formatHex:Bm,formatHex8:QN,formatHsl:JN,formatRgb:Hm,toString:Hm});function Bm(){return this.rgb().formatHex()}function QN(){return this.rgb().formatHex8()}function JN(){return K0(this).formatHsl()}function Hm(){return this.rgb().formatRgb()}function Zs(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=UN.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Km(t):n===3?new Vn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?uc(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?uc(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=YN.exec(e))?new Vn(t[1],t[2],t[3],1):(t=VN.exec(e))?new Vn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=qN.exec(e))?uc(t[1],t[2],t[3],t[4]):(t=XN.exec(e))?uc(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=GN.exec(e))?Ym(t[1],t[2]/100,t[3]/100,1):(t=ZN.exec(e))?Ym(t[1],t[2]/100,t[3]/100,t[4]):jm.hasOwnProperty(e)?Km(jm[e]):e==="transparent"?new Vn(NaN,NaN,NaN,0):null}function Km(e){return new Vn(e>>16&255,e>>8&255,e&255,1)}function uc(e,t,n,i){return i<=0&&(e=t=n=NaN),new Vn(e,t,n,i)}function ek(e){return e instanceof lu||(e=Zs(e)),e?(e=e.rgb(),new Vn(e.r,e.g,e.b,e.opacity)):new Vn}function sd(e,t,n,i){return arguments.length===1?ek(e):new Vn(e,t,n,i??1)}function Vn(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}oh(Vn,sd,H0(lu,{brighter(e){return e=e==null?Cc:Math.pow(Cc,e),new Vn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Xs:Math.pow(Xs,e),new Vn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Vn(Uo(this.r),Uo(this.g),Uo(this.b),Oc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zm,formatHex:zm,formatHex8:tk,formatRgb:Um,toString:Um}));function zm(){return`#${Bo(this.r)}${Bo(this.g)}${Bo(this.b)}`}function tk(){return`#${Bo(this.r)}${Bo(this.g)}${Bo(this.b)}${Bo((isNaN(this.opacity)?1:this.opacity)*255)}`}function Um(){const e=Oc(this.opacity);return`${e===1?"rgb(":"rgba("}${Uo(this.r)}, ${Uo(this.g)}, ${Uo(this.b)}${e===1?")":`, ${e})`}`}function Oc(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Uo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Bo(e){return e=Uo(e),(e<16?"0":"")+e.toString(16)}function Ym(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new $r(e,t,n,i)}function K0(e){if(e instanceof $r)return new $r(e.h,e.s,e.l,e.opacity);if(e instanceof lu||(e=Zs(e)),!e)return new $r;if(e instanceof $r)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,a=Math.min(t,n,i),u=Math.max(t,n,i),c=NaN,f=u-a,h=(u+a)/2;return f?(t===u?c=(n-i)/f+(n<i)*6:n===u?c=(i-t)/f+2:c=(t-n)/f+4,f/=h<.5?u+a:2-u-a,c*=60):f=h>0&&h<1?0:c,new $r(c,f,h,e.opacity)}function nk(e,t,n,i){return arguments.length===1?K0(e):new $r(e,t,n,i??1)}function $r(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}oh($r,nk,H0(lu,{brighter(e){return e=e==null?Cc:Math.pow(Cc,e),new $r(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Xs:Math.pow(Xs,e),new $r(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,a=2*n-i;return new Vn(Af(e>=240?e-240:e+120,a,i),Af(e,a,i),Af(e<120?e+240:e-120,a,i),this.opacity)},clamp(){return new $r(Vm(this.h),cc(this.s),cc(this.l),Oc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Oc(this.opacity);return`${e===1?"hsl(":"hsla("}${Vm(this.h)}, ${cc(this.s)*100}%, ${cc(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Vm(e){return e=(e||0)%360,e<0?e+360:e}function cc(e){return Math.max(0,Math.min(1,e||0))}function Af(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const z0=e=>()=>e;function rk(e,t){return function(n){return e+n*t}}function ik(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function ok(e){return(e=+e)==1?U0:function(t,n){return n-t?ik(t,n,e):z0(isNaN(t)?n:t)}}function U0(e,t){var n=t-e;return n?rk(e,n):z0(isNaN(e)?t:e)}const qm=function e(t){var n=ok(t);function i(a,u){var c=n((a=sd(a)).r,(u=sd(u)).r),f=n(a.g,u.g),h=n(a.b,u.b),p=U0(a.opacity,u.opacity);return function(m){return a.r=c(m),a.g=f(m),a.b=h(m),a.opacity=p(m),a+""}}return i.gamma=e,i}(1);function Vi(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var ud=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Df=new RegExp(ud.source,"g");function ak(e){return function(){return e}}function sk(e){return function(t){return e(t)+""}}function uk(e,t){var n=ud.lastIndex=Df.lastIndex=0,i,a,u,c=-1,f=[],h=[];for(e=e+"",t=t+"";(i=ud.exec(e))&&(a=Df.exec(t));)(u=a.index)>n&&(u=t.slice(n,u),f[c]?f[c]+=u:f[++c]=u),(i=i[0])===(a=a[0])?f[c]?f[c]+=a:f[++c]=a:(f[++c]=null,h.push({i:c,x:Vi(i,a)})),n=Df.lastIndex;return n<t.length&&(u=t.slice(n),f[c]?f[c]+=u:f[++c]=u),f.length<2?h[0]?sk(h[0].x):ak(t):(t=h.length,function(p){for(var m=0,y;m<t;++m)f[(y=h[m]).i]=y.x(p);return f.join("")})}var Xm=180/Math.PI,cd={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Y0(e,t,n,i,a,u){var c,f,h;return(c=Math.sqrt(e*e+t*t))&&(e/=c,t/=c),(h=e*n+t*i)&&(n-=e*h,i-=t*h),(f=Math.sqrt(n*n+i*i))&&(n/=f,i/=f,h/=f),e*i<t*n&&(e=-e,t=-t,h=-h,c=-c),{translateX:a,translateY:u,rotate:Math.atan2(t,e)*Xm,skewX:Math.atan(h)*Xm,scaleX:c,scaleY:f}}var lc;function ck(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?cd:Y0(t.a,t.b,t.c,t.d,t.e,t.f)}function lk(e){return e==null||(lc||(lc=document.createElementNS("http://www.w3.org/2000/svg","g")),lc.setAttribute("transform",e),!(e=lc.transform.baseVal.consolidate()))?cd:(e=e.matrix,Y0(e.a,e.b,e.c,e.d,e.e,e.f))}function V0(e,t,n,i){function a(p){return p.length?p.pop()+" ":""}function u(p,m,y,x,b,N){if(p!==y||m!==x){var S=b.push("translate(",null,t,null,n);N.push({i:S-4,x:Vi(p,y)},{i:S-2,x:Vi(m,x)})}else(y||x)&&b.push("translate("+y+t+x+n)}function c(p,m,y,x){p!==m?(p-m>180?m+=360:m-p>180&&(p+=360),x.push({i:y.push(a(y)+"rotate(",null,i)-2,x:Vi(p,m)})):m&&y.push(a(y)+"rotate("+m+i)}function f(p,m,y,x){p!==m?x.push({i:y.push(a(y)+"skewX(",null,i)-2,x:Vi(p,m)}):m&&y.push(a(y)+"skewX("+m+i)}function h(p,m,y,x,b,N){if(p!==y||m!==x){var S=b.push(a(b)+"scale(",null,",",null,")");N.push({i:S-4,x:Vi(p,y)},{i:S-2,x:Vi(m,x)})}else(y!==1||x!==1)&&b.push(a(b)+"scale("+y+","+x+")")}return function(p,m){var y=[],x=[];return p=e(p),m=e(m),u(p.translateX,p.translateY,m.translateX,m.translateY,y,x),c(p.rotate,m.rotate,y,x),f(p.skewX,m.skewX,y,x),h(p.scaleX,p.scaleY,m.scaleX,m.scaleY,y,x),p=m=null,function(b){for(var N=-1,S=x.length,C;++N<S;)y[(C=x[N]).i]=C.x(b);return y.join("")}}}var fk=V0(ck,"px, ","px)","deg)"),dk=V0(lk,", ",")",")"),hk=1e-12;function Gm(e){return((e=Math.exp(e))+1/e)/2}function pk(e){return((e=Math.exp(e))-1/e)/2}function mk(e){return((e=Math.exp(2*e))-1)/(e+1)}const gk=function e(t,n,i){function a(u,c){var f=u[0],h=u[1],p=u[2],m=c[0],y=c[1],x=c[2],b=m-f,N=y-h,S=b*b+N*N,C,M;if(S<hk)M=Math.log(x/p)/t,C=function(U){return[f+U*b,h+U*N,p*Math.exp(t*U*M)]};else{var z=Math.sqrt(S),te=(x*x-p*p+i*S)/(2*p*n*z),F=(x*x-p*p-i*S)/(2*x*n*z),le=Math.log(Math.sqrt(te*te+1)-te),ae=Math.log(Math.sqrt(F*F+1)-F);M=(ae-le)/t,C=function(U){var Q=U*M,ne=Gm(le),J=p/(n*z)*(ne*mk(t*Q+le)-pk(le));return[f+J*b,h+J*N,p*ne/Gm(t*Q+le)]}}return C.duration=M*1e3*t/Math.SQRT2,C}return a.rho=function(u){var c=Math.max(.001,+u),f=c*c,h=f*f;return e(c,f,h)},a}(Math.SQRT2,2,4);var za=0,Ws=0,Cs=0,q0=1e3,Ac,Fs,Dc=0,Xo=0,Qc=0,Qs=typeof performance=="object"&&performance.now?performance:Date,X0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ah(){return Xo||(X0(vk),Xo=Qs.now()+Qc)}function vk(){Xo=0}function Pc(){this._call=this._time=this._next=null}Pc.prototype=G0.prototype={constructor:Pc,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ah():+n)+(t==null?0:+t),!this._next&&Fs!==this&&(Fs?Fs._next=this:Ac=this,Fs=this),this._call=e,this._time=n,ld()},stop:function(){this._call&&(this._call=null,this._time=1/0,ld())}};function G0(e,t,n){var i=new Pc;return i.restart(e,t,n),i}function yk(){ah(),++za;for(var e=Ac,t;e;)(t=Xo-e._time)>=0&&e._call.call(void 0,t),e=e._next;--za}function Zm(){Xo=(Dc=Qs.now())+Qc,za=Ws=0;try{yk()}finally{za=0,xk(),Xo=0}}function wk(){var e=Qs.now(),t=e-Dc;t>q0&&(Qc-=t,Dc=e)}function xk(){for(var e,t=Ac,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ac=n);Fs=e,ld(i)}function ld(e){if(!za){Ws&&(Ws=clearTimeout(Ws));var t=e-Xo;t>24?(e<1/0&&(Ws=setTimeout(Zm,e-Qs.now()-Qc)),Cs&&(Cs=clearInterval(Cs))):(Cs||(Dc=Qs.now(),Cs=setInterval(wk,q0)),za=1,X0(Zm))}}function Qm(e,t,n){var i=new Pc;return t=t==null?0:+t,i.restart(a=>{i.stop(),e(a+t)},t,n),i}var bk=Gc("start","end","cancel","interrupt"),_k=[],Z0=0,Jm=1,fd=2,_c=3,eg=4,dd=5,Ec=6;function Jc(e,t,n,i,a,u){var c=e.__transition;if(!c)e.__transition={};else if(n in c)return;Ek(e,n,{name:t,index:i,group:a,on:bk,tween:_k,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:Z0})}function sh(e,t){var n=Hr(e,t);if(n.state>Z0)throw new Error("too late; already scheduled");return n}function ei(e,t){var n=Hr(e,t);if(n.state>_c)throw new Error("too late; already running");return n}function Hr(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Ek(e,t,n){var i=e.__transition,a;i[t]=n,n.timer=G0(u,0,n.time);function u(p){n.state=Jm,n.timer.restart(c,n.delay,n.time),n.delay<=p&&c(p-n.delay)}function c(p){var m,y,x,b;if(n.state!==Jm)return h();for(m in i)if(b=i[m],b.name===n.name){if(b.state===_c)return Qm(c);b.state===eg?(b.state=Ec,b.timer.stop(),b.on.call("interrupt",e,e.__data__,b.index,b.group),delete i[m]):+m<t&&(b.state=Ec,b.timer.stop(),b.on.call("cancel",e,e.__data__,b.index,b.group),delete i[m])}if(Qm(function(){n.state===_c&&(n.state=eg,n.timer.restart(f,n.delay,n.time),f(p))}),n.state=fd,n.on.call("start",e,e.__data__,n.index,n.group),n.state===fd){for(n.state=_c,a=new Array(x=n.tween.length),m=0,y=-1;m<x;++m)(b=n.tween[m].value.call(e,e.__data__,n.index,n.group))&&(a[++y]=b);a.length=y+1}}function f(p){for(var m=p<n.duration?n.ease.call(null,p/n.duration):(n.timer.restart(h),n.state=dd,1),y=-1,x=a.length;++y<x;)a[y].call(e,m);n.state===dd&&(n.on.call("end",e,e.__data__,n.index,n.group),h())}function h(){n.state=Ec,n.timer.stop(),delete i[t];for(var p in i)return;delete e.__transition}}function Sc(e,t){var n=e.__transition,i,a,u=!0,c;if(n){t=t==null?null:t+"";for(c in n){if((i=n[c]).name!==t){u=!1;continue}a=i.state>fd&&i.state<dd,i.state=Ec,i.timer.stop(),i.on.call(a?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[c]}u&&delete e.__transition}}function Sk(e){return this.each(function(){Sc(this,e)})}function Tk(e,t){var n,i;return function(){var a=ei(this,e),u=a.tween;if(u!==n){i=n=u;for(var c=0,f=i.length;c<f;++c)if(i[c].name===t){i=i.slice(),i.splice(c,1);break}}a.tween=i}}function Nk(e,t,n){var i,a;if(typeof n!="function")throw new Error;return function(){var u=ei(this,e),c=u.tween;if(c!==i){a=(i=c).slice();for(var f={name:t,value:n},h=0,p=a.length;h<p;++h)if(a[h].name===t){a[h]=f;break}h===p&&a.push(f)}u.tween=a}}function kk(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=Hr(this.node(),n).tween,a=0,u=i.length,c;a<u;++a)if((c=i[a]).name===e)return c.value;return null}return this.each((t==null?Tk:Nk)(n,e,t))}function uh(e,t,n){var i=e._id;return e.each(function(){var a=ei(this,i);(a.value||(a.value={}))[t]=n.apply(this,arguments)}),function(a){return Hr(a,i).value[t]}}function Q0(e,t){var n;return(typeof t=="number"?Vi:t instanceof Zs?qm:(n=Zs(t))?(t=n,qm):uk)(e,t)}function Ik(e){return function(){this.removeAttribute(e)}}function Ck(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ok(e,t,n){var i,a=n+"",u;return function(){var c=this.getAttribute(e);return c===a?null:c===i?u:u=t(i=c,n)}}function Ak(e,t,n){var i,a=n+"",u;return function(){var c=this.getAttributeNS(e.space,e.local);return c===a?null:c===i?u:u=t(i=c,n)}}function Dk(e,t,n){var i,a,u;return function(){var c,f=n(this),h;return f==null?void this.removeAttribute(e):(c=this.getAttribute(e),h=f+"",c===h?null:c===i&&h===a?u:(a=h,u=t(i=c,f)))}}function Pk(e,t,n){var i,a,u;return function(){var c,f=n(this),h;return f==null?void this.removeAttributeNS(e.space,e.local):(c=this.getAttributeNS(e.space,e.local),h=f+"",c===h?null:c===i&&h===a?u:(a=h,u=t(i=c,f)))}}function Rk(e,t){var n=Zc(e),i=n==="transform"?dk:Q0;return this.attrTween(e,typeof t=="function"?(n.local?Pk:Dk)(n,i,uh(this,"attr."+e,t)):t==null?(n.local?Ck:Ik)(n):(n.local?Ak:Ok)(n,i,t))}function Mk(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Lk(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function $k(e,t){var n,i;function a(){var u=t.apply(this,arguments);return u!==i&&(n=(i=u)&&Lk(e,u)),n}return a._value=t,a}function Wk(e,t){var n,i;function a(){var u=t.apply(this,arguments);return u!==i&&(n=(i=u)&&Mk(e,u)),n}return a._value=t,a}function Fk(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=Zc(e);return this.tween(n,(i.local?$k:Wk)(i,t))}function jk(e,t){return function(){sh(this,e).delay=+t.apply(this,arguments)}}function Bk(e,t){return t=+t,function(){sh(this,e).delay=t}}function Hk(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?jk:Bk)(t,e)):Hr(this.node(),t).delay}function Kk(e,t){return function(){ei(this,e).duration=+t.apply(this,arguments)}}function zk(e,t){return t=+t,function(){ei(this,e).duration=t}}function Uk(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Kk:zk)(t,e)):Hr(this.node(),t).duration}function Yk(e,t){if(typeof t!="function")throw new Error;return function(){ei(this,e).ease=t}}function Vk(e){var t=this._id;return arguments.length?this.each(Yk(t,e)):Hr(this.node(),t).ease}function qk(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ei(this,e).ease=n}}function Xk(e){if(typeof e!="function")throw new Error;return this.each(qk(this._id,e))}function Gk(e){typeof e!="function"&&(e=O0(e));for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a)for(var u=t[a],c=u.length,f=i[a]=[],h,p=0;p<c;++p)(h=u[p])&&e.call(h,h.__data__,p,u)&&f.push(h);return new Ei(i,this._parents,this._name,this._id)}function Zk(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,a=n.length,u=Math.min(i,a),c=new Array(i),f=0;f<u;++f)for(var h=t[f],p=n[f],m=h.length,y=c[f]=new Array(m),x,b=0;b<m;++b)(x=h[b]||p[b])&&(y[b]=x);for(;f<i;++f)c[f]=t[f];return new Ei(c,this._parents,this._name,this._id)}function Qk(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Jk(e,t,n){var i,a,u=Qk(t)?sh:ei;return function(){var c=u(this,e),f=c.on;f!==i&&(a=(i=f).copy()).on(t,n),c.on=a}}function eI(e,t){var n=this._id;return arguments.length<2?Hr(this.node(),n).on.on(e):this.each(Jk(n,e,t))}function tI(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function nI(){return this.on("end.remove",tI(this._id))}function rI(e){var t=this._name,n=this._id;typeof e!="function"&&(e=rh(e));for(var i=this._groups,a=i.length,u=new Array(a),c=0;c<a;++c)for(var f=i[c],h=f.length,p=u[c]=new Array(h),m,y,x=0;x<h;++x)(m=f[x])&&(y=e.call(m,m.__data__,x,f))&&("__data__"in m&&(y.__data__=m.__data__),p[x]=y,Jc(p[x],t,n,x,p,Hr(m,n)));return new Ei(u,this._parents,t,n)}function iI(e){var t=this._name,n=this._id;typeof e!="function"&&(e=C0(e));for(var i=this._groups,a=i.length,u=[],c=[],f=0;f<a;++f)for(var h=i[f],p=h.length,m,y=0;y<p;++y)if(m=h[y]){for(var x=e.call(m,m.__data__,y,h),b,N=Hr(m,n),S=0,C=x.length;S<C;++S)(b=x[S])&&Jc(b,t,n,S,x,N);u.push(x),c.push(m)}return new Ei(u,c,t,n)}var oI=cu.prototype.constructor;function aI(){return new oI(this._groups,this._parents)}function sI(e,t){var n,i,a;return function(){var u=Ka(this,e),c=(this.style.removeProperty(e),Ka(this,e));return u===c?null:u===n&&c===i?a:a=t(n=u,i=c)}}function J0(e){return function(){this.style.removeProperty(e)}}function uI(e,t,n){var i,a=n+"",u;return function(){var c=Ka(this,e);return c===a?null:c===i?u:u=t(i=c,n)}}function cI(e,t,n){var i,a,u;return function(){var c=Ka(this,e),f=n(this),h=f+"";return f==null&&(h=f=(this.style.removeProperty(e),Ka(this,e))),c===h?null:c===i&&h===a?u:(a=h,u=t(i=c,f))}}function lI(e,t){var n,i,a,u="style."+t,c="end."+u,f;return function(){var h=ei(this,e),p=h.on,m=h.value[u]==null?f||(f=J0(t)):void 0;(p!==n||a!==m)&&(i=(n=p).copy()).on(c,a=m),h.on=i}}function fI(e,t,n){var i=(e+="")=="transform"?fk:Q0;return t==null?this.styleTween(e,sI(e,i)).on("end.style."+e,J0(e)):typeof t=="function"?this.styleTween(e,cI(e,i,uh(this,"style."+e,t))).each(lI(this._id,e)):this.styleTween(e,uI(e,i,t),n).on("end.style."+e,null)}function dI(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function hI(e,t,n){var i,a;function u(){var c=t.apply(this,arguments);return c!==a&&(i=(a=c)&&dI(e,c,n)),i}return u._value=t,u}function pI(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,hI(e,t,n??""))}function mI(e){return function(){this.textContent=e}}function gI(e){return function(){var t=e(this);this.textContent=t??""}}function vI(e){return this.tween("text",typeof e=="function"?gI(uh(this,"text",e)):mI(e==null?"":e+""))}function yI(e){return function(t){this.textContent=e.call(this,t)}}function wI(e){var t,n;function i(){var a=e.apply(this,arguments);return a!==n&&(t=(n=a)&&yI(a)),t}return i._value=e,i}function xI(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,wI(e))}function bI(){for(var e=this._name,t=this._id,n=ev(),i=this._groups,a=i.length,u=0;u<a;++u)for(var c=i[u],f=c.length,h,p=0;p<f;++p)if(h=c[p]){var m=Hr(h,t);Jc(h,e,n,p,c,{time:m.time+m.delay+m.duration,delay:0,duration:m.duration,ease:m.ease})}return new Ei(i,this._parents,e,n)}function _I(){var e,t,n=this,i=n._id,a=n.size();return new Promise(function(u,c){var f={value:c},h={value:function(){--a===0&&u()}};n.each(function(){var p=ei(this,i),m=p.on;m!==e&&(t=(e=m).copy(),t._.cancel.push(f),t._.interrupt.push(f),t._.end.push(h)),p.on=t}),a===0&&u()})}var EI=0;function Ei(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function ev(){return++EI}var gi=cu.prototype;Ei.prototype={constructor:Ei,select:rI,selectAll:iI,selectChild:gi.selectChild,selectChildren:gi.selectChildren,filter:Gk,merge:Zk,selection:aI,transition:bI,call:gi.call,nodes:gi.nodes,node:gi.node,size:gi.size,empty:gi.empty,each:gi.each,on:eI,attr:Rk,attrTween:Fk,style:fI,styleTween:pI,text:vI,textTween:xI,remove:nI,tween:kk,delay:Hk,duration:Uk,ease:Vk,easeVarying:Xk,end:_I,[Symbol.iterator]:gi[Symbol.iterator]};function SI(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var TI={time:null,delay:0,duration:250,ease:SI};function NI(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function kI(e){var t,n;e instanceof Ei?(t=e._id,e=e._name):(t=ev(),(n=TI).time=ah(),e=e==null?null:e+"");for(var i=this._groups,a=i.length,u=0;u<a;++u)for(var c=i[u],f=c.length,h,p=0;p<f;++p)(h=c[p])&&Jc(h,e,t,p,c,n||NI(h,t));return new Ei(i,this._parents,e,t)}cu.prototype.interrupt=Sk;cu.prototype.transition=kI;const fc=e=>()=>e;function II(e,{sourceEvent:t,target:n,transform:i,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function wi(e,t,n){this.k=e,this.x=t,this.y=n}wi.prototype={constructor:wi,scale:function(e){return e===1?this:new wi(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new wi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var xi=new wi(1,0,0);wi.prototype;function Pf(e){e.stopImmediatePropagation()}function Os(e){e.preventDefault(),e.stopImmediatePropagation()}function CI(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function OI(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function tg(){return this.__zoom||xi}function AI(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function DI(){return navigator.maxTouchPoints||"ontouchstart"in this}function PI(e,t,n){var i=e.invertX(t[0][0])-n[0][0],a=e.invertX(t[1][0])-n[1][0],u=e.invertY(t[0][1])-n[0][1],c=e.invertY(t[1][1])-n[1][1];return e.translate(a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a),c>u?(u+c)/2:Math.min(0,u)||Math.max(0,c))}function tv(){var e=CI,t=OI,n=PI,i=AI,a=DI,u=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],f=250,h=gk,p=Gc("start","zoom","end"),m,y,x,b=500,N=150,S=0,C=10;function M(R){R.property("__zoom",tg).on("wheel.zoom",Q,{passive:!1}).on("mousedown.zoom",ne).on("dblclick.zoom",J).filter(a).on("touchstart.zoom",Y).on("touchmove.zoom",ce).on("touchend.zoom touchcancel.zoom",ge).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}M.transform=function(R,se,Z,ye){var pe=R.selection?R.selection():R;pe.property("__zoom",tg),R!==pe?le(R,se,Z,ye):pe.interrupt().each(function(){ae(this,arguments).event(ye).start().zoom(null,typeof se=="function"?se.apply(this,arguments):se).end()})},M.scaleBy=function(R,se,Z,ye){M.scaleTo(R,function(){var pe=this.__zoom.k,W=typeof se=="function"?se.apply(this,arguments):se;return pe*W},Z,ye)},M.scaleTo=function(R,se,Z,ye){M.transform(R,function(){var pe=t.apply(this,arguments),W=this.__zoom,ie=Z==null?F(pe):typeof Z=="function"?Z.apply(this,arguments):Z,ue=W.invert(ie),we=typeof se=="function"?se.apply(this,arguments):se;return n(te(z(W,we),ie,ue),pe,c)},Z,ye)},M.translateBy=function(R,se,Z,ye){M.transform(R,function(){return n(this.__zoom.translate(typeof se=="function"?se.apply(this,arguments):se,typeof Z=="function"?Z.apply(this,arguments):Z),t.apply(this,arguments),c)},null,ye)},M.translateTo=function(R,se,Z,ye,pe){M.transform(R,function(){var W=t.apply(this,arguments),ie=this.__zoom,ue=ye==null?F(W):typeof ye=="function"?ye.apply(this,arguments):ye;return n(xi.translate(ue[0],ue[1]).scale(ie.k).translate(typeof se=="function"?-se.apply(this,arguments):-se,typeof Z=="function"?-Z.apply(this,arguments):-Z),W,c)},ye,pe)};function z(R,se){return se=Math.max(u[0],Math.min(u[1],se)),se===R.k?R:new wi(se,R.x,R.y)}function te(R,se,Z){var ye=se[0]-Z[0]*R.k,pe=se[1]-Z[1]*R.k;return ye===R.x&&pe===R.y?R:new wi(R.k,ye,pe)}function F(R){return[(+R[0][0]+ +R[1][0])/2,(+R[0][1]+ +R[1][1])/2]}function le(R,se,Z,ye){R.on("start.zoom",function(){ae(this,arguments).event(ye).start()}).on("interrupt.zoom end.zoom",function(){ae(this,arguments).event(ye).end()}).tween("zoom",function(){var pe=this,W=arguments,ie=ae(pe,W).event(ye),ue=t.apply(pe,W),we=Z==null?F(ue):typeof Z=="function"?Z.apply(pe,W):Z,ke=Math.max(ue[1][0]-ue[0][0],ue[1][1]-ue[0][1]),Me=pe.__zoom,Re=typeof se=="function"?se.apply(pe,W):se,je=h(Me.invert(we).concat(ke/Me.k),Re.invert(we).concat(ke/Re.k));return function(Ye){if(Ye===1)Ye=Re;else{var qe=je(Ye),Se=ke/qe[2];Ye=new wi(Se,we[0]-qe[0]*Se,we[1]-qe[1]*Se)}ie.zoom(null,Ye)}})}function ae(R,se,Z){return!Z&&R.__zooming||new U(R,se)}function U(R,se){this.that=R,this.args=se,this.active=0,this.sourceEvent=null,this.extent=t.apply(R,se),this.taps=0}U.prototype={event:function(R){return R&&(this.sourceEvent=R),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(R,se){return this.mouse&&R!=="mouse"&&(this.mouse[1]=se.invert(this.mouse[0])),this.touch0&&R!=="touch"&&(this.touch0[1]=se.invert(this.touch0[0])),this.touch1&&R!=="touch"&&(this.touch1[1]=se.invert(this.touch1[0])),this.that.__zoom=se,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(R){var se=vr(this.that).datum();p.call(R,this.that,new II(R,{sourceEvent:this.sourceEvent,target:M,type:R,transform:this.that.__zoom,dispatch:p}),se)}};function Q(R,...se){if(!e.apply(this,arguments))return;var Z=ae(this,se).event(R),ye=this.__zoom,pe=Math.max(u[0],Math.min(u[1],ye.k*Math.pow(2,i.apply(this,arguments)))),W=Mr(R);if(Z.wheel)(Z.mouse[0][0]!==W[0]||Z.mouse[0][1]!==W[1])&&(Z.mouse[1]=ye.invert(Z.mouse[0]=W)),clearTimeout(Z.wheel);else{if(ye.k===pe)return;Z.mouse=[W,ye.invert(W)],Sc(this),Z.start()}Os(R),Z.wheel=setTimeout(ie,N),Z.zoom("mouse",n(te(z(ye,pe),Z.mouse[0],Z.mouse[1]),Z.extent,c));function ie(){Z.wheel=null,Z.end()}}function ne(R,...se){if(x||!e.apply(this,arguments))return;var Z=R.currentTarget,ye=ae(this,se,!0).event(R),pe=vr(R.view).on("mousemove.zoom",we,!0).on("mouseup.zoom",ke,!0),W=Mr(R,Z),ie=R.clientX,ue=R.clientY;j0(R.view),Pf(R),ye.mouse=[W,this.__zoom.invert(W)],Sc(this),ye.start();function we(Me){if(Os(Me),!ye.moved){var Re=Me.clientX-ie,je=Me.clientY-ue;ye.moved=Re*Re+je*je>S}ye.event(Me).zoom("mouse",n(te(ye.that.__zoom,ye.mouse[0]=Mr(Me,Z),ye.mouse[1]),ye.extent,c))}function ke(Me){pe.on("mousemove.zoom mouseup.zoom",null),B0(Me.view,ye.moved),Os(Me),ye.event(Me).end()}}function J(R,...se){if(e.apply(this,arguments)){var Z=this.__zoom,ye=Mr(R.changedTouches?R.changedTouches[0]:R,this),pe=Z.invert(ye),W=Z.k*(R.shiftKey?.5:2),ie=n(te(z(Z,W),ye,pe),t.apply(this,se),c);Os(R),f>0?vr(this).transition().duration(f).call(le,ie,ye,R):vr(this).call(M.transform,ie,ye,R)}}function Y(R,...se){if(e.apply(this,arguments)){var Z=R.touches,ye=Z.length,pe=ae(this,se,R.changedTouches.length===ye).event(R),W,ie,ue,we;for(Pf(R),ie=0;ie<ye;++ie)ue=Z[ie],we=Mr(ue,this),we=[we,this.__zoom.invert(we),ue.identifier],pe.touch0?!pe.touch1&&pe.touch0[2]!==we[2]&&(pe.touch1=we,pe.taps=0):(pe.touch0=we,W=!0,pe.taps=1+!!m);m&&(m=clearTimeout(m)),W&&(pe.taps<2&&(y=we[0],m=setTimeout(function(){m=null},b)),Sc(this),pe.start())}}function ce(R,...se){if(this.__zooming){var Z=ae(this,se).event(R),ye=R.changedTouches,pe=ye.length,W,ie,ue,we;for(Os(R),W=0;W<pe;++W)ie=ye[W],ue=Mr(ie,this),Z.touch0&&Z.touch0[2]===ie.identifier?Z.touch0[0]=ue:Z.touch1&&Z.touch1[2]===ie.identifier&&(Z.touch1[0]=ue);if(ie=Z.that.__zoom,Z.touch1){var ke=Z.touch0[0],Me=Z.touch0[1],Re=Z.touch1[0],je=Z.touch1[1],Ye=(Ye=Re[0]-ke[0])*Ye+(Ye=Re[1]-ke[1])*Ye,qe=(qe=je[0]-Me[0])*qe+(qe=je[1]-Me[1])*qe;ie=z(ie,Math.sqrt(Ye/qe)),ue=[(ke[0]+Re[0])/2,(ke[1]+Re[1])/2],we=[(Me[0]+je[0])/2,(Me[1]+je[1])/2]}else if(Z.touch0)ue=Z.touch0[0],we=Z.touch0[1];else return;Z.zoom("touch",n(te(ie,ue,we),Z.extent,c))}}function ge(R,...se){if(this.__zooming){var Z=ae(this,se).event(R),ye=R.changedTouches,pe=ye.length,W,ie;for(Pf(R),x&&clearTimeout(x),x=setTimeout(function(){x=null},b),W=0;W<pe;++W)ie=ye[W],Z.touch0&&Z.touch0[2]===ie.identifier?delete Z.touch0:Z.touch1&&Z.touch1[2]===ie.identifier&&delete Z.touch1;if(Z.touch1&&!Z.touch0&&(Z.touch0=Z.touch1,delete Z.touch1),Z.touch0)Z.touch0[1]=this.__zoom.invert(Z.touch0[0]);else if(Z.end(),Z.taps===2&&(ie=Mr(ie,this),Math.hypot(y[0]-ie[0],y[1]-ie[1])<C)){var ue=vr(this).on("dblclick.zoom");ue&&ue.apply(this,arguments)}}}return M.wheelDelta=function(R){return arguments.length?(i=typeof R=="function"?R:fc(+R),M):i},M.filter=function(R){return arguments.length?(e=typeof R=="function"?R:fc(!!R),M):e},M.touchable=function(R){return arguments.length?(a=typeof R=="function"?R:fc(!!R),M):a},M.extent=function(R){return arguments.length?(t=typeof R=="function"?R:fc([[+R[0][0],+R[0][1]],[+R[1][0],+R[1][1]]]),M):t},M.scaleExtent=function(R){return arguments.length?(u[0]=+R[0],u[1]=+R[1],M):[u[0],u[1]]},M.translateExtent=function(R){return arguments.length?(c[0][0]=+R[0][0],c[1][0]=+R[1][0],c[0][1]=+R[0][1],c[1][1]=+R[1][1],M):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},M.constrain=function(R){return arguments.length?(n=R,M):n},M.duration=function(R){return arguments.length?(f=+R,M):f},M.interpolate=function(R){return arguments.length?(h=R,M):h},M.on=function(){var R=p.on.apply(p,arguments);return R===p?M:R},M.clickDistance=function(R){return arguments.length?(S=(R=+R)*R,M):Math.sqrt(S)},M.tapDistance=function(R){return arguments.length?(C=+R,M):C},M}const el=k.createContext(null),RI=el.Provider,Si={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},nv=Si.error001();function Mt(e,t){const n=k.useContext(el);if(n===null)throw new Error(nv);return k0(n,e,t)}const mn=()=>{const e=k.useContext(el);if(e===null)throw new Error(nv);return k.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},MI=e=>e.userSelectionActive?"none":"all";function Js({position:e,children:t,className:n,style:i,...a}){const u=Mt(MI),c=`${e}`.split("-");return re.createElement("div",{className:Sn(["react-flow__panel",n,...c]),style:{...i,pointerEvents:u},...a},t)}function LI({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:re.createElement(Js,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},re.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const $I=({x:e,y:t,label:n,labelStyle:i={},labelShowBg:a=!0,labelBgStyle:u={},labelBgPadding:c=[2,4],labelBgBorderRadius:f=2,children:h,className:p,...m})=>{const y=k.useRef(null),[x,b]=k.useState({x:0,y:0,width:0,height:0}),N=Sn(["react-flow__edge-textwrapper",p]);return k.useEffect(()=>{if(y.current){const S=y.current.getBBox();b({x:S.x,y:S.y,width:S.width,height:S.height})}},[n]),typeof n>"u"||!n?null:re.createElement("g",{transform:`translate(${e-x.width/2} ${t-x.height/2})`,className:N,visibility:x.width?"visible":"hidden",...m},a&&re.createElement("rect",{width:x.width+2*c[0],x:-c[0],y:-c[1],height:x.height+2*c[1],className:"react-flow__edge-textbg",style:u,rx:f,ry:f}),re.createElement("text",{className:"react-flow__edge-text",y:x.height/2,dy:"0.3em",ref:y,style:i},n),h)};var WI=k.memo($I);const ch=e=>({width:e.offsetWidth,height:e.offsetHeight}),Ua=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),lh=(e={x:0,y:0},t)=>({x:Ua(e.x,t[0][0],t[1][0]),y:Ua(e.y,t[0][1],t[1][1])}),ng=(e,t,n)=>e<t?Ua(Math.abs(e-t),1,50)/50:e>n?-Ua(Math.abs(e-n),1,50)/50:0,rv=(e,t)=>{const n=ng(e.x,35,t.width-35)*20,i=ng(e.y,35,t.height-35)*20;return[n,i]},iv=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},ov=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),eu=({x:e,y:t,width:n,height:i})=>({x:e,y:t,x2:e+n,y2:t+i}),av=({x:e,y:t,x2:n,y2:i})=>({x:e,y:t,width:n-e,height:i-t}),rg=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),FI=(e,t)=>av(ov(eu(e),eu(t))),hd=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),i=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*i)},jI=e=>wr(e.width)&&wr(e.height)&&wr(e.x)&&wr(e.y),wr=e=>!isNaN(e)&&isFinite(e),en=Symbol.for("internals"),sv=["Enter"," ","Escape"],BI=(e,t)=>{},HI=e=>"nativeEvent"in e;function pd(e){var a,u;const t=HI(e)?e.nativeEvent:e,n=((u=(a=t.composedPath)==null?void 0:a.call(t))==null?void 0:u[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const uv=e=>"clientX"in e,eo=(e,t)=>{var u,c;const n=uv(e),i=n?e.clientX:(u=e.touches)==null?void 0:u[0].clientX,a=n?e.clientY:(c=e.touches)==null?void 0:c[0].clientY;return{x:i-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}},Rc=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},fu=({id:e,path:t,labelX:n,labelY:i,label:a,labelStyle:u,labelShowBg:c,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:m,markerEnd:y,markerStart:x,interactionWidth:b=20})=>re.createElement(re.Fragment,null,re.createElement("path",{id:e,style:m,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:y,markerStart:x}),b&&re.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:b,className:"react-flow__edge-interaction"}),a&&wr(n)&&wr(i)?re.createElement(WI,{x:n,y:i,label:a,labelStyle:u,labelShowBg:c,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p}):null);fu.displayName="BaseEdge";function As(e,t,n){return n===void 0?n:i=>{const a=t().edges.find(u=>u.id===e);a&&n(i,{...a})}}function cv({sourceX:e,sourceY:t,targetX:n,targetY:i}){const a=Math.abs(n-e)/2,u=n<e?n+a:n-a,c=Math.abs(i-t)/2,f=i<t?i+c:i-c;return[u,f,a,c]}function lv({sourceX:e,sourceY:t,targetX:n,targetY:i,sourceControlX:a,sourceControlY:u,targetControlX:c,targetControlY:f}){const h=e*.125+a*.375+c*.375+n*.125,p=t*.125+u*.375+f*.375+i*.125,m=Math.abs(h-e),y=Math.abs(p-t);return[h,p,m,y]}var Go;(function(e){e.Strict="strict",e.Loose="loose"})(Go||(Go={}));var Ho;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Ho||(Ho={}));var tu;(function(e){e.Partial="partial",e.Full="full"})(tu||(tu={}));var Xi;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Xi||(Xi={}));var Mc;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Mc||(Mc={}));var Ue;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Ue||(Ue={}));function ig({pos:e,x1:t,y1:n,x2:i,y2:a}){return e===Ue.Left||e===Ue.Right?[.5*(t+i),n]:[t,.5*(n+a)]}function fv({sourceX:e,sourceY:t,sourcePosition:n=Ue.Bottom,targetX:i,targetY:a,targetPosition:u=Ue.Top}){const[c,f]=ig({pos:n,x1:e,y1:t,x2:i,y2:a}),[h,p]=ig({pos:u,x1:i,y1:a,x2:e,y2:t}),[m,y,x,b]=lv({sourceX:e,sourceY:t,targetX:i,targetY:a,sourceControlX:c,sourceControlY:f,targetControlX:h,targetControlY:p});return[`M${e},${t} C${c},${f} ${h},${p} ${i},${a}`,m,y,x,b]}const fh=k.memo(({sourceX:e,sourceY:t,targetX:n,targetY:i,sourcePosition:a=Ue.Bottom,targetPosition:u=Ue.Top,label:c,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:y,style:x,markerEnd:b,markerStart:N,interactionWidth:S})=>{const[C,M,z]=fv({sourceX:e,sourceY:t,sourcePosition:a,targetX:n,targetY:i,targetPosition:u});return re.createElement(fu,{path:C,labelX:M,labelY:z,label:c,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:y,style:x,markerEnd:b,markerStart:N,interactionWidth:S})});fh.displayName="SimpleBezierEdge";const og={[Ue.Left]:{x:-1,y:0},[Ue.Right]:{x:1,y:0},[Ue.Top]:{x:0,y:-1},[Ue.Bottom]:{x:0,y:1}},KI=({source:e,sourcePosition:t=Ue.Bottom,target:n})=>t===Ue.Left||t===Ue.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},ag=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function zI({source:e,sourcePosition:t=Ue.Bottom,target:n,targetPosition:i=Ue.Top,center:a,offset:u}){const c=og[t],f=og[i],h={x:e.x+c.x*u,y:e.y+c.y*u},p={x:n.x+f.x*u,y:n.y+f.y*u},m=KI({source:h,sourcePosition:t,target:p}),y=m.x!==0?"x":"y",x=m[y];let b=[],N,S;const C={x:0,y:0},M={x:0,y:0},[z,te,F,le]=cv({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(c[y]*f[y]===-1){N=a.x??z,S=a.y??te;const U=[{x:N,y:h.y},{x:N,y:p.y}],Q=[{x:h.x,y:S},{x:p.x,y:S}];c[y]===x?b=y==="x"?U:Q:b=y==="x"?Q:U}else{const U=[{x:h.x,y:p.y}],Q=[{x:p.x,y:h.y}];if(y==="x"?b=c.x===x?Q:U:b=c.y===x?U:Q,t===i){const ge=Math.abs(e[y]-n[y]);if(ge<=u){const R=Math.min(u-1,u-ge);c[y]===x?C[y]=(h[y]>e[y]?-1:1)*R:M[y]=(p[y]>n[y]?-1:1)*R}}if(t!==i){const ge=y==="x"?"y":"x",R=c[y]===f[ge],se=h[ge]>p[ge],Z=h[ge]<p[ge];(c[y]===1&&(!R&&se||R&&Z)||c[y]!==1&&(!R&&Z||R&&se))&&(b=y==="x"?U:Q)}const ne={x:h.x+C.x,y:h.y+C.y},J={x:p.x+M.x,y:p.y+M.y},Y=Math.max(Math.abs(ne.x-b[0].x),Math.abs(J.x-b[0].x)),ce=Math.max(Math.abs(ne.y-b[0].y),Math.abs(J.y-b[0].y));Y>=ce?(N=(ne.x+J.x)/2,S=b[0].y):(N=b[0].x,S=(ne.y+J.y)/2)}return[[e,{x:h.x+C.x,y:h.y+C.y},...b,{x:p.x+M.x,y:p.y+M.y},n],N,S,F,le]}function UI(e,t,n,i){const a=Math.min(ag(e,t)/2,ag(t,n)/2,i),{x:u,y:c}=t;if(e.x===u&&u===n.x||e.y===c&&c===n.y)return`L${u} ${c}`;if(e.y===c){const p=e.x<n.x?-1:1,m=e.y<n.y?1:-1;return`L ${u+a*p},${c}Q ${u},${c} ${u},${c+a*m}`}const f=e.x<n.x?1:-1,h=e.y<n.y?-1:1;return`L ${u},${c+a*h}Q ${u},${c} ${u+a*f},${c}`}function md({sourceX:e,sourceY:t,sourcePosition:n=Ue.Bottom,targetX:i,targetY:a,targetPosition:u=Ue.Top,borderRadius:c=5,centerX:f,centerY:h,offset:p=20}){const[m,y,x,b,N]=zI({source:{x:e,y:t},sourcePosition:n,target:{x:i,y:a},targetPosition:u,center:{x:f,y:h},offset:p});return[m.reduce((C,M,z)=>{let te="";return z>0&&z<m.length-1?te=UI(m[z-1],M,m[z+1],c):te=`${z===0?"M":"L"}${M.x} ${M.y}`,C+=te,C},""),y,x,b,N]}const tl=k.memo(({sourceX:e,sourceY:t,targetX:n,targetY:i,label:a,labelStyle:u,labelShowBg:c,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:m,sourcePosition:y=Ue.Bottom,targetPosition:x=Ue.Top,markerEnd:b,markerStart:N,pathOptions:S,interactionWidth:C})=>{const[M,z,te]=md({sourceX:e,sourceY:t,sourcePosition:y,targetX:n,targetY:i,targetPosition:x,borderRadius:S==null?void 0:S.borderRadius,offset:S==null?void 0:S.offset});return re.createElement(fu,{path:M,labelX:z,labelY:te,label:a,labelStyle:u,labelShowBg:c,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:m,markerEnd:b,markerStart:N,interactionWidth:C})});tl.displayName="SmoothStepEdge";const dh=k.memo(e=>{var t;return re.createElement(tl,{...e,pathOptions:k.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});dh.displayName="StepEdge";function YI({sourceX:e,sourceY:t,targetX:n,targetY:i}){const[a,u,c,f]=cv({sourceX:e,sourceY:t,targetX:n,targetY:i});return[`M ${e},${t}L ${n},${i}`,a,u,c,f]}const hh=k.memo(({sourceX:e,sourceY:t,targetX:n,targetY:i,label:a,labelStyle:u,labelShowBg:c,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:m,markerEnd:y,markerStart:x,interactionWidth:b})=>{const[N,S,C]=YI({sourceX:e,sourceY:t,targetX:n,targetY:i});return re.createElement(fu,{path:N,labelX:S,labelY:C,label:a,labelStyle:u,labelShowBg:c,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:m,markerEnd:y,markerStart:x,interactionWidth:b})});hh.displayName="StraightEdge";function dc(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function sg({pos:e,x1:t,y1:n,x2:i,y2:a,c:u}){switch(e){case Ue.Left:return[t-dc(t-i,u),n];case Ue.Right:return[t+dc(i-t,u),n];case Ue.Top:return[t,n-dc(n-a,u)];case Ue.Bottom:return[t,n+dc(a-n,u)]}}function dv({sourceX:e,sourceY:t,sourcePosition:n=Ue.Bottom,targetX:i,targetY:a,targetPosition:u=Ue.Top,curvature:c=.25}){const[f,h]=sg({pos:n,x1:e,y1:t,x2:i,y2:a,c}),[p,m]=sg({pos:u,x1:i,y1:a,x2:e,y2:t,c}),[y,x,b,N]=lv({sourceX:e,sourceY:t,targetX:i,targetY:a,sourceControlX:f,sourceControlY:h,targetControlX:p,targetControlY:m});return[`M${e},${t} C${f},${h} ${p},${m} ${i},${a}`,y,x,b,N]}const Lc=k.memo(({sourceX:e,sourceY:t,targetX:n,targetY:i,sourcePosition:a=Ue.Bottom,targetPosition:u=Ue.Top,label:c,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:y,style:x,markerEnd:b,markerStart:N,pathOptions:S,interactionWidth:C})=>{const[M,z,te]=dv({sourceX:e,sourceY:t,sourcePosition:a,targetX:n,targetY:i,targetPosition:u,curvature:S==null?void 0:S.curvature});return re.createElement(fu,{path:M,labelX:z,labelY:te,label:c,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:y,style:x,markerEnd:b,markerStart:N,interactionWidth:C})});Lc.displayName="BezierEdge";const ph=k.createContext(null),VI=ph.Provider;ph.Consumer;const qI=()=>k.useContext(ph),XI=e=>"id"in e&&"source"in e&&"target"in e,GI=({source:e,sourceHandle:t,target:n,targetHandle:i})=>`reactflow__edge-${e}${t||""}-${n}${i||""}`,gd=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(i=>`${i}=${e[i]}`).join("&")}`,ZI=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),QI=(e,t)=>{if(!e.source||!e.target)return t;let n;return XI(e)?n={...e}:n={...e,id:GI(e)},ZI(n,t)?t:t.concat(n)},vd=({x:e,y:t},[n,i,a],u,[c,f])=>{const h={x:(e-n)/a,y:(t-i)/a};return u?{x:c*Math.round(h.x/c),y:f*Math.round(h.y/f)}:h},hv=({x:e,y:t},[n,i,a])=>({x:e*a+n,y:t*a+i}),Yo=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],i=(e.height??0)*t[1],a={x:e.position.x-n,y:e.position.y-i};return{...a,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-i}:a}},nl=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((i,a)=>{const{x:u,y:c}=Yo(a,t).positionAbsolute;return ov(i,eu({x:u,y:c,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return av(n)},pv=(e,t,[n,i,a]=[0,0,1],u=!1,c=!1,f=[0,0])=>{const h={x:(t.x-n)/a,y:(t.y-i)/a,width:t.width/a,height:t.height/a},p=[];return e.forEach(m=>{const{width:y,height:x,selectable:b=!0,hidden:N=!1}=m;if(c&&!b||N)return!1;const{positionAbsolute:S}=Yo(m,f),C={x:S.x,y:S.y,width:y||0,height:x||0},M=hd(h,C),z=typeof y>"u"||typeof x>"u"||y===null||x===null,te=u&&M>0,F=(y||0)*(x||0);(z||te||M>=F||m.dragging)&&p.push(m)}),p},mv=(e,t)=>{const n=e.map(i=>i.id);return t.filter(i=>n.includes(i.source)||n.includes(i.target))},gv=(e,t,n,i,a,u=.1)=>{const c=t/(e.width*(1+u)),f=n/(e.height*(1+u)),h=Math.min(c,f),p=Ua(h,i,a),m=e.x+e.width/2,y=e.y+e.height/2,x=t/2-m*p,b=n/2-y*p;return{x,y:b,zoom:p}},Lo=(e,t=0)=>e.transition().duration(t);function ug(e,t,n,i){return(t[n]||[]).reduce((a,u)=>{var c,f;return`${e.id}-${u.id}-${n}`!==i&&a.push({id:u.id||null,type:n,nodeId:e.id,x:(((c=e.positionAbsolute)==null?void 0:c.x)??0)+u.x+u.width/2,y:(((f=e.positionAbsolute)==null?void 0:f.y)??0)+u.y+u.height/2}),a},[])}function JI(e,t,n,i,a,u){const{x:c,y:f}=eo(e),p=t.elementsFromPoint(c,f).find(N=>N.classList.contains("react-flow__handle"));if(p){const N=p.getAttribute("data-nodeid");if(N){const S=mh(void 0,p),C=p.getAttribute("data-handleid"),M=u({nodeId:N,id:C,type:S});if(M){const z=a.find(te=>te.nodeId===N&&te.type===S&&te.id===C);return{handle:{id:C,type:S,nodeId:N,x:(z==null?void 0:z.x)||n.x,y:(z==null?void 0:z.y)||n.y},validHandleResult:M}}}}let m=[],y=1/0;if(a.forEach(N=>{const S=Math.sqrt((N.x-n.x)**2+(N.y-n.y)**2);if(S<=i){const C=u(N);S<=y&&(S<y?m=[{handle:N,validHandleResult:C}]:S===y&&m.push({handle:N,validHandleResult:C}),y=S)}}),!m.length)return{handle:null,validHandleResult:vv()};if(m.length===1)return m[0];const x=m.some(({validHandleResult:N})=>N.isValid),b=m.some(({handle:N})=>N.type==="target");return m.find(({handle:N,validHandleResult:S})=>b?N.type==="target":x?S.isValid:!0)||m[0]}const eC={source:null,target:null,sourceHandle:null,targetHandle:null},vv=()=>({handleDomNode:null,isValid:!1,connection:eC,endHandle:null});function yv(e,t,n,i,a,u,c){const f=a==="target",h=c.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),p={...vv(),handleDomNode:h};if(h){const m=mh(void 0,h),y=h.getAttribute("data-nodeid"),x=h.getAttribute("data-handleid"),b=h.classList.contains("connectable"),N=h.classList.contains("connectableend"),S={source:f?y:n,sourceHandle:f?x:i,target:f?n:y,targetHandle:f?i:x};p.connection=S,b&&N&&(t===Go.Strict?f&&m==="source"||!f&&m==="target":y!==n||x!==i)&&(p.endHandle={nodeId:y,handleId:x,type:m},p.isValid=u(S))}return p}function tC({nodes:e,nodeId:t,handleId:n,handleType:i}){return e.reduce((a,u)=>{if(u[en]){const{handleBounds:c}=u[en];let f=[],h=[];c&&(f=ug(u,c,"source",`${t}-${n}-${i}`),h=ug(u,c,"target",`${t}-${n}-${i}`)),a.push(...f,...h)}return a},[])}function mh(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Rf(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function nC(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function wv({event:e,handleId:t,nodeId:n,onConnect:i,isTarget:a,getState:u,setState:c,isValidConnection:f,edgeUpdaterType:h,onReconnectEnd:p}){const m=iv(e.target),{connectionMode:y,domNode:x,autoPanOnConnect:b,connectionRadius:N,onConnectStart:S,panBy:C,getNodes:M,cancelConnection:z}=u();let te=0,F;const{x:le,y:ae}=eo(e),U=m==null?void 0:m.elementFromPoint(le,ae),Q=mh(h,U),ne=x==null?void 0:x.getBoundingClientRect();if(!ne||!Q)return;let J,Y=eo(e,ne),ce=!1,ge=null,R=!1,se=null;const Z=tC({nodes:M(),nodeId:n,handleId:t,handleType:Q}),ye=()=>{if(!b)return;const[ie,ue]=rv(Y,ne);C({x:ie,y:ue}),te=requestAnimationFrame(ye)};c({connectionPosition:Y,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:Q,connectionStartHandle:{nodeId:n,handleId:t,type:Q},connectionEndHandle:null}),S==null||S(e,{nodeId:n,handleId:t,handleType:Q});function pe(ie){const{transform:ue}=u();Y=eo(ie,ne);const{handle:we,validHandleResult:ke}=JI(ie,m,vd(Y,ue,!1,[1,1]),N,Z,Me=>yv(Me,y,n,t,a?"target":"source",f,m));if(F=we,ce||(ye(),ce=!0),se=ke.handleDomNode,ge=ke.connection,R=ke.isValid,c({connectionPosition:F&&R?hv({x:F.x,y:F.y},ue):Y,connectionStatus:nC(!!F,R),connectionEndHandle:ke.endHandle}),!F&&!R&&!se)return Rf(J);ge.source!==ge.target&&se&&(Rf(J),J=se,se.classList.add("connecting","react-flow__handle-connecting"),se.classList.toggle("valid",R),se.classList.toggle("react-flow__handle-valid",R))}function W(ie){var ue,we;(F||se)&&ge&&R&&(i==null||i(ge)),(we=(ue=u()).onConnectEnd)==null||we.call(ue,ie),h&&(p==null||p(ie)),Rf(J),z(),cancelAnimationFrame(te),ce=!1,R=!1,ge=null,se=null,m.removeEventListener("mousemove",pe),m.removeEventListener("mouseup",W),m.removeEventListener("touchmove",pe),m.removeEventListener("touchend",W)}m.addEventListener("mousemove",pe),m.addEventListener("mouseup",W),m.addEventListener("touchmove",pe),m.addEventListener("touchend",W)}const cg=()=>!0,rC=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),iC=(e,t,n)=>i=>{const{connectionStartHandle:a,connectionEndHandle:u,connectionClickStartHandle:c}=i;return{connecting:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.handleId)===t&&(a==null?void 0:a.type)===n||(u==null?void 0:u.nodeId)===e&&(u==null?void 0:u.handleId)===t&&(u==null?void 0:u.type)===n,clickConnecting:(c==null?void 0:c.nodeId)===e&&(c==null?void 0:c.handleId)===t&&(c==null?void 0:c.type)===n}},xv=k.forwardRef(({type:e="source",position:t=Ue.Top,isValidConnection:n,isConnectable:i=!0,isConnectableStart:a=!0,isConnectableEnd:u=!0,id:c,onConnect:f,children:h,className:p,onMouseDown:m,onTouchStart:y,...x},b)=>{var ne,J;const N=c||null,S=e==="target",C=mn(),M=qI(),{connectOnClick:z,noPanClassName:te}=Mt(rC,qn),{connecting:F,clickConnecting:le}=Mt(iC(M,N,e),qn);M||(J=(ne=C.getState()).onError)==null||J.call(ne,"010",Si.error010());const ae=Y=>{const{defaultEdgeOptions:ce,onConnect:ge,hasDefaultEdges:R}=C.getState(),se={...ce,...Y};if(R){const{edges:Z,setEdges:ye}=C.getState();ye(QI(se,Z))}ge==null||ge(se),f==null||f(se)},U=Y=>{if(!M)return;const ce=uv(Y);a&&(ce&&Y.button===0||!ce)&&wv({event:Y,handleId:N,nodeId:M,onConnect:ae,isTarget:S,getState:C.getState,setState:C.setState,isValidConnection:n||C.getState().isValidConnection||cg}),ce?m==null||m(Y):y==null||y(Y)},Q=Y=>{const{onClickConnectStart:ce,onClickConnectEnd:ge,connectionClickStartHandle:R,connectionMode:se,isValidConnection:Z}=C.getState();if(!M||!R&&!a)return;if(!R){ce==null||ce(Y,{nodeId:M,handleId:N,handleType:e}),C.setState({connectionClickStartHandle:{nodeId:M,type:e,handleId:N}});return}const ye=iv(Y.target),pe=n||Z||cg,{connection:W,isValid:ie}=yv({nodeId:M,id:N,type:e},se,R.nodeId,R.handleId||null,R.type,pe,ye);ie&&ae(W),ge==null||ge(Y),C.setState({connectionClickStartHandle:null})};return re.createElement("div",{"data-handleid":N,"data-nodeid":M,"data-handlepos":t,"data-id":`${M}-${N}-${e}`,className:Sn(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",te,p,{source:!S,target:S,connectable:i,connectablestart:a,connectableend:u,connecting:le,connectionindicator:i&&(a&&!F||u&&F)}]),onMouseDown:U,onTouchStart:U,onClick:z?Q:void 0,ref:b,...x},h)});xv.displayName="Handle";var Zi=k.memo(xv);const bv=({data:e,isConnectable:t,targetPosition:n=Ue.Top,sourcePosition:i=Ue.Bottom})=>re.createElement(re.Fragment,null,re.createElement(Zi,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,re.createElement(Zi,{type:"source",position:i,isConnectable:t}));bv.displayName="DefaultNode";var yd=k.memo(bv);const _v=({data:e,isConnectable:t,sourcePosition:n=Ue.Bottom})=>re.createElement(re.Fragment,null,e==null?void 0:e.label,re.createElement(Zi,{type:"source",position:n,isConnectable:t}));_v.displayName="InputNode";var Ev=k.memo(_v);const Sv=({data:e,isConnectable:t,targetPosition:n=Ue.Top})=>re.createElement(re.Fragment,null,re.createElement(Zi,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);Sv.displayName="OutputNode";var Tv=k.memo(Sv);const gh=()=>null;gh.displayName="GroupNode";const oC=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),hc=e=>e.id;function aC(e,t){return qn(e.selectedNodes.map(hc),t.selectedNodes.map(hc))&&qn(e.selectedEdges.map(hc),t.selectedEdges.map(hc))}const Nv=k.memo(({onSelectionChange:e})=>{const t=mn(),{selectedNodes:n,selectedEdges:i}=Mt(oC,aC);return k.useEffect(()=>{const a={nodes:n,edges:i};e==null||e(a),t.getState().onSelectionChange.forEach(u=>u(a))},[n,i,e]),null});Nv.displayName="SelectionListener";const sC=e=>!!e.onSelectionChange;function uC({onSelectionChange:e}){const t=Mt(sC);return e||t?re.createElement(Nv,{onSelectionChange:e}):null}const cC=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Ia(e,t){k.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function mt(e,t,n){k.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const lC=({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,onConnect:a,onConnectStart:u,onConnectEnd:c,onClickConnectStart:f,onClickConnectEnd:h,nodesDraggable:p,nodesConnectable:m,nodesFocusable:y,edgesFocusable:x,edgesUpdatable:b,elevateNodesOnSelect:N,minZoom:S,maxZoom:C,nodeExtent:M,onNodesChange:z,onEdgesChange:te,elementsSelectable:F,connectionMode:le,snapGrid:ae,snapToGrid:U,translateExtent:Q,connectOnClick:ne,defaultEdgeOptions:J,fitView:Y,fitViewOptions:ce,onNodesDelete:ge,onEdgesDelete:R,onNodeDrag:se,onNodeDragStart:Z,onNodeDragStop:ye,onSelectionDrag:pe,onSelectionDragStart:W,onSelectionDragStop:ie,noPanClassName:ue,nodeOrigin:we,rfId:ke,autoPanOnConnect:Me,autoPanOnNodeDrag:Re,onError:je,connectionRadius:Ye,isValidConnection:qe,nodeDragThreshold:Se})=>{const{setNodes:rt,setEdges:xt,setDefaultNodesAndEdges:He,setMinZoom:Tt,setMaxZoom:Xe,setTranslateExtent:it,setNodeExtent:St,reset:et}=Mt(cC,qn),Be=mn();return k.useEffect(()=>{const Ft=i==null?void 0:i.map(jt=>({...jt,...J}));return He(n,Ft),()=>{et()}},[]),mt("defaultEdgeOptions",J,Be.setState),mt("connectionMode",le,Be.setState),mt("onConnect",a,Be.setState),mt("onConnectStart",u,Be.setState),mt("onConnectEnd",c,Be.setState),mt("onClickConnectStart",f,Be.setState),mt("onClickConnectEnd",h,Be.setState),mt("nodesDraggable",p,Be.setState),mt("nodesConnectable",m,Be.setState),mt("nodesFocusable",y,Be.setState),mt("edgesFocusable",x,Be.setState),mt("edgesUpdatable",b,Be.setState),mt("elementsSelectable",F,Be.setState),mt("elevateNodesOnSelect",N,Be.setState),mt("snapToGrid",U,Be.setState),mt("snapGrid",ae,Be.setState),mt("onNodesChange",z,Be.setState),mt("onEdgesChange",te,Be.setState),mt("connectOnClick",ne,Be.setState),mt("fitViewOnInit",Y,Be.setState),mt("fitViewOnInitOptions",ce,Be.setState),mt("onNodesDelete",ge,Be.setState),mt("onEdgesDelete",R,Be.setState),mt("onNodeDrag",se,Be.setState),mt("onNodeDragStart",Z,Be.setState),mt("onNodeDragStop",ye,Be.setState),mt("onSelectionDrag",pe,Be.setState),mt("onSelectionDragStart",W,Be.setState),mt("onSelectionDragStop",ie,Be.setState),mt("noPanClassName",ue,Be.setState),mt("nodeOrigin",we,Be.setState),mt("rfId",ke,Be.setState),mt("autoPanOnConnect",Me,Be.setState),mt("autoPanOnNodeDrag",Re,Be.setState),mt("onError",je,Be.setState),mt("connectionRadius",Ye,Be.setState),mt("isValidConnection",qe,Be.setState),mt("nodeDragThreshold",Se,Be.setState),Ia(e,rt),Ia(t,xt),Ia(S,Tt),Ia(C,Xe),Ia(Q,it),Ia(M,St),null},lg={display:"none"},fC={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},kv="react-flow__node-desc",Iv="react-flow__edge-desc",dC="react-flow__aria-live",hC=e=>e.ariaLiveMessage;function pC({rfId:e}){const t=Mt(hC);return re.createElement("div",{id:`${dC}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:fC},t)}function mC({rfId:e,disableKeyboardA11y:t}){return re.createElement(re.Fragment,null,re.createElement("div",{id:`${kv}-${e}`,style:lg},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),re.createElement("div",{id:`${Iv}-${e}`,style:lg},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&re.createElement(pC,{rfId:e}))}var nu=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,i]=k.useState(!1),a=k.useRef(!1),u=k.useRef(new Set([])),[c,f]=k.useMemo(()=>{if(e!==null){const p=(Array.isArray(e)?e:[e]).filter(y=>typeof y=="string").map(y=>y.split("+")),m=p.reduce((y,x)=>y.concat(...x),[]);return[p,m]}return[[],[]]},[e]);return k.useEffect(()=>{const h=typeof document<"u"?document:null,p=(t==null?void 0:t.target)||h;if(e!==null){const m=b=>{if(a.current=b.ctrlKey||b.metaKey||b.shiftKey,(!a.current||a.current&&!t.actInsideInputWithModifier)&&pd(b))return!1;const S=dg(b.code,f);u.current.add(b[S]),fg(c,u.current,!1)&&(b.preventDefault(),i(!0))},y=b=>{if((!a.current||a.current&&!t.actInsideInputWithModifier)&&pd(b))return!1;const S=dg(b.code,f);fg(c,u.current,!0)?(i(!1),u.current.clear()):u.current.delete(b[S]),b.key==="Meta"&&u.current.clear(),a.current=!1},x=()=>{u.current.clear(),i(!1)};return p==null||p.addEventListener("keydown",m),p==null||p.addEventListener("keyup",y),window.addEventListener("blur",x),()=>{p==null||p.removeEventListener("keydown",m),p==null||p.removeEventListener("keyup",y),window.removeEventListener("blur",x)}}},[e,i]),n};function fg(e,t,n){return e.filter(i=>n||i.length===t.size).some(i=>i.every(a=>t.has(a)))}function dg(e,t){return t.includes(e)?"code":"key"}function Cv(e,t,n,i){var f,h;const a=e.parentNode||e.parentId;if(!a)return n;const u=t.get(a),c=Yo(u,i);return Cv(u,t,{x:(n.x??0)+c.x,y:(n.y??0)+c.y,z:(((f=u[en])==null?void 0:f.z)??0)>(n.z??0)?((h=u[en])==null?void 0:h.z)??0:n.z??0},i)}function Ov(e,t,n){e.forEach(i=>{var u;const a=i.parentNode||i.parentId;if(a&&!e.has(a))throw new Error(`Parent node ${a} not found`);if(a||n!=null&&n[i.id]){const{x:c,y:f,z:h}=Cv(i,e,{...i.position,z:((u=i[en])==null?void 0:u.z)??0},t);i.positionAbsolute={x:c,y:f},i[en].z=h,n!=null&&n[i.id]&&(i[en].isParent=!0)}})}function Mf(e,t,n,i){const a=new Map,u={},c=i?1e3:0;return e.forEach(f=>{var b;const h=(wr(f.zIndex)?f.zIndex:0)+(f.selected?c:0),p=t.get(f.id),m={...f,positionAbsolute:{x:f.position.x,y:f.position.y}},y=f.parentNode||f.parentId;y&&(u[y]=!0);const x=(p==null?void 0:p.type)&&(p==null?void 0:p.type)!==f.type;Object.defineProperty(m,en,{enumerable:!1,value:{handleBounds:x||(b=p==null?void 0:p[en])==null?void 0:b.handleBounds,z:h}}),a.set(f.id,m)}),Ov(a,n,u),a}function Av(e,t={}){const{getNodes:n,width:i,height:a,minZoom:u,maxZoom:c,d3Zoom:f,d3Selection:h,fitViewOnInitDone:p,fitViewOnInit:m,nodeOrigin:y}=e(),x=t.initial&&!p&&m;if(f&&h&&(x||!t.initial)){const N=n().filter(C=>{var z;const M=t.includeHiddenNodes?C.width&&C.height:!C.hidden;return(z=t.nodes)!=null&&z.length?M&&t.nodes.some(te=>te.id===C.id):M}),S=N.every(C=>C.width&&C.height);if(N.length>0&&S){const C=nl(N,y),{x:M,y:z,zoom:te}=gv(C,i,a,t.minZoom??u,t.maxZoom??c,t.padding??.1),F=xi.translate(M,z).scale(te);return typeof t.duration=="number"&&t.duration>0?f.transform(Lo(h,t.duration),F):f.transform(h,F),!0}}return!1}function gC(e,t){return e.forEach(n=>{const i=t.get(n.id);i&&t.set(i.id,{...i,[en]:i[en],selected:n.selected})}),new Map(t)}function vC(e,t){return t.map(n=>{const i=e.find(a=>a.id===n.id);return i&&(n.selected=i.selected),n})}function pc({changedNodes:e,changedEdges:t,get:n,set:i}){const{nodeInternals:a,edges:u,onNodesChange:c,onEdgesChange:f,hasDefaultNodes:h,hasDefaultEdges:p}=n();e!=null&&e.length&&(h&&i({nodeInternals:gC(e,a)}),c==null||c(e)),t!=null&&t.length&&(p&&i({edges:vC(t,u)}),f==null||f(t))}const Ca=()=>{},yC={zoomIn:Ca,zoomOut:Ca,zoomTo:Ca,getZoom:()=>1,setViewport:Ca,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Ca,fitBounds:Ca,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},wC=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),xC=()=>{const e=mn(),{d3Zoom:t,d3Selection:n}=Mt(wC,qn);return k.useMemo(()=>n&&t?{zoomIn:a=>t.scaleBy(Lo(n,a==null?void 0:a.duration),1.2),zoomOut:a=>t.scaleBy(Lo(n,a==null?void 0:a.duration),1/1.2),zoomTo:(a,u)=>t.scaleTo(Lo(n,u==null?void 0:u.duration),a),getZoom:()=>e.getState().transform[2],setViewport:(a,u)=>{const[c,f,h]=e.getState().transform,p=xi.translate(a.x??c,a.y??f).scale(a.zoom??h);t.transform(Lo(n,u==null?void 0:u.duration),p)},getViewport:()=>{const[a,u,c]=e.getState().transform;return{x:a,y:u,zoom:c}},fitView:a=>Av(e.getState,a),setCenter:(a,u,c)=>{const{width:f,height:h,maxZoom:p}=e.getState(),m=typeof(c==null?void 0:c.zoom)<"u"?c.zoom:p,y=f/2-a*m,x=h/2-u*m,b=xi.translate(y,x).scale(m);t.transform(Lo(n,c==null?void 0:c.duration),b)},fitBounds:(a,u)=>{const{width:c,height:f,minZoom:h,maxZoom:p}=e.getState(),{x:m,y,zoom:x}=gv(a,c,f,h,p,(u==null?void 0:u.padding)??.1),b=xi.translate(m,y).scale(x);t.transform(Lo(n,u==null?void 0:u.duration),b)},project:a=>{const{transform:u,snapToGrid:c,snapGrid:f}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),vd(a,u,c,f)},screenToFlowPosition:a=>{const{transform:u,snapToGrid:c,snapGrid:f,domNode:h}=e.getState();if(!h)return a;const{x:p,y:m}=h.getBoundingClientRect(),y={x:a.x-p,y:a.y-m};return vd(y,u,c,f)},flowToScreenPosition:a=>{const{transform:u,domNode:c}=e.getState();if(!c)return a;const{x:f,y:h}=c.getBoundingClientRect(),p=hv(a,u);return{x:p.x+f,y:p.y+h}},viewportInitialized:!0}:yC,[t,n])};function vh(){const e=xC(),t=mn(),n=k.useCallback(()=>t.getState().getNodes().map(S=>({...S})),[]),i=k.useCallback(S=>t.getState().nodeInternals.get(S),[]),a=k.useCallback(()=>{const{edges:S=[]}=t.getState();return S.map(C=>({...C}))},[]),u=k.useCallback(S=>{const{edges:C=[]}=t.getState();return C.find(M=>M.id===S)},[]),c=k.useCallback(S=>{const{getNodes:C,setNodes:M,hasDefaultNodes:z,onNodesChange:te}=t.getState(),F=C(),le=typeof S=="function"?S(F):S;if(z)M(le);else if(te){const ae=le.length===0?F.map(U=>({type:"remove",id:U.id})):le.map(U=>({item:U,type:"reset"}));te(ae)}},[]),f=k.useCallback(S=>{const{edges:C=[],setEdges:M,hasDefaultEdges:z,onEdgesChange:te}=t.getState(),F=typeof S=="function"?S(C):S;if(z)M(F);else if(te){const le=F.length===0?C.map(ae=>({type:"remove",id:ae.id})):F.map(ae=>({item:ae,type:"reset"}));te(le)}},[]),h=k.useCallback(S=>{const C=Array.isArray(S)?S:[S],{getNodes:M,setNodes:z,hasDefaultNodes:te,onNodesChange:F}=t.getState();if(te){const ae=[...M(),...C];z(ae)}else if(F){const le=C.map(ae=>({item:ae,type:"add"}));F(le)}},[]),p=k.useCallback(S=>{const C=Array.isArray(S)?S:[S],{edges:M=[],setEdges:z,hasDefaultEdges:te,onEdgesChange:F}=t.getState();if(te)z([...M,...C]);else if(F){const le=C.map(ae=>({item:ae,type:"add"}));F(le)}},[]),m=k.useCallback(()=>{const{getNodes:S,edges:C=[],transform:M}=t.getState(),[z,te,F]=M;return{nodes:S().map(le=>({...le})),edges:C.map(le=>({...le})),viewport:{x:z,y:te,zoom:F}}},[]),y=k.useCallback(({nodes:S,edges:C})=>{const{nodeInternals:M,getNodes:z,edges:te,hasDefaultNodes:F,hasDefaultEdges:le,onNodesDelete:ae,onEdgesDelete:U,onNodesChange:Q,onEdgesChange:ne}=t.getState(),J=(S||[]).map(se=>se.id),Y=(C||[]).map(se=>se.id),ce=z().reduce((se,Z)=>{const ye=Z.parentNode||Z.parentId,pe=!J.includes(Z.id)&&ye&&se.find(ie=>ie.id===ye);return(typeof Z.deletable=="boolean"?Z.deletable:!0)&&(J.includes(Z.id)||pe)&&se.push(Z),se},[]),ge=te.filter(se=>typeof se.deletable=="boolean"?se.deletable:!0),R=ge.filter(se=>Y.includes(se.id));if(ce||R){const se=mv(ce,ge),Z=[...R,...se],ye=Z.reduce((pe,W)=>(pe.includes(W.id)||pe.push(W.id),pe),[]);if((le||F)&&(le&&t.setState({edges:te.filter(pe=>!ye.includes(pe.id))}),F&&(ce.forEach(pe=>{M.delete(pe.id)}),t.setState({nodeInternals:new Map(M)}))),ye.length>0&&(U==null||U(Z),ne&&ne(ye.map(pe=>({id:pe,type:"remove"})))),ce.length>0&&(ae==null||ae(ce),Q)){const pe=ce.map(W=>({id:W.id,type:"remove"}));Q(pe)}}},[]),x=k.useCallback(S=>{const C=jI(S),M=C?null:t.getState().nodeInternals.get(S.id);return!C&&!M?[null,null,C]:[C?S:rg(M),M,C]},[]),b=k.useCallback((S,C=!0,M)=>{const[z,te,F]=x(S);return z?(M||t.getState().getNodes()).filter(le=>{if(!F&&(le.id===te.id||!le.positionAbsolute))return!1;const ae=rg(le),U=hd(ae,z);return C&&U>0||U>=z.width*z.height}):[]},[]),N=k.useCallback((S,C,M=!0)=>{const[z]=x(S);if(!z)return!1;const te=hd(z,C);return M&&te>0||te>=z.width*z.height},[]);return k.useMemo(()=>({...e,getNodes:n,getNode:i,getEdges:a,getEdge:u,setNodes:c,setEdges:f,addNodes:h,addEdges:p,toObject:m,deleteElements:y,getIntersectingNodes:b,isNodeIntersecting:N}),[e,n,i,a,u,c,f,h,p,m,y,b,N])}const bC={actInsideInputWithModifier:!1};var _C=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=mn(),{deleteElements:i}=vh(),a=nu(e,bC),u=nu(t);k.useEffect(()=>{if(a){const{edges:c,getNodes:f}=n.getState(),h=f().filter(m=>m.selected),p=c.filter(m=>m.selected);i({nodes:h,edges:p}),n.setState({nodesSelectionActive:!1})}},[a]),k.useEffect(()=>{n.setState({multiSelectionActive:u})},[u])};function EC(e){const t=mn();k.useEffect(()=>{let n;const i=()=>{var u,c;if(!e.current)return;const a=ch(e.current);(a.height===0||a.width===0)&&((c=(u=t.getState()).onError)==null||c.call(u,"004",Si.error004())),t.setState({width:a.width||500,height:a.height||500})};return i(),window.addEventListener("resize",i),e.current&&(n=new ResizeObserver(()=>i()),n.observe(e.current)),()=>{window.removeEventListener("resize",i),n&&e.current&&n.unobserve(e.current)}},[])}const yh={position:"absolute",width:"100%",height:"100%",top:0,left:0},SC=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,mc=e=>({x:e.x,y:e.y,zoom:e.k}),Oa=(e,t)=>e.target.closest(`.${t}`),hg=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),pg=e=>{const t=e.ctrlKey&&Rc()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},TC=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),NC=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:i,zoomOnScroll:a=!0,zoomOnPinch:u=!0,panOnScroll:c=!1,panOnScrollSpeed:f=.5,panOnScrollMode:h=Ho.Free,zoomOnDoubleClick:p=!0,elementsSelectable:m,panOnDrag:y=!0,defaultViewport:x,translateExtent:b,minZoom:N,maxZoom:S,zoomActivationKeyCode:C,preventScrolling:M=!0,children:z,noWheelClassName:te,noPanClassName:F})=>{const le=k.useRef(),ae=mn(),U=k.useRef(!1),Q=k.useRef(!1),ne=k.useRef(null),J=k.useRef({x:0,y:0,zoom:0}),{d3Zoom:Y,d3Selection:ce,d3ZoomHandler:ge,userSelectionActive:R}=Mt(TC,qn),se=nu(C),Z=k.useRef(0),ye=k.useRef(!1),pe=k.useRef();return EC(ne),k.useEffect(()=>{if(ne.current){const W=ne.current.getBoundingClientRect(),ie=tv().scaleExtent([N,S]).translateExtent(b),ue=vr(ne.current).call(ie),we=xi.translate(x.x,x.y).scale(Ua(x.zoom,N,S)),ke=[[0,0],[W.width,W.height]],Me=ie.constrain()(we,ke,b);ie.transform(ue,Me),ie.wheelDelta(pg),ae.setState({d3Zoom:ie,d3Selection:ue,d3ZoomHandler:ue.on("wheel.zoom"),transform:[Me.x,Me.y,Me.k],domNode:ne.current.closest(".react-flow")})}},[]),k.useEffect(()=>{ce&&Y&&(c&&!se&&!R?ce.on("wheel.zoom",W=>{if(Oa(W,te))return!1;W.preventDefault(),W.stopImmediatePropagation();const ie=ce.property("__zoom").k||1;if(W.ctrlKey&&u){const qe=Mr(W),Se=pg(W),rt=ie*Math.pow(2,Se);Y.scaleTo(ce,rt,qe,W);return}const ue=W.deltaMode===1?20:1;let we=h===Ho.Vertical?0:W.deltaX*ue,ke=h===Ho.Horizontal?0:W.deltaY*ue;!Rc()&&W.shiftKey&&h!==Ho.Vertical&&(we=W.deltaY*ue,ke=0),Y.translateBy(ce,-(we/ie)*f,-(ke/ie)*f,{internal:!0});const Me=mc(ce.property("__zoom")),{onViewportChangeStart:Re,onViewportChange:je,onViewportChangeEnd:Ye}=ae.getState();clearTimeout(pe.current),ye.current||(ye.current=!0,t==null||t(W,Me),Re==null||Re(Me)),ye.current&&(e==null||e(W,Me),je==null||je(Me),pe.current=setTimeout(()=>{n==null||n(W,Me),Ye==null||Ye(Me),ye.current=!1},150))},{passive:!1}):typeof ge<"u"&&ce.on("wheel.zoom",function(W,ie){if(!M&&W.type==="wheel"&&!W.ctrlKey||Oa(W,te))return null;W.preventDefault(),ge.call(this,W,ie)},{passive:!1}))},[R,c,h,ce,Y,ge,se,u,M,te,t,e,n]),k.useEffect(()=>{Y&&Y.on("start",W=>{var we,ke;if(!W.sourceEvent||W.sourceEvent.internal)return null;Z.current=(we=W.sourceEvent)==null?void 0:we.button;const{onViewportChangeStart:ie}=ae.getState(),ue=mc(W.transform);U.current=!0,J.current=ue,((ke=W.sourceEvent)==null?void 0:ke.type)==="mousedown"&&ae.setState({paneDragging:!0}),ie==null||ie(ue),t==null||t(W.sourceEvent,ue)})},[Y,t]),k.useEffect(()=>{Y&&(R&&!U.current?Y.on("zoom",null):R||Y.on("zoom",W=>{var ue;const{onViewportChange:ie}=ae.getState();if(ae.setState({transform:[W.transform.x,W.transform.y,W.transform.k]}),Q.current=!!(i&&hg(y,Z.current??0)),(e||ie)&&!((ue=W.sourceEvent)!=null&&ue.internal)){const we=mc(W.transform);ie==null||ie(we),e==null||e(W.sourceEvent,we)}}))},[R,Y,e,y,i]),k.useEffect(()=>{Y&&Y.on("end",W=>{if(!W.sourceEvent||W.sourceEvent.internal)return null;const{onViewportChangeEnd:ie}=ae.getState();if(U.current=!1,ae.setState({paneDragging:!1}),i&&hg(y,Z.current??0)&&!Q.current&&i(W.sourceEvent),Q.current=!1,(n||ie)&&SC(J.current,W.transform)){const ue=mc(W.transform);J.current=ue,clearTimeout(le.current),le.current=setTimeout(()=>{ie==null||ie(ue),n==null||n(W.sourceEvent,ue)},c?150:0)}})},[Y,c,y,n,i]),k.useEffect(()=>{Y&&Y.filter(W=>{const ie=se||a,ue=u&&W.ctrlKey;if((y===!0||Array.isArray(y)&&y.includes(1))&&W.button===1&&W.type==="mousedown"&&(Oa(W,"react-flow__node")||Oa(W,"react-flow__edge")))return!0;if(!y&&!ie&&!c&&!p&&!u||R||!p&&W.type==="dblclick"||Oa(W,te)&&W.type==="wheel"||Oa(W,F)&&(W.type!=="wheel"||c&&W.type==="wheel"&&!se)||!u&&W.ctrlKey&&W.type==="wheel"||!ie&&!c&&!ue&&W.type==="wheel"||!y&&(W.type==="mousedown"||W.type==="touchstart")||Array.isArray(y)&&!y.includes(W.button)&&W.type==="mousedown")return!1;const we=Array.isArray(y)&&y.includes(W.button)||!W.button||W.button<=1;return(!W.ctrlKey||W.type==="wheel")&&we})},[R,Y,a,u,c,p,y,m,se]),re.createElement("div",{className:"react-flow__renderer",ref:ne,style:yh},z)},kC=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function IC(){const{userSelectionActive:e,userSelectionRect:t}=Mt(kC,qn);return e&&t?re.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function mg(e,t){const n=t.parentNode||t.parentId,i=e.find(a=>a.id===n);if(i){const a=t.position.x+t.width-i.width,u=t.position.y+t.height-i.height;if(a>0||u>0||t.position.x<0||t.position.y<0){if(i.style={...i.style},i.style.width=i.style.width??i.width,i.style.height=i.style.height??i.height,a>0&&(i.style.width+=a),u>0&&(i.style.height+=u),t.position.x<0){const c=Math.abs(t.position.x);i.position.x=i.position.x-c,i.style.width+=c,t.position.x=0}if(t.position.y<0){const c=Math.abs(t.position.y);i.position.y=i.position.y-c,i.style.height+=c,t.position.y=0}i.width=i.style.width,i.height=i.style.height}}}function CC(e,t){if(e.some(i=>i.type==="reset"))return e.filter(i=>i.type==="reset").map(i=>i.item);const n=e.filter(i=>i.type==="add").map(i=>i.item);return t.reduce((i,a)=>{const u=e.filter(f=>f.id===a.id);if(u.length===0)return i.push(a),i;const c={...a};for(const f of u)if(f)switch(f.type){case"select":{c.selected=f.selected;break}case"position":{typeof f.position<"u"&&(c.position=f.position),typeof f.positionAbsolute<"u"&&(c.positionAbsolute=f.positionAbsolute),typeof f.dragging<"u"&&(c.dragging=f.dragging),c.expandParent&&mg(i,c);break}case"dimensions":{typeof f.dimensions<"u"&&(c.width=f.dimensions.width,c.height=f.dimensions.height),typeof f.updateStyle<"u"&&(c.style={...c.style||{},...f.dimensions}),typeof f.resizing=="boolean"&&(c.resizing=f.resizing),c.expandParent&&mg(i,c);break}case"remove":return i}return i.push(c),i},n)}function OC(e,t){return CC(e,t)}const qi=(e,t)=>({id:e,type:"select",selected:t});function Pa(e,t){return e.reduce((n,i)=>{const a=t.includes(i.id);return!i.selected&&a?(i.selected=!0,n.push(qi(i.id,!0))):i.selected&&!a&&(i.selected=!1,n.push(qi(i.id,!1))),n},[])}const Lf=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},AC=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Dv=k.memo(({isSelecting:e,selectionMode:t=tu.Full,panOnDrag:n,onSelectionStart:i,onSelectionEnd:a,onPaneClick:u,onPaneContextMenu:c,onPaneScroll:f,onPaneMouseEnter:h,onPaneMouseMove:p,onPaneMouseLeave:m,children:y})=>{const x=k.useRef(null),b=mn(),N=k.useRef(0),S=k.useRef(0),C=k.useRef(),{userSelectionActive:M,elementsSelectable:z,dragging:te}=Mt(AC,qn),F=()=>{b.setState({userSelectionActive:!1,userSelectionRect:null}),N.current=0,S.current=0},le=ge=>{u==null||u(ge),b.getState().resetSelectedElements(),b.setState({nodesSelectionActive:!1})},ae=ge=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){ge.preventDefault();return}c==null||c(ge)},U=f?ge=>f(ge):void 0,Q=ge=>{const{resetSelectedElements:R,domNode:se}=b.getState();if(C.current=se==null?void 0:se.getBoundingClientRect(),!z||!e||ge.button!==0||ge.target!==x.current||!C.current)return;const{x:Z,y:ye}=eo(ge,C.current);R(),b.setState({userSelectionRect:{width:0,height:0,startX:Z,startY:ye,x:Z,y:ye}}),i==null||i(ge)},ne=ge=>{const{userSelectionRect:R,nodeInternals:se,edges:Z,transform:ye,onNodesChange:pe,onEdgesChange:W,nodeOrigin:ie,getNodes:ue}=b.getState();if(!e||!C.current||!R)return;b.setState({userSelectionActive:!0,nodesSelectionActive:!1});const we=eo(ge,C.current),ke=R.startX??0,Me=R.startY??0,Re={...R,x:we.x<ke?we.x:ke,y:we.y<Me?we.y:Me,width:Math.abs(we.x-ke),height:Math.abs(we.y-Me)},je=ue(),Ye=pv(se,Re,ye,t===tu.Partial,!0,ie),qe=mv(Ye,Z).map(rt=>rt.id),Se=Ye.map(rt=>rt.id);if(N.current!==Se.length){N.current=Se.length;const rt=Pa(je,Se);rt.length&&(pe==null||pe(rt))}if(S.current!==qe.length){S.current=qe.length;const rt=Pa(Z,qe);rt.length&&(W==null||W(rt))}b.setState({userSelectionRect:Re})},J=ge=>{if(ge.button!==0)return;const{userSelectionRect:R}=b.getState();!M&&R&&ge.target===x.current&&(le==null||le(ge)),b.setState({nodesSelectionActive:N.current>0}),F(),a==null||a(ge)},Y=ge=>{M&&(b.setState({nodesSelectionActive:N.current>0}),a==null||a(ge)),F()},ce=z&&(e||M);return re.createElement("div",{className:Sn(["react-flow__pane",{dragging:te,selection:e}]),onClick:ce?void 0:Lf(le,x),onContextMenu:Lf(ae,x),onWheel:Lf(U,x),onMouseEnter:ce?void 0:h,onMouseDown:ce?Q:void 0,onMouseMove:ce?ne:p,onMouseUp:ce?J:void 0,onMouseLeave:ce?Y:m,ref:x,style:yh},y,re.createElement(IC,null))});Dv.displayName="Pane";function Pv(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const i=t.get(n);return i?i.selected?!0:Pv(i,t):!1}function gg(e,t,n){let i=e;do{if(i!=null&&i.matches(t))return!0;if(i===n.current)return!1;i=i.parentElement}while(i);return!1}function DC(e,t,n,i){return Array.from(e.values()).filter(a=>(a.selected||a.id===i)&&(!a.parentNode||a.parentId||!Pv(a,e))&&(a.draggable||t&&typeof a.draggable>"u")).map(a=>{var u,c;return{id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((u=a.positionAbsolute)==null?void 0:u.x)??0),y:n.y-(((c=a.positionAbsolute)==null?void 0:c.y)??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}})}function PC(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function Rv(e,t,n,i,a=[0,0],u){const c=PC(e,e.extent||i);let f=c;const h=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(h&&e.width&&e.height){const y=n.get(h),{x,y:b}=Yo(y,a).positionAbsolute;f=y&&wr(x)&&wr(b)&&wr(y.width)&&wr(y.height)?[[x+e.width*a[0],b+e.height*a[1]],[x+y.width-e.width+e.width*a[0],b+y.height-e.height+e.height*a[1]]]:f}else u==null||u("005",Si.error005()),f=c;else if(e.extent&&h&&e.extent!=="parent"){const y=n.get(h),{x,y:b}=Yo(y,a).positionAbsolute;f=[[e.extent[0][0]+x,e.extent[0][1]+b],[e.extent[1][0]+x,e.extent[1][1]+b]]}let p={x:0,y:0};if(h){const y=n.get(h);p=Yo(y,a).positionAbsolute}const m=f&&f!=="parent"?lh(t,f):t;return{position:{x:m.x-p.x,y:m.y-p.y},positionAbsolute:m}}function $f({nodeId:e,dragItems:t,nodeInternals:n}){const i=t.map(a=>({...n.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[e?i.find(a=>a.id===e):i[0],i]}const vg=(e,t,n,i)=>{const a=t.querySelectorAll(e);if(!a||!a.length)return null;const u=Array.from(a),c=t.getBoundingClientRect(),f={x:c.width*i[0],y:c.height*i[1]};return u.map(h=>{const p=h.getBoundingClientRect();return{id:h.getAttribute("data-handleid"),position:h.getAttribute("data-handlepos"),x:(p.left-c.left-f.x)/n,y:(p.top-c.top-f.y)/n,...ch(h)}})};function Ds(e,t,n){return n===void 0?n:i=>{const a=t().nodeInternals.get(e);a&&n(i,{...a})}}function wd({id:e,store:t,unselect:n=!1,nodeRef:i}){const{addSelectedNodes:a,unselectNodesAndEdges:u,multiSelectionActive:c,nodeInternals:f,onError:h}=t.getState(),p=f.get(e);if(!p){h==null||h("012",Si.error012(e));return}t.setState({nodesSelectionActive:!1}),p.selected?(n||p.selected&&c)&&(u({nodes:[p],edges:[]}),requestAnimationFrame(()=>{var m;return(m=i==null?void 0:i.current)==null?void 0:m.blur()})):a([e])}function RC(){const e=mn();return k.useCallback(({sourceEvent:n})=>{const{transform:i,snapGrid:a,snapToGrid:u}=e.getState(),c=n.touches?n.touches[0].clientX:n.clientX,f=n.touches?n.touches[0].clientY:n.clientY,h={x:(c-i[0])/i[2],y:(f-i[1])/i[2]};return{xSnapped:u?a[0]*Math.round(h.x/a[0]):h.x,ySnapped:u?a[1]*Math.round(h.y/a[1]):h.y,...h}},[])}function Wf(e){return(t,n,i)=>e==null?void 0:e(t,i)}function Mv({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:i,nodeId:a,isSelectable:u,selectNodesOnDrag:c}){const f=mn(),[h,p]=k.useState(!1),m=k.useRef([]),y=k.useRef({x:null,y:null}),x=k.useRef(0),b=k.useRef(null),N=k.useRef({x:0,y:0}),S=k.useRef(null),C=k.useRef(!1),M=k.useRef(!1),z=k.useRef(!1),te=RC();return k.useEffect(()=>{if(e!=null&&e.current){const F=vr(e.current),le=({x:Q,y:ne})=>{const{nodeInternals:J,onNodeDrag:Y,onSelectionDrag:ce,updateNodePositions:ge,nodeExtent:R,snapGrid:se,snapToGrid:Z,nodeOrigin:ye,onError:pe}=f.getState();y.current={x:Q,y:ne};let W=!1,ie={x:0,y:0,x2:0,y2:0};if(m.current.length>1&&R){const we=nl(m.current,ye);ie=eu(we)}if(m.current=m.current.map(we=>{const ke={x:Q-we.distance.x,y:ne-we.distance.y};Z&&(ke.x=se[0]*Math.round(ke.x/se[0]),ke.y=se[1]*Math.round(ke.y/se[1]));const Me=[[R[0][0],R[0][1]],[R[1][0],R[1][1]]];m.current.length>1&&R&&!we.extent&&(Me[0][0]=we.positionAbsolute.x-ie.x+R[0][0],Me[1][0]=we.positionAbsolute.x+(we.width??0)-ie.x2+R[1][0],Me[0][1]=we.positionAbsolute.y-ie.y+R[0][1],Me[1][1]=we.positionAbsolute.y+(we.height??0)-ie.y2+R[1][1]);const Re=Rv(we,ke,J,Me,ye,pe);return W=W||we.position.x!==Re.position.x||we.position.y!==Re.position.y,we.position=Re.position,we.positionAbsolute=Re.positionAbsolute,we}),!W)return;ge(m.current,!0,!0),p(!0);const ue=a?Y:Wf(ce);if(ue&&S.current){const[we,ke]=$f({nodeId:a,dragItems:m.current,nodeInternals:J});ue(S.current,we,ke)}},ae=()=>{if(!b.current)return;const[Q,ne]=rv(N.current,b.current);if(Q!==0||ne!==0){const{transform:J,panBy:Y}=f.getState();y.current.x=(y.current.x??0)-Q/J[2],y.current.y=(y.current.y??0)-ne/J[2],Y({x:Q,y:ne})&&le(y.current)}x.current=requestAnimationFrame(ae)},U=Q=>{var ye;const{nodeInternals:ne,multiSelectionActive:J,nodesDraggable:Y,unselectNodesAndEdges:ce,onNodeDragStart:ge,onSelectionDragStart:R}=f.getState();M.current=!0;const se=a?ge:Wf(R);(!c||!u)&&!J&&a&&((ye=ne.get(a))!=null&&ye.selected||ce()),a&&u&&c&&wd({id:a,store:f,nodeRef:e});const Z=te(Q);if(y.current=Z,m.current=DC(ne,Y,Z,a),se&&m.current){const[pe,W]=$f({nodeId:a,dragItems:m.current,nodeInternals:ne});se(Q.sourceEvent,pe,W)}};if(t)F.on(".drag",null);else{const Q=zN().on("start",ne=>{const{domNode:J,nodeDragThreshold:Y}=f.getState();Y===0&&U(ne),z.current=!1;const ce=te(ne);y.current=ce,b.current=(J==null?void 0:J.getBoundingClientRect())||null,N.current=eo(ne.sourceEvent,b.current)}).on("drag",ne=>{var ge,R;const J=te(ne),{autoPanOnNodeDrag:Y,nodeDragThreshold:ce}=f.getState();if(ne.sourceEvent.type==="touchmove"&&ne.sourceEvent.touches.length>1&&(z.current=!0),!z.current){if(!C.current&&M.current&&Y&&(C.current=!0,ae()),!M.current){const se=J.xSnapped-(((ge=y==null?void 0:y.current)==null?void 0:ge.x)??0),Z=J.ySnapped-(((R=y==null?void 0:y.current)==null?void 0:R.y)??0);Math.sqrt(se*se+Z*Z)>ce&&U(ne)}(y.current.x!==J.xSnapped||y.current.y!==J.ySnapped)&&m.current&&M.current&&(S.current=ne.sourceEvent,N.current=eo(ne.sourceEvent,b.current),le(J))}}).on("end",ne=>{if(!(!M.current||z.current)&&(p(!1),C.current=!1,M.current=!1,cancelAnimationFrame(x.current),m.current)){const{updateNodePositions:J,nodeInternals:Y,onNodeDragStop:ce,onSelectionDragStop:ge}=f.getState(),R=a?ce:Wf(ge);if(J(m.current,!1,!1),R){const[se,Z]=$f({nodeId:a,dragItems:m.current,nodeInternals:Y});R(ne.sourceEvent,se,Z)}}}).filter(ne=>{const J=ne.target;return!ne.button&&(!n||!gg(J,`.${n}`,e))&&(!i||gg(J,i,e))});return F.call(Q),()=>{F.on(".drag",null)}}}},[e,t,n,i,u,f,a,c,te]),h}function Lv(){const e=mn();return k.useCallback(n=>{const{nodeInternals:i,nodeExtent:a,updateNodePositions:u,getNodes:c,snapToGrid:f,snapGrid:h,onError:p,nodesDraggable:m}=e.getState(),y=c().filter(z=>z.selected&&(z.draggable||m&&typeof z.draggable>"u")),x=f?h[0]:5,b=f?h[1]:5,N=n.isShiftPressed?4:1,S=n.x*x*N,C=n.y*b*N,M=y.map(z=>{if(z.positionAbsolute){const te={x:z.positionAbsolute.x+S,y:z.positionAbsolute.y+C};f&&(te.x=h[0]*Math.round(te.x/h[0]),te.y=h[1]*Math.round(te.y/h[1]));const{positionAbsolute:F,position:le}=Rv(z,te,i,a,void 0,p);z.position=le,z.positionAbsolute=F}return z});u(M,!0,!1)},[])}const ja={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Ps=e=>{const t=({id:n,type:i,data:a,xPos:u,yPos:c,xPosOrigin:f,yPosOrigin:h,selected:p,onClick:m,onMouseEnter:y,onMouseMove:x,onMouseLeave:b,onContextMenu:N,onDoubleClick:S,style:C,className:M,isDraggable:z,isSelectable:te,isConnectable:F,isFocusable:le,selectNodesOnDrag:ae,sourcePosition:U,targetPosition:Q,hidden:ne,resizeObserver:J,dragHandle:Y,zIndex:ce,isParent:ge,noDragClassName:R,noPanClassName:se,initialized:Z,disableKeyboardA11y:ye,ariaLabel:pe,rfId:W,hasHandleBounds:ie})=>{const ue=mn(),we=k.useRef(null),ke=k.useRef(null),Me=k.useRef(U),Re=k.useRef(Q),je=k.useRef(i),Ye=te||z||m||y||x||b,qe=Lv(),Se=Ds(n,ue.getState,y),rt=Ds(n,ue.getState,x),xt=Ds(n,ue.getState,b),He=Ds(n,ue.getState,N),Tt=Ds(n,ue.getState,S),Xe=et=>{const{nodeDragThreshold:Be}=ue.getState();if(te&&(!ae||!z||Be>0)&&wd({id:n,store:ue,nodeRef:we}),m){const Ft=ue.getState().nodeInternals.get(n);Ft&&m(et,{...Ft})}},it=et=>{if(!pd(et)&&!ye)if(sv.includes(et.key)&&te){const Be=et.key==="Escape";wd({id:n,store:ue,unselect:Be,nodeRef:we})}else z&&p&&Object.prototype.hasOwnProperty.call(ja,et.key)&&(ue.setState({ariaLiveMessage:`Moved selected node ${et.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~u}, y: ${~~c}`}),qe({x:ja[et.key].x,y:ja[et.key].y,isShiftPressed:et.shiftKey}))};k.useEffect(()=>()=>{ke.current&&(J==null||J.unobserve(ke.current),ke.current=null)},[]),k.useEffect(()=>{if(we.current&&!ne){const et=we.current;(!Z||!ie||ke.current!==et)&&(ke.current&&(J==null||J.unobserve(ke.current)),J==null||J.observe(et),ke.current=et)}},[ne,Z,ie]),k.useEffect(()=>{const et=je.current!==i,Be=Me.current!==U,Ft=Re.current!==Q;we.current&&(et||Be||Ft)&&(et&&(je.current=i),Be&&(Me.current=U),Ft&&(Re.current=Q),ue.getState().updateNodeDimensions([{id:n,nodeElement:we.current,forceUpdate:!0}]))},[n,i,U,Q]);const St=Mv({nodeRef:we,disabled:ne||!z,noDragClassName:R,handleSelector:Y,nodeId:n,isSelectable:te,selectNodesOnDrag:ae});return ne?null:re.createElement("div",{className:Sn(["react-flow__node",`react-flow__node-${i}`,{[se]:z},M,{selected:p,selectable:te,parent:ge,dragging:St}]),ref:we,style:{zIndex:ce,transform:`translate(${f}px,${h}px)`,pointerEvents:Ye?"all":"none",visibility:Z?"visible":"hidden",...C},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:Se,onMouseMove:rt,onMouseLeave:xt,onContextMenu:He,onClick:Xe,onDoubleClick:Tt,onKeyDown:le?it:void 0,tabIndex:le?0:void 0,role:le?"button":void 0,"aria-describedby":ye?void 0:`${kv}-${W}`,"aria-label":pe},re.createElement(VI,{value:n},re.createElement(e,{id:n,data:a,type:i,xPos:u,yPos:c,selected:p,isConnectable:F,sourcePosition:U,targetPosition:Q,dragging:St,dragHandle:Y,zIndex:ce})))};return t.displayName="NodeWrapper",k.memo(t)};const MC=e=>{const t=e.getNodes().filter(n=>n.selected);return{...nl(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function LC({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const i=mn(),{width:a,height:u,x:c,y:f,transformString:h,userSelectionActive:p}=Mt(MC,qn),m=Lv(),y=k.useRef(null);if(k.useEffect(()=>{var N;n||(N=y.current)==null||N.focus({preventScroll:!0})},[n]),Mv({nodeRef:y}),p||!a||!u)return null;const x=e?N=>{const S=i.getState().getNodes().filter(C=>C.selected);e(N,S)}:void 0,b=N=>{Object.prototype.hasOwnProperty.call(ja,N.key)&&m({x:ja[N.key].x,y:ja[N.key].y,isShiftPressed:N.shiftKey})};return re.createElement("div",{className:Sn(["react-flow__nodesselection","react-flow__container",t]),style:{transform:h}},re.createElement("div",{ref:y,className:"react-flow__nodesselection-rect",onContextMenu:x,tabIndex:n?void 0:-1,onKeyDown:n?void 0:b,style:{width:a,height:u,top:f,left:c}}))}var $C=k.memo(LC);const WC=e=>e.nodesSelectionActive,$v=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:u,onPaneScroll:c,deleteKeyCode:f,onMove:h,onMoveStart:p,onMoveEnd:m,selectionKeyCode:y,selectionOnDrag:x,selectionMode:b,onSelectionStart:N,onSelectionEnd:S,multiSelectionKeyCode:C,panActivationKeyCode:M,zoomActivationKeyCode:z,elementsSelectable:te,zoomOnScroll:F,zoomOnPinch:le,panOnScroll:ae,panOnScrollSpeed:U,panOnScrollMode:Q,zoomOnDoubleClick:ne,panOnDrag:J,defaultViewport:Y,translateExtent:ce,minZoom:ge,maxZoom:R,preventScrolling:se,onSelectionContextMenu:Z,noWheelClassName:ye,noPanClassName:pe,disableKeyboardA11y:W})=>{const ie=Mt(WC),ue=nu(y),we=nu(M),ke=we||J,Me=we||ae,Re=ue||x&&ke!==!0;return _C({deleteKeyCode:f,multiSelectionKeyCode:C}),re.createElement(NC,{onMove:h,onMoveStart:p,onMoveEnd:m,onPaneContextMenu:u,elementsSelectable:te,zoomOnScroll:F,zoomOnPinch:le,panOnScroll:Me,panOnScrollSpeed:U,panOnScrollMode:Q,zoomOnDoubleClick:ne,panOnDrag:!ue&&ke,defaultViewport:Y,translateExtent:ce,minZoom:ge,maxZoom:R,zoomActivationKeyCode:z,preventScrolling:se,noWheelClassName:ye,noPanClassName:pe},re.createElement(Dv,{onSelectionStart:N,onSelectionEnd:S,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:u,onPaneScroll:c,panOnDrag:ke,isSelecting:!!Re,selectionMode:b},e,ie&&re.createElement($C,{onSelectionContextMenu:Z,noPanClassName:pe,disableKeyboardA11y:W})))};$v.displayName="FlowRenderer";var FC=k.memo($v);function jC(e){return Mt(k.useCallback(n=>e?pv(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function BC(e){const t={input:Ps(e.input||Ev),default:Ps(e.default||yd),output:Ps(e.output||Tv),group:Ps(e.group||gh)},n={},i=Object.keys(e).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,u)=>(a[u]=Ps(e[u]||yd),a),n);return{...t,...i}}const HC=({x:e,y:t,width:n,height:i,origin:a})=>!n||!i?{x:e,y:t}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:e,y:t}:{x:e-n*a[0],y:t-i*a[1]},KC=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Wv=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:i,elementsSelectable:a,updateNodeDimensions:u,onError:c}=Mt(KC,qn),f=jC(e.onlyRenderVisibleElements),h=k.useRef(),p=k.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const m=new ResizeObserver(y=>{const x=y.map(b=>({id:b.target.getAttribute("data-id"),nodeElement:b.target,forceUpdate:!0}));u(x)});return h.current=m,m},[]);return k.useEffect(()=>()=>{var m;(m=h==null?void 0:h.current)==null||m.disconnect()},[]),re.createElement("div",{className:"react-flow__nodes",style:yh},f.map(m=>{var le,ae,U;let y=m.type||"default";e.nodeTypes[y]||(c==null||c("003",Si.error003(y)),y="default");const x=e.nodeTypes[y]||e.nodeTypes.default,b=!!(m.draggable||t&&typeof m.draggable>"u"),N=!!(m.selectable||a&&typeof m.selectable>"u"),S=!!(m.connectable||n&&typeof m.connectable>"u"),C=!!(m.focusable||i&&typeof m.focusable>"u"),M=e.nodeExtent?lh(m.positionAbsolute,e.nodeExtent):m.positionAbsolute,z=(M==null?void 0:M.x)??0,te=(M==null?void 0:M.y)??0,F=HC({x:z,y:te,width:m.width??0,height:m.height??0,origin:e.nodeOrigin});return re.createElement(x,{key:m.id,id:m.id,className:m.className,style:m.style,type:y,data:m.data,sourcePosition:m.sourcePosition||Ue.Bottom,targetPosition:m.targetPosition||Ue.Top,hidden:m.hidden,xPos:z,yPos:te,xPosOrigin:F.x,yPosOrigin:F.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!m.selected,isDraggable:b,isSelectable:N,isConnectable:S,isFocusable:C,resizeObserver:p,dragHandle:m.dragHandle,zIndex:((le=m[en])==null?void 0:le.z)??0,isParent:!!((ae=m[en])!=null&&ae.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!m.width&&!!m.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:m.ariaLabel,hasHandleBounds:!!((U=m[en])!=null&&U.handleBounds)})}))};Wv.displayName="NodeRenderer";var zC=k.memo(Wv);const UC=(e,t,n)=>n===Ue.Left?e-t:n===Ue.Right?e+t:e,YC=(e,t,n)=>n===Ue.Top?e-t:n===Ue.Bottom?e+t:e,yg="react-flow__edgeupdater",wg=({position:e,centerX:t,centerY:n,radius:i=10,onMouseDown:a,onMouseEnter:u,onMouseOut:c,type:f})=>re.createElement("circle",{onMouseDown:a,onMouseEnter:u,onMouseOut:c,className:Sn([yg,`${yg}-${f}`]),cx:UC(t,i,e),cy:YC(n,i,e),r:i,stroke:"transparent",fill:"transparent"}),VC=()=>!0;var Aa=e=>{const t=({id:n,className:i,type:a,data:u,onClick:c,onEdgeDoubleClick:f,selected:h,animated:p,label:m,labelStyle:y,labelShowBg:x,labelBgStyle:b,labelBgPadding:N,labelBgBorderRadius:S,style:C,source:M,target:z,sourceX:te,sourceY:F,targetX:le,targetY:ae,sourcePosition:U,targetPosition:Q,elementsSelectable:ne,hidden:J,sourceHandleId:Y,targetHandleId:ce,onContextMenu:ge,onMouseEnter:R,onMouseMove:se,onMouseLeave:Z,reconnectRadius:ye,onReconnect:pe,onReconnectStart:W,onReconnectEnd:ie,markerEnd:ue,markerStart:we,rfId:ke,ariaLabel:Me,isFocusable:Re,isReconnectable:je,pathOptions:Ye,interactionWidth:qe,disableKeyboardA11y:Se})=>{const rt=k.useRef(null),[xt,He]=k.useState(!1),[Tt,Xe]=k.useState(!1),it=mn(),St=k.useMemo(()=>`url('#${gd(we,ke)}')`,[we,ke]),et=k.useMemo(()=>`url('#${gd(ue,ke)}')`,[ue,ke]);if(J)return null;const Be=_t=>{var fe;const{edges:Bt,addSelectedEdges:Vt,unselectNodesAndEdges:Lt,multiSelectionActive:$e}=it.getState(),Ht=Bt.find(be=>be.id===n);Ht&&(ne&&(it.setState({nodesSelectionActive:!1}),Ht.selected&&$e?(Lt({nodes:[],edges:[Ht]}),(fe=rt.current)==null||fe.blur()):Vt([n])),c&&c(_t,Ht))},Ft=As(n,it.getState,f),jt=As(n,it.getState,ge),bt=As(n,it.getState,R),sn=As(n,it.getState,se),zt=As(n,it.getState,Z),un=(_t,Bt)=>{if(_t.button!==0)return;const{edges:Vt,isValidConnection:Lt}=it.getState(),$e=Bt?z:M,Ht=(Bt?ce:Y)||null,fe=Bt?"target":"source",be=Lt||VC,de=Bt,Ce=Vt.find(Ve=>Ve.id===n);Xe(!0),W==null||W(_t,Ce,fe);const We=Ve=>{Xe(!1),ie==null||ie(Ve,Ce,fe)};wv({event:_t,handleId:Ht,nodeId:$e,onConnect:Ve=>pe==null?void 0:pe(Ce,Ve),isTarget:de,getState:it.getState,setState:it.setState,isValidConnection:be,edgeUpdaterType:fe,onReconnectEnd:We})},Qt=_t=>un(_t,!0),Ut=_t=>un(_t,!1),tn=()=>He(!0),Yt=()=>He(!1),cn=!ne&&!c,dn=_t=>{var Bt;if(!Se&&sv.includes(_t.key)&&ne){const{unselectNodesAndEdges:Vt,addSelectedEdges:Lt,edges:$e}=it.getState();_t.key==="Escape"?((Bt=rt.current)==null||Bt.blur(),Vt({edges:[$e.find(fe=>fe.id===n)]})):Lt([n])}};return re.createElement("g",{className:Sn(["react-flow__edge",`react-flow__edge-${a}`,i,{selected:h,animated:p,inactive:cn,updating:xt}]),onClick:Be,onDoubleClick:Ft,onContextMenu:jt,onMouseEnter:bt,onMouseMove:sn,onMouseLeave:zt,onKeyDown:Re?dn:void 0,tabIndex:Re?0:void 0,role:Re?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":Me===null?void 0:Me||`Edge from ${M} to ${z}`,"aria-describedby":Re?`${Iv}-${ke}`:void 0,ref:rt},!Tt&&re.createElement(e,{id:n,source:M,target:z,selected:h,animated:p,label:m,labelStyle:y,labelShowBg:x,labelBgStyle:b,labelBgPadding:N,labelBgBorderRadius:S,data:u,style:C,sourceX:te,sourceY:F,targetX:le,targetY:ae,sourcePosition:U,targetPosition:Q,sourceHandleId:Y,targetHandleId:ce,markerStart:St,markerEnd:et,pathOptions:Ye,interactionWidth:qe}),je&&re.createElement(re.Fragment,null,(je==="source"||je===!0)&&re.createElement(wg,{position:U,centerX:te,centerY:F,radius:ye,onMouseDown:Qt,onMouseEnter:tn,onMouseOut:Yt,type:"source"}),(je==="target"||je===!0)&&re.createElement(wg,{position:Q,centerX:le,centerY:ae,radius:ye,onMouseDown:Ut,onMouseEnter:tn,onMouseOut:Yt,type:"target"})))};return t.displayName="EdgeWrapper",k.memo(t)};function qC(e){const t={default:Aa(e.default||Lc),straight:Aa(e.bezier||hh),step:Aa(e.step||dh),smoothstep:Aa(e.step||tl),simplebezier:Aa(e.simplebezier||fh)},n={},i=Object.keys(e).filter(a=>!["default","bezier"].includes(a)).reduce((a,u)=>(a[u]=Aa(e[u]||Lc),a),n);return{...t,...i}}function xg(e,t,n=null){const i=((n==null?void 0:n.x)||0)+t.x,a=((n==null?void 0:n.y)||0)+t.y,u=(n==null?void 0:n.width)||t.width,c=(n==null?void 0:n.height)||t.height;switch(e){case Ue.Top:return{x:i+u/2,y:a};case Ue.Right:return{x:i+u,y:a+c/2};case Ue.Bottom:return{x:i+u/2,y:a+c};case Ue.Left:return{x:i,y:a+c/2}}}function bg(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const XC=(e,t,n,i,a,u)=>{const c=xg(n,e,t),f=xg(u,i,a);return{sourceX:c.x,sourceY:c.y,targetX:f.x,targetY:f.y}};function GC({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:i,targetWidth:a,targetHeight:u,width:c,height:f,transform:h}){const p={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+a),y2:Math.max(e.y+i,t.y+u)};p.x===p.x2&&(p.x2+=1),p.y===p.y2&&(p.y2+=1);const m=eu({x:(0-h[0])/h[2],y:(0-h[1])/h[2],width:c/h[2],height:f/h[2]}),y=Math.max(0,Math.min(m.x2,p.x2)-Math.max(m.x,p.x)),x=Math.max(0,Math.min(m.y2,p.y2)-Math.max(m.y,p.y));return Math.ceil(y*x)>0}function _g(e){var i,a,u,c,f;const t=((i=e==null?void 0:e[en])==null?void 0:i.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.x)<"u"&&typeof((u=e==null?void 0:e.positionAbsolute)==null?void 0:u.y)<"u";return[{x:((c=e==null?void 0:e.positionAbsolute)==null?void 0:c.x)||0,y:((f=e==null?void 0:e.positionAbsolute)==null?void 0:f.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const ZC=[{level:0,isMaxLevel:!0,edges:[]}];function QC(e,t,n=!1){let i=-1;const a=e.reduce((c,f)=>{var m,y;const h=wr(f.zIndex);let p=h?f.zIndex:0;if(n){const x=t.get(f.target),b=t.get(f.source),N=f.selected||(x==null?void 0:x.selected)||(b==null?void 0:b.selected),S=Math.max(((m=b==null?void 0:b[en])==null?void 0:m.z)||0,((y=x==null?void 0:x[en])==null?void 0:y.z)||0,1e3);p=(h?f.zIndex:0)+(N?S:0)}return c[p]?c[p].push(f):c[p]=[f],i=p>i?p:i,c},{}),u=Object.entries(a).map(([c,f])=>{const h=+c;return{edges:f,level:h,isMaxLevel:h===i}});return u.length===0?ZC:u}function JC(e,t,n){const i=Mt(k.useCallback(a=>e?a.edges.filter(u=>{const c=t.get(u.source),f=t.get(u.target);return(c==null?void 0:c.width)&&(c==null?void 0:c.height)&&(f==null?void 0:f.width)&&(f==null?void 0:f.height)&&GC({sourcePos:c.positionAbsolute||{x:0,y:0},targetPos:f.positionAbsolute||{x:0,y:0},sourceWidth:c.width,sourceHeight:c.height,targetWidth:f.width,targetHeight:f.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[e,t]));return QC(i,t,n)}const eO=({color:e="none",strokeWidth:t=1})=>re.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),tO=({color:e="none",strokeWidth:t=1})=>re.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Eg={[Mc.Arrow]:eO,[Mc.ArrowClosed]:tO};function nO(e){const t=mn();return k.useMemo(()=>{var a,u;return Object.prototype.hasOwnProperty.call(Eg,e)?Eg[e]:((u=(a=t.getState()).onError)==null||u.call(a,"009",Si.error009(e)),null)},[e])}const rO=({id:e,type:t,color:n,width:i=12.5,height:a=12.5,markerUnits:u="strokeWidth",strokeWidth:c,orient:f="auto-start-reverse"})=>{const h=nO(t);return h?re.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${i}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:u,orient:f,refX:"0",refY:"0"},re.createElement(h,{color:n,strokeWidth:c})):null},iO=({defaultColor:e,rfId:t})=>n=>{const i=[];return n.edges.reduce((a,u)=>([u.markerStart,u.markerEnd].forEach(c=>{if(c&&typeof c=="object"){const f=gd(c,t);i.includes(f)||(a.push({id:f,color:c.color||e,...c}),i.push(f))}}),a),[]).sort((a,u)=>a.id.localeCompare(u.id))},Fv=({defaultColor:e,rfId:t})=>{const n=Mt(k.useCallback(iO({defaultColor:e,rfId:t}),[e,t]),(i,a)=>!(i.length!==a.length||i.some((u,c)=>u.id!==a[c].id)));return re.createElement("defs",null,n.map(i=>re.createElement(rO,{id:i.id,key:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient})))};Fv.displayName="MarkerDefinitions";var oO=k.memo(Fv);const aO=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),jv=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:i,edgeTypes:a,noPanClassName:u,onEdgeContextMenu:c,onEdgeMouseEnter:f,onEdgeMouseMove:h,onEdgeMouseLeave:p,onEdgeClick:m,onEdgeDoubleClick:y,onReconnect:x,onReconnectStart:b,onReconnectEnd:N,reconnectRadius:S,children:C,disableKeyboardA11y:M})=>{const{edgesFocusable:z,edgesUpdatable:te,elementsSelectable:F,width:le,height:ae,connectionMode:U,nodeInternals:Q,onError:ne}=Mt(aO,qn),J=JC(t,Q,n);return le?re.createElement(re.Fragment,null,J.map(({level:Y,edges:ce,isMaxLevel:ge})=>re.createElement("svg",{key:Y,style:{zIndex:Y},width:le,height:ae,className:"react-flow__edges react-flow__container"},ge&&re.createElement(oO,{defaultColor:e,rfId:i}),re.createElement("g",null,ce.map(R=>{const[se,Z,ye]=_g(Q.get(R.source)),[pe,W,ie]=_g(Q.get(R.target));if(!ye||!ie)return null;let ue=R.type||"default";a[ue]||(ne==null||ne("011",Si.error011(ue)),ue="default");const we=a[ue]||a.default,ke=U===Go.Strict?W.target:(W.target??[]).concat(W.source??[]),Me=bg(Z.source,R.sourceHandle),Re=bg(ke,R.targetHandle),je=(Me==null?void 0:Me.position)||Ue.Bottom,Ye=(Re==null?void 0:Re.position)||Ue.Top,qe=!!(R.focusable||z&&typeof R.focusable>"u"),Se=R.reconnectable||R.updatable,rt=typeof x<"u"&&(Se||te&&typeof Se>"u");if(!Me||!Re)return ne==null||ne("008",Si.error008(Me,R)),null;const{sourceX:xt,sourceY:He,targetX:Tt,targetY:Xe}=XC(se,Me,je,pe,Re,Ye);return re.createElement(we,{key:R.id,id:R.id,className:Sn([R.className,u]),type:ue,data:R.data,selected:!!R.selected,animated:!!R.animated,hidden:!!R.hidden,label:R.label,labelStyle:R.labelStyle,labelShowBg:R.labelShowBg,labelBgStyle:R.labelBgStyle,labelBgPadding:R.labelBgPadding,labelBgBorderRadius:R.labelBgBorderRadius,style:R.style,source:R.source,target:R.target,sourceHandleId:R.sourceHandle,targetHandleId:R.targetHandle,markerEnd:R.markerEnd,markerStart:R.markerStart,sourceX:xt,sourceY:He,targetX:Tt,targetY:Xe,sourcePosition:je,targetPosition:Ye,elementsSelectable:F,onContextMenu:c,onMouseEnter:f,onMouseMove:h,onMouseLeave:p,onClick:m,onEdgeDoubleClick:y,onReconnect:x,onReconnectStart:b,onReconnectEnd:N,reconnectRadius:S,rfId:i,ariaLabel:R.ariaLabel,isFocusable:qe,isReconnectable:rt,pathOptions:"pathOptions"in R?R.pathOptions:void 0,interactionWidth:R.interactionWidth,disableKeyboardA11y:M})})))),C):null};jv.displayName="EdgeRenderer";var sO=k.memo(jv);const uO=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function cO({children:e}){const t=Mt(uO);return re.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function lO(e){const t=vh(),n=k.useRef(!1);k.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const fO={[Ue.Left]:Ue.Right,[Ue.Right]:Ue.Left,[Ue.Top]:Ue.Bottom,[Ue.Bottom]:Ue.Top},Bv=({nodeId:e,handleType:t,style:n,type:i=Xi.Bezier,CustomComponent:a,connectionStatus:u})=>{var ae,U,Q;const{fromNode:c,handleId:f,toX:h,toY:p,connectionMode:m}=Mt(k.useCallback(ne=>({fromNode:ne.nodeInternals.get(e),handleId:ne.connectionHandleId,toX:(ne.connectionPosition.x-ne.transform[0])/ne.transform[2],toY:(ne.connectionPosition.y-ne.transform[1])/ne.transform[2],connectionMode:ne.connectionMode}),[e]),qn),y=(ae=c==null?void 0:c[en])==null?void 0:ae.handleBounds;let x=y==null?void 0:y[t];if(m===Go.Loose&&(x=x||(y==null?void 0:y[t==="source"?"target":"source"])),!c||!x)return null;const b=f?x.find(ne=>ne.id===f):x[0],N=b?b.x+b.width/2:(c.width??0)/2,S=b?b.y+b.height/2:c.height??0,C=(((U=c.positionAbsolute)==null?void 0:U.x)??0)+N,M=(((Q=c.positionAbsolute)==null?void 0:Q.y)??0)+S,z=b==null?void 0:b.position,te=z?fO[z]:null;if(!z||!te)return null;if(a)return re.createElement(a,{connectionLineType:i,connectionLineStyle:n,fromNode:c,fromHandle:b,fromX:C,fromY:M,toX:h,toY:p,fromPosition:z,toPosition:te,connectionStatus:u});let F="";const le={sourceX:C,sourceY:M,sourcePosition:z,targetX:h,targetY:p,targetPosition:te};return i===Xi.Bezier?[F]=dv(le):i===Xi.Step?[F]=md({...le,borderRadius:0}):i===Xi.SmoothStep?[F]=md(le):i===Xi.SimpleBezier?[F]=fv(le):F=`M${C},${M} ${h},${p}`,re.createElement("path",{d:F,fill:"none",className:"react-flow__connection-path",style:n})};Bv.displayName="ConnectionLine";const dO=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function hO({containerStyle:e,style:t,type:n,component:i}){const{nodeId:a,handleType:u,nodesConnectable:c,width:f,height:h,connectionStatus:p}=Mt(dO,qn);return!(a&&u&&f&&c)?null:re.createElement("svg",{style:e,width:f,height:h,className:"react-flow__edges react-flow__connectionline react-flow__container"},re.createElement("g",{className:Sn(["react-flow__connection",p])},re.createElement(Bv,{nodeId:a,handleType:u,style:t,type:n,CustomComponent:i,connectionStatus:p})))}function Sg(e,t){return k.useRef(null),mn(),k.useMemo(()=>t(e),[e])}const Hv=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:i,onMoveEnd:a,onInit:u,onNodeClick:c,onEdgeClick:f,onNodeDoubleClick:h,onEdgeDoubleClick:p,onNodeMouseEnter:m,onNodeMouseMove:y,onNodeMouseLeave:x,onNodeContextMenu:b,onSelectionContextMenu:N,onSelectionStart:S,onSelectionEnd:C,connectionLineType:M,connectionLineStyle:z,connectionLineComponent:te,connectionLineContainerStyle:F,selectionKeyCode:le,selectionOnDrag:ae,selectionMode:U,multiSelectionKeyCode:Q,panActivationKeyCode:ne,zoomActivationKeyCode:J,deleteKeyCode:Y,onlyRenderVisibleElements:ce,elementsSelectable:ge,selectNodesOnDrag:R,defaultViewport:se,translateExtent:Z,minZoom:ye,maxZoom:pe,preventScrolling:W,defaultMarkerColor:ie,zoomOnScroll:ue,zoomOnPinch:we,panOnScroll:ke,panOnScrollSpeed:Me,panOnScrollMode:Re,zoomOnDoubleClick:je,panOnDrag:Ye,onPaneClick:qe,onPaneMouseEnter:Se,onPaneMouseMove:rt,onPaneMouseLeave:xt,onPaneScroll:He,onPaneContextMenu:Tt,onEdgeContextMenu:Xe,onEdgeMouseEnter:it,onEdgeMouseMove:St,onEdgeMouseLeave:et,onReconnect:Be,onReconnectStart:Ft,onReconnectEnd:jt,reconnectRadius:bt,noDragClassName:sn,noWheelClassName:zt,noPanClassName:un,elevateEdgesOnSelect:Qt,disableKeyboardA11y:Ut,nodeOrigin:tn,nodeExtent:Yt,rfId:cn})=>{const dn=Sg(e,BC),_t=Sg(t,qC);return lO(u),re.createElement(FC,{onPaneClick:qe,onPaneMouseEnter:Se,onPaneMouseMove:rt,onPaneMouseLeave:xt,onPaneContextMenu:Tt,onPaneScroll:He,deleteKeyCode:Y,selectionKeyCode:le,selectionOnDrag:ae,selectionMode:U,onSelectionStart:S,onSelectionEnd:C,multiSelectionKeyCode:Q,panActivationKeyCode:ne,zoomActivationKeyCode:J,elementsSelectable:ge,onMove:n,onMoveStart:i,onMoveEnd:a,zoomOnScroll:ue,zoomOnPinch:we,zoomOnDoubleClick:je,panOnScroll:ke,panOnScrollSpeed:Me,panOnScrollMode:Re,panOnDrag:Ye,defaultViewport:se,translateExtent:Z,minZoom:ye,maxZoom:pe,onSelectionContextMenu:N,preventScrolling:W,noDragClassName:sn,noWheelClassName:zt,noPanClassName:un,disableKeyboardA11y:Ut},re.createElement(cO,null,re.createElement(sO,{edgeTypes:_t,onEdgeClick:f,onEdgeDoubleClick:p,onlyRenderVisibleElements:ce,onEdgeContextMenu:Xe,onEdgeMouseEnter:it,onEdgeMouseMove:St,onEdgeMouseLeave:et,onReconnect:Be,onReconnectStart:Ft,onReconnectEnd:jt,reconnectRadius:bt,defaultMarkerColor:ie,noPanClassName:un,elevateEdgesOnSelect:!!Qt,disableKeyboardA11y:Ut,rfId:cn},re.createElement(hO,{style:z,type:M,component:te,containerStyle:F})),re.createElement("div",{className:"react-flow__edgelabel-renderer"}),re.createElement(zC,{nodeTypes:dn,onNodeClick:c,onNodeDoubleClick:h,onNodeMouseEnter:m,onNodeMouseMove:y,onNodeMouseLeave:x,onNodeContextMenu:b,selectNodesOnDrag:R,onlyRenderVisibleElements:ce,noPanClassName:un,noDragClassName:sn,disableKeyboardA11y:Ut,nodeOrigin:tn,nodeExtent:Yt,rfId:cn})))};Hv.displayName="GraphView";var pO=k.memo(Hv);const xd=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Ui={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:xd,nodeExtent:xd,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Go.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:BI,isValidConnection:void 0},mO=()=>nT((e,t)=>({...Ui,setNodes:n=>{const{nodeInternals:i,nodeOrigin:a,elevateNodesOnSelect:u}=t();e({nodeInternals:Mf(n,i,a,u)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:i={}}=t();e({edges:n.map(a=>({...i,...a}))})},setDefaultNodesAndEdges:(n,i)=>{const a=typeof n<"u",u=typeof i<"u",c=a?Mf(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:c,edges:u?i:[],hasDefaultNodes:a,hasDefaultEdges:u})},updateNodeDimensions:n=>{const{onNodesChange:i,nodeInternals:a,fitViewOnInit:u,fitViewOnInitDone:c,fitViewOnInitOptions:f,domNode:h,nodeOrigin:p}=t(),m=h==null?void 0:h.querySelector(".react-flow__viewport");if(!m)return;const y=window.getComputedStyle(m),{m22:x}=new window.DOMMatrixReadOnly(y.transform),b=n.reduce((S,C)=>{const M=a.get(C.id);if(M!=null&&M.hidden)a.set(M.id,{...M,[en]:{...M[en],handleBounds:void 0}});else if(M){const z=ch(C.nodeElement);!!(z.width&&z.height&&(M.width!==z.width||M.height!==z.height||C.forceUpdate))&&(a.set(M.id,{...M,[en]:{...M[en],handleBounds:{source:vg(".source",C.nodeElement,x,p),target:vg(".target",C.nodeElement,x,p)}},...z}),S.push({id:M.id,type:"dimensions",dimensions:z}))}return S},[]);Ov(a,p);const N=c||u&&!c&&Av(t,{initial:!0,...f});e({nodeInternals:new Map(a),fitViewOnInitDone:N}),(b==null?void 0:b.length)>0&&(i==null||i(b))},updateNodePositions:(n,i=!0,a=!1)=>{const{triggerNodeChanges:u}=t(),c=n.map(f=>{const h={id:f.id,type:"position",dragging:a};return i&&(h.positionAbsolute=f.positionAbsolute,h.position=f.position),h});u(c)},triggerNodeChanges:n=>{const{onNodesChange:i,nodeInternals:a,hasDefaultNodes:u,nodeOrigin:c,getNodes:f,elevateNodesOnSelect:h}=t();if(n!=null&&n.length){if(u){const p=OC(n,f()),m=Mf(p,a,c,h);e({nodeInternals:m})}i==null||i(n)}},addSelectedNodes:n=>{const{multiSelectionActive:i,edges:a,getNodes:u}=t();let c,f=null;i?c=n.map(h=>qi(h,!0)):(c=Pa(u(),n),f=Pa(a,[])),pc({changedNodes:c,changedEdges:f,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:i,edges:a,getNodes:u}=t();let c,f=null;i?c=n.map(h=>qi(h,!0)):(c=Pa(a,n),f=Pa(u(),[])),pc({changedNodes:f,changedEdges:c,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:i}={})=>{const{edges:a,getNodes:u}=t(),c=n||u(),f=i||a,h=c.map(m=>(m.selected=!1,qi(m.id,!1))),p=f.map(m=>qi(m.id,!1));pc({changedNodes:h,changedEdges:p,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:i,maxZoom:a}=t();i==null||i.scaleExtent([n,a]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:i,minZoom:a}=t();i==null||i.scaleExtent([a,n]),e({maxZoom:n})},setTranslateExtent:n=>{var i;(i=t().d3Zoom)==null||i.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:i}=t(),u=i().filter(f=>f.selected).map(f=>qi(f.id,!1)),c=n.filter(f=>f.selected).map(f=>qi(f.id,!1));pc({changedNodes:u,changedEdges:c,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:i}=t();i.forEach(a=>{a.positionAbsolute=lh(a.position,n)}),e({nodeExtent:n,nodeInternals:new Map(i)})},panBy:n=>{const{transform:i,width:a,height:u,d3Zoom:c,d3Selection:f,translateExtent:h}=t();if(!c||!f||!n.x&&!n.y)return!1;const p=xi.translate(i[0]+n.x,i[1]+n.y).scale(i[2]),m=[[0,0],[a,u]],y=c==null?void 0:c.constrain()(p,m,h);return c.transform(f,y),i[0]!==y.x||i[1]!==y.y||i[2]!==y.k},cancelConnection:()=>e({connectionNodeId:Ui.connectionNodeId,connectionHandleId:Ui.connectionHandleId,connectionHandleType:Ui.connectionHandleType,connectionStatus:Ui.connectionStatus,connectionStartHandle:Ui.connectionStartHandle,connectionEndHandle:Ui.connectionEndHandle}),reset:()=>e({...Ui})}),Object.is),Kv=({children:e})=>{const t=k.useRef(null);return t.current||(t.current=mO()),re.createElement(RI,{value:t.current},e)};Kv.displayName="ReactFlowProvider";const zv=({children:e})=>k.useContext(el)?re.createElement(re.Fragment,null,e):re.createElement(Kv,null,e);zv.displayName="ReactFlowWrapper";const gO={input:Ev,default:yd,output:Tv,group:gh},vO={default:Lc,straight:hh,step:dh,smoothstep:tl,simplebezier:fh},yO=[0,0],wO=[15,15],xO={x:0,y:0,zoom:1},bO={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Uv=k.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,className:a,nodeTypes:u=gO,edgeTypes:c=vO,onNodeClick:f,onEdgeClick:h,onInit:p,onMove:m,onMoveStart:y,onMoveEnd:x,onConnect:b,onConnectStart:N,onConnectEnd:S,onClickConnectStart:C,onClickConnectEnd:M,onNodeMouseEnter:z,onNodeMouseMove:te,onNodeMouseLeave:F,onNodeContextMenu:le,onNodeDoubleClick:ae,onNodeDragStart:U,onNodeDrag:Q,onNodeDragStop:ne,onNodesDelete:J,onEdgesDelete:Y,onSelectionChange:ce,onSelectionDragStart:ge,onSelectionDrag:R,onSelectionDragStop:se,onSelectionContextMenu:Z,onSelectionStart:ye,onSelectionEnd:pe,connectionMode:W=Go.Strict,connectionLineType:ie=Xi.Bezier,connectionLineStyle:ue,connectionLineComponent:we,connectionLineContainerStyle:ke,deleteKeyCode:Me="Backspace",selectionKeyCode:Re="Shift",selectionOnDrag:je=!1,selectionMode:Ye=tu.Full,panActivationKeyCode:qe="Space",multiSelectionKeyCode:Se=Rc()?"Meta":"Control",zoomActivationKeyCode:rt=Rc()?"Meta":"Control",snapToGrid:xt=!1,snapGrid:He=wO,onlyRenderVisibleElements:Tt=!1,selectNodesOnDrag:Xe=!0,nodesDraggable:it,nodesConnectable:St,nodesFocusable:et,nodeOrigin:Be=yO,edgesFocusable:Ft,edgesUpdatable:jt,elementsSelectable:bt,defaultViewport:sn=xO,minZoom:zt=.5,maxZoom:un=2,translateExtent:Qt=xd,preventScrolling:Ut=!0,nodeExtent:tn,defaultMarkerColor:Yt="#b1b1b7",zoomOnScroll:cn=!0,zoomOnPinch:dn=!0,panOnScroll:_t=!1,panOnScrollSpeed:Bt=.5,panOnScrollMode:Vt=Ho.Free,zoomOnDoubleClick:Lt=!0,panOnDrag:$e=!0,onPaneClick:Ht,onPaneMouseEnter:fe,onPaneMouseMove:be,onPaneMouseLeave:de,onPaneScroll:Ce,onPaneContextMenu:We,children:ze,onEdgeContextMenu:Ve,onEdgeDoubleClick:Ze,onEdgeMouseEnter:Tn,onEdgeMouseMove:ct,onEdgeMouseLeave:$t,onEdgeUpdate:jn,onEdgeUpdateStart:_r,onEdgeUpdateEnd:Er,onReconnect:Et,onReconnectStart:Rt,onReconnectEnd:sr,reconnectRadius:ur=10,edgeUpdaterRadius:cr=10,onNodesChange:lr,onEdgesChange:ao,noDragClassName:Nn="nodrag",noWheelClassName:Gn="nowheel",noPanClassName:Pn="nopan",fitView:zr=!1,fitViewOptions:ot,connectOnClick:yt=!0,attributionPosition:At,proOptions:qt,defaultEdgeOptions:gn,elevateNodesOnSelect:Sr=!0,elevateEdgesOnSelect:Dt=!1,disableKeyboardA11y:wn=!1,autoPanOnConnect:Zn=!0,autoPanOnNodeDrag:ri=!0,connectionRadius:Ur=20,isValidConnection:Ii,onError:so,style:Ci,id:Qn,nodeDragThreshold:uo,...Oi},ra)=>{const st=Qn||"1";return re.createElement("div",{...Oi,style:{...Ci,...bO},ref:ra,className:Sn(["react-flow",a]),"data-testid":"rf__wrapper",id:Qn},re.createElement(zv,null,re.createElement(pO,{onInit:p,onMove:m,onMoveStart:y,onMoveEnd:x,onNodeClick:f,onEdgeClick:h,onNodeMouseEnter:z,onNodeMouseMove:te,onNodeMouseLeave:F,onNodeContextMenu:le,onNodeDoubleClick:ae,nodeTypes:u,edgeTypes:c,connectionLineType:ie,connectionLineStyle:ue,connectionLineComponent:we,connectionLineContainerStyle:ke,selectionKeyCode:Re,selectionOnDrag:je,selectionMode:Ye,deleteKeyCode:Me,multiSelectionKeyCode:Se,panActivationKeyCode:qe,zoomActivationKeyCode:rt,onlyRenderVisibleElements:Tt,selectNodesOnDrag:Xe,defaultViewport:sn,translateExtent:Qt,minZoom:zt,maxZoom:un,preventScrolling:Ut,zoomOnScroll:cn,zoomOnPinch:dn,zoomOnDoubleClick:Lt,panOnScroll:_t,panOnScrollSpeed:Bt,panOnScrollMode:Vt,panOnDrag:$e,onPaneClick:Ht,onPaneMouseEnter:fe,onPaneMouseMove:be,onPaneMouseLeave:de,onPaneScroll:Ce,onPaneContextMenu:We,onSelectionContextMenu:Z,onSelectionStart:ye,onSelectionEnd:pe,onEdgeContextMenu:Ve,onEdgeDoubleClick:Ze,onEdgeMouseEnter:Tn,onEdgeMouseMove:ct,onEdgeMouseLeave:$t,onReconnect:Et??jn,onReconnectStart:Rt??_r,onReconnectEnd:sr??Er,reconnectRadius:ur??cr,defaultMarkerColor:Yt,noDragClassName:Nn,noWheelClassName:Gn,noPanClassName:Pn,elevateEdgesOnSelect:Dt,rfId:st,disableKeyboardA11y:wn,nodeOrigin:Be,nodeExtent:tn}),re.createElement(lC,{nodes:e,edges:t,defaultNodes:n,defaultEdges:i,onConnect:b,onConnectStart:N,onConnectEnd:S,onClickConnectStart:C,onClickConnectEnd:M,nodesDraggable:it,nodesConnectable:St,nodesFocusable:et,edgesFocusable:Ft,edgesUpdatable:jt,elementsSelectable:bt,elevateNodesOnSelect:Sr,minZoom:zt,maxZoom:un,nodeExtent:tn,onNodesChange:lr,onEdgesChange:ao,snapToGrid:xt,snapGrid:He,connectionMode:W,translateExtent:Qt,connectOnClick:yt,defaultEdgeOptions:gn,fitView:zr,fitViewOptions:ot,onNodesDelete:J,onEdgesDelete:Y,onNodeDragStart:U,onNodeDrag:Q,onNodeDragStop:ne,onSelectionDrag:R,onSelectionDragStart:ge,onSelectionDragStop:se,noPanClassName:Pn,nodeOrigin:Be,rfId:st,autoPanOnConnect:Zn,autoPanOnNodeDrag:ri,onError:so,connectionRadius:Ur,isValidConnection:Ii,nodeDragThreshold:uo}),re.createElement(uC,{onSelectionChange:ce}),ze,re.createElement(LI,{proOptions:qt,position:At}),re.createElement(mC,{rfId:st,disableKeyboardA11y:wn})))});Uv.displayName="ReactFlow";function Yv(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[i,a]of e)if(!Object.is(a,t.get(i)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(e[i],t[i]))return!1;return!0}const Vv=({id:e,x:t,y:n,width:i,height:a,style:u,color:c,strokeColor:f,strokeWidth:h,className:p,borderRadius:m,shapeRendering:y,onClick:x,selected:b})=>{const{background:N,backgroundColor:S}=u||{},C=c||N||S;return re.createElement("rect",{className:Sn(["react-flow__minimap-node",{selected:b},p]),x:t,y:n,rx:m,ry:m,width:i,height:a,fill:C,stroke:f,strokeWidth:h,shapeRendering:y,onClick:x?M=>x(M,e):void 0})};Vv.displayName="MiniMapNode";var _O=k.memo(Vv);const EO=e=>e.nodeOrigin,SO=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),Ff=e=>e instanceof Function?e:()=>e;function TO({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:i=5,nodeStrokeWidth:a=2,nodeComponent:u=_O,onClick:c}){const f=Mt(SO,Yv),h=Mt(EO),p=Ff(t),m=Ff(e),y=Ff(n),x=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return re.createElement(re.Fragment,null,f.map(b=>{const{x:N,y:S}=Yo(b,h).positionAbsolute;return re.createElement(u,{key:b.id,x:N,y:S,width:b.width,height:b.height,style:b.style,selected:b.selected,className:y(b),color:p(b),borderRadius:i,strokeColor:m(b),strokeWidth:a,shapeRendering:x,onClick:c,id:b.id})}))}var NO=k.memo(TO);const kO=200,IO=150,CO=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?FI(nl(t,e.nodeOrigin),n):n,rfId:e.rfId}},OO="react-flow__minimap-desc";function qv({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:i="#e2e2e2",nodeClassName:a="",nodeBorderRadius:u=5,nodeStrokeWidth:c=2,nodeComponent:f,maskColor:h="rgb(240, 240, 240, 0.6)",maskStrokeColor:p="none",maskStrokeWidth:m=1,position:y="bottom-right",onClick:x,onNodeClick:b,pannable:N=!1,zoomable:S=!1,ariaLabel:C="React Flow mini map",inversePan:M=!1,zoomStep:z=10,offsetScale:te=5}){const F=mn(),le=k.useRef(null),{boundingRect:ae,viewBB:U,rfId:Q}=Mt(CO,Yv),ne=(e==null?void 0:e.width)??kO,J=(e==null?void 0:e.height)??IO,Y=ae.width/ne,ce=ae.height/J,ge=Math.max(Y,ce),R=ge*ne,se=ge*J,Z=te*ge,ye=ae.x-(R-ae.width)/2-Z,pe=ae.y-(se-ae.height)/2-Z,W=R+Z*2,ie=se+Z*2,ue=`${OO}-${Q}`,we=k.useRef(0);we.current=ge,k.useEffect(()=>{if(le.current){const Re=vr(le.current),je=Se=>{const{transform:rt,d3Selection:xt,d3Zoom:He}=F.getState();if(Se.sourceEvent.type!=="wheel"||!xt||!He)return;const Tt=-Se.sourceEvent.deltaY*(Se.sourceEvent.deltaMode===1?.05:Se.sourceEvent.deltaMode?1:.002)*z,Xe=rt[2]*Math.pow(2,Tt);He.scaleTo(xt,Xe)},Ye=Se=>{const{transform:rt,d3Selection:xt,d3Zoom:He,translateExtent:Tt,width:Xe,height:it}=F.getState();if(Se.sourceEvent.type!=="mousemove"||!xt||!He)return;const St=we.current*Math.max(1,rt[2])*(M?-1:1),et={x:rt[0]-Se.sourceEvent.movementX*St,y:rt[1]-Se.sourceEvent.movementY*St},Be=[[0,0],[Xe,it]],Ft=xi.translate(et.x,et.y).scale(rt[2]),jt=He.constrain()(Ft,Be,Tt);He.transform(xt,jt)},qe=tv().on("zoom",N?Ye:null).on("zoom.wheel",S?je:null);return Re.call(qe),()=>{Re.on("zoom",null)}}},[N,S,M,z]);const ke=x?Re=>{const je=Mr(Re);x(Re,{x:je[0],y:je[1]})}:void 0,Me=b?(Re,je)=>{const Ye=F.getState().nodeInternals.get(je);b(Re,Ye)}:void 0;return re.createElement(Js,{position:y,style:e,className:Sn(["react-flow__minimap",t]),"data-testid":"rf__minimap"},re.createElement("svg",{width:ne,height:J,viewBox:`${ye} ${pe} ${W} ${ie}`,role:"img","aria-labelledby":ue,ref:le,onClick:ke},C&&re.createElement("title",{id:ue},C),re.createElement(NO,{onClick:Me,nodeColor:i,nodeStrokeColor:n,nodeBorderRadius:u,nodeClassName:a,nodeStrokeWidth:c,nodeComponent:f}),re.createElement("path",{className:"react-flow__minimap-mask",d:`M${ye-Z},${pe-Z}h${W+Z*2}v${ie+Z*2}h${-W-Z*2}z
        M${U.x},${U.y}h${U.width}v${U.height}h${-U.width}z`,fill:h,fillRule:"evenodd",stroke:p,strokeWidth:m,pointerEvents:"none"})))}qv.displayName="MiniMap";var AO=k.memo(qv);function DO(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[i,a]of e)if(!Object.is(a,t.get(i)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(e[i],t[i]))return!1;return!0}function PO(){return re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},re.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function RO(){return re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},re.createElement("path",{d:"M0 0h32v4.2H0z"}))}function MO(){return re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},re.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function LO(){return re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},re.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function $O(){return re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},re.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const js=({children:e,className:t,...n})=>re.createElement("button",{type:"button",className:Sn(["react-flow__controls-button",t]),...n},e);js.displayName="ControlButton";const WO=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),Xv=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:i=!0,fitViewOptions:a,onZoomIn:u,onZoomOut:c,onFitView:f,onInteractiveChange:h,className:p,children:m,position:y="bottom-left"})=>{const x=mn(),[b,N]=k.useState(!1),{isInteractive:S,minZoomReached:C,maxZoomReached:M}=Mt(WO,DO),{zoomIn:z,zoomOut:te,fitView:F}=vh();if(k.useEffect(()=>{N(!0)},[]),!b)return null;const le=()=>{z(),u==null||u()},ae=()=>{te(),c==null||c()},U=()=>{F(a),f==null||f()},Q=()=>{x.setState({nodesDraggable:!S,nodesConnectable:!S,elementsSelectable:!S}),h==null||h(!S)};return re.createElement(Js,{className:Sn(["react-flow__controls",p]),position:y,style:e,"data-testid":"rf__controls"},t&&re.createElement(re.Fragment,null,re.createElement(js,{onClick:le,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:M},re.createElement(PO,null)),re.createElement(js,{onClick:ae,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:C},re.createElement(RO,null))),n&&re.createElement(js,{className:"react-flow__controls-fitview",onClick:U,title:"fit view","aria-label":"fit view"},re.createElement(MO,null)),i&&re.createElement(js,{className:"react-flow__controls-interactive",onClick:Q,title:"toggle interactivity","aria-label":"toggle interactivity"},S?re.createElement($O,null):re.createElement(LO,null)),m)};Xv.displayName="Controls";var FO=k.memo(Xv);function jO(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[i,a]of e)if(!Object.is(a,t.get(i)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(e[i],t[i]))return!1;return!0}var jr;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(jr||(jr={}));function BO({color:e,dimensions:t,lineWidth:n}){return re.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function HO({color:e,radius:t}){return re.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const KO={[jr.Dots]:"#91919a",[jr.Lines]:"#eee",[jr.Cross]:"#e2e2e2"},zO={[jr.Dots]:1,[jr.Lines]:1,[jr.Cross]:6},UO=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Gv({id:e,variant:t=jr.Dots,gap:n=20,size:i,lineWidth:a=1,offset:u=2,color:c,style:f,className:h}){const p=k.useRef(null),{transform:m,patternId:y}=Mt(UO,jO),x=c||KO[t],b=i||zO[t],N=t===jr.Dots,S=t===jr.Cross,C=Array.isArray(n)?n:[n,n],M=[C[0]*m[2]||1,C[1]*m[2]||1],z=b*m[2],te=S?[z,z]:M,F=N?[z/u,z/u]:[te[0]/u,te[1]/u];return re.createElement("svg",{className:Sn(["react-flow__background",h]),style:{...f,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:p,"data-testid":"rf__background"},re.createElement("pattern",{id:y+e,x:m[0]%M[0],y:m[1]%M[1],width:M[0],height:M[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${F[0]},-${F[1]})`},N?re.createElement(HO,{color:x,radius:z/u}):re.createElement(BO,{dimensions:te,color:x,lineWidth:a})),re.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${y+e})`}))}Gv.displayName="Background";var YO=k.memo(Gv);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var VO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ni=(e,t)=>{const n=k.forwardRef(({color:i="currentColor",size:a=24,strokeWidth:u=2,absoluteStrokeWidth:c,className:f="",children:h,...p},m)=>k.createElement("svg",{ref:m,...VO,width:a,height:a,stroke:i,strokeWidth:c?Number(u)*24/Number(a):u,className:["lucide",`lucide-${qO(e)}`,f].join(" "),...p},[...t.map(([y,x])=>k.createElement(y,x)),...Array.isArray(h)?h:[h]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XO=Ni("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GO=Ni("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZO=Ni("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QO=Ni("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JO=Ni("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tg=Ni("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=Ni("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eA=Ni("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=Ni("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var Qv={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(Lr,function(){var n=function(s,d){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,w){g.__proto__=w}||function(g,w){for(var E in w)Object.prototype.hasOwnProperty.call(w,E)&&(g[E]=w[E])})(s,d)},i=function(){return(i=Object.assign||function(s){for(var d,g=1,w=arguments.length;g<w;g++)for(var E in d=arguments[g])Object.prototype.hasOwnProperty.call(d,E)&&(s[E]=d[E]);return s}).apply(this,arguments)};function a(s,d,g){for(var w,E=0,A=d.length;E<A;E++)!w&&E in d||((w=w||Array.prototype.slice.call(d,0,E))[E]=d[E]);return s.concat(w||Array.prototype.slice.call(d))}var u=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Lr,c=Object.keys,f=Array.isArray;function h(s,d){return typeof d!="object"||c(d).forEach(function(g){s[g]=d[g]}),s}typeof Promise>"u"||u.Promise||(u.Promise=Promise);var p=Object.getPrototypeOf,m={}.hasOwnProperty;function y(s,d){return m.call(s,d)}function x(s,d){typeof d=="function"&&(d=d(p(s))),(typeof Reflect>"u"?c:Reflect.ownKeys)(d).forEach(function(g){N(s,g,d[g])})}var b=Object.defineProperty;function N(s,d,g,w){b(s,d,h(g&&y(g,"get")&&typeof g.get=="function"?{get:g.get,set:g.set,configurable:!0}:{value:g,configurable:!0,writable:!0},w))}function S(s){return{from:function(d){return s.prototype=Object.create(d.prototype),N(s.prototype,"constructor",s),{extend:x.bind(null,s.prototype)}}}}var C=Object.getOwnPropertyDescriptor,M=[].slice;function z(s,d,g){return M.call(s,d,g)}function te(s,d){return d(s)}function F(s){if(!s)throw new Error("Assertion Failed")}function le(s){u.setImmediate?setImmediate(s):setTimeout(s,0)}function ae(s,d){if(typeof d=="string"&&y(s,d))return s[d];if(!d)return s;if(typeof d!="string"){for(var g=[],w=0,E=d.length;w<E;++w){var A=ae(s,d[w]);g.push(A)}return g}var $=d.indexOf(".");if($!==-1){var H=s[d.substr(0,$)];return H==null?void 0:ae(H,d.substr($+1))}}function U(s,d,g){if(s&&d!==void 0&&!("isFrozen"in Object&&Object.isFrozen(s)))if(typeof d!="string"&&"length"in d){F(typeof g!="string"&&"length"in g);for(var w=0,E=d.length;w<E;++w)U(s,d[w],g[w])}else{var A,$,H=d.indexOf(".");H!==-1?(A=d.substr(0,H),($=d.substr(H+1))===""?g===void 0?f(s)&&!isNaN(parseInt(A))?s.splice(A,1):delete s[A]:s[A]=g:U(H=!(H=s[A])||!y(s,A)?s[A]={}:H,$,g)):g===void 0?f(s)&&!isNaN(parseInt(d))?s.splice(d,1):delete s[d]:s[d]=g}}function Q(s){var d,g={};for(d in s)y(s,d)&&(g[d]=s[d]);return g}var ne=[].concat;function J(s){return ne.apply([],s)}var Tr="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(J([8,16,32,64].map(function(s){return["Int","Uint","Float"].map(function(d){return d+s+"Array"})}))).filter(function(s){return u[s]}),Y=new Set(Tr.map(function(s){return u[s]})),ce=null;function ge(s){return ce=new WeakMap,s=function d(g){if(!g||typeof g!="object")return g;var w=ce.get(g);if(w)return w;if(f(g)){w=[],ce.set(g,w);for(var E=0,A=g.length;E<A;++E)w.push(d(g[E]))}else if(Y.has(g.constructor))w=g;else{var $,H=p(g);for($ in w=H===Object.prototype?{}:Object.create(H),ce.set(g,w),g)y(g,$)&&(w[$]=d(g[$]))}return w}(s),ce=null,s}var R={}.toString;function se(s){return R.call(s).slice(8,-1)}var Z=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ye=typeof Z=="symbol"?function(s){var d;return s!=null&&(d=s[Z])&&d.apply(s)}:function(){return null};function pe(s,d){return d=s.indexOf(d),0<=d&&s.splice(d,1),0<=d}var W={};function ie(s){var d,g,w,E;if(arguments.length===1){if(f(s))return s.slice();if(this===W&&typeof s=="string")return[s];if(E=ye(s)){for(g=[];!(w=E.next()).done;)g.push(w.value);return g}if(s==null)return[s];if(typeof(d=s.length)!="number")return[s];for(g=new Array(d);d--;)g[d]=s[d];return g}for(d=arguments.length,g=new Array(d);d--;)g[d]=arguments[d];return g}var ue=typeof Symbol<"u"?function(s){return s[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Qt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Hn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Qt),we={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ke(s,d){this.name=s,this.message=d}function Me(s,d){return s+". Errors: "+Object.keys(d).map(function(g){return d[g].toString()}).filter(function(g,w,E){return E.indexOf(g)===w}).join(`
`)}function Re(s,d,g,w){this.failures=d,this.failedKeys=w,this.successCount=g,this.message=Me(s,d)}function je(s,d){this.name="BulkError",this.failures=Object.keys(d).map(function(g){return d[g]}),this.failuresByPos=d,this.message=Me(s,this.failures)}S(ke).from(Error).extend({toString:function(){return this.name+": "+this.message}}),S(Re).from(ke),S(je).from(ke);var Ye=Hn.reduce(function(s,d){return s[d]=d+"Error",s},{}),qe=ke,Se=Hn.reduce(function(s,d){var g=d+"Error";function w(E,A){this.name=g,E?typeof E=="string"?(this.message="".concat(E).concat(A?`
 `+A:""),this.inner=A||null):typeof E=="object"&&(this.message="".concat(E.name," ").concat(E.message),this.inner=E):(this.message=we[d]||g,this.inner=null)}return S(w).from(qe),s[d]=w,s},{});Se.Syntax=SyntaxError,Se.Type=TypeError,Se.Range=RangeError;var rt=Qt.reduce(function(s,d){return s[d+"Error"]=Se[d],s},{}),xt=Hn.reduce(function(s,d){return["Syntax","Type","Range"].indexOf(d)===-1&&(s[d+"Error"]=Se[d]),s},{});function He(){}function Tt(s){return s}function Xe(s,d){return s==null||s===Tt?d:function(g){return d(s(g))}}function it(s,d){return function(){s.apply(this,arguments),d.apply(this,arguments)}}function St(s,d){return s===He?d:function(){var g=s.apply(this,arguments);g!==void 0&&(arguments[0]=g);var w=this.onsuccess,E=this.onerror;this.onsuccess=null,this.onerror=null;var A=d.apply(this,arguments);return w&&(this.onsuccess=this.onsuccess?it(w,this.onsuccess):w),E&&(this.onerror=this.onerror?it(E,this.onerror):E),A!==void 0?A:g}}function et(s,d){return s===He?d:function(){s.apply(this,arguments);var g=this.onsuccess,w=this.onerror;this.onsuccess=this.onerror=null,d.apply(this,arguments),g&&(this.onsuccess=this.onsuccess?it(g,this.onsuccess):g),w&&(this.onerror=this.onerror?it(w,this.onerror):w)}}function Be(s,d){return s===He?d:function(g){var w=s.apply(this,arguments);h(g,w);var E=this.onsuccess,A=this.onerror;return this.onsuccess=null,this.onerror=null,g=d.apply(this,arguments),E&&(this.onsuccess=this.onsuccess?it(E,this.onsuccess):E),A&&(this.onerror=this.onerror?it(A,this.onerror):A),w===void 0?g===void 0?void 0:g:h(w,g)}}function Ft(s,d){return s===He?d:function(){return d.apply(this,arguments)!==!1&&s.apply(this,arguments)}}function jt(s,d){return s===He?d:function(){var g=s.apply(this,arguments);if(g&&typeof g.then=="function"){for(var w=this,E=arguments.length,A=new Array(E);E--;)A[E]=arguments[E];return g.then(function(){return d.apply(w,A)})}return d.apply(this,arguments)}}xt.ModifyError=Re,xt.DexieError=ke,xt.BulkError=je;var bt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function sn(s){bt=s}var zt={},un=100,Tr=typeof Promise>"u"?[]:function(){var s=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[s,p(s),s];var d=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[d,p(d),s]}(),Qt=Tr[0],Hn=Tr[1],Tr=Tr[2],Hn=Hn&&Hn.then,Ut=Qt&&Qt.constructor,tn=!!Tr,Yt=function(s,d){Ht.push([s,d]),dn&&(queueMicrotask(ct),dn=!1)},cn=!0,dn=!0,_t=[],Bt=[],Vt=Tt,Lt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:He,pgp:!1,env:{},finalize:He},$e=Lt,Ht=[],fe=0,be=[];function de(s){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var d=this._PSD=$e;if(typeof s!="function"){if(s!==zt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ze(this,this._value))}this._state=null,this._value=null,++d.ref,function g(w,E){try{E(function(A){if(w._state===null){if(A===w)throw new TypeError("A promise cannot be resolved with itself.");var $=w._lib&&$t();A&&typeof A.then=="function"?g(w,function(H,G){A instanceof de?A._then(H,G):A.then(H,G)}):(w._state=!0,w._value=A,Ve(w)),$&&jn()}},ze.bind(null,w))}catch(A){ze(w,A)}}(this,s)}var Ce={get:function(){var s=$e,d=lr;function g(w,E){var A=this,$=!s.global&&(s!==$e||d!==lr),H=$&&!Pn(),G=new de(function(I,L){Ze(A,new We(gn(w,s,$,H),gn(E,s,$,H),I,L,s))});return this._consoleTask&&(G._consoleTask=this._consoleTask),G}return g.prototype=zt,g},set:function(s){N(this,"then",s&&s.prototype===zt?Ce:{get:function(){return s},set:Ce.set})}};function We(s,d,g,w,E){this.onFulfilled=typeof s=="function"?s:null,this.onRejected=typeof d=="function"?d:null,this.resolve=g,this.reject=w,this.psd=E}function ze(s,d){var g,w;Bt.push(d),s._state===null&&(g=s._lib&&$t(),d=Vt(d),s._state=!1,s._value=d,w=s,_t.some(function(E){return E._value===w._value})||_t.push(w),Ve(s),g&&jn())}function Ve(s){var d=s._listeners;s._listeners=[];for(var g=0,w=d.length;g<w;++g)Ze(s,d[g]);var E=s._PSD;--E.ref||E.finalize(),fe===0&&(++fe,Yt(function(){--fe==0&&_r()},[]))}function Ze(s,d){if(s._state!==null){var g=s._state?d.onFulfilled:d.onRejected;if(g===null)return(s._state?d.resolve:d.reject)(s._value);++d.psd.ref,++fe,Yt(Tn,[g,s,d])}else s._listeners.push(d)}function Tn(s,d,g){try{var w,E=d._value;!d._state&&Bt.length&&(Bt=[]),w=bt&&d._consoleTask?d._consoleTask.run(function(){return s(E)}):s(E),d._state||Bt.indexOf(E)!==-1||function(A){for(var $=_t.length;$;)if(_t[--$]._value===A._value)return _t.splice($,1)}(d),g.resolve(w)}catch(A){g.reject(A)}finally{--fe==0&&_r(),--g.psd.ref||g.psd.finalize()}}function ct(){qt(Lt,function(){$t()&&jn()})}function $t(){var s=cn;return dn=cn=!1,s}function jn(){var s,d,g;do for(;0<Ht.length;)for(s=Ht,Ht=[],g=s.length,d=0;d<g;++d){var w=s[d];w[0].apply(null,w[1])}while(0<Ht.length);dn=cn=!0}function _r(){var s=_t;_t=[],s.forEach(function(w){w._PSD.onunhandled.call(null,w._value,w)});for(var d=be.slice(0),g=d.length;g;)d[--g]()}function Er(s){return new de(zt,!1,s)}function Et(s,d){var g=$e;return function(){var w=$t(),E=$e;try{return yt(g,!0),s.apply(this,arguments)}catch(A){d&&d(A)}finally{yt(E,!1),w&&jn()}}}x(de.prototype,{then:Ce,_then:function(s,d){Ze(this,new We(null,null,s,d,$e))},catch:function(s){if(arguments.length===1)return this.then(null,s);var d=s,g=arguments[1];return typeof d=="function"?this.then(null,function(w){return(w instanceof d?g:Er)(w)}):this.then(null,function(w){return(w&&w.name===d?g:Er)(w)})},finally:function(s){return this.then(function(d){return de.resolve(s()).then(function(){return d})},function(d){return de.resolve(s()).then(function(){return Er(d)})})},timeout:function(s,d){var g=this;return s<1/0?new de(function(w,E){var A=setTimeout(function(){return E(new Se.Timeout(d))},s);g.then(w,E).finally(clearTimeout.bind(null,A))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&N(de.prototype,Symbol.toStringTag,"Dexie.Promise"),Lt.env=At(),x(de,{all:function(){var s=ie.apply(null,arguments).map(zr);return new de(function(d,g){s.length===0&&d([]);var w=s.length;s.forEach(function(E,A){return de.resolve(E).then(function($){s[A]=$,--w||d(s)},g)})})},resolve:function(s){return s instanceof de?s:s&&typeof s.then=="function"?new de(function(d,g){s.then(d,g)}):new de(zt,!0,s)},reject:Er,race:function(){var s=ie.apply(null,arguments).map(zr);return new de(function(d,g){s.map(function(w){return de.resolve(w).then(d,g)})})},PSD:{get:function(){return $e},set:function(s){return $e=s}},totalEchoes:{get:function(){return lr}},newPSD:Nn,usePSD:qt,scheduler:{get:function(){return Yt},set:function(s){Yt=s}},rejectionMapper:{get:function(){return Vt},set:function(s){Vt=s}},follow:function(s,d){return new de(function(g,w){return Nn(function(E,A){var $=$e;$.unhandleds=[],$.onunhandled=A,$.finalize=it(function(){var H,G=this;H=function(){G.unhandleds.length===0?E():A(G.unhandleds[0])},be.push(function I(){H(),be.splice(be.indexOf(I),1)}),++fe,Yt(function(){--fe==0&&_r()},[])},$.finalize),s()},d,g,w)})}}),Ut&&(Ut.allSettled&&N(de,"allSettled",function(){var s=ie.apply(null,arguments).map(zr);return new de(function(d){s.length===0&&d([]);var g=s.length,w=new Array(g);s.forEach(function(E,A){return de.resolve(E).then(function($){return w[A]={status:"fulfilled",value:$}},function($){return w[A]={status:"rejected",reason:$}}).then(function(){return--g||d(w)})})})}),Ut.any&&typeof AggregateError<"u"&&N(de,"any",function(){var s=ie.apply(null,arguments).map(zr);return new de(function(d,g){s.length===0&&g(new AggregateError([]));var w=s.length,E=new Array(w);s.forEach(function(A,$){return de.resolve(A).then(function(H){return d(H)},function(H){E[$]=H,--w||g(new AggregateError(E))})})})}),Ut.withResolvers&&(de.withResolvers=Ut.withResolvers));var Rt={awaits:0,echoes:0,id:0},sr=0,ur=[],cr=0,lr=0,ao=0;function Nn(s,d,g,w){var E=$e,A=Object.create(E);return A.parent=E,A.ref=0,A.global=!1,A.id=++ao,Lt.env,A.env=tn?{Promise:de,PromiseProp:{value:de,configurable:!0,writable:!0},all:de.all,race:de.race,allSettled:de.allSettled,any:de.any,resolve:de.resolve,reject:de.reject}:{},d&&h(A,d),++E.ref,A.finalize=function(){--this.parent.ref||this.parent.finalize()},w=qt(A,s,g,w),A.ref===0&&A.finalize(),w}function Gn(){return Rt.id||(Rt.id=++sr),++Rt.awaits,Rt.echoes+=un,Rt.id}function Pn(){return!!Rt.awaits&&(--Rt.awaits==0&&(Rt.id=0),Rt.echoes=Rt.awaits*un,!0)}function zr(s){return Rt.echoes&&s&&s.constructor===Ut?(Gn(),s.then(function(d){return Pn(),d},function(d){return Pn(),Dt(d)})):s}function ot(){var s=ur[ur.length-1];ur.pop(),yt(s,!1)}function yt(s,d){var g,w=$e;(d?!Rt.echoes||cr++&&s===$e:!cr||--cr&&s===$e)||queueMicrotask(d?(function(E){++lr,Rt.echoes&&--Rt.echoes!=0||(Rt.echoes=Rt.awaits=Rt.id=0),ur.push($e),yt(E,!0)}).bind(null,s):ot),s!==$e&&($e=s,w===Lt&&(Lt.env=At()),tn&&(g=Lt.env.Promise,d=s.env,(w.global||s.global)&&(Object.defineProperty(u,"Promise",d.PromiseProp),g.all=d.all,g.race=d.race,g.resolve=d.resolve,g.reject=d.reject,d.allSettled&&(g.allSettled=d.allSettled),d.any&&(g.any=d.any))))}function At(){var s=u.Promise;return tn?{Promise:s,PromiseProp:Object.getOwnPropertyDescriptor(u,"Promise"),all:s.all,race:s.race,allSettled:s.allSettled,any:s.any,resolve:s.resolve,reject:s.reject}:{}}function qt(s,d,g,w,E){var A=$e;try{return yt(s,!0),d(g,w,E)}finally{yt(A,!1)}}function gn(s,d,g,w){return typeof s!="function"?s:function(){var E=$e;g&&Gn(),yt(d,!0);try{return s.apply(this,arguments)}finally{yt(E,!1),w&&queueMicrotask(Pn)}}}function Sr(s){Promise===Ut&&Rt.echoes===0?cr===0?s():enqueueNativeMicroTask(s):setTimeout(s,0)}(""+Hn).indexOf("[native code]")===-1&&(Gn=Pn=He);var Dt=de.reject,wn="",Zn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ri="String expected.",Ur=[],Ii="__dbnames",so="readonly",Ci="readwrite";function Qn(s,d){return s?d?function(){return s.apply(this,arguments)&&d.apply(this,arguments)}:s:d}var uo={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Oi(s){return typeof s!="string"||/\./.test(s)?function(d){return d}:function(d){return d[s]===void 0&&s in d&&delete(d=ge(d))[s],d}}function ra(){throw Se.Type()}function st(s,d){try{var g=wu(s),w=wu(d);if(g!==w)return g==="Array"?1:w==="Array"?-1:g==="binary"?1:w==="binary"?-1:g==="string"?1:w==="string"?-1:g==="Date"?1:w!=="Date"?NaN:-1;switch(g){case"number":case"Date":case"string":return d<s?1:s<d?-1:0;case"binary":return function(E,A){for(var $=E.length,H=A.length,G=$<H?$:H,I=0;I<G;++I)if(E[I]!==A[I])return E[I]<A[I]?-1:1;return $===H?0:$<H?-1:1}(Za(s),Za(d));case"Array":return function(E,A){for(var $=E.length,H=A.length,G=$<H?$:H,I=0;I<G;++I){var L=st(E[I],A[I]);if(L!==0)return L}return $===H?0:$<H?-1:1}(s,d)}}catch{}return NaN}function wu(s){var d=typeof s;return d!="object"?d:ArrayBuffer.isView(s)?"binary":(s=se(s),s==="ArrayBuffer"?"binary":s)}function Za(s){return s instanceof Uint8Array?s:ArrayBuffer.isView(s)?new Uint8Array(s.buffer,s.byteOffset,s.byteLength):new Uint8Array(s)}var Qa=(Ot.prototype._trans=function(s,d,g){var w=this._tx||$e.trans,E=this.name,A=bt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(s==="readonly"?"read":"write"," ").concat(this.name));function $(I,L,O){if(!O.schema[E])throw new Se.NotFound("Table "+E+" not part of transaction");return d(O.idbtrans,O)}var H=$t();try{var G=w&&w.db._novip===this.db._novip?w===$e.trans?w._promise(s,$,g):Nn(function(){return w._promise(s,$,g)},{trans:w,transless:$e.transless||$e}):function I(L,O,K,j){if(L.idbdb&&(L._state.openComplete||$e.letThrough||L._vip)){var q=L._createTransaction(O,K,L._dbSchema);try{q.create(),L._state.PR1398_maxLoop=3}catch(ee){return ee.name===Ye.InvalidState&&L.isOpen()&&0<--L._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),L.close({disableAutoOpen:!1}),L.open().then(function(){return I(L,O,K,j)})):Dt(ee)}return q._promise(O,function(ee,V){return Nn(function(){return $e.trans=q,j(ee,V,q)})}).then(function(ee){if(O==="readwrite")try{q.idbtrans.commit()}catch{}return O==="readonly"?ee:q._completion.then(function(){return ee})})}if(L._state.openComplete)return Dt(new Se.DatabaseClosed(L._state.dbOpenError));if(!L._state.isBeingOpened){if(!L._state.autoOpen)return Dt(new Se.DatabaseClosed);L.open().catch(He)}return L._state.dbReadyPromise.then(function(){return I(L,O,K,j)})}(this.db,s,[this.name],$);return A&&(G._consoleTask=A,G=G.catch(function(I){return console.trace(I),Dt(I)})),G}finally{H&&jn()}},Ot.prototype.get=function(s,d){var g=this;return s&&s.constructor===Object?this.where(s).first(d):s==null?Dt(new Se.Type("Invalid argument to Table.get()")):this._trans("readonly",function(w){return g.core.get({trans:w,key:s}).then(function(E){return g.hook.reading.fire(E)})}).then(d)},Ot.prototype.where=function(s){if(typeof s=="string")return new this.db.WhereClause(this,s);if(f(s))return new this.db.WhereClause(this,"[".concat(s.join("+"),"]"));var d=c(s);if(d.length===1)return this.where(d[0]).equals(s[d[0]]);var g=this.schema.indexes.concat(this.schema.primKey).filter(function(H){if(H.compound&&d.every(function(I){return 0<=H.keyPath.indexOf(I)})){for(var G=0;G<d.length;++G)if(d.indexOf(H.keyPath[G])===-1)return!1;return!0}return!1}).sort(function(H,G){return H.keyPath.length-G.keyPath.length})[0];if(g&&this.db._maxKey!==wn){var A=g.keyPath.slice(0,d.length);return this.where(A).equals(A.map(function(G){return s[G]}))}!g&&bt&&console.warn("The query ".concat(JSON.stringify(s)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(d.join("+"),"]"));var w=this.schema.idxByName;function E(H,G){return st(H,G)===0}var $=d.reduce(function(O,G){var I=O[0],L=O[1],O=w[G],K=s[G];return[I||O,I||!O?Qn(L,O&&O.multi?function(j){return j=ae(j,G),f(j)&&j.some(function(q){return E(K,q)})}:function(j){return E(K,ae(j,G))}):L]},[null,null]),A=$[0],$=$[1];return A?this.where(A.name).equals(s[A.keyPath]).filter($):g?this.filter($):this.where(d).equals("")},Ot.prototype.filter=function(s){return this.toCollection().and(s)},Ot.prototype.count=function(s){return this.toCollection().count(s)},Ot.prototype.offset=function(s){return this.toCollection().offset(s)},Ot.prototype.limit=function(s){return this.toCollection().limit(s)},Ot.prototype.each=function(s){return this.toCollection().each(s)},Ot.prototype.toArray=function(s){return this.toCollection().toArray(s)},Ot.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Ot.prototype.orderBy=function(s){return new this.db.Collection(new this.db.WhereClause(this,f(s)?"[".concat(s.join("+"),"]"):s))},Ot.prototype.reverse=function(){return this.toCollection().reverse()},Ot.prototype.mapToClass=function(s){var d,g=this.db,w=this.name;function E(){return d!==null&&d.apply(this,arguments)||this}(this.schema.mappedClass=s).prototype instanceof ra&&(function(G,I){if(typeof I!="function"&&I!==null)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");function L(){this.constructor=G}n(G,I),G.prototype=I===null?Object.create(I):(L.prototype=I.prototype,new L)}(E,d=s),Object.defineProperty(E.prototype,"db",{get:function(){return g},enumerable:!1,configurable:!0}),E.prototype.table=function(){return w},s=E);for(var A=new Set,$=s.prototype;$;$=p($))Object.getOwnPropertyNames($).forEach(function(G){return A.add(G)});function H(G){if(!G)return G;var I,L=Object.create(s.prototype);for(I in G)if(!A.has(I))try{L[I]=G[I]}catch{}return L}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=H,this.hook("reading",H),s},Ot.prototype.defineClass=function(){return this.mapToClass(function(s){h(this,s)})},Ot.prototype.add=function(s,d){var g=this,w=this.schema.primKey,E=w.auto,A=w.keyPath,$=s;return A&&E&&($=Oi(A)(s)),this._trans("readwrite",function(H){return g.core.mutate({trans:H,type:"add",keys:d!=null?[d]:null,values:[$]})}).then(function(H){return H.numFailures?de.reject(H.failures[0]):H.lastResult}).then(function(H){if(A)try{U(s,A,H)}catch{}return H})},Ot.prototype.update=function(s,d){return typeof s!="object"||f(s)?this.where(":id").equals(s).modify(d):(s=ae(s,this.schema.primKey.keyPath),s===void 0?Dt(new Se.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(s).modify(d))},Ot.prototype.put=function(s,d){var g=this,w=this.schema.primKey,E=w.auto,A=w.keyPath,$=s;return A&&E&&($=Oi(A)(s)),this._trans("readwrite",function(H){return g.core.mutate({trans:H,type:"put",values:[$],keys:d!=null?[d]:null})}).then(function(H){return H.numFailures?de.reject(H.failures[0]):H.lastResult}).then(function(H){if(A)try{U(s,A,H)}catch{}return H})},Ot.prototype.delete=function(s){var d=this;return this._trans("readwrite",function(g){return d.core.mutate({trans:g,type:"delete",keys:[s]})}).then(function(g){return g.numFailures?de.reject(g.failures[0]):void 0})},Ot.prototype.clear=function(){var s=this;return this._trans("readwrite",function(d){return s.core.mutate({trans:d,type:"deleteRange",range:uo})}).then(function(d){return d.numFailures?de.reject(d.failures[0]):void 0})},Ot.prototype.bulkGet=function(s){var d=this;return this._trans("readonly",function(g){return d.core.getMany({keys:s,trans:g}).then(function(w){return w.map(function(E){return d.hook.reading.fire(E)})})})},Ot.prototype.bulkAdd=function(s,d,g){var w=this,E=Array.isArray(d)?d:void 0,A=(g=g||(E?void 0:d))?g.allKeys:void 0;return this._trans("readwrite",function($){var I=w.schema.primKey,H=I.auto,I=I.keyPath;if(I&&E)throw new Se.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(E&&E.length!==s.length)throw new Se.InvalidArgument("Arguments objects and keys must have the same length");var G=s.length,I=I&&H?s.map(Oi(I)):s;return w.core.mutate({trans:$,type:"add",keys:E,values:I,wantResults:A}).then(function(q){var O=q.numFailures,K=q.results,j=q.lastResult,q=q.failures;if(O===0)return A?K:j;throw new je("".concat(w.name,".bulkAdd(): ").concat(O," of ").concat(G," operations failed"),q)})})},Ot.prototype.bulkPut=function(s,d,g){var w=this,E=Array.isArray(d)?d:void 0,A=(g=g||(E?void 0:d))?g.allKeys:void 0;return this._trans("readwrite",function($){var I=w.schema.primKey,H=I.auto,I=I.keyPath;if(I&&E)throw new Se.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(E&&E.length!==s.length)throw new Se.InvalidArgument("Arguments objects and keys must have the same length");var G=s.length,I=I&&H?s.map(Oi(I)):s;return w.core.mutate({trans:$,type:"put",keys:E,values:I,wantResults:A}).then(function(q){var O=q.numFailures,K=q.results,j=q.lastResult,q=q.failures;if(O===0)return A?K:j;throw new je("".concat(w.name,".bulkPut(): ").concat(O," of ").concat(G," operations failed"),q)})})},Ot.prototype.bulkUpdate=function(s){var d=this,g=this.core,w=s.map(function($){return $.key}),E=s.map(function($){return $.changes}),A=[];return this._trans("readwrite",function($){return g.getMany({trans:$,keys:w,cache:"clone"}).then(function(H){var G=[],I=[];s.forEach(function(O,K){var j=O.key,q=O.changes,ee=H[K];if(ee){for(var V=0,he=Object.keys(q);V<he.length;V++){var ve=he[V],me=q[ve];if(ve===d.schema.primKey.keyPath){if(st(me,j)!==0)throw new Se.Constraint("Cannot update primary key in bulkUpdate()")}else U(ee,ve,me)}A.push(K),G.push(j),I.push(ee)}});var L=G.length;return g.mutate({trans:$,type:"put",keys:G,values:I,updates:{keys:w,changeSpecs:E}}).then(function(O){var K=O.numFailures,j=O.failures;if(K===0)return L;for(var q=0,ee=Object.keys(j);q<ee.length;q++){var V,he=ee[q],ve=A[Number(he)];ve!=null&&(V=j[he],delete j[he],j[ve]=V)}throw new je("".concat(d.name,".bulkUpdate(): ").concat(K," of ").concat(L," operations failed"),j)})})})},Ot.prototype.bulkDelete=function(s){var d=this,g=s.length;return this._trans("readwrite",function(w){return d.core.mutate({trans:w,type:"delete",keys:s})}).then(function($){var E=$.numFailures,A=$.lastResult,$=$.failures;if(E===0)return A;throw new je("".concat(d.name,".bulkDelete(): ").concat(E," of ").concat(g," operations failed"),$)})},Ot);function Ot(){}function ii(s){function d($,H){if(H){for(var G=arguments.length,I=new Array(G-1);--G;)I[G-1]=arguments[G];return g[$].subscribe.apply(null,I),s}if(typeof $=="string")return g[$]}var g={};d.addEventType=A;for(var w=1,E=arguments.length;w<E;++w)A(arguments[w]);return d;function A($,H,G){if(typeof $!="object"){var I;H=H||Ft;var L={subscribers:[],fire:G=G||He,subscribe:function(O){L.subscribers.indexOf(O)===-1&&(L.subscribers.push(O),L.fire=H(L.fire,O))},unsubscribe:function(O){L.subscribers=L.subscribers.filter(function(K){return K!==O}),L.fire=L.subscribers.reduce(H,G)}};return g[$]=d[$]=L}c(I=$).forEach(function(O){var K=I[O];if(f(K))A(O,I[O][0],I[O][1]);else{if(K!=="asap")throw new Se.InvalidArgument("Invalid event config");var j=A(O,Tt,function(){for(var q=arguments.length,ee=new Array(q);q--;)ee[q]=arguments[q];j.subscribers.forEach(function(V){le(function(){V.apply(null,ee)})})})}})}}function co(s,d){return S(d).from({prototype:s}),d}function oi(s,d){return!(s.filter||s.algorithm||s.or)&&(d?s.justLimit:!s.replayFilter)}function Ai(s,d){s.filter=Qn(s.filter,d)}function ia(s,d,g){var w=s.replayFilter;s.replayFilter=w?function(){return Qn(w(),d())}:d,s.justLimit=g&&!w}function oa(s,d){if(s.isPrimKey)return d.primaryKey;var g=d.getIndexByKeyPath(s.index);if(!g)throw new Se.Schema("KeyPath "+s.index+" on object store "+d.name+" is not indexed");return g}function Ja(s,d,g){var w=oa(s,d.schema);return d.openCursor({trans:g,values:!s.keysOnly,reverse:s.dir==="prev",unique:!!s.unique,query:{index:w,range:s.range}})}function lo(s,d,g,w){var E=s.replayFilter?Qn(s.filter,s.replayFilter()):s.filter;if(s.or){var A={},$=function(H,G,I){var L,O;E&&!E(G,I,function(K){return G.stop(K)},function(K){return G.fail(K)})||((O=""+(L=G.primaryKey))=="[object ArrayBuffer]"&&(O=""+new Uint8Array(L)),y(A,O)||(A[O]=!0,d(H,G,I)))};return Promise.all([s.or._iterate($,g),aa(Ja(s,w,g),s.algorithm,$,!s.keysOnly&&s.valueMapper)])}return aa(Ja(s,w,g),Qn(s.algorithm,E),d,!s.keysOnly&&s.valueMapper)}function aa(s,d,g,w){var E=Et(w?function(A,$,H){return g(w(A),$,H)}:g);return s.then(function(A){if(A)return A.start(function(){var $=function(){return A.continue()};d&&!d(A,function(H){return $=H},function(H){A.stop(H),$=He},function(H){A.fail(H),$=He})||E(A.value,A,function(H){return $=H}),$()})})}var Tr=Symbol(),Di=(sa.prototype.execute=function(s){if(this.add!==void 0){var d=this.add;if(f(d))return a(a([],f(s)?s:[],!0),d).sort();if(typeof d=="number")return(Number(s)||0)+d;if(typeof d=="bigint")try{return BigInt(s)+d}catch{return BigInt(0)+d}throw new TypeError("Invalid term ".concat(d))}if(this.remove!==void 0){var g=this.remove;if(f(g))return f(s)?s.filter(function(w){return!g.includes(w)}).sort():[];if(typeof g=="number")return Number(s)-g;if(typeof g=="bigint")try{return BigInt(s)-g}catch{return BigInt(0)-g}throw new TypeError("Invalid subtrahend ".concat(g))}return d=(d=this.replacePrefix)===null||d===void 0?void 0:d[0],d&&typeof s=="string"&&s.startsWith(d)?this.replacePrefix[1]+s.substring(d.length):s},sa);function sa(s){Object.assign(this,s)}var es=(ht.prototype._read=function(s,d){var g=this._ctx;return g.error?g.table._trans(null,Dt.bind(null,g.error)):g.table._trans("readonly",s).then(d)},ht.prototype._write=function(s){var d=this._ctx;return d.error?d.table._trans(null,Dt.bind(null,d.error)):d.table._trans("readwrite",s,"locked")},ht.prototype._addAlgorithm=function(s){var d=this._ctx;d.algorithm=Qn(d.algorithm,s)},ht.prototype._iterate=function(s,d){return lo(this._ctx,s,d,this._ctx.table.core)},ht.prototype.clone=function(s){var d=Object.create(this.constructor.prototype),g=Object.create(this._ctx);return s&&h(g,s),d._ctx=g,d},ht.prototype.raw=function(){return this._ctx.valueMapper=null,this},ht.prototype.each=function(s){var d=this._ctx;return this._read(function(g){return lo(d,s,g,d.table.core)})},ht.prototype.count=function(s){var d=this;return this._read(function(g){var w=d._ctx,E=w.table.core;if(oi(w,!0))return E.count({trans:g,query:{index:oa(w,E.schema),range:w.range}}).then(function($){return Math.min($,w.limit)});var A=0;return lo(w,function(){return++A,!1},g,E).then(function(){return A})}).then(s)},ht.prototype.sortBy=function(s,d){var g=s.split(".").reverse(),w=g[0],E=g.length-1;function A(G,I){return I?A(G[g[I]],I-1):G[w]}var $=this._ctx.dir==="next"?1:-1;function H(G,I){return st(A(G,E),A(I,E))*$}return this.toArray(function(G){return G.sort(H)}).then(d)},ht.prototype.toArray=function(s){var d=this;return this._read(function(g){var w=d._ctx;if(w.dir==="next"&&oi(w,!0)&&0<w.limit){var E=w.valueMapper,A=oa(w,w.table.core.schema);return w.table.core.query({trans:g,limit:w.limit,values:!0,query:{index:A,range:w.range}}).then(function(H){return H=H.result,E?H.map(E):H})}var $=[];return lo(w,function(H){return $.push(H)},g,w.table.core).then(function(){return $})},s)},ht.prototype.offset=function(s){var d=this._ctx;return s<=0||(d.offset+=s,oi(d)?ia(d,function(){var g=s;return function(w,E){return g===0||(g===1?--g:E(function(){w.advance(g),g=0}),!1)}}):ia(d,function(){var g=s;return function(){return--g<0}})),this},ht.prototype.limit=function(s){return this._ctx.limit=Math.min(this._ctx.limit,s),ia(this._ctx,function(){var d=s;return function(g,w,E){return--d<=0&&w(E),0<=d}},!0),this},ht.prototype.until=function(s,d){return Ai(this._ctx,function(g,w,E){return!s(g.value)||(w(E),d)}),this},ht.prototype.first=function(s){return this.limit(1).toArray(function(d){return d[0]}).then(s)},ht.prototype.last=function(s){return this.reverse().first(s)},ht.prototype.filter=function(s){var d;return Ai(this._ctx,function(g){return s(g.value)}),(d=this._ctx).isMatch=Qn(d.isMatch,s),this},ht.prototype.and=function(s){return this.filter(s)},ht.prototype.or=function(s){return new this.db.WhereClause(this._ctx.table,s,this)},ht.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ht.prototype.desc=function(){return this.reverse()},ht.prototype.eachKey=function(s){var d=this._ctx;return d.keysOnly=!d.isMatch,this.each(function(g,w){s(w.key,w)})},ht.prototype.eachUniqueKey=function(s){return this._ctx.unique="unique",this.eachKey(s)},ht.prototype.eachPrimaryKey=function(s){var d=this._ctx;return d.keysOnly=!d.isMatch,this.each(function(g,w){s(w.primaryKey,w)})},ht.prototype.keys=function(s){var d=this._ctx;d.keysOnly=!d.isMatch;var g=[];return this.each(function(w,E){g.push(E.key)}).then(function(){return g}).then(s)},ht.prototype.primaryKeys=function(s){var d=this._ctx;if(d.dir==="next"&&oi(d,!0)&&0<d.limit)return this._read(function(w){var E=oa(d,d.table.core.schema);return d.table.core.query({trans:w,values:!1,limit:d.limit,query:{index:E,range:d.range}})}).then(function(w){return w.result}).then(s);d.keysOnly=!d.isMatch;var g=[];return this.each(function(w,E){g.push(E.primaryKey)}).then(function(){return g}).then(s)},ht.prototype.uniqueKeys=function(s){return this._ctx.unique="unique",this.keys(s)},ht.prototype.firstKey=function(s){return this.limit(1).keys(function(d){return d[0]}).then(s)},ht.prototype.lastKey=function(s){return this.reverse().firstKey(s)},ht.prototype.distinct=function(){var s=this._ctx,s=s.index&&s.table.schema.idxByName[s.index];if(!s||!s.multi)return this;var d={};return Ai(this._ctx,function(E){var w=E.primaryKey.toString(),E=y(d,w);return d[w]=!0,!E}),this},ht.prototype.modify=function(s){var d=this,g=this._ctx;return this._write(function(w){var E,A,$;$=typeof s=="function"?s:(E=c(s),A=E.length,function(V){for(var he=!1,ve=0;ve<A;++ve){var me=E[ve],xe=s[me],Oe=ae(V,me);xe instanceof Di?(U(V,me,xe.execute(Oe)),he=!0):Oe!==xe&&(U(V,me,xe),he=!0)}return he});var H=g.table.core,O=H.schema.primaryKey,G=O.outbound,I=O.extractKey,L=200,O=d.db._options.modifyChunkSize;O&&(L=typeof O=="object"?O[H.name]||O["*"]||200:O);function K(V,me){var ve=me.failures,me=me.numFailures;q+=V-me;for(var xe=0,Oe=c(ve);xe<Oe.length;xe++){var De=Oe[xe];j.push(ve[De])}}var j=[],q=0,ee=[];return d.clone().primaryKeys().then(function(V){function he(me){var xe=Math.min(L,V.length-me);return H.getMany({trans:w,keys:V.slice(me,me+xe),cache:"immutable"}).then(function(Oe){for(var De=[],Ie=[],Ae=G?[]:null,Te=[],Pe=0;Pe<xe;++Pe){var Fe=Oe[Pe],nt={value:ge(Fe),primKey:V[me+Pe]};$.call(nt,nt.value,nt)!==!1&&(nt.value==null?Te.push(V[me+Pe]):G||st(I(Fe),I(nt.value))===0?(Ie.push(nt.value),G&&Ae.push(V[me+Pe])):(Te.push(V[me+Pe]),De.push(nt.value)))}return Promise.resolve(0<De.length&&H.mutate({trans:w,type:"add",values:De}).then(function(lt){for(var ft in lt.failures)Te.splice(parseInt(ft),1);K(De.length,lt)})).then(function(){return(0<Ie.length||ve&&typeof s=="object")&&H.mutate({trans:w,type:"put",keys:Ae,values:Ie,criteria:ve,changeSpec:typeof s!="function"&&s,isAdditionalChunk:0<me}).then(function(lt){return K(Ie.length,lt)})}).then(function(){return(0<Te.length||ve&&s===ua)&&H.mutate({trans:w,type:"delete",keys:Te,criteria:ve,isAdditionalChunk:0<me}).then(function(lt){return K(Te.length,lt)})}).then(function(){return V.length>me+xe&&he(me+L)})})}var ve=oi(g)&&g.limit===1/0&&(typeof s!="function"||s===ua)&&{index:g.index,range:g.range};return he(0).then(function(){if(0<j.length)throw new Re("Error modifying one or more objects",j,q,ee);return V.length})})})},ht.prototype.delete=function(){var s=this._ctx,d=s.range;return oi(s)&&(s.isPrimKey||d.type===3)?this._write(function(g){var w=s.table.core.schema.primaryKey,E=d;return s.table.core.count({trans:g,query:{index:w,range:E}}).then(function(A){return s.table.core.mutate({trans:g,type:"deleteRange",range:E}).then(function($){var H=$.failures;if($.lastResult,$.results,$=$.numFailures,$)throw new Re("Could not delete some values",Object.keys(H).map(function(G){return H[G]}),A-$);return A-$})})}):this.modify(ua)},ht);function ht(){}var ua=function(s,d){return d.value=null};function xu(s,d){return s<d?-1:s===d?0:1}function kl(s,d){return d<s?-1:s===d?0:1}function kn(s,d,g){return s=s instanceof _u?new s.Collection(s):s,s._ctx.error=new(g||TypeError)(d),s}function ai(s){return new s.Collection(s,function(){return bu("")}).limit(0)}function fo(s,d,g,w){var E,A,$,H,G,I,L,O=g.length;if(!g.every(function(q){return typeof q=="string"}))return kn(s,ri);function K(q){E=q==="next"?function(V){return V.toUpperCase()}:function(V){return V.toLowerCase()},A=q==="next"?function(V){return V.toLowerCase()}:function(V){return V.toUpperCase()},$=q==="next"?xu:kl;var ee=g.map(function(V){return{lower:A(V),upper:E(V)}}).sort(function(V,he){return $(V.lower,he.lower)});H=ee.map(function(V){return V.upper}),G=ee.map(function(V){return V.lower}),L=(I=q)==="next"?"":w}K("next"),s=new s.Collection(s,function(){return Nr(H[0],G[O-1]+w)}),s._ondirectionchange=function(q){K(q)};var j=0;return s._addAlgorithm(function(q,ee,V){var he=q.key;if(typeof he!="string")return!1;var ve=A(he);if(d(ve,G,j))return!0;for(var me=null,xe=j;xe<O;++xe){var Oe=function(De,Ie,Ae,Te,Pe,Fe){for(var nt=Math.min(De.length,Te.length),lt=-1,ft=0;ft<nt;++ft){var Rn=Ie[ft];if(Rn!==Te[ft])return Pe(De[ft],Ae[ft])<0?De.substr(0,ft)+Ae[ft]+Ae.substr(ft+1):Pe(De[ft],Te[ft])<0?De.substr(0,ft)+Te[ft]+Ae.substr(ft+1):0<=lt?De.substr(0,lt)+Ie[lt]+Ae.substr(lt+1):null;Pe(De[ft],Rn)<0&&(lt=ft)}return nt<Te.length&&Fe==="next"?De+Ae.substr(De.length):nt<De.length&&Fe==="prev"?De.substr(0,Ae.length):lt<0?null:De.substr(0,lt)+Te[lt]+Ae.substr(lt+1)}(he,ve,H[xe],G[xe],$,I);Oe===null&&me===null?j=xe+1:(me===null||0<$(me,Oe))&&(me=Oe)}return ee(me!==null?function(){q.continue(me+L)}:V),!1}),s}function Nr(s,d,g,w){return{type:2,lower:s,upper:d,lowerOpen:g,upperOpen:w}}function bu(s){return{type:1,lower:s,upper:s}}var _u=(Object.defineProperty(ln.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),ln.prototype.between=function(s,d,g,w){g=g!==!1,w=w===!0;try{return 0<this._cmp(s,d)||this._cmp(s,d)===0&&(g||w)&&(!g||!w)?ai(this):new this.Collection(this,function(){return Nr(s,d,!g,!w)})}catch{return kn(this,Zn)}},ln.prototype.equals=function(s){return s==null?kn(this,Zn):new this.Collection(this,function(){return bu(s)})},ln.prototype.above=function(s){return s==null?kn(this,Zn):new this.Collection(this,function(){return Nr(s,void 0,!0)})},ln.prototype.aboveOrEqual=function(s){return s==null?kn(this,Zn):new this.Collection(this,function(){return Nr(s,void 0,!1)})},ln.prototype.below=function(s){return s==null?kn(this,Zn):new this.Collection(this,function(){return Nr(void 0,s,!1,!0)})},ln.prototype.belowOrEqual=function(s){return s==null?kn(this,Zn):new this.Collection(this,function(){return Nr(void 0,s)})},ln.prototype.startsWith=function(s){return typeof s!="string"?kn(this,ri):this.between(s,s+wn,!0,!0)},ln.prototype.startsWithIgnoreCase=function(s){return s===""?this.startsWith(s):fo(this,function(d,g){return d.indexOf(g[0])===0},[s],wn)},ln.prototype.equalsIgnoreCase=function(s){return fo(this,function(d,g){return d===g[0]},[s],"")},ln.prototype.anyOfIgnoreCase=function(){var s=ie.apply(W,arguments);return s.length===0?ai(this):fo(this,function(d,g){return g.indexOf(d)!==-1},s,"")},ln.prototype.startsWithAnyOfIgnoreCase=function(){var s=ie.apply(W,arguments);return s.length===0?ai(this):fo(this,function(d,g){return g.some(function(w){return d.indexOf(w)===0})},s,wn)},ln.prototype.anyOf=function(){var s=this,d=ie.apply(W,arguments),g=this._cmp;try{d.sort(g)}catch{return kn(this,Zn)}if(d.length===0)return ai(this);var w=new this.Collection(this,function(){return Nr(d[0],d[d.length-1])});w._ondirectionchange=function(A){g=A==="next"?s._ascending:s._descending,d.sort(g)};var E=0;return w._addAlgorithm(function(A,$,H){for(var G=A.key;0<g(G,d[E]);)if(++E===d.length)return $(H),!1;return g(G,d[E])===0||($(function(){A.continue(d[E])}),!1)}),w},ln.prototype.notEqual=function(s){return this.inAnyRange([[-1/0,s],[s,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},ln.prototype.noneOf=function(){var s=ie.apply(W,arguments);if(s.length===0)return new this.Collection(this);try{s.sort(this._ascending)}catch{return kn(this,Zn)}var d=s.reduce(function(g,w){return g?g.concat([[g[g.length-1][1],w]]):[[-1/0,w]]},null);return d.push([s[s.length-1],this.db._maxKey]),this.inAnyRange(d,{includeLowers:!1,includeUppers:!1})},ln.prototype.inAnyRange=function(he,d){var g=this,w=this._cmp,E=this._ascending,A=this._descending,$=this._min,H=this._max;if(he.length===0)return ai(this);if(!he.every(function(ve){return ve[0]!==void 0&&ve[1]!==void 0&&E(ve[0],ve[1])<=0}))return kn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Se.InvalidArgument);var G=!d||d.includeLowers!==!1,I=d&&d.includeUppers===!0,L,O=E;function K(ve,me){return O(ve[0],me[0])}try{(L=he.reduce(function(ve,me){for(var xe=0,Oe=ve.length;xe<Oe;++xe){var De=ve[xe];if(w(me[0],De[1])<0&&0<w(me[1],De[0])){De[0]=$(De[0],me[0]),De[1]=H(De[1],me[1]);break}}return xe===Oe&&ve.push(me),ve},[])).sort(K)}catch{return kn(this,Zn)}var j=0,q=I?function(ve){return 0<E(ve,L[j][1])}:function(ve){return 0<=E(ve,L[j][1])},ee=G?function(ve){return 0<A(ve,L[j][0])}:function(ve){return 0<=A(ve,L[j][0])},V=q,he=new this.Collection(this,function(){return Nr(L[0][0],L[L.length-1][1],!G,!I)});return he._ondirectionchange=function(ve){O=ve==="next"?(V=q,E):(V=ee,A),L.sort(K)},he._addAlgorithm(function(ve,me,xe){for(var Oe,De=ve.key;V(De);)if(++j===L.length)return me(xe),!1;return!q(Oe=De)&&!ee(Oe)||(g._cmp(De,L[j][1])===0||g._cmp(De,L[j][0])===0||me(function(){O===E?ve.continue(L[j][0]):ve.continue(L[j][1])}),!1)}),he},ln.prototype.startsWithAnyOf=function(){var s=ie.apply(W,arguments);return s.every(function(d){return typeof d=="string"})?s.length===0?ai(this):this.inAnyRange(s.map(function(d){return[d,d+wn]})):kn(this,"startsWithAnyOf() only works with strings")},ln);function ln(){}function Jn(s){return Et(function(d){return ho(d),s(d.target.error),!1})}function ho(s){s.stopPropagation&&s.stopPropagation(),s.preventDefault&&s.preventDefault()}var po="storagemutated",ts="x-storagemutated-1",Yr=ii(null,po),ns=(fr.prototype._lock=function(){return F(!$e.global),++this._reculock,this._reculock!==1||$e.global||($e.lockOwnerFor=this),this},fr.prototype._unlock=function(){if(F(!$e.global),--this._reculock==0)for($e.global||($e.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var s=this._blockedFuncs.shift();try{qt(s[1],s[0])}catch{}}return this},fr.prototype._locked=function(){return this._reculock&&$e.lockOwnerFor!==this},fr.prototype.create=function(s){var d=this;if(!this.mode)return this;var g=this.db.idbdb,w=this.db._state.dbOpenError;if(F(!this.idbtrans),!s&&!g)switch(w&&w.name){case"DatabaseClosedError":throw new Se.DatabaseClosed(w);case"MissingAPIError":throw new Se.MissingAPI(w.message,w);default:throw new Se.OpenFailed(w)}if(!this.active)throw new Se.TransactionInactive;return F(this._completion._state===null),(s=this.idbtrans=s||(this.db.core||g).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Et(function(E){ho(E),d._reject(s.error)}),s.onabort=Et(function(E){ho(E),d.active&&d._reject(new Se.Abort(s.error)),d.active=!1,d.on("abort").fire(E)}),s.oncomplete=Et(function(){d.active=!1,d._resolve(),"mutatedParts"in s&&Yr.storagemutated.fire(s.mutatedParts)}),this},fr.prototype._promise=function(s,d,g){var w=this;if(s==="readwrite"&&this.mode!=="readwrite")return Dt(new Se.ReadOnly("Transaction is readonly"));if(!this.active)return Dt(new Se.TransactionInactive);if(this._locked())return new de(function(A,$){w._blockedFuncs.push([function(){w._promise(s,d,g).then(A,$)},$e])});if(g)return Nn(function(){var A=new de(function($,H){w._lock();var G=d($,H,w);G&&G.then&&G.then($,H)});return A.finally(function(){return w._unlock()}),A._lib=!0,A});var E=new de(function(A,$){var H=d(A,$,w);H&&H.then&&H.then(A,$)});return E._lib=!0,E},fr.prototype._root=function(){return this.parent?this.parent._root():this},fr.prototype.waitFor=function(s){var d,g=this._root(),w=de.resolve(s);g._waitingFor?g._waitingFor=g._waitingFor.then(function(){return w}):(g._waitingFor=w,g._waitingQueue=[],d=g.idbtrans.objectStore(g.storeNames[0]),function A(){for(++g._spinCount;g._waitingQueue.length;)g._waitingQueue.shift()();g._waitingFor&&(d.get(-1/0).onsuccess=A)}());var E=g._waitingFor;return new de(function(A,$){w.then(function(H){return g._waitingQueue.push(Et(A.bind(null,H)))},function(H){return g._waitingQueue.push(Et($.bind(null,H)))}).finally(function(){g._waitingFor===E&&(g._waitingFor=null)})})},fr.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Se.Abort))},fr.prototype.table=function(s){var d=this._memoizedTables||(this._memoizedTables={});if(y(d,s))return d[s];var g=this.schema[s];if(!g)throw new Se.NotFound("Table "+s+" not part of transaction");return g=new this.db.Table(s,g,this),g.core=this.db.core.table(s),d[s]=g},fr);function fr(){}function rs(s,d,g,w,E,A,$){return{name:s,keyPath:d,unique:g,multi:w,auto:E,compound:A,src:(g&&!$?"&":"")+(w?"*":"")+(E?"++":"")+Eu(d)}}function Eu(s){return typeof s=="string"?s:s?"["+[].join.call(s,"+")+"]":""}function is(s,d,g){return{name:s,primKey:d,indexes:g,mappedClass:null,idxByName:(w=function(E){return[E.name,E]},g.reduce(function(E,A,$){return $=w(A,$),$&&(E[$[0]]=$[1]),E},{}))};var w}var mo=function(s){try{return s.only([[]]),mo=function(){return[[]]},[[]]}catch{return mo=function(){return wn},wn}};function kt(s){return s==null?function(){}:typeof s=="string"?(d=s).split(".").length===1?function(g){return g[d]}:function(g){return ae(g,d)}:function(g){return ae(g,s)};var d}function It(s){return[].slice.call(s)}var Il=0;function go(s){return s==null?":id":typeof s=="string"?s:"[".concat(s.join("+"),"]")}function Cl(s,d,G){function w(V){if(V.type===3)return null;if(V.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var j=V.lower,q=V.upper,ee=V.lowerOpen,V=V.upperOpen;return j===void 0?q===void 0?null:d.upperBound(q,!!V):q===void 0?d.lowerBound(j,!!ee):d.bound(j,q,!!ee,!!V)}function E(K){var j,q=K.name;return{name:q,schema:K,mutate:function(ee){var V=ee.trans,he=ee.type,ve=ee.keys,me=ee.values,xe=ee.range;return new Promise(function(Oe,De){Oe=Et(Oe);var Ie=V.objectStore(q),Ae=Ie.keyPath==null,Te=he==="put"||he==="add";if(!Te&&he!=="delete"&&he!=="deleteRange")throw new Error("Invalid operation type: "+he);var Pe,Fe=(ve||me||{length:1}).length;if(ve&&me&&ve.length!==me.length)throw new Error("Given keys array must have same length as given values array.");if(Fe===0)return Oe({numFailures:0,failures:{},results:[],lastResult:void 0});function nt(fn){++Rn,ho(fn)}var lt=[],ft=[],Rn=0;if(he==="deleteRange"){if(xe.type===4)return Oe({numFailures:Rn,failures:ft,results:[],lastResult:void 0});xe.type===3?lt.push(Pe=Ie.clear()):lt.push(Pe=Ie.delete(w(xe)))}else{var Ae=Te?Ae?[me,ve]:[me,null]:[ve,null],tt=Ae[0],Wt=Ae[1];if(Te)for(var nn=0;nn<Fe;++nn)lt.push(Pe=Wt&&Wt[nn]!==void 0?Ie[he](tt[nn],Wt[nn]):Ie[he](tt[nn])),Pe.onerror=nt;else for(nn=0;nn<Fe;++nn)lt.push(Pe=Ie[he](tt[nn])),Pe.onerror=nt}function ko(fn){fn=fn.target.result,lt.forEach(function(qr,wa){return qr.error!=null&&(ft[wa]=qr.error)}),Oe({numFailures:Rn,failures:ft,results:he==="delete"?ve:lt.map(function(qr){return qr.result}),lastResult:fn})}Pe.onerror=function(fn){nt(fn),ko(fn)},Pe.onsuccess=ko})},getMany:function(ee){var V=ee.trans,he=ee.keys;return new Promise(function(ve,me){ve=Et(ve);for(var xe,Oe=V.objectStore(q),De=he.length,Ie=new Array(De),Ae=0,Te=0,Pe=function(lt){lt=lt.target,Ie[lt._pos]=lt.result,++Te===Ae&&ve(Ie)},Fe=Jn(me),nt=0;nt<De;++nt)he[nt]!=null&&((xe=Oe.get(he[nt]))._pos=nt,xe.onsuccess=Pe,xe.onerror=Fe,++Ae);Ae===0&&ve(Ie)})},get:function(ee){var V=ee.trans,he=ee.key;return new Promise(function(ve,me){ve=Et(ve);var xe=V.objectStore(q).get(he);xe.onsuccess=function(Oe){return ve(Oe.target.result)},xe.onerror=Jn(me)})},query:(j=I,function(ee){return new Promise(function(V,he){V=Et(V);var ve,me,xe,Ae=ee.trans,Oe=ee.values,De=ee.limit,Pe=ee.query,Ie=De===1/0?void 0:De,Te=Pe.index,Pe=Pe.range,Ae=Ae.objectStore(q),Te=Te.isPrimaryKey?Ae:Ae.index(Te.name),Pe=w(Pe);if(De===0)return V({result:[]});j?((Ie=Oe?Te.getAll(Pe,Ie):Te.getAllKeys(Pe,Ie)).onsuccess=function(Fe){return V({result:Fe.target.result})},Ie.onerror=Jn(he)):(ve=0,me=!Oe&&"openKeyCursor"in Te?Te.openKeyCursor(Pe):Te.openCursor(Pe),xe=[],me.onsuccess=function(Fe){var nt=me.result;return nt?(xe.push(Oe?nt.value:nt.primaryKey),++ve===De?V({result:xe}):void nt.continue()):V({result:xe})},me.onerror=Jn(he))})}),openCursor:function(ee){var V=ee.trans,he=ee.values,ve=ee.query,me=ee.reverse,xe=ee.unique;return new Promise(function(Oe,De){Oe=Et(Oe);var Te=ve.index,Ie=ve.range,Ae=V.objectStore(q),Ae=Te.isPrimaryKey?Ae:Ae.index(Te.name),Te=me?xe?"prevunique":"prev":xe?"nextunique":"next",Pe=!he&&"openKeyCursor"in Ae?Ae.openKeyCursor(w(Ie),Te):Ae.openCursor(w(Ie),Te);Pe.onerror=Jn(De),Pe.onsuccess=Et(function(Fe){var nt,lt,ft,Rn,tt=Pe.result;tt?(tt.___id=++Il,tt.done=!1,nt=tt.continue.bind(tt),lt=(lt=tt.continuePrimaryKey)&&lt.bind(tt),ft=tt.advance.bind(tt),Rn=function(){throw new Error("Cursor not stopped")},tt.trans=V,tt.stop=tt.continue=tt.continuePrimaryKey=tt.advance=function(){throw new Error("Cursor not started")},tt.fail=Et(De),tt.next=function(){var Wt=this,nn=1;return this.start(function(){return nn--?Wt.continue():Wt.stop()}).then(function(){return Wt})},tt.start=function(Wt){function nn(){if(Pe.result)try{Wt()}catch(fn){tt.fail(fn)}else tt.done=!0,tt.start=function(){throw new Error("Cursor behind last entry")},tt.stop()}var ko=new Promise(function(fn,qr){fn=Et(fn),Pe.onerror=Jn(qr),tt.fail=qr,tt.stop=function(wa){tt.stop=tt.continue=tt.continuePrimaryKey=tt.advance=Rn,fn(wa)}});return Pe.onsuccess=Et(function(fn){Pe.onsuccess=nn,nn()}),tt.continue=nt,tt.continuePrimaryKey=lt,tt.advance=ft,nn(),ko},Oe(tt)):Oe(null)},De)})},count:function(ee){var V=ee.query,he=ee.trans,ve=V.index,me=V.range;return new Promise(function(xe,Oe){var De=he.objectStore(q),Ie=ve.isPrimaryKey?De:De.index(ve.name),De=w(me),Ie=De?Ie.count(De):Ie.count();Ie.onsuccess=Et(function(Ae){return xe(Ae.target.result)}),Ie.onerror=Jn(Oe)})}}}var A,$,H,L=($=G,H=It((A=s).objectStoreNames),{schema:{name:A.name,tables:H.map(function(K){return $.objectStore(K)}).map(function(K){var j=K.keyPath,V=K.autoIncrement,q=f(j),ee={},V={name:K.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:j==null,compound:q,keyPath:j,autoIncrement:V,unique:!0,extractKey:kt(j)},indexes:It(K.indexNames).map(function(he){return K.index(he)}).map(function(xe){var ve=xe.name,me=xe.unique,Oe=xe.multiEntry,xe=xe.keyPath,Oe={name:ve,compound:f(xe),keyPath:xe,unique:me,multiEntry:Oe,extractKey:kt(xe)};return ee[go(xe)]=Oe}),getIndexByKeyPath:function(he){return ee[go(he)]}};return ee[":id"]=V.primaryKey,j!=null&&(ee[go(j)]=V.primaryKey),V})},hasGetAll:0<H.length&&"getAll"in $.objectStore(H[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),G=L.schema,I=L.hasGetAll,L=G.tables.map(E),O={};return L.forEach(function(K){return O[K.name]=K}),{stack:"dbcore",transaction:s.transaction.bind(s),table:function(K){if(!O[K])throw new Error("Table '".concat(K,"' not found"));return O[K]},MIN_KEY:-1/0,MAX_KEY:mo(d),schema:G}}function Ol(s,d,g,w){var E=g.IDBKeyRange;return g.indexedDB,{dbcore:(w=Cl(d,E,w),s.dbcore.reduce(function(A,$){return $=$.create,i(i({},A),$(A))},w))}}function ca(s,w){var g=w.db,w=Ol(s._middlewares,g,s._deps,w);s.core=w.dbcore,s.tables.forEach(function(E){var A=E.name;s.core.schema.tables.some(function($){return $.name===A})&&(E.core=s.core.table(A),s[A]instanceof s.Table&&(s[A].core=E.core))})}function la(s,d,g,w){g.forEach(function(E){var A=w[E];d.forEach(function($){var H=function G(I,L){return C(I,L)||(I=p(I))&&G(I,L)}($,E);(!H||"value"in H&&H.value===void 0)&&($===s.Transaction.prototype||$ instanceof s.Transaction?N($,E,{get:function(){return this.table(E)},set:function(G){b(this,E,{value:G,writable:!0,configurable:!0,enumerable:!0})}}):$[E]=new s.Table(E,A))})})}function fa(s,d){d.forEach(function(g){for(var w in g)g[w]instanceof s.Table&&delete g[w]})}function Al(s,d){return s._cfg.version-d._cfg.version}function hn(s,d,g,w){var E=s._dbSchema;g.objectStoreNames.contains("$meta")&&!E.$meta&&(E.$meta=is("$meta",as("")[0],[]),s._storeNames.push("$meta"));var A=s._createTransaction("readwrite",s._storeNames,E);A.create(g),A._completion.catch(w);var $=A._reject.bind(A),H=$e.transless||$e;Nn(function(){return $e.trans=A,$e.transless=H,d!==0?(ca(s,g),I=d,((G=A).storeNames.includes("$meta")?G.table("$meta").get("version").then(function(L){return L??I}):de.resolve(I)).then(function(L){return K=L,j=A,q=g,ee=[],L=(O=s)._versions,V=O._dbSchema=vo(0,O.idbdb,q),(L=L.filter(function(he){return he._cfg.version>=K})).length!==0?(L.forEach(function(he){ee.push(function(){var ve=V,me=he._cfg.dbschema;yo(O,ve,q),yo(O,me,q),V=O._dbSchema=me;var xe=kr(ve,me);xe.add.forEach(function(Te){da(q,Te[0],Te[1].primKey,Te[1].indexes)}),xe.change.forEach(function(Te){if(Te.recreate)throw new Se.Upgrade("Not yet support for changing primary key");var Pe=q.objectStore(Te.name);Te.add.forEach(function(Fe){return xn(Pe,Fe)}),Te.change.forEach(function(Fe){Pe.deleteIndex(Fe.name),xn(Pe,Fe)}),Te.del.forEach(function(Fe){return Pe.deleteIndex(Fe)})});var Oe=he._cfg.contentUpgrade;if(Oe&&he._cfg.version>K){ca(O,q),j._memoizedTables={};var De=Q(me);xe.del.forEach(function(Te){De[Te]=ve[Te]}),fa(O,[O.Transaction.prototype]),la(O,[O.Transaction.prototype],c(De),De),j.schema=De;var Ie,Ae=ue(Oe);return Ae&&Gn(),xe=de.follow(function(){var Te;(Ie=Oe(j))&&Ae&&(Te=Pn.bind(null,null),Ie.then(Te,Te))}),Ie&&typeof Ie.then=="function"?de.resolve(Ie):xe.then(function(){return Ie})}}),ee.push(function(ve){var me,xe,Oe=he._cfg.dbschema;me=Oe,xe=ve,[].slice.call(xe.db.objectStoreNames).forEach(function(De){return me[De]==null&&xe.db.deleteObjectStore(De)}),fa(O,[O.Transaction.prototype]),la(O,[O.Transaction.prototype],O._storeNames,O._dbSchema),j.schema=O._dbSchema}),ee.push(function(ve){O.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(O.idbdb.version/10)===he._cfg.version?(O.idbdb.deleteObjectStore("$meta"),delete O._dbSchema.$meta,O._storeNames=O._storeNames.filter(function(me){return me!=="$meta"})):ve.objectStore("$meta").put(he._cfg.version,"version"))})}),function he(){return ee.length?de.resolve(ee.shift()(j.idbtrans)).then(he):de.resolve()}().then(function(){ha(V,q)})):de.resolve();var O,K,j,q,ee,V}).catch($)):(c(E).forEach(function(L){da(g,L,E[L].primKey,E[L].indexes)}),ca(s,g),void de.follow(function(){return s.on.populate.fire(A)}).catch($));var G,I})}function os(s,d){ha(s._dbSchema,d),d.db.version%10!=0||d.objectStoreNames.contains("$meta")||d.db.createObjectStore("$meta").add(Math.ceil(d.db.version/10-1),"version");var g=vo(0,s.idbdb,d);yo(s,s._dbSchema,d);for(var w=0,E=kr(g,s._dbSchema).change;w<E.length;w++){var A=function($){if($.change.length||$.recreate)return console.warn("Unable to patch indexes of table ".concat($.name," because it has changes on the type of index or primary key.")),{value:void 0};var H=d.objectStore($.name);$.add.forEach(function(G){bt&&console.debug("Dexie upgrade patch: Creating missing index ".concat($.name,".").concat(G.src)),xn(H,G)})}(E[w]);if(typeof A=="object")return A.value}}function kr(s,d){var g,w={del:[],add:[],change:[]};for(g in s)d[g]||w.del.push(g);for(g in d){var E=s[g],A=d[g];if(E){var $={name:g,def:A,recreate:!1,del:[],add:[],change:[]};if(""+(E.primKey.keyPath||"")!=""+(A.primKey.keyPath||"")||E.primKey.auto!==A.primKey.auto)$.recreate=!0,w.change.push($);else{var H=E.idxByName,G=A.idxByName,I=void 0;for(I in H)G[I]||$.del.push(I);for(I in G){var L=H[I],O=G[I];L?L.src!==O.src&&$.change.push(O):$.add.push(O)}(0<$.del.length||0<$.add.length||0<$.change.length)&&w.change.push($)}}else w.add.push([g,A])}return w}function da(s,d,g,w){var E=s.db.createObjectStore(d,g.keyPath?{keyPath:g.keyPath,autoIncrement:g.auto}:{autoIncrement:g.auto});return w.forEach(function(A){return xn(E,A)}),E}function ha(s,d){c(s).forEach(function(g){d.db.objectStoreNames.contains(g)||(bt&&console.debug("Dexie: Creating missing table",g),da(d,g,s[g].primKey,s[g].indexes))})}function xn(s,d){s.createIndex(d.name,d.keyPath,{unique:d.unique,multiEntry:d.multi})}function vo(s,d,g){var w={};return z(d.objectStoreNames,0).forEach(function(E){for(var A=g.objectStore(E),$=rs(Eu(I=A.keyPath),I||"",!0,!1,!!A.autoIncrement,I&&typeof I!="string",!0),H=[],G=0;G<A.indexNames.length;++G){var L=A.index(A.indexNames[G]),I=L.keyPath,L=rs(L.name,I,!!L.unique,!!L.multiEntry,!1,I&&typeof I!="string",!1);H.push(L)}w[E]=is(E,$,H)}),w}function yo(s,d,g){for(var w=g.db.objectStoreNames,E=0;E<w.length;++E){var A=w[E],$=g.objectStore(A);s._hasGetAll="getAll"in $;for(var H=0;H<$.indexNames.length;++H){var G=$.indexNames[H],I=$.index(G).keyPath,L=typeof I=="string"?I:"["+z(I).join("+")+"]";!d[A]||(I=d[A].idxByName[L])&&(I.name=G,delete d[A].idxByName[L],d[A].idxByName[G]=I)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&u.WorkerGlobalScope&&u instanceof u.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(s._hasGetAll=!1)}function as(s){return s.split(",").map(function(d,g){var w=(d=d.trim()).replace(/([&*]|\+\+)/g,""),E=/^\[/.test(w)?w.match(/^\[(.*)\]$/)[1].split("+"):w;return rs(w,E||null,/\&/.test(d),/\*/.test(d),/\+\+/.test(d),f(E),g===0)})}var Su=(wo.prototype._parseStoresSpec=function(s,d){c(s).forEach(function(g){if(s[g]!==null){var w=as(s[g]),E=w.shift();if(E.unique=!0,E.multi)throw new Se.Schema("Primary key cannot be multi-valued");w.forEach(function(A){if(A.auto)throw new Se.Schema("Only primary key can be marked as autoIncrement (++)");if(!A.keyPath)throw new Se.Schema("Index must have a name and cannot be an empty string")}),d[g]=is(g,E,w)}})},wo.prototype.stores=function(g){var d=this.db;this._cfg.storesSource=this._cfg.storesSource?h(this._cfg.storesSource,g):g;var g=d._versions,w={},E={};return g.forEach(function(A){h(w,A._cfg.storesSource),E=A._cfg.dbschema={},A._parseStoresSpec(w,E)}),d._dbSchema=E,fa(d,[d._allTables,d,d.Transaction.prototype]),la(d,[d._allTables,d,d.Transaction.prototype,this._cfg.tables],c(E),E),d._storeNames=c(E),this},wo.prototype.upgrade=function(s){return this._cfg.contentUpgrade=jt(this._cfg.contentUpgrade||He,s),this},wo);function wo(){}function pa(s,d){var g=s._dbNamesDB;return g||(g=s._dbNamesDB=new Or(Ii,{addons:[],indexedDB:s,IDBKeyRange:d})).version(1).stores({dbnames:"name"}),g.table("dbnames")}function bn(s){return s&&typeof s.databases=="function"}function ss(s){return Nn(function(){return $e.letThrough=!0,s()})}function In(s){return!("from"in s)}var vn=function(s,d){if(!this){var g=new vn;return s&&"d"in s&&h(g,s),g}h(this,arguments.length?{d:1,from:s,to:1<arguments.length?d:s}:{d:0})};function Pi(s,d,g){var w=st(d,g);if(!isNaN(w)){if(0<w)throw RangeError();if(In(s))return h(s,{from:d,to:g,d:1});var E=s.l,w=s.r;if(st(g,s.from)<0)return E?Pi(E,d,g):s.l={from:d,to:g,d:1,l:null,r:null},Pt(s);if(0<st(d,s.to))return w?Pi(w,d,g):s.r={from:d,to:g,d:1,l:null,r:null},Pt(s);st(d,s.from)<0&&(s.from=d,s.l=null,s.d=w?w.d+1:1),0<st(g,s.to)&&(s.to=g,s.r=null,s.d=s.l?s.l.d+1:1),g=!s.r,E&&!s.l&&Bn(s,E),w&&g&&Bn(s,w)}}function Bn(s,d){In(d)||function g(w,G){var A=G.from,$=G.to,H=G.l,G=G.r;Pi(w,A,$),H&&g(w,H),G&&g(w,G)}(s,d)}function xo(s,d){var g=Ri(d),w=g.next();if(w.done)return!1;for(var E=w.value,A=Ri(s),$=A.next(E.from),H=$.value;!w.done&&!$.done;){if(st(H.from,E.to)<=0&&0<=st(H.to,E.from))return!0;st(E.from,H.from)<0?E=(w=g.next(H.from)).value:H=($=A.next(E.from)).value}return!1}function Ri(s){var d=In(s)?null:{s:0,n:s};return{next:function(g){for(var w=0<arguments.length;d;)switch(d.s){case 0:if(d.s=1,w)for(;d.n.l&&st(g,d.n.from)<0;)d={up:d,n:d.n.l,s:1};else for(;d.n.l;)d={up:d,n:d.n.l,s:1};case 1:if(d.s=2,!w||st(g,d.n.to)<=0)return{value:d.n,done:!1};case 2:if(d.n.r){d.s=3,d={up:d,n:d.n.r,s:0};continue}case 3:d=d.up}return{done:!0}}}}function Pt(s){var d,g,w=(((d=s.r)===null||d===void 0?void 0:d.d)||0)-(((g=s.l)===null||g===void 0?void 0:g.d)||0),E=1<w?"r":w<-1?"l":"";E&&(d=E=="r"?"l":"r",g=i({},s),w=s[E],s.from=w.from,s.to=w.to,s[E]=w[E],g[E]=w[d],(s[d]=g).d=Ir(g)),s.d=Ir(s)}function Ir(g){var d=g.r,g=g.l;return(d?g?Math.max(d.d,g.d):d.d:g?g.d:0)+1}function Mi(s,d){return c(d).forEach(function(g){s[g]?Bn(s[g],d[g]):s[g]=function w(E){var A,$,H={};for(A in E)y(E,A)&&($=E[A],H[A]=!$||typeof $!="object"||Y.has($.constructor)?$:w($));return H}(d[g])}),s}function us(s,d){return s.all||d.all||Object.keys(s).some(function(g){return d[g]&&xo(d[g],s[g])})}x(vn.prototype,((Hn={add:function(s){return Bn(this,s),this},addKey:function(s){return Pi(this,s,s),this},addKeys:function(s){var d=this;return s.forEach(function(g){return Pi(d,g,g)}),this},hasKey:function(s){var d=Ri(this).next(s).value;return d&&st(d.from,s)<=0&&0<=st(d.to,s)}})[Z]=function(){return Ri(this)},Hn));var Cr={},cs={},ls=!1;function ma(s){Mi(cs,s),ls||(ls=!0,setTimeout(function(){ls=!1,ga(cs,!(cs={}))},0))}function ga(s,d){d===void 0&&(d=!1);var g=new Set;if(s.all)for(var w=0,E=Object.values(Cr);w<E.length;w++)bo($=E[w],s,g,d);else for(var A in s){var $,H=/^idb\:\/\/(.*)\/(.*)\//.exec(A);H&&(A=H[1],H=H[2],($=Cr["idb://".concat(A,"/").concat(H)])&&bo($,s,g,d))}g.forEach(function(G){return G()})}function bo(s,d,g,w){for(var E=[],A=0,$=Object.entries(s.queries.query);A<$.length;A++){for(var H=$[A],G=H[0],I=[],L=0,O=H[1];L<O.length;L++){var K=O[L];us(d,K.obsSet)?K.subscribers.forEach(function(V){return g.add(V)}):w&&I.push(K)}w&&E.push([G,I])}if(w)for(var j=0,q=E;j<q.length;j++){var ee=q[j],G=ee[0],I=ee[1];s.queries.query[G]=I}}function Li(s){var d=s._state,g=s._deps.indexedDB;if(d.isBeingOpened||s.idbdb)return d.dbReadyPromise.then(function(){return d.dbOpenError?Dt(d.dbOpenError):s});d.isBeingOpened=!0,d.dbOpenError=null,d.openComplete=!1;var w=d.openCanceller,E=Math.round(10*s.verno),A=!1;function $(){if(d.openCanceller!==w)throw new Se.DatabaseClosed("db.open() was cancelled")}function H(){return new de(function(K,j){if($(),!g)throw new Se.MissingAPI;var q=s.name,ee=d.autoSchema||!E?g.open(q):g.open(q,E);if(!ee)throw new Se.MissingAPI;ee.onerror=Jn(j),ee.onblocked=Et(s._fireOnBlocked),ee.onupgradeneeded=Et(function(V){var he;L=ee.transaction,d.autoSchema&&!s._options.allowEmptyDB?(ee.onerror=ho,L.abort(),ee.result.close(),(he=g.deleteDatabase(q)).onsuccess=he.onerror=Et(function(){j(new Se.NoSuchDatabase("Database ".concat(q," doesnt exist")))})):(L.onerror=Jn(j),V=V.oldVersion>Math.pow(2,62)?0:V.oldVersion,O=V<1,s.idbdb=ee.result,A&&os(s,L),hn(s,V/10,L,j))},j),ee.onsuccess=Et(function(){L=null;var V,he,ve,me,xe,Oe=s.idbdb=ee.result,De=z(Oe.objectStoreNames);if(0<De.length)try{var Ie=Oe.transaction((me=De).length===1?me[0]:me,"readonly");if(d.autoSchema)he=Oe,ve=Ie,(V=s).verno=he.version/10,ve=V._dbSchema=vo(0,he,ve),V._storeNames=z(he.objectStoreNames,0),la(V,[V._allTables],c(ve),ve);else if(yo(s,s._dbSchema,Ie),((xe=kr(vo(0,(xe=s).idbdb,Ie),xe._dbSchema)).add.length||xe.change.some(function(Ae){return Ae.add.length||Ae.change.length}))&&!A)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Oe.close(),E=Oe.version+1,A=!0,K(H());ca(s,Ie)}catch{}Ur.push(s),Oe.onversionchange=Et(function(Ae){d.vcFired=!0,s.on("versionchange").fire(Ae)}),Oe.onclose=Et(function(Ae){s.on("close").fire(Ae)}),O&&(xe=s._deps,Ie=q,Oe=xe.indexedDB,xe=xe.IDBKeyRange,bn(Oe)||Ie===Ii||pa(Oe,xe).put({name:Ie}).catch(He)),K()},j)}).catch(function(K){switch(K==null?void 0:K.name){case"UnknownError":if(0<d.PR1398_maxLoop)return d.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),H();break;case"VersionError":if(0<E)return E=0,H()}return de.reject(K)})}var G,I=d.dbReadyResolve,L=null,O=!1;return de.race([w,(typeof navigator>"u"?de.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(K){function j(){return indexedDB.databases().finally(K)}G=setInterval(j,100),j()}).finally(function(){return clearInterval(G)}):Promise.resolve()).then(H)]).then(function(){return $(),d.onReadyBeingFired=[],de.resolve(ss(function(){return s.on.ready.fire(s.vip)})).then(function K(){if(0<d.onReadyBeingFired.length){var j=d.onReadyBeingFired.reduce(jt,He);return d.onReadyBeingFired=[],de.resolve(ss(function(){return j(s.vip)})).then(K)}})}).finally(function(){d.openCanceller===w&&(d.onReadyBeingFired=null,d.isBeingOpened=!1)}).catch(function(K){d.dbOpenError=K;try{L&&L.abort()}catch{}return w===d.openCanceller&&s._close(),Dt(K)}).finally(function(){d.openComplete=!0,I()}).then(function(){var K;return O&&(K={},s.tables.forEach(function(j){j.schema.indexes.forEach(function(q){q.name&&(K["idb://".concat(s.name,"/").concat(j.name,"/").concat(q.name)]=new vn(-1/0,[[[]]]))}),K["idb://".concat(s.name,"/").concat(j.name,"/")]=K["idb://".concat(s.name,"/").concat(j.name,"/:dels")]=new vn(-1/0,[[[]]])}),Yr(po).fire(K),ga(K,!0)),s})}function fs(s){function d(A){return s.next(A)}var g=E(d),w=E(function(A){return s.throw(A)});function E(A){return function(G){var H=A(G),G=H.value;return H.done?G:G&&typeof G.then=="function"?G.then(g,w):f(G)?Promise.all(G).then(g,w):g(G)}}return E(d)()}function _o(s,d,g){for(var w=f(s)?s.slice():[s],E=0;E<g;++E)w.push(d);return w}var Tu={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(s){return i(i({},s),{table:function(d){var g=s.table(d),w=g.schema,E={},A=[];function $(O,K,j){var q=go(O),ee=E[q]=E[q]||[],V=O==null?0:typeof O=="string"?1:O.length,he=0<K,he=i(i({},j),{name:he?"".concat(q,"(virtual-from:").concat(j.name,")"):j.name,lowLevelIndex:j,isVirtual:he,keyTail:K,keyLength:V,extractKey:kt(O),unique:!he&&j.unique});return ee.push(he),he.isPrimaryKey||A.push(he),1<V&&$(V===2?O[0]:O.slice(0,V-1),K+1,j),ee.sort(function(ve,me){return ve.keyTail-me.keyTail}),he}d=$(w.primaryKey.keyPath,0,w.primaryKey),E[":id"]=[d];for(var H=0,G=w.indexes;H<G.length;H++){var I=G[H];$(I.keyPath,0,I)}function L(O){var K,j=O.query.index;return j.isVirtual?i(i({},O),{query:{index:j.lowLevelIndex,range:(K=O.query.range,j=j.keyTail,{type:K.type===1?2:K.type,lower:_o(K.lower,K.lowerOpen?s.MAX_KEY:s.MIN_KEY,j),lowerOpen:!0,upper:_o(K.upper,K.upperOpen?s.MIN_KEY:s.MAX_KEY,j),upperOpen:!0})}}):O}return i(i({},g),{schema:i(i({},w),{primaryKey:d,indexes:A,getIndexByKeyPath:function(O){return(O=E[go(O)])&&O[0]}}),count:function(O){return g.count(L(O))},query:function(O){return g.query(L(O))},openCursor:function(O){var K=O.query.index,j=K.keyTail,q=K.isVirtual,ee=K.keyLength;return q?g.openCursor(L(O)).then(function(he){return he&&V(he)}):g.openCursor(O);function V(he){return Object.create(he,{continue:{value:function(ve){ve!=null?he.continue(_o(ve,O.reverse?s.MAX_KEY:s.MIN_KEY,j)):O.unique?he.continue(he.key.slice(0,ee).concat(O.reverse?s.MIN_KEY:s.MAX_KEY,j)):he.continue()}},continuePrimaryKey:{value:function(ve,me){he.continuePrimaryKey(_o(ve,s.MAX_KEY,j),me)}},primaryKey:{get:function(){return he.primaryKey}},key:{get:function(){var ve=he.key;return ee===1?ve[0]:ve.slice(0,ee)}},value:{get:function(){return he.value}}})}}})}})}};function Eo(s,d,g,w){return g=g||{},w=w||"",c(s).forEach(function(E){var A,$,H;y(d,E)?(A=s[E],$=d[E],typeof A=="object"&&typeof $=="object"&&A&&$?(H=se(A))!==se($)?g[w+E]=d[E]:H==="Object"?Eo(A,$,g,w+E+"."):A!==$&&(g[w+E]=d[E]):A!==$&&(g[w+E]=d[E])):g[w+E]=void 0}),c(d).forEach(function(E){y(s,E)||(g[w+E]=d[E])}),g}function So(s,d){return d.type==="delete"?d.keys:d.keys||d.values.map(s.extractKey)}var Nu={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(s){return i(i({},s),{table:function(d){var g=s.table(d),w=g.schema.primaryKey;return i(i({},g),{mutate:function(E){var A=$e.trans,$=A.table(d).hook,H=$.deleting,G=$.creating,I=$.updating;switch(E.type){case"add":if(G.fire===He)break;return A._promise("readwrite",function(){return L(E)},!0);case"put":if(G.fire===He&&I.fire===He)break;return A._promise("readwrite",function(){return L(E)},!0);case"delete":if(H.fire===He)break;return A._promise("readwrite",function(){return L(E)},!0);case"deleteRange":if(H.fire===He)break;return A._promise("readwrite",function(){return function O(K,j,q){return g.query({trans:K,values:!1,query:{index:w,range:j},limit:q}).then(function(ee){var V=ee.result;return L({type:"delete",keys:V,trans:K}).then(function(he){return 0<he.numFailures?Promise.reject(he.failures[0]):V.length<q?{failures:[],numFailures:0,lastResult:void 0}:O(K,i(i({},j),{lower:V[V.length-1],lowerOpen:!0}),q)})})}(E.trans,E.range,1e4)},!0)}return g.mutate(E);function L(O){var K,j,q,ee=$e.trans,V=O.keys||So(w,O);if(!V)throw new Error("Keys missing");return(O=O.type==="add"||O.type==="put"?i(i({},O),{keys:V}):i({},O)).type!=="delete"&&(O.values=a([],O.values)),O.keys&&(O.keys=a([],O.keys)),K=g,q=V,((j=O).type==="add"?Promise.resolve([]):K.getMany({trans:j.trans,keys:q,cache:"immutable"})).then(function(he){var ve=V.map(function(me,xe){var Oe,De,Ie,Ae=he[xe],Te={onerror:null,onsuccess:null};return O.type==="delete"?H.fire.call(Te,me,Ae,ee):O.type==="add"||Ae===void 0?(Oe=G.fire.call(Te,me,O.values[xe],ee),me==null&&Oe!=null&&(O.keys[xe]=me=Oe,w.outbound||U(O.values[xe],w.keyPath,me))):(Oe=Eo(Ae,O.values[xe]),(De=I.fire.call(Te,Oe,me,Ae,ee))&&(Ie=O.values[xe],Object.keys(De).forEach(function(Pe){y(Ie,Pe)?Ie[Pe]=De[Pe]:U(Ie,Pe,De[Pe])}))),Te});return g.mutate(O).then(function(me){for(var xe=me.failures,Oe=me.results,De=me.numFailures,me=me.lastResult,Ie=0;Ie<V.length;++Ie){var Ae=(Oe||V)[Ie],Te=ve[Ie];Ae==null?Te.onerror&&Te.onerror(xe[Ie]):Te.onsuccess&&Te.onsuccess(O.type==="put"&&he[Ie]?O.values[Ie]:Ae)}return{failures:xe,results:Oe,numFailures:De,lastResult:me}}).catch(function(me){return ve.forEach(function(xe){return xe.onerror&&xe.onerror(me)}),Promise.reject(me)})})}}})}})}};function ku(s,d,g){try{if(!d||d.keys.length<s.length)return null;for(var w=[],E=0,A=0;E<d.keys.length&&A<s.length;++E)st(d.keys[E],s[A])===0&&(w.push(g?ge(d.values[E]):d.values[E]),++A);return w.length===s.length?w:null}catch{return null}}var ds={stack:"dbcore",level:-1,create:function(s){return{table:function(d){var g=s.table(d);return i(i({},g),{getMany:function(w){if(!w.cache)return g.getMany(w);var E=ku(w.keys,w.trans._cache,w.cache==="clone");return E?de.resolve(E):g.getMany(w).then(function(A){return w.trans._cache={keys:w.keys,values:w.cache==="clone"?ge(A):A},A})},mutate:function(w){return w.type!=="add"&&(w.trans._cache=null),g.mutate(w)}})}}}};function va(s,d){return s.trans.mode==="readonly"&&!!s.subscr&&!s.trans.explicit&&s.trans.db._options.cache!=="disabled"&&!d.schema.primaryKey.outbound}function Iu(s,d){switch(s){case"query":return d.values&&!d.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Cu={stack:"dbcore",level:0,name:"Observability",create:function(s){var d=s.schema.name,g=new vn(s.MIN_KEY,s.MAX_KEY);return i(i({},s),{transaction:function(w,E,A){if($e.subscr&&E!=="readonly")throw new Se.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat($e.querier));return s.transaction(w,E,A)},table:function(w){var E=s.table(w),A=E.schema,$=A.primaryKey,O=A.indexes,H=$.extractKey,G=$.outbound,I=$.autoIncrement&&O.filter(function(j){return j.compound&&j.keyPath.includes($.keyPath)}),L=i(i({},E),{mutate:function(j){function q(Pe){return Pe="idb://".concat(d,"/").concat(w,"/").concat(Pe),me[Pe]||(me[Pe]=new vn)}var ee,V,he,ve=j.trans,me=j.mutatedParts||(j.mutatedParts={}),xe=q(""),Oe=q(":dels"),De=j.type,Te=j.type==="deleteRange"?[j.range]:j.type==="delete"?[j.keys]:j.values.length<50?[So($,j).filter(function(Pe){return Pe}),j.values]:[],Ie=Te[0],Ae=Te[1],Te=j.trans._cache;return f(Ie)?(xe.addKeys(Ie),(Te=De==="delete"||Ie.length===Ae.length?ku(Ie,Te):null)||Oe.addKeys(Ie),(Te||Ae)&&(ee=q,V=Te,he=Ae,A.indexes.forEach(function(Pe){var Fe=ee(Pe.name||"");function nt(ft){return ft!=null?Pe.extractKey(ft):null}function lt(ft){return Pe.multiEntry&&f(ft)?ft.forEach(function(Rn){return Fe.addKey(Rn)}):Fe.addKey(ft)}(V||he).forEach(function(ft,Wt){var tt=V&&nt(V[Wt]),Wt=he&&nt(he[Wt]);st(tt,Wt)!==0&&(tt!=null&&lt(tt),Wt!=null&&lt(Wt))})}))):Ie?(Ae={from:(Ae=Ie.lower)!==null&&Ae!==void 0?Ae:s.MIN_KEY,to:(Ae=Ie.upper)!==null&&Ae!==void 0?Ae:s.MAX_KEY},Oe.add(Ae),xe.add(Ae)):(xe.add(g),Oe.add(g),A.indexes.forEach(function(Pe){return q(Pe.name).add(g)})),E.mutate(j).then(function(Pe){return!Ie||j.type!=="add"&&j.type!=="put"||(xe.addKeys(Pe.results),I&&I.forEach(function(Fe){for(var nt=j.values.map(function(tt){return Fe.extractKey(tt)}),lt=Fe.keyPath.findIndex(function(tt){return tt===$.keyPath}),ft=0,Rn=Pe.results.length;ft<Rn;++ft)nt[ft][lt]=Pe.results[ft];q(Fe.name).addKeys(nt)})),ve.mutatedParts=Mi(ve.mutatedParts||{},me),Pe})}}),O=function(q){var ee=q.query,q=ee.index,ee=ee.range;return[q,new vn((q=ee.lower)!==null&&q!==void 0?q:s.MIN_KEY,(ee=ee.upper)!==null&&ee!==void 0?ee:s.MAX_KEY)]},K={get:function(j){return[$,new vn(j.key)]},getMany:function(j){return[$,new vn().addKeys(j.keys)]},count:O,query:O,openCursor:O};return c(K).forEach(function(j){L[j]=function(q){var ee=$e.subscr,V=!!ee,he=va($e,E)&&Iu(j,q)?q.obsSet={}:ee;if(V){var ve=function(Ae){return Ae="idb://".concat(d,"/").concat(w,"/").concat(Ae),he[Ae]||(he[Ae]=new vn)},me=ve(""),xe=ve(":dels"),ee=K[j](q),V=ee[0],ee=ee[1];if((j==="query"&&V.isPrimaryKey&&!q.values?xe:ve(V.name||"")).add(ee),!V.isPrimaryKey){if(j!=="count"){var Oe=j==="query"&&G&&q.values&&E.query(i(i({},q),{values:!1}));return E[j].apply(this,arguments).then(function(Ae){if(j==="query"){if(G&&q.values)return Oe.then(function(nt){return nt=nt.result,me.addKeys(nt),Ae});var Te=q.values?Ae.result.map(H):Ae.result;(q.values?me:xe).addKeys(Te)}else if(j==="openCursor"){var Pe=Ae,Fe=q.values;return Pe&&Object.create(Pe,{key:{get:function(){return xe.addKey(Pe.primaryKey),Pe.key}},primaryKey:{get:function(){var nt=Pe.primaryKey;return xe.addKey(nt),nt}},value:{get:function(){return Fe&&me.addKey(Pe.primaryKey),Pe.value}}})}return Ae})}xe.add(g)}}return E[j].apply(this,arguments)}}),L}})}};function Cn(s,d,g){if(g.numFailures===0)return d;if(d.type==="deleteRange")return null;var w=d.keys?d.keys.length:"values"in d&&d.values?d.values.length:1;return g.numFailures===w?null:(d=i({},d),f(d.keys)&&(d.keys=d.keys.filter(function(E,A){return!(A in g.failures)})),"values"in d&&f(d.values)&&(d.values=d.values.filter(function(E,A){return!(A in g.failures)})),d)}function To(s,d){return g=s,((w=d).lower===void 0||(w.lowerOpen?0<st(g,w.lower):0<=st(g,w.lower)))&&(s=s,(d=d).upper===void 0||(d.upperOpen?st(s,d.upper)<0:st(s,d.upper)<=0));var g,w}function $i(s,d,K,w,E,A){if(!K||K.length===0)return s;var $=d.query.index,H=$.multiEntry,G=d.query.range,I=w.schema.primaryKey.extractKey,L=$.extractKey,O=($.lowLevelIndex||$).extractKey,K=K.reduce(function(j,q){var ee=j,V=[];if(q.type==="add"||q.type==="put")for(var he=new vn,ve=q.values.length-1;0<=ve;--ve){var me,xe=q.values[ve],Oe=I(xe);he.hasKey(Oe)||(me=L(xe),(H&&f(me)?me.some(function(Pe){return To(Pe,G)}):To(me,G))&&(he.addKey(Oe),V.push(xe)))}switch(q.type){case"add":var De=new vn().addKeys(d.values?j.map(function(Fe){return I(Fe)}):j),ee=j.concat(d.values?V.filter(function(Fe){return Fe=I(Fe),!De.hasKey(Fe)&&(De.addKey(Fe),!0)}):V.map(function(Fe){return I(Fe)}).filter(function(Fe){return!De.hasKey(Fe)&&(De.addKey(Fe),!0)}));break;case"put":var Ie=new vn().addKeys(q.values.map(function(Fe){return I(Fe)}));ee=j.filter(function(Fe){return!Ie.hasKey(d.values?I(Fe):Fe)}).concat(d.values?V:V.map(function(Fe){return I(Fe)}));break;case"delete":var Ae=new vn().addKeys(q.keys);ee=j.filter(function(Fe){return!Ae.hasKey(d.values?I(Fe):Fe)});break;case"deleteRange":var Te=q.range;ee=j.filter(function(Fe){return!To(I(Fe),Te)})}return ee},s);return K===s?s:(K.sort(function(j,q){return st(O(j),O(q))||st(I(j),I(q))}),d.limit&&d.limit<1/0&&(K.length>d.limit?K.length=d.limit:s.length===d.limit&&K.length<d.limit&&(E.dirty=!0)),A?Object.freeze(K):K)}function hs(s,d){return st(s.lower,d.lower)===0&&st(s.upper,d.upper)===0&&!!s.lowerOpen==!!d.lowerOpen&&!!s.upperOpen==!!d.upperOpen}function Ou(s,d){return function(g,w,E,A){if(g===void 0)return w!==void 0?-1:0;if(w===void 0)return 1;if((w=st(g,w))===0){if(E&&A)return 0;if(E)return 1;if(A)return-1}return w}(s.lower,d.lower,s.lowerOpen,d.lowerOpen)<=0&&0<=function(g,w,E,A){if(g===void 0)return w!==void 0?1:0;if(w===void 0)return-1;if((w=st(g,w))===0){if(E&&A)return 0;if(E)return-1;if(A)return 1}return w}(s.upper,d.upper,s.upperOpen,d.upperOpen)}function Dl(s,d,g,w){s.subscribers.add(g),w.addEventListener("abort",function(){var E,A;s.subscribers.delete(g),s.subscribers.size===0&&(E=s,A=d,setTimeout(function(){E.subscribers.size===0&&pe(A,E)},3e3))})}var Pl={stack:"dbcore",level:0,name:"Cache",create:function(s){var d=s.schema.name;return i(i({},s),{transaction:function(g,w,E){var A,$,H=s.transaction(g,w,E);return w==="readwrite"&&($=(A=new AbortController).signal,E=function(G){return function(){if(A.abort(),w==="readwrite"){for(var I=new Set,L=0,O=g;L<O.length;L++){var K=O[L],j=Cr["idb://".concat(d,"/").concat(K)];if(j){var q=s.table(K),ee=j.optimisticOps.filter(function(Fe){return Fe.trans===H});if(H._explicit&&G&&H.mutatedParts)for(var V=0,he=Object.values(j.queries.query);V<he.length;V++)for(var ve=0,me=(De=he[V]).slice();ve<me.length;ve++)us((Ie=me[ve]).obsSet,H.mutatedParts)&&(pe(De,Ie),Ie.subscribers.forEach(function(Fe){return I.add(Fe)}));else if(0<ee.length){j.optimisticOps=j.optimisticOps.filter(function(Fe){return Fe.trans!==H});for(var xe=0,Oe=Object.values(j.queries.query);xe<Oe.length;xe++)for(var De,Ie,Ae,Te=0,Pe=(De=Oe[xe]).slice();Te<Pe.length;Te++)(Ie=Pe[Te]).res!=null&&H.mutatedParts&&(G&&!Ie.dirty?(Ae=Object.isFrozen(Ie.res),Ae=$i(Ie.res,Ie.req,ee,q,Ie,Ae),Ie.dirty?(pe(De,Ie),Ie.subscribers.forEach(function(Fe){return I.add(Fe)})):Ae!==Ie.res&&(Ie.res=Ae,Ie.promise=de.resolve({result:Ae}))):(Ie.dirty&&pe(De,Ie),Ie.subscribers.forEach(function(Fe){return I.add(Fe)})))}}}I.forEach(function(Fe){return Fe()})}}},H.addEventListener("abort",E(!1),{signal:$}),H.addEventListener("error",E(!1),{signal:$}),H.addEventListener("complete",E(!0),{signal:$})),H},table:function(g){var w=s.table(g),E=w.schema.primaryKey;return i(i({},w),{mutate:function(A){var $=$e.trans;if(E.outbound||$.db._options.cache==="disabled"||$.explicit||$.idbtrans.mode!=="readwrite")return w.mutate(A);var H=Cr["idb://".concat(d,"/").concat(g)];return H?($=w.mutate(A),A.type!=="add"&&A.type!=="put"||!(50<=A.values.length||So(E,A).some(function(G){return G==null}))?(H.optimisticOps.push(A),A.mutatedParts&&ma(A.mutatedParts),$.then(function(G){0<G.numFailures&&(pe(H.optimisticOps,A),(G=Cn(0,A,G))&&H.optimisticOps.push(G),A.mutatedParts&&ma(A.mutatedParts))}),$.catch(function(){pe(H.optimisticOps,A),A.mutatedParts&&ma(A.mutatedParts)})):$.then(function(G){var I=Cn(0,i(i({},A),{values:A.values.map(function(L,O){var K;return G.failures[O]?L:(L=(K=E.keyPath)!==null&&K!==void 0&&K.includes(".")?ge(L):i({},L),U(L,E.keyPath,G.results[O]),L)})}),G);H.optimisticOps.push(I),queueMicrotask(function(){return A.mutatedParts&&ma(A.mutatedParts)})}),$):w.mutate(A)},query:function(A){if(!va($e,w)||!Iu("query",A))return w.query(A);var $=((I=$e.trans)===null||I===void 0?void 0:I.db._options.cache)==="immutable",O=$e,H=O.requery,G=O.signal,I=function(q,ee,V,he){var ve=Cr["idb://".concat(q,"/").concat(ee)];if(!ve)return[];if(!(ee=ve.queries[V]))return[null,!1,ve,null];var me=ee[(he.query?he.query.index.name:null)||""];if(!me)return[null,!1,ve,null];switch(V){case"query":var xe=me.find(function(Oe){return Oe.req.limit===he.limit&&Oe.req.values===he.values&&hs(Oe.req.query.range,he.query.range)});return xe?[xe,!0,ve,me]:[me.find(function(Oe){return("limit"in Oe.req?Oe.req.limit:1/0)>=he.limit&&(!he.values||Oe.req.values)&&Ou(Oe.req.query.range,he.query.range)}),!1,ve,me];case"count":return xe=me.find(function(Oe){return hs(Oe.req.query.range,he.query.range)}),[xe,!!xe,ve,me]}}(d,g,"query",A),L=I[0],O=I[1],K=I[2],j=I[3];return L&&O?L.obsSet=A.obsSet:(O=w.query(A).then(function(q){var ee=q.result;if(L&&(L.res=ee),$){for(var V=0,he=ee.length;V<he;++V)Object.freeze(ee[V]);Object.freeze(ee)}else q.result=ge(ee);return q}).catch(function(q){return j&&L&&pe(j,L),Promise.reject(q)}),L={obsSet:A.obsSet,promise:O,subscribers:new Set,type:"query",req:A,dirty:!1},j?j.push(L):(j=[L],(K=K||(Cr["idb://".concat(d,"/").concat(g)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[A.query.index.name||""]=j)),Dl(L,j,H,G),L.promise.then(function(q){return{result:$i(q.result,A,K==null?void 0:K.optimisticOps,w,L,$)}})}})}})}};function ya(s,d){return new Proxy(s,{get:function(g,w,E){return w==="db"?d:Reflect.get(g,w,E)}})}var Or=(Xt.prototype.version=function(s){if(isNaN(s)||s<.1)throw new Se.Type("Given version is not a positive number");if(s=Math.round(10*s)/10,this.idbdb||this._state.isBeingOpened)throw new Se.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,s);var d=this._versions,g=d.filter(function(w){return w._cfg.version===s})[0];return g||(g=new this.Version(s),d.push(g),d.sort(Al),g.stores({}),this._state.autoSchema=!1,g)},Xt.prototype._whenReady=function(s){var d=this;return this.idbdb&&(this._state.openComplete||$e.letThrough||this._vip)?s():new de(function(g,w){if(d._state.openComplete)return w(new Se.DatabaseClosed(d._state.dbOpenError));if(!d._state.isBeingOpened){if(!d._state.autoOpen)return void w(new Se.DatabaseClosed);d.open().catch(He)}d._state.dbReadyPromise.then(g,w)}).then(s)},Xt.prototype.use=function(s){var d=s.stack,g=s.create,w=s.level,E=s.name;return E&&this.unuse({stack:d,name:E}),s=this._middlewares[d]||(this._middlewares[d]=[]),s.push({stack:d,create:g,level:w??10,name:E}),s.sort(function(A,$){return A.level-$.level}),this},Xt.prototype.unuse=function(s){var d=s.stack,g=s.name,w=s.create;return d&&this._middlewares[d]&&(this._middlewares[d]=this._middlewares[d].filter(function(E){return w?E.create!==w:!!g&&E.name!==g})),this},Xt.prototype.open=function(){var s=this;return qt(Lt,function(){return Li(s)})},Xt.prototype._close=function(){var s=this._state,d=Ur.indexOf(this);if(0<=d&&Ur.splice(d,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}s.isBeingOpened||(s.dbReadyPromise=new de(function(g){s.dbReadyResolve=g}),s.openCanceller=new de(function(g,w){s.cancelOpen=w}))},Xt.prototype.close=function(g){var d=(g===void 0?{disableAutoOpen:!0}:g).disableAutoOpen,g=this._state;d?(g.isBeingOpened&&g.cancelOpen(new Se.DatabaseClosed),this._close(),g.autoOpen=!1,g.dbOpenError=new Se.DatabaseClosed):(this._close(),g.autoOpen=this._options.autoOpen||g.isBeingOpened,g.openComplete=!1,g.dbOpenError=null)},Xt.prototype.delete=function(s){var d=this;s===void 0&&(s={disableAutoOpen:!0});var g=0<arguments.length&&typeof arguments[0]!="object",w=this._state;return new de(function(E,A){function $(){d.close(s);var H=d._deps.indexedDB.deleteDatabase(d.name);H.onsuccess=Et(function(){var G,I,L;G=d._deps,I=d.name,L=G.indexedDB,G=G.IDBKeyRange,bn(L)||I===Ii||pa(L,G).delete(I).catch(He),E()}),H.onerror=Jn(A),H.onblocked=d._fireOnBlocked}if(g)throw new Se.InvalidArgument("Invalid closeOptions argument to db.delete()");w.isBeingOpened?w.dbReadyPromise.then($):$()})},Xt.prototype.backendDB=function(){return this.idbdb},Xt.prototype.isOpen=function(){return this.idbdb!==null},Xt.prototype.hasBeenClosed=function(){var s=this._state.dbOpenError;return s&&s.name==="DatabaseClosed"},Xt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Xt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Xt.prototype,"tables",{get:function(){var s=this;return c(this._allTables).map(function(d){return s._allTables[d]})},enumerable:!1,configurable:!0}),Xt.prototype.transaction=function(){var s=(function(d,g,w){var E=arguments.length;if(E<2)throw new Se.InvalidArgument("Too few arguments");for(var A=new Array(E-1);--E;)A[E-1]=arguments[E];return w=A.pop(),[d,J(A),w]}).apply(this,arguments);return this._transaction.apply(this,s)},Xt.prototype._transaction=function(s,d,g){var w=this,E=$e.trans;E&&E.db===this&&s.indexOf("!")===-1||(E=null);var A,$,H=s.indexOf("?")!==-1;s=s.replace("!","").replace("?","");try{if($=d.map(function(I){if(I=I instanceof w.Table?I.name:I,typeof I!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return I}),s=="r"||s===so)A=so;else{if(s!="rw"&&s!=Ci)throw new Se.InvalidArgument("Invalid transaction mode: "+s);A=Ci}if(E){if(E.mode===so&&A===Ci){if(!H)throw new Se.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");E=null}E&&$.forEach(function(I){if(E&&E.storeNames.indexOf(I)===-1){if(!H)throw new Se.SubTransaction("Table "+I+" not included in parent transaction.");E=null}}),H&&E&&!E.active&&(E=null)}}catch(I){return E?E._promise(null,function(L,O){O(I)}):Dt(I)}var G=(function I(L,O,K,j,q){return de.resolve().then(function(){var ee=$e.transless||$e,V=L._createTransaction(O,K,L._dbSchema,j);if(V.explicit=!0,ee={trans:V,transless:ee},j)V.idbtrans=j.idbtrans;else try{V.create(),V.idbtrans._explicit=!0,L._state.PR1398_maxLoop=3}catch(me){return me.name===Ye.InvalidState&&L.isOpen()&&0<--L._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),L.close({disableAutoOpen:!1}),L.open().then(function(){return I(L,O,K,null,q)})):Dt(me)}var he,ve=ue(q);return ve&&Gn(),ee=de.follow(function(){var me;(he=q.call(V,V))&&(ve?(me=Pn.bind(null,null),he.then(me,me)):typeof he.next=="function"&&typeof he.throw=="function"&&(he=fs(he)))},ee),(he&&typeof he.then=="function"?de.resolve(he).then(function(me){return V.active?me:Dt(new Se.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):ee.then(function(){return he})).then(function(me){return j&&V._resolve(),V._completion.then(function(){return me})}).catch(function(me){return V._reject(me),Dt(me)})})}).bind(null,this,A,$,E,g);return E?E._promise(A,G,"lock"):$e.trans?qt($e.transless,function(){return w._whenReady(G)}):this._whenReady(G)},Xt.prototype.table=function(s){if(!y(this._allTables,s))throw new Se.InvalidTable("Table ".concat(s," does not exist"));return this._allTables[s]},Xt);function Xt(s,d){var g=this;this._middlewares={},this.verno=0;var w=Xt.dependencies;this._options=d=i({addons:Xt.addons,autoOpen:!0,indexedDB:w.indexedDB,IDBKeyRange:w.IDBKeyRange,cache:"cloned"},d),this._deps={indexedDB:d.indexedDB,IDBKeyRange:d.IDBKeyRange},w=d.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var E,A,$,H,G,I={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:He,dbReadyPromise:null,cancelOpen:He,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:d.autoOpen};I.dbReadyPromise=new de(function(O){I.dbReadyResolve=O}),I.openCanceller=new de(function(O,K){I.cancelOpen=K}),this._state=I,this.name=s,this.on=ii(this,"populate","blocked","versionchange","close",{ready:[jt,He]}),this.on.ready.subscribe=te(this.on.ready.subscribe,function(O){return function(K,j){Xt.vip(function(){var q,ee=g._state;ee.openComplete?(ee.dbOpenError||de.resolve().then(K),j&&O(K)):ee.onReadyBeingFired?(ee.onReadyBeingFired.push(K),j&&O(K)):(O(K),q=g,j||O(function V(){q.on.ready.unsubscribe(K),q.on.ready.unsubscribe(V)}))})}}),this.Collection=(E=this,co(es.prototype,function(he,V){this.db=E;var j=uo,q=null;if(V)try{j=V()}catch(ve){q=ve}var ee=he._ctx,V=ee.table,he=V.hook.reading.fire;this._ctx={table:V,index:ee.index,isPrimKey:!ee.index||V.schema.primKey.keyPath&&ee.index===V.schema.primKey.name,range:j,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:q,or:ee.or,valueMapper:he!==Tt?he:null}})),this.Table=(A=this,co(Qa.prototype,function(O,K,j){this.db=A,this._tx=j,this.name=O,this.schema=K,this.hook=A._allTables[O]?A._allTables[O].hook:ii(null,{creating:[St,He],reading:[Xe,Tt],updating:[Be,He],deleting:[et,He]})})),this.Transaction=($=this,co(ns.prototype,function(O,K,j,q,ee){var V=this;this.db=$,this.mode=O,this.storeNames=K,this.schema=j,this.chromeTransactionDurability=q,this.idbtrans=null,this.on=ii(this,"complete","error","abort"),this.parent=ee||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new de(function(he,ve){V._resolve=he,V._reject=ve}),this._completion.then(function(){V.active=!1,V.on.complete.fire()},function(he){var ve=V.active;return V.active=!1,V.on.error.fire(he),V.parent?V.parent._reject(he):ve&&V.idbtrans&&V.idbtrans.abort(),Dt(he)})})),this.Version=(H=this,co(Su.prototype,function(O){this.db=H,this._cfg={version:O,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(G=this,co(_u.prototype,function(O,K,j){if(this.db=G,this._ctx={table:O,index:K===":id"?null:K,or:j},this._cmp=this._ascending=st,this._descending=function(q,ee){return st(ee,q)},this._max=function(q,ee){return 0<st(q,ee)?q:ee},this._min=function(q,ee){return st(q,ee)<0?q:ee},this._IDBKeyRange=G._deps.IDBKeyRange,!this._IDBKeyRange)throw new Se.MissingAPI})),this.on("versionchange",function(O){0<O.newVersion?console.warn("Another connection wants to upgrade database '".concat(g.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(g.name,"'. Closing db now to resume the delete request.")),g.close({disableAutoOpen:!1})}),this.on("blocked",function(O){!O.newVersion||O.newVersion<O.oldVersion?console.warn("Dexie.delete('".concat(g.name,"') was blocked")):console.warn("Upgrade '".concat(g.name,"' blocked by other connection holding version ").concat(O.oldVersion/10))}),this._maxKey=mo(d.IDBKeyRange),this._createTransaction=function(O,K,j,q){return new g.Transaction(O,K,j,g._options.chromeTransactionDurability,q)},this._fireOnBlocked=function(O){g.on("blocked").fire(O),Ur.filter(function(K){return K.name===g.name&&K!==g&&!K._state.vcFired}).map(function(K){return K.on("versionchange").fire(O)})},this.use(ds),this.use(Pl),this.use(Cu),this.use(Tu),this.use(Nu);var L=new Proxy(this,{get:function(O,K,j){if(K==="_vip")return!0;if(K==="table")return function(ee){return ya(g.table(ee),L)};var q=Reflect.get(O,K,j);return q instanceof Qa?ya(q,L):K==="tables"?q.map(function(ee){return ya(ee,L)}):K==="_createTransaction"?function(){return ya(q.apply(this,arguments),L)}:q}});this.vip=L,w.forEach(function(O){return O(g)})}var Ar,Hn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Rl=(No.prototype.subscribe=function(s,d,g){return this._subscribe(s&&typeof s!="function"?s:{next:s,error:d,complete:g})},No.prototype[Hn]=function(){return this},No);function No(s){this._subscribe=s}try{Ar={indexedDB:u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.msIndexedDB,IDBKeyRange:u.IDBKeyRange||u.webkitIDBKeyRange}}catch{Ar={indexedDB:null,IDBKeyRange:null}}function ps(s){var d,g=!1,w=new Rl(function(E){var A=ue(s),$,H=!1,G={},I={},L={get closed(){return H},unsubscribe:function(){H||(H=!0,$&&$.abort(),O&&Yr.storagemutated.unsubscribe(j))}};E.start&&E.start(L);var O=!1,K=function(){return Sr(q)},j=function(ee){Mi(G,ee),us(I,G)&&K()},q=function(){var ee,V,he;!H&&Ar.indexedDB&&(G={},ee={},$&&$.abort(),$=new AbortController,he=function(ve){var me=$t();try{A&&Gn();var xe=Nn(s,ve);return xe=A?xe.finally(Pn):xe}finally{me&&jn()}}(V={subscr:ee,signal:$.signal,requery:K,querier:s,trans:null}),Promise.resolve(he).then(function(ve){g=!0,d=ve,H||V.signal.aborted||(G={},function(me){for(var xe in me)if(y(me,xe))return;return 1}(I=ee)||O||(Yr(po,j),O=!0),Sr(function(){return!H&&E.next&&E.next(ve)}))},function(ve){g=!1,["DatabaseClosedError","AbortError"].includes(ve==null?void 0:ve.name)||H||Sr(function(){H||E.error&&E.error(ve)})}))};return setTimeout(K,0),L});return w.hasValue=function(){return g},w.getValue=function(){return d},w}var On=Or;function Wi(s){var d=Vr;try{Vr=!0,Yr.storagemutated.fire(s),ga(s,!0)}finally{Vr=d}}x(On,i(i({},xt),{delete:function(s){return new On(s,{addons:[]}).delete()},exists:function(s){return new On(s,{addons:[]}).open().then(function(d){return d.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(s){try{return d=On.dependencies,g=d.indexedDB,d=d.IDBKeyRange,(bn(g)?Promise.resolve(g.databases()).then(function(w){return w.map(function(E){return E.name}).filter(function(E){return E!==Ii})}):pa(g,d).toCollection().primaryKeys()).then(s)}catch{return Dt(new Se.MissingAPI)}var d,g},defineClass:function(){return function(s){h(this,s)}},ignoreTransaction:function(s){return $e.trans?qt($e.transless,s):s()},vip:ss,async:function(s){return function(){try{var d=fs(s.apply(this,arguments));return d&&typeof d.then=="function"?d:de.resolve(d)}catch(g){return Dt(g)}}},spawn:function(s,d,g){try{var w=fs(s.apply(g,d||[]));return w&&typeof w.then=="function"?w:de.resolve(w)}catch(E){return Dt(E)}},currentTransaction:{get:function(){return $e.trans||null}},waitFor:function(s,d){return d=de.resolve(typeof s=="function"?On.ignoreTransaction(s):s).timeout(d||6e4),$e.trans?$e.trans.waitFor(d):d},Promise:de,debug:{get:function(){return bt},set:function(s){sn(s)}},derive:S,extend:h,props:x,override:te,Events:ii,on:Yr,liveQuery:ps,extendObservabilitySet:Mi,getByKeyPath:ae,setByKeyPath:U,delByKeyPath:function(s,d){typeof d=="string"?U(s,d,void 0):"length"in d&&[].map.call(d,function(g){U(s,g,void 0)})},shallowClone:Q,deepClone:ge,getObjectDiff:Eo,cmp:st,asap:le,minKey:-1/0,addons:[],connections:Ur,errnames:Ye,dependencies:Ar,cache:Cr,semVer:"4.0.10",version:"4.0.10".split(".").map(function(s){return parseInt(s)}).reduce(function(s,d,g){return s+d/Math.pow(10,2*g)})})),On.maxKey=mo(On.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Yr(po,function(s){Vr||(s=new CustomEvent(ts,{detail:s}),Vr=!0,dispatchEvent(s),Vr=!1)}),addEventListener(ts,function(s){s=s.detail,Vr||Wi(s)}));var Fi,Vr=!1,Au=function(){};return typeof BroadcastChannel<"u"&&((Au=function(){(Fi=new BroadcastChannel(ts)).onmessage=function(s){return s.data&&Wi(s.data)}})(),typeof Fi.unref=="function"&&Fi.unref(),Yr(po,function(s){Vr||Fi.postMessage(s)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(s){if(!Or.disableBfCache&&s.persisted){bt&&console.debug("Dexie: handling persisted pagehide"),Fi!=null&&Fi.close();for(var d=0,g=Ur;d<g.length;d++)g[d].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(s){!Or.disableBfCache&&s.persisted&&(bt&&console.debug("Dexie: handling persisted pageshow"),Au(),Wi({all:new vn(-1/0,[[]])}))})),de.rejectionMapper=function(s,d){return!s||s instanceof ke||s instanceof TypeError||s instanceof SyntaxError||!s.name||!rt[s.name]?s:(d=new rt[s.name](d||s.message,s),"stack"in s&&N(d,"stack",{get:function(){return this.inner.stack}}),d)},sn(bt),i(Or,Object.freeze({__proto__:null,Dexie:Or,liveQuery:ps,Entity:ra,cmp:st,PropModSymbol:Tr,PropModification:Di,replacePrefix:function(s,d){return new Di({replacePrefix:[s,d]})},add:function(s){return new Di({add:s})},remove:function(s){return new Di({remove:s})},default:Or,RangeSet:vn,mergeRanges:Bn,rangesOverlap:xo}),{default:Or}),Or})})(Qv);var tA=Qv.exports;const bd=nh(tA),Ng=Symbol.for("Dexie"),_d=globalThis[Ng]||(globalThis[Ng]=bd);if(bd.semVer!==_d.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${bd.semVer} and ${_d.semVer}`);class nA extends _d{constructor(){super("TemporalDB"),this.version(3).stores({workflows:"[workflowId+runId],[parentWorkflowId+parentWorkflowRunId], parentWorkflowId, parentWorkflowRunId",activities:"[activityId+workflowId+workflowRunId],[workflowId+workflowRunId], workflowId, workflowRunId",settings:"id"})}}const ti=new nA;async function kg(e){try{await ti.workflows.put(e),console.debug("Workflow added successfully:",e)}catch(t){console.error("Failed to add workflow:",t,e)}}async function rl(e,t){if(t)try{const n=await ti.workflows.get({workflowId:e,runId:t});return console.debug("Retrieved Workflow:",n),n}catch(n){console.error("Failed to retrieve workflow:",n);return}}async function rA(e,t){try{await ti.workflows.where({workflowId:e,runId:t}).delete(),console.debug(`Deleted Workflow with ID: ${e}`)}catch(n){console.error("Failed to delete workflow:",n)}}async function iA(e){try{await ti.activities.put(e),console.debug("Activity added successfully:",e)}catch(t){console.error("Failed to add activity:",t,e)}}async function oA(e,t,n){try{const i=await ti.activities.get({activityId:t,workflowId:e,workflowRunId:n});return console.debug("Retrieved Activity:",i),i}catch(i){console.error("Failed to retrieve activity:",i);return}}async function aA(e,t,n){try{await ti.activities.where({activityId:t,workflowId:e,workflowRunId:n}).delete(),console.debug(`Deleted Activity with ID: ${t}`)}catch(i){console.error("Failed to delete activity:",i)}}async function Jv(e,t){try{return await ti.activities.where(["workflowId","workflowRunId"]).equals([e,t]).toArray()}catch(n){return console.error("Failed to retrieve activities by workflowId:",n),[]}}async function ey(e,t){try{return await ti.workflows.where(["parentWorkflowId","parentWorkflowRunId"]).equals([e,t]).toArray()}catch(n){return console.error("Failed to retrieve child workflows:",n),[]}}async function Ed(e,t){const n=await rl(e,t);if(!n)throw new Error(`Root workflow not found for ${e} ${t}`);const i=await ey(e,t),a=await Jv(e,t);return[n,...i,...a]}async function ru(e){try{const t=await ti.settings.get(e);return t==null?void 0:t.value}catch(t){console.error("Failed to retrieve setting:",t);return}}async function Sd(e,t){try{await ti.settings.put({id:e,value:t}),console.debug(`Setting ${e} updated successfully:`,t)}catch(n){console.error("Failed to update setting:",n)}}var $c=function(){return $c=Object.assign||function(t){for(var n,i=1,a=arguments.length;i<a;i++){n=arguments[i];for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&(t[u]=n[u])}return t},$c.apply(this,arguments)};function sA(){var e=k.useRef(!1),t=k.useCallback(function(){return e.current},[]);return k.useEffect(function(){return e.current=!0,function(){e.current=!1}},[]),t}function uA(e,t,n){t===void 0&&(t=[]),n===void 0&&(n={loading:!1});var i=k.useRef(0),a=sA(),u=k.useState(n),c=u[0],f=u[1],h=k.useCallback(function(){for(var p=[],m=0;m<arguments.length;m++)p[m]=arguments[m];var y=++i.current;return c.loading||f(function(x){return $c($c({},x),{loading:!0})}),e.apply(void 0,p).then(function(x){return a()&&y===i.current&&f({value:x,loading:!1}),x},function(x){return a()&&y===i.current&&f({error:x,loading:!1}),x})},t);return[c,h]}function ty(e,t){t===void 0&&(t=[]);var n=uA(e,t,{loading:!0}),i=n[0],a=n[1];return k.useEffect(function(){a()},[a]),i}const cA=e=>ty(async()=>{const n=await rl(e.workflowId,e.workflowRunId);if(!n)throw new Error("Workflow data not found");return n},[e]),lA=e=>ty(async()=>{const n=await oA(e.workflowId,e.activityId,e.workflowRunId);if(!n)throw new Error("Activity data not found");return n},[e]);var an=(e=>(e.WORKFLOW_EXECUTION_STARTED="EVENT_TYPE_WORKFLOW_EXECUTION_STARTED",e.WORKFLOW_TASK_SCHEDULED="EVENT_TYPE_WORKFLOW_TASK_SCHEDULED",e.WORKFLOW_TASK_STARTED="EVENT_TYPE_WORKFLOW_TASK_STARTED",e.WORKFLOW_TASK_COMPLETED="EVENT_TYPE_WORKFLOW_TASK_COMPLETED",e.ACTIVITY_TASK_SCHEDULED="EVENT_TYPE_ACTIVITY_TASK_SCHEDULED",e.ACTIVITY_TASK_STARTED="EVENT_TYPE_ACTIVITY_TASK_STARTED",e.ACTIVITY_TASK_COMPLETED="EVENT_TYPE_ACTIVITY_TASK_COMPLETED",e.ACTIVITY_TASK_FAILED="EVENT_TYPE_ACTIVITY_TASK_FAILED",e.ACTIVITY_TASK_TIMED_OUT="EVENT_TYPE_ACTIVITY_TASK_TIMED_OUT",e.ACTIVITY_TASK_CANCELED="EVENT_TYPE_ACTIVITY_TASK_CANCELED",e.WORKFLOW_EXECUTION_COMPLETED="EVENT_TYPE_WORKFLOW_EXECUTION_COMPLETED",e.WORKFLOW_EXECUTION_FAILED="EVENT_TYPE_WORKFLOW_EXECUTION_FAILED",e.WORKFLOW_EXECUTION_TIMED_OUT="EVENT_TYPE_WORKFLOW_EXECUTION_TIMED_OUT",e.WORKFLOW_EXECUTION_CANCELED="EVENT_TYPE_WORKFLOW_EXECUTION_CANCELED",e.WORKFLOW_EXECUTION_TERMINATED="EVENT_TYPE_WORKFLOW_EXECUTION_TERMINATED",e.START_CHILD_WORKFLOW_EXECUTION_INITIATED="EVENT_TYPE_START_CHILD_WORKFLOW_EXECUTION_INITIATED",e.CHILD_WORKFLOW_EXECUTION_STARTED="EVENT_TYPE_CHILD_WORKFLOW_EXECUTION_STARTED",e.CHILD_WORKFLOW_EXECUTION_COMPLETED="EVENT_TYPE_CHILD_WORKFLOW_EXECUTION_COMPLETED",e.START_CHILD_WORKFLOW_EXECUTION_FAILED="EVENT_TYPE_START_CHILD_WORKFLOW_EXECUTION_FAILED",e))(an||{});const Ti=e=>e.type==="workflow"||e.type==="childWorkflow",ny=e=>e.type==="activity",Jo=e=>({workflowId:e.workflowId,workflowRunId:e.runId}),fA=e=>({workflowId:e.workflowId,workflowRunId:e.workflowRunId}),dA=e=>{if(!(!e.parentWorkflowId||!e.parentWorkflowRunId))return{workflowId:e.parentWorkflowId,workflowRunId:e.parentWorkflowRunId}},il=e=>({activityId:e.activityId,workflowId:e.workflowId,workflowRunId:e.workflowRunId}),hA=e=>Ti(e)?dA(e):fA(e);function Bs(e){var n;if(!e||e.length===0)return;if(e.length===1)return(n=e[0])!=null&&n.data?atob(e[0].data):"null";const t=e.map(i=>i!=null&&i.data?atob(i.data):"null").filter(i=>i!==void 0);return t.length>0?`[${t.join(", ")}]`:void 0}async function Ig(e,t,n){var f,h,p,m,y,x,b;const i=[],a={},u={},c=pA(e,t,n);i.push(c);for(const N of e)switch(N.eventType){case an.WORKFLOW_EXECUTION_STARTED:{if(!c)throw console.error("Root workflow not found"),new Error("Root workflow not found");break}case an.WORKFLOW_EXECUTION_COMPLETED:case an.WORKFLOW_EXECUTION_FAILED:case an.WORKFLOW_EXECUTION_TIMED_OUT:case an.WORKFLOW_EXECUTION_CANCELED:case an.WORKFLOW_EXECUTION_TERMINATED:{const S=i[0];S&&(S.endTime=N.eventTime,S.relatedEventIds=S.relatedEventIds||[],S.relatedEventIds.push(N.eventId),S.status=Cg(N.eventType)),N.eventType===an.WORKFLOW_EXECUTION_COMPLETED&&(S.result=Bs((h=(f=N.workflowExecutionCompletedEventAttributes)==null?void 0:f.result)==null?void 0:h.payloads)),N.eventType===an.WORKFLOW_EXECUTION_FAILED&&(S.result=JSON.stringify(N.workflowExecutionFailedEventAttributes)),N.eventType===an.WORKFLOW_EXECUTION_TERMINATED&&(S.result=JSON.stringify(N.workflowExecutionTerminatedEventAttributes));break}case an.ACTIVITY_TASK_SCHEDULED:{const S=N.activityTaskScheduledEventAttributes;if(S){const C={type:"activity",activityId:S.activityId,activityType:S.activityType.name,workflowId:c.workflowId,workflowRunId:c.runId,namespace:c.namespace,scheduleTime:N.eventTime,scheduleToCloseTimeout:S.scheduleToCloseTimeout,scheduleToStartTimeout:S.scheduleToStartTimeout,startToCloseTimeout:S.startToCloseTimeout,heartbeatTimeout:S.heartbeatTimeout,retryPolicy:S.retryPolicy,input:Bs((p=S.input)==null?void 0:p.payloads),status:"SCHEDULED",relatedEventIds:[N.eventId],workflowTaskCompletedEventId:S.workflowTaskCompletedEventId,taskId:N.taskId,sortEventTime:N.eventTime,sortEventId:N.eventId,taskQueue:S.taskQueue,startTime:""};u[N.eventId]=C,i.push(C)}break}case an.ACTIVITY_TASK_STARTED:{const S=N.activityTaskStartedEventAttributes;if(S){const C=u[S.scheduledEventId];C.status==="SCHEDULED"&&(C.status="STARTED"),C.startTime=N.eventTime,C.relatedEventIds=C.relatedEventIds||[],C.relatedEventIds.push(N.eventId),(m=N.activityTaskStartedEventAttributes)!=null&&m.lastFailure&&(C.lastFailure=JSON.stringify(N.activityTaskStartedEventAttributes.lastFailure))}break}case an.ACTIVITY_TASK_COMPLETED:{const S=N.activityTaskCompletedEventAttributes;if(S){const C=u[S.scheduledEventId];C&&(C.endTime=N.eventTime,C.status="COMPLETED",C.relatedEventIds=C.relatedEventIds||[],C.relatedEventIds.push(N.eventId),C.result=Bs((y=S.result)==null?void 0:y.payloads))}break}case an.ACTIVITY_TASK_FAILED:{const S=N.activityTaskFailedEventAttributes;if(S){const C=u[S.scheduledEventId];C&&(C.endTime=N.eventTime,C.status="FAILED",C.relatedEventIds=C.relatedEventIds||[],C.relatedEventIds.push(N.eventId),C.failure=JSON.stringify(S.failure))}break}case an.ACTIVITY_TASK_TIMED_OUT:{const S=N.activityTaskTimedOutEventAttributes;if(S){const C=u[S.scheduledEventId];C&&(C.endTime=N.eventTime,C.status="TIMED_OUT",C.relatedEventIds=C.relatedEventIds||[],C.relatedEventIds.push(N.eventId))}break}case an.ACTIVITY_TASK_CANCELED:{const S=N.activityTaskCanceledEventAttributes;if(S){const C=u[S.scheduledEventId];C&&(C.endTime=N.eventTime,C.status=Cg(N.eventType),C.relatedEventIds=C.relatedEventIds||[],C.relatedEventIds.push(N.eventId))}break}case an.START_CHILD_WORKFLOW_EXECUTION_INITIATED:{const S=N.startChildWorkflowExecutionInitiatedEventAttributes;if(S){const C={type:"childWorkflow",workflowId:S.workflowId,startTime:N.eventTime,status:"INITIATED",parentWorkflowId:c.workflowId,parentWorkflowRunId:c.runId,runId:"",workflowType:(x=S.workflowType)==null?void 0:x.name,relatedEventIds:[N.eventId],workflowTaskCompletedEventId:S.workflowTaskCompletedEventId,namespace:S.namespace,taskQueue:S.taskQueue,workflowRunTimeout:S.workflowRunTimeout,workflowTaskTimeout:S.workflowTaskTimeout,workflowReusePolicy:S.workflowReusePolicy,header:S.header,memo:S.memo,searchAttributes:S.searchAttributes,taskId:N.taskId,sortEventTime:"",sortEventId:""};a[N.eventId]=C,i.push(C)}break}case an.CHILD_WORKFLOW_EXECUTION_STARTED:{const S=N.childWorkflowExecutionStartedEventAttributes;if(S&&S.workflowExecution){const C=a[S.initiatedEventId];C&&(C.startTime=N.eventTime,C.relatedEventIds=C.relatedEventIds||[],C.relatedEventIds.push(N.eventId),C.runId=S.workflowExecution.runId,C.status="RUNNING",C.sortEventTime=N.eventTime,C.sortEventId=N.eventId)}break}case an.CHILD_WORKFLOW_EXECUTION_COMPLETED:{const S=N.childWorkflowExecutionCompletedEventAttributes;if(S){const C=a[S.initiatedEventId];C&&(C.endTime=N.eventTime,C.status="COMPLETED",C.relatedEventIds=C.relatedEventIds||[],C.relatedEventIds.push(N.eventId),C.result=Bs((b=S.result)==null?void 0:b.payloads))}break}case an.START_CHILD_WORKFLOW_EXECUTION_FAILED:{const S=N.startChildWorkflowExecutionFailedEventAttributes;if(S){const C=a[S.initiatedEventId];C&&(S.cause==="START_CHILD_WORKFLOW_EXECUTION_FAILED_CAUSE_WORKFLOW_ALREADY_EXISTS"?(C.runId="",C.status="RUNNING"):S.cause==="WORKFLOW_ID_REUSE_POLICY_ALLOW_DUPLICATE_FAILED_ONLY"&&(C.status="INITIATED",C.runId=""))}break}}return i}function pA(e,t,n){var i,a,u;for(const c of e)if(c.eventType===an.WORKFLOW_EXECUTION_STARTED){const f=c.workflowExecutionStartedEventAttributes;if(f)return{type:"workflow",workflowId:f.workflowId,runId:n,workflowType:f.workflowType.name,startTime:c.eventTime,status:"RUNNING",relatedEventIds:[c.eventId],input:Bs((i=f.input)==null?void 0:i.payloads),header:f.header,attempts:f.attempt,searchAttributes:f.searchAttributes,memo:f.memo,taskQueue:f.taskQueue,namespace:t,parentWorkflowId:(a=f.parentWorkflowExecution)==null?void 0:a.workflowId,parentWorkflowRunId:(u=f.parentWorkflowExecution)==null?void 0:u.runId,parentWorkflowNamespace:f.parentWorkflowNamespace,originalExecutionRunId:f.originalExecutionRunId,firstExecutionRunId:f.firstExecutionRunId,workflowTaskTimeout:f.workflowTaskTimeout,workflowRunTimeout:f.workflowRunTimeout,taskId:c.taskId,sortEventTime:c.eventTime,sortEventId:c.eventId,workflowTaskCompletedEventId:""}}throw new Error("Root workflow not found")}function Cg(e){switch(e){case"EVENT_TYPE_WORKFLOW_EXECUTION_STARTED":case"EVENT_TYPE_CHILD_WORKFLOW_EXECUTION_STARTED":case"EVENT_TYPE_ACTIVITY_TASK_STARTED":return"RUNNING";case"EVENT_TYPE_WORKFLOW_EXECUTION_COMPLETED":case"EVENT_TYPE_CHILD_WORKFLOW_EXECUTION_COMPLETED":case"EVENT_TYPE_ACTIVITY_TASK_COMPLETED":return"COMPLETED";case"EVENT_TYPE_WORKFLOW_EXECUTION_FAILED":case"EVENT_TYPE_CHILD_WORKFLOW_EXECUTION_FAILED":case"EVENT_TYPE_ACTIVITY_TASK_FAILED":return"FAILED";case"EVENT_TYPE_WORKFLOW_EXECUTION_TIMED_OUT":case"EVENT_TYPE_CHILD_WORKFLOW_EXECUTION_TIMED_OUT":case"EVENT_TYPE_ACTIVITY_TASK_TIMED_OUT":return"TIMED_OUT";case"EVENT_TYPE_WORKFLOW_EXECUTION_CANCELED":case"EVENT_TYPE_CHILD_WORKFLOW_EXECUTION_CANCELED":case"EVENT_TYPE_ACTIVITY_TASK_CANCELED":return"CANCELED";case"EVENT_TYPE_WORKFLOW_EXECUTION_TERMINATED":case"EVENT_TYPE_CHILD_WORKFLOW_EXECUTION_TERMINATED":return"TERMINATED";case"EVENT_TYPE_ACTIVITY_TASK_SCHEDULED":return"SCHEDULED";default:return e}}function Og(e){switch(e){case"WORKFLOW_EXECUTION_STATUS_RUNNING":return"RUNNING";case"WORKFLOW_EXECUTION_STATUS_COMPLETED":return"COMPLETED";case"WORKFLOW_EXECUTION_STATUS_FAILED":return"FAILED";case"WORKFLOW_EXECUTION_STATUS_TIMED_OUT":return"TIMED_OUT";case"WORKFLOW_EXECUTION_STATUS_CANCELED":return"CANCELED";case"WORKFLOW_EXECUTION_STATUS_TERMINATED":return"TERMINATED";default:return e}}const mA=e=>({id:e.id,data:e,type:"workflowNode",position:{x:0,y:0}}),gA=e=>({id:e.id,data:e,type:"activityNode",position:{x:0,y:0}}),Ag=e=>{if(e.type==="workflow")return mA(e);if(e.type==="activity")return gA(e);if(e.type==="batch")return{id:e.id,data:e,type:"batchNode",position:{x:0,y:0}};throw new Error("Invalid node data type")},Br=e=>`${e.workflowId}$$${e.workflowRunId}`,ry=e=>{const[t,n]=e.split("$$");return{workflowId:t,workflowRunId:n}},du=e=>`${e.workflowId}$$${e.workflowRunId}$$${e.activityId}`,vA=e=>{const[t,n,i]=e.split("$$");return{workflowId:t,workflowRunId:n,activityId:i}},iy=e=>{if(e.__isBatch){const t=e,i=t.__batchItems.map(a=>Ti(a)?Jo(a):il(a));return{id:t.__originalId+"_batch",type:"batch",referencedBatches:i}}if(Ti(e))return yA(e);if(ny(e))return wA(e);throw new Error("Invalid chronological item type")},yA=e=>({type:"workflow",id:Br(Jo(e))}),wA=e=>({type:"activity",id:du(il(e))}),Hs=e=>Ti(e)?Br(Jo(e)):du(il(e));function oy(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=oy(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function yr(){for(var e,t,n=0,i="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=oy(e))&&(i&&(i+=" "),i+=t);return i}const wh=(e,t)=>{if(!e||!t)return null;const n=new Date(e),a=new Date(t).getTime()-n.getTime(),u=Math.floor(a/1e3),c=Math.floor(u/60),f=Math.floor(c/60),h=[];return f>0&&h.push(`${f}h`),c%60>0&&h.push(`${c%60}m`),u%60>0&&h.push(`${u%60}s`),a%1e3>0&&h.push(`${a%1e3}ms`),h.join(" ")},jf=e=>{switch(e.toLowerCase()){case"completed":return"border-green-500";case"running":return"border-blue-500";case"retrying":return"border-orange-600";case"pending":return"border-purple-600";case"terminated":return"border-yellow-500";case"failed":return"border-red-600";default:return"border-gray-500"}},xA=e=>{switch(e.toLowerCase()){case"completed":return"text-green-600 bg-green-50";case"retrying":return"text-orange-700 bg-orange-100";case"running":return"text-blue-600 bg-blue-50";case"pending":return"text-purple-700 bg-purple-100";case"terminated":return"text-yellow-600 bg-yellow-50";case"failed":return"text-red-700 bg-red-100";default:return"text-gray-600 bg-gray-50"}},xh=k.memo(({id:e,onShowNodeData:t,onBatchAction:n,onClick:i,IconComponent:a,TitleComponent:u,TypeLabelComponent:c,ExtraActionsComponent:f,status:h,startTime:p,endTime:m,taskQueue:y,count:x})=>{const b=x&&x>1;return _.jsxs("div",{className:"relative min-w-[450px]",children:[_.jsx(Zi,{type:"source",position:Ue.Right,id:`${e}-right`,style:{top:"50%",transform:"translateY(-50%)"}}),_.jsx(Zi,{type:"target",position:Ue.Left,id:`${e}-left`,style:{top:"50%",transform:"translateY(-50%)"}}),_.jsx(Zi,{type:"source",position:Ue.Bottom,id:`${e}-bottom`,style:{left:"25px"}}),_.jsx(Zi,{type:"target",position:Ue.Top,id:`${e}-top`,style:{left:"25px"}}),_.jsxs("div",{className:"relative",children:[b&&_.jsxs(_.Fragment,{children:[_.jsx("div",{className:yr("absolute rounded-xl shadow-lg border-2 transition-all duration-300",jf(h),"opacity-40"),style:{top:"-8px",left:"-8px",width:"100%",height:"100%",pointerEvents:"none"},children:_.jsx("div",{className:"p-4 bg-white rounded-xl"})}),_.jsx("div",{className:yr("absolute rounded-xl shadow-lg border-2 transition-all duration-300",jf(h),"opacity-70"),style:{top:"-4px",left:"-4px",width:"100%",height:"100%",pointerEvents:"none"},children:_.jsx("div",{className:"p-4 bg-white rounded-xl"})})]}),_.jsx("div",{className:yr("rounded-xl shadow-lg border-2 transition-all duration-300 relative",jf(h)),children:_.jsxs("div",{className:yr("p-4 relative bg-white rounded-xl",i&&!b&&"cursor-pointer"),onClick:i,children:[_.jsxs("div",{className:"absolute -top-2.5 -right-2.5 flex gap-1",children:[b&&n&&_.jsx("div",{onClick:N=>{N.stopPropagation(),n()},className:"w-6 h-6 flex items-center justify-center bg-blue-500 hover:bg-blue-600 rounded-full text-white shadow-lg z-10 cursor-pointer",children:_.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4.5a6.5 6.5 0 1 0 4.135 11.286l3.572 3.572a1 1 0 0 0 1.414-1.414l-3.572-3.572A6.5 6.5 0 0 0 11 4.5z"})})}),!b&&t&&_.jsx("div",{onClick:N=>{N.stopPropagation(),t(N)},className:"w-6 h-6 flex items-center justify-center bg-gray-500 hover:bg-gray-600 rounded-full text-white shadow-lg z-10 cursor-pointer",children:_.jsx(JO,{className:"w-3 h-3"})}),f]}),_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"w-8 h-8 rounded flex items-center justify-center flex-shrink-0",children:a}),_.jsx("div",{className:"min-w-0",children:u})]}),_.jsxs("div",{className:"absolute -top-3 left-3 flex gap-2",children:[c,_.jsx("div",{className:yr("px-2 py-0.5 rounded text-xs font-medium shadow-sm z-10",xA(h)),children:(h==null?void 0:h.toLowerCase())||"unknown"}),b&&_.jsxs("div",{className:"px-2 py-0.5 rounded text-xs font-medium shadow-sm z-10",style:{backgroundColor:"rgba(224, 242, 254, 0.9)",color:"#0369a1"},children:["batch: ",x]}),p&&m&&_.jsx("div",{className:"px-2 py-0.5 rounded text-xs font-medium shadow-sm z-10",style:{backgroundColor:"rgba(236, 254, 255, 0.9)",color:"#0891b2"},children:wh(p,m)})]}),y&&_.jsx("div",{className:"absolute -bottom-2.5 right-2",children:_.jsx("div",{className:"px-2 py-0.5 rounded text-xs font-medium shadow-sm",style:{backgroundColor:"rgba(240, 253, 244, 0.9)",color:"#166534",fontSize:"0.7rem"},children:y})})]})})]})]})}),Ra={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Dg=(e,t)=>e.unstable_is?e.unstable_is(t):t===e,Pg=e=>"init"in e,Bf=e=>!!e.write,Rg=e=>"v"in e||"e"in e,gc=e=>{if("e"in e)throw e.e;if((Ra?"production":void 0)!=="production"&&!("v"in e))throw new Error("[Bug] atom state is not initialized");return e.v},ay=Symbol(),bh=e=>e[ay],Td=e=>{var t;return _h(e)&&!((t=bh(e))!=null&&t[1])},bA=(e,t)=>{const n=bh(e);if(n)n[1]=!0,n[0].forEach(i=>i(t));else if((Ra?"production":void 0)!=="production")throw new Error("[Bug] cancelable promise not found")},_A=e=>{if(bh(e))return;const t=[new Set,!1];e[ay]=t;const n=()=>{t[1]=!0};e.then(n,n),e.onCancel=i=>{t[0].add(i)}},_h=e=>typeof(e==null?void 0:e.then)=="function",sy=(e,t,n)=>{n.p.has(e)||(n.p.add(e),t.then(()=>{n.p.delete(e)},()=>{n.p.delete(e)}))},Hf=(e,t,n)=>{const i=n(e),a="v"in i,u=i.v,c=Td(i.v)?i.v:null;if(_h(t)){_A(t);for(const f of i.d.keys())sy(e,t,n(f))}i.v=t,delete i.e,(!a||!Object.is(u,i.v))&&(++i.n,c&&bA(c,t))},Mg=(e,t,n)=>{var i;const a=new Set;for(const u of((i=n.get(e))==null?void 0:i.t)||[])n.has(u)&&a.add(u);for(const u of t.p)a.add(u);return a},EA=()=>{const e=new Set,t=()=>{e.forEach(n=>n())};return t.add=n=>(e.add(n),()=>{e.delete(n)}),t},Kf=()=>{const e={},t=new WeakMap,n=i=>{var a,u;(a=t.get(e))==null||a.forEach(c=>c(i)),(u=t.get(i))==null||u.forEach(c=>c())};return n.add=(i,a)=>{const u=i||e,c=(t.has(u)?t:t.set(u,new Set)).get(u);return c.add(a),()=>{c==null||c.delete(a),c.size||t.delete(u)}},n},SA=e=>(e.c||(e.c=Kf()),e.m||(e.m=Kf()),e.u||(e.u=Kf()),e.f||(e.f=EA()),e),TA=Symbol(),NA=(e=new WeakMap,t=new WeakMap,n=new WeakMap,i=new Set,a=new Set,u=new Set,c={},f=(x,...b)=>x.read(...b),h=(x,...b)=>x.write(...b),p=(x,b)=>{var N;return(N=x.unstable_onInit)==null?void 0:N.call(x,b)},m=(x,b)=>{var N;return(N=x.onMount)==null?void 0:N.call(x,b)},...y)=>{const x=y[0]||(U=>{if((Ra?"production":void 0)!=="production"&&!U)throw new Error("Atom is undefined or null");let Q=e.get(U);return Q||(Q={d:new Map,p:new Set,n:0},e.set(U,Q),p==null||p(U,ae)),Q}),b=y[1]||(()=>{let U,Q;const ne=J=>{try{J()}catch(Y){U||(U=!0,Q=Y)}};do{c.f&&ne(c.f);const J=new Set,Y=J.add.bind(J);i.forEach(ce=>{var ge;return(ge=t.get(ce))==null?void 0:ge.l.forEach(Y)}),i.clear(),u.forEach(Y),u.clear(),a.forEach(Y),a.clear(),J.forEach(ne),i.size&&N()}while(i.size||u.size||a.size);if(U)throw Q}),N=y[2]||(()=>{const U=[],Q=new WeakSet,ne=new WeakSet,J=Array.from(i);for(;J.length;){const Y=J[J.length-1],ce=x(Y);if(ne.has(Y)){J.pop();continue}if(Q.has(Y)){if(n.get(Y)===ce.n)U.push([Y,ce]);else if((Ra?"production":void 0)!=="production"&&n.has(Y))throw new Error("[Bug] invalidated atom exists");ne.add(Y),J.pop();continue}Q.add(Y);for(const ge of Mg(Y,ce,t))Q.has(ge)||J.push(ge)}for(let Y=U.length-1;Y>=0;--Y){const[ce,ge]=U[Y];let R=!1;for(const se of ge.d.keys())if(se!==ce&&i.has(se)){R=!0;break}R&&(S(ce),z(ce)),n.delete(ce)}}),S=y[3]||(U=>{var Q,ne;const J=x(U);if(Rg(J)&&(t.has(U)&&n.get(U)!==J.n||Array.from(J.d).every(([pe,W])=>S(pe).n===W)))return J;J.d.clear();let Y=!0;const ce=()=>{t.has(U)&&(z(U),N(),b())},ge=pe=>{var W;if(Dg(U,pe)){const ue=x(pe);if(!Rg(ue))if(Pg(pe))Hf(pe,pe.init,x);else throw new Error("no atom init");return gc(ue)}const ie=S(pe);try{return gc(ie)}finally{J.d.set(pe,ie.n),Td(J.v)&&sy(U,J.v,ie),(W=t.get(pe))==null||W.t.add(U),Y||ce()}};let R,se;const Z={get signal(){return R||(R=new AbortController),R.signal},get setSelf(){return(Ra?"production":void 0)!=="production"&&!Bf(U)&&console.warn("setSelf function cannot be used with read-only atom"),!se&&Bf(U)&&(se=(...pe)=>{if((Ra?"production":void 0)!=="production"&&Y&&console.warn("setSelf function cannot be called in sync"),!Y)try{return M(U,...pe)}finally{N(),b()}}),se}},ye=J.n;try{const pe=f(U,ge,Z);return Hf(U,pe,x),_h(pe)&&((Q=pe.onCancel)==null||Q.call(pe,()=>R==null?void 0:R.abort()),pe.then(ce,ce)),J}catch(pe){return delete J.v,J.e=pe,++J.n,J}finally{Y=!1,ye!==J.n&&n.get(U)===ye&&(n.set(U,J.n),i.add(U),(ne=c.c)==null||ne.call(c,U))}}),C=y[4]||(U=>{const Q=[U];for(;Q.length;){const ne=Q.pop(),J=x(ne);for(const Y of Mg(ne,J,t)){const ce=x(Y);n.set(Y,ce.n),Q.push(Y)}}}),M=y[5]||((U,...Q)=>{let ne=!0;const J=ce=>gc(S(ce)),Y=(ce,...ge)=>{var R;const se=x(ce);try{if(Dg(U,ce)){if(!Pg(ce))throw new Error("atom not writable");const Z=se.n,ye=ge[0];Hf(ce,ye,x),z(ce),Z!==se.n&&(i.add(ce),(R=c.c)==null||R.call(c,ce),C(ce));return}else return M(ce,...ge)}finally{ne||(N(),b())}};try{return h(U,J,Y,...Q)}finally{ne=!1}}),z=y[6]||(U=>{var Q;const ne=x(U),J=t.get(U);if(J&&!Td(ne.v)){for(const[Y,ce]of ne.d)if(!J.d.has(Y)){const ge=x(Y);te(Y).t.add(U),J.d.add(Y),ce!==ge.n&&(i.add(Y),(Q=c.c)==null||Q.call(c,Y),C(Y))}for(const Y of J.d||[])if(!ne.d.has(Y)){J.d.delete(Y);const ce=F(Y);ce==null||ce.t.delete(U)}}}),te=y[7]||(U=>{var Q;const ne=x(U);let J=t.get(U);if(!J){S(U);for(const Y of ne.d.keys())te(Y).t.add(U);if(J={l:new Set,d:new Set(ne.d.keys()),t:new Set},t.set(U,J),(Q=c.m)==null||Q.call(c,U),Bf(U)){const Y=()=>{let ce=!0;const ge=(...R)=>{try{return M(U,...R)}finally{ce||(N(),b())}};try{const R=m(U,ge);R&&(J.u=()=>{ce=!0;try{R()}finally{ce=!1}})}finally{ce=!1}};a.add(Y)}}return J}),F=y[8]||(U=>{var Q;const ne=x(U);let J=t.get(U);if(J&&!J.l.size&&!Array.from(J.t).some(Y=>{var ce;return(ce=t.get(Y))==null?void 0:ce.d.has(U)})){J.u&&u.add(J.u),J=void 0,t.delete(U),(Q=c.u)==null||Q.call(c,U);for(const Y of ne.d.keys()){const ce=F(Y);ce==null||ce.t.delete(U)}return}return J}),le=[e,t,n,i,a,u,c,f,h,p,m,x,b,N,S,C,M,z,te,F],ae={get:U=>gc(S(U)),set:(U,...Q)=>{try{return M(U,...Q)}finally{N(),b()}},sub:(U,Q)=>{const J=te(U).l;return J.add(Q),b(),()=>{J.delete(Q),F(U),b()}}};return Object.defineProperty(ae,TA,{value:le}),ae},uy=NA,kA=SA,Eh={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1};let IA=0;function xr(e,t){const n=`atom${++IA}`,i={toString(){return(Eh?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof e=="function"?i.read=e:(i.init=e,i.read=CA,i.write=OA),t&&(i.write=t),i}function CA(e){return e(this)}function OA(e,t,n){return t(this,typeof n=="function"?n(e(this)):n)}const AA=()=>{let e=0;const t=kA({}),n=new WeakMap,i=new WeakMap,a=uy(n,i,void 0,void 0,void 0,void 0,t,void 0,(f,h,p,...m)=>e?p(f,...m):f.write(h,p,...m)),u=new Set;return t.m.add(void 0,f=>{u.add(f);const h=n.get(f);h.m=i.get(f)}),t.u.add(void 0,f=>{u.delete(f);const h=n.get(f);delete h.m}),Object.assign(a,{dev4_get_internal_weak_map:()=>n,dev4_get_mounted_atoms:()=>u,dev4_restore_atoms:f=>{const h={read:()=>null,write:(p,m)=>{++e;try{for(const[y,x]of f)"init"in y&&m(y,x)}finally{--e}}};a.set(h)}})},DA=()=>(Eh?"production":void 0)!=="production"?AA():uy();let Rs;const PA=()=>(Rs||(Rs=DA(),(Eh?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=Rs),globalThis.__JOTAI_DEFAULT_STORE__!==Rs&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),Rs),cy={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1},RA=k.createContext(void 0),ol=e=>k.useContext(RA)||PA(),ly=e=>typeof(e==null?void 0:e.then)=="function",MA=e=>{e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t})},LA=re.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(MA(e),e)}),zf=new WeakMap,$A=e=>{let t=zf.get(e);return t||(t=new Promise((n,i)=>{let a=e;const u=h=>p=>{a===h&&n(p)},c=h=>p=>{a===h&&i(p)},f=h=>{"onCancel"in h&&typeof h.onCancel=="function"&&h.onCancel(p=>{if((cy?"production":void 0)!=="production"&&p===h)throw new Error("[Bug] p is not updated even after cancelation");ly(p)?(zf.set(p,t),a=p,p.then(u(p),c(p)),f(p)):n(p)})};e.then(u(e),c(e)),f(e)}),zf.set(e,t)),t};function Qi(e,t){const n=ol(),[[i,a,u],c]=k.useReducer(p=>{const m=n.get(e);return Object.is(p[0],m)&&p[1]===n&&p[2]===e?p:[m,n,e]},void 0,()=>[n.get(e),n,e]);let f=i;if((a!==n||u!==e)&&(c(),f=n.get(e)),k.useEffect(()=>{const p=n.sub(e,()=>{c()});return c(),p},[n,e,void 0]),k.useDebugValue(f),ly(f)){const p=$A(f);return LA(p)}return f}function bi(e,t){const n=ol();return k.useCallback((...a)=>{if((cy?"production":void 0)!=="production"&&!("write"in e))throw new Error("not writable atom");return n.set(e,...a)},[n,e])}const Lg=e=>{const t=`${e.source_id}->${e.target_id}`;return e.type==="child"?{id:t,source:e.source_id,sourceHandle:`${e.source_id}-right`,target:e.target_id,type:"step",targetHandle:`${e.target_id}-left`}:{id:t,source:e.source_id,sourceHandle:`${e.source_id}-bottom`,target:e.target_id,targetHandle:`${e.target_id}-top`,type:"step",animated:!0}},WA=500;function FA(e){return WA}function jA(e,t,n,i){if(!t.find(u=>u.id===e))return{nodes:t,edges:n};try{const u=BA(i,t),c=new Set(u.map(h=>h.id)),f=n.filter(h=>c.has(h.source)&&c.has(h.target));return{nodes:u,edges:f}}catch(u){return console.error("[DEBUG] Error in layoutRenderTree:",u),{nodes:t,edges:n}}}function BA(e,t){const n=new Map;t.forEach(f=>n.set(f.id,f));const i=new Map,a=new Set,u=(f,h=0,p=0,m=0,y=null)=>{const x=n.get(f.id);if(!x||a.has(x.id))return;a.add(x.id);const b=FA();let N;m===0?N=y!==null?y:0:N=(y!==null?y:0)+m*110;const S={...x,position:{x:p,y:N},style:{...x.style,width:b}};i.set(S.id,S),f.children.forEach((C,M)=>{u(C,h+1,p+b+100,M,S.position.y)})};u(e);const c=[];return t.forEach(f=>{if(i.has(f.id))c.push(i.get(f.id));else{const h={...f,position:f.position||{x:0,y:0}};c.push(h)}}),c}const Ba=xr([]),Sh=xr([]),fy=xr(null),Ko=xr(null),Th=xr(null),Nd=xr(null),al=xr([]),dy=xr(null,(e,t,n)=>{const{data:i,position:a,baseZIndex:u}=n,c=Ti(i)?Br(Jo(i)):ny(i)?du(il(i)):null;c&&t(al,f=>{const h=f.findIndex(p=>p.id===c);return h>=0?f.map((p,m)=>m===h?{...p,position:a,baseZIndex:Math.max(u||0,1e3+f.length)}:p):[...f,{id:c,node:i,position:a,baseZIndex:Math.max(u||0,1e3+f.length)}]})}),HA=xr(null,(e,t,n)=>{t(al,i=>i.filter(a=>a.id!==n))}),KA=xr(null,(e,t)=>{t(al,[])}),Nh=xr(null,(e,t,n)=>{n.nodes!==void 0&&t(Ba,n.nodes),n.edges!==void 0&&t(Sh,n.edges),n.structure!==void 0&&t(Ko,n.structure),n.renderTree!==void 0&&t(Th,n.renderTree),n.rootId!==void 0&&t(fy,n.rootId)}),hy=xr(e=>{const t=e(Ba),n=e(Sh),i=e(Th),a=e(fy);if(!i){const b=t.map(Ag),N=n.map(Lg);return{nodes:b,edges:N}}const u=new Set,c=(b,N=0)=>{if(u.add(b.id),b.children.length>0)for(const S of b.children)c(S,N+1)};c(i);const h=t.filter(b=>u.has(b.id)).map(Ag),m=n.filter(b=>u.has(b.source_id)&&u.has(b.target_id)).map(Lg);if(!a)return{nodes:h,edges:m};const{nodes:y,edges:x}=jA(a,h,m,i);return{nodes:y,edges:x}});var Wc={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Wc.exports;(function(e,t){(function(){var n,i="4.17.21",a=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",c="Expected a function",f="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",p=500,m="__lodash_placeholder__",y=1,x=2,b=4,N=1,S=2,C=1,M=2,z=4,te=8,F=16,le=32,ae=64,U=128,Q=256,ne=512,J=30,Y="...",ce=800,ge=16,R=1,se=2,Z=3,ye=1/0,pe=9007199254740991,W=17976931348623157e292,ie=NaN,ue=4294967295,we=ue-1,ke=ue>>>1,Me=[["ary",U],["bind",C],["bindKey",M],["curry",te],["curryRight",F],["flip",ne],["partial",le],["partialRight",ae],["rearg",Q]],Re="[object Arguments]",je="[object Array]",Ye="[object AsyncFunction]",qe="[object Boolean]",Se="[object Date]",rt="[object DOMException]",xt="[object Error]",He="[object Function]",Tt="[object GeneratorFunction]",Xe="[object Map]",it="[object Number]",St="[object Null]",et="[object Object]",Be="[object Promise]",Ft="[object Proxy]",jt="[object RegExp]",bt="[object Set]",sn="[object String]",zt="[object Symbol]",un="[object Undefined]",Qt="[object WeakMap]",Ut="[object WeakSet]",tn="[object ArrayBuffer]",Yt="[object DataView]",cn="[object Float32Array]",dn="[object Float64Array]",_t="[object Int8Array]",Bt="[object Int16Array]",Vt="[object Int32Array]",Lt="[object Uint8Array]",$e="[object Uint8ClampedArray]",Ht="[object Uint16Array]",fe="[object Uint32Array]",be=/\b__p \+= '';/g,de=/\b(__p \+=) '' \+/g,Ce=/(__e\(.*?\)|\b__t\)) \+\n'';/g,We=/&(?:amp|lt|gt|quot|#39);/g,ze=/[&<>"']/g,Ve=RegExp(We.source),Ze=RegExp(ze.source),Tn=/<%-([\s\S]+?)%>/g,ct=/<%([\s\S]+?)%>/g,$t=/<%=([\s\S]+?)%>/g,jn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_r=/^\w*$/,Er=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Et=/[\\^$.*+?()[\]{}|]/g,Rt=RegExp(Et.source),sr=/^\s+/,ur=/\s/,cr=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,lr=/\{\n\/\* \[wrapped with (.+)\] \*/,ao=/,? & /,Nn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Gn=/[()=,{}\[\]\/\s]/,Pn=/\\(\\)?/g,zr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ot=/\w*$/,yt=/^[-+]0x[0-9a-f]+$/i,At=/^0b[01]+$/i,qt=/^\[object .+?Constructor\]$/,gn=/^0o[0-7]+$/i,Sr=/^(?:0|[1-9]\d*)$/,Dt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,wn=/($^)/,Zn=/['\n\r\u2028\u2029\\]/g,ri="\\ud800-\\udfff",Ur="\\u0300-\\u036f",Ii="\\ufe20-\\ufe2f",so="\\u20d0-\\u20ff",Ci=Ur+Ii+so,Qn="\\u2700-\\u27bf",uo="a-z\\xdf-\\xf6\\xf8-\\xff",Oi="\\xac\\xb1\\xd7\\xf7",ra="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",st="\\u2000-\\u206f",wu=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Za="A-Z\\xc0-\\xd6\\xd8-\\xde",Qa="\\ufe0e\\ufe0f",Ot=Oi+ra+st+wu,ii="[']",co="["+ri+"]",oi="["+Ot+"]",Ai="["+Ci+"]",ia="\\d+",oa="["+Qn+"]",Ja="["+uo+"]",lo="[^"+ri+Ot+ia+Qn+uo+Za+"]",aa="\\ud83c[\\udffb-\\udfff]",Tr="(?:"+Ai+"|"+aa+")",Di="[^"+ri+"]",sa="(?:\\ud83c[\\udde6-\\uddff]){2}",es="[\\ud800-\\udbff][\\udc00-\\udfff]",ht="["+Za+"]",ua="\\u200d",xu="(?:"+Ja+"|"+lo+")",kl="(?:"+ht+"|"+lo+")",kn="(?:"+ii+"(?:d|ll|m|re|s|t|ve))?",ai="(?:"+ii+"(?:D|LL|M|RE|S|T|VE))?",fo=Tr+"?",Nr="["+Qa+"]?",bu="(?:"+ua+"(?:"+[Di,sa,es].join("|")+")"+Nr+fo+")*",_u="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ln="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Jn=Nr+fo+bu,ho="(?:"+[oa,sa,es].join("|")+")"+Jn,po="(?:"+[Di+Ai+"?",Ai,sa,es,co].join("|")+")",ts=RegExp(ii,"g"),Yr=RegExp(Ai,"g"),ns=RegExp(aa+"(?="+aa+")|"+po+Jn,"g"),fr=RegExp([ht+"?"+Ja+"+"+kn+"(?="+[oi,ht,"$"].join("|")+")",kl+"+"+ai+"(?="+[oi,ht+xu,"$"].join("|")+")",ht+"?"+xu+"+"+kn,ht+"+"+ai,ln,_u,ia,ho].join("|"),"g"),rs=RegExp("["+ua+ri+Ci+Qa+"]"),Eu=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,is=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],mo=-1,kt={};kt[cn]=kt[dn]=kt[_t]=kt[Bt]=kt[Vt]=kt[Lt]=kt[$e]=kt[Ht]=kt[fe]=!0,kt[Re]=kt[je]=kt[tn]=kt[qe]=kt[Yt]=kt[Se]=kt[xt]=kt[He]=kt[Xe]=kt[it]=kt[et]=kt[jt]=kt[bt]=kt[sn]=kt[Qt]=!1;var It={};It[Re]=It[je]=It[tn]=It[Yt]=It[qe]=It[Se]=It[cn]=It[dn]=It[_t]=It[Bt]=It[Vt]=It[Xe]=It[it]=It[et]=It[jt]=It[bt]=It[sn]=It[zt]=It[Lt]=It[$e]=It[Ht]=It[fe]=!0,It[xt]=It[He]=It[Qt]=!1;var Il={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},go={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Cl={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ol={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ca=parseFloat,la=parseInt,fa=typeof Lr=="object"&&Lr&&Lr.Object===Object&&Lr,Al=typeof self=="object"&&self&&self.Object===Object&&self,hn=fa||Al||Function("return this")(),os=t&&!t.nodeType&&t,kr=os&&!0&&e&&!e.nodeType&&e,da=kr&&kr.exports===os,ha=da&&fa.process,xn=function(){try{var I=kr&&kr.require&&kr.require("util").types;return I||ha&&ha.binding&&ha.binding("util")}catch{}}(),vo=xn&&xn.isArrayBuffer,yo=xn&&xn.isDate,as=xn&&xn.isMap,Su=xn&&xn.isRegExp,wo=xn&&xn.isSet,pa=xn&&xn.isTypedArray;function bn(I,L,O){switch(O.length){case 0:return I.call(L);case 1:return I.call(L,O[0]);case 2:return I.call(L,O[0],O[1]);case 3:return I.call(L,O[0],O[1],O[2])}return I.apply(L,O)}function ss(I,L,O,K){for(var j=-1,q=I==null?0:I.length;++j<q;){var ee=I[j];L(K,ee,O(ee),I)}return K}function In(I,L){for(var O=-1,K=I==null?0:I.length;++O<K&&L(I[O],O,I)!==!1;);return I}function vn(I,L){for(var O=I==null?0:I.length;O--&&L(I[O],O,I)!==!1;);return I}function Pi(I,L){for(var O=-1,K=I==null?0:I.length;++O<K;)if(!L(I[O],O,I))return!1;return!0}function Bn(I,L){for(var O=-1,K=I==null?0:I.length,j=0,q=[];++O<K;){var ee=I[O];L(ee,O,I)&&(q[j++]=ee)}return q}function xo(I,L){var O=I==null?0:I.length;return!!O&&Li(I,L,0)>-1}function Ri(I,L,O){for(var K=-1,j=I==null?0:I.length;++K<j;)if(O(L,I[K]))return!0;return!1}function Pt(I,L){for(var O=-1,K=I==null?0:I.length,j=Array(K);++O<K;)j[O]=L(I[O],O,I);return j}function Ir(I,L){for(var O=-1,K=L.length,j=I.length;++O<K;)I[j+O]=L[O];return I}function Mi(I,L,O,K){var j=-1,q=I==null?0:I.length;for(K&&q&&(O=I[++j]);++j<q;)O=L(O,I[j],j,I);return O}function us(I,L,O,K){var j=I==null?0:I.length;for(K&&j&&(O=I[--j]);j--;)O=L(O,I[j],j,I);return O}function Cr(I,L){for(var O=-1,K=I==null?0:I.length;++O<K;)if(L(I[O],O,I))return!0;return!1}var cs=Eo("length");function ls(I){return I.split("")}function ma(I){return I.match(Nn)||[]}function ga(I,L,O){var K;return O(I,function(j,q,ee){if(L(j,q,ee))return K=q,!1}),K}function bo(I,L,O,K){for(var j=I.length,q=O+(K?1:-1);K?q--:++q<j;)if(L(I[q],q,I))return q;return-1}function Li(I,L,O){return L===L?Vr(I,L,O):bo(I,_o,O)}function fs(I,L,O,K){for(var j=O-1,q=I.length;++j<q;)if(K(I[j],L))return j;return-1}function _o(I){return I!==I}function Tu(I,L){var O=I==null?0:I.length;return O?ds(I,L)/O:ie}function Eo(I){return function(L){return L==null?n:L[I]}}function So(I){return function(L){return I==null?n:I[L]}}function Nu(I,L,O,K,j){return j(I,function(q,ee,V){O=K?(K=!1,q):L(O,q,ee,V)}),O}function ku(I,L){var O=I.length;for(I.sort(L);O--;)I[O]=I[O].value;return I}function ds(I,L){for(var O,K=-1,j=I.length;++K<j;){var q=L(I[K]);q!==n&&(O=O===n?q:O+q)}return O}function va(I,L){for(var O=-1,K=Array(I);++O<I;)K[O]=L(O);return K}function Iu(I,L){return Pt(L,function(O){return[O,I[O]]})}function Cu(I){return I&&I.slice(0,g(I)+1).replace(sr,"")}function Cn(I){return function(L){return I(L)}}function To(I,L){return Pt(L,function(O){return I[O]})}function $i(I,L){return I.has(L)}function hs(I,L){for(var O=-1,K=I.length;++O<K&&Li(L,I[O],0)>-1;);return O}function Ou(I,L){for(var O=I.length;O--&&Li(L,I[O],0)>-1;);return O}function Dl(I,L){for(var O=I.length,K=0;O--;)I[O]===L&&++K;return K}var Pl=So(Il),ya=So(go);function Or(I){return"\\"+Ol[I]}function Xt(I,L){return I==null?n:I[L]}function Ar(I){return rs.test(I)}function Hn(I){return Eu.test(I)}function Rl(I){for(var L,O=[];!(L=I.next()).done;)O.push(L.value);return O}function No(I){var L=-1,O=Array(I.size);return I.forEach(function(K,j){O[++L]=[j,K]}),O}function ps(I,L){return function(O){return I(L(O))}}function On(I,L){for(var O=-1,K=I.length,j=0,q=[];++O<K;){var ee=I[O];(ee===L||ee===m)&&(I[O]=m,q[j++]=O)}return q}function Wi(I){var L=-1,O=Array(I.size);return I.forEach(function(K){O[++L]=K}),O}function Fi(I){var L=-1,O=Array(I.size);return I.forEach(function(K){O[++L]=[K,K]}),O}function Vr(I,L,O){for(var K=O-1,j=I.length;++K<j;)if(I[K]===L)return K;return-1}function Au(I,L,O){for(var K=O+1;K--;)if(I[K]===L)return K;return K}function s(I){return Ar(I)?E(I):cs(I)}function d(I){return Ar(I)?A(I):ls(I)}function g(I){for(var L=I.length;L--&&ur.test(I.charAt(L)););return L}var w=So(Cl);function E(I){for(var L=ns.lastIndex=0;ns.test(I);)++L;return L}function A(I){return I.match(ns)||[]}function $(I){return I.match(fr)||[]}var H=function I(L){L=L==null?hn:G.defaults(hn.Object(),L,G.pick(hn,is));var O=L.Array,K=L.Date,j=L.Error,q=L.Function,ee=L.Math,V=L.Object,he=L.RegExp,ve=L.String,me=L.TypeError,xe=O.prototype,Oe=q.prototype,De=V.prototype,Ie=L["__core-js_shared__"],Ae=Oe.toString,Te=De.hasOwnProperty,Pe=0,Fe=function(){var r=/[^.]+$/.exec(Ie&&Ie.keys&&Ie.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),nt=De.toString,lt=Ae.call(V),ft=hn._,Rn=he("^"+Ae.call(Te).replace(Et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=da?L.Buffer:n,Wt=L.Symbol,nn=L.Uint8Array,ko=tt?tt.allocUnsafe:n,fn=ps(V.getPrototypeOf,V),qr=V.create,wa=De.propertyIsEnumerable,Du=xe.splice,Xh=Wt?Wt.isConcatSpreadable:n,ms=Wt?Wt.iterator:n,Io=Wt?Wt.toStringTag:n,Pu=function(){try{var r=Po(V,"defineProperty");return r({},"",{}),r}catch{}}(),Sw=L.clearTimeout!==hn.clearTimeout&&L.clearTimeout,Tw=K&&K.now!==hn.Date.now&&K.now,Nw=L.setTimeout!==hn.setTimeout&&L.setTimeout,Ru=ee.ceil,Mu=ee.floor,Ml=V.getOwnPropertySymbols,kw=tt?tt.isBuffer:n,Gh=L.isFinite,Iw=xe.join,Cw=ps(V.keys,V),pn=ee.max,An=ee.min,Ow=K.now,Aw=L.parseInt,Zh=ee.random,Dw=xe.reverse,Ll=Po(L,"DataView"),gs=Po(L,"Map"),$l=Po(L,"Promise"),xa=Po(L,"Set"),vs=Po(L,"WeakMap"),ys=Po(V,"create"),Lu=vs&&new vs,ba={},Pw=Ro(Ll),Rw=Ro(gs),Mw=Ro($l),Lw=Ro(xa),$w=Ro(vs),$u=Wt?Wt.prototype:n,ws=$u?$u.valueOf:n,Qh=$u?$u.toString:n;function D(r){if(Jt(r)&&!at(r)&&!(r instanceof vt)){if(r instanceof dr)return r;if(Te.call(r,"__wrapped__"))return Jp(r)}return new dr(r)}var _a=function(){function r(){}return function(o){if(!Gt(o))return{};if(qr)return qr(o);r.prototype=o;var l=new r;return r.prototype=n,l}}();function Wu(){}function dr(r,o){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!o,this.__index__=0,this.__values__=n}D.templateSettings={escape:Tn,evaluate:ct,interpolate:$t,variable:"",imports:{_:D}},D.prototype=Wu.prototype,D.prototype.constructor=D,dr.prototype=_a(Wu.prototype),dr.prototype.constructor=dr;function vt(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ue,this.__views__=[]}function Ww(){var r=new vt(this.__wrapped__);return r.__actions__=Kn(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=Kn(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=Kn(this.__views__),r}function Fw(){if(this.__filtered__){var r=new vt(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}function jw(){var r=this.__wrapped__.value(),o=this.__dir__,l=at(r),v=o<0,T=l?r.length:0,P=Qx(0,T,this.__views__),B=P.start,X=P.end,oe=X-B,_e=v?X:B-1,Ee=this.__iteratees__,Ne=Ee.length,Le=0,Ke=An(oe,this.__takeCount__);if(!l||!v&&T==oe&&Ke==oe)return _p(r,this.__actions__);var Qe=[];e:for(;oe--&&Le<Ke;){_e+=o;for(var dt=-1,Je=r[_e];++dt<Ne;){var gt=Ee[dt],wt=gt.iteratee,nr=gt.type,$n=wt(Je);if(nr==se)Je=$n;else if(!$n){if(nr==R)continue e;break e}}Qe[Le++]=Je}return Qe}vt.prototype=_a(Wu.prototype),vt.prototype.constructor=vt;function Co(r){var o=-1,l=r==null?0:r.length;for(this.clear();++o<l;){var v=r[o];this.set(v[0],v[1])}}function Bw(){this.__data__=ys?ys(null):{},this.size=0}function Hw(r){var o=this.has(r)&&delete this.__data__[r];return this.size-=o?1:0,o}function Kw(r){var o=this.__data__;if(ys){var l=o[r];return l===h?n:l}return Te.call(o,r)?o[r]:n}function zw(r){var o=this.__data__;return ys?o[r]!==n:Te.call(o,r)}function Uw(r,o){var l=this.__data__;return this.size+=this.has(r)?0:1,l[r]=ys&&o===n?h:o,this}Co.prototype.clear=Bw,Co.prototype.delete=Hw,Co.prototype.get=Kw,Co.prototype.has=zw,Co.prototype.set=Uw;function si(r){var o=-1,l=r==null?0:r.length;for(this.clear();++o<l;){var v=r[o];this.set(v[0],v[1])}}function Yw(){this.__data__=[],this.size=0}function Vw(r){var o=this.__data__,l=Fu(o,r);if(l<0)return!1;var v=o.length-1;return l==v?o.pop():Du.call(o,l,1),--this.size,!0}function qw(r){var o=this.__data__,l=Fu(o,r);return l<0?n:o[l][1]}function Xw(r){return Fu(this.__data__,r)>-1}function Gw(r,o){var l=this.__data__,v=Fu(l,r);return v<0?(++this.size,l.push([r,o])):l[v][1]=o,this}si.prototype.clear=Yw,si.prototype.delete=Vw,si.prototype.get=qw,si.prototype.has=Xw,si.prototype.set=Gw;function ui(r){var o=-1,l=r==null?0:r.length;for(this.clear();++o<l;){var v=r[o];this.set(v[0],v[1])}}function Zw(){this.size=0,this.__data__={hash:new Co,map:new(gs||si),string:new Co}}function Qw(r){var o=Zu(this,r).delete(r);return this.size-=o?1:0,o}function Jw(r){return Zu(this,r).get(r)}function ex(r){return Zu(this,r).has(r)}function tx(r,o){var l=Zu(this,r),v=l.size;return l.set(r,o),this.size+=l.size==v?0:1,this}ui.prototype.clear=Zw,ui.prototype.delete=Qw,ui.prototype.get=Jw,ui.prototype.has=ex,ui.prototype.set=tx;function Oo(r){var o=-1,l=r==null?0:r.length;for(this.__data__=new ui;++o<l;)this.add(r[o])}function nx(r){return this.__data__.set(r,h),this}function rx(r){return this.__data__.has(r)}Oo.prototype.add=Oo.prototype.push=nx,Oo.prototype.has=rx;function Dr(r){var o=this.__data__=new si(r);this.size=o.size}function ix(){this.__data__=new si,this.size=0}function ox(r){var o=this.__data__,l=o.delete(r);return this.size=o.size,l}function ax(r){return this.__data__.get(r)}function sx(r){return this.__data__.has(r)}function ux(r,o){var l=this.__data__;if(l instanceof si){var v=l.__data__;if(!gs||v.length<a-1)return v.push([r,o]),this.size=++l.size,this;l=this.__data__=new ui(v)}return l.set(r,o),this.size=l.size,this}Dr.prototype.clear=ix,Dr.prototype.delete=ox,Dr.prototype.get=ax,Dr.prototype.has=sx,Dr.prototype.set=ux;function Jh(r,o){var l=at(r),v=!l&&Mo(r),T=!l&&!v&&zi(r),P=!l&&!v&&!T&&Na(r),B=l||v||T||P,X=B?va(r.length,ve):[],oe=X.length;for(var _e in r)(o||Te.call(r,_e))&&!(B&&(_e=="length"||T&&(_e=="offset"||_e=="parent")||P&&(_e=="buffer"||_e=="byteLength"||_e=="byteOffset")||di(_e,oe)))&&X.push(_e);return X}function ep(r){var o=r.length;return o?r[ql(0,o-1)]:n}function cx(r,o){return Qu(Kn(r),Ao(o,0,r.length))}function lx(r){return Qu(Kn(r))}function Wl(r,o,l){(l!==n&&!Pr(r[o],l)||l===n&&!(o in r))&&ci(r,o,l)}function xs(r,o,l){var v=r[o];(!(Te.call(r,o)&&Pr(v,l))||l===n&&!(o in r))&&ci(r,o,l)}function Fu(r,o){for(var l=r.length;l--;)if(Pr(r[l][0],o))return l;return-1}function fx(r,o,l,v){return ji(r,function(T,P,B){o(v,T,l(T),B)}),v}function tp(r,o){return r&&Gr(o,yn(o),r)}function dx(r,o){return r&&Gr(o,Un(o),r)}function ci(r,o,l){o=="__proto__"&&Pu?Pu(r,o,{configurable:!0,enumerable:!0,value:l,writable:!0}):r[o]=l}function Fl(r,o){for(var l=-1,v=o.length,T=O(v),P=r==null;++l<v;)T[l]=P?n:xf(r,o[l]);return T}function Ao(r,o,l){return r===r&&(l!==n&&(r=r<=l?r:l),o!==n&&(r=r>=o?r:o)),r}function hr(r,o,l,v,T,P){var B,X=o&y,oe=o&x,_e=o&b;if(l&&(B=T?l(r,v,T,P):l(r)),B!==n)return B;if(!Gt(r))return r;var Ee=at(r);if(Ee){if(B=eb(r),!X)return Kn(r,B)}else{var Ne=Dn(r),Le=Ne==He||Ne==Tt;if(zi(r))return Tp(r,X);if(Ne==et||Ne==Re||Le&&!T){if(B=oe||Le?{}:zp(r),!X)return oe?Kx(r,dx(B,r)):Hx(r,tp(B,r))}else{if(!It[Ne])return T?r:{};B=tb(r,Ne,X)}}P||(P=new Dr);var Ke=P.get(r);if(Ke)return Ke;P.set(r,B),wm(r)?r.forEach(function(Je){B.add(hr(Je,o,l,Je,r,P))}):vm(r)&&r.forEach(function(Je,gt){B.set(gt,hr(Je,o,l,gt,r,P))});var Qe=_e?oe?af:of:oe?Un:yn,dt=Ee?n:Qe(r);return In(dt||r,function(Je,gt){dt&&(gt=Je,Je=r[gt]),xs(B,gt,hr(Je,o,l,gt,r,P))}),B}function hx(r){var o=yn(r);return function(l){return np(l,r,o)}}function np(r,o,l){var v=l.length;if(r==null)return!v;for(r=V(r);v--;){var T=l[v],P=o[T],B=r[T];if(B===n&&!(T in r)||!P(B))return!1}return!0}function rp(r,o,l){if(typeof r!="function")throw new me(c);return ks(function(){r.apply(n,l)},o)}function bs(r,o,l,v){var T=-1,P=xo,B=!0,X=r.length,oe=[],_e=o.length;if(!X)return oe;l&&(o=Pt(o,Cn(l))),v?(P=Ri,B=!1):o.length>=a&&(P=$i,B=!1,o=new Oo(o));e:for(;++T<X;){var Ee=r[T],Ne=l==null?Ee:l(Ee);if(Ee=v||Ee!==0?Ee:0,B&&Ne===Ne){for(var Le=_e;Le--;)if(o[Le]===Ne)continue e;oe.push(Ee)}else P(o,Ne,v)||oe.push(Ee)}return oe}var ji=Op(Xr),ip=Op(Bl,!0);function px(r,o){var l=!0;return ji(r,function(v,T,P){return l=!!o(v,T,P),l}),l}function ju(r,o,l){for(var v=-1,T=r.length;++v<T;){var P=r[v],B=o(P);if(B!=null&&(X===n?B===B&&!tr(B):l(B,X)))var X=B,oe=P}return oe}function mx(r,o,l,v){var T=r.length;for(l=ut(l),l<0&&(l=-l>T?0:T+l),v=v===n||v>T?T:ut(v),v<0&&(v+=T),v=l>v?0:bm(v);l<v;)r[l++]=o;return r}function op(r,o){var l=[];return ji(r,function(v,T,P){o(v,T,P)&&l.push(v)}),l}function _n(r,o,l,v,T){var P=-1,B=r.length;for(l||(l=rb),T||(T=[]);++P<B;){var X=r[P];o>0&&l(X)?o>1?_n(X,o-1,l,v,T):Ir(T,X):v||(T[T.length]=X)}return T}var jl=Ap(),ap=Ap(!0);function Xr(r,o){return r&&jl(r,o,yn)}function Bl(r,o){return r&&ap(r,o,yn)}function Bu(r,o){return Bn(o,function(l){return hi(r[l])})}function Do(r,o){o=Hi(o,r);for(var l=0,v=o.length;r!=null&&l<v;)r=r[Zr(o[l++])];return l&&l==v?r:n}function sp(r,o,l){var v=o(r);return at(r)?v:Ir(v,l(r))}function Mn(r){return r==null?r===n?un:St:Io&&Io in V(r)?Zx(r):lb(r)}function Hl(r,o){return r>o}function gx(r,o){return r!=null&&Te.call(r,o)}function vx(r,o){return r!=null&&o in V(r)}function yx(r,o,l){return r>=An(o,l)&&r<pn(o,l)}function Kl(r,o,l){for(var v=l?Ri:xo,T=r[0].length,P=r.length,B=P,X=O(P),oe=1/0,_e=[];B--;){var Ee=r[B];B&&o&&(Ee=Pt(Ee,Cn(o))),oe=An(Ee.length,oe),X[B]=!l&&(o||T>=120&&Ee.length>=120)?new Oo(B&&Ee):n}Ee=r[0];var Ne=-1,Le=X[0];e:for(;++Ne<T&&_e.length<oe;){var Ke=Ee[Ne],Qe=o?o(Ke):Ke;if(Ke=l||Ke!==0?Ke:0,!(Le?$i(Le,Qe):v(_e,Qe,l))){for(B=P;--B;){var dt=X[B];if(!(dt?$i(dt,Qe):v(r[B],Qe,l)))continue e}Le&&Le.push(Qe),_e.push(Ke)}}return _e}function wx(r,o,l,v){return Xr(r,function(T,P,B){o(v,l(T),P,B)}),v}function _s(r,o,l){o=Hi(o,r),r=qp(r,o);var v=r==null?r:r[Zr(mr(o))];return v==null?n:bn(v,r,l)}function up(r){return Jt(r)&&Mn(r)==Re}function xx(r){return Jt(r)&&Mn(r)==tn}function bx(r){return Jt(r)&&Mn(r)==Se}function Es(r,o,l,v,T){return r===o?!0:r==null||o==null||!Jt(r)&&!Jt(o)?r!==r&&o!==o:_x(r,o,l,v,Es,T)}function _x(r,o,l,v,T,P){var B=at(r),X=at(o),oe=B?je:Dn(r),_e=X?je:Dn(o);oe=oe==Re?et:oe,_e=_e==Re?et:_e;var Ee=oe==et,Ne=_e==et,Le=oe==_e;if(Le&&zi(r)){if(!zi(o))return!1;B=!0,Ee=!1}if(Le&&!Ee)return P||(P=new Dr),B||Na(r)?Bp(r,o,l,v,T,P):Xx(r,o,oe,l,v,T,P);if(!(l&N)){var Ke=Ee&&Te.call(r,"__wrapped__"),Qe=Ne&&Te.call(o,"__wrapped__");if(Ke||Qe){var dt=Ke?r.value():r,Je=Qe?o.value():o;return P||(P=new Dr),T(dt,Je,l,v,P)}}return Le?(P||(P=new Dr),Gx(r,o,l,v,T,P)):!1}function Ex(r){return Jt(r)&&Dn(r)==Xe}function zl(r,o,l,v){var T=l.length,P=T,B=!v;if(r==null)return!P;for(r=V(r);T--;){var X=l[T];if(B&&X[2]?X[1]!==r[X[0]]:!(X[0]in r))return!1}for(;++T<P;){X=l[T];var oe=X[0],_e=r[oe],Ee=X[1];if(B&&X[2]){if(_e===n&&!(oe in r))return!1}else{var Ne=new Dr;if(v)var Le=v(_e,Ee,oe,r,o,Ne);if(!(Le===n?Es(Ee,_e,N|S,v,Ne):Le))return!1}}return!0}function cp(r){if(!Gt(r)||ob(r))return!1;var o=hi(r)?Rn:qt;return o.test(Ro(r))}function Sx(r){return Jt(r)&&Mn(r)==jt}function Tx(r){return Jt(r)&&Dn(r)==bt}function Nx(r){return Jt(r)&&ic(r.length)&&!!kt[Mn(r)]}function lp(r){return typeof r=="function"?r:r==null?Yn:typeof r=="object"?at(r)?hp(r[0],r[1]):dp(r):Dm(r)}function Ul(r){if(!Ns(r))return Cw(r);var o=[];for(var l in V(r))Te.call(r,l)&&l!="constructor"&&o.push(l);return o}function kx(r){if(!Gt(r))return cb(r);var o=Ns(r),l=[];for(var v in r)v=="constructor"&&(o||!Te.call(r,v))||l.push(v);return l}function Yl(r,o){return r<o}function fp(r,o){var l=-1,v=zn(r)?O(r.length):[];return ji(r,function(T,P,B){v[++l]=o(T,P,B)}),v}function dp(r){var o=uf(r);return o.length==1&&o[0][2]?Yp(o[0][0],o[0][1]):function(l){return l===r||zl(l,r,o)}}function hp(r,o){return lf(r)&&Up(o)?Yp(Zr(r),o):function(l){var v=xf(l,r);return v===n&&v===o?bf(l,r):Es(o,v,N|S)}}function Hu(r,o,l,v,T){r!==o&&jl(o,function(P,B){if(T||(T=new Dr),Gt(P))Ix(r,o,B,l,Hu,v,T);else{var X=v?v(df(r,B),P,B+"",r,o,T):n;X===n&&(X=P),Wl(r,B,X)}},Un)}function Ix(r,o,l,v,T,P,B){var X=df(r,l),oe=df(o,l),_e=B.get(oe);if(_e){Wl(r,l,_e);return}var Ee=P?P(X,oe,l+"",r,o,B):n,Ne=Ee===n;if(Ne){var Le=at(oe),Ke=!Le&&zi(oe),Qe=!Le&&!Ke&&Na(oe);Ee=oe,Le||Ke||Qe?at(X)?Ee=X:rn(X)?Ee=Kn(X):Ke?(Ne=!1,Ee=Tp(oe,!0)):Qe?(Ne=!1,Ee=Np(oe,!0)):Ee=[]:Is(oe)||Mo(oe)?(Ee=X,Mo(X)?Ee=_m(X):(!Gt(X)||hi(X))&&(Ee=zp(oe))):Ne=!1}Ne&&(B.set(oe,Ee),T(Ee,oe,v,P,B),B.delete(oe)),Wl(r,l,Ee)}function pp(r,o){var l=r.length;if(l)return o+=o<0?l:0,di(o,l)?r[o]:n}function mp(r,o,l){o.length?o=Pt(o,function(P){return at(P)?function(B){return Do(B,P.length===1?P[0]:P)}:P}):o=[Yn];var v=-1;o=Pt(o,Cn(Ge()));var T=fp(r,function(P,B,X){var oe=Pt(o,function(_e){return _e(P)});return{criteria:oe,index:++v,value:P}});return ku(T,function(P,B){return Bx(P,B,l)})}function Cx(r,o){return gp(r,o,function(l,v){return bf(r,v)})}function gp(r,o,l){for(var v=-1,T=o.length,P={};++v<T;){var B=o[v],X=Do(r,B);l(X,B)&&Ss(P,Hi(B,r),X)}return P}function Ox(r){return function(o){return Do(o,r)}}function Vl(r,o,l,v){var T=v?fs:Li,P=-1,B=o.length,X=r;for(r===o&&(o=Kn(o)),l&&(X=Pt(r,Cn(l)));++P<B;)for(var oe=0,_e=o[P],Ee=l?l(_e):_e;(oe=T(X,Ee,oe,v))>-1;)X!==r&&Du.call(X,oe,1),Du.call(r,oe,1);return r}function vp(r,o){for(var l=r?o.length:0,v=l-1;l--;){var T=o[l];if(l==v||T!==P){var P=T;di(T)?Du.call(r,T,1):Zl(r,T)}}return r}function ql(r,o){return r+Mu(Zh()*(o-r+1))}function Ax(r,o,l,v){for(var T=-1,P=pn(Ru((o-r)/(l||1)),0),B=O(P);P--;)B[v?P:++T]=r,r+=l;return B}function Xl(r,o){var l="";if(!r||o<1||o>pe)return l;do o%2&&(l+=r),o=Mu(o/2),o&&(r+=r);while(o);return l}function pt(r,o){return hf(Vp(r,o,Yn),r+"")}function Dx(r){return ep(ka(r))}function Px(r,o){var l=ka(r);return Qu(l,Ao(o,0,l.length))}function Ss(r,o,l,v){if(!Gt(r))return r;o=Hi(o,r);for(var T=-1,P=o.length,B=P-1,X=r;X!=null&&++T<P;){var oe=Zr(o[T]),_e=l;if(oe==="__proto__"||oe==="constructor"||oe==="prototype")return r;if(T!=B){var Ee=X[oe];_e=v?v(Ee,oe,X):n,_e===n&&(_e=Gt(Ee)?Ee:di(o[T+1])?[]:{})}xs(X,oe,_e),X=X[oe]}return r}var yp=Lu?function(r,o){return Lu.set(r,o),r}:Yn,Rx=Pu?function(r,o){return Pu(r,"toString",{configurable:!0,enumerable:!1,value:Ef(o),writable:!0})}:Yn;function Mx(r){return Qu(ka(r))}function pr(r,o,l){var v=-1,T=r.length;o<0&&(o=-o>T?0:T+o),l=l>T?T:l,l<0&&(l+=T),T=o>l?0:l-o>>>0,o>>>=0;for(var P=O(T);++v<T;)P[v]=r[v+o];return P}function Lx(r,o){var l;return ji(r,function(v,T,P){return l=o(v,T,P),!l}),!!l}function Ku(r,o,l){var v=0,T=r==null?v:r.length;if(typeof o=="number"&&o===o&&T<=ke){for(;v<T;){var P=v+T>>>1,B=r[P];B!==null&&!tr(B)&&(l?B<=o:B<o)?v=P+1:T=P}return T}return Gl(r,o,Yn,l)}function Gl(r,o,l,v){var T=0,P=r==null?0:r.length;if(P===0)return 0;o=l(o);for(var B=o!==o,X=o===null,oe=tr(o),_e=o===n;T<P;){var Ee=Mu((T+P)/2),Ne=l(r[Ee]),Le=Ne!==n,Ke=Ne===null,Qe=Ne===Ne,dt=tr(Ne);if(B)var Je=v||Qe;else _e?Je=Qe&&(v||Le):X?Je=Qe&&Le&&(v||!Ke):oe?Je=Qe&&Le&&!Ke&&(v||!dt):Ke||dt?Je=!1:Je=v?Ne<=o:Ne<o;Je?T=Ee+1:P=Ee}return An(P,we)}function wp(r,o){for(var l=-1,v=r.length,T=0,P=[];++l<v;){var B=r[l],X=o?o(B):B;if(!l||!Pr(X,oe)){var oe=X;P[T++]=B===0?0:B}}return P}function xp(r){return typeof r=="number"?r:tr(r)?ie:+r}function er(r){if(typeof r=="string")return r;if(at(r))return Pt(r,er)+"";if(tr(r))return Qh?Qh.call(r):"";var o=r+"";return o=="0"&&1/r==-ye?"-0":o}function Bi(r,o,l){var v=-1,T=xo,P=r.length,B=!0,X=[],oe=X;if(l)B=!1,T=Ri;else if(P>=a){var _e=o?null:Vx(r);if(_e)return Wi(_e);B=!1,T=$i,oe=new Oo}else oe=o?[]:X;e:for(;++v<P;){var Ee=r[v],Ne=o?o(Ee):Ee;if(Ee=l||Ee!==0?Ee:0,B&&Ne===Ne){for(var Le=oe.length;Le--;)if(oe[Le]===Ne)continue e;o&&oe.push(Ne),X.push(Ee)}else T(oe,Ne,l)||(oe!==X&&oe.push(Ne),X.push(Ee))}return X}function Zl(r,o){return o=Hi(o,r),r=qp(r,o),r==null||delete r[Zr(mr(o))]}function bp(r,o,l,v){return Ss(r,o,l(Do(r,o)),v)}function zu(r,o,l,v){for(var T=r.length,P=v?T:-1;(v?P--:++P<T)&&o(r[P],P,r););return l?pr(r,v?0:P,v?P+1:T):pr(r,v?P+1:0,v?T:P)}function _p(r,o){var l=r;return l instanceof vt&&(l=l.value()),Mi(o,function(v,T){return T.func.apply(T.thisArg,Ir([v],T.args))},l)}function Ql(r,o,l){var v=r.length;if(v<2)return v?Bi(r[0]):[];for(var T=-1,P=O(v);++T<v;)for(var B=r[T],X=-1;++X<v;)X!=T&&(P[T]=bs(P[T]||B,r[X],o,l));return Bi(_n(P,1),o,l)}function Ep(r,o,l){for(var v=-1,T=r.length,P=o.length,B={};++v<T;){var X=v<P?o[v]:n;l(B,r[v],X)}return B}function Jl(r){return rn(r)?r:[]}function ef(r){return typeof r=="function"?r:Yn}function Hi(r,o){return at(r)?r:lf(r,o)?[r]:Qp(Nt(r))}var $x=pt;function Ki(r,o,l){var v=r.length;return l=l===n?v:l,!o&&l>=v?r:pr(r,o,l)}var Sp=Sw||function(r){return hn.clearTimeout(r)};function Tp(r,o){if(o)return r.slice();var l=r.length,v=ko?ko(l):new r.constructor(l);return r.copy(v),v}function tf(r){var o=new r.constructor(r.byteLength);return new nn(o).set(new nn(r)),o}function Wx(r,o){var l=o?tf(r.buffer):r.buffer;return new r.constructor(l,r.byteOffset,r.byteLength)}function Fx(r){var o=new r.constructor(r.source,ot.exec(r));return o.lastIndex=r.lastIndex,o}function jx(r){return ws?V(ws.call(r)):{}}function Np(r,o){var l=o?tf(r.buffer):r.buffer;return new r.constructor(l,r.byteOffset,r.length)}function kp(r,o){if(r!==o){var l=r!==n,v=r===null,T=r===r,P=tr(r),B=o!==n,X=o===null,oe=o===o,_e=tr(o);if(!X&&!_e&&!P&&r>o||P&&B&&oe&&!X&&!_e||v&&B&&oe||!l&&oe||!T)return 1;if(!v&&!P&&!_e&&r<o||_e&&l&&T&&!v&&!P||X&&l&&T||!B&&T||!oe)return-1}return 0}function Bx(r,o,l){for(var v=-1,T=r.criteria,P=o.criteria,B=T.length,X=l.length;++v<B;){var oe=kp(T[v],P[v]);if(oe){if(v>=X)return oe;var _e=l[v];return oe*(_e=="desc"?-1:1)}}return r.index-o.index}function Ip(r,o,l,v){for(var T=-1,P=r.length,B=l.length,X=-1,oe=o.length,_e=pn(P-B,0),Ee=O(oe+_e),Ne=!v;++X<oe;)Ee[X]=o[X];for(;++T<B;)(Ne||T<P)&&(Ee[l[T]]=r[T]);for(;_e--;)Ee[X++]=r[T++];return Ee}function Cp(r,o,l,v){for(var T=-1,P=r.length,B=-1,X=l.length,oe=-1,_e=o.length,Ee=pn(P-X,0),Ne=O(Ee+_e),Le=!v;++T<Ee;)Ne[T]=r[T];for(var Ke=T;++oe<_e;)Ne[Ke+oe]=o[oe];for(;++B<X;)(Le||T<P)&&(Ne[Ke+l[B]]=r[T++]);return Ne}function Kn(r,o){var l=-1,v=r.length;for(o||(o=O(v));++l<v;)o[l]=r[l];return o}function Gr(r,o,l,v){var T=!l;l||(l={});for(var P=-1,B=o.length;++P<B;){var X=o[P],oe=v?v(l[X],r[X],X,l,r):n;oe===n&&(oe=r[X]),T?ci(l,X,oe):xs(l,X,oe)}return l}function Hx(r,o){return Gr(r,cf(r),o)}function Kx(r,o){return Gr(r,Hp(r),o)}function Uu(r,o){return function(l,v){var T=at(l)?ss:fx,P=o?o():{};return T(l,r,Ge(v,2),P)}}function Ea(r){return pt(function(o,l){var v=-1,T=l.length,P=T>1?l[T-1]:n,B=T>2?l[2]:n;for(P=r.length>3&&typeof P=="function"?(T--,P):n,B&&Ln(l[0],l[1],B)&&(P=T<3?n:P,T=1),o=V(o);++v<T;){var X=l[v];X&&r(o,X,v,P)}return o})}function Op(r,o){return function(l,v){if(l==null)return l;if(!zn(l))return r(l,v);for(var T=l.length,P=o?T:-1,B=V(l);(o?P--:++P<T)&&v(B[P],P,B)!==!1;);return l}}function Ap(r){return function(o,l,v){for(var T=-1,P=V(o),B=v(o),X=B.length;X--;){var oe=B[r?X:++T];if(l(P[oe],oe,P)===!1)break}return o}}function zx(r,o,l){var v=o&C,T=Ts(r);function P(){var B=this&&this!==hn&&this instanceof P?T:r;return B.apply(v?l:this,arguments)}return P}function Dp(r){return function(o){o=Nt(o);var l=Ar(o)?d(o):n,v=l?l[0]:o.charAt(0),T=l?Ki(l,1).join(""):o.slice(1);return v[r]()+T}}function Sa(r){return function(o){return Mi(Om(Cm(o).replace(ts,"")),r,"")}}function Ts(r){return function(){var o=arguments;switch(o.length){case 0:return new r;case 1:return new r(o[0]);case 2:return new r(o[0],o[1]);case 3:return new r(o[0],o[1],o[2]);case 4:return new r(o[0],o[1],o[2],o[3]);case 5:return new r(o[0],o[1],o[2],o[3],o[4]);case 6:return new r(o[0],o[1],o[2],o[3],o[4],o[5]);case 7:return new r(o[0],o[1],o[2],o[3],o[4],o[5],o[6])}var l=_a(r.prototype),v=r.apply(l,o);return Gt(v)?v:l}}function Ux(r,o,l){var v=Ts(r);function T(){for(var P=arguments.length,B=O(P),X=P,oe=Ta(T);X--;)B[X]=arguments[X];var _e=P<3&&B[0]!==oe&&B[P-1]!==oe?[]:On(B,oe);if(P-=_e.length,P<l)return $p(r,o,Yu,T.placeholder,n,B,_e,n,n,l-P);var Ee=this&&this!==hn&&this instanceof T?v:r;return bn(Ee,this,B)}return T}function Pp(r){return function(o,l,v){var T=V(o);if(!zn(o)){var P=Ge(l,3);o=yn(o),l=function(X){return P(T[X],X,T)}}var B=r(o,l,v);return B>-1?T[P?o[B]:B]:n}}function Rp(r){return fi(function(o){var l=o.length,v=l,T=dr.prototype.thru;for(r&&o.reverse();v--;){var P=o[v];if(typeof P!="function")throw new me(c);if(T&&!B&&Gu(P)=="wrapper")var B=new dr([],!0)}for(v=B?v:l;++v<l;){P=o[v];var X=Gu(P),oe=X=="wrapper"?sf(P):n;oe&&ff(oe[0])&&oe[1]==(U|te|le|Q)&&!oe[4].length&&oe[9]==1?B=B[Gu(oe[0])].apply(B,oe[3]):B=P.length==1&&ff(P)?B[X]():B.thru(P)}return function(){var _e=arguments,Ee=_e[0];if(B&&_e.length==1&&at(Ee))return B.plant(Ee).value();for(var Ne=0,Le=l?o[Ne].apply(this,_e):Ee;++Ne<l;)Le=o[Ne].call(this,Le);return Le}})}function Yu(r,o,l,v,T,P,B,X,oe,_e){var Ee=o&U,Ne=o&C,Le=o&M,Ke=o&(te|F),Qe=o&ne,dt=Le?n:Ts(r);function Je(){for(var gt=arguments.length,wt=O(gt),nr=gt;nr--;)wt[nr]=arguments[nr];if(Ke)var $n=Ta(Je),rr=Dl(wt,$n);if(v&&(wt=Ip(wt,v,T,Ke)),P&&(wt=Cp(wt,P,B,Ke)),gt-=rr,Ke&&gt<_e){var on=On(wt,$n);return $p(r,o,Yu,Je.placeholder,l,wt,on,X,oe,_e-gt)}var Rr=Ne?l:this,mi=Le?Rr[r]:r;return gt=wt.length,X?wt=fb(wt,X):Qe&&gt>1&&wt.reverse(),Ee&&oe<gt&&(wt.length=oe),this&&this!==hn&&this instanceof Je&&(mi=dt||Ts(mi)),mi.apply(Rr,wt)}return Je}function Mp(r,o){return function(l,v){return wx(l,r,o(v),{})}}function Vu(r,o){return function(l,v){var T;if(l===n&&v===n)return o;if(l!==n&&(T=l),v!==n){if(T===n)return v;typeof l=="string"||typeof v=="string"?(l=er(l),v=er(v)):(l=xp(l),v=xp(v)),T=r(l,v)}return T}}function nf(r){return fi(function(o){return o=Pt(o,Cn(Ge())),pt(function(l){var v=this;return r(o,function(T){return bn(T,v,l)})})})}function qu(r,o){o=o===n?" ":er(o);var l=o.length;if(l<2)return l?Xl(o,r):o;var v=Xl(o,Ru(r/s(o)));return Ar(o)?Ki(d(v),0,r).join(""):v.slice(0,r)}function Yx(r,o,l,v){var T=o&C,P=Ts(r);function B(){for(var X=-1,oe=arguments.length,_e=-1,Ee=v.length,Ne=O(Ee+oe),Le=this&&this!==hn&&this instanceof B?P:r;++_e<Ee;)Ne[_e]=v[_e];for(;oe--;)Ne[_e++]=arguments[++X];return bn(Le,T?l:this,Ne)}return B}function Lp(r){return function(o,l,v){return v&&typeof v!="number"&&Ln(o,l,v)&&(l=v=n),o=pi(o),l===n?(l=o,o=0):l=pi(l),v=v===n?o<l?1:-1:pi(v),Ax(o,l,v,r)}}function Xu(r){return function(o,l){return typeof o=="string"&&typeof l=="string"||(o=gr(o),l=gr(l)),r(o,l)}}function $p(r,o,l,v,T,P,B,X,oe,_e){var Ee=o&te,Ne=Ee?B:n,Le=Ee?n:B,Ke=Ee?P:n,Qe=Ee?n:P;o|=Ee?le:ae,o&=~(Ee?ae:le),o&z||(o&=~(C|M));var dt=[r,o,T,Ke,Ne,Qe,Le,X,oe,_e],Je=l.apply(n,dt);return ff(r)&&Xp(Je,dt),Je.placeholder=v,Gp(Je,r,o)}function rf(r){var o=ee[r];return function(l,v){if(l=gr(l),v=v==null?0:An(ut(v),292),v&&Gh(l)){var T=(Nt(l)+"e").split("e"),P=o(T[0]+"e"+(+T[1]+v));return T=(Nt(P)+"e").split("e"),+(T[0]+"e"+(+T[1]-v))}return o(l)}}var Vx=xa&&1/Wi(new xa([,-0]))[1]==ye?function(r){return new xa(r)}:Nf;function Wp(r){return function(o){var l=Dn(o);return l==Xe?No(o):l==bt?Fi(o):Iu(o,r(o))}}function li(r,o,l,v,T,P,B,X){var oe=o&M;if(!oe&&typeof r!="function")throw new me(c);var _e=v?v.length:0;if(_e||(o&=~(le|ae),v=T=n),B=B===n?B:pn(ut(B),0),X=X===n?X:ut(X),_e-=T?T.length:0,o&ae){var Ee=v,Ne=T;v=T=n}var Le=oe?n:sf(r),Ke=[r,o,l,v,T,Ee,Ne,P,B,X];if(Le&&ub(Ke,Le),r=Ke[0],o=Ke[1],l=Ke[2],v=Ke[3],T=Ke[4],X=Ke[9]=Ke[9]===n?oe?0:r.length:pn(Ke[9]-_e,0),!X&&o&(te|F)&&(o&=~(te|F)),!o||o==C)var Qe=zx(r,o,l);else o==te||o==F?Qe=Ux(r,o,X):(o==le||o==(C|le))&&!T.length?Qe=Yx(r,o,l,v):Qe=Yu.apply(n,Ke);var dt=Le?yp:Xp;return Gp(dt(Qe,Ke),r,o)}function Fp(r,o,l,v){return r===n||Pr(r,De[l])&&!Te.call(v,l)?o:r}function jp(r,o,l,v,T,P){return Gt(r)&&Gt(o)&&(P.set(o,r),Hu(r,o,n,jp,P),P.delete(o)),r}function qx(r){return Is(r)?n:r}function Bp(r,o,l,v,T,P){var B=l&N,X=r.length,oe=o.length;if(X!=oe&&!(B&&oe>X))return!1;var _e=P.get(r),Ee=P.get(o);if(_e&&Ee)return _e==o&&Ee==r;var Ne=-1,Le=!0,Ke=l&S?new Oo:n;for(P.set(r,o),P.set(o,r);++Ne<X;){var Qe=r[Ne],dt=o[Ne];if(v)var Je=B?v(dt,Qe,Ne,o,r,P):v(Qe,dt,Ne,r,o,P);if(Je!==n){if(Je)continue;Le=!1;break}if(Ke){if(!Cr(o,function(gt,wt){if(!$i(Ke,wt)&&(Qe===gt||T(Qe,gt,l,v,P)))return Ke.push(wt)})){Le=!1;break}}else if(!(Qe===dt||T(Qe,dt,l,v,P))){Le=!1;break}}return P.delete(r),P.delete(o),Le}function Xx(r,o,l,v,T,P,B){switch(l){case Yt:if(r.byteLength!=o.byteLength||r.byteOffset!=o.byteOffset)return!1;r=r.buffer,o=o.buffer;case tn:return!(r.byteLength!=o.byteLength||!P(new nn(r),new nn(o)));case qe:case Se:case it:return Pr(+r,+o);case xt:return r.name==o.name&&r.message==o.message;case jt:case sn:return r==o+"";case Xe:var X=No;case bt:var oe=v&N;if(X||(X=Wi),r.size!=o.size&&!oe)return!1;var _e=B.get(r);if(_e)return _e==o;v|=S,B.set(r,o);var Ee=Bp(X(r),X(o),v,T,P,B);return B.delete(r),Ee;case zt:if(ws)return ws.call(r)==ws.call(o)}return!1}function Gx(r,o,l,v,T,P){var B=l&N,X=of(r),oe=X.length,_e=of(o),Ee=_e.length;if(oe!=Ee&&!B)return!1;for(var Ne=oe;Ne--;){var Le=X[Ne];if(!(B?Le in o:Te.call(o,Le)))return!1}var Ke=P.get(r),Qe=P.get(o);if(Ke&&Qe)return Ke==o&&Qe==r;var dt=!0;P.set(r,o),P.set(o,r);for(var Je=B;++Ne<oe;){Le=X[Ne];var gt=r[Le],wt=o[Le];if(v)var nr=B?v(wt,gt,Le,o,r,P):v(gt,wt,Le,r,o,P);if(!(nr===n?gt===wt||T(gt,wt,l,v,P):nr)){dt=!1;break}Je||(Je=Le=="constructor")}if(dt&&!Je){var $n=r.constructor,rr=o.constructor;$n!=rr&&"constructor"in r&&"constructor"in o&&!(typeof $n=="function"&&$n instanceof $n&&typeof rr=="function"&&rr instanceof rr)&&(dt=!1)}return P.delete(r),P.delete(o),dt}function fi(r){return hf(Vp(r,n,nm),r+"")}function of(r){return sp(r,yn,cf)}function af(r){return sp(r,Un,Hp)}var sf=Lu?function(r){return Lu.get(r)}:Nf;function Gu(r){for(var o=r.name+"",l=ba[o],v=Te.call(ba,o)?l.length:0;v--;){var T=l[v],P=T.func;if(P==null||P==r)return T.name}return o}function Ta(r){var o=Te.call(D,"placeholder")?D:r;return o.placeholder}function Ge(){var r=D.iteratee||Sf;return r=r===Sf?lp:r,arguments.length?r(arguments[0],arguments[1]):r}function Zu(r,o){var l=r.__data__;return ib(o)?l[typeof o=="string"?"string":"hash"]:l.map}function uf(r){for(var o=yn(r),l=o.length;l--;){var v=o[l],T=r[v];o[l]=[v,T,Up(T)]}return o}function Po(r,o){var l=Xt(r,o);return cp(l)?l:n}function Zx(r){var o=Te.call(r,Io),l=r[Io];try{r[Io]=n;var v=!0}catch{}var T=nt.call(r);return v&&(o?r[Io]=l:delete r[Io]),T}var cf=Ml?function(r){return r==null?[]:(r=V(r),Bn(Ml(r),function(o){return wa.call(r,o)}))}:kf,Hp=Ml?function(r){for(var o=[];r;)Ir(o,cf(r)),r=fn(r);return o}:kf,Dn=Mn;(Ll&&Dn(new Ll(new ArrayBuffer(1)))!=Yt||gs&&Dn(new gs)!=Xe||$l&&Dn($l.resolve())!=Be||xa&&Dn(new xa)!=bt||vs&&Dn(new vs)!=Qt)&&(Dn=function(r){var o=Mn(r),l=o==et?r.constructor:n,v=l?Ro(l):"";if(v)switch(v){case Pw:return Yt;case Rw:return Xe;case Mw:return Be;case Lw:return bt;case $w:return Qt}return o});function Qx(r,o,l){for(var v=-1,T=l.length;++v<T;){var P=l[v],B=P.size;switch(P.type){case"drop":r+=B;break;case"dropRight":o-=B;break;case"take":o=An(o,r+B);break;case"takeRight":r=pn(r,o-B);break}}return{start:r,end:o}}function Jx(r){var o=r.match(lr);return o?o[1].split(ao):[]}function Kp(r,o,l){o=Hi(o,r);for(var v=-1,T=o.length,P=!1;++v<T;){var B=Zr(o[v]);if(!(P=r!=null&&l(r,B)))break;r=r[B]}return P||++v!=T?P:(T=r==null?0:r.length,!!T&&ic(T)&&di(B,T)&&(at(r)||Mo(r)))}function eb(r){var o=r.length,l=new r.constructor(o);return o&&typeof r[0]=="string"&&Te.call(r,"index")&&(l.index=r.index,l.input=r.input),l}function zp(r){return typeof r.constructor=="function"&&!Ns(r)?_a(fn(r)):{}}function tb(r,o,l){var v=r.constructor;switch(o){case tn:return tf(r);case qe:case Se:return new v(+r);case Yt:return Wx(r,l);case cn:case dn:case _t:case Bt:case Vt:case Lt:case $e:case Ht:case fe:return Np(r,l);case Xe:return new v;case it:case sn:return new v(r);case jt:return Fx(r);case bt:return new v;case zt:return jx(r)}}function nb(r,o){var l=o.length;if(!l)return r;var v=l-1;return o[v]=(l>1?"& ":"")+o[v],o=o.join(l>2?", ":" "),r.replace(cr,`{
/* [wrapped with `+o+`] */
`)}function rb(r){return at(r)||Mo(r)||!!(Xh&&r&&r[Xh])}function di(r,o){var l=typeof r;return o=o??pe,!!o&&(l=="number"||l!="symbol"&&Sr.test(r))&&r>-1&&r%1==0&&r<o}function Ln(r,o,l){if(!Gt(l))return!1;var v=typeof o;return(v=="number"?zn(l)&&di(o,l.length):v=="string"&&o in l)?Pr(l[o],r):!1}function lf(r,o){if(at(r))return!1;var l=typeof r;return l=="number"||l=="symbol"||l=="boolean"||r==null||tr(r)?!0:_r.test(r)||!jn.test(r)||o!=null&&r in V(o)}function ib(r){var o=typeof r;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?r!=="__proto__":r===null}function ff(r){var o=Gu(r),l=D[o];if(typeof l!="function"||!(o in vt.prototype))return!1;if(r===l)return!0;var v=sf(l);return!!v&&r===v[0]}function ob(r){return!!Fe&&Fe in r}var ab=Ie?hi:If;function Ns(r){var o=r&&r.constructor,l=typeof o=="function"&&o.prototype||De;return r===l}function Up(r){return r===r&&!Gt(r)}function Yp(r,o){return function(l){return l==null?!1:l[r]===o&&(o!==n||r in V(l))}}function sb(r){var o=nc(r,function(v){return l.size===p&&l.clear(),v}),l=o.cache;return o}function ub(r,o){var l=r[1],v=o[1],T=l|v,P=T<(C|M|U),B=v==U&&l==te||v==U&&l==Q&&r[7].length<=o[8]||v==(U|Q)&&o[7].length<=o[8]&&l==te;if(!(P||B))return r;v&C&&(r[2]=o[2],T|=l&C?0:z);var X=o[3];if(X){var oe=r[3];r[3]=oe?Ip(oe,X,o[4]):X,r[4]=oe?On(r[3],m):o[4]}return X=o[5],X&&(oe=r[5],r[5]=oe?Cp(oe,X,o[6]):X,r[6]=oe?On(r[5],m):o[6]),X=o[7],X&&(r[7]=X),v&U&&(r[8]=r[8]==null?o[8]:An(r[8],o[8])),r[9]==null&&(r[9]=o[9]),r[0]=o[0],r[1]=T,r}function cb(r){var o=[];if(r!=null)for(var l in V(r))o.push(l);return o}function lb(r){return nt.call(r)}function Vp(r,o,l){return o=pn(o===n?r.length-1:o,0),function(){for(var v=arguments,T=-1,P=pn(v.length-o,0),B=O(P);++T<P;)B[T]=v[o+T];T=-1;for(var X=O(o+1);++T<o;)X[T]=v[T];return X[o]=l(B),bn(r,this,X)}}function qp(r,o){return o.length<2?r:Do(r,pr(o,0,-1))}function fb(r,o){for(var l=r.length,v=An(o.length,l),T=Kn(r);v--;){var P=o[v];r[v]=di(P,l)?T[P]:n}return r}function df(r,o){if(!(o==="constructor"&&typeof r[o]=="function")&&o!="__proto__")return r[o]}var Xp=Zp(yp),ks=Nw||function(r,o){return hn.setTimeout(r,o)},hf=Zp(Rx);function Gp(r,o,l){var v=o+"";return hf(r,nb(v,db(Jx(v),l)))}function Zp(r){var o=0,l=0;return function(){var v=Ow(),T=ge-(v-l);if(l=v,T>0){if(++o>=ce)return arguments[0]}else o=0;return r.apply(n,arguments)}}function Qu(r,o){var l=-1,v=r.length,T=v-1;for(o=o===n?v:o;++l<o;){var P=ql(l,T),B=r[P];r[P]=r[l],r[l]=B}return r.length=o,r}var Qp=sb(function(r){var o=[];return r.charCodeAt(0)===46&&o.push(""),r.replace(Er,function(l,v,T,P){o.push(T?P.replace(Pn,"$1"):v||l)}),o});function Zr(r){if(typeof r=="string"||tr(r))return r;var o=r+"";return o=="0"&&1/r==-ye?"-0":o}function Ro(r){if(r!=null){try{return Ae.call(r)}catch{}try{return r+""}catch{}}return""}function db(r,o){return In(Me,function(l){var v="_."+l[0];o&l[1]&&!xo(r,v)&&r.push(v)}),r.sort()}function Jp(r){if(r instanceof vt)return r.clone();var o=new dr(r.__wrapped__,r.__chain__);return o.__actions__=Kn(r.__actions__),o.__index__=r.__index__,o.__values__=r.__values__,o}function hb(r,o,l){(l?Ln(r,o,l):o===n)?o=1:o=pn(ut(o),0);var v=r==null?0:r.length;if(!v||o<1)return[];for(var T=0,P=0,B=O(Ru(v/o));T<v;)B[P++]=pr(r,T,T+=o);return B}function pb(r){for(var o=-1,l=r==null?0:r.length,v=0,T=[];++o<l;){var P=r[o];P&&(T[v++]=P)}return T}function mb(){var r=arguments.length;if(!r)return[];for(var o=O(r-1),l=arguments[0],v=r;v--;)o[v-1]=arguments[v];return Ir(at(l)?Kn(l):[l],_n(o,1))}var gb=pt(function(r,o){return rn(r)?bs(r,_n(o,1,rn,!0)):[]}),vb=pt(function(r,o){var l=mr(o);return rn(l)&&(l=n),rn(r)?bs(r,_n(o,1,rn,!0),Ge(l,2)):[]}),yb=pt(function(r,o){var l=mr(o);return rn(l)&&(l=n),rn(r)?bs(r,_n(o,1,rn,!0),n,l):[]});function wb(r,o,l){var v=r==null?0:r.length;return v?(o=l||o===n?1:ut(o),pr(r,o<0?0:o,v)):[]}function xb(r,o,l){var v=r==null?0:r.length;return v?(o=l||o===n?1:ut(o),o=v-o,pr(r,0,o<0?0:o)):[]}function bb(r,o){return r&&r.length?zu(r,Ge(o,3),!0,!0):[]}function _b(r,o){return r&&r.length?zu(r,Ge(o,3),!0):[]}function Eb(r,o,l,v){var T=r==null?0:r.length;return T?(l&&typeof l!="number"&&Ln(r,o,l)&&(l=0,v=T),mx(r,o,l,v)):[]}function em(r,o,l){var v=r==null?0:r.length;if(!v)return-1;var T=l==null?0:ut(l);return T<0&&(T=pn(v+T,0)),bo(r,Ge(o,3),T)}function tm(r,o,l){var v=r==null?0:r.length;if(!v)return-1;var T=v-1;return l!==n&&(T=ut(l),T=l<0?pn(v+T,0):An(T,v-1)),bo(r,Ge(o,3),T,!0)}function nm(r){var o=r==null?0:r.length;return o?_n(r,1):[]}function Sb(r){var o=r==null?0:r.length;return o?_n(r,ye):[]}function Tb(r,o){var l=r==null?0:r.length;return l?(o=o===n?1:ut(o),_n(r,o)):[]}function Nb(r){for(var o=-1,l=r==null?0:r.length,v={};++o<l;){var T=r[o];v[T[0]]=T[1]}return v}function rm(r){return r&&r.length?r[0]:n}function kb(r,o,l){var v=r==null?0:r.length;if(!v)return-1;var T=l==null?0:ut(l);return T<0&&(T=pn(v+T,0)),Li(r,o,T)}function Ib(r){var o=r==null?0:r.length;return o?pr(r,0,-1):[]}var Cb=pt(function(r){var o=Pt(r,Jl);return o.length&&o[0]===r[0]?Kl(o):[]}),Ob=pt(function(r){var o=mr(r),l=Pt(r,Jl);return o===mr(l)?o=n:l.pop(),l.length&&l[0]===r[0]?Kl(l,Ge(o,2)):[]}),Ab=pt(function(r){var o=mr(r),l=Pt(r,Jl);return o=typeof o=="function"?o:n,o&&l.pop(),l.length&&l[0]===r[0]?Kl(l,n,o):[]});function Db(r,o){return r==null?"":Iw.call(r,o)}function mr(r){var o=r==null?0:r.length;return o?r[o-1]:n}function Pb(r,o,l){var v=r==null?0:r.length;if(!v)return-1;var T=v;return l!==n&&(T=ut(l),T=T<0?pn(v+T,0):An(T,v-1)),o===o?Au(r,o,T):bo(r,_o,T,!0)}function Rb(r,o){return r&&r.length?pp(r,ut(o)):n}var Mb=pt(im);function im(r,o){return r&&r.length&&o&&o.length?Vl(r,o):r}function Lb(r,o,l){return r&&r.length&&o&&o.length?Vl(r,o,Ge(l,2)):r}function $b(r,o,l){return r&&r.length&&o&&o.length?Vl(r,o,n,l):r}var Wb=fi(function(r,o){var l=r==null?0:r.length,v=Fl(r,o);return vp(r,Pt(o,function(T){return di(T,l)?+T:T}).sort(kp)),v});function Fb(r,o){var l=[];if(!(r&&r.length))return l;var v=-1,T=[],P=r.length;for(o=Ge(o,3);++v<P;){var B=r[v];o(B,v,r)&&(l.push(B),T.push(v))}return vp(r,T),l}function pf(r){return r==null?r:Dw.call(r)}function jb(r,o,l){var v=r==null?0:r.length;return v?(l&&typeof l!="number"&&Ln(r,o,l)?(o=0,l=v):(o=o==null?0:ut(o),l=l===n?v:ut(l)),pr(r,o,l)):[]}function Bb(r,o){return Ku(r,o)}function Hb(r,o,l){return Gl(r,o,Ge(l,2))}function Kb(r,o){var l=r==null?0:r.length;if(l){var v=Ku(r,o);if(v<l&&Pr(r[v],o))return v}return-1}function zb(r,o){return Ku(r,o,!0)}function Ub(r,o,l){return Gl(r,o,Ge(l,2),!0)}function Yb(r,o){var l=r==null?0:r.length;if(l){var v=Ku(r,o,!0)-1;if(Pr(r[v],o))return v}return-1}function Vb(r){return r&&r.length?wp(r):[]}function qb(r,o){return r&&r.length?wp(r,Ge(o,2)):[]}function Xb(r){var o=r==null?0:r.length;return o?pr(r,1,o):[]}function Gb(r,o,l){return r&&r.length?(o=l||o===n?1:ut(o),pr(r,0,o<0?0:o)):[]}function Zb(r,o,l){var v=r==null?0:r.length;return v?(o=l||o===n?1:ut(o),o=v-o,pr(r,o<0?0:o,v)):[]}function Qb(r,o){return r&&r.length?zu(r,Ge(o,3),!1,!0):[]}function Jb(r,o){return r&&r.length?zu(r,Ge(o,3)):[]}var e_=pt(function(r){return Bi(_n(r,1,rn,!0))}),t_=pt(function(r){var o=mr(r);return rn(o)&&(o=n),Bi(_n(r,1,rn,!0),Ge(o,2))}),n_=pt(function(r){var o=mr(r);return o=typeof o=="function"?o:n,Bi(_n(r,1,rn,!0),n,o)});function r_(r){return r&&r.length?Bi(r):[]}function i_(r,o){return r&&r.length?Bi(r,Ge(o,2)):[]}function o_(r,o){return o=typeof o=="function"?o:n,r&&r.length?Bi(r,n,o):[]}function mf(r){if(!(r&&r.length))return[];var o=0;return r=Bn(r,function(l){if(rn(l))return o=pn(l.length,o),!0}),va(o,function(l){return Pt(r,Eo(l))})}function om(r,o){if(!(r&&r.length))return[];var l=mf(r);return o==null?l:Pt(l,function(v){return bn(o,n,v)})}var a_=pt(function(r,o){return rn(r)?bs(r,o):[]}),s_=pt(function(r){return Ql(Bn(r,rn))}),u_=pt(function(r){var o=mr(r);return rn(o)&&(o=n),Ql(Bn(r,rn),Ge(o,2))}),c_=pt(function(r){var o=mr(r);return o=typeof o=="function"?o:n,Ql(Bn(r,rn),n,o)}),l_=pt(mf);function f_(r,o){return Ep(r||[],o||[],xs)}function d_(r,o){return Ep(r||[],o||[],Ss)}var h_=pt(function(r){var o=r.length,l=o>1?r[o-1]:n;return l=typeof l=="function"?(r.pop(),l):n,om(r,l)});function am(r){var o=D(r);return o.__chain__=!0,o}function p_(r,o){return o(r),r}function Ju(r,o){return o(r)}var m_=fi(function(r){var o=r.length,l=o?r[0]:0,v=this.__wrapped__,T=function(P){return Fl(P,r)};return o>1||this.__actions__.length||!(v instanceof vt)||!di(l)?this.thru(T):(v=v.slice(l,+l+(o?1:0)),v.__actions__.push({func:Ju,args:[T],thisArg:n}),new dr(v,this.__chain__).thru(function(P){return o&&!P.length&&P.push(n),P}))});function g_(){return am(this)}function v_(){return new dr(this.value(),this.__chain__)}function y_(){this.__values__===n&&(this.__values__=xm(this.value()));var r=this.__index__>=this.__values__.length,o=r?n:this.__values__[this.__index__++];return{done:r,value:o}}function w_(){return this}function x_(r){for(var o,l=this;l instanceof Wu;){var v=Jp(l);v.__index__=0,v.__values__=n,o?T.__wrapped__=v:o=v;var T=v;l=l.__wrapped__}return T.__wrapped__=r,o}function b_(){var r=this.__wrapped__;if(r instanceof vt){var o=r;return this.__actions__.length&&(o=new vt(this)),o=o.reverse(),o.__actions__.push({func:Ju,args:[pf],thisArg:n}),new dr(o,this.__chain__)}return this.thru(pf)}function __(){return _p(this.__wrapped__,this.__actions__)}var E_=Uu(function(r,o,l){Te.call(r,l)?++r[l]:ci(r,l,1)});function S_(r,o,l){var v=at(r)?Pi:px;return l&&Ln(r,o,l)&&(o=n),v(r,Ge(o,3))}function T_(r,o){var l=at(r)?Bn:op;return l(r,Ge(o,3))}var N_=Pp(em),k_=Pp(tm);function I_(r,o){return _n(ec(r,o),1)}function C_(r,o){return _n(ec(r,o),ye)}function O_(r,o,l){return l=l===n?1:ut(l),_n(ec(r,o),l)}function sm(r,o){var l=at(r)?In:ji;return l(r,Ge(o,3))}function um(r,o){var l=at(r)?vn:ip;return l(r,Ge(o,3))}var A_=Uu(function(r,o,l){Te.call(r,l)?r[l].push(o):ci(r,l,[o])});function D_(r,o,l,v){r=zn(r)?r:ka(r),l=l&&!v?ut(l):0;var T=r.length;return l<0&&(l=pn(T+l,0)),oc(r)?l<=T&&r.indexOf(o,l)>-1:!!T&&Li(r,o,l)>-1}var P_=pt(function(r,o,l){var v=-1,T=typeof o=="function",P=zn(r)?O(r.length):[];return ji(r,function(B){P[++v]=T?bn(o,B,l):_s(B,o,l)}),P}),R_=Uu(function(r,o,l){ci(r,l,o)});function ec(r,o){var l=at(r)?Pt:fp;return l(r,Ge(o,3))}function M_(r,o,l,v){return r==null?[]:(at(o)||(o=o==null?[]:[o]),l=v?n:l,at(l)||(l=l==null?[]:[l]),mp(r,o,l))}var L_=Uu(function(r,o,l){r[l?0:1].push(o)},function(){return[[],[]]});function $_(r,o,l){var v=at(r)?Mi:Nu,T=arguments.length<3;return v(r,Ge(o,4),l,T,ji)}function W_(r,o,l){var v=at(r)?us:Nu,T=arguments.length<3;return v(r,Ge(o,4),l,T,ip)}function F_(r,o){var l=at(r)?Bn:op;return l(r,rc(Ge(o,3)))}function j_(r){var o=at(r)?ep:Dx;return o(r)}function B_(r,o,l){(l?Ln(r,o,l):o===n)?o=1:o=ut(o);var v=at(r)?cx:Px;return v(r,o)}function H_(r){var o=at(r)?lx:Mx;return o(r)}function K_(r){if(r==null)return 0;if(zn(r))return oc(r)?s(r):r.length;var o=Dn(r);return o==Xe||o==bt?r.size:Ul(r).length}function z_(r,o,l){var v=at(r)?Cr:Lx;return l&&Ln(r,o,l)&&(o=n),v(r,Ge(o,3))}var U_=pt(function(r,o){if(r==null)return[];var l=o.length;return l>1&&Ln(r,o[0],o[1])?o=[]:l>2&&Ln(o[0],o[1],o[2])&&(o=[o[0]]),mp(r,_n(o,1),[])}),tc=Tw||function(){return hn.Date.now()};function Y_(r,o){if(typeof o!="function")throw new me(c);return r=ut(r),function(){if(--r<1)return o.apply(this,arguments)}}function cm(r,o,l){return o=l?n:o,o=r&&o==null?r.length:o,li(r,U,n,n,n,n,o)}function lm(r,o){var l;if(typeof o!="function")throw new me(c);return r=ut(r),function(){return--r>0&&(l=o.apply(this,arguments)),r<=1&&(o=n),l}}var gf=pt(function(r,o,l){var v=C;if(l.length){var T=On(l,Ta(gf));v|=le}return li(r,v,o,l,T)}),fm=pt(function(r,o,l){var v=C|M;if(l.length){var T=On(l,Ta(fm));v|=le}return li(o,v,r,l,T)});function dm(r,o,l){o=l?n:o;var v=li(r,te,n,n,n,n,n,o);return v.placeholder=dm.placeholder,v}function hm(r,o,l){o=l?n:o;var v=li(r,F,n,n,n,n,n,o);return v.placeholder=hm.placeholder,v}function pm(r,o,l){var v,T,P,B,X,oe,_e=0,Ee=!1,Ne=!1,Le=!0;if(typeof r!="function")throw new me(c);o=gr(o)||0,Gt(l)&&(Ee=!!l.leading,Ne="maxWait"in l,P=Ne?pn(gr(l.maxWait)||0,o):P,Le="trailing"in l?!!l.trailing:Le);function Ke(on){var Rr=v,mi=T;return v=T=n,_e=on,B=r.apply(mi,Rr),B}function Qe(on){return _e=on,X=ks(gt,o),Ee?Ke(on):B}function dt(on){var Rr=on-oe,mi=on-_e,Pm=o-Rr;return Ne?An(Pm,P-mi):Pm}function Je(on){var Rr=on-oe,mi=on-_e;return oe===n||Rr>=o||Rr<0||Ne&&mi>=P}function gt(){var on=tc();if(Je(on))return wt(on);X=ks(gt,dt(on))}function wt(on){return X=n,Le&&v?Ke(on):(v=T=n,B)}function nr(){X!==n&&Sp(X),_e=0,v=oe=T=X=n}function $n(){return X===n?B:wt(tc())}function rr(){var on=tc(),Rr=Je(on);if(v=arguments,T=this,oe=on,Rr){if(X===n)return Qe(oe);if(Ne)return Sp(X),X=ks(gt,o),Ke(oe)}return X===n&&(X=ks(gt,o)),B}return rr.cancel=nr,rr.flush=$n,rr}var V_=pt(function(r,o){return rp(r,1,o)}),q_=pt(function(r,o,l){return rp(r,gr(o)||0,l)});function X_(r){return li(r,ne)}function nc(r,o){if(typeof r!="function"||o!=null&&typeof o!="function")throw new me(c);var l=function(){var v=arguments,T=o?o.apply(this,v):v[0],P=l.cache;if(P.has(T))return P.get(T);var B=r.apply(this,v);return l.cache=P.set(T,B)||P,B};return l.cache=new(nc.Cache||ui),l}nc.Cache=ui;function rc(r){if(typeof r!="function")throw new me(c);return function(){var o=arguments;switch(o.length){case 0:return!r.call(this);case 1:return!r.call(this,o[0]);case 2:return!r.call(this,o[0],o[1]);case 3:return!r.call(this,o[0],o[1],o[2])}return!r.apply(this,o)}}function G_(r){return lm(2,r)}var Z_=$x(function(r,o){o=o.length==1&&at(o[0])?Pt(o[0],Cn(Ge())):Pt(_n(o,1),Cn(Ge()));var l=o.length;return pt(function(v){for(var T=-1,P=An(v.length,l);++T<P;)v[T]=o[T].call(this,v[T]);return bn(r,this,v)})}),vf=pt(function(r,o){var l=On(o,Ta(vf));return li(r,le,n,o,l)}),mm=pt(function(r,o){var l=On(o,Ta(mm));return li(r,ae,n,o,l)}),Q_=fi(function(r,o){return li(r,Q,n,n,n,o)});function J_(r,o){if(typeof r!="function")throw new me(c);return o=o===n?o:ut(o),pt(r,o)}function e1(r,o){if(typeof r!="function")throw new me(c);return o=o==null?0:pn(ut(o),0),pt(function(l){var v=l[o],T=Ki(l,0,o);return v&&Ir(T,v),bn(r,this,T)})}function t1(r,o,l){var v=!0,T=!0;if(typeof r!="function")throw new me(c);return Gt(l)&&(v="leading"in l?!!l.leading:v,T="trailing"in l?!!l.trailing:T),pm(r,o,{leading:v,maxWait:o,trailing:T})}function n1(r){return cm(r,1)}function r1(r,o){return vf(ef(o),r)}function i1(){if(!arguments.length)return[];var r=arguments[0];return at(r)?r:[r]}function o1(r){return hr(r,b)}function a1(r,o){return o=typeof o=="function"?o:n,hr(r,b,o)}function s1(r){return hr(r,y|b)}function u1(r,o){return o=typeof o=="function"?o:n,hr(r,y|b,o)}function c1(r,o){return o==null||np(r,o,yn(o))}function Pr(r,o){return r===o||r!==r&&o!==o}var l1=Xu(Hl),f1=Xu(function(r,o){return r>=o}),Mo=up(function(){return arguments}())?up:function(r){return Jt(r)&&Te.call(r,"callee")&&!wa.call(r,"callee")},at=O.isArray,d1=vo?Cn(vo):xx;function zn(r){return r!=null&&ic(r.length)&&!hi(r)}function rn(r){return Jt(r)&&zn(r)}function h1(r){return r===!0||r===!1||Jt(r)&&Mn(r)==qe}var zi=kw||If,p1=yo?Cn(yo):bx;function m1(r){return Jt(r)&&r.nodeType===1&&!Is(r)}function g1(r){if(r==null)return!0;if(zn(r)&&(at(r)||typeof r=="string"||typeof r.splice=="function"||zi(r)||Na(r)||Mo(r)))return!r.length;var o=Dn(r);if(o==Xe||o==bt)return!r.size;if(Ns(r))return!Ul(r).length;for(var l in r)if(Te.call(r,l))return!1;return!0}function v1(r,o){return Es(r,o)}function y1(r,o,l){l=typeof l=="function"?l:n;var v=l?l(r,o):n;return v===n?Es(r,o,n,l):!!v}function yf(r){if(!Jt(r))return!1;var o=Mn(r);return o==xt||o==rt||typeof r.message=="string"&&typeof r.name=="string"&&!Is(r)}function w1(r){return typeof r=="number"&&Gh(r)}function hi(r){if(!Gt(r))return!1;var o=Mn(r);return o==He||o==Tt||o==Ye||o==Ft}function gm(r){return typeof r=="number"&&r==ut(r)}function ic(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=pe}function Gt(r){var o=typeof r;return r!=null&&(o=="object"||o=="function")}function Jt(r){return r!=null&&typeof r=="object"}var vm=as?Cn(as):Ex;function x1(r,o){return r===o||zl(r,o,uf(o))}function b1(r,o,l){return l=typeof l=="function"?l:n,zl(r,o,uf(o),l)}function _1(r){return ym(r)&&r!=+r}function E1(r){if(ab(r))throw new j(u);return cp(r)}function S1(r){return r===null}function T1(r){return r==null}function ym(r){return typeof r=="number"||Jt(r)&&Mn(r)==it}function Is(r){if(!Jt(r)||Mn(r)!=et)return!1;var o=fn(r);if(o===null)return!0;var l=Te.call(o,"constructor")&&o.constructor;return typeof l=="function"&&l instanceof l&&Ae.call(l)==lt}var wf=Su?Cn(Su):Sx;function N1(r){return gm(r)&&r>=-pe&&r<=pe}var wm=wo?Cn(wo):Tx;function oc(r){return typeof r=="string"||!at(r)&&Jt(r)&&Mn(r)==sn}function tr(r){return typeof r=="symbol"||Jt(r)&&Mn(r)==zt}var Na=pa?Cn(pa):Nx;function k1(r){return r===n}function I1(r){return Jt(r)&&Dn(r)==Qt}function C1(r){return Jt(r)&&Mn(r)==Ut}var O1=Xu(Yl),A1=Xu(function(r,o){return r<=o});function xm(r){if(!r)return[];if(zn(r))return oc(r)?d(r):Kn(r);if(ms&&r[ms])return Rl(r[ms]());var o=Dn(r),l=o==Xe?No:o==bt?Wi:ka;return l(r)}function pi(r){if(!r)return r===0?r:0;if(r=gr(r),r===ye||r===-ye){var o=r<0?-1:1;return o*W}return r===r?r:0}function ut(r){var o=pi(r),l=o%1;return o===o?l?o-l:o:0}function bm(r){return r?Ao(ut(r),0,ue):0}function gr(r){if(typeof r=="number")return r;if(tr(r))return ie;if(Gt(r)){var o=typeof r.valueOf=="function"?r.valueOf():r;r=Gt(o)?o+"":o}if(typeof r!="string")return r===0?r:+r;r=Cu(r);var l=At.test(r);return l||gn.test(r)?la(r.slice(2),l?2:8):yt.test(r)?ie:+r}function _m(r){return Gr(r,Un(r))}function D1(r){return r?Ao(ut(r),-pe,pe):r===0?r:0}function Nt(r){return r==null?"":er(r)}var P1=Ea(function(r,o){if(Ns(o)||zn(o)){Gr(o,yn(o),r);return}for(var l in o)Te.call(o,l)&&xs(r,l,o[l])}),Em=Ea(function(r,o){Gr(o,Un(o),r)}),ac=Ea(function(r,o,l,v){Gr(o,Un(o),r,v)}),R1=Ea(function(r,o,l,v){Gr(o,yn(o),r,v)}),M1=fi(Fl);function L1(r,o){var l=_a(r);return o==null?l:tp(l,o)}var $1=pt(function(r,o){r=V(r);var l=-1,v=o.length,T=v>2?o[2]:n;for(T&&Ln(o[0],o[1],T)&&(v=1);++l<v;)for(var P=o[l],B=Un(P),X=-1,oe=B.length;++X<oe;){var _e=B[X],Ee=r[_e];(Ee===n||Pr(Ee,De[_e])&&!Te.call(r,_e))&&(r[_e]=P[_e])}return r}),W1=pt(function(r){return r.push(n,jp),bn(Sm,n,r)});function F1(r,o){return ga(r,Ge(o,3),Xr)}function j1(r,o){return ga(r,Ge(o,3),Bl)}function B1(r,o){return r==null?r:jl(r,Ge(o,3),Un)}function H1(r,o){return r==null?r:ap(r,Ge(o,3),Un)}function K1(r,o){return r&&Xr(r,Ge(o,3))}function z1(r,o){return r&&Bl(r,Ge(o,3))}function U1(r){return r==null?[]:Bu(r,yn(r))}function Y1(r){return r==null?[]:Bu(r,Un(r))}function xf(r,o,l){var v=r==null?n:Do(r,o);return v===n?l:v}function V1(r,o){return r!=null&&Kp(r,o,gx)}function bf(r,o){return r!=null&&Kp(r,o,vx)}var q1=Mp(function(r,o,l){o!=null&&typeof o.toString!="function"&&(o=nt.call(o)),r[o]=l},Ef(Yn)),X1=Mp(function(r,o,l){o!=null&&typeof o.toString!="function"&&(o=nt.call(o)),Te.call(r,o)?r[o].push(l):r[o]=[l]},Ge),G1=pt(_s);function yn(r){return zn(r)?Jh(r):Ul(r)}function Un(r){return zn(r)?Jh(r,!0):kx(r)}function Z1(r,o){var l={};return o=Ge(o,3),Xr(r,function(v,T,P){ci(l,o(v,T,P),v)}),l}function Q1(r,o){var l={};return o=Ge(o,3),Xr(r,function(v,T,P){ci(l,T,o(v,T,P))}),l}var J1=Ea(function(r,o,l){Hu(r,o,l)}),Sm=Ea(function(r,o,l,v){Hu(r,o,l,v)}),eE=fi(function(r,o){var l={};if(r==null)return l;var v=!1;o=Pt(o,function(P){return P=Hi(P,r),v||(v=P.length>1),P}),Gr(r,af(r),l),v&&(l=hr(l,y|x|b,qx));for(var T=o.length;T--;)Zl(l,o[T]);return l});function tE(r,o){return Tm(r,rc(Ge(o)))}var nE=fi(function(r,o){return r==null?{}:Cx(r,o)});function Tm(r,o){if(r==null)return{};var l=Pt(af(r),function(v){return[v]});return o=Ge(o),gp(r,l,function(v,T){return o(v,T[0])})}function rE(r,o,l){o=Hi(o,r);var v=-1,T=o.length;for(T||(T=1,r=n);++v<T;){var P=r==null?n:r[Zr(o[v])];P===n&&(v=T,P=l),r=hi(P)?P.call(r):P}return r}function iE(r,o,l){return r==null?r:Ss(r,o,l)}function oE(r,o,l,v){return v=typeof v=="function"?v:n,r==null?r:Ss(r,o,l,v)}var Nm=Wp(yn),km=Wp(Un);function aE(r,o,l){var v=at(r),T=v||zi(r)||Na(r);if(o=Ge(o,4),l==null){var P=r&&r.constructor;T?l=v?new P:[]:Gt(r)?l=hi(P)?_a(fn(r)):{}:l={}}return(T?In:Xr)(r,function(B,X,oe){return o(l,B,X,oe)}),l}function sE(r,o){return r==null?!0:Zl(r,o)}function uE(r,o,l){return r==null?r:bp(r,o,ef(l))}function cE(r,o,l,v){return v=typeof v=="function"?v:n,r==null?r:bp(r,o,ef(l),v)}function ka(r){return r==null?[]:To(r,yn(r))}function lE(r){return r==null?[]:To(r,Un(r))}function fE(r,o,l){return l===n&&(l=o,o=n),l!==n&&(l=gr(l),l=l===l?l:0),o!==n&&(o=gr(o),o=o===o?o:0),Ao(gr(r),o,l)}function dE(r,o,l){return o=pi(o),l===n?(l=o,o=0):l=pi(l),r=gr(r),yx(r,o,l)}function hE(r,o,l){if(l&&typeof l!="boolean"&&Ln(r,o,l)&&(o=l=n),l===n&&(typeof o=="boolean"?(l=o,o=n):typeof r=="boolean"&&(l=r,r=n)),r===n&&o===n?(r=0,o=1):(r=pi(r),o===n?(o=r,r=0):o=pi(o)),r>o){var v=r;r=o,o=v}if(l||r%1||o%1){var T=Zh();return An(r+T*(o-r+ca("1e-"+((T+"").length-1))),o)}return ql(r,o)}var pE=Sa(function(r,o,l){return o=o.toLowerCase(),r+(l?Im(o):o)});function Im(r){return _f(Nt(r).toLowerCase())}function Cm(r){return r=Nt(r),r&&r.replace(Dt,Pl).replace(Yr,"")}function mE(r,o,l){r=Nt(r),o=er(o);var v=r.length;l=l===n?v:Ao(ut(l),0,v);var T=l;return l-=o.length,l>=0&&r.slice(l,T)==o}function gE(r){return r=Nt(r),r&&Ze.test(r)?r.replace(ze,ya):r}function vE(r){return r=Nt(r),r&&Rt.test(r)?r.replace(Et,"\\$&"):r}var yE=Sa(function(r,o,l){return r+(l?"-":"")+o.toLowerCase()}),wE=Sa(function(r,o,l){return r+(l?" ":"")+o.toLowerCase()}),xE=Dp("toLowerCase");function bE(r,o,l){r=Nt(r),o=ut(o);var v=o?s(r):0;if(!o||v>=o)return r;var T=(o-v)/2;return qu(Mu(T),l)+r+qu(Ru(T),l)}function _E(r,o,l){r=Nt(r),o=ut(o);var v=o?s(r):0;return o&&v<o?r+qu(o-v,l):r}function EE(r,o,l){r=Nt(r),o=ut(o);var v=o?s(r):0;return o&&v<o?qu(o-v,l)+r:r}function SE(r,o,l){return l||o==null?o=0:o&&(o=+o),Aw(Nt(r).replace(sr,""),o||0)}function TE(r,o,l){return(l?Ln(r,o,l):o===n)?o=1:o=ut(o),Xl(Nt(r),o)}function NE(){var r=arguments,o=Nt(r[0]);return r.length<3?o:o.replace(r[1],r[2])}var kE=Sa(function(r,o,l){return r+(l?"_":"")+o.toLowerCase()});function IE(r,o,l){return l&&typeof l!="number"&&Ln(r,o,l)&&(o=l=n),l=l===n?ue:l>>>0,l?(r=Nt(r),r&&(typeof o=="string"||o!=null&&!wf(o))&&(o=er(o),!o&&Ar(r))?Ki(d(r),0,l):r.split(o,l)):[]}var CE=Sa(function(r,o,l){return r+(l?" ":"")+_f(o)});function OE(r,o,l){return r=Nt(r),l=l==null?0:Ao(ut(l),0,r.length),o=er(o),r.slice(l,l+o.length)==o}function AE(r,o,l){var v=D.templateSettings;l&&Ln(r,o,l)&&(o=n),r=Nt(r),o=ac({},o,v,Fp);var T=ac({},o.imports,v.imports,Fp),P=yn(T),B=To(T,P),X,oe,_e=0,Ee=o.interpolate||wn,Ne="__p += '",Le=he((o.escape||wn).source+"|"+Ee.source+"|"+(Ee===$t?zr:wn).source+"|"+(o.evaluate||wn).source+"|$","g"),Ke="//# sourceURL="+(Te.call(o,"sourceURL")?(o.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++mo+"]")+`
`;r.replace(Le,function(Je,gt,wt,nr,$n,rr){return wt||(wt=nr),Ne+=r.slice(_e,rr).replace(Zn,Or),gt&&(X=!0,Ne+=`' +
__e(`+gt+`) +
'`),$n&&(oe=!0,Ne+=`';
`+$n+`;
__p += '`),wt&&(Ne+=`' +
((__t = (`+wt+`)) == null ? '' : __t) +
'`),_e=rr+Je.length,Je}),Ne+=`';
`;var Qe=Te.call(o,"variable")&&o.variable;if(!Qe)Ne=`with (obj) {
`+Ne+`
}
`;else if(Gn.test(Qe))throw new j(f);Ne=(oe?Ne.replace(be,""):Ne).replace(de,"$1").replace(Ce,"$1;"),Ne="function("+(Qe||"obj")+`) {
`+(Qe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(X?", __e = _.escape":"")+(oe?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ne+`return __p
}`;var dt=Am(function(){return q(P,Ke+"return "+Ne).apply(n,B)});if(dt.source=Ne,yf(dt))throw dt;return dt}function DE(r){return Nt(r).toLowerCase()}function PE(r){return Nt(r).toUpperCase()}function RE(r,o,l){if(r=Nt(r),r&&(l||o===n))return Cu(r);if(!r||!(o=er(o)))return r;var v=d(r),T=d(o),P=hs(v,T),B=Ou(v,T)+1;return Ki(v,P,B).join("")}function ME(r,o,l){if(r=Nt(r),r&&(l||o===n))return r.slice(0,g(r)+1);if(!r||!(o=er(o)))return r;var v=d(r),T=Ou(v,d(o))+1;return Ki(v,0,T).join("")}function LE(r,o,l){if(r=Nt(r),r&&(l||o===n))return r.replace(sr,"");if(!r||!(o=er(o)))return r;var v=d(r),T=hs(v,d(o));return Ki(v,T).join("")}function $E(r,o){var l=J,v=Y;if(Gt(o)){var T="separator"in o?o.separator:T;l="length"in o?ut(o.length):l,v="omission"in o?er(o.omission):v}r=Nt(r);var P=r.length;if(Ar(r)){var B=d(r);P=B.length}if(l>=P)return r;var X=l-s(v);if(X<1)return v;var oe=B?Ki(B,0,X).join(""):r.slice(0,X);if(T===n)return oe+v;if(B&&(X+=oe.length-X),wf(T)){if(r.slice(X).search(T)){var _e,Ee=oe;for(T.global||(T=he(T.source,Nt(ot.exec(T))+"g")),T.lastIndex=0;_e=T.exec(Ee);)var Ne=_e.index;oe=oe.slice(0,Ne===n?X:Ne)}}else if(r.indexOf(er(T),X)!=X){var Le=oe.lastIndexOf(T);Le>-1&&(oe=oe.slice(0,Le))}return oe+v}function WE(r){return r=Nt(r),r&&Ve.test(r)?r.replace(We,w):r}var FE=Sa(function(r,o,l){return r+(l?" ":"")+o.toUpperCase()}),_f=Dp("toUpperCase");function Om(r,o,l){return r=Nt(r),o=l?n:o,o===n?Hn(r)?$(r):ma(r):r.match(o)||[]}var Am=pt(function(r,o){try{return bn(r,n,o)}catch(l){return yf(l)?l:new j(l)}}),jE=fi(function(r,o){return In(o,function(l){l=Zr(l),ci(r,l,gf(r[l],r))}),r});function BE(r){var o=r==null?0:r.length,l=Ge();return r=o?Pt(r,function(v){if(typeof v[1]!="function")throw new me(c);return[l(v[0]),v[1]]}):[],pt(function(v){for(var T=-1;++T<o;){var P=r[T];if(bn(P[0],this,v))return bn(P[1],this,v)}})}function HE(r){return hx(hr(r,y))}function Ef(r){return function(){return r}}function KE(r,o){return r==null||r!==r?o:r}var zE=Rp(),UE=Rp(!0);function Yn(r){return r}function Sf(r){return lp(typeof r=="function"?r:hr(r,y))}function YE(r){return dp(hr(r,y))}function VE(r,o){return hp(r,hr(o,y))}var qE=pt(function(r,o){return function(l){return _s(l,r,o)}}),XE=pt(function(r,o){return function(l){return _s(r,l,o)}});function Tf(r,o,l){var v=yn(o),T=Bu(o,v);l==null&&!(Gt(o)&&(T.length||!v.length))&&(l=o,o=r,r=this,T=Bu(o,yn(o)));var P=!(Gt(l)&&"chain"in l)||!!l.chain,B=hi(r);return In(T,function(X){var oe=o[X];r[X]=oe,B&&(r.prototype[X]=function(){var _e=this.__chain__;if(P||_e){var Ee=r(this.__wrapped__),Ne=Ee.__actions__=Kn(this.__actions__);return Ne.push({func:oe,args:arguments,thisArg:r}),Ee.__chain__=_e,Ee}return oe.apply(r,Ir([this.value()],arguments))})}),r}function GE(){return hn._===this&&(hn._=ft),this}function Nf(){}function ZE(r){return r=ut(r),pt(function(o){return pp(o,r)})}var QE=nf(Pt),JE=nf(Pi),eS=nf(Cr);function Dm(r){return lf(r)?Eo(Zr(r)):Ox(r)}function tS(r){return function(o){return r==null?n:Do(r,o)}}var nS=Lp(),rS=Lp(!0);function kf(){return[]}function If(){return!1}function iS(){return{}}function oS(){return""}function aS(){return!0}function sS(r,o){if(r=ut(r),r<1||r>pe)return[];var l=ue,v=An(r,ue);o=Ge(o),r-=ue;for(var T=va(v,o);++l<r;)o(l);return T}function uS(r){return at(r)?Pt(r,Zr):tr(r)?[r]:Kn(Qp(Nt(r)))}function cS(r){var o=++Pe;return Nt(r)+o}var lS=Vu(function(r,o){return r+o},0),fS=rf("ceil"),dS=Vu(function(r,o){return r/o},1),hS=rf("floor");function pS(r){return r&&r.length?ju(r,Yn,Hl):n}function mS(r,o){return r&&r.length?ju(r,Ge(o,2),Hl):n}function gS(r){return Tu(r,Yn)}function vS(r,o){return Tu(r,Ge(o,2))}function yS(r){return r&&r.length?ju(r,Yn,Yl):n}function wS(r,o){return r&&r.length?ju(r,Ge(o,2),Yl):n}var xS=Vu(function(r,o){return r*o},1),bS=rf("round"),_S=Vu(function(r,o){return r-o},0);function ES(r){return r&&r.length?ds(r,Yn):0}function SS(r,o){return r&&r.length?ds(r,Ge(o,2)):0}return D.after=Y_,D.ary=cm,D.assign=P1,D.assignIn=Em,D.assignInWith=ac,D.assignWith=R1,D.at=M1,D.before=lm,D.bind=gf,D.bindAll=jE,D.bindKey=fm,D.castArray=i1,D.chain=am,D.chunk=hb,D.compact=pb,D.concat=mb,D.cond=BE,D.conforms=HE,D.constant=Ef,D.countBy=E_,D.create=L1,D.curry=dm,D.curryRight=hm,D.debounce=pm,D.defaults=$1,D.defaultsDeep=W1,D.defer=V_,D.delay=q_,D.difference=gb,D.differenceBy=vb,D.differenceWith=yb,D.drop=wb,D.dropRight=xb,D.dropRightWhile=bb,D.dropWhile=_b,D.fill=Eb,D.filter=T_,D.flatMap=I_,D.flatMapDeep=C_,D.flatMapDepth=O_,D.flatten=nm,D.flattenDeep=Sb,D.flattenDepth=Tb,D.flip=X_,D.flow=zE,D.flowRight=UE,D.fromPairs=Nb,D.functions=U1,D.functionsIn=Y1,D.groupBy=A_,D.initial=Ib,D.intersection=Cb,D.intersectionBy=Ob,D.intersectionWith=Ab,D.invert=q1,D.invertBy=X1,D.invokeMap=P_,D.iteratee=Sf,D.keyBy=R_,D.keys=yn,D.keysIn=Un,D.map=ec,D.mapKeys=Z1,D.mapValues=Q1,D.matches=YE,D.matchesProperty=VE,D.memoize=nc,D.merge=J1,D.mergeWith=Sm,D.method=qE,D.methodOf=XE,D.mixin=Tf,D.negate=rc,D.nthArg=ZE,D.omit=eE,D.omitBy=tE,D.once=G_,D.orderBy=M_,D.over=QE,D.overArgs=Z_,D.overEvery=JE,D.overSome=eS,D.partial=vf,D.partialRight=mm,D.partition=L_,D.pick=nE,D.pickBy=Tm,D.property=Dm,D.propertyOf=tS,D.pull=Mb,D.pullAll=im,D.pullAllBy=Lb,D.pullAllWith=$b,D.pullAt=Wb,D.range=nS,D.rangeRight=rS,D.rearg=Q_,D.reject=F_,D.remove=Fb,D.rest=J_,D.reverse=pf,D.sampleSize=B_,D.set=iE,D.setWith=oE,D.shuffle=H_,D.slice=jb,D.sortBy=U_,D.sortedUniq=Vb,D.sortedUniqBy=qb,D.split=IE,D.spread=e1,D.tail=Xb,D.take=Gb,D.takeRight=Zb,D.takeRightWhile=Qb,D.takeWhile=Jb,D.tap=p_,D.throttle=t1,D.thru=Ju,D.toArray=xm,D.toPairs=Nm,D.toPairsIn=km,D.toPath=uS,D.toPlainObject=_m,D.transform=aE,D.unary=n1,D.union=e_,D.unionBy=t_,D.unionWith=n_,D.uniq=r_,D.uniqBy=i_,D.uniqWith=o_,D.unset=sE,D.unzip=mf,D.unzipWith=om,D.update=uE,D.updateWith=cE,D.values=ka,D.valuesIn=lE,D.without=a_,D.words=Om,D.wrap=r1,D.xor=s_,D.xorBy=u_,D.xorWith=c_,D.zip=l_,D.zipObject=f_,D.zipObjectDeep=d_,D.zipWith=h_,D.entries=Nm,D.entriesIn=km,D.extend=Em,D.extendWith=ac,Tf(D,D),D.add=lS,D.attempt=Am,D.camelCase=pE,D.capitalize=Im,D.ceil=fS,D.clamp=fE,D.clone=o1,D.cloneDeep=s1,D.cloneDeepWith=u1,D.cloneWith=a1,D.conformsTo=c1,D.deburr=Cm,D.defaultTo=KE,D.divide=dS,D.endsWith=mE,D.eq=Pr,D.escape=gE,D.escapeRegExp=vE,D.every=S_,D.find=N_,D.findIndex=em,D.findKey=F1,D.findLast=k_,D.findLastIndex=tm,D.findLastKey=j1,D.floor=hS,D.forEach=sm,D.forEachRight=um,D.forIn=B1,D.forInRight=H1,D.forOwn=K1,D.forOwnRight=z1,D.get=xf,D.gt=l1,D.gte=f1,D.has=V1,D.hasIn=bf,D.head=rm,D.identity=Yn,D.includes=D_,D.indexOf=kb,D.inRange=dE,D.invoke=G1,D.isArguments=Mo,D.isArray=at,D.isArrayBuffer=d1,D.isArrayLike=zn,D.isArrayLikeObject=rn,D.isBoolean=h1,D.isBuffer=zi,D.isDate=p1,D.isElement=m1,D.isEmpty=g1,D.isEqual=v1,D.isEqualWith=y1,D.isError=yf,D.isFinite=w1,D.isFunction=hi,D.isInteger=gm,D.isLength=ic,D.isMap=vm,D.isMatch=x1,D.isMatchWith=b1,D.isNaN=_1,D.isNative=E1,D.isNil=T1,D.isNull=S1,D.isNumber=ym,D.isObject=Gt,D.isObjectLike=Jt,D.isPlainObject=Is,D.isRegExp=wf,D.isSafeInteger=N1,D.isSet=wm,D.isString=oc,D.isSymbol=tr,D.isTypedArray=Na,D.isUndefined=k1,D.isWeakMap=I1,D.isWeakSet=C1,D.join=Db,D.kebabCase=yE,D.last=mr,D.lastIndexOf=Pb,D.lowerCase=wE,D.lowerFirst=xE,D.lt=O1,D.lte=A1,D.max=pS,D.maxBy=mS,D.mean=gS,D.meanBy=vS,D.min=yS,D.minBy=wS,D.stubArray=kf,D.stubFalse=If,D.stubObject=iS,D.stubString=oS,D.stubTrue=aS,D.multiply=xS,D.nth=Rb,D.noConflict=GE,D.noop=Nf,D.now=tc,D.pad=bE,D.padEnd=_E,D.padStart=EE,D.parseInt=SE,D.random=hE,D.reduce=$_,D.reduceRight=W_,D.repeat=TE,D.replace=NE,D.result=rE,D.round=bS,D.runInContext=I,D.sample=j_,D.size=K_,D.snakeCase=kE,D.some=z_,D.sortedIndex=Bb,D.sortedIndexBy=Hb,D.sortedIndexOf=Kb,D.sortedLastIndex=zb,D.sortedLastIndexBy=Ub,D.sortedLastIndexOf=Yb,D.startCase=CE,D.startsWith=OE,D.subtract=_S,D.sum=ES,D.sumBy=SS,D.template=AE,D.times=sS,D.toFinite=pi,D.toInteger=ut,D.toLength=bm,D.toLower=DE,D.toNumber=gr,D.toSafeInteger=D1,D.toString=Nt,D.toUpper=PE,D.trim=RE,D.trimEnd=ME,D.trimStart=LE,D.truncate=$E,D.unescape=WE,D.uniqueId=cS,D.upperCase=FE,D.upperFirst=_f,D.each=sm,D.eachRight=um,D.first=rm,Tf(D,function(){var r={};return Xr(D,function(o,l){Te.call(D.prototype,l)||(r[l]=o)}),r}(),{chain:!1}),D.VERSION=i,In(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){D[r].placeholder=D}),In(["drop","take"],function(r,o){vt.prototype[r]=function(l){l=l===n?1:pn(ut(l),0);var v=this.__filtered__&&!o?new vt(this):this.clone();return v.__filtered__?v.__takeCount__=An(l,v.__takeCount__):v.__views__.push({size:An(l,ue),type:r+(v.__dir__<0?"Right":"")}),v},vt.prototype[r+"Right"]=function(l){return this.reverse()[r](l).reverse()}}),In(["filter","map","takeWhile"],function(r,o){var l=o+1,v=l==R||l==Z;vt.prototype[r]=function(T){var P=this.clone();return P.__iteratees__.push({iteratee:Ge(T,3),type:l}),P.__filtered__=P.__filtered__||v,P}}),In(["head","last"],function(r,o){var l="take"+(o?"Right":"");vt.prototype[r]=function(){return this[l](1).value()[0]}}),In(["initial","tail"],function(r,o){var l="drop"+(o?"":"Right");vt.prototype[r]=function(){return this.__filtered__?new vt(this):this[l](1)}}),vt.prototype.compact=function(){return this.filter(Yn)},vt.prototype.find=function(r){return this.filter(r).head()},vt.prototype.findLast=function(r){return this.reverse().find(r)},vt.prototype.invokeMap=pt(function(r,o){return typeof r=="function"?new vt(this):this.map(function(l){return _s(l,r,o)})}),vt.prototype.reject=function(r){return this.filter(rc(Ge(r)))},vt.prototype.slice=function(r,o){r=ut(r);var l=this;return l.__filtered__&&(r>0||o<0)?new vt(l):(r<0?l=l.takeRight(-r):r&&(l=l.drop(r)),o!==n&&(o=ut(o),l=o<0?l.dropRight(-o):l.take(o-r)),l)},vt.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},vt.prototype.toArray=function(){return this.take(ue)},Xr(vt.prototype,function(r,o){var l=/^(?:filter|find|map|reject)|While$/.test(o),v=/^(?:head|last)$/.test(o),T=D[v?"take"+(o=="last"?"Right":""):o],P=v||/^find/.test(o);T&&(D.prototype[o]=function(){var B=this.__wrapped__,X=v?[1]:arguments,oe=B instanceof vt,_e=X[0],Ee=oe||at(B),Ne=function(gt){var wt=T.apply(D,Ir([gt],X));return v&&Le?wt[0]:wt};Ee&&l&&typeof _e=="function"&&_e.length!=1&&(oe=Ee=!1);var Le=this.__chain__,Ke=!!this.__actions__.length,Qe=P&&!Le,dt=oe&&!Ke;if(!P&&Ee){B=dt?B:new vt(this);var Je=r.apply(B,X);return Je.__actions__.push({func:Ju,args:[Ne],thisArg:n}),new dr(Je,Le)}return Qe&&dt?r.apply(this,X):(Je=this.thru(Ne),Qe?v?Je.value()[0]:Je.value():Je)})}),In(["pop","push","shift","sort","splice","unshift"],function(r){var o=xe[r],l=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",v=/^(?:pop|shift)$/.test(r);D.prototype[r]=function(){var T=arguments;if(v&&!this.__chain__){var P=this.value();return o.apply(at(P)?P:[],T)}return this[l](function(B){return o.apply(at(B)?B:[],T)})}}),Xr(vt.prototype,function(r,o){var l=D[o];if(l){var v=l.name+"";Te.call(ba,v)||(ba[v]=[]),ba[v].push({name:o,func:l})}}),ba[Yu(n,M).name]=[{name:"wrapper",func:n}],vt.prototype.clone=Ww,vt.prototype.reverse=Fw,vt.prototype.value=jw,D.prototype.at=m_,D.prototype.chain=g_,D.prototype.commit=v_,D.prototype.next=y_,D.prototype.plant=x_,D.prototype.reverse=b_,D.prototype.toJSON=D.prototype.valueOf=D.prototype.value=__,D.prototype.first=D.prototype.head,ms&&(D.prototype[ms]=w_),D},G=H();kr?((kr.exports=G)._=G,os._=G):hn._=G}).call(Lr)})(Wc,Wc.exports);var kh=Wc.exports;const Ih=(e,t)=>{const n=e.sortEventTime.localeCompare(t.sortEventTime);return n!==0?n:!e.sortEventId||!t.sortEventId?0:parseInt(e.sortEventId)-parseInt(t.sortEventId)},$g=(e,t)=>{if(!t.find(h=>Ti(h)&&kh.isEqual(Jo(h),e)))throw new Error(`Root workflow node ${e.workflowId} not found`);const i=my(t),a=py(e,t),u=UA(i),c=Tc(a,u),f=Nc(c);return{nodes:u,edges:f,virtualTree:a,renderTree:c}},py=(e,t)=>{const n=t.find(c=>Ti(c)&&kh.isEqual(Jo(c),e));if(!n)throw new Error(`Root workflow node ${e.workflowId} not found`);const i={id:Hs(n),children:[]},a=new Set;a.add(Hs(n));const u=[{nodeId:Hs(n),treeNode:i}];for(;u.length>0;){const{nodeId:c,treeNode:f}=u.shift(),p=t.filter(m=>{const y=hA(m);return y?Br(y)===c:!1}).sort(Ih);for(const m of p){const y=Hs(m);if(a.has(y))continue;a.add(y);const x={id:y,children:[]};f.children.push(x),u.push({nodeId:y,treeNode:x})}}return i},Tc=(e,t)=>{const n=new Map,i=new Map,a=new Set;t.forEach(h=>{n.set(h.id,h.type),h.type==="batch"&&i.set(h.id,h)});const u=new Map;i.forEach((h,p)=>{h.referencedBatches.forEach(m=>{const y="activityId"in m?du(m):Br(m);u.set(y,p)})});const c=new Set,f=h=>{if(a.has(h.id))return c.add(h.id),{id:h.id,children:[]};if(a.add(h.id),h.isExpanded===!1)return c.add(h.id),{id:h.id,children:[]};const p=[],m=new Map;for(const y of h.children){const x=u.get(y.id);x?(m.has(x)||m.set(x,[]),m.get(x).push(y),c.add(y.id)):p.push(f(y))}for(const[y,x]of m){const b={id:y,children:[],isBatchNode:!0};c.add(y);const N=x[0],S=h.children.findIndex(C=>C.id===N.id);S!==-1?p.splice(S,0,b):p.push(b)}return c.add(h.id),{id:h.id,children:p}};return f(e)},Nc=e=>{const t=[],n=new Set,i=f=>{n.add(f.id),f.children.forEach(h=>i(h))};i(e);const a=new Set,u=(f,h=null)=>{const p=f.children;if(p.length===0)return;const m=p[0];if(n.has(f.id)){if(n.has(m.id)){const y=`${f.id}:${m.id}:child`;a.has(y)||(a.add(y),t.push({source_id:f.id,target_id:m.id,type:"child"}))}}for(let y=0;y<p.length-1;y++){const x=p[y],b=p[y+1];if(!n.has(x.id)||!n.has(b.id))continue;const N=`${x.id}:${b.id}:sibling`;a.has(N)||(a.add(N),t.push({source_id:x.id,target_id:b.id,type:"sibling"}))}p.forEach(y=>u(y,f.id))};return u(e),t.filter(f=>n.has(f.source_id)&&n.has(f.target_id))},my=e=>{const t={};let n=[];for(const i of e){let a=i.workflowTaskCompletedEventId;if(a===void 0||a==="-1"){n.push(i);continue}t[a]||(t[a]=[]),t[a].push(i)}for(const i in t){const a=t[i];if(a.length<=5){n=n.concat(a);continue}const u=a[0],c=zA(u,a);n.push(c)}return n.sort(Ih),my.originalItems=e,n},zA=(e,t)=>{const i=[...t].sort(Ih)[0],a={...e,sortEventTime:i.sortEventTime,sortEventId:i.sortEventId||e.sortEventId||"0",workflowTaskCompletedEventId:i.workflowTaskCompletedEventId||e.workflowTaskCompletedEventId||"0"},u=Hs(e);return a.__isBatch=!0,a.__batchItems=t,a.__batchCount=t.length,a.__originalId=u,a},UA=e=>e.map(t=>iy(t));class YA{constructor(){this.endpoint="localhost:7531"}async checkHealth(){const t=`http://${this.endpoint}/health`;return(await fetch(t)).ok}async searchWorkflows(t,n){t||(t="");const i=`http://${this.endpoint}/search?namespace=${n}&query=${encodeURIComponent(t)}`,a=await fetch(i);if(!a.ok)throw new Error(`Failed to search workflows. Status: ${a.status}`);const u=await a.json();if(!u.executions)return{executions:[]};for(let c of u.executions)c.status=Og(c.status).toLowerCase().split("_").map(f=>f.charAt(0).toUpperCase()+f.slice(1)).join("");return u}async getRootWorkflowData(t,n,i){const a=await this.getWorkflowHistoryData(t,n,i);return(await Ig(a,t,i)).filter(c=>c.type==="workflow")}async getRootWorkflowEnrichedData(t,n,i){const a=await this.getWorkflowHistoryData(t,n,i),u=await Ig(a,t,i);return await this.enrichChildWorkflows(u,t),u}async enrichChildWorkflows(t,n){var i,a,u,c;for(const f of t)if((f.type==="workflow"||f.type==="childWorkflow")&&f.status!=="COMPLETED"){const h=await this.getWorkflowData(n,f.workflowId,f.runId);if(f.status=Og(h.workflowExecutionInfo.status),f.startTime=h.workflowExecutionInfo.startTime,f.endTime=h.workflowExecutionInfo.closeTime,f.parentWorkflowId=(a=(i=h.workflowExecutionInfo)==null?void 0:i.parentExecution)==null?void 0:a.workflowId,f.parentWorkflowRunId=(c=(u=h.workflowExecutionInfo)==null?void 0:u.parentExecution)==null?void 0:c.runId,h.pendingActivities)for(const p of h.pendingActivities){const m=t.find(y=>y.type==="activity"&&y.activityId===p.activityId);m&&(m.attempts=p.attempt,m.attempts&&m.attempts>1&&(m.status="RETRYING"),m.status=="SCHEDULED"&&(m.status="PENDING"),m.lastStartedTime=p.lastStartedTime,m.lastAttemptCompleteTime=p.lastAttemptCompleteTime,m.lastWorkerIdentity=p.lastWorkerIdentity,p.lastFailure&&(m.lastFailure=JSON.stringify(p.lastFailure)))}}}async getWorkflowData(t,n,i=""){const a=`http://${this.endpoint}/workflow/data?namespace=${t}&id=${encodeURIComponent(n)}&runId=${i}`,u=await fetch(a);if(!u.ok)throw u.status===404?new Error(`workflow ${n} not found`):new Error(`Failed to fetch workflow data. Status: ${u.status}`);return await u.json()}async getWorkflowHistoryData(t,n,i){const a=`http://${this.endpoint}/workflow?id=${encodeURIComponent(n)}&namespace=${t}&runId=${i}`,u=await fetch(a);if(!u.ok)throw new Error(`Failed to fetch workflow history. Status: ${u.status}`);return await u.json()}}const sl=new YA,VA=async(e,t,n)=>(n||(n=""),await sl.getRootWorkflowEnrichedData(e,t,n)),qA=async()=>{try{return await sl.checkHealth()}catch{return!1}};async function kd(e,t,n,i=0){const a=[{id:t,runId:n,workflowTaskCompletedEventId:"-1",depth:i}],u=new Set;for(;a.length>0;){const{id:c,runId:f,workflowTaskCompletedEventId:h,depth:p}=a.shift();if(u.has(c))continue;const m=await rl(c,f);if(m&&!m.isPlaceholder){u.add(c);continue}try{const y=await VA(e,c,f);u.add(c);const x=[];for(const b of y)b.type==="workflow"?await kg({...b,workflowTaskCompletedEventId:h,isPlaceholder:!1}):b.type==="childWorkflow"?(x.push({workflowId:b.workflowId,workflowRunId:b.runId,workflowTaskCompletedEventId:b.workflowTaskCompletedEventId}),await kg({...b,type:"workflow",isPlaceholder:!0})):b.type==="activity"&&await iA(b);p>0&&x.length>0&&x.forEach(b=>{a.push({id:b.workflowId,runId:b.workflowRunId,workflowTaskCompletedEventId:b.workflowTaskCompletedEventId,depth:p-1})})}catch(y){console.error("Error processing workflow:",y)}}}const Wg=async(e,t)=>await sl.searchWorkflows(t,e),XA=async(e,t,n)=>(await sl.getRootWorkflowData(e,t,n)).filter(a=>a.type==="workflow"&&a.workflowId===t&&a.runId===n)[0];var gy=Symbol.for("immer-nothing"),Fg=Symbol.for("immer-draftable"),or=Symbol.for("immer-state");function Wr(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ya=Object.getPrototypeOf;function Va(e){return!!e&&!!e[or]}function Zo(e){var t;return e?vy(e)||Array.isArray(e)||!!e[Fg]||!!((t=e.constructor)!=null&&t[Fg])||cl(e)||ll(e):!1}var GA=Object.prototype.constructor.toString();function vy(e){if(!e||typeof e!="object")return!1;const t=Ya(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===GA}function Fc(e,t){ul(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,i)=>t(i,n,e))}function ul(e){const t=e[or];return t?t.type_:Array.isArray(e)?1:cl(e)?2:ll(e)?3:0}function Id(e,t){return ul(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function yy(e,t,n){const i=ul(e);i===2?e.set(t,n):i===3?e.add(n):e[t]=n}function ZA(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function cl(e){return e instanceof Map}function ll(e){return e instanceof Set}function $o(e){return e.copy_||e.base_}function Cd(e,t){if(cl(e))return new Map(e);if(ll(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=vy(e);if(t===!0||t==="class_only"&&!n){const i=Object.getOwnPropertyDescriptors(e);delete i[or];let a=Reflect.ownKeys(i);for(let u=0;u<a.length;u++){const c=a[u],f=i[c];f.writable===!1&&(f.writable=!0,f.configurable=!0),(f.get||f.set)&&(i[c]={configurable:!0,writable:!0,enumerable:f.enumerable,value:e[c]})}return Object.create(Ya(e),i)}else{const i=Ya(e);if(i!==null&&n)return{...e};const a=Object.create(i);return Object.assign(a,e)}}function Ch(e,t=!1){return fl(e)||Va(e)||!Zo(e)||(ul(e)>1&&(e.set=e.add=e.clear=e.delete=QA),Object.freeze(e),t&&Object.entries(e).forEach(([n,i])=>Ch(i,!0))),e}function QA(){Wr(2)}function fl(e){return Object.isFrozen(e)}var JA={};function Qo(e){const t=JA[e];return t||Wr(0,e),t}var iu;function wy(){return iu}function eD(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function jg(e,t){t&&(Qo("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Od(e){Ad(e),e.drafts_.forEach(tD),e.drafts_=null}function Ad(e){e===iu&&(iu=e.parent_)}function Bg(e){return iu=eD(iu,e)}function tD(e){const t=e[or];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Hg(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[or].modified_&&(Od(t),Wr(4)),Zo(e)&&(e=jc(t,e),t.parent_||Bc(t,e)),t.patches_&&Qo("Patches").generateReplacementPatches_(n[or].base_,e,t.patches_,t.inversePatches_)):e=jc(t,n,[]),Od(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==gy?e:void 0}function jc(e,t,n){if(fl(t))return t;const i=t[or];if(!i)return Fc(t,(a,u)=>Kg(e,i,t,a,u,n)),t;if(i.scope_!==e)return t;if(!i.modified_)return Bc(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let u=a,c=!1;i.type_===3&&(u=new Set(a),a.clear(),c=!0),Fc(u,(f,h)=>Kg(e,i,a,f,h,n,c)),Bc(e,a,!1),n&&e.patches_&&Qo("Patches").generatePatches_(i,n,e.patches_,e.inversePatches_)}return i.copy_}function Kg(e,t,n,i,a,u,c){if(Va(a)){const f=u&&t&&t.type_!==3&&!Id(t.assigned_,i)?u.concat(i):void 0,h=jc(e,a,f);if(yy(n,i,h),Va(h))e.canAutoFreeze_=!1;else return}else c&&n.add(a);if(Zo(a)&&!fl(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;jc(e,a),(!t||!t.scope_.parent_)&&typeof i!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,i)&&Bc(e,a)}}function Bc(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Ch(t,n)}function nD(e,t){const n=Array.isArray(e),i={type_:n?1:0,scope_:t?t.scope_:wy(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=i,u=Oh;n&&(a=[i],u=ou);const{revoke:c,proxy:f}=Proxy.revocable(a,u);return i.draft_=f,i.revoke_=c,f}var Oh={get(e,t){if(t===or)return e;const n=$o(e);if(!Id(n,t))return rD(e,n,t);const i=n[t];return e.finalized_||!Zo(i)?i:i===Uf(e.base_,t)?(Yf(e),e.copy_[t]=Pd(i,e)):i},has(e,t){return t in $o(e)},ownKeys(e){return Reflect.ownKeys($o(e))},set(e,t,n){const i=xy($o(e),t);if(i!=null&&i.set)return i.set.call(e.draft_,n),!0;if(!e.modified_){const a=Uf($o(e),t),u=a==null?void 0:a[or];if(u&&u.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(ZA(n,a)&&(n!==void 0||Id(e.base_,t)))return!0;Yf(e),Dd(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Uf(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Yf(e),Dd(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=$o(e),i=Reflect.getOwnPropertyDescriptor(n,t);return i&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:i.enumerable,value:n[t]}},defineProperty(){Wr(11)},getPrototypeOf(e){return Ya(e.base_)},setPrototypeOf(){Wr(12)}},ou={};Fc(Oh,(e,t)=>{ou[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});ou.deleteProperty=function(e,t){return ou.set.call(this,e,t,void 0)};ou.set=function(e,t,n){return Oh.set.call(this,e[0],t,n,e[0])};function Uf(e,t){const n=e[or];return(n?$o(n):e)[t]}function rD(e,t,n){var a;const i=xy(t,n);return i?"value"in i?i.value:(a=i.get)==null?void 0:a.call(e.draft_):void 0}function xy(e,t){if(!(t in e))return;let n=Ya(e);for(;n;){const i=Object.getOwnPropertyDescriptor(n,t);if(i)return i;n=Ya(n)}}function Dd(e){e.modified_||(e.modified_=!0,e.parent_&&Dd(e.parent_))}function Yf(e){e.copy_||(e.copy_=Cd(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var iD=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,i)=>{if(typeof t=="function"&&typeof n!="function"){const u=n;n=t;const c=this;return function(h=u,...p){return c.produce(h,m=>n.call(this,m,...p))}}typeof n!="function"&&Wr(6),i!==void 0&&typeof i!="function"&&Wr(7);let a;if(Zo(t)){const u=Bg(this),c=Pd(t,void 0);let f=!0;try{a=n(c),f=!1}finally{f?Od(u):Ad(u)}return jg(u,i),Hg(a,u)}else if(!t||typeof t!="object"){if(a=n(t),a===void 0&&(a=t),a===gy&&(a=void 0),this.autoFreeze_&&Ch(a,!0),i){const u=[],c=[];Qo("Patches").generateReplacementPatches_(t,a,u,c),i(u,c)}return a}else Wr(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(c,...f)=>this.produceWithPatches(c,h=>t(h,...f));let i,a;return[this.produce(t,n,(c,f)=>{i=c,a=f}),i,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Zo(e)||Wr(8),Va(e)&&(e=oD(e));const t=Bg(this),n=Pd(e,void 0);return n[or].isManual_=!0,Ad(t),n}finishDraft(e,t){const n=e&&e[or];(!n||!n.isManual_)&&Wr(9);const{scope_:i}=n;return jg(i,t),Hg(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}n>-1&&(t=t.slice(n+1));const i=Qo("Patches").applyPatches_;return Va(e)?i(e,t):this.produce(e,a=>i(a,t))}};function Pd(e,t){const n=cl(e)?Qo("MapSet").proxyMap_(e,t):ll(e)?Qo("MapSet").proxySet_(e,t):nD(e,t);return(t?t.scope_:wy()).drafts_.push(n),n}function oD(e){return Va(e)||Wr(10,e),by(e)}function by(e){if(!Zo(e)||fl(e))return e;const t=e[or];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Cd(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Cd(e,!0);return Fc(n,(i,a)=>{yy(n,i,by(a))}),t&&(t.finalized_=!1),n}var ar=new iD,Vf=ar.produce;ar.produceWithPatches.bind(ar);ar.setAutoFreeze.bind(ar);ar.setUseStrictShallowCopy.bind(ar);ar.applyPatches.bind(ar);ar.createDraft.bind(ar);ar.finishDraft.bind(ar);const Ma=(e,t)=>{if(e.id===t)return e;for(const n of e.children){const i=Ma(n,t);if(i)return i}return null},_y=(e,t)=>{for(const n of e.children)if(n.id===t)return e;for(const n of e.children){const i=_y(n,t);if(i)return i}return null};function aD(){const[e,t]=k.useState(!1),[n,i]=k.useState(!1),a=bi(Nh),u=bi(Nd),c=ol(),f=async(m,y,x)=>{try{t(!0);const b=c.get(Ko),N=c.get(Ba),S=Br({workflowId:y,workflowRunId:x});if(await kd(m,y,x,2),b){const ae=Ma(b,S);if(ae&&ae.children&&ae.children.length>0){const U=Vf(b,J=>{const Y=Ma(J,S);Y&&(Y.isExpanded=!0)}),Q=Tc(U,N),ne=Nc(Q);return a({structure:U,renderTree:Q,edges:ne}),u(S),!0}}const C=await Ed(y,x),M={workflowId:y,workflowRunId:x};if(!C.find(ae=>Ti(ae)&&kh.isEqual(Jo(ae),M)))return console.error("[expandChildWorkflowNode] Root workflow node not found"),!1;const te=py(M,C),F=c.get(Ko),le=c.get(Ba);if(F&&te){const ae=C.map(ge=>{if(!(Ti(ge)&&ge.workflowId===M.workflowId&&ge.runId===M.workflowRunId))return iy(ge)}).filter(ge=>ge!==void 0),U=new Set(le.map(ge=>ge.id)),Q=ae.filter(ge=>!U.has(ge.id)),ne=[...le,...Q],J=Vf(F,ge=>{const R=Ma(ge,S);R?(R.children=te.children,R.isExpanded=!0):console.error(`[expandChildWorkflowNode] Could not find node ${S} in virtual tree to update!`)}),Y=Tc(J,ne),ce=Nc(Y);return a({nodes:ne,edges:ce,structure:J,renderTree:Y}),u(S),!0}return console.error("[expandChildWorkflowNode] Could not update graph - virtual tree or subgraph missing"),!1}catch(b){return console.error("[expandChildWorkflowNode] Error expanding workflow:",b),!1}finally{t(!1)}},h=async(m,y)=>{try{i(!0);const x=c.get(Ko),b=c.get(Ba),N=Br({workflowId:m,workflowRunId:y});if(u(null),x){const S=Vf(x,z=>{const te=Ma(z,N);te&&(te.isExpanded=!1)}),C=Tc(S,b),M=Nc(C);a({structure:S,renderTree:C,edges:M})}return!0}catch(x){return console.error("Failed to collapse workflow node:",x),!1}finally{i(!1)}};return{expandChildWorkflowNode:f,collapseChildWorkflowNode:h,collapseSiblingWorkflowNodes:async(m,y)=>{const x=c.get(Ko);if(!x)return{success:!0,message:"No graph structure available"};const b=Br({workflowId:m,workflowRunId:y});u(null);const N=_y(x,b);if(!N)return{success:!1,message:"Could not find parent node"};const S=[];for(const C of N.children)if(C.id!==b&&C.isExpanded){const M=ry(C.id);S.push(h(M.workflowId,M.workflowRunId))}return await Promise.all(S),{success:!0,message:"Collapsed sibling nodes"}},isExpanding:e,isCollapsing:n}}const sD=(e,t=50)=>e?e.length<=t?e:e.slice(0,t)+"...":"",uD=e=>k.useMemo(()=>ry(e),[e]),cD=k.memo(({id:e,data:t,onSpreadBatchNodes:n,onShowNodeData:i})=>{const a=uD(t.id),u=cA(a),{expandChildWorkflowNode:c,collapseChildWorkflowNode:f,collapseSiblingWorkflowNodes:h}=aD(),[p,m]=k.useState(!1),[y,x]=k.useState(!1),b=k.useRef(!1),N=u.value,S=ol(),C=k.useCallback(async()=>{if(!u.loading&&N){const F=S.get(Ko);let le=t.isExpanded;if(F){const ae=Ma(F,t.id);ae&&(le=ae.isExpanded)}if(le)await f(N.workflowId,N.runId);else{m(!0),b.current=!0;const ae=setTimeout(()=>{b.current&&x(!0)},100);try{await h(N.workflowId,N.runId),await new Promise(U=>setTimeout(U,50)),await c(N.namespace,N.workflowId,N.runId)}finally{clearTimeout(ae),b.current=!1,m(!1),x(!1)}}}},[u.loading,t,c,f,h,N,e]),M=k.useCallback(()=>{N&&(f(N.workflowId,N.runId),requestAnimationFrame(()=>{n==null||n(e)}))},[f,N,n,e]),z=k.useCallback(F=>{N&&i(N,{x:F.clientX,y:F.clientY})},[N,i]);return k.useMemo(()=>{var F;return u.error||!N?null:_.jsxs("div",{className:"relative",children:[_.jsx("div",{className:yr(p&&"pointer-events-none opacity-75"),children:_.jsx(xh,{id:e,onShowNodeData:z,onBatchAction:M,onClick:C,IconComponent:_.jsx("div",{className:"bg-amber-50",children:_.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[_.jsx("rect",{x:"9",y:"3",width:"6",height:"6",rx:"1"}),_.jsx("rect",{x:"3",y:"15",width:"6",height:"6",rx:"1"}),_.jsx("rect",{x:"15",y:"15",width:"6",height:"6",rx:"1"}),_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3M6 15v-3h12v3"})]})}),TitleComponent:_.jsxs(_.Fragment,{children:[_.jsx("h3",{className:"font-semibold text-gray-800 truncate",children:N.workflowType}),_.jsx("p",{className:"text-xs text-gray-500 overflow-hidden text-ellipsis",children:sD(e)})]}),TypeLabelComponent:_.jsx("div",{className:"px-2 py-0.5 rounded text-xs font-medium shadow-sm z-10",style:{backgroundColor:"rgb(254 243 199)",color:"rgb(217 119 6)"},children:"workflow"}),status:N.status,startTime:N.startTime,endTime:N.endTime,taskQueue:(F=N.taskQueue)==null?void 0:F.name})}),y&&_.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none bg-white bg-opacity-50 z-20",children:_.jsx("div",{className:"bg-white p-3 rounded-full shadow-lg",children:_.jsx(QO,{className:"w-8 h-8 text-blue-500 animate-spin"})})})]})},[e,N,u.error,u.loading,C,M,z,p,y])}),lD=({autoZoomEnabled:e,setAutoZoomEnabled:t,refreshWorkflowData:n,currentWorkflow:i,setIsSearchModalOpen:a})=>{k.useEffect(()=>{(async()=>{const f=await ru("autoZoomEnabled");f!==void 0&&t(f)})()},[t]);const u=async()=>{const c=!e;t(c),await Sd("autoZoomEnabled",c)};return _.jsxs("div",{className:"flex gap-2 items-center",children:[_.jsxs("button",{className:`px-3 py-1 rounded ${e?"bg-green-500 text-white":"bg-gray-200 text-gray-700"}`,onClick:u,children:["Auto Zoom ",e?"On":"Off"]}),_.jsx("button",{className:"px-3 py-1 rounded bg-blue-500 text-white hover:bg-blue-600",onClick:()=>a(!0),children:_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(Zv,{className:"h-4 w-4"}),"Search"]})})]})};function fD({id:e,data:t,onClose:n,position:i,baseZIndex:a=1e3}){const[u,c]=k.useState("io"),f=k.useRef(null),h=k.useRef(null),[p,m]=k.useState({width:600,height:600}),[y,x]=k.useState(!1),[b,N]=k.useState(!1),S=k.useRef({x:0,y:0,width:0,height:0}),[C,M]=k.useState({x:0,y:0}),[z,te]=k.useState(null),[F,le]=k.useState(3e3);k.useEffect(()=>{t&&t!==h.current&&(c("io"),h.current=t)},[t]),k.useEffect(()=>{const W=f.current;W&&(W.style.display="none",W.scrollTop=0,W.style.display="")},[t,u]),k.useEffect(()=>{t&&i&&f.current&&(f.current.style.display="none",f.current.offsetHeight,f.current.style.display="",f.current.style.zIndex="3000")},[t,i]),k.useEffect(()=>{const W=document.createElement("div");W.style.position="fixed",document.body.appendChild(W),te(W);const ie=document.querySelectorAll("[data-node-panel]");let ue=3e3;return ie.forEach(we=>{const ke=parseInt(window.getComputedStyle(we).zIndex);ke>ue&&(ue=ke)}),W.style.zIndex=(ue+1).toString(),le(ue+1),()=>{W&&document.body.contains(W)&&document.body.removeChild(W)}},[]),k.useEffect(()=>{z&&(z.style.zIndex=F.toString())},[F,z]);const ae=W=>{var ue;if(!W.target||!(W.target instanceof HTMLElement)||!W.target.closest("[data-drag-handle]"))return;W.preventDefault(),W.stopPropagation(),x(!0);const ie=(ue=f.current)==null?void 0:ue.getBoundingClientRect();ie&&(S.current={x:W.clientX-ie.left,y:W.clientY-ie.top,width:p.width,height:p.height}),document.body.style.userSelect="none"},U=W=>{var ie,ue;W.stopPropagation(),W.preventDefault(),N(!0),S.current={x:W.clientX,y:W.clientY,width:((ie=f.current)==null?void 0:ie.offsetWidth)||p.width,height:((ue=f.current)==null?void 0:ue.offsetHeight)||p.height},document.body.style.userSelect="none"};k.useEffect(()=>{const W=we=>{if(!(!y&&!b))if(we.preventDefault(),we.stopPropagation(),b&&f.current){const ke=we.clientX-S.current.x,Me=we.clientY-S.current.y,Re=Math.max(300,S.current.width+ke),je=Math.max(400,S.current.height+Me);(Re!==p.width||je!==p.height)&&m({width:Re,height:je})}else y&&M({x:we.clientX-S.current.x-i.x,y:we.clientY-S.current.y-i.y})},ie=we=>{we.preventDefault(),we.stopPropagation(),requestAnimationFrame(()=>{x(!1),N(!1),document.body.style.userSelect=""})},ue=new AbortController;return(y||b)&&(window.addEventListener("mousemove",W,{signal:ue.signal,capture:!0}),window.addEventListener("mouseup",ie,{signal:ue.signal,capture:!0})),()=>{ue.abort()}},[y,b,i,p]);const Q=()=>{if(!i)return{};const W=20,ie=window.innerWidth,ue=window.innerHeight,we=Math.min(Math.max(W,i.x+C.x),ie-p.width-W),ke=Math.min(Math.max(W,i.y+C.y),ue-p.height-W);return{left:we,top:ke}},ne=()=>{const W=document.querySelectorAll("[data-node-panel]");let ie=3e3;W.forEach(ue=>{const we=parseInt(window.getComputedStyle(ue).zIndex);we>ie&&(ie=we)}),le(ie+1)};if(!t||!i||!z)return null;const J=!!(t.lastFailure||t.failure),Y=!!(t.scheduleTime||t.startTime||t.endTime),ce=!!(t.input||t.result||t.memo&&Object.keys(t.memo).length>0||t.searchAttributes&&Object.keys(t.searchAttributes).length>0),R=t.type==="workflow"&&t.namespace&&t.workflowId?`https://cloud.temporal.io/namespaces/${t.namespace}/workflows/${t.workflowId}`:null,se=({tab:W,label:ie,disabled:ue})=>_.jsx("button",{onClick:()=>!ue&&c(W),disabled:ue,className:yr("px-4 py-2 text-sm font-medium transition-colors rounded-t-lg","focus:outline-none",ue&&"opacity-50 cursor-not-allowed",u===W?{io:"bg-blue-100 text-blue-800",error:"bg-red-100 text-red-800",time:"bg-purple-100 text-purple-800",common:"bg-green-100 text-green-800"}[W]:"text-gray-600 hover:bg-gray-100"),children:ie}),Z=()=>{var ie;const W="space-y-4 min-h-[300px]";switch(u){case"io":return _.jsxs("div",{className:W,children:[t.input&&_.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg overflow-auto relative",children:[_.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Input"}),_.jsx(ye,{content:JSON.stringify(JSON.parse(t.input),null,2)}),_.jsx("div",{className:"overflow-auto",children:_.jsx("pre",{className:"text-xs text-blue-700 whitespace-pre-wrap break-all bg-blue-100 p-2 rounded min-w-fit",children:JSON.stringify(JSON.parse(t.input),null,2)})})]}),t.result&&_.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg overflow-auto relative",children:[_.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Result"}),_.jsx(ye,{content:JSON.stringify(JSON.parse(t.result),null,2)}),_.jsx("div",{className:"overflow-auto",children:_.jsx("pre",{className:"text-xs text-blue-700 whitespace-pre-wrap break-all bg-blue-100 p-2 rounded min-w-fit",children:JSON.stringify(JSON.parse(t.result),null,2)})})]}),t.header&&Object.keys(t.header).length>0&&_.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg overflow-auto relative",children:[_.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Header"}),_.jsx(ye,{content:JSON.stringify(t.header,null,2)}),_.jsx("div",{className:"overflow-auto",children:_.jsx("pre",{className:"text-xs text-blue-700 whitespace-pre-wrap break-all bg-blue-100 p-2 rounded min-w-fit",children:JSON.stringify(t.header,null,2)})})]}),t.memo&&Object.keys(t.memo).length>0&&_.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg overflow-auto",children:[_.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Memo"}),_.jsx("div",{className:"overflow-auto",children:_.jsx("pre",{className:"text-xs text-blue-700 whitespace-pre-wrap bg-blue-100 p-2 rounded min-w-fit",children:JSON.stringify(t.memo,null,2)})})]}),t.searchAttributes&&Object.keys(t.searchAttributes).length>0&&_.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg overflow-auto",children:[_.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Search Attributes"}),_.jsx("div",{className:"overflow-auto",children:_.jsx("pre",{className:"text-xs text-blue-700 whitespace-pre-wrap bg-blue-100 p-2 rounded min-w-fit",children:JSON.stringify(t.searchAttributes,null,2)})})]})]});case"error":return _.jsxs("div",{className:W,children:[t.lastFailure&&_.jsxs("div",{className:"bg-red-50 p-4 rounded-lg overflow-auto relative",children:[_.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Last Failure"}),_.jsx(ye,{content:JSON.stringify(JSON.parse(t.lastFailure),null,2)}),_.jsx("div",{className:"overflow-auto",children:_.jsx("pre",{className:"text-xs text-red-700 whitespace-pre-wrap break-all bg-red-100 p-2 rounded min-w-fit",children:JSON.stringify(JSON.parse(t.lastFailure),null,2)})})]}),t.failure&&_.jsxs("div",{className:"bg-red-50 p-4 rounded-lg overflow-auto relative",children:[_.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Failure"}),_.jsx(ye,{content:JSON.stringify(JSON.parse(t.failure),null,2)}),_.jsx("div",{className:"overflow-auto",children:_.jsx("pre",{className:"text-xs text-red-700 whitespace-pre-wrap break-all bg-red-100 p-2 rounded min-w-fit",children:JSON.stringify(JSON.parse(t.failure),null,2)})})]})]});case"time":return _.jsxs("div",{className:W,children:[t.startTime&&t.endTime&&_.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Duration"}),_.jsx("p",{className:"text-purple-700 text-lg font-semibold",children:wh(t.startTime,t.endTime)})]}),t.scheduleTime&&_.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Schedule Time"}),_.jsx("p",{className:"text-purple-700",children:t.scheduleTime})]}),t.startTime&&_.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Start Time"}),_.jsx("p",{className:"text-purple-700",children:t.startTime})]}),t.endTime&&_.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"End Time"}),_.jsx("p",{className:"text-purple-700",children:t.endTime})]}),t.lastStartedTime&&_.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Last Started Time"}),_.jsx("p",{className:"text-purple-700",children:t.lastStartedTime})]}),t.lastAttemptCompleteTime&&_.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Last Attempt Complete Time"}),_.jsx("p",{className:"text-purple-700",children:t.lastAttemptCompleteTime})]}),(t.heartbeatTimeout||t.scheduleToCloseTimeout||t.scheduleToStartTimeout||t.startToCloseTimeout||t.workflowRunTimeout||t.workflowTaskTimeout)&&_.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Timeouts"}),t.heartbeatTimeout&&_.jsxs("p",{className:"text-purple-700",children:["Heartbeat: ",t.heartbeatTimeout]}),t.scheduleToCloseTimeout&&_.jsxs("p",{className:"text-purple-700",children:["Schedule to Close: ",t.scheduleToCloseTimeout]}),t.scheduleToStartTimeout&&_.jsxs("p",{className:"text-purple-700",children:["Schedule to Start: ",t.scheduleToStartTimeout]}),t.startToCloseTimeout&&_.jsxs("p",{className:"text-purple-700",children:["Start to Close: ",t.startToCloseTimeout]}),t.workflowRunTimeout&&_.jsxs("p",{className:"text-purple-700",children:["Workflow Run: ",t.workflowRunTimeout]}),t.workflowTaskTimeout&&_.jsxs("p",{className:"text-purple-700",children:["Workflow Task: ",t.workflowTaskTimeout]})]})]});case"common":return _.jsxs("div",{className:W,children:[_.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Basic Information"}),_.jsxs("div",{className:"space-y-2",children:[_.jsxs("p",{className:"text-green-700",children:["Type: ",t.type]}),t.activityType&&_.jsxs("p",{className:"text-green-700",children:["Activity Type: ",t.activityType]}),t.workflowType&&_.jsxs("p",{className:"text-green-700",children:["Workflow Type: ",t.workflowType]}),_.jsxs("p",{className:"text-green-700",children:["Status: ",t.status]}),t.namespace&&_.jsxs("p",{className:"text-green-700",children:["Namespace: ",t.namespace]}),t.workflowId&&_.jsxs("p",{className:"text-green-700",children:["Workflow ID: ",t.workflowId]}),(t.workflowRunId||t.runId)&&_.jsxs("p",{className:"text-green-700",children:["Run ID: ",t.workflowRunId||t.runId]}),t.activityId&&_.jsxs("p",{className:"text-green-700",children:["Activity ID: ",t.activityId]}),t.workflowTaskCompletedEventId&&_.jsxs("p",{className:"text-green-700",children:["Workflow Task Completed Event ID:"," ",t.workflowTaskCompletedEventId]})]})]}),t.taskQueue&&_.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Task Queue"}),_.jsxs("p",{className:"text-green-700",children:["Name: ",t.taskQueue.name]})]}),t.retryPolicy&&_.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Retry Policy"}),_.jsxs("div",{className:"space-y-2",children:[_.jsxs("p",{className:"text-green-700",children:["Initial Interval: ",t.retryPolicy.initialInterval]}),_.jsxs("p",{className:"text-green-700",children:["Backoff Coefficient: ",t.retryPolicy.backoffCoefficient]}),_.jsxs("p",{className:"text-green-700",children:["Maximum Interval: ",t.retryPolicy.maximumInterval]}),_.jsxs("p",{className:"text-green-700",children:["Maximum Attempts: ",t.retryPolicy.maximumAttempts]}),((ie=t.retryPolicy.nonRetryableErrorTypes)==null?void 0:ie.length)>0&&_.jsxs("div",{children:[_.jsx("p",{className:"text-green-700",children:"Non-retryable Error Types:"}),_.jsx("ul",{className:"list-disc pl-4",children:t.retryPolicy.nonRetryableErrorTypes.map((ue,we)=>_.jsx("li",{className:"text-green-700",children:ue},we))})]})]})]}),t.attempts&&_.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Attempts"}),_.jsxs("p",{className:"text-green-700",children:["Count: ",t.attempts]})]}),t.lastWorkerIdentity&&_.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Worker"}),_.jsxs("p",{className:"text-green-700",children:["Last Identity: ",t.lastWorkerIdentity]})]}),t.workflowReusePolicy&&_.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[_.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Workflow Reuse Policy"}),_.jsx("p",{className:"text-green-700",children:t.workflowReusePolicy})]})]})}},ye=({content:W})=>{const ie=()=>{navigator.clipboard.writeText(W)};return _.jsx("button",{onClick:ie,className:"absolute top-4 right-4 p-1.5 rounded bg-white/80 hover:bg-white border border-gray-200 transition-colors",title:"Copy to clipboard",children:_.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-600",children:[_.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),_.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})})},pe=_.jsxs("div",{ref:f,"data-node-panel":!0,"data-base-z-index":a,className:"fixed bg-white rounded-lg shadow-xl border border-gray-200 overflow-hidden",style:{...Q(),width:p.width,height:p.height,zIndex:F,visibility:"visible",opacity:1,pointerEvents:"auto"},onClick:W=>{W.preventDefault(),W.stopPropagation(),ne()},onMouseDown:W=>{W.preventDefault(),W.stopPropagation(),W.target instanceof HTMLElement&&W.target.closest("[data-drag-handle]")&&ae(W)},children:[_.jsx("button",{onClick:W=>{W.preventDefault(),W.stopPropagation(),n()},className:"absolute top-2 right-2 p-1.5 hover:bg-gray-100 rounded-full transition-colors z-50",title:"Close panel",children:_.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-500",children:[_.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),_.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),_.jsx("div",{className:"flex absolute top-0 left-0 right-0 h-4 cursor-move","data-drag-handle":!0,onMouseDown:ae,children:_.jsx("div",{className:"mx-auto p-1.5 select-none",children:_.jsxs("svg",{width:"20",height:"10",viewBox:"0 0 20 4",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-gray-400 pointer-events-none",children:[_.jsx("circle",{cx:"2",cy:"2",r:"1",fill:"currentColor"}),_.jsx("circle",{cx:"10",cy:"2",r:"1",fill:"currentColor"}),_.jsx("circle",{cx:"18",cy:"2",r:"1",fill:"currentColor"})]})})}),(R||t.type==="activity")&&_.jsxs("div",{className:yr("px-4 py-2 bg-gray-50 border-b",t.type==="activity"&&"pt-6"),children:[_.jsxs("div",{className:"flex items-center justify-between mb-2 pr-8",children:[_.jsx("div",{className:"flex items-center gap-2",children:R&&_.jsxs(_.Fragment,{children:[_.jsxs("svg",{className:"w-4 h-4 text-gray-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[_.jsx("rect",{x:"9",y:"3",width:"6",height:"6",rx:"1"}),_.jsx("rect",{x:"3",y:"15",width:"6",height:"6",rx:"1"}),_.jsx("rect",{x:"15",y:"15",width:"6",height:"6",rx:"1"}),_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3M6 15v-3h12v3"})]}),_.jsx("a",{href:R,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm font-medium",onClick:W=>{W.stopPropagation(),window.open(R,"_blank","noopener,noreferrer")},children:"View in Temporal"})]})}),_.jsxs("div",{className:"flex flex-col items-end",children:[_.jsx("span",{className:"text-xs text-gray-500",children:t.namespace}),t.taskQueue&&_.jsx("span",{className:"text-xs text-gray-500",children:t.taskQueue.name})]})]}),_.jsxs("div",{className:"flex flex-col gap-1",children:[t.workflowType&&_.jsxs("span",{className:"text-xs text-gray-500",children:[_.jsx("span",{className:"font-bold",children:"Type:"})," ",_.jsx("span",{className:"font-bold",children:t.workflowType})]}),t.type==="activity"&&t.activityType&&_.jsxs("span",{className:"text-xs text-gray-500",children:[_.jsx("span",{className:"font-bold",children:"Type:"})," ",_.jsx("span",{className:"font-bold",children:t.activityType})]}),t.workflowId&&t.type!=="activity"&&_.jsx("span",{className:"text-xs text-gray-500 select-all font-mono",children:t.workflowId})]})]}),_.jsxs("div",{className:"border-b flex gap-1 px-2 pt-2 bg-gray-50",children:[_.jsx(se,{tab:"io",label:"Input/Output",disabled:!ce}),_.jsx(se,{tab:"error",label:"Error",disabled:!J}),_.jsx(se,{tab:"time",label:"Time",disabled:!Y}),_.jsx(se,{tab:"common",label:"Common"})]}),_.jsx("div",{className:"overflow-y-auto",style:{height:"calc(100% - 116px)"},children:_.jsx("div",{className:"p-4",children:Z()})}),_.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 cursor-se-resize",onMouseDown:U,style:{background:"linear-gradient(135deg, transparent 50%, #CBD5E1 50%)"}})]});return th.createPortal(pe,z)}var dD=Object.defineProperty,hD=(e,t,n)=>t in e?dD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qf=(e,t,n)=>(hD(e,typeof t!="symbol"?t+"":t,n),n);let pD=class{constructor(){qf(this,"current",this.detect()),qf(this,"handoffState","pending"),qf(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Vo=new pD;function dl(e){return Vo.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}function hl(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function ro(){let e=[],t={addEventListener(n,i,a,u){return n.addEventListener(i,a,u),t.add(()=>n.removeEventListener(i,a,u))},requestAnimationFrame(...n){let i=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(i))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let i=setTimeout(...n);return t.add(()=>clearTimeout(i))},microTask(...n){let i={current:!0};return hl(()=>{i.current&&n[0]()}),t.add(()=>{i.current=!1})},style(n,i,a){let u=n.style.getPropertyValue(i);return Object.assign(n.style,{[i]:a}),this.add(()=>{Object.assign(n.style,{[i]:u})})},group(n){let i=ro();return n(i),this.add(()=>i.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let i=e.indexOf(n);if(i>=0)for(let a of e.splice(i,1))a()}},dispose(){for(let n of e.splice(0))n()}};return t}function Ah(){let[e]=k.useState(ro);return k.useEffect(()=>()=>e.dispose(),[e]),e}let Fn=(e,t)=>{Vo.isServer?k.useEffect(e,t):k.useLayoutEffect(e,t)};function ea(e){let t=k.useRef(e);return Fn(()=>{t.current=e},[e]),t}let Zt=function(e){let t=ea(e);return re.useCallback((...n)=>t.current(...n),[t])},mD=k.createContext(void 0);function gD(){return k.useContext(mD)}function Rd(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function to(e,t,...n){if(e in t){let a=t[e];return typeof a=="function"?a(...n):a}let i=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(a=>`"${a}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,to),i}var Hc=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Hc||{}),Ji=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Ji||{});function br(){let e=yD();return k.useCallback(t=>vD({mergeRefs:e,...t}),[e])}function vD({ourProps:e,theirProps:t,slot:n,defaultTag:i,features:a,visible:u=!0,name:c,mergeRefs:f}){f=f??wD;let h=Ey(t,e);if(u)return vc(h,n,i,c,f);let p=a??0;if(p&2){let{static:m=!1,...y}=h;if(m)return vc(y,n,i,c,f)}if(p&1){let{unmount:m=!0,...y}=h;return to(m?0:1,{0(){return null},1(){return vc({...y,hidden:!0,style:{display:"none"}},n,i,c,f)}})}return vc(h,n,i,c,f)}function vc(e,t={},n,i,a){let{as:u=n,children:c,refName:f="ref",...h}=Xf(e,["unmount","static"]),p=e.ref!==void 0?{[f]:e.ref}:{},m=typeof c=="function"?c(t):c;"className"in h&&h.className&&typeof h.className=="function"&&(h.className=h.className(t)),h["aria-labelledby"]&&h["aria-labelledby"]===h.id&&(h["aria-labelledby"]=void 0);let y={};if(t){let x=!1,b=[];for(let[N,S]of Object.entries(t))typeof S=="boolean"&&(x=!0),S===!0&&b.push(N.replace(/([A-Z])/g,C=>`-${C.toLowerCase()}`));if(x){y["data-headlessui-state"]=b.join(" ");for(let N of b)y[`data-${N}`]=""}}if(u===k.Fragment&&(Object.keys(Wo(h)).length>0||Object.keys(Wo(y)).length>0))if(!k.isValidElement(m)||Array.isArray(m)&&m.length>1){if(Object.keys(Wo(h)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${i} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Wo(h)).concat(Object.keys(Wo(y))).map(x=>`  - ${x}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(x=>`  - ${x}`).join(`
`)].join(`
`))}else{let x=m.props,b=x==null?void 0:x.className,N=typeof b=="function"?(...M)=>Rd(b(...M),h.className):Rd(b,h.className),S=N?{className:N}:{},C=Ey(m.props,Wo(Xf(h,["ref"])));for(let M in y)M in C&&delete y[M];return k.cloneElement(m,Object.assign({},C,y,p,{ref:a(xD(m),p.ref)},S))}return k.createElement(u,Object.assign({},Xf(h,["ref"]),u!==k.Fragment&&p,u!==k.Fragment&&y),m)}function yD(){let e=k.useRef([]),t=k.useCallback(n=>{for(let i of e.current)i!=null&&(typeof i=="function"?i(n):i.current=n)},[]);return(...n)=>{if(!n.every(i=>i==null))return e.current=n,t}}function wD(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function Ey(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let i of e)for(let a in i)a.startsWith("on")&&typeof i[a]=="function"?(n[a]!=null||(n[a]=[]),n[a].push(i[a])):t[a]=i[a];if(t.disabled||t["aria-disabled"])for(let i in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(i)&&(n[i]=[a=>{var u;return(u=a==null?void 0:a.preventDefault)==null?void 0:u.call(a)}]);for(let i in n)Object.assign(t,{[i](a,...u){let c=n[i];for(let f of c){if((a instanceof Event||(a==null?void 0:a.nativeEvent)instanceof Event)&&a.defaultPrevented)return;f(a,...u)}}});return t}function Xn(e){var t;return Object.assign(k.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function Wo(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function Xf(e,t=[]){let n=Object.assign({},e);for(let i of t)i in n&&delete n[i];return n}function xD(e){return re.version.split(".")[0]>="19"?e.props.ref:e.ref}let bD="span";var Kc=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Kc||{});function _D(e,t){var n;let{features:i=1,...a}=e,u={ref:t,"aria-hidden":(i&2)===2?!0:(n=a["aria-hidden"])!=null?n:void 0,hidden:(i&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(i&4)===4&&(i&2)!==2&&{display:"none"}}};return br()({ourProps:u,theirProps:a,slot:{},defaultTag:bD,name:"Hidden"})}let Md=Xn(_D),Sy=Symbol();function ED(e,t=!0){return Object.assign(e,{[Sy]:t})}function ni(...e){let t=k.useRef(e);k.useEffect(()=>{t.current=e},[e]);let n=Zt(i=>{for(let a of t.current)a!=null&&(typeof a=="function"?a(i):a.current=i)});return e.every(i=>i==null||(i==null?void 0:i[Sy]))?void 0:n}let Dh=k.createContext(null);Dh.displayName="DescriptionContext";function Ty(){let e=k.useContext(Dh);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Ty),t}return e}function SD(){let[e,t]=k.useState([]);return[e.length>0?e.join(" "):void 0,k.useMemo(()=>function(n){let i=Zt(u=>(t(c=>[...c,u]),()=>t(c=>{let f=c.slice(),h=f.indexOf(u);return h!==-1&&f.splice(h,1),f}))),a=k.useMemo(()=>({register:i,slot:n.slot,name:n.name,props:n.props,value:n.value}),[i,n.slot,n.name,n.props,n.value]);return re.createElement(Dh.Provider,{value:a},n.children)},[t])]}let TD="p";function ND(e,t){let n=k.useId(),i=gD(),{id:a=`headlessui-description-${n}`,...u}=e,c=Ty(),f=ni(t);Fn(()=>c.register(a),[a,c.register]);let h=i||!1,p=k.useMemo(()=>({...c.slot,disabled:h}),[c.slot,h]),m={ref:f,...c.props,id:a};return br()({ourProps:m,theirProps:u,slot:p,defaultTag:TD,name:c.name||"Description"})}let kD=Xn(ND),ID=Object.assign(kD,{});var Ny=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(Ny||{});let CD=k.createContext(()=>{});function OD({value:e,children:t}){return re.createElement(CD.Provider,{value:e},t)}let AD=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};function ky(e,t){let n=e(),i=new Set;return{getSnapshot(){return n},subscribe(a){return i.add(a),()=>i.delete(a)},dispatch(a,...u){let c=t[a].call(n,...u);c&&(n=c,i.forEach(f=>f()))}}}function Iy(e){return k.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}let DD=new AD(()=>ky(()=>[],{ADD(e){return this.includes(e)?this:[...this,e]},REMOVE(e){let t=this.indexOf(e);if(t===-1)return this;let n=this.slice();return n.splice(t,1),n}}));function qa(e,t){let n=DD.get(t),i=k.useId(),a=Iy(n);if(Fn(()=>{if(e)return n.dispatch("ADD",i),()=>n.dispatch("REMOVE",i)},[n,e]),!e)return!1;let u=a.indexOf(i),c=a.length;return u===-1&&(u=c,c+=1),u===c-1}let Ld=new Map,Ys=new Map;function zg(e){var t;let n=(t=Ys.get(e))!=null?t:0;return Ys.set(e,n+1),n!==0?()=>Ug(e):(Ld.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>Ug(e))}function Ug(e){var t;let n=(t=Ys.get(e))!=null?t:1;if(n===1?Ys.delete(e):Ys.set(e,n-1),n!==1)return;let i=Ld.get(e);i&&(i["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",i["aria-hidden"]),e.inert=i.inert,Ld.delete(e))}function PD(e,{allowed:t,disallowed:n}={}){let i=qa(e,"inert-others");Fn(()=>{var a,u;if(!i)return;let c=ro();for(let h of(a=n==null?void 0:n())!=null?a:[])h&&c.add(zg(h));let f=(u=t==null?void 0:t())!=null?u:[];for(let h of f){if(!h)continue;let p=dl(h);if(!p)continue;let m=h.parentElement;for(;m&&m!==p.body;){for(let y of m.children)f.some(x=>y.contains(x))||c.add(zg(y));m=m.parentElement}}return c.dispose},[i,t,n])}function RD(e,t,n){let i=ea(a=>{let u=a.getBoundingClientRect();u.x===0&&u.y===0&&u.width===0&&u.height===0&&n()});k.useEffect(()=>{if(!e)return;let a=t===null?null:t instanceof HTMLElement?t:t.current;if(!a)return;let u=ro();if(typeof ResizeObserver<"u"){let c=new ResizeObserver(()=>i.current(a));c.observe(a),u.add(()=>c.disconnect())}if(typeof IntersectionObserver<"u"){let c=new IntersectionObserver(()=>i.current(a));c.observe(a),u.add(()=>c.disconnect())}return()=>u.dispose()},[t,i,e])}let zc=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),MD=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var yi=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(yi||{}),$d=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))($d||{}),LD=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(LD||{});function $D(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(zc)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function WD(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(MD)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var Cy=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(Cy||{});function FD(e,t=0){var n;return e===((n=dl(e))==null?void 0:n.body)?!1:to(t,{0(){return e.matches(zc)},1(){let i=e;for(;i!==null;){if(i.matches(zc))return!0;i=i.parentElement}return!1}})}var jD=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(jD||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function _i(e){e==null||e.focus({preventScroll:!0})}let BD=["textarea","input"].join(",");function HD(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,BD))!=null?n:!1}function KD(e,t=n=>n){return e.slice().sort((n,i)=>{let a=t(n),u=t(i);if(a===null||u===null)return 0;let c=a.compareDocumentPosition(u);return c&Node.DOCUMENT_POSITION_FOLLOWING?-1:c&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Vs(e,t,{sorted:n=!0,relativeTo:i=null,skipElements:a=[]}={}){let u=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,c=Array.isArray(e)?n?KD(e):e:t&64?WD(e):$D(e);a.length>0&&c.length>1&&(c=c.filter(b=>!a.some(N=>N!=null&&"current"in N?(N==null?void 0:N.current)===b:N===b))),i=i??u.activeElement;let f=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),h=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,c.indexOf(i))-1;if(t&4)return Math.max(0,c.indexOf(i))+1;if(t&8)return c.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),p=t&32?{preventScroll:!0}:{},m=0,y=c.length,x;do{if(m>=y||m+y<=0)return 0;let b=h+m;if(t&16)b=(b+y)%y;else{if(b<0)return 3;if(b>=y)return 1}x=c[b],x==null||x.focus(p),m+=f}while(x!==u.activeElement);return t&6&&HD(x)&&x.select(),2}function Oy(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function zD(){return/Android/gi.test(window.navigator.userAgent)}function UD(){return Oy()||zD()}function Ms(e,t,n,i){let a=ea(n);k.useEffect(()=>{if(!e)return;function u(c){a.current(c)}return document.addEventListener(t,u,i),()=>document.removeEventListener(t,u,i)},[e,t,i])}function Ay(e,t,n,i){let a=ea(n);k.useEffect(()=>{if(!e)return;function u(c){a.current(c)}return window.addEventListener(t,u,i),()=>window.removeEventListener(t,u,i)},[e,t,i])}const Yg=30;function YD(e,t,n){let i=qa(e,"outside-click"),a=ea(n),u=k.useCallback(function(h,p){if(h.defaultPrevented)return;let m=p(h);if(m===null||!m.getRootNode().contains(m)||!m.isConnected)return;let y=function x(b){return typeof b=="function"?x(b()):Array.isArray(b)||b instanceof Set?b:[b]}(t);for(let x of y)if(x!==null&&(x.contains(m)||h.composed&&h.composedPath().includes(x)))return;return!FD(m,Cy.Loose)&&m.tabIndex!==-1&&h.preventDefault(),a.current(h,m)},[a,t]),c=k.useRef(null);Ms(i,"pointerdown",h=>{var p,m;c.current=((m=(p=h.composedPath)==null?void 0:p.call(h))==null?void 0:m[0])||h.target},!0),Ms(i,"mousedown",h=>{var p,m;c.current=((m=(p=h.composedPath)==null?void 0:p.call(h))==null?void 0:m[0])||h.target},!0),Ms(i,"click",h=>{UD()||c.current&&(u(h,()=>c.current),c.current=null)},!0);let f=k.useRef({x:0,y:0});Ms(i,"touchstart",h=>{f.current.x=h.touches[0].clientX,f.current.y=h.touches[0].clientY},!0),Ms(i,"touchend",h=>{let p={x:h.changedTouches[0].clientX,y:h.changedTouches[0].clientY};if(!(Math.abs(p.x-f.current.x)>=Yg||Math.abs(p.y-f.current.y)>=Yg))return u(h,()=>h.target instanceof HTMLElement?h.target:null)},!0),Ay(i,"blur",h=>u(h,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function hu(...e){return k.useMemo(()=>dl(...e),[...e])}function Dy(e,t,n,i){let a=ea(n);k.useEffect(()=>{e=e??window;function u(c){a.current(c)}return e.addEventListener(t,u,i),()=>e.removeEventListener(t,u,i)},[e,t,i])}function VD(){let e;return{before({doc:t}){var n;let i=t.documentElement,a=(n=t.defaultView)!=null?n:window;e=Math.max(0,a.innerWidth-i.clientWidth)},after({doc:t,d:n}){let i=t.documentElement,a=Math.max(0,i.clientWidth-i.offsetWidth),u=Math.max(0,e-a);n.style(i,"paddingRight",`${u}px`)}}}function qD(){return Oy()?{before({doc:e,d:t,meta:n}){function i(a){return n.containers.flatMap(u=>u()).some(u=>u.contains(a))}t.microTask(()=>{var a;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let f=ro();f.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>f.dispose()))}let u=(a=window.scrollY)!=null?a:window.pageYOffset,c=null;t.addEventListener(e,"click",f=>{if(f.target instanceof HTMLElement)try{let h=f.target.closest("a");if(!h)return;let{hash:p}=new URL(h.href),m=e.querySelector(p);m&&!i(m)&&(c=m)}catch{}},!0),t.addEventListener(e,"touchstart",f=>{if(f.target instanceof HTMLElement)if(i(f.target)){let h=f.target;for(;h.parentElement&&i(h.parentElement);)h=h.parentElement;t.style(h,"overscrollBehavior","contain")}else t.style(f.target,"touchAction","none")}),t.addEventListener(e,"touchmove",f=>{if(f.target instanceof HTMLElement){if(f.target.tagName==="INPUT")return;if(i(f.target)){let h=f.target;for(;h.parentElement&&h.dataset.headlessuiPortal!==""&&!(h.scrollHeight>h.clientHeight||h.scrollWidth>h.clientWidth);)h=h.parentElement;h.dataset.headlessuiPortal===""&&f.preventDefault()}else f.preventDefault()}},{passive:!1}),t.add(()=>{var f;let h=(f=window.scrollY)!=null?f:window.pageYOffset;u!==h&&window.scrollTo(0,u),c&&c.isConnected&&(c.scrollIntoView({block:"nearest"}),c=null)})})}}:{}}function XD(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function GD(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let zo=ky(()=>new Map,{PUSH(e,t){var n;let i=(n=this.get(e))!=null?n:{doc:e,count:0,d:ro(),meta:new Set};return i.count++,i.meta.add(t),this.set(e,i),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let i={doc:e,d:t,meta:GD(n)},a=[qD(),VD(),XD()];a.forEach(({before:u})=>u==null?void 0:u(i)),a.forEach(({after:u})=>u==null?void 0:u(i))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});zo.subscribe(()=>{let e=zo.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let i=t.get(n.doc)==="hidden",a=n.count!==0;(a&&!i||!a&&i)&&zo.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&zo.dispatch("TEARDOWN",n)}});function ZD(e,t,n=()=>({containers:[]})){let i=Iy(zo),a=t?i.get(t):void 0,u=a?a.count>0:!1;return Fn(()=>{if(!(!t||!e))return zo.dispatch("PUSH",t,n),()=>zo.dispatch("POP",t,n)},[e,t]),u}function QD(e,t,n=()=>[document.body]){let i=qa(e,"scroll-lock");ZD(i,t,a=>{var u;return{containers:[...(u=a.containers)!=null?u:[],n]}})}function JD(e=0){let[t,n]=k.useState(e),i=k.useCallback(h=>n(h),[t]),a=k.useCallback(h=>n(p=>p|h),[t]),u=k.useCallback(h=>(t&h)===h,[t]),c=k.useCallback(h=>n(p=>p&~h),[n]),f=k.useCallback(h=>n(p=>p^h),[n]);return{flags:t,setFlag:i,addFlag:a,hasFlag:u,removeFlag:c,toggleFlag:f}}var e2={},Vg,qg;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((Vg=process==null?void 0:e2)==null?void 0:Vg.NODE_ENV)==="test"&&typeof((qg=Element==null?void 0:Element.prototype)==null?void 0:qg.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var t2=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(t2||{});function n2(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function r2(e,t,n,i){let[a,u]=k.useState(n),{hasFlag:c,addFlag:f,removeFlag:h}=JD(e&&a?3:0),p=k.useRef(!1),m=k.useRef(!1),y=Ah();return Fn(()=>{var x;if(e){if(n&&u(!0),!t){n&&f(3);return}return(x=i==null?void 0:i.start)==null||x.call(i,n),i2(t,{inFlight:p,prepare(){m.current?m.current=!1:m.current=p.current,p.current=!0,!m.current&&(n?(f(3),h(4)):(f(4),h(2)))},run(){m.current?n?(h(3),f(4)):(h(4),f(3)):n?h(1):f(1)},done(){var b;m.current&&typeof t.getAnimations=="function"&&t.getAnimations().length>0||(p.current=!1,h(7),n||u(!1),(b=i==null?void 0:i.end)==null||b.call(i,n))}})}},[e,n,t,y]),e?[a,{closed:c(1),enter:c(2),leave:c(4),transition:c(2)||c(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function i2(e,{prepare:t,run:n,done:i,inFlight:a}){let u=ro();return a2(e,{prepare:t,inFlight:a}),u.nextFrame(()=>{n(),u.requestAnimationFrame(()=>{u.add(o2(e,i))})}),u.dispose}function o2(e,t){var n,i;let a=ro();if(!e)return a.dispose;let u=!1;a.add(()=>{u=!0});let c=(i=(n=e.getAnimations)==null?void 0:n.call(e).filter(f=>f instanceof CSSTransition))!=null?i:[];return c.length===0?(t(),a.dispose):(Promise.allSettled(c.map(f=>f.finished)).then(()=>{u||t()}),a.dispose)}function a2(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let i=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=i}function Ph(e,t){let n=k.useRef([]),i=Zt(e);k.useEffect(()=>{let a=[...n.current];for(let[u,c]of t.entries())if(n.current[u]!==c){let f=i(t,a);return n.current=t,f}},[i,...t])}let pl=k.createContext(null);pl.displayName="OpenClosedContext";var Fr=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Fr||{});function ml(){return k.useContext(pl)}function s2({value:e,children:t}){return re.createElement(pl.Provider,{value:e},t)}function u2({children:e}){return re.createElement(pl.Provider,{value:null},e)}function c2(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Gi=[];c2(()=>{function e(t){if(!(t.target instanceof HTMLElement)||t.target===document.body||Gi[0]===t.target)return;let n=t.target;n=n.closest(zc),Gi.unshift(n??t.target),Gi=Gi.filter(i=>i!=null&&i.isConnected),Gi.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function Py(e){let t=Zt(e),n=k.useRef(!1);k.useEffect(()=>(n.current=!1,()=>{n.current=!0,hl(()=>{n.current&&t()})}),[t])}function l2(){let e=typeof document>"u";return"useSyncExternalStore"in Rm?(t=>t.useSyncExternalStore)(Rm)(()=>()=>{},()=>!1,()=>!e):!1}function pu(){let e=l2(),[t,n]=k.useState(Vo.isHandoffComplete);return t&&Vo.isHandoffComplete===!1&&n(!1),k.useEffect(()=>{t!==!0&&n(!0)},[t]),k.useEffect(()=>Vo.handoff(),[]),e?!1:t}let Ry=k.createContext(!1);function f2(){return k.useContext(Ry)}function Xg(e){return re.createElement(Ry.Provider,{value:e.force},e.children)}function d2(e){let t=f2(),n=k.useContext(Ly),i=hu(e),[a,u]=k.useState(()=>{var c;if(!t&&n!==null)return(c=n.current)!=null?c:null;if(Vo.isServer)return null;let f=i==null?void 0:i.getElementById("headlessui-portal-root");if(f)return f;if(i===null)return null;let h=i.createElement("div");return h.setAttribute("id","headlessui-portal-root"),i.body.appendChild(h)});return k.useEffect(()=>{a!==null&&(i!=null&&i.body.contains(a)||i==null||i.body.appendChild(a))},[a,i]),k.useEffect(()=>{t||n!==null&&u(n.current)},[n,u,t]),a}let My=k.Fragment,h2=Xn(function(e,t){let n=e,i=k.useRef(null),a=ni(ED(y=>{i.current=y}),t),u=hu(i),c=d2(i),[f]=k.useState(()=>{var y;return Vo.isServer?null:(y=u==null?void 0:u.createElement("div"))!=null?y:null}),h=k.useContext(Wd),p=pu();Fn(()=>{!c||!f||c.contains(f)||(f.setAttribute("data-headlessui-portal",""),c.appendChild(f))},[c,f]),Fn(()=>{if(f&&h)return h.register(f)},[h,f]),Py(()=>{var y;!c||!f||(f instanceof Node&&c.contains(f)&&c.removeChild(f),c.childNodes.length<=0&&((y=c.parentElement)==null||y.removeChild(c)))});let m=br();return p?!c||!f?null:th.createPortal(m({ourProps:{ref:a},theirProps:n,slot:{},defaultTag:My,name:"Portal"}),f):null});function p2(e,t){let n=ni(t),{enabled:i=!0,...a}=e,u=br();return i?re.createElement(h2,{...a,ref:n}):u({ourProps:{ref:n},theirProps:a,slot:{},defaultTag:My,name:"Portal"})}let m2=k.Fragment,Ly=k.createContext(null);function g2(e,t){let{target:n,...i}=e,a={ref:ni(t)},u=br();return re.createElement(Ly.Provider,{value:n},u({ourProps:a,theirProps:i,defaultTag:m2,name:"Popover.Group"}))}let Wd=k.createContext(null);function v2(){let e=k.useContext(Wd),t=k.useRef([]),n=Zt(u=>(t.current.push(u),e&&e.register(u),()=>i(u))),i=Zt(u=>{let c=t.current.indexOf(u);c!==-1&&t.current.splice(c,1),e&&e.unregister(u)}),a=k.useMemo(()=>({register:n,unregister:i,portals:t}),[n,i,t]);return[t,k.useMemo(()=>function({children:u}){return re.createElement(Wd.Provider,{value:a},u)},[a])]}let y2=Xn(p2),$y=Xn(g2),w2=Object.assign(y2,{Group:$y});function x2(e,t=typeof document<"u"?document.defaultView:null,n){let i=qa(e,"escape");Dy(t,"keydown",a=>{i&&(a.defaultPrevented||a.key===Ny.Escape&&n(a))})}function b2(){var e;let[t]=k.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,i]=k.useState((e=t==null?void 0:t.matches)!=null?e:!1);return Fn(()=>{if(!t)return;function a(u){i(u.matches)}return t.addEventListener("change",a),()=>t.removeEventListener("change",a)},[t]),n}function _2({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let i=hu(n),a=Zt(()=>{var u,c;let f=[];for(let h of e)h!==null&&(h instanceof HTMLElement?f.push(h):"current"in h&&h.current instanceof HTMLElement&&f.push(h.current));if(t!=null&&t.current)for(let h of t.current)f.push(h);for(let h of(u=i==null?void 0:i.querySelectorAll("html > *, body > *"))!=null?u:[])h!==document.body&&h!==document.head&&h instanceof HTMLElement&&h.id!=="headlessui-portal-root"&&(n&&(h.contains(n)||h.contains((c=n==null?void 0:n.getRootNode())==null?void 0:c.host))||f.some(p=>h.contains(p))||f.push(h));return f});return{resolveContainers:a,contains:Zt(u=>a().some(c=>c.contains(u)))}}let Wy=k.createContext(null);function Gg({children:e,node:t}){let[n,i]=k.useState(null),a=Fy(t??n);return re.createElement(Wy.Provider,{value:a},e,a===null&&re.createElement(Md,{features:Kc.Hidden,ref:u=>{var c,f;if(u){for(let h of(f=(c=dl(u))==null?void 0:c.querySelectorAll("html > *, body > *"))!=null?f:[])if(h!==document.body&&h!==document.head&&h instanceof HTMLElement&&h!=null&&h.contains(u)){i(h);break}}}}))}function Fy(e=null){var t;return(t=k.useContext(Wy))!=null?t:e}function Rh(){let e=k.useRef(!1);return Fn(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var Ks=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Ks||{});function E2(){let e=k.useRef(0);return Ay(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function jy(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)n.current instanceof HTMLElement&&t.add(n.current);return t}let S2="div";var jo=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(jo||{});function T2(e,t){let n=k.useRef(null),i=ni(n,t),{initialFocus:a,initialFocusFallback:u,containers:c,features:f=15,...h}=e;pu()||(f=0);let p=hu(n);C2(f,{ownerDocument:p});let m=O2(f,{ownerDocument:p,container:n,initialFocus:a,initialFocusFallback:u});A2(f,{ownerDocument:p,container:n,containers:c,previousActiveElement:m});let y=E2(),x=Zt(z=>{let te=n.current;te&&(F=>F())(()=>{to(y.current,{[Ks.Forwards]:()=>{Vs(te,yi.First,{skipElements:[z.relatedTarget,u]})},[Ks.Backwards]:()=>{Vs(te,yi.Last,{skipElements:[z.relatedTarget,u]})}})})}),b=qa(!!(f&2),"focus-trap#tab-lock"),N=Ah(),S=k.useRef(!1),C={ref:i,onKeyDown(z){z.key=="Tab"&&(S.current=!0,N.requestAnimationFrame(()=>{S.current=!1}))},onBlur(z){if(!(f&4))return;let te=jy(c);n.current instanceof HTMLElement&&te.add(n.current);let F=z.relatedTarget;F instanceof HTMLElement&&F.dataset.headlessuiFocusGuard!=="true"&&(By(te,F)||(S.current?Vs(n.current,to(y.current,{[Ks.Forwards]:()=>yi.Next,[Ks.Backwards]:()=>yi.Previous})|yi.WrapAround,{relativeTo:z.target}):z.target instanceof HTMLElement&&_i(z.target)))}},M=br();return re.createElement(re.Fragment,null,b&&re.createElement(Md,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:x,features:Kc.Focusable}),M({ourProps:C,theirProps:h,defaultTag:S2,name:"FocusTrap"}),b&&re.createElement(Md,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:x,features:Kc.Focusable}))}let N2=Xn(T2),k2=Object.assign(N2,{features:jo});function I2(e=!0){let t=k.useRef(Gi.slice());return Ph(([n],[i])=>{i===!0&&n===!1&&hl(()=>{t.current.splice(0)}),i===!1&&n===!0&&(t.current=Gi.slice())},[e,Gi,t]),Zt(()=>{var n;return(n=t.current.find(i=>i!=null&&i.isConnected))!=null?n:null})}function C2(e,{ownerDocument:t}){let n=!!(e&8),i=I2(n);Ph(()=>{n||(t==null?void 0:t.activeElement)===(t==null?void 0:t.body)&&_i(i())},[n]),Py(()=>{n&&_i(i())})}function O2(e,{ownerDocument:t,container:n,initialFocus:i,initialFocusFallback:a}){let u=k.useRef(null),c=qa(!!(e&1),"focus-trap#initial-focus"),f=Rh();return Ph(()=>{if(e===0)return;if(!c){a!=null&&a.current&&_i(a.current);return}let h=n.current;h&&hl(()=>{if(!f.current)return;let p=t==null?void 0:t.activeElement;if(i!=null&&i.current){if((i==null?void 0:i.current)===p){u.current=p;return}}else if(h.contains(p)){u.current=p;return}if(i!=null&&i.current)_i(i.current);else{if(e&16){if(Vs(h,yi.First|yi.AutoFocus)!==$d.Error)return}else if(Vs(h,yi.First)!==$d.Error)return;if(a!=null&&a.current&&(_i(a.current),(t==null?void 0:t.activeElement)===a.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}u.current=t==null?void 0:t.activeElement})},[a,c,e]),u}function A2(e,{ownerDocument:t,container:n,containers:i,previousActiveElement:a}){let u=Rh(),c=!!(e&4);Dy(t==null?void 0:t.defaultView,"focus",f=>{if(!c||!u.current)return;let h=jy(i);n.current instanceof HTMLElement&&h.add(n.current);let p=a.current;if(!p)return;let m=f.target;m&&m instanceof HTMLElement?By(h,m)?(a.current=m,_i(m)):(f.preventDefault(),f.stopPropagation(),_i(p)):_i(a.current)},!0)}function By(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function Hy(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||((t=e.as)!=null?t:zy)!==k.Fragment||re.Children.count(e.children)===1}let gl=k.createContext(null);gl.displayName="TransitionContext";var D2=(e=>(e.Visible="visible",e.Hidden="hidden",e))(D2||{});function P2(){let e=k.useContext(gl);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function R2(){let e=k.useContext(vl);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let vl=k.createContext(null);vl.displayName="NestingContext";function yl(e){return"children"in e?yl(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function Ky(e,t){let n=ea(e),i=k.useRef([]),a=Rh(),u=Ah(),c=Zt((b,N=Ji.Hidden)=>{let S=i.current.findIndex(({el:C})=>C===b);S!==-1&&(to(N,{[Ji.Unmount](){i.current.splice(S,1)},[Ji.Hidden](){i.current[S].state="hidden"}}),u.microTask(()=>{var C;!yl(i)&&a.current&&((C=n.current)==null||C.call(n))}))}),f=Zt(b=>{let N=i.current.find(({el:S})=>S===b);return N?N.state!=="visible"&&(N.state="visible"):i.current.push({el:b,state:"visible"}),()=>c(b,Ji.Unmount)}),h=k.useRef([]),p=k.useRef(Promise.resolve()),m=k.useRef({enter:[],leave:[]}),y=Zt((b,N,S)=>{h.current.splice(0),t&&(t.chains.current[N]=t.chains.current[N].filter(([C])=>C!==b)),t==null||t.chains.current[N].push([b,new Promise(C=>{h.current.push(C)})]),t==null||t.chains.current[N].push([b,new Promise(C=>{Promise.all(m.current[N].map(([M,z])=>z)).then(()=>C())})]),N==="enter"?p.current=p.current.then(()=>t==null?void 0:t.wait.current).then(()=>S(N)):S(N)}),x=Zt((b,N,S)=>{Promise.all(m.current[N].splice(0).map(([C,M])=>M)).then(()=>{var C;(C=h.current.shift())==null||C()}).then(()=>S(N))});return k.useMemo(()=>({children:i,register:f,unregister:c,onStart:y,onStop:x,wait:p,chains:m}),[f,c,i,y,x,m,p])}let zy=k.Fragment,Uy=Hc.RenderStrategy;function M2(e,t){var n,i;let{transition:a=!0,beforeEnter:u,afterEnter:c,beforeLeave:f,afterLeave:h,enter:p,enterFrom:m,enterTo:y,entered:x,leave:b,leaveFrom:N,leaveTo:S,...C}=e,[M,z]=k.useState(null),te=k.useRef(null),F=Hy(e),le=ni(...F?[te,t,z]:t===null?[]:[t]),ae=(n=C.unmount)==null||n?Ji.Unmount:Ji.Hidden,{show:U,appear:Q,initial:ne}=P2(),[J,Y]=k.useState(U?"visible":"hidden"),ce=R2(),{register:ge,unregister:R}=ce;Fn(()=>ge(te),[ge,te]),Fn(()=>{if(ae===Ji.Hidden&&te.current){if(U&&J!=="visible"){Y("visible");return}return to(J,{hidden:()=>R(te),visible:()=>ge(te)})}},[J,te,ge,R,U,ae]);let se=pu();Fn(()=>{if(F&&se&&J==="visible"&&te.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[te,J,se,F]);let Z=ne&&!Q,ye=Q&&U&&ne,pe=k.useRef(!1),W=Ky(()=>{pe.current||(Y("hidden"),R(te))},ce),ie=Zt(Ye=>{pe.current=!0;let qe=Ye?"enter":"leave";W.onStart(te,qe,Se=>{Se==="enter"?u==null||u():Se==="leave"&&(f==null||f())})}),ue=Zt(Ye=>{let qe=Ye?"enter":"leave";pe.current=!1,W.onStop(te,qe,Se=>{Se==="enter"?c==null||c():Se==="leave"&&(h==null||h())}),qe==="leave"&&!yl(W)&&(Y("hidden"),R(te))});k.useEffect(()=>{F&&a||(ie(U),ue(U))},[U,F,a]);let we=!(!a||!F||!se||Z),[,ke]=r2(we,M,U,{start:ie,end:ue}),Me=Wo({ref:le,className:((i=Rd(C.className,ye&&p,ye&&m,ke.enter&&p,ke.enter&&ke.closed&&m,ke.enter&&!ke.closed&&y,ke.leave&&b,ke.leave&&!ke.closed&&N,ke.leave&&ke.closed&&S,!ke.transition&&U&&x))==null?void 0:i.trim())||void 0,...n2(ke)}),Re=0;J==="visible"&&(Re|=Fr.Open),J==="hidden"&&(Re|=Fr.Closed),ke.enter&&(Re|=Fr.Opening),ke.leave&&(Re|=Fr.Closing);let je=br();return re.createElement(vl.Provider,{value:W},re.createElement(s2,{value:Re},je({ourProps:Me,theirProps:C,defaultTag:zy,features:Uy,visible:J==="visible",name:"Transition.Child"})))}function L2(e,t){let{show:n,appear:i=!1,unmount:a=!0,...u}=e,c=k.useRef(null),f=Hy(e),h=ni(...f?[c,t]:t===null?[]:[t]);pu();let p=ml();if(n===void 0&&p!==null&&(n=(p&Fr.Open)===Fr.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[m,y]=k.useState(n?"visible":"hidden"),x=Ky(()=>{n||y("hidden")}),[b,N]=k.useState(!0),S=k.useRef([n]);Fn(()=>{b!==!1&&S.current[S.current.length-1]!==n&&(S.current.push(n),N(!1))},[S,n]);let C=k.useMemo(()=>({show:n,appear:i,initial:b}),[n,i,b]);Fn(()=>{n?y("visible"):!yl(x)&&c.current!==null&&y("hidden")},[n,x]);let M={unmount:a},z=Zt(()=>{var le;b&&N(!1),(le=e.beforeEnter)==null||le.call(e)}),te=Zt(()=>{var le;b&&N(!1),(le=e.beforeLeave)==null||le.call(e)}),F=br();return re.createElement(vl.Provider,{value:x},re.createElement(gl.Provider,{value:C},F({ourProps:{...M,as:k.Fragment,children:re.createElement(Yy,{ref:h,...M,...u,beforeEnter:z,beforeLeave:te})},theirProps:{},defaultTag:k.Fragment,features:Uy,visible:m==="visible",name:"Transition"})))}function $2(e,t){let n=k.useContext(gl)!==null,i=ml()!==null;return re.createElement(re.Fragment,null,!n&&i?re.createElement(Fd,{ref:t,...e}):re.createElement(Yy,{ref:t,...e}))}let Fd=Xn(L2),Yy=Xn(M2),Mh=Xn($2),W2=Object.assign(Fd,{Child:Mh,Root:Fd});var F2=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(F2||{}),j2=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(j2||{});let B2={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},Lh=k.createContext(null);Lh.displayName="DialogContext";function wl(e){let t=k.useContext(Lh);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,wl),n}return t}function H2(e,t){return to(t.type,B2,e,t)}let Zg=Xn(function(e,t){let n=k.useId(),{id:i=`headlessui-dialog-${n}`,open:a,onClose:u,initialFocus:c,role:f="dialog",autoFocus:h=!0,__demoMode:p=!1,unmount:m=!1,...y}=e,x=k.useRef(!1);f=function(){return f==="dialog"||f==="alertdialog"?f:(x.current||(x.current=!0,console.warn(`Invalid role [${f}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let b=ml();a===void 0&&b!==null&&(a=(b&Fr.Open)===Fr.Open);let N=k.useRef(null),S=ni(N,t),C=hu(N),M=a?0:1,[z,te]=k.useReducer(H2,{titleId:null,descriptionId:null,panelRef:k.createRef()}),F=Zt(()=>u(!1)),le=Zt(ue=>te({type:0,id:ue})),ae=pu()?M===0:!1,[U,Q]=v2(),ne={get current(){var ue;return(ue=z.panelRef.current)!=null?ue:N.current}},J=Fy(),{resolveContainers:Y}=_2({mainTreeNode:J,portals:U,defaultContainers:[ne]}),ce=b!==null?(b&Fr.Closing)===Fr.Closing:!1;PD(p||ce?!1:ae,{allowed:Zt(()=>{var ue,we;return[(we=(ue=N.current)==null?void 0:ue.closest("[data-headlessui-portal]"))!=null?we:null]}),disallowed:Zt(()=>{var ue;return[(ue=J==null?void 0:J.closest("body > *:not(#headlessui-portal-root)"))!=null?ue:null]})}),YD(ae,Y,ue=>{ue.preventDefault(),F()}),x2(ae,C==null?void 0:C.defaultView,ue=>{ue.preventDefault(),ue.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),F()}),QD(p||ce?!1:ae,C,Y),RD(ae,N,F);let[ge,R]=SD(),se=k.useMemo(()=>[{dialogState:M,close:F,setTitleId:le,unmount:m},z],[M,z,F,le,m]),Z=k.useMemo(()=>({open:M===0}),[M]),ye={ref:S,id:i,role:f,tabIndex:-1,"aria-modal":p?void 0:M===0?!0:void 0,"aria-labelledby":z.titleId,"aria-describedby":ge,unmount:m},pe=!b2(),W=jo.None;ae&&!p&&(W|=jo.RestoreFocus,W|=jo.TabLock,h&&(W|=jo.AutoFocus),pe&&(W|=jo.InitialFocus));let ie=br();return re.createElement(u2,null,re.createElement(Xg,{force:!0},re.createElement(w2,null,re.createElement(Lh.Provider,{value:se},re.createElement($y,{target:N},re.createElement(Xg,{force:!1},re.createElement(R,{slot:Z},re.createElement(Q,null,re.createElement(k2,{initialFocus:c,initialFocusFallback:N,containers:Y,features:W},re.createElement(OD,{value:F},ie({ourProps:ye,theirProps:y,slot:Z,defaultTag:K2,features:z2,visible:M===0,name:"Dialog"})))))))))))}),K2="div",z2=Hc.RenderStrategy|Hc.Static;function U2(e,t){let{transition:n=!1,open:i,...a}=e,u=ml(),c=e.hasOwnProperty("open")||u!==null,f=e.hasOwnProperty("onClose");if(!c&&!f)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!c)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!f)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!u&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(i!==void 0||n)&&!a.static?re.createElement(Gg,null,re.createElement(W2,{show:i,transition:n,unmount:a.unmount},re.createElement(Zg,{ref:t,...a}))):re.createElement(Gg,null,re.createElement(Zg,{ref:t,open:i,...a}))}let Y2="div";function V2(e,t){let n=k.useId(),{id:i=`headlessui-dialog-panel-${n}`,transition:a=!1,...u}=e,[{dialogState:c,unmount:f},h]=wl("Dialog.Panel"),p=ni(t,h.panelRef),m=k.useMemo(()=>({open:c===0}),[c]),y=Zt(C=>{C.stopPropagation()}),x={ref:p,id:i,onClick:y},b=a?Mh:k.Fragment,N=a?{unmount:f}:{},S=br();return re.createElement(b,{...N},S({ourProps:x,theirProps:u,slot:m,defaultTag:Y2,name:"Dialog.Panel"}))}let q2="div";function X2(e,t){let{transition:n=!1,...i}=e,[{dialogState:a,unmount:u}]=wl("Dialog.Backdrop"),c=k.useMemo(()=>({open:a===0}),[a]),f={ref:t,"aria-hidden":!0},h=n?Mh:k.Fragment,p=n?{unmount:u}:{},m=br();return re.createElement(h,{...p},m({ourProps:f,theirProps:i,slot:c,defaultTag:q2,name:"Dialog.Backdrop"}))}let G2="h2";function Z2(e,t){let n=k.useId(),{id:i=`headlessui-dialog-title-${n}`,...a}=e,[{dialogState:u,setTitleId:c}]=wl("Dialog.Title"),f=ni(t);k.useEffect(()=>(c(i),()=>c(null)),[i,c]);let h=k.useMemo(()=>({open:u===0}),[u]),p={ref:f,id:i};return br()({ourProps:p,theirProps:a,slot:h,defaultTag:G2,name:"Dialog.Title"})}let Q2=Xn(U2),$h=Xn(V2);Xn(X2);let J2=Xn(Z2),Vy=Object.assign(Q2,{Panel:$h,Title:J2,Description:ID});const vi=[{id:"WorkflowType",label:"WorkflowType",type:"text"},{id:"WorkflowId",label:"WorkflowId",type:"text"},{id:"RunId",label:"RunId",type:"text"},{id:"ExecutionStatus",label:"Status",type:"status"},{id:"StartTime",label:"StartTime",type:"datetime"},{id:"CloseTime",label:"CloseTime",type:"datetime"},{id:"TaskQueue",label:"TaskQueue",type:"text"}],Qg=[{id:"equals",label:"=",alternatives:["equals","is"],searchOperator:"="},{id:"notEquals",label:"!=",alternatives:["not equals","is not"],searchOperator:"!="},{id:"starts_with",label:"starts with",alternatives:["startswith","start"],searchOperator:"starts_with"},{id:"isNull",label:"is null",alternatives:["null"],searchOperator:"is null"},{id:"isNotNull",label:"is not null",alternatives:["not null"],searchOperator:"is not null"},{id:"greaterThan",label:">",alternatives:["after","greater than"],searchOperator:">"},{id:"lessThan",label:"<",alternatives:["before","less than"],searchOperator:"<"},{id:"between",label:"between",alternatives:[],searchOperator:"between"}],Gf=[{value:"Completed",color:"text-green-700 bg-green-50"},{value:"Running",color:"text-blue-700 bg-blue-50"},{value:"TimedOut",color:"text-orange-700 bg-orange-50"},{value:"Failed",color:"text-red-700 bg-red-50"},{value:"Canceled",color:"text-gray-700 bg-gray-50"},{value:"Terminated",color:"text-yellow-700 bg-yellow-50"},{value:"Continued as New",color:"text-pink-700 bg-pink-50"}],yc=[{id:"equals",label:"=",alternatives:["==","is","="]},{id:"between",label:"between",alternatives:["between"]},{id:"greater",label:">",alternatives:["gt",">"]},{id:"greaterOrEqual",label:">=",alternatives:["gte",">="]},{id:"less",label:"<",alternatives:["lt","<"]},{id:"lessOrEqual",label:"<=",alternatives:["lte","<="]}],qy=6048e5,eP=864e5,Jg=Symbol.for("constructDateFrom");function no(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&Jg in e?e[Jg](t):e instanceof Date?new e.constructor(t):new Date(t)}function Kr(e,t){return no(t||e,e)}let tP={};function xl(){return tP}function au(e,t){var f,h,p,m;const n=xl(),i=(t==null?void 0:t.weekStartsOn)??((h=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:h.weekStartsOn)??n.weekStartsOn??((m=(p=n.locale)==null?void 0:p.options)==null?void 0:m.weekStartsOn)??0,a=Kr(e,t==null?void 0:t.in),u=a.getDay(),c=(u<i?7:0)+u-i;return a.setDate(a.getDate()-c),a.setHours(0,0,0,0),a}function Uc(e,t){return au(e,{...t,weekStartsOn:1})}function Xy(e,t){const n=Kr(e,t==null?void 0:t.in),i=n.getFullYear(),a=no(n,0);a.setFullYear(i+1,0,4),a.setHours(0,0,0,0);const u=Uc(a),c=no(n,0);c.setFullYear(i,0,4),c.setHours(0,0,0,0);const f=Uc(c);return n.getTime()>=u.getTime()?i+1:n.getTime()>=f.getTime()?i:i-1}function e0(e){const t=Kr(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function nP(e,...t){const n=no.bind(null,t.find(i=>typeof i=="object"));return t.map(n)}function t0(e,t){const n=Kr(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function rP(e,t,n){const[i,a]=nP(n==null?void 0:n.in,e,t),u=t0(i),c=t0(a),f=+u-e0(u),h=+c-e0(c);return Math.round((f-h)/eP)}function iP(e,t){const n=Xy(e,t),i=no(e,0);return i.setFullYear(n,0,4),i.setHours(0,0,0,0),Uc(i)}function oP(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function aP(e){return!(!oP(e)&&typeof e!="number"||isNaN(+Kr(e)))}function sP(e,t){const n=Kr(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const uP={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},cP=(e,t,n)=>{let i;const a=uP[e];return typeof a=="string"?i=a:t===1?i=a.one:i=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function Zf(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const lP={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},fP={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dP={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},hP={date:Zf({formats:lP,defaultWidth:"full"}),time:Zf({formats:fP,defaultWidth:"full"}),dateTime:Zf({formats:dP,defaultWidth:"full"})},pP={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},mP=(e,t,n,i)=>pP[e];function Ls(e){return(t,n)=>{const i=n!=null&&n.context?String(n.context):"standalone";let a;if(i==="formatting"&&e.formattingValues){const c=e.defaultFormattingWidth||e.defaultWidth,f=n!=null&&n.width?String(n.width):c;a=e.formattingValues[f]||e.formattingValues[c]}else{const c=e.defaultWidth,f=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[f]||e.values[c]}const u=e.argumentCallback?e.argumentCallback(t):t;return a[u]}}const gP={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},vP={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},yP={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},wP={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},xP={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},bP={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},_P=(e,t)=>{const n=Number(e),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},EP={ordinalNumber:_P,era:Ls({values:gP,defaultWidth:"wide"}),quarter:Ls({values:vP,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Ls({values:yP,defaultWidth:"wide"}),day:Ls({values:wP,defaultWidth:"wide"}),dayPeriod:Ls({values:xP,defaultWidth:"wide",formattingValues:bP,defaultFormattingWidth:"wide"})};function $s(e){return(t,n={})=>{const i=n.width,a=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],u=t.match(a);if(!u)return null;const c=u[0],f=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth],h=Array.isArray(f)?TP(f,y=>y.test(c)):SP(f,y=>y.test(c));let p;p=e.valueCallback?e.valueCallback(h):h,p=n.valueCallback?n.valueCallback(p):p;const m=t.slice(c.length);return{value:p,rest:m}}}function SP(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function TP(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function NP(e){return(t,n={})=>{const i=t.match(e.matchPattern);if(!i)return null;const a=i[0],u=t.match(e.parsePattern);if(!u)return null;let c=e.valueCallback?e.valueCallback(u[0]):u[0];c=n.valueCallback?n.valueCallback(c):c;const f=t.slice(a.length);return{value:c,rest:f}}}const kP=/^(\d+)(th|st|nd|rd)?/i,IP=/\d+/i,CP={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},OP={any:[/^b/i,/^(a|c)/i]},AP={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},DP={any:[/1/i,/2/i,/3/i,/4/i]},PP={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},RP={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},MP={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},LP={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},$P={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},WP={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},FP={ordinalNumber:NP({matchPattern:kP,parsePattern:IP,valueCallback:e=>parseInt(e,10)}),era:$s({matchPatterns:CP,defaultMatchWidth:"wide",parsePatterns:OP,defaultParseWidth:"any"}),quarter:$s({matchPatterns:AP,defaultMatchWidth:"wide",parsePatterns:DP,defaultParseWidth:"any",valueCallback:e=>e+1}),month:$s({matchPatterns:PP,defaultMatchWidth:"wide",parsePatterns:RP,defaultParseWidth:"any"}),day:$s({matchPatterns:MP,defaultMatchWidth:"wide",parsePatterns:LP,defaultParseWidth:"any"}),dayPeriod:$s({matchPatterns:$P,defaultMatchWidth:"any",parsePatterns:WP,defaultParseWidth:"any"})},jP={code:"en-US",formatDistance:cP,formatLong:hP,formatRelative:mP,localize:EP,match:FP,options:{weekStartsOn:0,firstWeekContainsDate:1}};function BP(e,t){const n=Kr(e,t==null?void 0:t.in);return rP(n,sP(n))+1}function HP(e,t){const n=Kr(e,t==null?void 0:t.in),i=+Uc(n)-+iP(n);return Math.round(i/qy)+1}function Gy(e,t){var m,y,x,b;const n=Kr(e,t==null?void 0:t.in),i=n.getFullYear(),a=xl(),u=(t==null?void 0:t.firstWeekContainsDate)??((y=(m=t==null?void 0:t.locale)==null?void 0:m.options)==null?void 0:y.firstWeekContainsDate)??a.firstWeekContainsDate??((b=(x=a.locale)==null?void 0:x.options)==null?void 0:b.firstWeekContainsDate)??1,c=no((t==null?void 0:t.in)||e,0);c.setFullYear(i+1,0,u),c.setHours(0,0,0,0);const f=au(c,t),h=no((t==null?void 0:t.in)||e,0);h.setFullYear(i,0,u),h.setHours(0,0,0,0);const p=au(h,t);return+n>=+f?i+1:+n>=+p?i:i-1}function KP(e,t){var f,h,p,m;const n=xl(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(p=n.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??1,a=Gy(e,t),u=no((t==null?void 0:t.in)||e,0);return u.setFullYear(a,0,i),u.setHours(0,0,0,0),au(u,t)}function zP(e,t){const n=Kr(e,t==null?void 0:t.in),i=+au(n,t)-+KP(n,t);return Math.round(i/qy)+1}function Ct(e,t){const n=e<0?"-":"",i=Math.abs(e).toString().padStart(t,"0");return n+i}const Yi={y(e,t){const n=e.getFullYear(),i=n>0?n:1-n;return Ct(t==="yy"?i%100:i,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Ct(n+1,2)},d(e,t){return Ct(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Ct(e.getHours()%12||12,t.length)},H(e,t){return Ct(e.getHours(),t.length)},m(e,t){return Ct(e.getMinutes(),t.length)},s(e,t){return Ct(e.getSeconds(),t.length)},S(e,t){const n=t.length,i=e.getMilliseconds(),a=Math.trunc(i*Math.pow(10,n-3));return Ct(a,t.length)}},Da={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},n0={G:function(e,t,n){const i=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});case"GGGG":default:return n.era(i,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const i=e.getFullYear(),a=i>0?i:1-i;return n.ordinalNumber(a,{unit:"year"})}return Yi.y(e,t)},Y:function(e,t,n,i){const a=Gy(e,i),u=a>0?a:1-a;if(t==="YY"){const c=u%100;return Ct(c,2)}return t==="Yo"?n.ordinalNumber(u,{unit:"year"}):Ct(u,t.length)},R:function(e,t){const n=Xy(e);return Ct(n,t.length)},u:function(e,t){const n=e.getFullYear();return Ct(n,t.length)},Q:function(e,t,n){const i=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return Ct(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,t,n){const i=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return Ct(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,t,n){const i=e.getMonth();switch(t){case"M":case"MM":return Yi.M(e,t);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(e,t,n){const i=e.getMonth();switch(t){case"L":return String(i+1);case"LL":return Ct(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(e,t,n,i){const a=zP(e,i);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):Ct(a,t.length)},I:function(e,t,n){const i=HP(e);return t==="Io"?n.ordinalNumber(i,{unit:"week"}):Ct(i,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Yi.d(e,t)},D:function(e,t,n){const i=BP(e);return t==="Do"?n.ordinalNumber(i,{unit:"dayOfYear"}):Ct(i,t.length)},E:function(e,t,n){const i=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});case"EEEE":default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(e,t,n,i){const a=e.getDay(),u=(a-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(u);case"ee":return Ct(u,2);case"eo":return n.ordinalNumber(u,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,i){const a=e.getDay(),u=(a-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(u);case"cc":return Ct(u,t.length);case"co":return n.ordinalNumber(u,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const i=e.getDay(),a=i===0?7:i;switch(t){case"i":return String(a);case"ii":return Ct(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});case"iiii":default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const i=e.getHours();let a;switch(i===12?a=Da.noon:i===0?a=Da.midnight:a=i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const i=e.getHours();let a;switch(i>=17?a=Da.evening:i>=12?a=Da.afternoon:i>=4?a=Da.morning:a=Da.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let i=e.getHours()%12;return i===0&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return Yi.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Yi.H(e,t)},K:function(e,t,n){const i=e.getHours()%12;return t==="Ko"?n.ordinalNumber(i,{unit:"hour"}):Ct(i,t.length)},k:function(e,t,n){let i=e.getHours();return i===0&&(i=24),t==="ko"?n.ordinalNumber(i,{unit:"hour"}):Ct(i,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Yi.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Yi.s(e,t)},S:function(e,t){return Yi.S(e,t)},X:function(e,t,n){const i=e.getTimezoneOffset();if(i===0)return"Z";switch(t){case"X":return i0(i);case"XXXX":case"XX":return Fo(i);case"XXXXX":case"XXX":default:return Fo(i,":")}},x:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"x":return i0(i);case"xxxx":case"xx":return Fo(i);case"xxxxx":case"xxx":default:return Fo(i,":")}},O:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+r0(i,":");case"OOOO":default:return"GMT"+Fo(i,":")}},z:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+r0(i,":");case"zzzz":default:return"GMT"+Fo(i,":")}},t:function(e,t,n){const i=Math.trunc(+e/1e3);return Ct(i,t.length)},T:function(e,t,n){return Ct(+e,t.length)}};function r0(e,t=""){const n=e>0?"-":"+",i=Math.abs(e),a=Math.trunc(i/60),u=i%60;return u===0?n+String(a):n+String(a)+t+Ct(u,2)}function i0(e,t){return e%60===0?(e>0?"-":"+")+Ct(Math.abs(e)/60,2):Fo(e,t)}function Fo(e,t=""){const n=e>0?"-":"+",i=Math.abs(e),a=Ct(Math.trunc(i/60),2),u=Ct(i%60,2);return n+a+t+u}const o0=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Zy=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},UP=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],i=n[1],a=n[2];if(!a)return o0(e,t);let u;switch(i){case"P":u=t.dateTime({width:"short"});break;case"PP":u=t.dateTime({width:"medium"});break;case"PPP":u=t.dateTime({width:"long"});break;case"PPPP":default:u=t.dateTime({width:"full"});break}return u.replace("{{date}}",o0(i,t)).replace("{{time}}",Zy(a,t))},YP={p:Zy,P:UP},VP=/^D+$/,qP=/^Y+$/,XP=["D","DD","YY","YYYY"];function GP(e){return VP.test(e)}function ZP(e){return qP.test(e)}function QP(e,t,n){const i=JP(e,t,n);if(console.warn(i),XP.includes(e))throw new RangeError(i)}function JP(e,t,n){const i=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${i} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const eR=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,tR=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,nR=/^'([^]*?)'?$/,rR=/''/g,iR=/[a-zA-Z]/;function Wn(e,t,n){var m,y,x,b;const i=xl(),a=i.locale??jP,u=i.firstWeekContainsDate??((y=(m=i.locale)==null?void 0:m.options)==null?void 0:y.firstWeekContainsDate)??1,c=i.weekStartsOn??((b=(x=i.locale)==null?void 0:x.options)==null?void 0:b.weekStartsOn)??0,f=Kr(e,n==null?void 0:n.in);if(!aP(f))throw new RangeError("Invalid time value");let h=t.match(tR).map(N=>{const S=N[0];if(S==="p"||S==="P"){const C=YP[S];return C(N,a.formatLong)}return N}).join("").match(eR).map(N=>{if(N==="''")return{isToken:!1,value:"'"};const S=N[0];if(S==="'")return{isToken:!1,value:oR(N)};if(n0[S])return{isToken:!0,value:N};if(S.match(iR))throw new RangeError("Format string contains an unescaped latin alphabet character `"+S+"`");return{isToken:!1,value:N}});a.localize.preprocessor&&(h=a.localize.preprocessor(f,h));const p={firstWeekContainsDate:u,weekStartsOn:c,locale:a};return h.map(N=>{if(!N.isToken)return N.value;const S=N.value;(ZP(S)||GP(S))&&QP(S,t,String(e));const C=n0[S[0]];return C(f,S,a.localize,p)}).join("")}function oR(e){const t=e.match(nR);return t?t[1].replace(rR,"'"):e}const aR=(e,t,n,i)=>{if(n==="length"||n==="prototype"||n==="arguments"||n==="caller")return;const a=Object.getOwnPropertyDescriptor(e,n),u=Object.getOwnPropertyDescriptor(t,n);!sR(a,u)&&i||Object.defineProperty(e,n,u)},sR=function(e,t){return e===void 0||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},uR=(e,t)=>{const n=Object.getPrototypeOf(t);n!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,n)},cR=(e,t)=>`/* Wrapped ${e}*/
${t}`,lR=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),fR=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),dR=(e,t,n)=>{const i=n===""?"":`with ${n.trim()}() `,a=cR.bind(null,i,t.toString());Object.defineProperty(a,"name",fR),Object.defineProperty(e,"toString",{...lR,value:a})},hR=(e,t,{ignoreNonConfigurable:n=!1}={})=>{const{name:i}=e;for(const a of Reflect.ownKeys(t))aR(e,t,a,n);return uR(e,t),dR(e,t,i),e};var pR=hR,jd={exports:{}},mR=()=>{const e={};return e.promise=new Promise((t,n)=>{e.resolve=t,e.reject=n}),e};(function(e,t){var n=Lr&&Lr.__awaiter||function(c,f,h,p){return new(h||(h=Promise))(function(m,y){function x(S){try{N(p.next(S))}catch(C){y(C)}}function b(S){try{N(p.throw(S))}catch(C){y(C)}}function N(S){S.done?m(S.value):new h(function(C){C(S.value)}).then(x,b)}N((p=p.apply(c,f||[])).next())})},i=Lr&&Lr.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(mR);function u(c,f="maxAge"){let h,p,m;const y=()=>n(this,void 0,void 0,function*(){if(h!==void 0)return;const N=S=>n(this,void 0,void 0,function*(){m=a.default();const C=S[1][f]-Date.now();if(C<=0){c.delete(S[0]),m.resolve();return}return h=S[0],p=setTimeout(()=>{c.delete(S[0]),m&&m.resolve()},C),typeof p.unref=="function"&&p.unref(),m.promise});try{for(const S of c)yield N(S)}catch{}h=void 0}),x=()=>{h=void 0,p!==void 0&&(clearTimeout(p),p=void 0),m!==void 0&&(m.reject(void 0),m=void 0)},b=c.set.bind(c);return c.set=(N,S)=>{c.has(N)&&c.delete(N);const C=b(N,S);return h&&h===N&&x(),y(),C},y(),c}t.default=u,e.exports=u,e.exports.default=u})(jd,jd.exports);var gR=jd.exports;const vR=pR,yR=gR,Qf=new WeakMap,Qy=new WeakMap,Yc=(e,{cacheKey:t,cache:n=new Map,maxAge:i}={})=>{typeof i=="number"&&yR(n);const a=function(...u){const c=t?t(u):u[0],f=n.get(c);if(f)return f.data;const h=e.apply(this,u);return n.set(c,{data:h,maxAge:i?Date.now()+i:Number.POSITIVE_INFINITY}),h};return vR(a,e,{ignoreNonConfigurable:!0}),Qy.set(a,n),a};Yc.decorator=(e={})=>(t,n,i)=>{const a=t[n];if(typeof a!="function")throw new TypeError("The decorated value must be a function");delete i.value,delete i.writable,i.get=function(){if(!Qf.has(this)){const u=Yc(a,e);return Qf.set(this,u),u}return Qf.get(this)}};Yc.clear=e=>{const t=Qy.get(e);if(!t)throw new TypeError("Can't clear a function that was not memoized!");if(typeof t.clear!="function")throw new TypeError("The cache Map can't be cleared!");t.clear()};var wR=Yc;const Jy=nh(wR);function xR(e){return typeof e=="string"}function bR(e,t,n){return n.indexOf(e)===t}function _R(e){return e.toLowerCase()===e}function a0(e){return e.indexOf(",")===-1?e:e.split(",")}function Bd(e){if(!e)return e;if(e==="C"||e==="posix"||e==="POSIX")return"en-US";if(e.indexOf(".")!==-1){var t=e.split(".")[0],n=t===void 0?"":t;return Bd(n)}if(e.indexOf("@")!==-1){var i=e.split("@")[0],n=i===void 0?"":i;return Bd(n)}if(e.indexOf("-")===-1||!_R(e))return e;var a=e.split("-"),u=a[0],c=a[1],f=c===void 0?"":c;return"".concat(u,"-").concat(f.toUpperCase())}function ER(e){var t=e===void 0?{}:e,n=t.useFallbackLocale,i=n===void 0?!0:n,a=t.fallbackLocale,u=a===void 0?"en-US":a,c=[];if(typeof navigator<"u"){for(var f=navigator.languages||[],h=[],p=0,m=f;p<m.length;p++){var y=m[p];h=h.concat(a0(y))}var x=navigator.language,b=x&&a0(x);c=c.concat(h,b)}return i&&c.push(u),c.filter(xR).map(Bd).filter(bR)}var SR=Jy(ER,{cacheKey:JSON.stringify});function TR(e){return SR(e)[0]||null}var ew=Jy(TR,{cacheKey:JSON.stringify});function ki(e,t,n){return function(a,u){u===void 0&&(u=n);var c=e(a)+u;return t(c)}}function mu(e){return function(n){return new Date(e(n).getTime()-1)}}function gu(e,t){return function(i){return[e(i),t(i)]}}function Kt(e){if(e instanceof Date)return e.getFullYear();if(typeof e=="number")return e;var t=parseInt(e,10);if(typeof e=="string"&&!isNaN(t))return t;throw new Error("Failed to get year from date: ".concat(e,"."))}function io(e){if(e instanceof Date)return e.getMonth();throw new Error("Failed to get month from date: ".concat(e,"."))}function bl(e){if(e instanceof Date)return e.getDate();throw new Error("Failed to get year from date: ".concat(e,"."))}function Xa(e){var t=Kt(e),n=t+(-t+1)%100,i=new Date;return i.setFullYear(n,0,1),i.setHours(0,0,0,0),i}var NR=ki(Kt,Xa,-100),tw=ki(Kt,Xa,100),Wh=mu(tw),kR=ki(Kt,Wh,-100),nw=gu(Xa,Wh);function oo(e){var t=Kt(e),n=t+(-t+1)%10,i=new Date;return i.setFullYear(n,0,1),i.setHours(0,0,0,0),i}var rw=ki(Kt,oo,-10),Fh=ki(Kt,oo,10),_l=mu(Fh),iw=ki(Kt,_l,-10),ow=gu(oo,_l);function Ga(e){var t=Kt(e),n=new Date;return n.setFullYear(t,0,1),n.setHours(0,0,0,0),n}var aw=ki(Kt,Ga,-1),jh=ki(Kt,Ga,1),El=mu(jh),sw=ki(Kt,El,-1),IR=gu(Ga,El);function Bh(e,t){return function(i,a){a===void 0&&(a=t);var u=Kt(i),c=io(i)+a,f=new Date;return f.setFullYear(u,c,1),f.setHours(0,0,0,0),e(f)}}function ta(e){var t=Kt(e),n=io(e),i=new Date;return i.setFullYear(t,n,1),i.setHours(0,0,0,0),i}var uw=Bh(ta,-1),Hh=Bh(ta,1),vu=mu(Hh),cw=Bh(vu,-1),CR=gu(ta,vu);function OR(e,t){return function(i,a){a===void 0&&(a=t);var u=Kt(i),c=io(i),f=bl(i)+a,h=new Date;return h.setFullYear(u,c,f),h.setHours(0,0,0,0),e(h)}}function yu(e){var t=Kt(e),n=io(e),i=bl(e),a=new Date;return a.setFullYear(t,n,i),a.setHours(0,0,0,0),a}var AR=OR(yu,1),Kh=mu(AR),DR=gu(yu,Kh);function lw(e){return bl(vu(e))}var En={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},PR={gregory:["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],hebrew:["he","he-IL"],islamic:["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"]},zh=[0,1,2,3,4,5,6],Jf=new Map;function RR(e){return function(n,i){var a=n||ew();Jf.has(a)||Jf.set(a,new Map);var u=Jf.get(a);return u.has(e)||u.set(e,new Intl.DateTimeFormat(a||void 0,e).format),u.get(e)(i)}}function MR(e){var t=new Date(e);return new Date(t.setHours(12))}function na(e){return function(t,n){return RR(e)(t,MR(n))}}var LR={day:"numeric"},$R={day:"numeric",month:"long",year:"numeric"},WR={month:"long"},FR={month:"long",year:"numeric"},jR={weekday:"short"},BR={weekday:"long"},HR={year:"numeric"},KR=na(LR),zR=na($R),UR=na(WR),fw=na(FR),YR=na(jR),VR=na(BR),Sl=na(HR),qR=zh[0],XR=zh[5],s0=zh[6];function su(e,t){t===void 0&&(t=En.ISO_8601);var n=e.getDay();switch(t){case En.ISO_8601:return(n+6)%7;case En.ISLAMIC:return(n+1)%7;case En.HEBREW:case En.GREGORY:return n;default:throw new Error("Unsupported calendar type.")}}function GR(e){var t=Xa(e);return Kt(t)}function ZR(e){var t=oo(e);return Kt(t)}function Hd(e,t){t===void 0&&(t=En.ISO_8601);var n=Kt(e),i=io(e),a=e.getDate()-su(e,t);return new Date(n,i,a)}function QR(e,t){t===void 0&&(t=En.ISO_8601);var n=t===En.GREGORY?En.GREGORY:En.ISO_8601,i=Hd(e,t),a=Kt(e)+1,u,c;do u=new Date(a,0,n===En.ISO_8601?4:1),c=Hd(u,t),a-=1;while(e<c);return Math.round((i.getTime()-c.getTime())/(864e5*7))+1}function qo(e,t){switch(e){case"century":return Xa(t);case"decade":return oo(t);case"year":return Ga(t);case"month":return ta(t);case"day":return yu(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function JR(e,t){switch(e){case"century":return NR(t);case"decade":return rw(t);case"year":return aw(t);case"month":return uw(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function dw(e,t){switch(e){case"century":return tw(t);case"decade":return Fh(t);case"year":return jh(t);case"month":return Hh(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function eM(e,t){switch(e){case"decade":return rw(t,-100);case"year":return aw(t,-10);case"month":return uw(t,-12);default:throw new Error("Invalid rangeType: ".concat(e))}}function tM(e,t){switch(e){case"decade":return Fh(t,100);case"year":return jh(t,10);case"month":return Hh(t,12);default:throw new Error("Invalid rangeType: ".concat(e))}}function hw(e,t){switch(e){case"century":return Wh(t);case"decade":return _l(t);case"year":return El(t);case"month":return vu(t);case"day":return Kh(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function nM(e,t){switch(e){case"century":return kR(t);case"decade":return iw(t);case"year":return sw(t);case"month":return cw(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function rM(e,t){switch(e){case"decade":return iw(t,-100);case"year":return sw(t,-10);case"month":return cw(t,-12);default:throw new Error("Invalid rangeType: ".concat(e))}}function u0(e,t){switch(e){case"century":return nw(t);case"decade":return ow(t);case"year":return IR(t);case"month":return CR(t);case"day":return DR(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function iM(e,t,n){var i=[t,n].sort(function(a,u){return a.getTime()-u.getTime()});return[qo(e,i[0]),hw(e,i[1])]}function pw(e,t,n){return n.map(function(i){return(t||Sl)(e,i)}).join("  ")}function oM(e,t,n){return pw(e,t,nw(n))}function mw(e,t,n){return pw(e,t,ow(n))}function aM(e){return e.getDay()===new Date().getDay()}function gw(e,t){t===void 0&&(t=En.ISO_8601);var n=e.getDay();switch(t){case En.ISLAMIC:case En.HEBREW:return n===XR||n===s0;case En.ISO_8601:case En.GREGORY:return n===s0||n===qR;default:throw new Error("Unsupported calendar type.")}}var Qr="react-calendar__navigation";function sM(e){var t=e.activeStartDate,n=e.drillUp,i=e.formatMonthYear,a=i===void 0?fw:i,u=e.formatYear,c=u===void 0?Sl:u,f=e.locale,h=e.maxDate,p=e.minDate,m=e.navigationAriaLabel,y=m===void 0?"":m,x=e.navigationAriaLive,b=e.navigationLabel,N=e.next2AriaLabel,S=N===void 0?"":N,C=e.next2Label,M=C===void 0?"":C,z=e.nextAriaLabel,te=z===void 0?"":z,F=e.nextLabel,le=F===void 0?"":F,ae=e.prev2AriaLabel,U=ae===void 0?"":ae,Q=e.prev2Label,ne=Q===void 0?"":Q,J=e.prevAriaLabel,Y=J===void 0?"":J,ce=e.prevLabel,ge=ce===void 0?"":ce,R=e.setActiveStartDate,se=e.showDoubleView,Z=e.view,ye=e.views,pe=ye.indexOf(Z)>0,W=Z!=="century",ie=JR(Z,t),ue=W?eM(Z,t):void 0,we=dw(Z,t),ke=W?tM(Z,t):void 0,Me=function(){if(ie.getFullYear()<0)return!0;var Xe=nM(Z,t);return p&&p>=Xe}(),Re=W&&function(){if(ue.getFullYear()<0)return!0;var Xe=rM(Z,t);return p&&p>=Xe}(),je=h&&h<we,Ye=W&&h&&h<ke;function qe(){R(ie,"prev")}function Se(){R(ue,"prev2")}function rt(){R(we,"next")}function xt(){R(ke,"next2")}function He(Xe){var it=function(){switch(Z){case"century":return oM(f,c,Xe);case"decade":return mw(f,c,Xe);case"year":return c(f,Xe);case"month":return a(f,Xe);default:throw new Error("Invalid view: ".concat(Z,"."))}}();return b?b({date:Xe,label:it,locale:f||ew()||void 0,view:Z}):it}function Tt(){var Xe="".concat(Qr,"__label");return _.jsxs("button",{"aria-label":y,"aria-live":x,className:Xe,disabled:!pe,onClick:n,style:{flexGrow:1},type:"button",children:[_.jsx("span",{className:"".concat(Xe,"__labelText ").concat(Xe,"__labelText--from"),children:He(t)}),se?_.jsxs(_.Fragment,{children:[_.jsx("span",{className:"".concat(Xe,"__divider"),children:"  "}),_.jsx("span",{className:"".concat(Xe,"__labelText ").concat(Xe,"__labelText--to"),children:He(we)})]}):null]})}return _.jsxs("div",{className:Qr,children:[ne!==null&&W?_.jsx("button",{"aria-label":U,className:"".concat(Qr,"__arrow ").concat(Qr,"__prev2-button"),disabled:Re,onClick:Se,type:"button",children:ne}):null,ge!==null&&_.jsx("button",{"aria-label":Y,className:"".concat(Qr,"__arrow ").concat(Qr,"__prev-button"),disabled:Me,onClick:qe,type:"button",children:ge}),Tt(),le!==null&&_.jsx("button",{"aria-label":te,className:"".concat(Qr,"__arrow ").concat(Qr,"__next-button"),disabled:je,onClick:rt,type:"button",children:le}),M!==null&&W?_.jsx("button",{"aria-label":S,className:"".concat(Qr,"__arrow ").concat(Qr,"__next2-button"),disabled:Ye,onClick:xt,type:"button",children:M}):null]})}var La=function(){return La=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},La.apply(this,arguments)},uM=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n};function c0(e){return"".concat(e,"%")}function Uh(e){var t=e.children,n=e.className,i=e.count,a=e.direction,u=e.offset,c=e.style,f=e.wrap,h=uM(e,["children","className","count","direction","offset","style","wrap"]);return _.jsx("div",La({className:n,style:La({display:"flex",flexDirection:a,flexWrap:f?"wrap":"nowrap"},c)},h,{children:k.Children.map(t,function(p,m){var y=u&&m===0?c0(100*u/i):null;return k.cloneElement(p,La(La({},p.props),{style:{flexBasis:c0(100/i),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:y,marginInlineStart:y,marginInlineEnd:0}}))})}))}function cM(e,t,n){return t&&t>e?t:n&&n<e?n:e}function uu(e,t){return t[0]<=e&&t[1]>=e}function lM(e,t){return e[0]<=t[0]&&e[1]>=t[1]}function vw(e,t){return uu(e[0],t)||uu(e[1],t)}function l0(e,t,n){var i=vw(t,e),a=[];if(i){a.push(n);var u=uu(e[0],t),c=uu(e[1],t);u&&a.push("".concat(n,"Start")),c&&a.push("".concat(n,"End")),u&&c&&a.push("".concat(n,"BothEnds"))}return a}function fM(e){return Array.isArray(e)?e[0]!==null&&e[1]!==null:e!==null}function dM(e){if(!e)throw new Error("args is required");var t=e.value,n=e.date,i=e.hover,a="react-calendar__tile",u=[a];if(!n)return u;var c=new Date,f=function(){if(Array.isArray(n))return n;var b=e.dateType;if(!b)throw new Error("dateType is required when date is not an array of two dates");return u0(b,n)}();if(uu(c,f)&&u.push("".concat(a,"--now")),!t||!fM(t))return u;var h=function(){if(Array.isArray(t))return t;var b=e.valueType;if(!b)throw new Error("valueType is required when value is not an array of two dates");return u0(b,t)}();lM(h,f)?u.push("".concat(a,"--active")):vw(h,f)&&u.push("".concat(a,"--hasActive"));var p=l0(h,f,"".concat(a,"--range"));u.push.apply(u,p);var m=Array.isArray(t)?t:[t];if(i&&m.length===1){var y=i>h[0]?[h[0],i]:[i,h[0]],x=l0(y,f,"".concat(a,"--hover"));u.push.apply(u,x)}return u}function Tl(e){for(var t=e.className,n=e.count,i=n===void 0?3:n,a=e.dateTransform,u=e.dateType,c=e.end,f=e.hover,h=e.offset,p=e.renderTile,m=e.start,y=e.step,x=y===void 0?1:y,b=e.value,N=e.valueType,S=[],C=m;C<=c;C+=x){var M=a(C);S.push(p({classes:dM({date:M,dateType:u,hover:f,value:b,valueType:N}),date:M}))}return _.jsx(Uh,{className:t,count:i,offset:h,wrap:!0,children:S})}function Nl(e){var t=e.activeStartDate,n=e.children,i=e.classes,a=e.date,u=e.formatAbbr,c=e.locale,f=e.maxDate,h=e.maxDateTransform,p=e.minDate,m=e.minDateTransform,y=e.onClick,x=e.onMouseOver,b=e.style,N=e.tileClassName,S=e.tileContent,C=e.tileDisabled,M=e.view,z=k.useMemo(function(){var F={activeStartDate:t,date:a,view:M};return typeof N=="function"?N(F):N},[t,a,N,M]),te=k.useMemo(function(){var F={activeStartDate:t,date:a,view:M};return typeof S=="function"?S(F):S},[t,a,S,M]);return _.jsxs("button",{className:yr(i,z),disabled:p&&m(p)>a||f&&h(f)<a||(C==null?void 0:C({activeStartDate:t,date:a,view:M})),onClick:y?function(F){return y(a,F)}:void 0,onFocus:x?function(){return x(a)}:void 0,onMouseOver:x?function(){return x(a)}:void 0,style:b,type:"button",children:[u?_.jsx("abbr",{"aria-label":u(c,a),children:n}):n,te]})}var Kd=function(){return Kd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Kd.apply(this,arguments)},hM=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n},f0="react-calendar__century-view__decades__decade";function pM(e){var t=e.classes,n=t===void 0?[]:t,i=e.currentCentury,a=e.formatYear,u=a===void 0?Sl:a,c=hM(e,["classes","currentCentury","formatYear"]),f=c.date,h=c.locale,p=[];return n&&p.push.apply(p,n),p.push(f0),Xa(f).getFullYear()!==i&&p.push("".concat(f0,"--neighboringCentury")),_.jsx(Nl,Kd({},c,{classes:p,maxDateTransform:_l,minDateTransform:oo,view:"century",children:mw(h,u,f)}))}var zd=function(){return zd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},zd.apply(this,arguments)},d0=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n};function mM(e){var t=e.activeStartDate,n=e.hover,i=e.showNeighboringCentury,a=e.value,u=e.valueType,c=d0(e,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),f=GR(t),h=f+(i?119:99);return _.jsx(Tl,{className:"react-calendar__century-view__decades",dateTransform:oo,dateType:"decade",end:h,hover:n,renderTile:function(p){var m=p.date,y=d0(p,["date"]);return _.jsx(pM,zd({},c,y,{activeStartDate:t,currentCentury:f,date:m}),m.getTime())},start:f,step:10,value:a,valueType:u})}var Ud=function(){return Ud=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Ud.apply(this,arguments)};function gM(e){function t(){return _.jsx(mM,Ud({},e))}return _.jsx("div",{className:"react-calendar__century-view",children:t()})}var Yd=function(){return Yd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Yd.apply(this,arguments)},vM=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n},h0="react-calendar__decade-view__years__year";function yM(e){var t=e.classes,n=t===void 0?[]:t,i=e.currentDecade,a=e.formatYear,u=a===void 0?Sl:a,c=vM(e,["classes","currentDecade","formatYear"]),f=c.date,h=c.locale,p=[];return n&&p.push.apply(p,n),p.push(h0),oo(f).getFullYear()!==i&&p.push("".concat(h0,"--neighboringDecade")),_.jsx(Nl,Yd({},c,{classes:p,maxDateTransform:El,minDateTransform:Ga,view:"decade",children:u(h,f)}))}var Vd=function(){return Vd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Vd.apply(this,arguments)},p0=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n};function wM(e){var t=e.activeStartDate,n=e.hover,i=e.showNeighboringDecade,a=e.value,u=e.valueType,c=p0(e,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),f=ZR(t),h=f+(i?11:9);return _.jsx(Tl,{className:"react-calendar__decade-view__years",dateTransform:Ga,dateType:"year",end:h,hover:n,renderTile:function(p){var m=p.date,y=p0(p,["date"]);return _.jsx(yM,Vd({},c,y,{activeStartDate:t,currentDecade:f,date:m}),m.getTime())},start:f,value:a,valueType:u})}var qd=function(){return qd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},qd.apply(this,arguments)};function xM(e){function t(){return _.jsx(wM,qd({},e))}return _.jsx("div",{className:"react-calendar__decade-view",children:t()})}var Xd=function(){return Xd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Xd.apply(this,arguments)},bM=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n},m0=function(e,t,n){if(n||arguments.length===2)for(var i=0,a=t.length,u;i<a;i++)(u||!(i in t))&&(u||(u=Array.prototype.slice.call(t,0,i)),u[i]=t[i]);return e.concat(u||Array.prototype.slice.call(t))},_M="react-calendar__year-view__months__month";function EM(e){var t=e.classes,n=t===void 0?[]:t,i=e.formatMonth,a=i===void 0?UR:i,u=e.formatMonthYear,c=u===void 0?fw:u,f=bM(e,["classes","formatMonth","formatMonthYear"]),h=f.date,p=f.locale;return _.jsx(Nl,Xd({},f,{classes:m0(m0([],n,!0),[_M],!1),formatAbbr:c,maxDateTransform:vu,minDateTransform:ta,view:"year",children:a(p,h)}))}var Gd=function(){return Gd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Gd.apply(this,arguments)},g0=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n};function SM(e){var t=e.activeStartDate,n=e.hover,i=e.value,a=e.valueType,u=g0(e,["activeStartDate","hover","value","valueType"]),c=0,f=11,h=Kt(t);return _.jsx(Tl,{className:"react-calendar__year-view__months",dateTransform:function(p){var m=new Date;return m.setFullYear(h,p,1),ta(m)},dateType:"month",end:f,hover:n,renderTile:function(p){var m=p.date,y=g0(p,["date"]);return _.jsx(EM,Gd({},u,y,{activeStartDate:t,date:m}),m.getTime())},start:c,value:i,valueType:a})}var Zd=function(){return Zd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Zd.apply(this,arguments)};function TM(e){function t(){return _.jsx(SM,Zd({},e))}return _.jsx("div",{className:"react-calendar__year-view",children:t()})}var Qd=function(){return Qd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Qd.apply(this,arguments)},NM=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n},ed="react-calendar__month-view__days__day";function kM(e){var t=e.calendarType,n=e.classes,i=n===void 0?[]:n,a=e.currentMonthIndex,u=e.formatDay,c=u===void 0?KR:u,f=e.formatLongDate,h=f===void 0?zR:f,p=NM(e,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),m=p.date,y=p.locale,x=[];return i&&x.push.apply(x,i),x.push(ed),gw(m,t)&&x.push("".concat(ed,"--weekend")),m.getMonth()!==a&&x.push("".concat(ed,"--neighboringMonth")),_.jsx(Nl,Qd({},p,{classes:x,formatAbbr:h,maxDateTransform:Kh,minDateTransform:yu,view:"month",children:c(y,m)}))}var Jd=function(){return Jd=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Jd.apply(this,arguments)},v0=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n};function IM(e){var t=e.activeStartDate,n=e.calendarType,i=e.hover,a=e.showFixedNumberOfWeeks,u=e.showNeighboringMonth,c=e.value,f=e.valueType,h=v0(e,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),p=Kt(t),m=io(t),y=a||u,x=su(t,n),b=y?0:x,N=(y?-x:0)+1,S=function(){if(a)return N+6*7-1;var C=lw(t);if(u){var M=new Date;M.setFullYear(p,m,C),M.setHours(0,0,0,0);var z=7-su(M,n)-1;return C+z}return C}();return _.jsx(Tl,{className:"react-calendar__month-view__days",count:7,dateTransform:function(C){var M=new Date;return M.setFullYear(p,m,C),yu(M)},dateType:"day",hover:i,end:S,renderTile:function(C){var M=C.date,z=v0(C,["date"]);return _.jsx(kM,Jd({},h,z,{activeStartDate:t,calendarType:n,currentMonthIndex:m,date:M}),M.getTime())},offset:b,start:N,value:c,valueType:f})}var yw="react-calendar__month-view__weekdays",td="".concat(yw,"__weekday");function CM(e){for(var t=e.calendarType,n=e.formatShortWeekday,i=n===void 0?YR:n,a=e.formatWeekday,u=a===void 0?VR:a,c=e.locale,f=e.onMouseLeave,h=new Date,p=ta(h),m=Kt(p),y=io(p),x=[],b=1;b<=7;b+=1){var N=new Date(m,y,b-su(p,t)),S=u(c,N);x.push(_.jsx("div",{className:yr(td,aM(N)&&"".concat(td,"--current"),gw(N,t)&&"".concat(td,"--weekend")),children:_.jsx("abbr",{"aria-label":S,title:S,children:i(c,N).replace(".","")})},b))}return _.jsx(Uh,{className:yw,count:7,onFocus:f,onMouseOver:f,children:x})}var Vc=function(){return Vc=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Vc.apply(this,arguments)},y0=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n},w0="react-calendar__tile";function OM(e){var t=e.onClickWeekNumber,n=e.weekNumber,i=_.jsx("span",{children:n});if(t){var a=e.date,u=e.onClickWeekNumber,c=e.weekNumber,f=y0(e,["date","onClickWeekNumber","weekNumber"]);return _.jsx("button",Vc({},f,{className:w0,onClick:function(h){return u(c,a,h)},type:"button",children:i}))}else{e.date,e.onClickWeekNumber,e.weekNumber;var f=y0(e,["date","onClickWeekNumber","weekNumber"]);return _.jsx("div",Vc({},f,{className:w0,children:i}))}}function AM(e){var t=e.activeStartDate,n=e.calendarType,i=e.onClickWeekNumber,a=e.onMouseLeave,u=e.showFixedNumberOfWeeks,c=function(){if(u)return 6;var p=lw(t),m=su(t,n),y=p-(7-m);return 1+Math.ceil(y/7)}(),f=function(){for(var p=Kt(t),m=io(t),y=bl(t),x=[],b=0;b<c;b+=1)x.push(Hd(new Date(p,m,y+b*7),n));return x}(),h=f.map(function(p){return QR(p,n)});return _.jsx(Uh,{className:"react-calendar__month-view__weekNumbers",count:c,direction:"column",onFocus:a,onMouseOver:a,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0},children:h.map(function(p,m){var y=f[m];if(!y)throw new Error("date is not defined");return _.jsx(OM,{date:y,onClickWeekNumber:i,weekNumber:p},p)})})}var eh=function(){return eh=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},eh.apply(this,arguments)},DM=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n};function PM(e){if(e)for(var t=0,n=Object.entries(PR);t<n.length;t++){var i=n[t],a=i[0],u=i[1];if(u.includes(e))return a}return En.ISO_8601}function RM(e){var t=e.activeStartDate,n=e.locale,i=e.onMouseLeave,a=e.showFixedNumberOfWeeks,u=e.calendarType,c=u===void 0?PM(n):u,f=e.formatShortWeekday,h=e.formatWeekday,p=e.onClickWeekNumber,m=e.showWeekNumbers,y=DM(e,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function x(){return _.jsx(CM,{calendarType:c,formatShortWeekday:f,formatWeekday:h,locale:n,onMouseLeave:i})}function b(){return m?_.jsx(AM,{activeStartDate:t,calendarType:c,onClickWeekNumber:p,onMouseLeave:i,showFixedNumberOfWeeks:a}):null}function N(){return _.jsx(IM,eh({calendarType:c},y))}var S="react-calendar__month-view";return _.jsx("div",{className:yr(S,m?"".concat(S,"--weekNumbers"):""),children:_.jsxs("div",{style:{display:"flex",alignItems:"flex-end"},children:[b(),_.jsxs("div",{style:{flexGrow:1,width:"100%"},children:[x(),N()]})]})})}var $a=function(){return $a=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},$a.apply(this,arguments)},wc="react-calendar",kc=["century","decade","year","month"],MM=["decade","year","month","day"],Yh=new Date;Yh.setFullYear(1,0,1);Yh.setHours(0,0,0,0);var LM=new Date(864e13);function zs(e){return e instanceof Date?e:new Date(e)}function ww(e,t){return kc.slice(kc.indexOf(e),kc.indexOf(t)+1)}function $M(e,t,n){var i=ww(t,n);return i.indexOf(e)!==-1}function Vh(e,t,n){return e&&$M(e,t,n)?e:n}function xw(e){var t=kc.indexOf(e);return MM[t]}function WM(e,t){var n=Array.isArray(e)?e[t]:e;if(!n)return null;var i=zs(n);if(Number.isNaN(i.getTime()))throw new Error("Invalid date: ".concat(e));return i}function bw(e,t){var n=e.value,i=e.minDate,a=e.maxDate,u=e.maxDetail,c=WM(n,t);if(!c)return null;var f=xw(u),h=function(){switch(t){case 0:return qo(f,c);case 1:return hw(f,c);default:throw new Error("Invalid index value: ".concat(t))}}();return cM(h,i,a)}var qh=function(e){return bw(e,0)},_w=function(e){return bw(e,1)},FM=function(e){return[qh,_w].map(function(t){return t(e)})};function Ew(e){var t=e.maxDate,n=e.maxDetail,i=e.minDate,a=e.minDetail,u=e.value,c=e.view,f=Vh(c,a,n),h=qh({value:u,minDate:i,maxDate:t,maxDetail:n})||new Date;return qo(f,h)}function jM(e){var t=e.activeStartDate,n=e.defaultActiveStartDate,i=e.defaultValue,a=e.defaultView,u=e.maxDate,c=e.maxDetail,f=e.minDate,h=e.minDetail,p=e.value,m=e.view,y=Vh(m,h,c),x=t||n;return x?qo(y,x):Ew({maxDate:u,maxDetail:c,minDate:f,minDetail:h,value:p||i,view:m||a})}function nd(e){return e&&(!Array.isArray(e)||e.length===1)}function xc(e,t){return e instanceof Date&&t instanceof Date&&e.getTime()===t.getTime()}var rd=k.forwardRef(function(t,n){var i=t.activeStartDate,a=t.allowPartialRange,u=t.calendarType,c=t.className,f=t.defaultActiveStartDate,h=t.defaultValue,p=t.defaultView,m=t.formatDay,y=t.formatLongDate,x=t.formatMonth,b=t.formatMonthYear,N=t.formatShortWeekday,S=t.formatWeekday,C=t.formatYear,M=t.goToRangeStartOnSelect,z=M===void 0?!0:M,te=t.inputRef,F=t.locale,le=t.maxDate,ae=le===void 0?LM:le,U=t.maxDetail,Q=U===void 0?"month":U,ne=t.minDate,J=ne===void 0?Yh:ne,Y=t.minDetail,ce=Y===void 0?"century":Y,ge=t.navigationAriaLabel,R=t.navigationAriaLive,se=t.navigationLabel,Z=t.next2AriaLabel,ye=t.next2Label,pe=t.nextAriaLabel,W=t.nextLabel,ie=t.onActiveStartDateChange,ue=t.onChange,we=t.onClickDay,ke=t.onClickDecade,Me=t.onClickMonth,Re=t.onClickWeekNumber,je=t.onClickYear,Ye=t.onDrillDown,qe=t.onDrillUp,Se=t.onViewChange,rt=t.prev2AriaLabel,xt=t.prev2Label,He=t.prevAriaLabel,Tt=t.prevLabel,Xe=t.returnValue,it=Xe===void 0?"start":Xe,St=t.selectRange,et=t.showDoubleView,Be=t.showFixedNumberOfWeeks,Ft=t.showNavigation,jt=Ft===void 0?!0:Ft,bt=t.showNeighboringCentury,sn=t.showNeighboringDecade,zt=t.showNeighboringMonth,un=zt===void 0?!0:zt,Qt=t.showWeekNumbers,Ut=t.tileClassName,tn=t.tileContent,Yt=t.tileDisabled,cn=t.value,dn=t.view,_t=k.useState(f),Bt=_t[0],Vt=_t[1],Lt=k.useState(null),$e=Lt[0],Ht=Lt[1],fe=k.useState(Array.isArray(h)?h.map(function(ot){return ot!==null?zs(ot):null}):h!=null?zs(h):null),be=fe[0],de=fe[1],Ce=k.useState(p),We=Ce[0],ze=Ce[1],Ve=i||Bt||jM({activeStartDate:i,defaultActiveStartDate:f,defaultValue:h,defaultView:p,maxDate:ae,maxDetail:Q,minDate:J,minDetail:ce,value:cn,view:dn}),Ze=function(){var ot=function(){return St&&nd(be)?be:cn!==void 0?cn:be}();return ot?Array.isArray(ot)?ot.map(function(yt){return yt!==null?zs(yt):null}):ot!==null?zs(ot):null:null}(),Tn=xw(Q),ct=Vh(dn||We,ce,Q),$t=ww(ce,Q),jn=St?$e:null,_r=$t.indexOf(ct)<$t.length-1,Er=$t.indexOf(ct)>0,Et=k.useCallback(function(ot){var yt=function(){switch(it){case"start":return qh;case"end":return _w;case"range":return FM;default:throw new Error("Invalid returnValue.")}}();return yt({maxDate:ae,maxDetail:Q,minDate:J,value:ot})},[ae,Q,J,it]),Rt=k.useCallback(function(ot,yt){Vt(ot);var At={action:yt,activeStartDate:ot,value:Ze,view:ct};ie&&!xc(Ve,ot)&&ie(At)},[Ve,ie,Ze,ct]),sr=k.useCallback(function(ot,yt){var At=function(){switch(ct){case"century":return ke;case"decade":return je;case"year":return Me;case"month":return we;default:throw new Error("Invalid view: ".concat(ct,"."))}}();At&&At(ot,yt)},[we,ke,Me,je,ct]),ur=k.useCallback(function(ot,yt){if(_r){sr(ot,yt);var At=$t[$t.indexOf(ct)+1];if(!At)throw new Error("Attempted to drill down from the lowest view.");Vt(ot),ze(At);var qt={action:"drillDown",activeStartDate:ot,value:Ze,view:At};ie&&!xc(Ve,ot)&&ie(qt),Se&&ct!==At&&Se(qt),Ye&&Ye(qt)}},[Ve,_r,ie,sr,Ye,Se,Ze,ct,$t]),cr=k.useCallback(function(){if(Er){var ot=$t[$t.indexOf(ct)-1];if(!ot)throw new Error("Attempted to drill up from the highest view.");var yt=qo(ot,Ve);Vt(yt),ze(ot);var At={action:"drillUp",activeStartDate:yt,value:Ze,view:ot};ie&&!xc(Ve,yt)&&ie(At),Se&&ct!==ot&&Se(At),qe&&qe(At)}},[Ve,Er,ie,qe,Se,Ze,ct,$t]),lr=k.useCallback(function(ot,yt){var At=Ze;sr(ot,yt);var qt=St&&!nd(At),gn;if(St)if(qt)gn=qo(Tn,ot);else{if(!At)throw new Error("previousValue is required");if(Array.isArray(At))throw new Error("previousValue must not be an array");gn=iM(Tn,At,ot)}else gn=Et(ot);var Sr=!St||qt||z?Ew({maxDate:ae,maxDetail:Q,minDate:J,minDetail:ce,value:gn,view:ct}):null;yt.persist(),Vt(Sr),de(gn);var Dt={action:"onChange",activeStartDate:Sr,value:gn,view:ct};if(ie&&!xc(Ve,Sr)&&ie(Dt),ue)if(St){var wn=nd(gn);if(!wn)ue(gn||null,yt);else if(a){if(Array.isArray(gn))throw new Error("value must not be an array");ue([gn||null,null],yt)}}else ue(gn||null,yt)},[Ve,a,Et,z,ae,Q,J,ce,ie,ue,sr,St,Ze,Tn,ct]);function ao(ot){Ht(ot)}function Nn(){Ht(null)}k.useImperativeHandle(n,function(){return{activeStartDate:Ve,drillDown:ur,drillUp:cr,onChange:lr,setActiveStartDate:Rt,value:Ze,view:ct}},[Ve,ur,cr,lr,Rt,Ze,ct]);function Gn(ot){var yt=ot?dw(ct,Ve):qo(ct,Ve),At=_r?ur:lr,qt={activeStartDate:yt,hover:jn,locale:F,maxDate:ae,minDate:J,onClick:At,onMouseOver:St?ao:void 0,tileClassName:Ut,tileContent:tn,tileDisabled:Yt,value:Ze,valueType:Tn};switch(ct){case"century":return _.jsx(gM,$a({formatYear:C,showNeighboringCentury:bt},qt));case"decade":return _.jsx(xM,$a({formatYear:C,showNeighboringDecade:sn},qt));case"year":return _.jsx(TM,$a({formatMonth:x,formatMonthYear:b},qt));case"month":return _.jsx(RM,$a({calendarType:u,formatDay:m,formatLongDate:y,formatShortWeekday:N,formatWeekday:S,onClickWeekNumber:Re,onMouseLeave:St?Nn:void 0,showFixedNumberOfWeeks:typeof Be<"u"?Be:et,showNeighboringMonth:un,showWeekNumbers:Qt},qt));default:throw new Error("Invalid view: ".concat(ct,"."))}}function Pn(){return jt?_.jsx(sM,{activeStartDate:Ve,drillUp:cr,formatMonthYear:b,formatYear:C,locale:F,maxDate:ae,minDate:J,navigationAriaLabel:ge,navigationAriaLive:R,navigationLabel:se,next2AriaLabel:Z,next2Label:ye,nextAriaLabel:pe,nextLabel:W,prev2AriaLabel:rt,prev2Label:xt,prevAriaLabel:He,prevLabel:Tt,setActiveStartDate:Rt,showDoubleView:et,view:ct,views:$t}):null}var zr=Array.isArray(Ze)?Ze:[Ze];return _.jsxs("div",{className:yr(wc,St&&zr.length===1&&"".concat(wc,"--selectRange"),et&&"".concat(wc,"--doubleView"),c),ref:te,children:[Pn(),_.jsxs("div",{className:"".concat(wc,"__viewContainer"),onBlur:St?Nn:void 0,onMouseLeave:St?Nn:void 0,children:[Gn(),et?Gn(!0):null]})]})});function BM({onSelect:e,onClose:t,showTime:n=!0,isBetweenMode:i=!1}){const[a,u]=k.useState(new Date),[c,f]=k.useState(new Date),[h,p]=k.useState(Wn(new Date,"HH")),[m,y]=k.useState(Wn(new Date,"mm")),[x,b]=k.useState(Wn(new Date,"ss")),[N,S]=k.useState(Wn(new Date,"HH")),[C,M]=k.useState(Wn(new Date,"mm")),[z,te]=k.useState(Wn(new Date,"ss")),[F,le]=k.useState(!1),[ae,U]=k.useState(!1),Q=k.useRef(null);k.useEffect(()=>{function Y(ce){Q.current&&!Q.current.contains(ce.target)&&t()}return document.addEventListener("mousedown",Y),()=>document.removeEventListener("mousedown",Y)},[t]),k.useEffect(()=>{function Y(ce){ce.key==="Enter"&&(ce.preventDefault(),ce.stopPropagation(),ne(),t())}return document.addEventListener("keydown",Y),()=>document.removeEventListener("keydown",Y)},[a,c,h,m,x,N,C,z,i,t]);const ne=()=>{if(i){const Y=new Date(a);Y.setHours(parseInt(h),parseInt(m),parseInt(x));const ce=new Date(c);ce.setHours(parseInt(N),parseInt(C),parseInt(z)),e({start:Y,end:ce})}else{const Y=new Date(a);Y.setHours(parseInt(h),parseInt(m),parseInt(x)),e({start:Y})}t()},J=({label:Y,hours:ce,minutes:ge,seconds:R,setHours:se,setMinutes:Z,setSeconds:ye})=>_.jsxs("div",{className:"flex flex-col gap-2",children:[_.jsx("div",{className:"text-sm font-medium text-gray-700",children:Y}),_.jsxs("div",{className:"flex justify-between items-center gap-4 p-4 bg-gray-50 rounded-lg",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("input",{type:"number",min:"0",max:"23",value:ce,onChange:pe=>se(pe.target.value.padStart(2,"0")),className:"w-16 px-3 py-2 bg-white border rounded-md text-center text-lg font-medium text-gray-700"}),_.jsx("span",{className:"text-gray-500 text-sm",children:"hrs"})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("input",{type:"number",min:"0",max:"59",value:ge,onChange:pe=>Z(pe.target.value.padStart(2,"0")),className:"w-16 px-3 py-2 bg-white border rounded-md text-center text-lg font-medium text-gray-700"}),_.jsx("span",{className:"text-gray-500 text-sm",children:"min"})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("input",{type:"number",min:"0",max:"59",value:R,onChange:pe=>ye(pe.target.value.padStart(2,"0")),className:"w-16 px-3 py-2 bg-white border rounded-md text-center text-lg font-medium text-gray-700"}),_.jsx("span",{className:"text-gray-500 text-sm",children:"sec"})]})]})]});return _.jsxs("div",{ref:Q,className:"bg-white rounded-lg shadow-xl p-4 w-[400px]",style:{marginTop:"0.5rem"},children:[_.jsxs("div",{className:"flex items-center justify-between mb-4 border-b pb-2",children:[_.jsx("h3",{className:"text-lg font-medium text-gray-700",children:i?"Select Date Range":"Select Date"}),_.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:""})]}),i?_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{children:[_.jsxs("button",{onClick:()=>le(!F),className:"flex items-center gap-2 hover:bg-gray-50 px-2 py-1 rounded-md",children:[_.jsx("span",{className:"text-gray-600",children:""}),_.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Start: ",Wn(a,"EEE MMM dd yyyy")]})]}),F&&_.jsx(rd,{onChange:Y=>{u(Y),le(!1)},value:a,className:"border-0 mt-2"}),n&&_.jsx(J,{label:"Start Time",hours:h,minutes:m,seconds:x,setHours:p,setMinutes:y,setSeconds:b})]}),_.jsxs("div",{children:[_.jsxs("button",{onClick:()=>U(!ae),className:"flex items-center gap-2 hover:bg-gray-50 px-2 py-1 rounded-md",children:[_.jsx("span",{className:"text-gray-600",children:""}),_.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["End: ",Wn(c,"EEE MMM dd yyyy")]})]}),ae&&_.jsx(rd,{onChange:Y=>{f(Y),U(!1)},value:c,className:"border-0 mt-2"}),n&&_.jsx(J,{label:"End Time",hours:N,minutes:C,seconds:z,setHours:S,setMinutes:M,setSeconds:te})]})]}):_.jsxs(_.Fragment,{children:[_.jsxs("button",{onClick:()=>le(!F),className:"flex items-center gap-2 hover:bg-gray-50 px-2 py-1 rounded-md mb-4",children:[_.jsx("span",{className:"text-gray-600",children:""}),_.jsx("span",{className:"text-lg font-medium text-gray-700",children:Wn(a,"EEE MMM dd yyyy")})]}),F&&_.jsx("div",{className:"mb-4",children:_.jsx(rd,{onChange:Y=>{u(Y),le(!1)},value:a,className:"border-0"})}),n&&_.jsx(J,{label:"Time",hours:h,minutes:m,seconds:x,setHours:p,setMinutes:y,setSeconds:b})]}),_.jsx("button",{onClick:ne,className:"w-full mt-4 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:"Apply"})]})}function HM({isOpen:e,onClose:t}){const[n,i]=k.useState([]),[a,u]=k.useState(""),[c,f]=k.useState([]),[h,p]=k.useState("");k.useEffect(()=>{e&&(async()=>{const C=await ru("namespaces"),M=await ru("searchParameters");C&&i(C),M&&f(M)})()},[e]);const m=async()=>{await Sd("namespaces",n),await Sd("searchParameters",c),t()},y=()=>{a&&!n.includes(a)&&(i([...n,a]),u(""))},x=S=>{i(n.filter((C,M)=>M!==S))},b=()=>{const S=h.split(",").map(C=>C.trim()).filter(C=>C&&!c.includes(C));S.length&&(f([...c,...S]),p(""))},N=S=>{f(c.filter((C,M)=>M!==S))};return e?_.jsxs(Vy,{open:e,onClose:t,className:"relative z-[2000]",children:[_.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),_.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:_.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:_.jsxs($h,{className:"w-[600px] transform overflow-hidden rounded-lg bg-white text-left align-middle shadow-xl transition-all",children:[_.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[_.jsx("h2",{className:"text-xl font-semibold",children:"Search Settings"}),_.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full","aria-label":"Close",children:_.jsx(Us,{size:20})})]}),_.jsxs("div",{className:"p-6 overflow-y-auto",children:[_.jsxs("div",{className:"mb-6",children:[_.jsx("h3",{className:"text-lg font-medium mb-2",children:"Namespaces"}),_.jsxs("div",{className:"flex gap-2 mb-2",children:[_.jsx("input",{type:"text",value:a,onChange:S=>u(S.target.value),onKeyDown:S=>S.key==="Enter"&&y(),placeholder:"Add namespace...",className:"flex-1 p-2 border rounded"}),_.jsx("button",{onClick:y,className:"p-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:_.jsx(Tg,{size:20})})]}),_.jsx("div",{className:"flex flex-wrap gap-2",children:n.map((S,C)=>_.jsxs("div",{className:"bg-gray-100 px-3 py-1 rounded-full flex items-center gap-2",children:[_.jsx("span",{children:S}),_.jsx("button",{onClick:()=>x(C),className:"hover:text-red-500",children:_.jsx(Us,{size:16})})]},C))})]}),_.jsxs("div",{children:[_.jsx("h3",{className:"text-lg font-medium mb-2",children:"Search Parameters"}),_.jsxs("div",{className:"flex gap-2 mb-2",children:[_.jsx("input",{type:"text",value:h,onChange:S=>p(S.target.value),onKeyDown:S=>S.key==="Enter"&&b(),placeholder:"Add parameters (comma-separated)...",className:"flex-1 p-2 border rounded"}),_.jsx("button",{onClick:b,className:"p-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:_.jsx(Tg,{size:20})})]}),_.jsx("div",{className:"flex flex-wrap gap-2",children:c.map((S,C)=>_.jsxs("div",{className:"bg-gray-100 px-3 py-1 rounded-full flex items-center gap-2",children:[_.jsx("span",{children:S}),_.jsx("button",{onClick:()=>N(C),className:"hover:text-red-500",children:_.jsx(Us,{size:16})})]},C))})]})]}),_.jsxs("div",{className:"p-4 border-t flex justify-end gap-2",children:[_.jsx("button",{onClick:t,className:"px-4 py-2 border rounded hover:bg-gray-50",children:"Cancel"}),_.jsx("button",{onClick:m,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Save"})]})]})})})]}):null}function KM({isOpen:e,onClose:t,onTemporalModalSubmit:n,onShowNodeData:i}){const[a,u]=k.useState(""),[c,f]=k.useState([]),[h,p]=k.useState([]),[m,y]=k.useState(!1),[x,b]=k.useState(-1),[N,S]=k.useState(!1),[C,M]=k.useState(!1),z=re.useRef(null),[te,F]=k.useState(null),[le,ae]=k.useState(null),U=k.useRef(null),[Q,ne]=k.useState(!1),[J,Y]=k.useState([]),[ce,ge]=k.useState([]),[R,se]=k.useState(""),[Z,ye]=k.useState([]),[pe,W]=k.useState(1),[ie,ue]=k.useState(1),[we,ke]=k.useState([{id:"status",label:"Status",width:120},{id:"taskQueue",label:"Task Queue",width:150},{id:"workflowType",label:"Workflow Type",width:180},{id:"execution",label:"Workflow ID",width:200},{id:"execution",label:"Run ID",width:200},{id:"duration",label:"Duration",width:180},{id:"startTime",label:"Start Time",width:180},{id:"closeTime",label:"Close Time",width:180}]),[Me,Re]=k.useState(!1),[je,Ye]=k.useState(!1),[qe,Se]=k.useState(!1),rt=bi(dy),xt=async()=>{const fe=await ru("searchParameters");if(fe){const be=fe.map(de=>({id:de,label:de,type:"text"}));Y(be)}},He=async()=>{const fe=await ru("namespaces")||[];ge(fe),!R&&fe.length>0&&se(fe[0])};k.useEffect(()=>{e&&xt()},[e]),k.useEffect(()=>{He()},[e]),k.useEffect(()=>{(async()=>{if(e&&R){const be=bt();Re(!0);try{const de=await Wg(R,be);ye(de.executions||[]),ue(Math.min(Math.ceil(de.executions.length/100),10)),W(1)}catch(de){console.error("Error executing initial search:",de)}finally{Re(!1)}}})()},[e,R]),k.useEffect(()=>{if(qe){const fe=()=>{document.querySelectorAll('[data-workflow-loaded="true"]').length>0?(Se(!1),t()):setTimeout(fe,500)};setTimeout(fe,1e3)}},[qe,t]);const Tt=fe=>{if(fe.type==="datetime")return yc.map(de=>({text:`${fe.label} ${de.label}`,disabled:!1}));if(fe.type==="status"){const de=c.filter(Ce=>Ce.field==="ExecutionStatus").map(Ce=>Ce.value);return Gf.filter(Ce=>!de.includes(Ce.value)).map(Ce=>({text:`${fe.label} = '${Ce.value}'`,displayText:Ce.value,disabled:!1,color:Ce.color}))}return Qg.filter(de=>["equals","notEquals","starts_with"].includes(de.id)).map(de=>({text:`${fe.label} ${de.label}`,disabled:!1}))},Xe=()=>c.filter(fe=>fe.field==="ExecutionStatus").flatMap(fe=>{const be=fe.raw.match(/Status\s*=\s*'([^']+)'/gi);return be?be.map(de=>{const Ce=de.match(/Status\s*=\s*['"]([^'"]+)['"]/i);return(Ce==null?void 0:Ce[1])??""}):[]}),it=fe=>{const be=fe.toLowerCase().trim();if(be.startsWith("status")){const We=Xe();return Gf.filter(ze=>!We.includes(ze.value)).map(ze=>{var Ve;return{text:`Status = '${ze.value}'`,fullText:c.some(Ze=>Ze.field==="ExecutionStatus")?`${(Ve=c.find(Ze=>Ze.field==="ExecutionStatus"))==null?void 0:Ve.raw} OR Status = '${ze.value}'`:`Status = '${ze.value}'`,displayText:ze.value,disabled:!1,color:ze.color}})}if(N)return[];const de=[...vi,...J],Ce=new Set(c.map(We=>We.field));return de.filter(We=>We.label.toLowerCase().includes(be)).map(We=>({text:We.label,disabled:We.type!=="status"&&Ce.has(We.id)}))},St=fe=>{const be=fe.target.value;if(u(be),be.endsWith(" ")){const de=be.trim().split(/\s+/);if(de.length===2){const[Ce,We]=de,ze=vi.find(Ze=>Ce.toLowerCase()===Ze.label.toLowerCase()&&Ze.type==="datetime"),Ve=yc.some(Ze=>Ze.label===We||Ze.alternatives.includes(We));ze&&Ve&&(ae(ze.label),Ut())}}if((!be.trim()||be.trim().toLowerCase()==="status")&&M(!1),!C||be.trim().toLowerCase()==="status"){b(-1);const de=it(be);p(de),de.length>0&&b(0)}},et=fe=>fe.match(/^Status\s*=\s*['"][^'"]+['"](\s+OR\s+Status\s*=\s*['"][^'"]+['"])*$/i)?{field:"ExecutionStatus",operator:"equals",value:fe,raw:fe,isValid:!0}:null,Be=fe=>{if(!m){if(fe.key==="Backspace"&&a.length<=1&&M(!1),h.length>0&&!C&&(fe.key==="ArrowDown"?(fe.preventDefault(),b(be=>be<h.length-1?be+1:be)):fe.key==="ArrowUp"?(fe.preventDefault(),b(be=>be>0?be-1:0)):fe.key==="Enter"&&x>=0&&(fe.preventDefault(),zt(h[x]))),fe.key==="Enter"||fe.key==="Tab"){fe.preventDefault();const be=a.trim();if(be.length===0&&c.length>0){jt();return}if(be.toLowerCase().startsWith("status")){const de=et(be);de&&(f(Ce=>[...Ce.filter(We=>We.field!=="ExecutionStatus"),de]),u(""),M(!1),p([]))}else{const de=un(be);de&&de.isValid&&(f(Ce=>[...Ce,de]),u(""),M(!1),p([]))}}else if(fe.key==="Backspace"&&a.trim()===""&&c.length>0){fe.preventDefault();const be=c[c.length-1];be.field==="ExecutionStatus"?(f(c.filter(de=>de.field!=="ExecutionStatus")),u(be.raw),M(!0),p([])):sn(c.length-1)}if(fe.key===" "){const be=a.trim().split(/\s+/),de=be[0],Ce=vi.find(We=>de.toLowerCase()===We.label.toLowerCase()&&We.type==="datetime");if(Ce&&(ae(Ce.label),be.length===2)){const We=be[1];yc.some(Ve=>Ve.label===We||Ve.alternatives.includes(We))&&Ut()}}}},Ft=fe=>{const[be,de]=a.trim().split(/\s+/);if(vi.find(We=>be.toLowerCase()===We.label.toLowerCase())&&de){let We;if(de.toLowerCase()==="between"&&fe.start&&fe.end){const ze=Wn(fe.start,"yyyy-MM-dd HH:mm:ss"),Ve=Wn(fe.end,"yyyy-MM-dd HH:mm:ss"),Ze=`${be} between '${ze}' and '${Ve}'`;We=un(Ze)}else if(fe.start){const ze=Wn(fe.start,"yyyy-MM-dd HH:mm:ss"),Ve=`${be} ${de} '${ze}'`;We=un(Ve)}We&&(f(ze=>[...ze,We]),u(""),y(!1),ae(null),p([]),b(-1))}},jt=async()=>{const fe=bt();console.log("searchQuery",fe),Re(!0);try{const be=await Wg(R,fe);ye(be.executions||[]),ue(Math.min(Math.ceil(be.executions.length/100),10)),W(1)}catch(be){console.error("Error executing search:",be)}finally{Re(!1)}},bt=()=>{const fe=[];return c.forEach(be=>{if(be.field==="ExecutionStatus"){const de=be.raw.split(/\s+OR\s+/).map(Ce=>{const We=Ce.match(/Status\s*=\s*['"]([^'"]+)['"]/i);return We?`\`ExecutionStatus\`="${We[1]}"`:null}).filter(Boolean);de.length>0&&fe.push(`(${de.join(" OR ")})`)}else if(be.operator==="between"&&be.value){const[de,Ce]=be.value.split(" and ");fe.push(`\`${be.field}\` BETWEEN "${de}" AND "${Ce}"`)}else fe.push(`\`${be.field}\` ${be.operator} "${be.value}"`)}),fe.length===0?"":fe.join(" AND ")},sn=fe=>{var Ce;const be=c[fe],de=vi.find(We=>We.id===be.field);if((de==null?void 0:de.type)==="datetime"){f(c.filter((We,ze)=>ze!==fe));return}if(be.field==="ExecutionStatus"){const We=c.filter(ze=>ze.field!=="ExecutionStatus");f(We),u(be.raw),M(!0),p([])}else f(c.filter((We,ze)=>ze!==fe)),u(be.raw);S(!1),(Ce=U.current)==null||Ce.focus()},zt=fe=>{var be;if(!fe.disabled){if(fe.color){const de=c.filter(ze=>ze.field==="ExecutionStatus"),Ce=c.filter(ze=>ze.field!=="ExecutionStatus");let We;if(de.length>0){const ze=`${de[0].raw} OR Status = '${fe.displayText}'`;We=et(ze)}else We=et(`Status = '${fe.displayText}'`);if(We){const ze=c.findIndex(Ze=>Ze.field==="ExecutionStatus"),Ve=[...Ce];ze>=0?Ve.splice(ze,0,We):Ve.push(We),f(Ve)}u(""),p([]),M(!1)}else{const de=fe.text.split(/\s+/);if(u(fe.text+" "),de.length===2){const[Ce,We]=de,ze=vi.find(Ze=>Ce.toLowerCase()===Ze.label.toLowerCase()&&Ze.type==="datetime"),Ve=yc.some(Ze=>Ze.label===We||Ze.alternatives.includes(We));ze&&Ve&&(ae(ze.label),requestAnimationFrame(()=>{Ut()}))}else{const Ce=vi.find(We=>We.label===fe.text);p(Ce?Tt(Ce):[]),b(0),S(!1),y(!1)}}(be=U.current)==null||be.focus()}},un=fe=>{if(!fe.trim())return null;const be=/^([a-zA-Z]+)\s*(=|!=|>|>=|<|<=|between|starts\s*with)\s*['"]([^'"]+)['"](?:\s+and\s+['"]([^'"]+)['"])?$/,de=fe.match(be);if(!de)return{field:"",operator:"",value:null,raw:fe,isValid:!1};let[,Ce,We,ze,Ve]=de;const Ze=vi.find(ct=>Ce.toLowerCase()===ct.label.toLowerCase()),Tn=Qg.find(ct=>ct.label===We||ct.alternatives.includes(We.toLowerCase())||ct.searchOperator===We);if(!Tn)return{field:"",operator:"",value:null,raw:fe,isValid:!1};if((Ze==null?void 0:Ze.type)==="datetime"){const ct=new Date(ze);ze=Wn(ct,"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"),Ve=Ve?Wn(new Date(Ve),"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"):""}return{field:Ze?Ze.id:Ce,operator:Tn.searchOperator,value:Ve?`${ze} and ${Ve}`:ze,raw:fe,isValid:!0}},Qt=fe=>fe.isValid?fe.field==="ExecutionStatus"||[...vi,...J].some(de=>de.id.toLowerCase()===fe.field.toLowerCase())?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800";re.useEffect(()=>{z.current&&z.current.scrollIntoView({block:"nearest"})},[x]);const Ut=()=>{var de;if(!U.current)return;const fe=(de=U.current)==null?void 0:de.getBoundingClientRect(),be=document.querySelector('[role="dialog"]');if(fe&&be){const Ce=be.getBoundingClientRect(),We=(Ce.width-400)/2;F({x:We,y:fe.bottom-Ce.top+5}),y(!0)}},tn=async()=>{ne(!1),await xt(),await He()},Yt=fe=>{fe.stopPropagation(),ne(!0)},cn=()=>{p([]),b(-1)},dn=fe=>{p([]),b(-1)},_t=(fe,be)=>{ke(de=>{const Ce=[...de];return Ce[fe]={...Ce[fe],width:be},Ce})},Bt=fe=>{const be=Gf.find(de=>de.value.toLowerCase()===fe.toLowerCase());return(be==null?void 0:be.color)||"gray"},Vt=fe=>Wn(new Date(fe),"yyyy-MM-dd HH:mm:ss"),Lt=async(fe,be)=>{be.stopPropagation();try{const de=await XA(R,fe.execution.workflowId,fe.execution.runId),Ce={x:Math.min(be.clientX,window.innerWidth-600),y:Math.min(be.clientY,window.innerHeight-400)};i?i(de,Ce,3e3):rt({data:de,position:Ce,baseZIndex:3e3})}catch(de){console.error("Error fetching workflow details:",de)}},$e=()=>{const fe=(pe-1)*100,be=fe+100,de=Z.slice(fe,be);return _.jsxs("div",{className:"flex flex-col h-full",children:[_.jsx("div",{className:"flex-none px-4 py-3 border-b bg-gray-50 z-[50]",children:_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",fe+1,"-",Math.min(be,Z.length)," of"," ",Z.length," results"]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("button",{onClick:()=>W(Ce=>Math.max(1,Ce-1)),disabled:pe===1,className:"p-1.5 rounded hover:bg-gray-200 disabled:opacity-50 disabled:hover:bg-transparent transition-colors",children:_.jsx(XO,{size:16})}),_.jsxs("span",{className:"text-sm font-medium",children:[pe," / ",ie]}),_.jsx("button",{onClick:()=>W(Ce=>Math.min(ie,Ce+1)),disabled:pe===ie,className:"p-1.5 rounded hover:bg-gray-200 disabled:opacity-50 disabled:hover:bg-transparent transition-colors",children:_.jsx(GO,{size:16})})]})]})}),_.jsx("div",{className:"flex-1 overflow-auto",children:_.jsx("div",{className:"inline-block min-w-full align-middle",children:_.jsx("div",{className:"relative",children:_.jsxs("table",{className:"min-w-full border-collapse",children:[_.jsx("thead",{children:_.jsxs("tr",{children:[_.jsx("th",{className:"sticky top-0 border-b border-gray-200 bg-gray-50 z-10",style:{width:50},children:_.jsx("div",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"})}),we.map((Ce,We)=>_.jsxs("th",{className:"sticky top-0 border-b border-gray-200 bg-gray-50 z-10",style:{width:Ce.width},children:[_.jsx("div",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:Ce.label}),_.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1 cursor-col-resize hover:bg-blue-500 group",onMouseDown:ze=>{const Ve=ze.pageX,Ze=Ce.width,Tn=$t=>{const jn=$t.pageX-Ve;_t(We,Math.max(100,Ze+jn))},ct=()=>{document.removeEventListener("mousemove",Tn),document.removeEventListener("mouseup",ct)};document.addEventListener("mousemove",Tn),document.addEventListener("mouseup",ct)},children:_.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-px bg-gray-200 group-hover:bg-blue-500"})})]},`${Ce.id}-${We}`))]})}),_.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:de.map(Ce=>_.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[_.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-left",children:_.jsxs("div",{className:"flex gap-2",children:[_.jsx("button",{onClick:We=>{We.stopPropagation(),Se(!0),n({workflowId:Ce.execution.workflowId,namespace:R,runId:Ce.execution.runId}).then(()=>{Se(!1),t()}).catch(ze=>{console.error("Error loading workflow:",ze),Se(!1)})},className:"p-1 hover:bg-gray-200 rounded-full transition-colors",title:"View workflow details",children:_.jsx(Zv,{size:16,className:"text-gray-600"})}),_.jsx("button",{onClick:We=>Lt(Ce,We),className:"p-1 hover:bg-gray-200 rounded-full transition-colors",title:"Quick view",children:_.jsx(ZO,{size:16,className:"text-gray-600"})})]})}),_.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-left",children:_.jsx("div",{className:`inline-flex items-center gap-2 px-2.5 py-1 rounded-full text-xs font-medium
                          ${Bt(Ce.status)}`,children:Ce.status})}),_.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-left",children:Ce.taskQueue}),_.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-left",children:Ce.type.name}),_.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-medium text-left",children:Ce.execution.workflowId}),_.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 font-mono text-left",children:Ce.execution.runId}),_.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-left",children:wh(Ce.startTime,Ce.closeTime||new Date().toISOString())||""}),_.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-left",children:Vt(Ce.startTime)}),_.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-left",children:Ce.closeTime?Vt(Ce.closeTime):""})]},`${Ce.execution.workflowId}-${Ce.execution.runId}`))})]})})})})]})},Ht=_.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[_.jsx("span",{className:"text-gray-700 font-medium",children:"Namespace:"}),_.jsxs("div",{className:"relative",children:[_.jsxs("button",{onClick:()=>Ye(!je),className:"w-64 p-2 border rounded-lg bg-white flex items-center justify-between",children:[_.jsx("span",{children:R}),_.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform ${je?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),je&&_.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border rounded-lg shadow-lg",children:ce.map(fe=>_.jsx("button",{className:"w-full px-4 py-2 text-left hover:bg-gray-100 first:rounded-t-lg last:rounded-b-lg",onClick:()=>{se(fe),Ye(!1)},children:fe},fe))})]})]});return e?_.jsxs(_.Fragment,{children:[_.jsxs(Vy,{open:e,onClose:fe=>{var be;if(fe===!1&&((be=document.activeElement)==null?void 0:be.tagName)==="BODY"){t();return}},className:"relative z-[50]",children:[_.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true",onClick:fe=>{fe.preventDefault(),fe.stopPropagation()},onMouseDown:fe=>{const be=document.querySelector("[data-node-panel]");if(be&&(be===fe.target||be.contains(fe.target))){fe.preventDefault(),fe.stopPropagation();return}},onMouseUp:fe=>{const be=document.querySelector("[data-node-panel]");if(be&&(be===fe.target||be.contains(fe.target))){fe.preventDefault(),fe.stopPropagation();return}fe.preventDefault(),fe.stopPropagation()}}),qe&&_.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:_.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl flex items-center gap-4",children:[_.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-blue-500 border-t-transparent"}),_.jsx("span",{className:"text-gray-700",children:"Loading workflow..."})]})}),_.jsx("div",{className:"fixed inset-0",onClick:dn,children:_.jsx("div",{className:"flex min-h-full items-start justify-center p-4 text-center",children:_.jsxs($h,{className:"bg-white rounded-xl w-full max-w-[120rem] h-[90vh] flex flex-col shadow-2xl relative",onClick:fe=>fe.stopPropagation(),children:[_.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 rounded-full hover:bg-gray-100 transition-colors z-50","aria-label":"Close modal",children:_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-500",children:[_.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),_.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),_.jsxs("div",{className:"p-6 flex-none border-b relative",children:[Ht,_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Search settings",onClick:Yt,children:_.jsx(eA,{size:20,className:"text-gray-600"})}),_.jsxs("div",{className:"flex-1",children:[_.jsxs("div",{className:"flex flex-wrap gap-2 items-center p-2 border rounded-lg bg-gray-50 min-h-[40px]",children:[c.map((fe,be)=>_.jsxs("div",{className:`px-2 py-1 rounded-md ${Qt(fe)} flex items-center gap-1 group`,children:[_.jsx("span",{onClick:()=>sn(be),className:"flex-1 cursor-pointer",children:fe.raw}),_.jsx("button",{onClick:de=>{de.stopPropagation(),f(Ce=>Ce.filter((We,ze)=>ze!==be))},className:"text-current opacity-50 hover:opacity-100 transition-opacity","aria-label":"Remove token",children:_.jsx(Us,{size:14})})]},be)),_.jsx("input",{ref:U,type:"text",value:a,onChange:St,onClick:cn,onKeyDown:Be,className:"flex-1 min-w-[200px] bg-transparent outline-none",placeholder:c.length>0?"Add another filter...":"Type to search. For example, WorkflowType = 'MyWorkflowType'"})]}),h.length>0&&_.jsx("div",{className:"absolute mt-1 w-1/2 max-h-60 overflow-auto rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[60]",children:h.map((fe,be)=>_.jsx("button",{ref:be===x?z:null,className:`relative cursor-default select-none py-2 pl-3 pr-9 w-full text-left transition-colors ${fe.disabled?"text-gray-400":"text-gray-900"} ${be===x||fe.disabled?"bg-gray-50":"bg-white hover:bg-gray-50"}`,onClick:()=>!fe.disabled&&zt(fe),disabled:fe.disabled,children:_.jsx("span",{className:`inline-block truncate ${fe.color?zM(fe.color,!1):""}`,children:fe.displayText||fe.text})},be))})]}),_.jsx("button",{onClick:jt,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Search"})]})]}),_.jsx("div",{className:"flex-1 overflow-y-auto",children:Me?_.jsx("div",{className:"flex items-center justify-center h-full",children:_.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-gray-200 border-t-blue-500"})}):Z.length>0?$e():_.jsx("div",{className:"p-6 text-center text-gray-500",children:"No results to display. Try searching for workflows above."})}),m&&te&&_.jsx("div",{className:"absolute z-[999]",style:{top:"100px"},children:_.jsx(BM,{onSelect:Ft,onClose:()=>{y(!1),F(null)},position:te,showTime:!0,isBetweenMode:a.toLowerCase().includes("between")})})]})})})]}),_.jsx(HM,{isOpen:Q,onClose:tn})]}):null}const zM=(e,t)=>!e||t?"":`px-2 py-0.5 rounded ${e}`,UM=e=>k.useMemo(()=>vA(e),[e]);function YM({id:e,onShowNodeData:t,onSpreadBatchNodes:n}){const i=UM(e),u=lA(i).value;if(!u)return null;const c=()=>{n==null||n(e)},f=h=>{h.stopPropagation(),t(u,{x:h.clientX,y:h.clientY})};return _.jsx(xh,{id:e,onShowNodeData:f,onBatchAction:c,IconComponent:_.jsx("div",{className:"bg-fuchsia-50",children:_.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:_.jsx("path",{d:"M5 12L12 5L19 12L12 19L5 12Z"})})}),TitleComponent:_.jsx("div",{className:"flex items-center h-[2.5rem]",children:_.jsx("h3",{className:"font-semibold text-gray-800 truncate",children:u.activityType})}),TypeLabelComponent:_.jsx("div",{className:"px-2 py-0.5 rounded text-xs font-medium shadow-sm z-10",style:{backgroundColor:"rgb(253 244 255)",color:"rgb(192 38 211)"},children:"activity"}),status:u.status,startTime:u.startTime,endTime:u.endTime,taskQueue:u.taskQueue.name})}function VM(){const e=bi(Nh),t=Qi(Ko),n=Qi(Th),i=Qi(Ba),a=Qi(Sh),u=async h=>{try{const p=i.find(Q=>Q.id===h&&Q.type==="batch");if(!p){console.error("No batch node found to expand or node is not a batch node");return}const m=p;if(!m.referencedBatches||m.referencedBatches.length===0){console.error("Batch node has no referenced items to expand");return}if(!t||!n){console.error("Missing graph structure data");return}const y=[],x=m.referencedBatches.map((Q,ne)=>{const J="workflowId"in Q&&"workflowRunId"in Q&&!("activityId"in Q);let Y;return J?(Y=Br(Q),Y===n.id&&(Y=`${Y}$$batch_item_${ne}`),y.push(Y),{id:Y,type:"workflow",isExpanded:!1}):(Y=du(Q),Y===n.id&&(Y=`${Y}$$batch_item_${ne}`),y.push(Y),{id:Y,type:"activity"})});if(x.length===0){console.warn("No nodes to add after expanding batch");return}const b=x.map(Q=>({id:Q.id,children:[],isBatchNode:!1})),N=f(n,h,b),S=N.id,C=x.filter(Q=>Q.id===S);C.length>0&&(console.error(`ERROR: ${C.length} batch items have the same ID as the parent workflow: ${S}`),C.forEach((Q,ne)=>{const J=Q.id;Q.id=`${Q.id}$$batch_item_${ne}`,console.log(`Fixed conflicting ID: ${J} -> ${Q.id}`)}));const M=i.filter(Q=>Q.id!==h),z=a.filter(Q=>Q.target_id===h),te=a.filter(Q=>Q.source_id===h),F=[];x.length>0&&z.forEach(Q=>{x.forEach(ne=>{F.push({source_id:Q.source_id,target_id:ne.id,type:Q.type})})}),x.length>0&&te.forEach(Q=>{x.forEach(ne=>{F.push({source_id:ne.id,target_id:Q.target_id,type:Q.type})})});const le=a.filter(Q=>Q.source_id!==h&&Q.target_id!==h),ae=[...M,...x],U=[...le,...F];c(N,ae),e({renderTree:N,nodes:ae,edges:U})}catch(p){console.error("Error expanding batch node:",p)}},c=(h,p)=>{const m=new Set(p.map(b=>b.id)),y=[],x=b=>{m.has(b.id)||y.push(b.id),b.children.forEach(x)};x(h),y.length>0&&console.error("Missing nodes in nodes list that exist in render tree:",y)},f=(h,p,m)=>{let y=!1;const x=new Map;for(const M of m)x.set(M.id,(x.get(M.id)||0)+1);const b=Array.from(x.entries()).filter(([M,z])=>z>1).map(([M,z])=>`${M} (${z} times)`);b.length>0&&console.error(`ERROR: Found duplicate IDs in expanded nodes: ${b.join(", ")}`);const N=M=>({id:M.id,children:M.children.map(z=>N(z)),isBatchNode:M.isBatchNode}),S=N(h),C=M=>{if(M.id===p){y=!0,console.log(`Found batch node ${p} to expand`);return}for(let z=0;z<M.children.length;z++){const te=M.children[z];if(te.id===p){if(y=!0,m.length>0){if(M.children[z]=m[0],m.length>1){const F=m.slice(1);M.children.splice(z+1,0,...F)}}else M.children.splice(z,1),z--;return}C(te)}};return C(S),y||console.error(`Batch node ${p} was not found in the render tree!`),S};return{onSpreadBatchNodes:u}}const qM=e=>k.useMemo(()=>{const t=new Date().toISOString();return{startTime:t,endTime:t,status:"Batched"}},[e]);function XM({id:e,data:t}){const{referencedBatches:n}=t,i=n.length,{startTime:a,endTime:u,status:c}=qM(n),{onSpreadBatchNodes:f}=VM(),h=k.useCallback(()=>{f==null||f(e)},[f,e]),p=k.useMemo(()=>{const m=n.some(x=>"workflowRunId"in x&&"workflowId"in x&&!("activityId"in x)),y=n.some(x=>"activityId"in x);return m&&y?"mixed":m?"workflow":"activity"},[n]);return _.jsx(xh,{id:e,onBatchAction:h,IconComponent:_.jsx("div",{className:"bg-blue-50",children:_.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})}),TitleComponent:_.jsxs("div",{className:"flex flex-col",children:[_.jsx("h3",{className:"font-semibold text-gray-800 truncate",children:p==="workflow"?"Batched Workflows":p==="activity"?"Batched Activities":"Batched Items"}),_.jsxs("p",{className:"text-xs text-gray-500",children:["Contains ",i," ",p==="mixed"?"items":p+(i>1?"s":"")]})]}),TypeLabelComponent:_.jsx("div",{className:"px-2 py-0.5 rounded text-xs font-medium shadow-sm z-10",style:{backgroundColor:"rgb(219 234 254)",color:"rgb(29 78 216)"},children:"batch"}),status:c,startTime:a,endTime:u,taskQueue:"",isLoading:!1,count:i})}const GM=()=>{const[e,t]=k.useState(!0),n=k.useRef(null),i=k.useRef(!0),a=k.useCallback((p,m,y,x=.75,b=800)=>{!p||!i.current||p.setCenter(m,y,{zoom:x,duration:b})},[]),u=k.useCallback(p=>{!p||!i.current||p.fitView({padding:.2,duration:800,minZoom:.4})},[]),c=k.useCallback(p=>{n.current=p},[]),f=k.useCallback(()=>{!n.current||!i.current||n.current.fitView({padding:.2,duration:800,minZoom:.4})},[]),h=k.useCallback(p=>{i.current=p,t(p)},[]);return{autoZoomEnabled:e,setAutoZoomEnabled:h,handleZoom:a,fitView:u,onInit:c,onGraphLoad:f}},ZM=(e,t)=>{const n=Qi(hy),i=Qi(Nd),a=bi(Nd),u=k.useCallback(()=>{if(!(!e.current||!t))if(i){const c=n.nodes.find(ne=>ne.id===i);if(!c)return;const f=n.nodes.filter(ne=>n.edges.find(Y=>Y.source===i&&Y.target===ne.id)!==void 0);if(f.length===0){e.current.setCenter(c.position.x+(c.width||150)/2,c.position.y+(c.height||40)/2,{zoom:1,duration:800});return}const h=[c,...f],p=Math.min(...h.map(ne=>ne.position.x)),m=Math.max(...h.map(ne=>ne.position.x+(ne.width||150))),y=Math.min(...h.map(ne=>ne.position.y)),x=Math.max(...h.map(ne=>ne.position.y+(ne.height||40))),b=m-p,N=x-y,S=50,C=b+S*2,M=N+S*2,z=window.innerWidth*.8,te=window.innerHeight*.8,F=z/C,le=te/M,ae=Math.min(F,le,1);e.current.setViewport({x:-p*ae+100,y:-y*ae+100,zoom:Math.max(ae,.4)},{duration:800})}else e.current.fitView({padding:.2,duration:800,minZoom:.4})},[e,t,n.nodes,n.edges,i]);return k.useEffect(()=>{if(t&&n.nodes.length>0){const c=setTimeout(()=>{u()},100);return()=>clearTimeout(c)}},[n.nodes.length,n.edges.length,t,u,i]),{fitView:u,setExpandedNodeId:a}};function QM(){const[e,t]=re.useState(!1),n=k.useRef(null),i=.4,{autoZoomEnabled:a,setAutoZoomEnabled:u,onInit:c}=GM(),{fitView:f}=ZM(n,a),h=k.useCallback(()=>{a&&f()},[a,f]),p=k.useCallback(m=>{n.current=m,c(m)},[c]);return{isRootLoaded:e,flowInstance:n,MIN_ZOOM:i,autoZoomEnabled:a,setAutoZoomEnabled:u,onInit:p,fitView:h}}function JM({onBeforeSubmit:e}){const[t,n]=k.useState(!1),[i,a]=k.useState(!1),u=bi(Nh),c=async(p,m)=>{const y=await ey(p,m);for(const b of y)await c(b.workflowId,m);const x=await Jv(p,m);for(const b of x)await aA(p,b.activityId,m);await rA(p,m)};return{isTemporalModalOpen:t,setIsTemporalModalOpen:n,onTemporalModalSubmit:async p=>{if(e&&e(),!await qA())throw new Error("The server is not running. Please start the server and try again.");await kd(p.namespace,p.workflowId,p.runId,2);const y={workflowId:p.workflowId,workflowRunId:p.runId},x=await Ed(p.workflowId,p.runId),{nodes:b,edges:N,virtualTree:S,renderTree:C}=$g(y,x),M=Br(y);u({nodes:b,edges:N,structure:S,renderTree:C,rootId:M})},refreshWorkflowData:async(p,m)=>{try{a(!0);const y=await rl(p,m);if(!y){console.error("Workflow not found for refresh");return}await c(p,m);const x=await kd(y.namespace,p,m,2),b={workflowId:p,workflowRunId:m},N=await Ed(p,m),{nodes:S,edges:C,virtualTree:M,renderTree:z}=$g(b,N),te=Br(b);u({nodes:S,edges:C,structure:M,renderTree:z,rootId:te})}catch(y){console.error("Error refreshing workflow data:",y)}finally{a(!1)}},isRefreshing:i}}const eL=e=>t=>_.jsx(cD,{...t,onShowNodeData:e}),tL=e=>t=>_.jsx(YM,{...t,onShowNodeData:e}),nL=()=>e=>_.jsx(XM,{...e});let id=null;function rL(){const{MIN_ZOOM:e,autoZoomEnabled:t,setAutoZoomEnabled:n,onInit:i,fitView:a}=QM(),{onTemporalModalSubmit:u,refreshWorkflowData:c,setIsTemporalModalOpen:f}=JM({onBeforeSubmit:()=>{ae()}}),[h,p]=re.useState(null),[m,y]=re.useState(!1),[x,b]=k.useState(!0),[N,S]=k.useState(!1),C=re.useRef(!1),{nodes:M,edges:z}=Qi(hy),te=Qi(al),F=bi(dy),le=bi(HA),ae=bi(KA),U=k.useCallback((Y,ce,ge)=>{F({data:Y,position:ce,baseZIndex:ge})},[F]),Q=k.useCallback(Y=>{le(Y)},[le]),ne=k.useMemo(()=>{if(!id){const Y=eL(U),ce=tL(U),ge=nL();id={workflowNode:Y,activityNode:ce,batchNode:ge}}return id},[U]),J=k.useCallback(Y=>{i(Y),t&&setTimeout(()=>{a()},100)},[i,t,a]);return re.useEffect(()=>{const Y=new URLSearchParams(window.location.search),ce=decodeURIComponent(Y.get("id")||""),ge=Y.get("namespace"),R=Y.get("runID");p(null),(async()=>{if(!C.current)if(C.current=!0,ce&&ge&&R){y(!0);try{await u({workflowId:ce,namespace:ge,runId:R})}catch(Z){console.error("Error loading workflow from URL params:",Z),p(Z instanceof Error?Z.message:"An error occurred while loading the workflow")}finally{y(!1)}}else p("Invalid URL parameters"),y(!1)})()},[]),_.jsxs("div",{className:"w-screen h-screen flex flex-col bg-gray-50",children:[m&&_.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:_.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-xl flex items-center space-x-3",children:[_.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),_.jsx("div",{className:"text-gray-700",children:"Loading workflow data..."})]})}),h&&_.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[_.jsx("strong",{className:"font-bold",children:"Error: "}),_.jsx("span",{className:"block sm:inline",children:h}),_.jsxs("button",{className:"absolute top-0 bottom-0 right-0 px-4 py-3",onClick:()=>p(null),children:[_.jsx("span",{className:"sr-only",children:"Dismiss"}),_.jsx(Us,{className:"h-5 w-5"})]})]}),_.jsx("div",{className:"flex-grow h-full",children:_.jsxs(Uv,{nodes:M,edges:z,nodeTypes:ne,onInit:J,minZoom:e,maxZoom:2,fitView:!1,fitViewOptions:{padding:.2,minZoom:e},attributionPosition:"bottom-left",className:"bg-gray-50",onNodesChange:Y=>{console.debug(`Nodes changed: ${Y.length} changes`)},nodesDraggable:!1,edgesUpdatable:!1,nodeExtent:[[-1/0,-1/0],[1/0,1/0]],defaultViewport:{x:0,y:0,zoom:1},proOptions:{hideAttribution:!0},children:[_.jsx(YO,{}),_.jsx(FO,{}),_.jsx(Js,{position:"bottom-right",className:"flex items-center gap-2 bg-transparent z-10 mb-2 mr-2",children:_.jsxs("button",{onClick:()=>b(!x),className:"bg-blue-500 px-3 py-1 rounded-lg shadow-lg hover:bg-blue-600 text-white transition-colors",children:[x?"Hide":"Show"," Minimap"]})}),x&&_.jsx(AO,{zoomable:!0,pannable:!0,className:"bg-white rounded-lg shadow-lg",style:{backgroundColor:"white",width:300,height:200},maskColor:"rgba(0, 0, 0, 0.1)",nodeColor:"#aaa",nodeStrokeWidth:3,nodeBorderRadius:2}),_.jsx(Js,{position:"top-right",className:"flex items-center gap-2 bg-transparent",children:_.jsx("div",{className:"bg-white p-2 rounded-lg shadow-lg",children:_.jsx(lD,{autoZoomEnabled:t,setAutoZoomEnabled:n,refreshWorkflowData:c,isSearchModalOpen:N,setIsSearchModalOpen:S,setIsTemporalModalOpen:f,currentWorkflow:null})})})]})}),te.map(Y=>_.jsx(fD,{id:Y.id,data:Y.node,position:Y.position,onClose:()=>Q(Y.id),baseZIndex:Y.baseZIndex},Y.id)),_.jsx(KM,{isOpen:N,onClose:()=>S(!1),onTemporalModalSubmit:u,onShowNodeData:U})]})}_0(document.getElementById("root")).render(_.jsx(k.StrictMode,{children:_.jsx(rL,{})}));
