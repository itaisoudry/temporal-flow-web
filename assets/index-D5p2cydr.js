import{r as b,a as Tu,g as Qs,R as B,c as Mr,t as rl}from"./vendor-DBEsKlBz.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var Du={exports:{}},Ya={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $h=b,Rh=Symbol.for("react.element"),Lh=Symbol.for("react.fragment"),Fh=Object.prototype.hasOwnProperty,Wh=$h.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Bh={key:!0,ref:!0,__self:!0,__source:!0};function Ou(e,t,n){var r,o={},i=null,s=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)Fh.call(t,r)&&!Bh.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:Rh,type:e,key:i,ref:s,props:o,_owner:Wh.current}}Ya.Fragment=Lh;Ya.jsx=Ou;Ya.jsxs=Ou;Du.exports=Ya;var g=Du.exports,ju,ol=Tu;ju=ol.createRoot,ol.hydrateRoot;function Et(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Et(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Pu={exports:{}},Mu={},Iu={exports:{}},Au={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wr=b;function Hh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zh=typeof Object.is=="function"?Object.is:Hh,Yh=Wr.useState,Vh=Wr.useEffect,qh=Wr.useLayoutEffect,Kh=Wr.useDebugValue;function Uh(e,t){var n=t(),r=Yh({inst:{value:n,getSnapshot:t}}),o=r[0].inst,i=r[1];return qh(function(){o.value=n,o.getSnapshot=t,Fi(o)&&i({inst:o})},[e,n,t]),Vh(function(){return Fi(o)&&i({inst:o}),e(function(){Fi(o)&&i({inst:o})})},[e]),Kh(n),n}function Fi(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!zh(e,n)}catch{return!0}}function Xh(e,t){return t()}var Gh=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Xh:Uh;Au.useSyncExternalStore=Wr.useSyncExternalStore!==void 0?Wr.useSyncExternalStore:Gh;Iu.exports=Au;var Zh=Iu.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Va=b,Qh=Zh;function Jh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var em=typeof Object.is=="function"?Object.is:Jh,tm=Qh.useSyncExternalStore,nm=Va.useRef,rm=Va.useEffect,om=Va.useMemo,am=Va.useDebugValue;Mu.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var i=nm(null);if(i.current===null){var s={hasValue:!1,value:null};i.current=s}else s=i.current;i=om(function(){function u(w){if(!f){if(f=!0,h=w,w=r(w),o!==void 0&&s.hasValue){var S=s.value;if(o(S,w))return p=S}return p=w}if(S=p,em(h,w))return S;var k=r(w);return o!==void 0&&o(S,k)?S:(h=w,p=k)}var f=!1,h,p,y=n===void 0?null:n;return[function(){return u(t())},y===null?void 0:function(){return u(y())}]},[t,n,r,o]);var l=tm(e,i[0],i[1]);return rm(function(){s.hasValue=!0,s.value=l},[l]),am(l),l};Pu.exports=Mu;var im=Pu.exports;const sm=Qs(im),cm={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1},al=e=>{let t;const n=new Set,r=(h,p)=>{const y=typeof h=="function"?h(t):h;if(!Object.is(y,t)){const w=t;t=p??(typeof y!="object"||y===null)?y:Object.assign({},t,y),n.forEach(S=>S(t,w))}},o=()=>t,u={setState:r,getState:o,getInitialState:()=>f,subscribe:h=>(n.add(h),()=>n.delete(h)),destroy:()=>{(cm?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},f=t=e(r,o,u);return u},lm=e=>e?al(e):al,{useDebugValue:um}=B,{useSyncExternalStoreWithSelector:dm}=sm,fm=e=>e;function $u(e,t=fm,n){const r=dm(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return um(r),r}const il=(e,t)=>{const n=lm(e),r=(o,i=t)=>$u(n,o,i);return Object.assign(r,n),r},hm=(e,t)=>e?il(e,t):il;function St(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var mm={value:()=>{}};function qa(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new _a(n)}function _a(e){this._=e}function pm(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}_a.prototype=qa.prototype={constructor:_a,on:function(e,t){var n=this._,r=pm(e+"",n),o,i=-1,s=r.length;if(arguments.length<2){for(;++i<s;)if((o=(e=r[i]).type)&&(o=gm(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<s;)if(o=(e=r[i]).type)n[o]=sl(n[o],e.name,t);else if(t==null)for(o in n)n[o]=sl(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new _a(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,i;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};function gm(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function sl(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=mm,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var ss="http://www.w3.org/1999/xhtml";const cl={svg:"http://www.w3.org/2000/svg",xhtml:ss,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ka(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),cl.hasOwnProperty(t)?{space:cl[t],local:e}:e}function ym(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ss&&t.documentElement.namespaceURI===ss?t.createElement(e):t.createElementNS(n,e)}}function vm(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ru(e){var t=Ka(e);return(t.local?vm:ym)(t)}function wm(){}function Js(e){return e==null?wm:function(){return this.querySelector(e)}}function bm(e){typeof e!="function"&&(e=Js(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,l=r[o]=new Array(s),u,f,h=0;h<s;++h)(u=i[h])&&(f=e.call(u,u.__data__,h,i))&&("__data__"in u&&(f.__data__=u.__data__),l[h]=f);return new Kt(r,this._parents)}function xm(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Sm(){return[]}function Lu(e){return e==null?Sm:function(){return this.querySelectorAll(e)}}function km(e){return function(){return xm(e.apply(this,arguments))}}function _m(e){typeof e=="function"?e=km(e):e=Lu(e);for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var s=t[i],l=s.length,u,f=0;f<l;++f)(u=s[f])&&(r.push(e.call(u,u.__data__,f,s)),o.push(u));return new Kt(r,o)}function Fu(e){return function(){return this.matches(e)}}function Wu(e){return function(t){return t.matches(e)}}var Em=Array.prototype.find;function Nm(e){return function(){return Em.call(this.children,e)}}function Cm(){return this.firstElementChild}function Tm(e){return this.select(e==null?Cm:Nm(typeof e=="function"?e:Wu(e)))}var Dm=Array.prototype.filter;function Om(){return Array.from(this.children)}function jm(e){return function(){return Dm.call(this.children,e)}}function Pm(e){return this.selectAll(e==null?Om:jm(typeof e=="function"?e:Wu(e)))}function Mm(e){typeof e!="function"&&(e=Fu(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,l=r[o]=[],u,f=0;f<s;++f)(u=i[f])&&e.call(u,u.__data__,f,i)&&l.push(u);return new Kt(r,this._parents)}function Bu(e){return new Array(e.length)}function Im(){return new Kt(this._enter||this._groups.map(Bu),this._parents)}function Da(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Da.prototype={constructor:Da,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Am(e){return function(){return e}}function $m(e,t,n,r,o,i){for(var s=0,l,u=t.length,f=i.length;s<f;++s)(l=t[s])?(l.__data__=i[s],r[s]=l):n[s]=new Da(e,i[s]);for(;s<u;++s)(l=t[s])&&(o[s]=l)}function Rm(e,t,n,r,o,i,s){var l,u,f=new Map,h=t.length,p=i.length,y=new Array(h),w;for(l=0;l<h;++l)(u=t[l])&&(y[l]=w=s.call(u,u.__data__,l,t)+"",f.has(w)?o[l]=u:f.set(w,u));for(l=0;l<p;++l)w=s.call(e,i[l],l,i)+"",(u=f.get(w))?(r[l]=u,u.__data__=i[l],f.delete(w)):n[l]=new Da(e,i[l]);for(l=0;l<h;++l)(u=t[l])&&f.get(y[l])===u&&(o[l]=u)}function Lm(e){return e.__data__}function Fm(e,t){if(!arguments.length)return Array.from(this,Lm);var n=t?Rm:$m,r=this._parents,o=this._groups;typeof e!="function"&&(e=Am(e));for(var i=o.length,s=new Array(i),l=new Array(i),u=new Array(i),f=0;f<i;++f){var h=r[f],p=o[f],y=p.length,w=Wm(e.call(h,h&&h.__data__,f,r)),S=w.length,k=l[f]=new Array(S),N=s[f]=new Array(S),C=u[f]=new Array(y);n(h,p,k,N,C,w,t);for(var R=0,I=0,T,X;R<S;++R)if(T=k[R]){for(R>=I&&(I=R+1);!(X=N[I])&&++I<S;);T._next=X||null}}return s=new Kt(s,r),s._enter=l,s._exit=u,s}function Wm(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Bm(){return new Kt(this._exit||this._groups.map(Bu),this._parents)}function Hm(e,t,n){var r=this.enter(),o=this,i=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?i.remove():n(i),r&&o?r.merge(o).order():o}function zm(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,i=r.length,s=Math.min(o,i),l=new Array(o),u=0;u<s;++u)for(var f=n[u],h=r[u],p=f.length,y=l[u]=new Array(p),w,S=0;S<p;++S)(w=f[S]||h[S])&&(y[S]=w);for(;u<o;++u)l[u]=n[u];return new Kt(l,this._parents)}function Ym(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,i=r[o],s;--o>=0;)(s=r[o])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function Vm(e){e||(e=qm);function t(p,y){return p&&y?e(p.__data__,y.__data__):!p-!y}for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var s=n[i],l=s.length,u=o[i]=new Array(l),f,h=0;h<l;++h)(f=s[h])&&(u[h]=f);u.sort(t)}return new Kt(o,this._parents).order()}function qm(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Km(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Um(){return Array.from(this)}function Xm(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var s=r[o];if(s)return s}return null}function Gm(){let e=0;for(const t of this)++e;return e}function Zm(){return!this.node()}function Qm(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],i=0,s=o.length,l;i<s;++i)(l=o[i])&&e.call(l,l.__data__,i,o);return this}function Jm(e){return function(){this.removeAttribute(e)}}function ep(e){return function(){this.removeAttributeNS(e.space,e.local)}}function tp(e,t){return function(){this.setAttribute(e,t)}}function np(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function rp(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function op(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function ap(e,t){var n=Ka(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?ep:Jm:typeof t=="function"?n.local?op:rp:n.local?np:tp)(n,t))}function Hu(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ip(e){return function(){this.style.removeProperty(e)}}function sp(e,t,n){return function(){this.style.setProperty(e,t,n)}}function cp(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function lp(e,t,n){return arguments.length>1?this.each((t==null?ip:typeof t=="function"?cp:sp)(e,t,n??"")):Br(this.node(),e)}function Br(e,t){return e.style.getPropertyValue(t)||Hu(e).getComputedStyle(e,null).getPropertyValue(t)}function up(e){return function(){delete this[e]}}function dp(e,t){return function(){this[e]=t}}function fp(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function hp(e,t){return arguments.length>1?this.each((t==null?up:typeof t=="function"?fp:dp)(e,t)):this.node()[e]}function zu(e){return e.trim().split(/^|\s+/)}function ec(e){return e.classList||new Yu(e)}function Yu(e){this._node=e,this._names=zu(e.getAttribute("class")||"")}Yu.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Vu(e,t){for(var n=ec(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function qu(e,t){for(var n=ec(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function mp(e){return function(){Vu(this,e)}}function pp(e){return function(){qu(this,e)}}function gp(e,t){return function(){(t.apply(this,arguments)?Vu:qu)(this,e)}}function yp(e,t){var n=zu(e+"");if(arguments.length<2){for(var r=ec(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?gp:t?mp:pp)(n,t))}function vp(){this.textContent=""}function wp(e){return function(){this.textContent=e}}function bp(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function xp(e){return arguments.length?this.each(e==null?vp:(typeof e=="function"?bp:wp)(e)):this.node().textContent}function Sp(){this.innerHTML=""}function kp(e){return function(){this.innerHTML=e}}function _p(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Ep(e){return arguments.length?this.each(e==null?Sp:(typeof e=="function"?_p:kp)(e)):this.node().innerHTML}function Np(){this.nextSibling&&this.parentNode.appendChild(this)}function Cp(){return this.each(Np)}function Tp(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Dp(){return this.each(Tp)}function Op(e){var t=typeof e=="function"?e:Ru(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function jp(){return null}function Pp(e,t){var n=typeof e=="function"?e:Ru(e),r=t==null?jp:typeof t=="function"?t:Js(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Mp(){var e=this.parentNode;e&&e.removeChild(this)}function Ip(){return this.each(Mp)}function Ap(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function $p(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Rp(e){return this.select(e?$p:Ap)}function Lp(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Fp(e){return function(t){e.call(this,t,this.__data__)}}function Wp(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Bp(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,i;n<o;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function Hp(e,t,n){return function(){var r=this.__on,o,i=Fp(t);if(r){for(var s=0,l=r.length;s<l;++s)if((o=r[s]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),o.value=t;return}}this.addEventListener(e.type,i,n),o={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(o):this.__on=[o]}}function zp(e,t,n){var r=Wp(e+""),o,i=r.length,s;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,f=l.length,h;u<f;++u)for(o=0,h=l[u];o<i;++o)if((s=r[o]).type===h.type&&s.name===h.name)return h.value}return}for(l=t?Hp:Bp,o=0;o<i;++o)this.each(l(r[o],t,n));return this}function Ku(e,t,n){var r=Hu(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function Yp(e,t){return function(){return Ku(this,e,t)}}function Vp(e,t){return function(){return Ku(this,e,t.apply(this,arguments))}}function qp(e,t){return this.each((typeof t=="function"?Vp:Yp)(e,t))}function*Kp(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length,s;o<i;++o)(s=r[o])&&(yield s)}var Uu=[null];function Kt(e,t){this._groups=e,this._parents=t}function Io(){return new Kt([[document.documentElement]],Uu)}function Up(){return this}Kt.prototype=Io.prototype={constructor:Kt,select:bm,selectAll:_m,selectChild:Tm,selectChildren:Pm,filter:Mm,data:Fm,enter:Im,exit:Bm,join:Hm,merge:zm,selection:Up,order:Ym,sort:Vm,call:Km,nodes:Um,node:Xm,size:Gm,empty:Zm,each:Qm,attr:ap,style:lp,property:hp,classed:yp,text:xp,html:Ep,raise:Cp,lower:Dp,append:Op,insert:Pp,remove:Ip,clone:Rp,datum:Lp,on:zp,dispatch:qp,[Symbol.iterator]:Kp};function Gt(e){return typeof e=="string"?new Kt([[document.querySelector(e)]],[document.documentElement]):new Kt([[e]],Uu)}function Xp(e){let t;for(;t=e.sourceEvent;)e=t;return e}function tn(e,t){if(e=Xp(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const Gp={passive:!1},xo={capture:!0,passive:!1};function Wi(e){e.stopImmediatePropagation()}function Rr(e){e.preventDefault(),e.stopImmediatePropagation()}function Xu(e){var t=e.document.documentElement,n=Gt(e).on("dragstart.drag",Rr,xo);"onselectstart"in t?n.on("selectstart.drag",Rr,xo):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Gu(e,t){var n=e.document.documentElement,r=Gt(e).on("dragstart.drag",null);t&&(r.on("click.drag",Rr,xo),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const ua=e=>()=>e;function cs(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:i,x:s,y:l,dx:u,dy:f,dispatch:h}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:h}})}cs.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Zp(e){return!e.ctrlKey&&!e.button}function Qp(){return this.parentNode}function Jp(e,t){return t??{x:e.x,y:e.y}}function eg(){return navigator.maxTouchPoints||"ontouchstart"in this}function tg(){var e=Zp,t=Qp,n=Jp,r=eg,o={},i=qa("start","drag","end"),s=0,l,u,f,h,p=0;function y(T){T.on("mousedown.drag",w).filter(r).on("touchstart.drag",N).on("touchmove.drag",C,Gp).on("touchend.drag touchcancel.drag",R).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function w(T,X){if(!(h||!e.call(this,T,X))){var q=I(this,t.call(this,T,X),T,X,"mouse");q&&(Gt(T.view).on("mousemove.drag",S,xo).on("mouseup.drag",k,xo),Xu(T.view),Wi(T),f=!1,l=T.clientX,u=T.clientY,q("start",T))}}function S(T){if(Rr(T),!f){var X=T.clientX-l,q=T.clientY-u;f=X*X+q*q>p}o.mouse("drag",T)}function k(T){Gt(T.view).on("mousemove.drag mouseup.drag",null),Gu(T.view,f),Rr(T),o.mouse("end",T)}function N(T,X){if(e.call(this,T,X)){var q=T.changedTouches,V=t.call(this,T,X),J=q.length,U,te;for(U=0;U<J;++U)(te=I(this,V,T,X,q[U].identifier,q[U]))&&(Wi(T),te("start",T,q[U]))}}function C(T){var X=T.changedTouches,q=X.length,V,J;for(V=0;V<q;++V)(J=o[X[V].identifier])&&(Rr(T),J("drag",T,X[V]))}function R(T){var X=T.changedTouches,q=X.length,V,J;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),V=0;V<q;++V)(J=o[X[V].identifier])&&(Wi(T),J("end",T,X[V]))}function I(T,X,q,V,J,U){var te=i.copy(),K=tn(U||q,X),oe,ce,_;if((_=n.call(T,new cs("beforestart",{sourceEvent:q,target:y,identifier:J,active:s,x:K[0],y:K[1],dx:0,dy:0,dispatch:te}),V))!=null)return oe=_.x-K[0]||0,ce=_.y-K[1]||0,function M(P,G,ie){var j=K,Q;switch(P){case"start":o[J]=M,Q=s++;break;case"end":delete o[J],--s;case"drag":K=tn(ie||G,X),Q=s;break}te.call(P,T,new cs(P,{sourceEvent:G,subject:_,target:y,identifier:J,active:Q,x:K[0]+oe,y:K[1]+ce,dx:K[0]-j[0],dy:K[1]-j[1],dispatch:te}),V)}}return y.filter=function(T){return arguments.length?(e=typeof T=="function"?T:ua(!!T),y):e},y.container=function(T){return arguments.length?(t=typeof T=="function"?T:ua(T),y):t},y.subject=function(T){return arguments.length?(n=typeof T=="function"?T:ua(T),y):n},y.touchable=function(T){return arguments.length?(r=typeof T=="function"?T:ua(!!T),y):r},y.on=function(){var T=i.on.apply(i,arguments);return T===i?y:T},y.clickDistance=function(T){return arguments.length?(p=(T=+T)*T,y):Math.sqrt(p)},y}function tc(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Zu(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ao(){}var So=.7,Oa=1/So,Lr="\\s*([+-]?\\d+)\\s*",ko="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",gn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ng=/^#([0-9a-f]{3,8})$/,rg=new RegExp(`^rgb\\(${Lr},${Lr},${Lr}\\)$`),og=new RegExp(`^rgb\\(${gn},${gn},${gn}\\)$`),ag=new RegExp(`^rgba\\(${Lr},${Lr},${Lr},${ko}\\)$`),ig=new RegExp(`^rgba\\(${gn},${gn},${gn},${ko}\\)$`),sg=new RegExp(`^hsl\\(${ko},${gn},${gn}\\)$`),cg=new RegExp(`^hsla\\(${ko},${gn},${gn},${ko}\\)$`),ll={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};tc(Ao,_o,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ul,formatHex:ul,formatHex8:lg,formatHsl:ug,formatRgb:dl,toString:dl});function ul(){return this.rgb().formatHex()}function lg(){return this.rgb().formatHex8()}function ug(){return Qu(this).formatHsl()}function dl(){return this.rgb().formatRgb()}function _o(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ng.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?fl(t):n===3?new Bt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?da(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?da(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=rg.exec(e))?new Bt(t[1],t[2],t[3],1):(t=og.exec(e))?new Bt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ag.exec(e))?da(t[1],t[2],t[3],t[4]):(t=ig.exec(e))?da(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=sg.exec(e))?pl(t[1],t[2]/100,t[3]/100,1):(t=cg.exec(e))?pl(t[1],t[2]/100,t[3]/100,t[4]):ll.hasOwnProperty(e)?fl(ll[e]):e==="transparent"?new Bt(NaN,NaN,NaN,0):null}function fl(e){return new Bt(e>>16&255,e>>8&255,e&255,1)}function da(e,t,n,r){return r<=0&&(e=t=n=NaN),new Bt(e,t,n,r)}function dg(e){return e instanceof Ao||(e=_o(e)),e?(e=e.rgb(),new Bt(e.r,e.g,e.b,e.opacity)):new Bt}function ls(e,t,n,r){return arguments.length===1?dg(e):new Bt(e,t,n,r??1)}function Bt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}tc(Bt,ls,Zu(Ao,{brighter(e){return e=e==null?Oa:Math.pow(Oa,e),new Bt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?So:Math.pow(So,e),new Bt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Bt(hr(this.r),hr(this.g),hr(this.b),ja(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:hl,formatHex:hl,formatHex8:fg,formatRgb:ml,toString:ml}));function hl(){return`#${ur(this.r)}${ur(this.g)}${ur(this.b)}`}function fg(){return`#${ur(this.r)}${ur(this.g)}${ur(this.b)}${ur((isNaN(this.opacity)?1:this.opacity)*255)}`}function ml(){const e=ja(this.opacity);return`${e===1?"rgb(":"rgba("}${hr(this.r)}, ${hr(this.g)}, ${hr(this.b)}${e===1?")":`, ${e})`}`}function ja(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function hr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ur(e){return e=hr(e),(e<16?"0":"")+e.toString(16)}function pl(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new nn(e,t,n,r)}function Qu(e){if(e instanceof nn)return new nn(e.h,e.s,e.l,e.opacity);if(e instanceof Ao||(e=_o(e)),!e)return new nn;if(e instanceof nn)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),s=NaN,l=i-o,u=(i+o)/2;return l?(t===i?s=(n-r)/l+(n<r)*6:n===i?s=(r-t)/l+2:s=(t-n)/l+4,l/=u<.5?i+o:2-i-o,s*=60):l=u>0&&u<1?0:s,new nn(s,l,u,e.opacity)}function hg(e,t,n,r){return arguments.length===1?Qu(e):new nn(e,t,n,r??1)}function nn(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}tc(nn,hg,Zu(Ao,{brighter(e){return e=e==null?Oa:Math.pow(Oa,e),new nn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?So:Math.pow(So,e),new nn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new Bt(Bi(e>=240?e-240:e+120,o,r),Bi(e,o,r),Bi(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new nn(gl(this.h),fa(this.s),fa(this.l),ja(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ja(this.opacity);return`${e===1?"hsl(":"hsla("}${gl(this.h)}, ${fa(this.s)*100}%, ${fa(this.l)*100}%${e===1?")":`, ${e})`}`}}));function gl(e){return e=(e||0)%360,e<0?e+360:e}function fa(e){return Math.max(0,Math.min(1,e||0))}function Bi(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ju=e=>()=>e;function mg(e,t){return function(n){return e+n*t}}function pg(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function gg(e){return(e=+e)==1?ed:function(t,n){return n-t?pg(t,n,e):Ju(isNaN(t)?n:t)}}function ed(e,t){var n=t-e;return n?mg(e,n):Ju(isNaN(e)?t:e)}const yl=function e(t){var n=gg(t);function r(o,i){var s=n((o=ls(o)).r,(i=ls(i)).r),l=n(o.g,i.g),u=n(o.b,i.b),f=ed(o.opacity,i.opacity);return function(h){return o.r=s(h),o.g=l(h),o.b=u(h),o.opacity=f(h),o+""}}return r.gamma=e,r}(1);function Vn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var us=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Hi=new RegExp(us.source,"g");function yg(e){return function(){return e}}function vg(e){return function(t){return e(t)+""}}function wg(e,t){var n=us.lastIndex=Hi.lastIndex=0,r,o,i,s=-1,l=[],u=[];for(e=e+"",t=t+"";(r=us.exec(e))&&(o=Hi.exec(t));)(i=o.index)>n&&(i=t.slice(n,i),l[s]?l[s]+=i:l[++s]=i),(r=r[0])===(o=o[0])?l[s]?l[s]+=o:l[++s]=o:(l[++s]=null,u.push({i:s,x:Vn(r,o)})),n=Hi.lastIndex;return n<t.length&&(i=t.slice(n),l[s]?l[s]+=i:l[++s]=i),l.length<2?u[0]?vg(u[0].x):yg(t):(t=u.length,function(f){for(var h=0,p;h<t;++h)l[(p=u[h]).i]=p.x(f);return l.join("")})}var vl=180/Math.PI,ds={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function td(e,t,n,r,o,i){var s,l,u;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,u/=l),e*r<t*n&&(e=-e,t=-t,u=-u,s=-s),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*vl,skewX:Math.atan(u)*vl,scaleX:s,scaleY:l}}var ha;function bg(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?ds:td(t.a,t.b,t.c,t.d,t.e,t.f)}function xg(e){return e==null||(ha||(ha=document.createElementNS("http://www.w3.org/2000/svg","g")),ha.setAttribute("transform",e),!(e=ha.transform.baseVal.consolidate()))?ds:(e=e.matrix,td(e.a,e.b,e.c,e.d,e.e,e.f))}function nd(e,t,n,r){function o(f){return f.length?f.pop()+" ":""}function i(f,h,p,y,w,S){if(f!==p||h!==y){var k=w.push("translate(",null,t,null,n);S.push({i:k-4,x:Vn(f,p)},{i:k-2,x:Vn(h,y)})}else(p||y)&&w.push("translate("+p+t+y+n)}function s(f,h,p,y){f!==h?(f-h>180?h+=360:h-f>180&&(f+=360),y.push({i:p.push(o(p)+"rotate(",null,r)-2,x:Vn(f,h)})):h&&p.push(o(p)+"rotate("+h+r)}function l(f,h,p,y){f!==h?y.push({i:p.push(o(p)+"skewX(",null,r)-2,x:Vn(f,h)}):h&&p.push(o(p)+"skewX("+h+r)}function u(f,h,p,y,w,S){if(f!==p||h!==y){var k=w.push(o(w)+"scale(",null,",",null,")");S.push({i:k-4,x:Vn(f,p)},{i:k-2,x:Vn(h,y)})}else(p!==1||y!==1)&&w.push(o(w)+"scale("+p+","+y+")")}return function(f,h){var p=[],y=[];return f=e(f),h=e(h),i(f.translateX,f.translateY,h.translateX,h.translateY,p,y),s(f.rotate,h.rotate,p,y),l(f.skewX,h.skewX,p,y),u(f.scaleX,f.scaleY,h.scaleX,h.scaleY,p,y),f=h=null,function(w){for(var S=-1,k=y.length,N;++S<k;)p[(N=y[S]).i]=N.x(w);return p.join("")}}}var Sg=nd(bg,"px, ","px)","deg)"),kg=nd(xg,", ",")",")"),_g=1e-12;function wl(e){return((e=Math.exp(e))+1/e)/2}function Eg(e){return((e=Math.exp(e))-1/e)/2}function Ng(e){return((e=Math.exp(2*e))-1)/(e+1)}const Cg=function e(t,n,r){function o(i,s){var l=i[0],u=i[1],f=i[2],h=s[0],p=s[1],y=s[2],w=h-l,S=p-u,k=w*w+S*S,N,C;if(k<_g)C=Math.log(y/f)/t,N=function(V){return[l+V*w,u+V*S,f*Math.exp(t*V*C)]};else{var R=Math.sqrt(k),I=(y*y-f*f+r*k)/(2*f*n*R),T=(y*y-f*f-r*k)/(2*y*n*R),X=Math.log(Math.sqrt(I*I+1)-I),q=Math.log(Math.sqrt(T*T+1)-T);C=(q-X)/t,N=function(V){var J=V*C,U=wl(X),te=f/(n*R)*(U*Ng(t*J+X)-Eg(X));return[l+te*w,u+te*S,f*U/wl(t*J+X)]}}return N.duration=C*1e3*t/Math.SQRT2,N}return o.rho=function(i){var s=Math.max(.001,+i),l=s*s,u=l*l;return e(s,l,u)},o}(Math.SQRT2,2,4);var Hr=0,mo=0,ao=0,rd=1e3,Pa,po,Ma=0,vr=0,Ua=0,Eo=typeof performance=="object"&&performance.now?performance:Date,od=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function nc(){return vr||(od(Tg),vr=Eo.now()+Ua)}function Tg(){vr=0}function Ia(){this._call=this._time=this._next=null}Ia.prototype=ad.prototype={constructor:Ia,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?nc():+n)+(t==null?0:+t),!this._next&&po!==this&&(po?po._next=this:Pa=this,po=this),this._call=e,this._time=n,fs()},stop:function(){this._call&&(this._call=null,this._time=1/0,fs())}};function ad(e,t,n){var r=new Ia;return r.restart(e,t,n),r}function Dg(){nc(),++Hr;for(var e=Pa,t;e;)(t=vr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Hr}function bl(){vr=(Ma=Eo.now())+Ua,Hr=mo=0;try{Dg()}finally{Hr=0,jg(),vr=0}}function Og(){var e=Eo.now(),t=e-Ma;t>rd&&(Ua-=t,Ma=e)}function jg(){for(var e,t=Pa,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Pa=n);po=e,fs(r)}function fs(e){if(!Hr){mo&&(mo=clearTimeout(mo));var t=e-vr;t>24?(e<1/0&&(mo=setTimeout(bl,e-Eo.now()-Ua)),ao&&(ao=clearInterval(ao))):(ao||(Ma=Eo.now(),ao=setInterval(Og,rd)),Hr=1,od(bl))}}function xl(e,t,n){var r=new Ia;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var Pg=qa("start","end","cancel","interrupt"),Mg=[],id=0,Sl=1,hs=2,Ea=3,kl=4,ms=5,Na=6;function Xa(e,t,n,r,o,i){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;Ig(e,n,{name:t,index:r,group:o,on:Pg,tween:Mg,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:id})}function rc(e,t){var n=an(e,t);if(n.state>id)throw new Error("too late; already scheduled");return n}function yn(e,t){var n=an(e,t);if(n.state>Ea)throw new Error("too late; already running");return n}function an(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Ig(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=ad(i,0,n.time);function i(f){n.state=Sl,n.timer.restart(s,n.delay,n.time),n.delay<=f&&s(f-n.delay)}function s(f){var h,p,y,w;if(n.state!==Sl)return u();for(h in r)if(w=r[h],w.name===n.name){if(w.state===Ea)return xl(s);w.state===kl?(w.state=Na,w.timer.stop(),w.on.call("interrupt",e,e.__data__,w.index,w.group),delete r[h]):+h<t&&(w.state=Na,w.timer.stop(),w.on.call("cancel",e,e.__data__,w.index,w.group),delete r[h])}if(xl(function(){n.state===Ea&&(n.state=kl,n.timer.restart(l,n.delay,n.time),l(f))}),n.state=hs,n.on.call("start",e,e.__data__,n.index,n.group),n.state===hs){for(n.state=Ea,o=new Array(y=n.tween.length),h=0,p=-1;h<y;++h)(w=n.tween[h].value.call(e,e.__data__,n.index,n.group))&&(o[++p]=w);o.length=p+1}}function l(f){for(var h=f<n.duration?n.ease.call(null,f/n.duration):(n.timer.restart(u),n.state=ms,1),p=-1,y=o.length;++p<y;)o[p].call(e,h);n.state===ms&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Na,n.timer.stop(),delete r[t];for(var f in r)return;delete e.__transition}}function Ca(e,t){var n=e.__transition,r,o,i=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){i=!1;continue}o=r.state>hs&&r.state<ms,r.state=Na,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}i&&delete e.__transition}}function Ag(e){return this.each(function(){Ca(this,e)})}function $g(e,t){var n,r;return function(){var o=yn(this,e),i=o.tween;if(i!==n){r=n=i;for(var s=0,l=r.length;s<l;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}o.tween=r}}function Rg(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var i=yn(this,e),s=i.tween;if(s!==r){o=(r=s).slice();for(var l={name:t,value:n},u=0,f=o.length;u<f;++u)if(o[u].name===t){o[u]=l;break}u===f&&o.push(l)}i.tween=o}}function Lg(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=an(this.node(),n).tween,o=0,i=r.length,s;o<i;++o)if((s=r[o]).name===e)return s.value;return null}return this.each((t==null?$g:Rg)(n,e,t))}function oc(e,t,n){var r=e._id;return e.each(function(){var o=yn(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return an(o,r).value[t]}}function sd(e,t){var n;return(typeof t=="number"?Vn:t instanceof _o?yl:(n=_o(t))?(t=n,yl):wg)(e,t)}function Fg(e){return function(){this.removeAttribute(e)}}function Wg(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Bg(e,t,n){var r,o=n+"",i;return function(){var s=this.getAttribute(e);return s===o?null:s===r?i:i=t(r=s,n)}}function Hg(e,t,n){var r,o=n+"",i;return function(){var s=this.getAttributeNS(e.space,e.local);return s===o?null:s===r?i:i=t(r=s,n)}}function zg(e,t,n){var r,o,i;return function(){var s,l=n(this),u;return l==null?void this.removeAttribute(e):(s=this.getAttribute(e),u=l+"",s===u?null:s===r&&u===o?i:(o=u,i=t(r=s,l)))}}function Yg(e,t,n){var r,o,i;return function(){var s,l=n(this),u;return l==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),u=l+"",s===u?null:s===r&&u===o?i:(o=u,i=t(r=s,l)))}}function Vg(e,t){var n=Ka(e),r=n==="transform"?kg:sd;return this.attrTween(e,typeof t=="function"?(n.local?Yg:zg)(n,r,oc(this,"attr."+e,t)):t==null?(n.local?Wg:Fg)(n):(n.local?Hg:Bg)(n,r,t))}function qg(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Kg(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Ug(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Kg(e,i)),n}return o._value=t,o}function Xg(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&qg(e,i)),n}return o._value=t,o}function Gg(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Ka(e);return this.tween(n,(r.local?Ug:Xg)(r,t))}function Zg(e,t){return function(){rc(this,e).delay=+t.apply(this,arguments)}}function Qg(e,t){return t=+t,function(){rc(this,e).delay=t}}function Jg(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Zg:Qg)(t,e)):an(this.node(),t).delay}function ey(e,t){return function(){yn(this,e).duration=+t.apply(this,arguments)}}function ty(e,t){return t=+t,function(){yn(this,e).duration=t}}function ny(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ey:ty)(t,e)):an(this.node(),t).duration}function ry(e,t){if(typeof t!="function")throw new Error;return function(){yn(this,e).ease=t}}function oy(e){var t=this._id;return arguments.length?this.each(ry(t,e)):an(this.node(),t).ease}function ay(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;yn(this,e).ease=n}}function iy(e){if(typeof e!="function")throw new Error;return this.each(ay(this._id,e))}function sy(e){typeof e!="function"&&(e=Fu(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,l=r[o]=[],u,f=0;f<s;++f)(u=i[f])&&e.call(u,u.__data__,f,i)&&l.push(u);return new jn(r,this._parents,this._name,this._id)}function cy(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),s=new Array(r),l=0;l<i;++l)for(var u=t[l],f=n[l],h=u.length,p=s[l]=new Array(h),y,w=0;w<h;++w)(y=u[w]||f[w])&&(p[w]=y);for(;l<r;++l)s[l]=t[l];return new jn(s,this._parents,this._name,this._id)}function ly(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function uy(e,t,n){var r,o,i=ly(t)?rc:yn;return function(){var s=i(this,e),l=s.on;l!==r&&(o=(r=l).copy()).on(t,n),s.on=o}}function dy(e,t){var n=this._id;return arguments.length<2?an(this.node(),n).on.on(e):this.each(uy(n,e,t))}function fy(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function hy(){return this.on("end.remove",fy(this._id))}function my(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Js(e));for(var r=this._groups,o=r.length,i=new Array(o),s=0;s<o;++s)for(var l=r[s],u=l.length,f=i[s]=new Array(u),h,p,y=0;y<u;++y)(h=l[y])&&(p=e.call(h,h.__data__,y,l))&&("__data__"in h&&(p.__data__=h.__data__),f[y]=p,Xa(f[y],t,n,y,f,an(h,n)));return new jn(i,this._parents,t,n)}function py(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Lu(e));for(var r=this._groups,o=r.length,i=[],s=[],l=0;l<o;++l)for(var u=r[l],f=u.length,h,p=0;p<f;++p)if(h=u[p]){for(var y=e.call(h,h.__data__,p,u),w,S=an(h,n),k=0,N=y.length;k<N;++k)(w=y[k])&&Xa(w,t,n,k,y,S);i.push(y),s.push(h)}return new jn(i,s,t,n)}var gy=Io.prototype.constructor;function yy(){return new gy(this._groups,this._parents)}function vy(e,t){var n,r,o;return function(){var i=Br(this,e),s=(this.style.removeProperty(e),Br(this,e));return i===s?null:i===n&&s===r?o:o=t(n=i,r=s)}}function cd(e){return function(){this.style.removeProperty(e)}}function wy(e,t,n){var r,o=n+"",i;return function(){var s=Br(this,e);return s===o?null:s===r?i:i=t(r=s,n)}}function by(e,t,n){var r,o,i;return function(){var s=Br(this,e),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(e),Br(this,e))),s===u?null:s===r&&u===o?i:(o=u,i=t(r=s,l))}}function xy(e,t){var n,r,o,i="style."+t,s="end."+i,l;return function(){var u=yn(this,e),f=u.on,h=u.value[i]==null?l||(l=cd(t)):void 0;(f!==n||o!==h)&&(r=(n=f).copy()).on(s,o=h),u.on=r}}function Sy(e,t,n){var r=(e+="")=="transform"?Sg:sd;return t==null?this.styleTween(e,vy(e,r)).on("end.style."+e,cd(e)):typeof t=="function"?this.styleTween(e,by(e,r,oc(this,"style."+e,t))).each(xy(this._id,e)):this.styleTween(e,wy(e,r,t),n).on("end.style."+e,null)}function ky(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function _y(e,t,n){var r,o;function i(){var s=t.apply(this,arguments);return s!==o&&(r=(o=s)&&ky(e,s,n)),r}return i._value=t,i}function Ey(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,_y(e,t,n??""))}function Ny(e){return function(){this.textContent=e}}function Cy(e){return function(){var t=e(this);this.textContent=t??""}}function Ty(e){return this.tween("text",typeof e=="function"?Cy(oc(this,"text",e)):Ny(e==null?"":e+""))}function Dy(e){return function(t){this.textContent=e.call(this,t)}}function Oy(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&Dy(o)),t}return r._value=e,r}function jy(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Oy(e))}function Py(){for(var e=this._name,t=this._id,n=ld(),r=this._groups,o=r.length,i=0;i<o;++i)for(var s=r[i],l=s.length,u,f=0;f<l;++f)if(u=s[f]){var h=an(u,t);Xa(u,e,n,f,s,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new jn(r,this._parents,e,n)}function My(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(i,s){var l={value:s},u={value:function(){--o===0&&i()}};n.each(function(){var f=yn(this,r),h=f.on;h!==e&&(t=(e=h).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(u)),f.on=t}),o===0&&i()})}var Iy=0;function jn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function ld(){return++Iy}var En=Io.prototype;jn.prototype={constructor:jn,select:my,selectAll:py,selectChild:En.selectChild,selectChildren:En.selectChildren,filter:sy,merge:cy,selection:yy,transition:Py,call:En.call,nodes:En.nodes,node:En.node,size:En.size,empty:En.empty,each:En.each,on:dy,attr:Vg,attrTween:Gg,style:Sy,styleTween:Ey,text:Ty,textTween:jy,remove:hy,tween:Lg,delay:Jg,duration:ny,ease:oy,easeVarying:iy,end:My,[Symbol.iterator]:En[Symbol.iterator]};function Ay(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var $y={time:null,delay:0,duration:250,ease:Ay};function Ry(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Ly(e){var t,n;e instanceof jn?(t=e._id,e=e._name):(t=ld(),(n=$y).time=nc(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var s=r[i],l=s.length,u,f=0;f<l;++f)(u=s[f])&&Xa(u,e,t,f,s,n||Ry(u,t));return new jn(r,this._parents,e,t)}Io.prototype.interrupt=Ag;Io.prototype.transition=Ly;const ma=e=>()=>e;function Fy(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function Tn(e,t,n){this.k=e,this.x=t,this.y=n}Tn.prototype={constructor:Tn,scale:function(e){return e===1?this:new Tn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Tn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Dn=new Tn(1,0,0);Tn.prototype;function zi(e){e.stopImmediatePropagation()}function io(e){e.preventDefault(),e.stopImmediatePropagation()}function Wy(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function By(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function _l(){return this.__zoom||Dn}function Hy(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function zy(){return navigator.maxTouchPoints||"ontouchstart"in this}function Yy(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function ud(){var e=Wy,t=By,n=Yy,r=Hy,o=zy,i=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],l=250,u=Cg,f=qa("start","zoom","end"),h,p,y,w=500,S=150,k=0,N=10;function C(_){_.property("__zoom",_l).on("wheel.zoom",J,{passive:!1}).on("mousedown.zoom",U).on("dblclick.zoom",te).filter(o).on("touchstart.zoom",K).on("touchmove.zoom",oe).on("touchend.zoom touchcancel.zoom",ce).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}C.transform=function(_,M,P,G){var ie=_.selection?_.selection():_;ie.property("__zoom",_l),_!==ie?X(_,M,P,G):ie.interrupt().each(function(){q(this,arguments).event(G).start().zoom(null,typeof M=="function"?M.apply(this,arguments):M).end()})},C.scaleBy=function(_,M,P,G){C.scaleTo(_,function(){var ie=this.__zoom.k,j=typeof M=="function"?M.apply(this,arguments):M;return ie*j},P,G)},C.scaleTo=function(_,M,P,G){C.transform(_,function(){var ie=t.apply(this,arguments),j=this.__zoom,Q=P==null?T(ie):typeof P=="function"?P.apply(this,arguments):P,ae=j.invert(Q),se=typeof M=="function"?M.apply(this,arguments):M;return n(I(R(j,se),Q,ae),ie,s)},P,G)},C.translateBy=function(_,M,P,G){C.transform(_,function(){return n(this.__zoom.translate(typeof M=="function"?M.apply(this,arguments):M,typeof P=="function"?P.apply(this,arguments):P),t.apply(this,arguments),s)},null,G)},C.translateTo=function(_,M,P,G,ie){C.transform(_,function(){var j=t.apply(this,arguments),Q=this.__zoom,ae=G==null?T(j):typeof G=="function"?G.apply(this,arguments):G;return n(Dn.translate(ae[0],ae[1]).scale(Q.k).translate(typeof M=="function"?-M.apply(this,arguments):-M,typeof P=="function"?-P.apply(this,arguments):-P),j,s)},G,ie)};function R(_,M){return M=Math.max(i[0],Math.min(i[1],M)),M===_.k?_:new Tn(M,_.x,_.y)}function I(_,M,P){var G=M[0]-P[0]*_.k,ie=M[1]-P[1]*_.k;return G===_.x&&ie===_.y?_:new Tn(_.k,G,ie)}function T(_){return[(+_[0][0]+ +_[1][0])/2,(+_[0][1]+ +_[1][1])/2]}function X(_,M,P,G){_.on("start.zoom",function(){q(this,arguments).event(G).start()}).on("interrupt.zoom end.zoom",function(){q(this,arguments).event(G).end()}).tween("zoom",function(){var ie=this,j=arguments,Q=q(ie,j).event(G),ae=t.apply(ie,j),se=P==null?T(ae):typeof P=="function"?P.apply(ie,j):P,fe=Math.max(ae[1][0]-ae[0][0],ae[1][1]-ae[0][1]),ve=ie.__zoom,ke=typeof M=="function"?M.apply(ie,j):M,Te=u(ve.invert(se).concat(fe/ve.k),ke.invert(se).concat(fe/ke.k));return function(Oe){if(Oe===1)Oe=ke;else{var Pe=Te(Oe),he=fe/Pe[2];Oe=new Tn(he,se[0]-Pe[0]*he,se[1]-Pe[1]*he)}Q.zoom(null,Oe)}})}function q(_,M,P){return!P&&_.__zooming||new V(_,M)}function V(_,M){this.that=_,this.args=M,this.active=0,this.sourceEvent=null,this.extent=t.apply(_,M),this.taps=0}V.prototype={event:function(_){return _&&(this.sourceEvent=_),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(_,M){return this.mouse&&_!=="mouse"&&(this.mouse[1]=M.invert(this.mouse[0])),this.touch0&&_!=="touch"&&(this.touch0[1]=M.invert(this.touch0[0])),this.touch1&&_!=="touch"&&(this.touch1[1]=M.invert(this.touch1[0])),this.that.__zoom=M,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(_){var M=Gt(this.that).datum();f.call(_,this.that,new Fy(_,{sourceEvent:this.sourceEvent,target:C,type:_,transform:this.that.__zoom,dispatch:f}),M)}};function J(_,...M){if(!e.apply(this,arguments))return;var P=q(this,M).event(_),G=this.__zoom,ie=Math.max(i[0],Math.min(i[1],G.k*Math.pow(2,r.apply(this,arguments)))),j=tn(_);if(P.wheel)(P.mouse[0][0]!==j[0]||P.mouse[0][1]!==j[1])&&(P.mouse[1]=G.invert(P.mouse[0]=j)),clearTimeout(P.wheel);else{if(G.k===ie)return;P.mouse=[j,G.invert(j)],Ca(this),P.start()}io(_),P.wheel=setTimeout(Q,S),P.zoom("mouse",n(I(R(G,ie),P.mouse[0],P.mouse[1]),P.extent,s));function Q(){P.wheel=null,P.end()}}function U(_,...M){if(y||!e.apply(this,arguments))return;var P=_.currentTarget,G=q(this,M,!0).event(_),ie=Gt(_.view).on("mousemove.zoom",se,!0).on("mouseup.zoom",fe,!0),j=tn(_,P),Q=_.clientX,ae=_.clientY;Xu(_.view),zi(_),G.mouse=[j,this.__zoom.invert(j)],Ca(this),G.start();function se(ve){if(io(ve),!G.moved){var ke=ve.clientX-Q,Te=ve.clientY-ae;G.moved=ke*ke+Te*Te>k}G.event(ve).zoom("mouse",n(I(G.that.__zoom,G.mouse[0]=tn(ve,P),G.mouse[1]),G.extent,s))}function fe(ve){ie.on("mousemove.zoom mouseup.zoom",null),Gu(ve.view,G.moved),io(ve),G.event(ve).end()}}function te(_,...M){if(e.apply(this,arguments)){var P=this.__zoom,G=tn(_.changedTouches?_.changedTouches[0]:_,this),ie=P.invert(G),j=P.k*(_.shiftKey?.5:2),Q=n(I(R(P,j),G,ie),t.apply(this,M),s);io(_),l>0?Gt(this).transition().duration(l).call(X,Q,G,_):Gt(this).call(C.transform,Q,G,_)}}function K(_,...M){if(e.apply(this,arguments)){var P=_.touches,G=P.length,ie=q(this,M,_.changedTouches.length===G).event(_),j,Q,ae,se;for(zi(_),Q=0;Q<G;++Q)ae=P[Q],se=tn(ae,this),se=[se,this.__zoom.invert(se),ae.identifier],ie.touch0?!ie.touch1&&ie.touch0[2]!==se[2]&&(ie.touch1=se,ie.taps=0):(ie.touch0=se,j=!0,ie.taps=1+!!h);h&&(h=clearTimeout(h)),j&&(ie.taps<2&&(p=se[0],h=setTimeout(function(){h=null},w)),Ca(this),ie.start())}}function oe(_,...M){if(this.__zooming){var P=q(this,M).event(_),G=_.changedTouches,ie=G.length,j,Q,ae,se;for(io(_),j=0;j<ie;++j)Q=G[j],ae=tn(Q,this),P.touch0&&P.touch0[2]===Q.identifier?P.touch0[0]=ae:P.touch1&&P.touch1[2]===Q.identifier&&(P.touch1[0]=ae);if(Q=P.that.__zoom,P.touch1){var fe=P.touch0[0],ve=P.touch0[1],ke=P.touch1[0],Te=P.touch1[1],Oe=(Oe=ke[0]-fe[0])*Oe+(Oe=ke[1]-fe[1])*Oe,Pe=(Pe=Te[0]-ve[0])*Pe+(Pe=Te[1]-ve[1])*Pe;Q=R(Q,Math.sqrt(Oe/Pe)),ae=[(fe[0]+ke[0])/2,(fe[1]+ke[1])/2],se=[(ve[0]+Te[0])/2,(ve[1]+Te[1])/2]}else if(P.touch0)ae=P.touch0[0],se=P.touch0[1];else return;P.zoom("touch",n(I(Q,ae,se),P.extent,s))}}function ce(_,...M){if(this.__zooming){var P=q(this,M).event(_),G=_.changedTouches,ie=G.length,j,Q;for(zi(_),y&&clearTimeout(y),y=setTimeout(function(){y=null},w),j=0;j<ie;++j)Q=G[j],P.touch0&&P.touch0[2]===Q.identifier?delete P.touch0:P.touch1&&P.touch1[2]===Q.identifier&&delete P.touch1;if(P.touch1&&!P.touch0&&(P.touch0=P.touch1,delete P.touch1),P.touch0)P.touch0[1]=this.__zoom.invert(P.touch0[0]);else if(P.end(),P.taps===2&&(Q=tn(Q,this),Math.hypot(p[0]-Q[0],p[1]-Q[1])<N)){var ae=Gt(this).on("dblclick.zoom");ae&&ae.apply(this,arguments)}}}return C.wheelDelta=function(_){return arguments.length?(r=typeof _=="function"?_:ma(+_),C):r},C.filter=function(_){return arguments.length?(e=typeof _=="function"?_:ma(!!_),C):e},C.touchable=function(_){return arguments.length?(o=typeof _=="function"?_:ma(!!_),C):o},C.extent=function(_){return arguments.length?(t=typeof _=="function"?_:ma([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),C):t},C.scaleExtent=function(_){return arguments.length?(i[0]=+_[0],i[1]=+_[1],C):[i[0],i[1]]},C.translateExtent=function(_){return arguments.length?(s[0][0]=+_[0][0],s[1][0]=+_[1][0],s[0][1]=+_[0][1],s[1][1]=+_[1][1],C):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},C.constrain=function(_){return arguments.length?(n=_,C):n},C.duration=function(_){return arguments.length?(l=+_,C):l},C.interpolate=function(_){return arguments.length?(u=_,C):u},C.on=function(){var _=f.on.apply(f,arguments);return _===f?C:_},C.clickDistance=function(_){return arguments.length?(k=(_=+_)*_,C):Math.sqrt(k)},C.tapDistance=function(_){return arguments.length?(N=+_,C):N},C}const Ga=b.createContext(null),Vy=Ga.Provider,Pn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},dd=Pn.error001();function tt(e,t){const n=b.useContext(Ga);if(n===null)throw new Error(dd);return $u(n,e,t)}const wt=()=>{const e=b.useContext(Ga);if(e===null)throw new Error(dd);return b.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},qy=e=>e.userSelectionActive?"none":"all";function No({position:e,children:t,className:n,style:r,...o}){const i=tt(qy),s=`${e}`.split("-");return B.createElement("div",{className:Et(["react-flow__panel",n,...s]),style:{...r,pointerEvents:i},...o},t)}function Ky({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:B.createElement(No,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},B.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Uy=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:o=!0,labelBgStyle:i={},labelBgPadding:s=[2,4],labelBgBorderRadius:l=2,children:u,className:f,...h})=>{const p=b.useRef(null),[y,w]=b.useState({x:0,y:0,width:0,height:0}),S=Et(["react-flow__edge-textwrapper",f]);return b.useEffect(()=>{if(p.current){const k=p.current.getBBox();w({x:k.x,y:k.y,width:k.width,height:k.height})}},[n]),typeof n>"u"||!n?null:B.createElement("g",{transform:`translate(${e-y.width/2} ${t-y.height/2})`,className:S,visibility:y.width?"visible":"hidden",...h},o&&B.createElement("rect",{width:y.width+2*s[0],x:-s[0],y:-s[1],height:y.height+2*s[1],className:"react-flow__edge-textbg",style:i,rx:l,ry:l}),B.createElement("text",{className:"react-flow__edge-text",y:y.height/2,dy:"0.3em",ref:p,style:r},n),u)};var Xy=b.memo(Uy);const ac=e=>({width:e.offsetWidth,height:e.offsetHeight}),zr=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),ic=(e={x:0,y:0},t)=>({x:zr(e.x,t[0][0],t[1][0]),y:zr(e.y,t[0][1],t[1][1])}),El=(e,t,n)=>e<t?zr(Math.abs(e-t),1,50)/50:e>n?-zr(Math.abs(e-n),1,50)/50:0,fd=(e,t)=>{const n=El(e.x,35,t.width-35)*20,r=El(e.y,35,t.height-35)*20;return[n,r]},hd=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},md=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Co=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),pd=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Nl=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Gy=(e,t)=>pd(md(Co(e),Co(t))),ps=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Zy=e=>Zt(e.width)&&Zt(e.height)&&Zt(e.x)&&Zt(e.y),Zt=e=>!isNaN(e)&&isFinite(e),dt=Symbol.for("internals"),gd=["Enter"," ","Escape"],Qy=(e,t)=>{},Jy=e=>"nativeEvent"in e;function gs(e){var o,i;const t=Jy(e)?e.nativeEvent:e,n=((i=(o=t.composedPath)==null?void 0:o.call(t))==null?void 0:i[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const yd=e=>"clientX"in e,Zn=(e,t)=>{var i,s;const n=yd(e),r=n?e.clientX:(i=e.touches)==null?void 0:i[0].clientX,o=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:o-((t==null?void 0:t.top)??0)}},Aa=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},$o=({id:e,path:t,labelX:n,labelY:r,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:y,interactionWidth:w=20})=>B.createElement(B.Fragment,null,B.createElement("path",{id:e,style:h,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:p,markerStart:y}),w&&B.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:w,className:"react-flow__edge-interaction"}),o&&Zt(n)&&Zt(r)?B.createElement(Xy,{x:n,y:r,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:f}):null);$o.displayName="BaseEdge";function so(e,t,n){return n===void 0?n:r=>{const o=t().edges.find(i=>i.id===e);o&&n(r,{...o})}}function vd({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,i=n<e?n+o:n-o,s=Math.abs(r-t)/2,l=r<t?r+s:r-s;return[i,l,o,s]}function wd({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:i,targetControlX:s,targetControlY:l}){const u=e*.125+o*.375+s*.375+n*.125,f=t*.125+i*.375+l*.375+r*.125,h=Math.abs(u-e),p=Math.abs(f-t);return[u,f,h,p]}var wr;(function(e){e.Strict="strict",e.Loose="loose"})(wr||(wr={}));var dr;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(dr||(dr={}));var To;(function(e){e.Partial="partial",e.Full="full"})(To||(To={}));var Kn;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Kn||(Kn={}));var $a;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})($a||($a={}));var De;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(De||(De={}));function Cl({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===De.Left||e===De.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function bd({sourceX:e,sourceY:t,sourcePosition:n=De.Bottom,targetX:r,targetY:o,targetPosition:i=De.Top}){const[s,l]=Cl({pos:n,x1:e,y1:t,x2:r,y2:o}),[u,f]=Cl({pos:i,x1:r,y1:o,x2:e,y2:t}),[h,p,y,w]=wd({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:s,sourceControlY:l,targetControlX:u,targetControlY:f});return[`M${e},${t} C${s},${l} ${u},${f} ${r},${o}`,h,p,y,w]}const sc=b.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=De.Bottom,targetPosition:i=De.Top,label:s,labelStyle:l,labelShowBg:u,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:y,markerEnd:w,markerStart:S,interactionWidth:k})=>{const[N,C,R]=bd({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:i});return B.createElement($o,{path:N,labelX:C,labelY:R,label:s,labelStyle:l,labelShowBg:u,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:y,markerEnd:w,markerStart:S,interactionWidth:k})});sc.displayName="SimpleBezierEdge";const Tl={[De.Left]:{x:-1,y:0},[De.Right]:{x:1,y:0},[De.Top]:{x:0,y:-1},[De.Bottom]:{x:0,y:1}},e0=({source:e,sourcePosition:t=De.Bottom,target:n})=>t===De.Left||t===De.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Dl=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function t0({source:e,sourcePosition:t=De.Bottom,target:n,targetPosition:r=De.Top,center:o,offset:i}){const s=Tl[t],l=Tl[r],u={x:e.x+s.x*i,y:e.y+s.y*i},f={x:n.x+l.x*i,y:n.y+l.y*i},h=e0({source:u,sourcePosition:t,target:f}),p=h.x!==0?"x":"y",y=h[p];let w=[],S,k;const N={x:0,y:0},C={x:0,y:0},[R,I,T,X]=vd({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[p]*l[p]===-1){S=o.x??R,k=o.y??I;const V=[{x:S,y:u.y},{x:S,y:f.y}],J=[{x:u.x,y:k},{x:f.x,y:k}];s[p]===y?w=p==="x"?V:J:w=p==="x"?J:V}else{const V=[{x:u.x,y:f.y}],J=[{x:f.x,y:u.y}];if(p==="x"?w=s.x===y?J:V:w=s.y===y?V:J,t===r){const ce=Math.abs(e[p]-n[p]);if(ce<=i){const _=Math.min(i-1,i-ce);s[p]===y?N[p]=(u[p]>e[p]?-1:1)*_:C[p]=(f[p]>n[p]?-1:1)*_}}if(t!==r){const ce=p==="x"?"y":"x",_=s[p]===l[ce],M=u[ce]>f[ce],P=u[ce]<f[ce];(s[p]===1&&(!_&&M||_&&P)||s[p]!==1&&(!_&&P||_&&M))&&(w=p==="x"?V:J)}const U={x:u.x+N.x,y:u.y+N.y},te={x:f.x+C.x,y:f.y+C.y},K=Math.max(Math.abs(U.x-w[0].x),Math.abs(te.x-w[0].x)),oe=Math.max(Math.abs(U.y-w[0].y),Math.abs(te.y-w[0].y));K>=oe?(S=(U.x+te.x)/2,k=w[0].y):(S=w[0].x,k=(U.y+te.y)/2)}return[[e,{x:u.x+N.x,y:u.y+N.y},...w,{x:f.x+C.x,y:f.y+C.y},n],S,k,T,X]}function n0(e,t,n,r){const o=Math.min(Dl(e,t)/2,Dl(t,n)/2,r),{x:i,y:s}=t;if(e.x===i&&i===n.x||e.y===s&&s===n.y)return`L${i} ${s}`;if(e.y===s){const f=e.x<n.x?-1:1,h=e.y<n.y?1:-1;return`L ${i+o*f},${s}Q ${i},${s} ${i},${s+o*h}`}const l=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${i},${s+o*u}Q ${i},${s} ${i+o*l},${s}`}function ys({sourceX:e,sourceY:t,sourcePosition:n=De.Bottom,targetX:r,targetY:o,targetPosition:i=De.Top,borderRadius:s=5,centerX:l,centerY:u,offset:f=20}){const[h,p,y,w,S]=t0({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:i,center:{x:l,y:u},offset:f});return[h.reduce((N,C,R)=>{let I="";return R>0&&R<h.length-1?I=n0(h[R-1],C,h[R+1],s):I=`${R===0?"M":"L"}${C.x} ${C.y}`,N+=I,N},""),p,y,w,S]}const Za=b.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:f,style:h,sourcePosition:p=De.Bottom,targetPosition:y=De.Top,markerEnd:w,markerStart:S,pathOptions:k,interactionWidth:N})=>{const[C,R,I]=ys({sourceX:e,sourceY:t,sourcePosition:p,targetX:n,targetY:r,targetPosition:y,borderRadius:k==null?void 0:k.borderRadius,offset:k==null?void 0:k.offset});return B.createElement($o,{path:C,labelX:R,labelY:I,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:f,style:h,markerEnd:w,markerStart:S,interactionWidth:N})});Za.displayName="SmoothStepEdge";const cc=b.memo(e=>{var t;return B.createElement(Za,{...e,pathOptions:b.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});cc.displayName="StepEdge";function r0({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,i,s,l]=vd({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,i,s,l]}const lc=b.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:y,interactionWidth:w})=>{const[S,k,N]=r0({sourceX:e,sourceY:t,targetX:n,targetY:r});return B.createElement($o,{path:S,labelX:k,labelY:N,label:o,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:y,interactionWidth:w})});lc.displayName="StraightEdge";function pa(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Ol({pos:e,x1:t,y1:n,x2:r,y2:o,c:i}){switch(e){case De.Left:return[t-pa(t-r,i),n];case De.Right:return[t+pa(r-t,i),n];case De.Top:return[t,n-pa(n-o,i)];case De.Bottom:return[t,n+pa(o-n,i)]}}function xd({sourceX:e,sourceY:t,sourcePosition:n=De.Bottom,targetX:r,targetY:o,targetPosition:i=De.Top,curvature:s=.25}){const[l,u]=Ol({pos:n,x1:e,y1:t,x2:r,y2:o,c:s}),[f,h]=Ol({pos:i,x1:r,y1:o,x2:e,y2:t,c:s}),[p,y,w,S]=wd({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:l,sourceControlY:u,targetControlX:f,targetControlY:h});return[`M${e},${t} C${l},${u} ${f},${h} ${r},${o}`,p,y,w,S]}const Ra=b.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=De.Bottom,targetPosition:i=De.Top,label:s,labelStyle:l,labelShowBg:u,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:y,markerEnd:w,markerStart:S,pathOptions:k,interactionWidth:N})=>{const[C,R,I]=xd({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:i,curvature:k==null?void 0:k.curvature});return B.createElement($o,{path:C,labelX:R,labelY:I,label:s,labelStyle:l,labelShowBg:u,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:y,markerEnd:w,markerStart:S,interactionWidth:N})});Ra.displayName="BezierEdge";const uc=b.createContext(null),o0=uc.Provider;uc.Consumer;const a0=()=>b.useContext(uc),i0=e=>"id"in e&&"source"in e&&"target"in e,s0=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,vs=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,c0=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),l0=(e,t)=>{if(!e.source||!e.target)return t;let n;return i0(e)?n={...e}:n={...e,id:s0(e)},c0(n,t)?t:t.concat(n)},ws=({x:e,y:t},[n,r,o],i,[s,l])=>{const u={x:(e-n)/o,y:(t-r)/o};return i?{x:s*Math.round(u.x/s),y:l*Math.round(u.y/l)}:u},Sd=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r}),mr=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],o={x:e.position.x-n,y:e.position.y-r};return{...o,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:o}},Qa=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,o)=>{const{x:i,y:s}=mr(o,t).positionAbsolute;return md(r,Co({x:i,y:s,width:o.width||0,height:o.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return pd(n)},kd=(e,t,[n,r,o]=[0,0,1],i=!1,s=!1,l=[0,0])=>{const u={x:(t.x-n)/o,y:(t.y-r)/o,width:t.width/o,height:t.height/o},f=[];return e.forEach(h=>{const{width:p,height:y,selectable:w=!0,hidden:S=!1}=h;if(s&&!w||S)return!1;const{positionAbsolute:k}=mr(h,l),N={x:k.x,y:k.y,width:p||0,height:y||0},C=ps(u,N),R=typeof p>"u"||typeof y>"u"||p===null||y===null,I=i&&C>0,T=(p||0)*(y||0);(R||I||C>=T||h.dragging)&&f.push(h)}),f},_d=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},Ed=(e,t,n,r,o,i=.1)=>{const s=t/(e.width*(1+i)),l=n/(e.height*(1+i)),u=Math.min(s,l),f=zr(u,r,o),h=e.x+e.width/2,p=e.y+e.height/2,y=t/2-h*f,w=n/2-p*f;return{x:y,y:w,zoom:f}},ir=(e,t=0)=>e.transition().duration(t);function jl(e,t,n,r){return(t[n]||[]).reduce((o,i)=>{var s,l;return`${e.id}-${i.id}-${n}`!==r&&o.push({id:i.id||null,type:n,nodeId:e.id,x:(((s=e.positionAbsolute)==null?void 0:s.x)??0)+i.x+i.width/2,y:(((l=e.positionAbsolute)==null?void 0:l.y)??0)+i.y+i.height/2}),o},[])}function u0(e,t,n,r,o,i){const{x:s,y:l}=Zn(e),f=t.elementsFromPoint(s,l).find(S=>S.classList.contains("react-flow__handle"));if(f){const S=f.getAttribute("data-nodeid");if(S){const k=dc(void 0,f),N=f.getAttribute("data-handleid"),C=i({nodeId:S,id:N,type:k});if(C){const R=o.find(I=>I.nodeId===S&&I.type===k&&I.id===N);return{handle:{id:N,type:k,nodeId:S,x:(R==null?void 0:R.x)||n.x,y:(R==null?void 0:R.y)||n.y},validHandleResult:C}}}}let h=[],p=1/0;if(o.forEach(S=>{const k=Math.sqrt((S.x-n.x)**2+(S.y-n.y)**2);if(k<=r){const N=i(S);k<=p&&(k<p?h=[{handle:S,validHandleResult:N}]:k===p&&h.push({handle:S,validHandleResult:N}),p=k)}}),!h.length)return{handle:null,validHandleResult:Nd()};if(h.length===1)return h[0];const y=h.some(({validHandleResult:S})=>S.isValid),w=h.some(({handle:S})=>S.type==="target");return h.find(({handle:S,validHandleResult:k})=>w?S.type==="target":y?k.isValid:!0)||h[0]}const d0={source:null,target:null,sourceHandle:null,targetHandle:null},Nd=()=>({handleDomNode:null,isValid:!1,connection:d0,endHandle:null});function Cd(e,t,n,r,o,i,s){const l=o==="target",u=s.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),f={...Nd(),handleDomNode:u};if(u){const h=dc(void 0,u),p=u.getAttribute("data-nodeid"),y=u.getAttribute("data-handleid"),w=u.classList.contains("connectable"),S=u.classList.contains("connectableend"),k={source:l?p:n,sourceHandle:l?y:r,target:l?n:p,targetHandle:l?r:y};f.connection=k,w&&S&&(t===wr.Strict?l&&h==="source"||!l&&h==="target":p!==n||y!==r)&&(f.endHandle={nodeId:p,handleId:y,type:h},f.isValid=i(k))}return f}function f0({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((o,i)=>{if(i[dt]){const{handleBounds:s}=i[dt];let l=[],u=[];s&&(l=jl(i,s,"source",`${t}-${n}-${r}`),u=jl(i,s,"target",`${t}-${n}-${r}`)),o.push(...l,...u)}return o},[])}function dc(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Yi(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function h0(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Td({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:o,getState:i,setState:s,isValidConnection:l,edgeUpdaterType:u,onReconnectEnd:f}){const h=hd(e.target),{connectionMode:p,domNode:y,autoPanOnConnect:w,connectionRadius:S,onConnectStart:k,panBy:N,getNodes:C,cancelConnection:R}=i();let I=0,T;const{x:X,y:q}=Zn(e),V=h==null?void 0:h.elementFromPoint(X,q),J=dc(u,V),U=y==null?void 0:y.getBoundingClientRect();if(!U||!J)return;let te,K=Zn(e,U),oe=!1,ce=null,_=!1,M=null;const P=f0({nodes:C(),nodeId:n,handleId:t,handleType:J}),G=()=>{if(!w)return;const[Q,ae]=fd(K,U);N({x:Q,y:ae}),I=requestAnimationFrame(G)};s({connectionPosition:K,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:J,connectionStartHandle:{nodeId:n,handleId:t,type:J},connectionEndHandle:null}),k==null||k(e,{nodeId:n,handleId:t,handleType:J});function ie(Q){const{transform:ae}=i();K=Zn(Q,U);const{handle:se,validHandleResult:fe}=u0(Q,h,ws(K,ae,!1,[1,1]),S,P,ve=>Cd(ve,p,n,t,o?"target":"source",l,h));if(T=se,oe||(G(),oe=!0),M=fe.handleDomNode,ce=fe.connection,_=fe.isValid,s({connectionPosition:T&&_?Sd({x:T.x,y:T.y},ae):K,connectionStatus:h0(!!T,_),connectionEndHandle:fe.endHandle}),!T&&!_&&!M)return Yi(te);ce.source!==ce.target&&M&&(Yi(te),te=M,M.classList.add("connecting","react-flow__handle-connecting"),M.classList.toggle("valid",_),M.classList.toggle("react-flow__handle-valid",_))}function j(Q){var ae,se;(T||M)&&ce&&_&&(r==null||r(ce)),(se=(ae=i()).onConnectEnd)==null||se.call(ae,Q),u&&(f==null||f(Q)),Yi(te),R(),cancelAnimationFrame(I),oe=!1,_=!1,ce=null,M=null,h.removeEventListener("mousemove",ie),h.removeEventListener("mouseup",j),h.removeEventListener("touchmove",ie),h.removeEventListener("touchend",j)}h.addEventListener("mousemove",ie),h.addEventListener("mouseup",j),h.addEventListener("touchmove",ie),h.addEventListener("touchend",j)}const Pl=()=>!0,m0=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),p0=(e,t,n)=>r=>{const{connectionStartHandle:o,connectionEndHandle:i,connectionClickStartHandle:s}=r;return{connecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===n||(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n,clickConnecting:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n}},Dd=b.forwardRef(({type:e="source",position:t=De.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:i=!0,id:s,onConnect:l,children:u,className:f,onMouseDown:h,onTouchStart:p,...y},w)=>{var U,te;const S=s||null,k=e==="target",N=wt(),C=a0(),{connectOnClick:R,noPanClassName:I}=tt(m0,St),{connecting:T,clickConnecting:X}=tt(p0(C,S,e),St);C||(te=(U=N.getState()).onError)==null||te.call(U,"010",Pn.error010());const q=K=>{const{defaultEdgeOptions:oe,onConnect:ce,hasDefaultEdges:_}=N.getState(),M={...oe,...K};if(_){const{edges:P,setEdges:G}=N.getState();G(l0(M,P))}ce==null||ce(M),l==null||l(M)},V=K=>{if(!C)return;const oe=yd(K);o&&(oe&&K.button===0||!oe)&&Td({event:K,handleId:S,nodeId:C,onConnect:q,isTarget:k,getState:N.getState,setState:N.setState,isValidConnection:n||N.getState().isValidConnection||Pl}),oe?h==null||h(K):p==null||p(K)},J=K=>{const{onClickConnectStart:oe,onClickConnectEnd:ce,connectionClickStartHandle:_,connectionMode:M,isValidConnection:P}=N.getState();if(!C||!_&&!o)return;if(!_){oe==null||oe(K,{nodeId:C,handleId:S,handleType:e}),N.setState({connectionClickStartHandle:{nodeId:C,type:e,handleId:S}});return}const G=hd(K.target),ie=n||P||Pl,{connection:j,isValid:Q}=Cd({nodeId:C,id:S,type:e},M,_.nodeId,_.handleId||null,_.type,ie,G);Q&&q(j),ce==null||ce(K),N.setState({connectionClickStartHandle:null})};return B.createElement("div",{"data-handleid":S,"data-nodeid":C,"data-handlepos":t,"data-id":`${C}-${S}-${e}`,className:Et(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",I,f,{source:!k,target:k,connectable:r,connectablestart:o,connectableend:i,connecting:X,connectionindicator:r&&(o&&!T||i&&T)}]),onMouseDown:V,onTouchStart:V,onClick:R?J:void 0,ref:w,...y},u)});Dd.displayName="Handle";var Xn=b.memo(Dd);const Od=({data:e,isConnectable:t,targetPosition:n=De.Top,sourcePosition:r=De.Bottom})=>B.createElement(B.Fragment,null,B.createElement(Xn,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,B.createElement(Xn,{type:"source",position:r,isConnectable:t}));Od.displayName="DefaultNode";var bs=b.memo(Od);const jd=({data:e,isConnectable:t,sourcePosition:n=De.Bottom})=>B.createElement(B.Fragment,null,e==null?void 0:e.label,B.createElement(Xn,{type:"source",position:n,isConnectable:t}));jd.displayName="InputNode";var Pd=b.memo(jd);const Md=({data:e,isConnectable:t,targetPosition:n=De.Top})=>B.createElement(B.Fragment,null,B.createElement(Xn,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);Md.displayName="OutputNode";var Id=b.memo(Md);const fc=()=>null;fc.displayName="GroupNode";const g0=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),ga=e=>e.id;function y0(e,t){return St(e.selectedNodes.map(ga),t.selectedNodes.map(ga))&&St(e.selectedEdges.map(ga),t.selectedEdges.map(ga))}const Ad=b.memo(({onSelectionChange:e})=>{const t=wt(),{selectedNodes:n,selectedEdges:r}=tt(g0,y0);return b.useEffect(()=>{const o={nodes:n,edges:r};e==null||e(o),t.getState().onSelectionChange.forEach(i=>i(o))},[n,r,e]),null});Ad.displayName="SelectionListener";const v0=e=>!!e.onSelectionChange;function w0({onSelectionChange:e}){const t=tt(v0);return e||t?B.createElement(Ad,{onSelectionChange:e}):null}const b0=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Tr(e,t){b.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function ze(e,t,n){b.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const x0=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:o,onConnectStart:i,onConnectEnd:s,onClickConnectStart:l,onClickConnectEnd:u,nodesDraggable:f,nodesConnectable:h,nodesFocusable:p,edgesFocusable:y,edgesUpdatable:w,elevateNodesOnSelect:S,minZoom:k,maxZoom:N,nodeExtent:C,onNodesChange:R,onEdgesChange:I,elementsSelectable:T,connectionMode:X,snapGrid:q,snapToGrid:V,translateExtent:J,connectOnClick:U,defaultEdgeOptions:te,fitView:K,fitViewOptions:oe,onNodesDelete:ce,onEdgesDelete:_,onNodeDrag:M,onNodeDragStart:P,onNodeDragStop:G,onSelectionDrag:ie,onSelectionDragStart:j,onSelectionDragStop:Q,noPanClassName:ae,nodeOrigin:se,rfId:fe,autoPanOnConnect:ve,autoPanOnNodeDrag:ke,onError:Te,connectionRadius:Oe,isValidConnection:Pe,nodeDragThreshold:he})=>{const{setNodes:Ie,setEdges:Ze,setDefaultNodesAndEdges:je,setMinZoom:Je,setMaxZoom:$e,setTranslateExtent:Fe,setNodeExtent:Ke,reset:Ye}=tt(b0,St),Ne=wt();return b.useEffect(()=>{const st=r==null?void 0:r.map(bt=>({...bt,...te}));return je(n,st),()=>{Ye()}},[]),ze("defaultEdgeOptions",te,Ne.setState),ze("connectionMode",X,Ne.setState),ze("onConnect",o,Ne.setState),ze("onConnectStart",i,Ne.setState),ze("onConnectEnd",s,Ne.setState),ze("onClickConnectStart",l,Ne.setState),ze("onClickConnectEnd",u,Ne.setState),ze("nodesDraggable",f,Ne.setState),ze("nodesConnectable",h,Ne.setState),ze("nodesFocusable",p,Ne.setState),ze("edgesFocusable",y,Ne.setState),ze("edgesUpdatable",w,Ne.setState),ze("elementsSelectable",T,Ne.setState),ze("elevateNodesOnSelect",S,Ne.setState),ze("snapToGrid",V,Ne.setState),ze("snapGrid",q,Ne.setState),ze("onNodesChange",R,Ne.setState),ze("onEdgesChange",I,Ne.setState),ze("connectOnClick",U,Ne.setState),ze("fitViewOnInit",K,Ne.setState),ze("fitViewOnInitOptions",oe,Ne.setState),ze("onNodesDelete",ce,Ne.setState),ze("onEdgesDelete",_,Ne.setState),ze("onNodeDrag",M,Ne.setState),ze("onNodeDragStart",P,Ne.setState),ze("onNodeDragStop",G,Ne.setState),ze("onSelectionDrag",ie,Ne.setState),ze("onSelectionDragStart",j,Ne.setState),ze("onSelectionDragStop",Q,Ne.setState),ze("noPanClassName",ae,Ne.setState),ze("nodeOrigin",se,Ne.setState),ze("rfId",fe,Ne.setState),ze("autoPanOnConnect",ve,Ne.setState),ze("autoPanOnNodeDrag",ke,Ne.setState),ze("onError",Te,Ne.setState),ze("connectionRadius",Oe,Ne.setState),ze("isValidConnection",Pe,Ne.setState),ze("nodeDragThreshold",he,Ne.setState),Tr(e,Ie),Tr(t,Ze),Tr(k,Je),Tr(N,$e),Tr(J,Fe),Tr(C,Ke),null},Ml={display:"none"},S0={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},$d="react-flow__node-desc",Rd="react-flow__edge-desc",k0="react-flow__aria-live",_0=e=>e.ariaLiveMessage;function E0({rfId:e}){const t=tt(_0);return B.createElement("div",{id:`${k0}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:S0},t)}function N0({rfId:e,disableKeyboardA11y:t}){return B.createElement(B.Fragment,null,B.createElement("div",{id:`${$d}-${e}`,style:Ml},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),B.createElement("div",{id:`${Rd}-${e}`,style:Ml},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&B.createElement(E0,{rfId:e}))}var Do=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=b.useState(!1),o=b.useRef(!1),i=b.useRef(new Set([])),[s,l]=b.useMemo(()=>{if(e!==null){const f=(Array.isArray(e)?e:[e]).filter(p=>typeof p=="string").map(p=>p.split("+")),h=f.reduce((p,y)=>p.concat(...y),[]);return[f,h]}return[[],[]]},[e]);return b.useEffect(()=>{const u=typeof document<"u"?document:null,f=(t==null?void 0:t.target)||u;if(e!==null){const h=w=>{if(o.current=w.ctrlKey||w.metaKey||w.shiftKey,(!o.current||o.current&&!t.actInsideInputWithModifier)&&gs(w))return!1;const k=Al(w.code,l);i.current.add(w[k]),Il(s,i.current,!1)&&(w.preventDefault(),r(!0))},p=w=>{if((!o.current||o.current&&!t.actInsideInputWithModifier)&&gs(w))return!1;const k=Al(w.code,l);Il(s,i.current,!0)?(r(!1),i.current.clear()):i.current.delete(w[k]),w.key==="Meta"&&i.current.clear(),o.current=!1},y=()=>{i.current.clear(),r(!1)};return f==null||f.addEventListener("keydown",h),f==null||f.addEventListener("keyup",p),window.addEventListener("blur",y),()=>{f==null||f.removeEventListener("keydown",h),f==null||f.removeEventListener("keyup",p),window.removeEventListener("blur",y)}}},[e,r]),n};function Il(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(o=>t.has(o)))}function Al(e,t){return t.includes(e)?"code":"key"}function Ld(e,t,n,r){var l,u;const o=e.parentNode||e.parentId;if(!o)return n;const i=t.get(o),s=mr(i,r);return Ld(i,t,{x:(n.x??0)+s.x,y:(n.y??0)+s.y,z:(((l=i[dt])==null?void 0:l.z)??0)>(n.z??0)?((u=i[dt])==null?void 0:u.z)??0:n.z??0},r)}function Fd(e,t,n){e.forEach(r=>{var i;const o=r.parentNode||r.parentId;if(o&&!e.has(o))throw new Error(`Parent node ${o} not found`);if(o||n!=null&&n[r.id]){const{x:s,y:l,z:u}=Ld(r,e,{...r.position,z:((i=r[dt])==null?void 0:i.z)??0},t);r.positionAbsolute={x:s,y:l},r[dt].z=u,n!=null&&n[r.id]&&(r[dt].isParent=!0)}})}function Vi(e,t,n,r){const o=new Map,i={},s=r?1e3:0;return e.forEach(l=>{var w;const u=(Zt(l.zIndex)?l.zIndex:0)+(l.selected?s:0),f=t.get(l.id),h={...l,positionAbsolute:{x:l.position.x,y:l.position.y}},p=l.parentNode||l.parentId;p&&(i[p]=!0);const y=(f==null?void 0:f.type)&&(f==null?void 0:f.type)!==l.type;Object.defineProperty(h,dt,{enumerable:!1,value:{handleBounds:y||(w=f==null?void 0:f[dt])==null?void 0:w.handleBounds,z:u}}),o.set(l.id,h)}),Fd(o,n,i),o}function Wd(e,t={}){const{getNodes:n,width:r,height:o,minZoom:i,maxZoom:s,d3Zoom:l,d3Selection:u,fitViewOnInitDone:f,fitViewOnInit:h,nodeOrigin:p}=e(),y=t.initial&&!f&&h;if(l&&u&&(y||!t.initial)){const S=n().filter(N=>{var R;const C=t.includeHiddenNodes?N.width&&N.height:!N.hidden;return(R=t.nodes)!=null&&R.length?C&&t.nodes.some(I=>I.id===N.id):C}),k=S.every(N=>N.width&&N.height);if(S.length>0&&k){const N=Qa(S,p),{x:C,y:R,zoom:I}=Ed(N,r,o,t.minZoom??i,t.maxZoom??s,t.padding??.1),T=Dn.translate(C,R).scale(I);return typeof t.duration=="number"&&t.duration>0?l.transform(ir(u,t.duration),T):l.transform(u,T),!0}}return!1}function C0(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[dt]:r[dt],selected:n.selected})}),new Map(t)}function T0(e,t){return t.map(n=>{const r=e.find(o=>o.id===n.id);return r&&(n.selected=r.selected),n})}function ya({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:o,edges:i,onNodesChange:s,onEdgesChange:l,hasDefaultNodes:u,hasDefaultEdges:f}=n();e!=null&&e.length&&(u&&r({nodeInternals:C0(e,o)}),s==null||s(e)),t!=null&&t.length&&(f&&r({edges:T0(t,i)}),l==null||l(t))}const Dr=()=>{},D0={zoomIn:Dr,zoomOut:Dr,zoomTo:Dr,getZoom:()=>1,setViewport:Dr,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Dr,fitBounds:Dr,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},O0=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),j0=()=>{const e=wt(),{d3Zoom:t,d3Selection:n}=tt(O0,St);return b.useMemo(()=>n&&t?{zoomIn:o=>t.scaleBy(ir(n,o==null?void 0:o.duration),1.2),zoomOut:o=>t.scaleBy(ir(n,o==null?void 0:o.duration),1/1.2),zoomTo:(o,i)=>t.scaleTo(ir(n,i==null?void 0:i.duration),o),getZoom:()=>e.getState().transform[2],setViewport:(o,i)=>{const[s,l,u]=e.getState().transform,f=Dn.translate(o.x??s,o.y??l).scale(o.zoom??u);t.transform(ir(n,i==null?void 0:i.duration),f)},getViewport:()=>{const[o,i,s]=e.getState().transform;return{x:o,y:i,zoom:s}},fitView:o=>Wd(e.getState,o),setCenter:(o,i,s)=>{const{width:l,height:u,maxZoom:f}=e.getState(),h=typeof(s==null?void 0:s.zoom)<"u"?s.zoom:f,p=l/2-o*h,y=u/2-i*h,w=Dn.translate(p,y).scale(h);t.transform(ir(n,s==null?void 0:s.duration),w)},fitBounds:(o,i)=>{const{width:s,height:l,minZoom:u,maxZoom:f}=e.getState(),{x:h,y:p,zoom:y}=Ed(o,s,l,u,f,(i==null?void 0:i.padding)??.1),w=Dn.translate(h,p).scale(y);t.transform(ir(n,i==null?void 0:i.duration),w)},project:o=>{const{transform:i,snapToGrid:s,snapGrid:l}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),ws(o,i,s,l)},screenToFlowPosition:o=>{const{transform:i,snapToGrid:s,snapGrid:l,domNode:u}=e.getState();if(!u)return o;const{x:f,y:h}=u.getBoundingClientRect(),p={x:o.x-f,y:o.y-h};return ws(p,i,s,l)},flowToScreenPosition:o=>{const{transform:i,domNode:s}=e.getState();if(!s)return o;const{x:l,y:u}=s.getBoundingClientRect(),f=Sd(o,i);return{x:f.x+l,y:f.y+u}},viewportInitialized:!0}:D0,[t,n])};function hc(){const e=j0(),t=wt(),n=b.useCallback(()=>t.getState().getNodes().map(k=>({...k})),[]),r=b.useCallback(k=>t.getState().nodeInternals.get(k),[]),o=b.useCallback(()=>{const{edges:k=[]}=t.getState();return k.map(N=>({...N}))},[]),i=b.useCallback(k=>{const{edges:N=[]}=t.getState();return N.find(C=>C.id===k)},[]),s=b.useCallback(k=>{const{getNodes:N,setNodes:C,hasDefaultNodes:R,onNodesChange:I}=t.getState(),T=N(),X=typeof k=="function"?k(T):k;if(R)C(X);else if(I){const q=X.length===0?T.map(V=>({type:"remove",id:V.id})):X.map(V=>({item:V,type:"reset"}));I(q)}},[]),l=b.useCallback(k=>{const{edges:N=[],setEdges:C,hasDefaultEdges:R,onEdgesChange:I}=t.getState(),T=typeof k=="function"?k(N):k;if(R)C(T);else if(I){const X=T.length===0?N.map(q=>({type:"remove",id:q.id})):T.map(q=>({item:q,type:"reset"}));I(X)}},[]),u=b.useCallback(k=>{const N=Array.isArray(k)?k:[k],{getNodes:C,setNodes:R,hasDefaultNodes:I,onNodesChange:T}=t.getState();if(I){const q=[...C(),...N];R(q)}else if(T){const X=N.map(q=>({item:q,type:"add"}));T(X)}},[]),f=b.useCallback(k=>{const N=Array.isArray(k)?k:[k],{edges:C=[],setEdges:R,hasDefaultEdges:I,onEdgesChange:T}=t.getState();if(I)R([...C,...N]);else if(T){const X=N.map(q=>({item:q,type:"add"}));T(X)}},[]),h=b.useCallback(()=>{const{getNodes:k,edges:N=[],transform:C}=t.getState(),[R,I,T]=C;return{nodes:k().map(X=>({...X})),edges:N.map(X=>({...X})),viewport:{x:R,y:I,zoom:T}}},[]),p=b.useCallback(({nodes:k,edges:N})=>{const{nodeInternals:C,getNodes:R,edges:I,hasDefaultNodes:T,hasDefaultEdges:X,onNodesDelete:q,onEdgesDelete:V,onNodesChange:J,onEdgesChange:U}=t.getState(),te=(k||[]).map(M=>M.id),K=(N||[]).map(M=>M.id),oe=R().reduce((M,P)=>{const G=P.parentNode||P.parentId,ie=!te.includes(P.id)&&G&&M.find(Q=>Q.id===G);return(typeof P.deletable=="boolean"?P.deletable:!0)&&(te.includes(P.id)||ie)&&M.push(P),M},[]),ce=I.filter(M=>typeof M.deletable=="boolean"?M.deletable:!0),_=ce.filter(M=>K.includes(M.id));if(oe||_){const M=_d(oe,ce),P=[..._,...M],G=P.reduce((ie,j)=>(ie.includes(j.id)||ie.push(j.id),ie),[]);if((X||T)&&(X&&t.setState({edges:I.filter(ie=>!G.includes(ie.id))}),T&&(oe.forEach(ie=>{C.delete(ie.id)}),t.setState({nodeInternals:new Map(C)}))),G.length>0&&(V==null||V(P),U&&U(G.map(ie=>({id:ie,type:"remove"})))),oe.length>0&&(q==null||q(oe),J)){const ie=oe.map(j=>({id:j.id,type:"remove"}));J(ie)}}},[]),y=b.useCallback(k=>{const N=Zy(k),C=N?null:t.getState().nodeInternals.get(k.id);return!N&&!C?[null,null,N]:[N?k:Nl(C),C,N]},[]),w=b.useCallback((k,N=!0,C)=>{const[R,I,T]=y(k);return R?(C||t.getState().getNodes()).filter(X=>{if(!T&&(X.id===I.id||!X.positionAbsolute))return!1;const q=Nl(X),V=ps(q,R);return N&&V>0||V>=R.width*R.height}):[]},[]),S=b.useCallback((k,N,C=!0)=>{const[R]=y(k);if(!R)return!1;const I=ps(R,N);return C&&I>0||I>=R.width*R.height},[]);return b.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:o,getEdge:i,setNodes:s,setEdges:l,addNodes:u,addEdges:f,toObject:h,deleteElements:p,getIntersectingNodes:w,isNodeIntersecting:S}),[e,n,r,o,i,s,l,u,f,h,p,w,S])}const P0={actInsideInputWithModifier:!1};var M0=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=wt(),{deleteElements:r}=hc(),o=Do(e,P0),i=Do(t);b.useEffect(()=>{if(o){const{edges:s,getNodes:l}=n.getState(),u=l().filter(h=>h.selected),f=s.filter(h=>h.selected);r({nodes:u,edges:f}),n.setState({nodesSelectionActive:!1})}},[o]),b.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])};function I0(e){const t=wt();b.useEffect(()=>{let n;const r=()=>{var i,s;if(!e.current)return;const o=ac(e.current);(o.height===0||o.width===0)&&((s=(i=t.getState()).onError)==null||s.call(i,"004",Pn.error004())),t.setState({width:o.width||500,height:o.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const mc={position:"absolute",width:"100%",height:"100%",top:0,left:0},A0=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,va=e=>({x:e.x,y:e.y,zoom:e.k}),Or=(e,t)=>e.target.closest(`.${t}`),$l=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Rl=e=>{const t=e.ctrlKey&&Aa()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},$0=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),R0=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:o=!0,zoomOnPinch:i=!0,panOnScroll:s=!1,panOnScrollSpeed:l=.5,panOnScrollMode:u=dr.Free,zoomOnDoubleClick:f=!0,elementsSelectable:h,panOnDrag:p=!0,defaultViewport:y,translateExtent:w,minZoom:S,maxZoom:k,zoomActivationKeyCode:N,preventScrolling:C=!0,children:R,noWheelClassName:I,noPanClassName:T})=>{const X=b.useRef(),q=wt(),V=b.useRef(!1),J=b.useRef(!1),U=b.useRef(null),te=b.useRef({x:0,y:0,zoom:0}),{d3Zoom:K,d3Selection:oe,d3ZoomHandler:ce,userSelectionActive:_}=tt($0,St),M=Do(N),P=b.useRef(0),G=b.useRef(!1),ie=b.useRef();return I0(U),b.useEffect(()=>{if(U.current){const j=U.current.getBoundingClientRect(),Q=ud().scaleExtent([S,k]).translateExtent(w),ae=Gt(U.current).call(Q),se=Dn.translate(y.x,y.y).scale(zr(y.zoom,S,k)),fe=[[0,0],[j.width,j.height]],ve=Q.constrain()(se,fe,w);Q.transform(ae,ve),Q.wheelDelta(Rl),q.setState({d3Zoom:Q,d3Selection:ae,d3ZoomHandler:ae.on("wheel.zoom"),transform:[ve.x,ve.y,ve.k],domNode:U.current.closest(".react-flow")})}},[]),b.useEffect(()=>{oe&&K&&(s&&!M&&!_?oe.on("wheel.zoom",j=>{if(Or(j,I))return!1;j.preventDefault(),j.stopImmediatePropagation();const Q=oe.property("__zoom").k||1;if(j.ctrlKey&&i){const Pe=tn(j),he=Rl(j),Ie=Q*Math.pow(2,he);K.scaleTo(oe,Ie,Pe,j);return}const ae=j.deltaMode===1?20:1;let se=u===dr.Vertical?0:j.deltaX*ae,fe=u===dr.Horizontal?0:j.deltaY*ae;!Aa()&&j.shiftKey&&u!==dr.Vertical&&(se=j.deltaY*ae,fe=0),K.translateBy(oe,-(se/Q)*l,-(fe/Q)*l,{internal:!0});const ve=va(oe.property("__zoom")),{onViewportChangeStart:ke,onViewportChange:Te,onViewportChangeEnd:Oe}=q.getState();clearTimeout(ie.current),G.current||(G.current=!0,t==null||t(j,ve),ke==null||ke(ve)),G.current&&(e==null||e(j,ve),Te==null||Te(ve),ie.current=setTimeout(()=>{n==null||n(j,ve),Oe==null||Oe(ve),G.current=!1},150))},{passive:!1}):typeof ce<"u"&&oe.on("wheel.zoom",function(j,Q){if(!C&&j.type==="wheel"&&!j.ctrlKey||Or(j,I))return null;j.preventDefault(),ce.call(this,j,Q)},{passive:!1}))},[_,s,u,oe,K,ce,M,i,C,I,t,e,n]),b.useEffect(()=>{K&&K.on("start",j=>{var se,fe;if(!j.sourceEvent||j.sourceEvent.internal)return null;P.current=(se=j.sourceEvent)==null?void 0:se.button;const{onViewportChangeStart:Q}=q.getState(),ae=va(j.transform);V.current=!0,te.current=ae,((fe=j.sourceEvent)==null?void 0:fe.type)==="mousedown"&&q.setState({paneDragging:!0}),Q==null||Q(ae),t==null||t(j.sourceEvent,ae)})},[K,t]),b.useEffect(()=>{K&&(_&&!V.current?K.on("zoom",null):_||K.on("zoom",j=>{var ae;const{onViewportChange:Q}=q.getState();if(q.setState({transform:[j.transform.x,j.transform.y,j.transform.k]}),J.current=!!(r&&$l(p,P.current??0)),(e||Q)&&!((ae=j.sourceEvent)!=null&&ae.internal)){const se=va(j.transform);Q==null||Q(se),e==null||e(j.sourceEvent,se)}}))},[_,K,e,p,r]),b.useEffect(()=>{K&&K.on("end",j=>{if(!j.sourceEvent||j.sourceEvent.internal)return null;const{onViewportChangeEnd:Q}=q.getState();if(V.current=!1,q.setState({paneDragging:!1}),r&&$l(p,P.current??0)&&!J.current&&r(j.sourceEvent),J.current=!1,(n||Q)&&A0(te.current,j.transform)){const ae=va(j.transform);te.current=ae,clearTimeout(X.current),X.current=setTimeout(()=>{Q==null||Q(ae),n==null||n(j.sourceEvent,ae)},s?150:0)}})},[K,s,p,n,r]),b.useEffect(()=>{K&&K.filter(j=>{const Q=M||o,ae=i&&j.ctrlKey;if((p===!0||Array.isArray(p)&&p.includes(1))&&j.button===1&&j.type==="mousedown"&&(Or(j,"react-flow__node")||Or(j,"react-flow__edge")))return!0;if(!p&&!Q&&!s&&!f&&!i||_||!f&&j.type==="dblclick"||Or(j,I)&&j.type==="wheel"||Or(j,T)&&(j.type!=="wheel"||s&&j.type==="wheel"&&!M)||!i&&j.ctrlKey&&j.type==="wheel"||!Q&&!s&&!ae&&j.type==="wheel"||!p&&(j.type==="mousedown"||j.type==="touchstart")||Array.isArray(p)&&!p.includes(j.button)&&j.type==="mousedown")return!1;const se=Array.isArray(p)&&p.includes(j.button)||!j.button||j.button<=1;return(!j.ctrlKey||j.type==="wheel")&&se})},[_,K,o,i,s,f,p,h,M]),B.createElement("div",{className:"react-flow__renderer",ref:U,style:mc},R)},L0=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function F0(){const{userSelectionActive:e,userSelectionRect:t}=tt(L0,St);return e&&t?B.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Ll(e,t){const n=t.parentNode||t.parentId,r=e.find(o=>o.id===n);if(r){const o=t.position.x+t.width-r.width,i=t.position.y+t.height-r.height;if(o>0||i>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,o>0&&(r.style.width+=o),i>0&&(r.style.height+=i),t.position.x<0){const s=Math.abs(t.position.x);r.position.x=r.position.x-s,r.style.width+=s,t.position.x=0}if(t.position.y<0){const s=Math.abs(t.position.y);r.position.y=r.position.y-s,r.style.height+=s,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function W0(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,o)=>{const i=e.filter(l=>l.id===o.id);if(i.length===0)return r.push(o),r;const s={...o};for(const l of i)if(l)switch(l.type){case"select":{s.selected=l.selected;break}case"position":{typeof l.position<"u"&&(s.position=l.position),typeof l.positionAbsolute<"u"&&(s.positionAbsolute=l.positionAbsolute),typeof l.dragging<"u"&&(s.dragging=l.dragging),s.expandParent&&Ll(r,s);break}case"dimensions":{typeof l.dimensions<"u"&&(s.width=l.dimensions.width,s.height=l.dimensions.height),typeof l.updateStyle<"u"&&(s.style={...s.style||{},...l.dimensions}),typeof l.resizing=="boolean"&&(s.resizing=l.resizing),s.expandParent&&Ll(r,s);break}case"remove":return r}return r.push(s),r},n)}function Bd(e,t){return W0(e,t)}const qn=(e,t)=>({id:e,type:"select",selected:t});function Ir(e,t){return e.reduce((n,r)=>{const o=t.includes(r.id);return!r.selected&&o?(r.selected=!0,n.push(qn(r.id,!0))):r.selected&&!o&&(r.selected=!1,n.push(qn(r.id,!1))),n},[])}const qi=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},B0=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Hd=b.memo(({isSelecting:e,selectionMode:t=To.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:o,onPaneClick:i,onPaneContextMenu:s,onPaneScroll:l,onPaneMouseEnter:u,onPaneMouseMove:f,onPaneMouseLeave:h,children:p})=>{const y=b.useRef(null),w=wt(),S=b.useRef(0),k=b.useRef(0),N=b.useRef(),{userSelectionActive:C,elementsSelectable:R,dragging:I}=tt(B0,St),T=()=>{w.setState({userSelectionActive:!1,userSelectionRect:null}),S.current=0,k.current=0},X=ce=>{i==null||i(ce),w.getState().resetSelectedElements(),w.setState({nodesSelectionActive:!1})},q=ce=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){ce.preventDefault();return}s==null||s(ce)},V=l?ce=>l(ce):void 0,J=ce=>{const{resetSelectedElements:_,domNode:M}=w.getState();if(N.current=M==null?void 0:M.getBoundingClientRect(),!R||!e||ce.button!==0||ce.target!==y.current||!N.current)return;const{x:P,y:G}=Zn(ce,N.current);_(),w.setState({userSelectionRect:{width:0,height:0,startX:P,startY:G,x:P,y:G}}),r==null||r(ce)},U=ce=>{const{userSelectionRect:_,nodeInternals:M,edges:P,transform:G,onNodesChange:ie,onEdgesChange:j,nodeOrigin:Q,getNodes:ae}=w.getState();if(!e||!N.current||!_)return;w.setState({userSelectionActive:!0,nodesSelectionActive:!1});const se=Zn(ce,N.current),fe=_.startX??0,ve=_.startY??0,ke={..._,x:se.x<fe?se.x:fe,y:se.y<ve?se.y:ve,width:Math.abs(se.x-fe),height:Math.abs(se.y-ve)},Te=ae(),Oe=kd(M,ke,G,t===To.Partial,!0,Q),Pe=_d(Oe,P).map(Ie=>Ie.id),he=Oe.map(Ie=>Ie.id);if(S.current!==he.length){S.current=he.length;const Ie=Ir(Te,he);Ie.length&&(ie==null||ie(Ie))}if(k.current!==Pe.length){k.current=Pe.length;const Ie=Ir(P,Pe);Ie.length&&(j==null||j(Ie))}w.setState({userSelectionRect:ke})},te=ce=>{if(ce.button!==0)return;const{userSelectionRect:_}=w.getState();!C&&_&&ce.target===y.current&&(X==null||X(ce)),w.setState({nodesSelectionActive:S.current>0}),T(),o==null||o(ce)},K=ce=>{C&&(w.setState({nodesSelectionActive:S.current>0}),o==null||o(ce)),T()},oe=R&&(e||C);return B.createElement("div",{className:Et(["react-flow__pane",{dragging:I,selection:e}]),onClick:oe?void 0:qi(X,y),onContextMenu:qi(q,y),onWheel:qi(V,y),onMouseEnter:oe?void 0:u,onMouseDown:oe?J:void 0,onMouseMove:oe?U:f,onMouseUp:oe?te:void 0,onMouseLeave:oe?K:h,ref:y,style:mc},p,B.createElement(F0,null))});Hd.displayName="Pane";function zd(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:zd(r,t):!1}function Fl(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function H0(e,t,n,r){return Array.from(e.values()).filter(o=>(o.selected||o.id===r)&&(!o.parentNode||o.parentId||!zd(o,e))&&(o.draggable||t&&typeof o.draggable>"u")).map(o=>{var i,s;return{id:o.id,position:o.position||{x:0,y:0},positionAbsolute:o.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((i=o.positionAbsolute)==null?void 0:i.x)??0),y:n.y-(((s=o.positionAbsolute)==null?void 0:s.y)??0)},delta:{x:0,y:0},extent:o.extent,parentNode:o.parentNode||o.parentId,parentId:o.parentNode||o.parentId,width:o.width,height:o.height,expandParent:o.expandParent}})}function z0(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function Yd(e,t,n,r,o=[0,0],i){const s=z0(e,e.extent||r);let l=s;const u=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(u&&e.width&&e.height){const p=n.get(u),{x:y,y:w}=mr(p,o).positionAbsolute;l=p&&Zt(y)&&Zt(w)&&Zt(p.width)&&Zt(p.height)?[[y+e.width*o[0],w+e.height*o[1]],[y+p.width-e.width+e.width*o[0],w+p.height-e.height+e.height*o[1]]]:l}else i==null||i("005",Pn.error005()),l=s;else if(e.extent&&u&&e.extent!=="parent"){const p=n.get(u),{x:y,y:w}=mr(p,o).positionAbsolute;l=[[e.extent[0][0]+y,e.extent[0][1]+w],[e.extent[1][0]+y,e.extent[1][1]+w]]}let f={x:0,y:0};if(u){const p=n.get(u);f=mr(p,o).positionAbsolute}const h=l&&l!=="parent"?ic(t,l):t;return{position:{x:h.x-f.x,y:h.y-f.y},positionAbsolute:h}}function Ki({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(o=>({...n.get(o.id),position:o.position,positionAbsolute:o.positionAbsolute}));return[e?r.find(o=>o.id===e):r[0],r]}const Wl=(e,t,n,r)=>{const o=t.querySelectorAll(e);if(!o||!o.length)return null;const i=Array.from(o),s=t.getBoundingClientRect(),l={x:s.width*r[0],y:s.height*r[1]};return i.map(u=>{const f=u.getBoundingClientRect();return{id:u.getAttribute("data-handleid"),position:u.getAttribute("data-handlepos"),x:(f.left-s.left-l.x)/n,y:(f.top-s.top-l.y)/n,...ac(u)}})};function co(e,t,n){return n===void 0?n:r=>{const o=t().nodeInternals.get(e);o&&n(r,{...o})}}function xs({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:i,multiSelectionActive:s,nodeInternals:l,onError:u}=t.getState(),f=l.get(e);if(!f){u==null||u("012",Pn.error012(e));return}t.setState({nodesSelectionActive:!1}),f.selected?(n||f.selected&&s)&&(i({nodes:[f],edges:[]}),requestAnimationFrame(()=>{var h;return(h=r==null?void 0:r.current)==null?void 0:h.blur()})):o([e])}function Y0(){const e=wt();return b.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:o,snapToGrid:i}=e.getState(),s=n.touches?n.touches[0].clientX:n.clientX,l=n.touches?n.touches[0].clientY:n.clientY,u={x:(s-r[0])/r[2],y:(l-r[1])/r[2]};return{xSnapped:i?o[0]*Math.round(u.x/o[0]):u.x,ySnapped:i?o[1]*Math.round(u.y/o[1]):u.y,...u}},[])}function Ui(e){return(t,n,r)=>e==null?void 0:e(t,r)}function Vd({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:i,selectNodesOnDrag:s}){const l=wt(),[u,f]=b.useState(!1),h=b.useRef([]),p=b.useRef({x:null,y:null}),y=b.useRef(0),w=b.useRef(null),S=b.useRef({x:0,y:0}),k=b.useRef(null),N=b.useRef(!1),C=b.useRef(!1),R=b.useRef(!1),I=Y0();return b.useEffect(()=>{if(e!=null&&e.current){const T=Gt(e.current),X=({x:J,y:U})=>{const{nodeInternals:te,onNodeDrag:K,onSelectionDrag:oe,updateNodePositions:ce,nodeExtent:_,snapGrid:M,snapToGrid:P,nodeOrigin:G,onError:ie}=l.getState();p.current={x:J,y:U};let j=!1,Q={x:0,y:0,x2:0,y2:0};if(h.current.length>1&&_){const se=Qa(h.current,G);Q=Co(se)}if(h.current=h.current.map(se=>{const fe={x:J-se.distance.x,y:U-se.distance.y};P&&(fe.x=M[0]*Math.round(fe.x/M[0]),fe.y=M[1]*Math.round(fe.y/M[1]));const ve=[[_[0][0],_[0][1]],[_[1][0],_[1][1]]];h.current.length>1&&_&&!se.extent&&(ve[0][0]=se.positionAbsolute.x-Q.x+_[0][0],ve[1][0]=se.positionAbsolute.x+(se.width??0)-Q.x2+_[1][0],ve[0][1]=se.positionAbsolute.y-Q.y+_[0][1],ve[1][1]=se.positionAbsolute.y+(se.height??0)-Q.y2+_[1][1]);const ke=Yd(se,fe,te,ve,G,ie);return j=j||se.position.x!==ke.position.x||se.position.y!==ke.position.y,se.position=ke.position,se.positionAbsolute=ke.positionAbsolute,se}),!j)return;ce(h.current,!0,!0),f(!0);const ae=o?K:Ui(oe);if(ae&&k.current){const[se,fe]=Ki({nodeId:o,dragItems:h.current,nodeInternals:te});ae(k.current,se,fe)}},q=()=>{if(!w.current)return;const[J,U]=fd(S.current,w.current);if(J!==0||U!==0){const{transform:te,panBy:K}=l.getState();p.current.x=(p.current.x??0)-J/te[2],p.current.y=(p.current.y??0)-U/te[2],K({x:J,y:U})&&X(p.current)}y.current=requestAnimationFrame(q)},V=J=>{var G;const{nodeInternals:U,multiSelectionActive:te,nodesDraggable:K,unselectNodesAndEdges:oe,onNodeDragStart:ce,onSelectionDragStart:_}=l.getState();C.current=!0;const M=o?ce:Ui(_);(!s||!i)&&!te&&o&&((G=U.get(o))!=null&&G.selected||oe()),o&&i&&s&&xs({id:o,store:l,nodeRef:e});const P=I(J);if(p.current=P,h.current=H0(U,K,P,o),M&&h.current){const[ie,j]=Ki({nodeId:o,dragItems:h.current,nodeInternals:U});M(J.sourceEvent,ie,j)}};if(t)T.on(".drag",null);else{const J=tg().on("start",U=>{const{domNode:te,nodeDragThreshold:K}=l.getState();K===0&&V(U),R.current=!1;const oe=I(U);p.current=oe,w.current=(te==null?void 0:te.getBoundingClientRect())||null,S.current=Zn(U.sourceEvent,w.current)}).on("drag",U=>{var ce,_;const te=I(U),{autoPanOnNodeDrag:K,nodeDragThreshold:oe}=l.getState();if(U.sourceEvent.type==="touchmove"&&U.sourceEvent.touches.length>1&&(R.current=!0),!R.current){if(!N.current&&C.current&&K&&(N.current=!0,q()),!C.current){const M=te.xSnapped-(((ce=p==null?void 0:p.current)==null?void 0:ce.x)??0),P=te.ySnapped-(((_=p==null?void 0:p.current)==null?void 0:_.y)??0);Math.sqrt(M*M+P*P)>oe&&V(U)}(p.current.x!==te.xSnapped||p.current.y!==te.ySnapped)&&h.current&&C.current&&(k.current=U.sourceEvent,S.current=Zn(U.sourceEvent,w.current),X(te))}}).on("end",U=>{if(!(!C.current||R.current)&&(f(!1),N.current=!1,C.current=!1,cancelAnimationFrame(y.current),h.current)){const{updateNodePositions:te,nodeInternals:K,onNodeDragStop:oe,onSelectionDragStop:ce}=l.getState(),_=o?oe:Ui(ce);if(te(h.current,!1,!1),_){const[M,P]=Ki({nodeId:o,dragItems:h.current,nodeInternals:K});_(U.sourceEvent,M,P)}}}).filter(U=>{const te=U.target;return!U.button&&(!n||!Fl(te,`.${n}`,e))&&(!r||Fl(te,r,e))});return T.call(J),()=>{T.on(".drag",null)}}}},[e,t,n,r,i,l,o,s,I]),u}function qd(){const e=wt();return b.useCallback(n=>{const{nodeInternals:r,nodeExtent:o,updateNodePositions:i,getNodes:s,snapToGrid:l,snapGrid:u,onError:f,nodesDraggable:h}=e.getState(),p=s().filter(R=>R.selected&&(R.draggable||h&&typeof R.draggable>"u")),y=l?u[0]:5,w=l?u[1]:5,S=n.isShiftPressed?4:1,k=n.x*y*S,N=n.y*w*S,C=p.map(R=>{if(R.positionAbsolute){const I={x:R.positionAbsolute.x+k,y:R.positionAbsolute.y+N};l&&(I.x=u[0]*Math.round(I.x/u[0]),I.y=u[1]*Math.round(I.y/u[1]));const{positionAbsolute:T,position:X}=Yd(R,I,r,o,void 0,f);R.position=X,R.positionAbsolute=T}return R});i(C,!0,!1)},[])}const Fr={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var lo=e=>{const t=({id:n,type:r,data:o,xPos:i,yPos:s,xPosOrigin:l,yPosOrigin:u,selected:f,onClick:h,onMouseEnter:p,onMouseMove:y,onMouseLeave:w,onContextMenu:S,onDoubleClick:k,style:N,className:C,isDraggable:R,isSelectable:I,isConnectable:T,isFocusable:X,selectNodesOnDrag:q,sourcePosition:V,targetPosition:J,hidden:U,resizeObserver:te,dragHandle:K,zIndex:oe,isParent:ce,noDragClassName:_,noPanClassName:M,initialized:P,disableKeyboardA11y:G,ariaLabel:ie,rfId:j,hasHandleBounds:Q})=>{const ae=wt(),se=b.useRef(null),fe=b.useRef(null),ve=b.useRef(V),ke=b.useRef(J),Te=b.useRef(r),Oe=I||R||h||p||y||w,Pe=qd(),he=co(n,ae.getState,p),Ie=co(n,ae.getState,y),Ze=co(n,ae.getState,w),je=co(n,ae.getState,S),Je=co(n,ae.getState,k),$e=Ye=>{const{nodeDragThreshold:Ne}=ae.getState();if(I&&(!q||!R||Ne>0)&&xs({id:n,store:ae,nodeRef:se}),h){const st=ae.getState().nodeInternals.get(n);st&&h(Ye,{...st})}},Fe=Ye=>{if(!gs(Ye)&&!G)if(gd.includes(Ye.key)&&I){const Ne=Ye.key==="Escape";xs({id:n,store:ae,unselect:Ne,nodeRef:se})}else R&&f&&Object.prototype.hasOwnProperty.call(Fr,Ye.key)&&(ae.setState({ariaLiveMessage:`Moved selected node ${Ye.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~i}, y: ${~~s}`}),Pe({x:Fr[Ye.key].x,y:Fr[Ye.key].y,isShiftPressed:Ye.shiftKey}))};b.useEffect(()=>()=>{fe.current&&(te==null||te.unobserve(fe.current),fe.current=null)},[]),b.useEffect(()=>{if(se.current&&!U){const Ye=se.current;(!P||!Q||fe.current!==Ye)&&(fe.current&&(te==null||te.unobserve(fe.current)),te==null||te.observe(Ye),fe.current=Ye)}},[U,P,Q]),b.useEffect(()=>{const Ye=Te.current!==r,Ne=ve.current!==V,st=ke.current!==J;se.current&&(Ye||Ne||st)&&(Ye&&(Te.current=r),Ne&&(ve.current=V),st&&(ke.current=J),ae.getState().updateNodeDimensions([{id:n,nodeElement:se.current,forceUpdate:!0}]))},[n,r,V,J]);const Ke=Vd({nodeRef:se,disabled:U||!R,noDragClassName:_,handleSelector:K,nodeId:n,isSelectable:I,selectNodesOnDrag:q});return U?null:B.createElement("div",{className:Et(["react-flow__node",`react-flow__node-${r}`,{[M]:R},C,{selected:f,selectable:I,parent:ce,dragging:Ke}]),ref:se,style:{zIndex:oe,transform:`translate(${l}px,${u}px)`,pointerEvents:Oe?"all":"none",visibility:P?"visible":"hidden",...N},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:he,onMouseMove:Ie,onMouseLeave:Ze,onContextMenu:je,onClick:$e,onDoubleClick:Je,onKeyDown:X?Fe:void 0,tabIndex:X?0:void 0,role:X?"button":void 0,"aria-describedby":G?void 0:`${$d}-${j}`,"aria-label":ie},B.createElement(o0,{value:n},B.createElement(e,{id:n,data:o,type:r,xPos:i,yPos:s,selected:f,isConnectable:T,sourcePosition:V,targetPosition:J,dragging:Ke,dragHandle:K,zIndex:oe})))};return t.displayName="NodeWrapper",b.memo(t)};const V0=e=>{const t=e.getNodes().filter(n=>n.selected);return{...Qa(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function q0({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=wt(),{width:o,height:i,x:s,y:l,transformString:u,userSelectionActive:f}=tt(V0,St),h=qd(),p=b.useRef(null);if(b.useEffect(()=>{var S;n||(S=p.current)==null||S.focus({preventScroll:!0})},[n]),Vd({nodeRef:p}),f||!o||!i)return null;const y=e?S=>{const k=r.getState().getNodes().filter(N=>N.selected);e(S,k)}:void 0,w=S=>{Object.prototype.hasOwnProperty.call(Fr,S.key)&&h({x:Fr[S.key].x,y:Fr[S.key].y,isShiftPressed:S.shiftKey})};return B.createElement("div",{className:Et(["react-flow__nodesselection","react-flow__container",t]),style:{transform:u}},B.createElement("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:y,tabIndex:n?void 0:-1,onKeyDown:n?void 0:w,style:{width:o,height:i,top:l,left:s}}))}var K0=b.memo(q0);const U0=e=>e.nodesSelectionActive,Kd=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:s,deleteKeyCode:l,onMove:u,onMoveStart:f,onMoveEnd:h,selectionKeyCode:p,selectionOnDrag:y,selectionMode:w,onSelectionStart:S,onSelectionEnd:k,multiSelectionKeyCode:N,panActivationKeyCode:C,zoomActivationKeyCode:R,elementsSelectable:I,zoomOnScroll:T,zoomOnPinch:X,panOnScroll:q,panOnScrollSpeed:V,panOnScrollMode:J,zoomOnDoubleClick:U,panOnDrag:te,defaultViewport:K,translateExtent:oe,minZoom:ce,maxZoom:_,preventScrolling:M,onSelectionContextMenu:P,noWheelClassName:G,noPanClassName:ie,disableKeyboardA11y:j})=>{const Q=tt(U0),ae=Do(p),se=Do(C),fe=se||te,ve=se||q,ke=ae||y&&fe!==!0;return M0({deleteKeyCode:l,multiSelectionKeyCode:N}),B.createElement(R0,{onMove:u,onMoveStart:f,onMoveEnd:h,onPaneContextMenu:i,elementsSelectable:I,zoomOnScroll:T,zoomOnPinch:X,panOnScroll:ve,panOnScrollSpeed:V,panOnScrollMode:J,zoomOnDoubleClick:U,panOnDrag:!ae&&fe,defaultViewport:K,translateExtent:oe,minZoom:ce,maxZoom:_,zoomActivationKeyCode:R,preventScrolling:M,noWheelClassName:G,noPanClassName:ie},B.createElement(Hd,{onSelectionStart:S,onSelectionEnd:k,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:s,panOnDrag:fe,isSelecting:!!ke,selectionMode:w},e,Q&&B.createElement(K0,{onSelectionContextMenu:P,noPanClassName:ie,disableKeyboardA11y:j})))};Kd.displayName="FlowRenderer";var X0=b.memo(Kd);function G0(e){return tt(b.useCallback(n=>e?kd(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function Z0(e){const t={input:lo(e.input||Pd),default:lo(e.default||bs),output:lo(e.output||Id),group:lo(e.group||fc)},n={},r=Object.keys(e).filter(o=>!["input","default","output","group"].includes(o)).reduce((o,i)=>(o[i]=lo(e[i]||bs),o),n);return{...t,...r}}const Q0=({x:e,y:t,width:n,height:r,origin:o})=>!n||!r?{x:e,y:t}:o[0]<0||o[1]<0||o[0]>1||o[1]>1?{x:e,y:t}:{x:e-n*o[0],y:t-r*o[1]},J0=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Ud=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,updateNodeDimensions:i,onError:s}=tt(J0,St),l=G0(e.onlyRenderVisibleElements),u=b.useRef(),f=b.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const h=new ResizeObserver(p=>{const y=p.map(w=>({id:w.target.getAttribute("data-id"),nodeElement:w.target,forceUpdate:!0}));i(y)});return u.current=h,h},[]);return b.useEffect(()=>()=>{var h;(h=u==null?void 0:u.current)==null||h.disconnect()},[]),B.createElement("div",{className:"react-flow__nodes",style:mc},l.map(h=>{var X,q,V;let p=h.type||"default";e.nodeTypes[p]||(s==null||s("003",Pn.error003(p)),p="default");const y=e.nodeTypes[p]||e.nodeTypes.default,w=!!(h.draggable||t&&typeof h.draggable>"u"),S=!!(h.selectable||o&&typeof h.selectable>"u"),k=!!(h.connectable||n&&typeof h.connectable>"u"),N=!!(h.focusable||r&&typeof h.focusable>"u"),C=e.nodeExtent?ic(h.positionAbsolute,e.nodeExtent):h.positionAbsolute,R=(C==null?void 0:C.x)??0,I=(C==null?void 0:C.y)??0,T=Q0({x:R,y:I,width:h.width??0,height:h.height??0,origin:e.nodeOrigin});return B.createElement(y,{key:h.id,id:h.id,className:h.className,style:h.style,type:p,data:h.data,sourcePosition:h.sourcePosition||De.Bottom,targetPosition:h.targetPosition||De.Top,hidden:h.hidden,xPos:R,yPos:I,xPosOrigin:T.x,yPosOrigin:T.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!h.selected,isDraggable:w,isSelectable:S,isConnectable:k,isFocusable:N,resizeObserver:f,dragHandle:h.dragHandle,zIndex:((X=h[dt])==null?void 0:X.z)??0,isParent:!!((q=h[dt])!=null&&q.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!h.width&&!!h.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:h.ariaLabel,hasHandleBounds:!!((V=h[dt])!=null&&V.handleBounds)})}))};Ud.displayName="NodeRenderer";var ev=b.memo(Ud);const tv=(e,t,n)=>n===De.Left?e-t:n===De.Right?e+t:e,nv=(e,t,n)=>n===De.Top?e-t:n===De.Bottom?e+t:e,Bl="react-flow__edgeupdater",Hl=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:i,onMouseOut:s,type:l})=>B.createElement("circle",{onMouseDown:o,onMouseEnter:i,onMouseOut:s,className:Et([Bl,`${Bl}-${l}`]),cx:tv(t,r,e),cy:nv(n,r,e),r,stroke:"transparent",fill:"transparent"}),rv=()=>!0;var jr=e=>{const t=({id:n,className:r,type:o,data:i,onClick:s,onEdgeDoubleClick:l,selected:u,animated:f,label:h,labelStyle:p,labelShowBg:y,labelBgStyle:w,labelBgPadding:S,labelBgBorderRadius:k,style:N,source:C,target:R,sourceX:I,sourceY:T,targetX:X,targetY:q,sourcePosition:V,targetPosition:J,elementsSelectable:U,hidden:te,sourceHandleId:K,targetHandleId:oe,onContextMenu:ce,onMouseEnter:_,onMouseMove:M,onMouseLeave:P,reconnectRadius:G,onReconnect:ie,onReconnectStart:j,onReconnectEnd:Q,markerEnd:ae,markerStart:se,rfId:fe,ariaLabel:ve,isFocusable:ke,isReconnectable:Te,pathOptions:Oe,interactionWidth:Pe,disableKeyboardA11y:he})=>{const Ie=b.useRef(null),[Ze,je]=b.useState(!1),[Je,$e]=b.useState(!1),Fe=wt(),Ke=b.useMemo(()=>`url('#${vs(se,fe)}')`,[se,fe]),Ye=b.useMemo(()=>`url('#${vs(ae,fe)}')`,[ae,fe]);if(te)return null;const Ne=Ue=>{var Se;const{edges:pt,addSelectedEdges:le,unselectNodesAndEdges:me,multiSelectionActive:ee}=Fe.getState(),pe=pt.find(Ce=>Ce.id===n);pe&&(U&&(Fe.setState({nodesSelectionActive:!1}),pe.selected&&ee?(me({nodes:[],edges:[pe]}),(Se=Ie.current)==null||Se.blur()):le([n])),s&&s(Ue,pe))},st=so(n,Fe.getState,l),bt=so(n,Fe.getState,ce),lt=so(n,Fe.getState,_),zt=so(n,Fe.getState,M),yt=so(n,Fe.getState,P),Nt=(Ue,pt)=>{if(Ue.button!==0)return;const{edges:le,isValidConnection:me}=Fe.getState(),ee=pt?R:C,pe=(pt?oe:K)||null,Se=pt?"target":"source",Ce=me||rv,de=pt,Re=le.find(Qe=>Qe.id===n);$e(!0),j==null||j(Ue,Re,Se);const Lt=Qe=>{$e(!1),Q==null||Q(Qe,Re,Se)};Td({event:Ue,handleId:pe,nodeId:ee,onConnect:Qe=>ie==null?void 0:ie(Re,Qe),isTarget:de,getState:Fe.getState,setState:Fe.setState,isValidConnection:Ce,edgeUpdaterType:Se,onReconnectEnd:Lt})},Ct=Ue=>Nt(Ue,!0),mt=Ue=>Nt(Ue,!1),Mt=()=>je(!0),Tt=()=>je(!1),kt=!U&&!s,It=Ue=>{var pt;if(!he&&gd.includes(Ue.key)&&U){const{unselectNodesAndEdges:le,addSelectedEdges:me,edges:ee}=Fe.getState();Ue.key==="Escape"?((pt=Ie.current)==null||pt.blur(),le({edges:[ee.find(Se=>Se.id===n)]})):me([n])}};return B.createElement("g",{className:Et(["react-flow__edge",`react-flow__edge-${o}`,r,{selected:u,animated:f,inactive:kt,updating:Ze}]),onClick:Ne,onDoubleClick:st,onContextMenu:bt,onMouseEnter:lt,onMouseMove:zt,onMouseLeave:yt,onKeyDown:ke?It:void 0,tabIndex:ke?0:void 0,role:ke?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":ve===null?void 0:ve||`Edge from ${C} to ${R}`,"aria-describedby":ke?`${Rd}-${fe}`:void 0,ref:Ie},!Je&&B.createElement(e,{id:n,source:C,target:R,selected:u,animated:f,label:h,labelStyle:p,labelShowBg:y,labelBgStyle:w,labelBgPadding:S,labelBgBorderRadius:k,data:i,style:N,sourceX:I,sourceY:T,targetX:X,targetY:q,sourcePosition:V,targetPosition:J,sourceHandleId:K,targetHandleId:oe,markerStart:Ke,markerEnd:Ye,pathOptions:Oe,interactionWidth:Pe}),Te&&B.createElement(B.Fragment,null,(Te==="source"||Te===!0)&&B.createElement(Hl,{position:V,centerX:I,centerY:T,radius:G,onMouseDown:Ct,onMouseEnter:Mt,onMouseOut:Tt,type:"source"}),(Te==="target"||Te===!0)&&B.createElement(Hl,{position:J,centerX:X,centerY:q,radius:G,onMouseDown:mt,onMouseEnter:Mt,onMouseOut:Tt,type:"target"})))};return t.displayName="EdgeWrapper",b.memo(t)};function ov(e){const t={default:jr(e.default||Ra),straight:jr(e.bezier||lc),step:jr(e.step||cc),smoothstep:jr(e.step||Za),simplebezier:jr(e.simplebezier||sc)},n={},r=Object.keys(e).filter(o=>!["default","bezier"].includes(o)).reduce((o,i)=>(o[i]=jr(e[i]||Ra),o),n);return{...t,...r}}function zl(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,o=((n==null?void 0:n.y)||0)+t.y,i=(n==null?void 0:n.width)||t.width,s=(n==null?void 0:n.height)||t.height;switch(e){case De.Top:return{x:r+i/2,y:o};case De.Right:return{x:r+i,y:o+s/2};case De.Bottom:return{x:r+i/2,y:o+s};case De.Left:return{x:r,y:o+s/2}}}function Yl(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const av=(e,t,n,r,o,i)=>{const s=zl(n,e,t),l=zl(i,r,o);return{sourceX:s.x,sourceY:s.y,targetX:l.x,targetY:l.y}};function iv({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:o,targetHeight:i,width:s,height:l,transform:u}){const f={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+o),y2:Math.max(e.y+r,t.y+i)};f.x===f.x2&&(f.x2+=1),f.y===f.y2&&(f.y2+=1);const h=Co({x:(0-u[0])/u[2],y:(0-u[1])/u[2],width:s/u[2],height:l/u[2]}),p=Math.max(0,Math.min(h.x2,f.x2)-Math.max(h.x,f.x)),y=Math.max(0,Math.min(h.y2,f.y2)-Math.max(h.y,f.y));return Math.ceil(p*y)>0}function Vl(e){var r,o,i,s,l;const t=((r=e==null?void 0:e[dt])==null?void 0:r.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)<"u"&&typeof((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.y)<"u";return[{x:((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.x)||0,y:((l=e==null?void 0:e.positionAbsolute)==null?void 0:l.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const sv=[{level:0,isMaxLevel:!0,edges:[]}];function cv(e,t,n=!1){let r=-1;const o=e.reduce((s,l)=>{var h,p;const u=Zt(l.zIndex);let f=u?l.zIndex:0;if(n){const y=t.get(l.target),w=t.get(l.source),S=l.selected||(y==null?void 0:y.selected)||(w==null?void 0:w.selected),k=Math.max(((h=w==null?void 0:w[dt])==null?void 0:h.z)||0,((p=y==null?void 0:y[dt])==null?void 0:p.z)||0,1e3);f=(u?l.zIndex:0)+(S?k:0)}return s[f]?s[f].push(l):s[f]=[l],r=f>r?f:r,s},{}),i=Object.entries(o).map(([s,l])=>{const u=+s;return{edges:l,level:u,isMaxLevel:u===r}});return i.length===0?sv:i}function lv(e,t,n){const r=tt(b.useCallback(o=>e?o.edges.filter(i=>{const s=t.get(i.source),l=t.get(i.target);return(s==null?void 0:s.width)&&(s==null?void 0:s.height)&&(l==null?void 0:l.width)&&(l==null?void 0:l.height)&&iv({sourcePos:s.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:s.width,sourceHeight:s.height,targetWidth:l.width,targetHeight:l.height,width:o.width,height:o.height,transform:o.transform})}):o.edges,[e,t]));return cv(r,t,n)}const uv=({color:e="none",strokeWidth:t=1})=>B.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),dv=({color:e="none",strokeWidth:t=1})=>B.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),ql={[$a.Arrow]:uv,[$a.ArrowClosed]:dv};function fv(e){const t=wt();return b.useMemo(()=>{var o,i;return Object.prototype.hasOwnProperty.call(ql,e)?ql[e]:((i=(o=t.getState()).onError)==null||i.call(o,"009",Pn.error009(e)),null)},[e])}const hv=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:i="strokeWidth",strokeWidth:s,orient:l="auto-start-reverse"})=>{const u=fv(t);return u?B.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:l,refX:"0",refY:"0"},B.createElement(u,{color:n,strokeWidth:s})):null},mv=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((o,i)=>([i.markerStart,i.markerEnd].forEach(s=>{if(s&&typeof s=="object"){const l=vs(s,t);r.includes(l)||(o.push({id:l,color:s.color||e,...s}),r.push(l))}}),o),[]).sort((o,i)=>o.id.localeCompare(i.id))},Xd=({defaultColor:e,rfId:t})=>{const n=tt(b.useCallback(mv({defaultColor:e,rfId:t}),[e,t]),(r,o)=>!(r.length!==o.length||r.some((i,s)=>i.id!==o[s].id)));return B.createElement("defs",null,n.map(r=>B.createElement(hv,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};Xd.displayName="MarkerDefinitions";var pv=b.memo(Xd);const gv=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),Gd=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:o,noPanClassName:i,onEdgeContextMenu:s,onEdgeMouseEnter:l,onEdgeMouseMove:u,onEdgeMouseLeave:f,onEdgeClick:h,onEdgeDoubleClick:p,onReconnect:y,onReconnectStart:w,onReconnectEnd:S,reconnectRadius:k,children:N,disableKeyboardA11y:C})=>{const{edgesFocusable:R,edgesUpdatable:I,elementsSelectable:T,width:X,height:q,connectionMode:V,nodeInternals:J,onError:U}=tt(gv,St),te=lv(t,J,n);return X?B.createElement(B.Fragment,null,te.map(({level:K,edges:oe,isMaxLevel:ce})=>B.createElement("svg",{key:K,style:{zIndex:K},width:X,height:q,className:"react-flow__edges react-flow__container"},ce&&B.createElement(pv,{defaultColor:e,rfId:r}),B.createElement("g",null,oe.map(_=>{const[M,P,G]=Vl(J.get(_.source)),[ie,j,Q]=Vl(J.get(_.target));if(!G||!Q)return null;let ae=_.type||"default";o[ae]||(U==null||U("011",Pn.error011(ae)),ae="default");const se=o[ae]||o.default,fe=V===wr.Strict?j.target:(j.target??[]).concat(j.source??[]),ve=Yl(P.source,_.sourceHandle),ke=Yl(fe,_.targetHandle),Te=(ve==null?void 0:ve.position)||De.Bottom,Oe=(ke==null?void 0:ke.position)||De.Top,Pe=!!(_.focusable||R&&typeof _.focusable>"u"),he=_.reconnectable||_.updatable,Ie=typeof y<"u"&&(he||I&&typeof he>"u");if(!ve||!ke)return U==null||U("008",Pn.error008(ve,_)),null;const{sourceX:Ze,sourceY:je,targetX:Je,targetY:$e}=av(M,ve,Te,ie,ke,Oe);return B.createElement(se,{key:_.id,id:_.id,className:Et([_.className,i]),type:ae,data:_.data,selected:!!_.selected,animated:!!_.animated,hidden:!!_.hidden,label:_.label,labelStyle:_.labelStyle,labelShowBg:_.labelShowBg,labelBgStyle:_.labelBgStyle,labelBgPadding:_.labelBgPadding,labelBgBorderRadius:_.labelBgBorderRadius,style:_.style,source:_.source,target:_.target,sourceHandleId:_.sourceHandle,targetHandleId:_.targetHandle,markerEnd:_.markerEnd,markerStart:_.markerStart,sourceX:Ze,sourceY:je,targetX:Je,targetY:$e,sourcePosition:Te,targetPosition:Oe,elementsSelectable:T,onContextMenu:s,onMouseEnter:l,onMouseMove:u,onMouseLeave:f,onClick:h,onEdgeDoubleClick:p,onReconnect:y,onReconnectStart:w,onReconnectEnd:S,reconnectRadius:k,rfId:r,ariaLabel:_.ariaLabel,isFocusable:Pe,isReconnectable:Ie,pathOptions:"pathOptions"in _?_.pathOptions:void 0,interactionWidth:_.interactionWidth,disableKeyboardA11y:C})})))),N):null};Gd.displayName="EdgeRenderer";var yv=b.memo(Gd);const vv=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function wv({children:e}){const t=tt(vv);return B.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function bv(e){const t=hc(),n=b.useRef(!1);b.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const xv={[De.Left]:De.Right,[De.Right]:De.Left,[De.Top]:De.Bottom,[De.Bottom]:De.Top},Zd=({nodeId:e,handleType:t,style:n,type:r=Kn.Bezier,CustomComponent:o,connectionStatus:i})=>{var q,V,J;const{fromNode:s,handleId:l,toX:u,toY:f,connectionMode:h}=tt(b.useCallback(U=>({fromNode:U.nodeInternals.get(e),handleId:U.connectionHandleId,toX:(U.connectionPosition.x-U.transform[0])/U.transform[2],toY:(U.connectionPosition.y-U.transform[1])/U.transform[2],connectionMode:U.connectionMode}),[e]),St),p=(q=s==null?void 0:s[dt])==null?void 0:q.handleBounds;let y=p==null?void 0:p[t];if(h===wr.Loose&&(y=y||(p==null?void 0:p[t==="source"?"target":"source"])),!s||!y)return null;const w=l?y.find(U=>U.id===l):y[0],S=w?w.x+w.width/2:(s.width??0)/2,k=w?w.y+w.height/2:s.height??0,N=(((V=s.positionAbsolute)==null?void 0:V.x)??0)+S,C=(((J=s.positionAbsolute)==null?void 0:J.y)??0)+k,R=w==null?void 0:w.position,I=R?xv[R]:null;if(!R||!I)return null;if(o)return B.createElement(o,{connectionLineType:r,connectionLineStyle:n,fromNode:s,fromHandle:w,fromX:N,fromY:C,toX:u,toY:f,fromPosition:R,toPosition:I,connectionStatus:i});let T="";const X={sourceX:N,sourceY:C,sourcePosition:R,targetX:u,targetY:f,targetPosition:I};return r===Kn.Bezier?[T]=xd(X):r===Kn.Step?[T]=ys({...X,borderRadius:0}):r===Kn.SmoothStep?[T]=ys(X):r===Kn.SimpleBezier?[T]=bd(X):T=`M${N},${C} ${u},${f}`,B.createElement("path",{d:T,fill:"none",className:"react-flow__connection-path",style:n})};Zd.displayName="ConnectionLine";const Sv=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function kv({containerStyle:e,style:t,type:n,component:r}){const{nodeId:o,handleType:i,nodesConnectable:s,width:l,height:u,connectionStatus:f}=tt(Sv,St);return!(o&&i&&l&&s)?null:B.createElement("svg",{style:e,width:l,height:u,className:"react-flow__edges react-flow__connectionline react-flow__container"},B.createElement("g",{className:Et(["react-flow__connection",f])},B.createElement(Zd,{nodeId:o,handleType:i,style:t,type:n,CustomComponent:r,connectionStatus:f})))}function Kl(e,t){return b.useRef(null),wt(),b.useMemo(()=>t(e),[e])}const Qd=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:o,onInit:i,onNodeClick:s,onEdgeClick:l,onNodeDoubleClick:u,onEdgeDoubleClick:f,onNodeMouseEnter:h,onNodeMouseMove:p,onNodeMouseLeave:y,onNodeContextMenu:w,onSelectionContextMenu:S,onSelectionStart:k,onSelectionEnd:N,connectionLineType:C,connectionLineStyle:R,connectionLineComponent:I,connectionLineContainerStyle:T,selectionKeyCode:X,selectionOnDrag:q,selectionMode:V,multiSelectionKeyCode:J,panActivationKeyCode:U,zoomActivationKeyCode:te,deleteKeyCode:K,onlyRenderVisibleElements:oe,elementsSelectable:ce,selectNodesOnDrag:_,defaultViewport:M,translateExtent:P,minZoom:G,maxZoom:ie,preventScrolling:j,defaultMarkerColor:Q,zoomOnScroll:ae,zoomOnPinch:se,panOnScroll:fe,panOnScrollSpeed:ve,panOnScrollMode:ke,zoomOnDoubleClick:Te,panOnDrag:Oe,onPaneClick:Pe,onPaneMouseEnter:he,onPaneMouseMove:Ie,onPaneMouseLeave:Ze,onPaneScroll:je,onPaneContextMenu:Je,onEdgeContextMenu:$e,onEdgeMouseEnter:Fe,onEdgeMouseMove:Ke,onEdgeMouseLeave:Ye,onReconnect:Ne,onReconnectStart:st,onReconnectEnd:bt,reconnectRadius:lt,noDragClassName:zt,noWheelClassName:yt,noPanClassName:Nt,elevateEdgesOnSelect:Ct,disableKeyboardA11y:mt,nodeOrigin:Mt,nodeExtent:Tt,rfId:kt})=>{const It=Kl(e,Z0),Ue=Kl(t,ov);return bv(i),B.createElement(X0,{onPaneClick:Pe,onPaneMouseEnter:he,onPaneMouseMove:Ie,onPaneMouseLeave:Ze,onPaneContextMenu:Je,onPaneScroll:je,deleteKeyCode:K,selectionKeyCode:X,selectionOnDrag:q,selectionMode:V,onSelectionStart:k,onSelectionEnd:N,multiSelectionKeyCode:J,panActivationKeyCode:U,zoomActivationKeyCode:te,elementsSelectable:ce,onMove:n,onMoveStart:r,onMoveEnd:o,zoomOnScroll:ae,zoomOnPinch:se,zoomOnDoubleClick:Te,panOnScroll:fe,panOnScrollSpeed:ve,panOnScrollMode:ke,panOnDrag:Oe,defaultViewport:M,translateExtent:P,minZoom:G,maxZoom:ie,onSelectionContextMenu:S,preventScrolling:j,noDragClassName:zt,noWheelClassName:yt,noPanClassName:Nt,disableKeyboardA11y:mt},B.createElement(wv,null,B.createElement(yv,{edgeTypes:Ue,onEdgeClick:l,onEdgeDoubleClick:f,onlyRenderVisibleElements:oe,onEdgeContextMenu:$e,onEdgeMouseEnter:Fe,onEdgeMouseMove:Ke,onEdgeMouseLeave:Ye,onReconnect:Ne,onReconnectStart:st,onReconnectEnd:bt,reconnectRadius:lt,defaultMarkerColor:Q,noPanClassName:Nt,elevateEdgesOnSelect:!!Ct,disableKeyboardA11y:mt,rfId:kt},B.createElement(kv,{style:R,type:C,component:I,containerStyle:T})),B.createElement("div",{className:"react-flow__edgelabel-renderer"}),B.createElement(ev,{nodeTypes:It,onNodeClick:s,onNodeDoubleClick:u,onNodeMouseEnter:h,onNodeMouseMove:p,onNodeMouseLeave:y,onNodeContextMenu:w,selectNodesOnDrag:_,onlyRenderVisibleElements:oe,noPanClassName:Nt,noDragClassName:zt,disableKeyboardA11y:mt,nodeOrigin:Mt,nodeExtent:Tt,rfId:kt})))};Qd.displayName="GraphView";var _v=b.memo(Qd);const Ss=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Hn={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Ss,nodeExtent:Ss,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:wr.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Qy,isValidConnection:void 0},Ev=()=>hm((e,t)=>({...Hn,setNodes:n=>{const{nodeInternals:r,nodeOrigin:o,elevateNodesOnSelect:i}=t();e({nodeInternals:Vi(n,r,o,i)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(o=>({...r,...o}))})},setDefaultNodesAndEdges:(n,r)=>{const o=typeof n<"u",i=typeof r<"u",s=o?Vi(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:s,edges:i?r:[],hasDefaultNodes:o,hasDefaultEdges:i})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:o,fitViewOnInit:i,fitViewOnInitDone:s,fitViewOnInitOptions:l,domNode:u,nodeOrigin:f}=t(),h=u==null?void 0:u.querySelector(".react-flow__viewport");if(!h)return;const p=window.getComputedStyle(h),{m22:y}=new window.DOMMatrixReadOnly(p.transform),w=n.reduce((k,N)=>{const C=o.get(N.id);if(C!=null&&C.hidden)o.set(C.id,{...C,[dt]:{...C[dt],handleBounds:void 0}});else if(C){const R=ac(N.nodeElement);!!(R.width&&R.height&&(C.width!==R.width||C.height!==R.height||N.forceUpdate))&&(o.set(C.id,{...C,[dt]:{...C[dt],handleBounds:{source:Wl(".source",N.nodeElement,y,f),target:Wl(".target",N.nodeElement,y,f)}},...R}),k.push({id:C.id,type:"dimensions",dimensions:R}))}return k},[]);Fd(o,f);const S=s||i&&!s&&Wd(t,{initial:!0,...l});e({nodeInternals:new Map(o),fitViewOnInitDone:S}),(w==null?void 0:w.length)>0&&(r==null||r(w))},updateNodePositions:(n,r=!0,o=!1)=>{const{triggerNodeChanges:i}=t(),s=n.map(l=>{const u={id:l.id,type:"position",dragging:o};return r&&(u.positionAbsolute=l.positionAbsolute,u.position=l.position),u});i(s)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:o,hasDefaultNodes:i,nodeOrigin:s,getNodes:l,elevateNodesOnSelect:u}=t();if(n!=null&&n.length){if(i){const f=Bd(n,l()),h=Vi(f,o,s,u);e({nodeInternals:h})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:o,getNodes:i}=t();let s,l=null;r?s=n.map(u=>qn(u,!0)):(s=Ir(i(),n),l=Ir(o,[])),ya({changedNodes:s,changedEdges:l,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:o,getNodes:i}=t();let s,l=null;r?s=n.map(u=>qn(u,!0)):(s=Ir(o,n),l=Ir(i(),[])),ya({changedNodes:l,changedEdges:s,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:o,getNodes:i}=t(),s=n||i(),l=r||o,u=s.map(h=>(h.selected=!1,qn(h.id,!1))),f=l.map(h=>qn(h.id,!1));ya({changedNodes:u,changedEdges:f,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:o}=t();r==null||r.scaleExtent([n,o]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:o}=t();r==null||r.scaleExtent([o,n]),e({maxZoom:n})},setTranslateExtent:n=>{var r;(r=t().d3Zoom)==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),i=r().filter(l=>l.selected).map(l=>qn(l.id,!1)),s=n.filter(l=>l.selected).map(l=>qn(l.id,!1));ya({changedNodes:i,changedEdges:s,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(o=>{o.positionAbsolute=ic(o.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:o,height:i,d3Zoom:s,d3Selection:l,translateExtent:u}=t();if(!s||!l||!n.x&&!n.y)return!1;const f=Dn.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),h=[[0,0],[o,i]],p=s==null?void 0:s.constrain()(f,h,u);return s.transform(l,p),r[0]!==p.x||r[1]!==p.y||r[2]!==p.k},cancelConnection:()=>e({connectionNodeId:Hn.connectionNodeId,connectionHandleId:Hn.connectionHandleId,connectionHandleType:Hn.connectionHandleType,connectionStatus:Hn.connectionStatus,connectionStartHandle:Hn.connectionStartHandle,connectionEndHandle:Hn.connectionEndHandle}),reset:()=>e({...Hn})}),Object.is),Jd=({children:e})=>{const t=b.useRef(null);return t.current||(t.current=Ev()),B.createElement(Vy,{value:t.current},e)};Jd.displayName="ReactFlowProvider";const ef=({children:e})=>b.useContext(Ga)?B.createElement(B.Fragment,null,e):B.createElement(Jd,null,e);ef.displayName="ReactFlowWrapper";const Nv={input:Pd,default:bs,output:Id,group:fc},Cv={default:Ra,straight:lc,step:cc,smoothstep:Za,simplebezier:sc},Tv=[0,0],Dv=[15,15],Ov={x:0,y:0,zoom:1},jv={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},tf=b.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:i=Nv,edgeTypes:s=Cv,onNodeClick:l,onEdgeClick:u,onInit:f,onMove:h,onMoveStart:p,onMoveEnd:y,onConnect:w,onConnectStart:S,onConnectEnd:k,onClickConnectStart:N,onClickConnectEnd:C,onNodeMouseEnter:R,onNodeMouseMove:I,onNodeMouseLeave:T,onNodeContextMenu:X,onNodeDoubleClick:q,onNodeDragStart:V,onNodeDrag:J,onNodeDragStop:U,onNodesDelete:te,onEdgesDelete:K,onSelectionChange:oe,onSelectionDragStart:ce,onSelectionDrag:_,onSelectionDragStop:M,onSelectionContextMenu:P,onSelectionStart:G,onSelectionEnd:ie,connectionMode:j=wr.Strict,connectionLineType:Q=Kn.Bezier,connectionLineStyle:ae,connectionLineComponent:se,connectionLineContainerStyle:fe,deleteKeyCode:ve="Backspace",selectionKeyCode:ke="Shift",selectionOnDrag:Te=!1,selectionMode:Oe=To.Full,panActivationKeyCode:Pe="Space",multiSelectionKeyCode:he=Aa()?"Meta":"Control",zoomActivationKeyCode:Ie=Aa()?"Meta":"Control",snapToGrid:Ze=!1,snapGrid:je=Dv,onlyRenderVisibleElements:Je=!1,selectNodesOnDrag:$e=!0,nodesDraggable:Fe,nodesConnectable:Ke,nodesFocusable:Ye,nodeOrigin:Ne=Tv,edgesFocusable:st,edgesUpdatable:bt,elementsSelectable:lt,defaultViewport:zt=Ov,minZoom:yt=.5,maxZoom:Nt=2,translateExtent:Ct=Ss,preventScrolling:mt=!0,nodeExtent:Mt,defaultMarkerColor:Tt="#b1b1b7",zoomOnScroll:kt=!0,zoomOnPinch:It=!0,panOnScroll:Ue=!1,panOnScrollSpeed:pt=.5,panOnScrollMode:le=dr.Free,zoomOnDoubleClick:me=!0,panOnDrag:ee=!0,onPaneClick:pe,onPaneMouseEnter:Se,onPaneMouseMove:Ce,onPaneMouseLeave:de,onPaneScroll:Re,onPaneContextMenu:Lt,children:gt,onEdgeContextMenu:Qe,onEdgeDoubleClick:ut,onEdgeMouseEnter:An,onEdgeMouseMove:et,onEdgeMouseLeave:vt,onEdgeUpdate:cn,onEdgeUpdateStart:bn,onEdgeUpdateEnd:xn,onReconnect:Xe,onReconnectStart:at,onReconnectEnd:$n,reconnectRadius:ln=10,edgeUpdaterRadius:un=10,onNodesChange:dn,onEdgesChange:Kr,noDragClassName:Ft="nodrag",noWheelClassName:Jt="nowheel",noPanClassName:Yt="nopan",fitView:Rn=!1,fitViewOptions:Le,connectOnClick:Ve=!0,attributionPosition:nt,proOptions:ft,defaultEdgeOptions:Dt,elevateNodesOnSelect:Sn=!0,elevateEdgesOnSelect:rt=!1,disableKeyboardA11y:Ut=!1,autoPanOnConnect:en=!0,autoPanOnNodeDrag:Vo=!0,connectionRadius:Ln=20,isValidConnection:kr,onError:Ur,style:Xr,id:fn,nodeDragThreshold:qo,..._r},Ko)=>{const We=fn||"1";return B.createElement("div",{..._r,style:{...Xr,...jv},ref:Ko,className:Et(["react-flow",o]),"data-testid":"rf__wrapper",id:fn},B.createElement(ef,null,B.createElement(_v,{onInit:f,onMove:h,onMoveStart:p,onMoveEnd:y,onNodeClick:l,onEdgeClick:u,onNodeMouseEnter:R,onNodeMouseMove:I,onNodeMouseLeave:T,onNodeContextMenu:X,onNodeDoubleClick:q,nodeTypes:i,edgeTypes:s,connectionLineType:Q,connectionLineStyle:ae,connectionLineComponent:se,connectionLineContainerStyle:fe,selectionKeyCode:ke,selectionOnDrag:Te,selectionMode:Oe,deleteKeyCode:ve,multiSelectionKeyCode:he,panActivationKeyCode:Pe,zoomActivationKeyCode:Ie,onlyRenderVisibleElements:Je,selectNodesOnDrag:$e,defaultViewport:zt,translateExtent:Ct,minZoom:yt,maxZoom:Nt,preventScrolling:mt,zoomOnScroll:kt,zoomOnPinch:It,zoomOnDoubleClick:me,panOnScroll:Ue,panOnScrollSpeed:pt,panOnScrollMode:le,panOnDrag:ee,onPaneClick:pe,onPaneMouseEnter:Se,onPaneMouseMove:Ce,onPaneMouseLeave:de,onPaneScroll:Re,onPaneContextMenu:Lt,onSelectionContextMenu:P,onSelectionStart:G,onSelectionEnd:ie,onEdgeContextMenu:Qe,onEdgeDoubleClick:ut,onEdgeMouseEnter:An,onEdgeMouseMove:et,onEdgeMouseLeave:vt,onReconnect:Xe??cn,onReconnectStart:at??bn,onReconnectEnd:$n??xn,reconnectRadius:ln??un,defaultMarkerColor:Tt,noDragClassName:Ft,noWheelClassName:Jt,noPanClassName:Yt,elevateEdgesOnSelect:rt,rfId:We,disableKeyboardA11y:Ut,nodeOrigin:Ne,nodeExtent:Mt}),B.createElement(x0,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:w,onConnectStart:S,onConnectEnd:k,onClickConnectStart:N,onClickConnectEnd:C,nodesDraggable:Fe,nodesConnectable:Ke,nodesFocusable:Ye,edgesFocusable:st,edgesUpdatable:bt,elementsSelectable:lt,elevateNodesOnSelect:Sn,minZoom:yt,maxZoom:Nt,nodeExtent:Mt,onNodesChange:dn,onEdgesChange:Kr,snapToGrid:Ze,snapGrid:je,connectionMode:j,translateExtent:Ct,connectOnClick:Ve,defaultEdgeOptions:Dt,fitView:Rn,fitViewOptions:Le,onNodesDelete:te,onEdgesDelete:K,onNodeDragStart:V,onNodeDrag:J,onNodeDragStop:U,onSelectionDrag:_,onSelectionDragStart:ce,onSelectionDragStop:M,noPanClassName:Yt,nodeOrigin:Ne,rfId:We,autoPanOnConnect:en,autoPanOnNodeDrag:Vo,onError:Ur,connectionRadius:Ln,isValidConnection:kr,nodeDragThreshold:qo}),B.createElement(w0,{onSelectionChange:oe}),gt,B.createElement(Ky,{proOptions:ft,position:nt}),B.createElement(N0,{rfId:We,disableKeyboardA11y:Ut})))});tf.displayName="ReactFlow";const nf=({id:e,x:t,y:n,width:r,height:o,style:i,color:s,strokeColor:l,strokeWidth:u,className:f,borderRadius:h,shapeRendering:p,onClick:y,selected:w})=>{const{background:S,backgroundColor:k}=i||{},N=s||S||k;return B.createElement("rect",{className:Et(["react-flow__minimap-node",{selected:w},f]),x:t,y:n,rx:h,ry:h,width:r,height:o,fill:N,stroke:l,strokeWidth:u,shapeRendering:p,onClick:y?C=>y(C,e):void 0})};nf.displayName="MiniMapNode";var Pv=b.memo(nf);const Mv=e=>e.nodeOrigin,Iv=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),Xi=e=>e instanceof Function?e:()=>e;function Av({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:o=2,nodeComponent:i=Pv,onClick:s}){const l=tt(Iv,St),u=tt(Mv),f=Xi(t),h=Xi(e),p=Xi(n),y=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return B.createElement(B.Fragment,null,l.map(w=>{const{x:S,y:k}=mr(w,u).positionAbsolute;return B.createElement(i,{key:w.id,x:S,y:k,width:w.width,height:w.height,style:w.style,selected:w.selected,className:p(w),color:f(w),borderRadius:r,strokeColor:h(w),strokeWidth:o,shapeRendering:y,onClick:s,id:w.id})}))}var $v=b.memo(Av);const Rv=200,Lv=150,Fv=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?Gy(Qa(t,e.nodeOrigin),n):n,rfId:e.rfId}},Wv="react-flow__minimap-desc";function rf({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:o="",nodeBorderRadius:i=5,nodeStrokeWidth:s=2,nodeComponent:l,maskColor:u="rgb(240, 240, 240, 0.6)",maskStrokeColor:f="none",maskStrokeWidth:h=1,position:p="bottom-right",onClick:y,onNodeClick:w,pannable:S=!1,zoomable:k=!1,ariaLabel:N="React Flow mini map",inversePan:C=!1,zoomStep:R=10,offsetScale:I=5}){const T=wt(),X=b.useRef(null),{boundingRect:q,viewBB:V,rfId:J}=tt(Fv,St),U=(e==null?void 0:e.width)??Rv,te=(e==null?void 0:e.height)??Lv,K=q.width/U,oe=q.height/te,ce=Math.max(K,oe),_=ce*U,M=ce*te,P=I*ce,G=q.x-(_-q.width)/2-P,ie=q.y-(M-q.height)/2-P,j=_+P*2,Q=M+P*2,ae=`${Wv}-${J}`,se=b.useRef(0);se.current=ce,b.useEffect(()=>{if(X.current){const ke=Gt(X.current),Te=he=>{const{transform:Ie,d3Selection:Ze,d3Zoom:je}=T.getState();if(he.sourceEvent.type!=="wheel"||!Ze||!je)return;const Je=-he.sourceEvent.deltaY*(he.sourceEvent.deltaMode===1?.05:he.sourceEvent.deltaMode?1:.002)*R,$e=Ie[2]*Math.pow(2,Je);je.scaleTo(Ze,$e)},Oe=he=>{const{transform:Ie,d3Selection:Ze,d3Zoom:je,translateExtent:Je,width:$e,height:Fe}=T.getState();if(he.sourceEvent.type!=="mousemove"||!Ze||!je)return;const Ke=se.current*Math.max(1,Ie[2])*(C?-1:1),Ye={x:Ie[0]-he.sourceEvent.movementX*Ke,y:Ie[1]-he.sourceEvent.movementY*Ke},Ne=[[0,0],[$e,Fe]],st=Dn.translate(Ye.x,Ye.y).scale(Ie[2]),bt=je.constrain()(st,Ne,Je);je.transform(Ze,bt)},Pe=ud().on("zoom",S?Oe:null).on("zoom.wheel",k?Te:null);return ke.call(Pe),()=>{ke.on("zoom",null)}}},[S,k,C,R]);const fe=y?ke=>{const Te=tn(ke);y(ke,{x:Te[0],y:Te[1]})}:void 0,ve=w?(ke,Te)=>{const Oe=T.getState().nodeInternals.get(Te);w(ke,Oe)}:void 0;return B.createElement(No,{position:p,style:e,className:Et(["react-flow__minimap",t]),"data-testid":"rf__minimap"},B.createElement("svg",{width:U,height:te,viewBox:`${G} ${ie} ${j} ${Q}`,role:"img","aria-labelledby":ae,ref:X,onClick:fe},N&&B.createElement("title",{id:ae},N),B.createElement($v,{onClick:ve,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:o,nodeStrokeWidth:s,nodeComponent:l}),B.createElement("path",{className:"react-flow__minimap-mask",d:`M${G-P},${ie-P}h${j+P*2}v${Q+P*2}h${-j-P*2}z
        M${V.x},${V.y}h${V.width}v${V.height}h${-V.width}z`,fill:u,fillRule:"evenodd",stroke:f,strokeWidth:h,pointerEvents:"none"})))}rf.displayName="MiniMap";var Bv=b.memo(rf);function Hv(){return B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},B.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function zv(){return B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},B.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Yv(){return B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},B.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function Vv(){return B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},B.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function qv(){return B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},B.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const go=({children:e,className:t,...n})=>B.createElement("button",{type:"button",className:Et(["react-flow__controls-button",t]),...n},e);go.displayName="ControlButton";const Kv=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),of=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:i,onZoomOut:s,onFitView:l,onInteractiveChange:u,className:f,children:h,position:p="bottom-left"})=>{const y=wt(),[w,S]=b.useState(!1),{isInteractive:k,minZoomReached:N,maxZoomReached:C}=tt(Kv,St),{zoomIn:R,zoomOut:I,fitView:T}=hc();if(b.useEffect(()=>{S(!0)},[]),!w)return null;const X=()=>{R(),i==null||i()},q=()=>{I(),s==null||s()},V=()=>{T(o),l==null||l()},J=()=>{y.setState({nodesDraggable:!k,nodesConnectable:!k,elementsSelectable:!k}),u==null||u(!k)};return B.createElement(No,{className:Et(["react-flow__controls",f]),position:p,style:e,"data-testid":"rf__controls"},t&&B.createElement(B.Fragment,null,B.createElement(go,{onClick:X,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:C},B.createElement(Hv,null)),B.createElement(go,{onClick:q,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:N},B.createElement(zv,null))),n&&B.createElement(go,{className:"react-flow__controls-fitview",onClick:V,title:"fit view","aria-label":"fit view"},B.createElement(Yv,null)),r&&B.createElement(go,{className:"react-flow__controls-interactive",onClick:J,title:"toggle interactivity","aria-label":"toggle interactivity"},k?B.createElement(qv,null):B.createElement(Vv,null)),h)};of.displayName="Controls";var Uv=b.memo(of),on;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(on||(on={}));function Xv({color:e,dimensions:t,lineWidth:n}){return B.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function Gv({color:e,radius:t}){return B.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const Zv={[on.Dots]:"#91919a",[on.Lines]:"#eee",[on.Cross]:"#e2e2e2"},Qv={[on.Dots]:1,[on.Lines]:1,[on.Cross]:6},Jv=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function af({id:e,variant:t=on.Dots,gap:n=20,size:r,lineWidth:o=1,offset:i=2,color:s,style:l,className:u}){const f=b.useRef(null),{transform:h,patternId:p}=tt(Jv,St),y=s||Zv[t],w=r||Qv[t],S=t===on.Dots,k=t===on.Cross,N=Array.isArray(n)?n:[n,n],C=[N[0]*h[2]||1,N[1]*h[2]||1],R=w*h[2],I=k?[R,R]:C,T=S?[R/i,R/i]:[I[0]/i,I[1]/i];return B.createElement("svg",{className:Et(["react-flow__background",u]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:f,"data-testid":"rf__background"},B.createElement("pattern",{id:p+e,x:h[0]%C[0],y:h[1]%C[1],width:C[0],height:C[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${T[0]},-${T[1]})`},S?B.createElement(Gv,{color:y,radius:R/i}):B.createElement(Xv,{dimensions:I,color:y,lineWidth:o})),B.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${p+e})`}))}af.displayName="Background";var ew=b.memo(af);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var tw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Mn=(e,t)=>{const n=b.forwardRef(({color:r="currentColor",size:o=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:l="",children:u,...f},h)=>b.createElement("svg",{ref:h,...tw,width:o,height:o,stroke:r,strokeWidth:s?Number(i)*24/Number(o):i,className:["lucide",`lucide-${nw(e)}`,l].join(" "),...f},[...t.map(([p,y])=>b.createElement(p,y)),...Array.isArray(u)?u:[u]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=Mn("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ow=Mn("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=Mn("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iw=Mn("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=Mn("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=Mn("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=Mn("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=Mn("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=Mn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function sf(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=sf(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Wt(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=sf(e))&&(r&&(r+=" "),r+=t);return r}const cf=(e,t)=>{if(!e||!t)return null;const n=new Date(e),o=new Date(t).getTime()-n.getTime(),i=Math.floor(o/1e3),s=Math.floor(i/60),l=Math.floor(s/60),u=[];return l>0&&u.push(`${l}h`),s%60>0&&u.push(`${s%60}m`),i%60>0&&u.push(`${i%60}s`),o%1e3>0&&u.push(`${o%1e3}ms`),u.join(" ")},Gi=e=>{var t;switch((t=e.status)==null?void 0:t.toLowerCase()){case"completed":return"border-green-500";case"running":return"border-blue-500";case"retrying":return"border-orange-600";case"pending":return"border-purple-600";case"terminated":return"border-yellow-500";case"failed":return"border-red-600";default:return"border-gray-500"}},uw=(e,t=50)=>e?e.length<=t?e:e.slice(0,t)+"...":"",dw=e=>{switch(e==null?void 0:e.toLowerCase()){case"completed":return"text-green-600 bg-green-50";case"retrying":return"text-orange-700 bg-orange-100";case"running":return"text-blue-600 bg-blue-50";case"pending":return"text-purple-700 bg-purple-100";case"terminated":return"text-yellow-600 bg-yellow-50";case"failed":return"text-red-700 bg-red-100";default:return"text-gray-600 bg-gray-50"}};function fw({id:e,data:t,expandChildWorkflowNode:n,collapseChildWorkflowNode:r,onShowNodeData:o,onSpreadBatchNodes:i}){var h;const s=t.type==="workflow"||t.type==="childWorkflow",l=t.count&&t.count>1,u=`${e}-${t.type}-${t.workflowId||""}-${t.runId||""}`,f=async()=>{t.count===1&&s&&!t.isLoading&&(t.isExpanded?await r(e,t.runId):await n(e,t.runId))};return g.jsxs("div",{className:"relative min-w-[450px]",children:[g.jsx(Xn,{type:"source",position:De.Right,id:`${e}-right`,style:{top:"50%",transform:"translateY(-50%)"}}),g.jsx(Xn,{type:"target",position:De.Left,id:`${e}-left`,style:{top:"50%",transform:"translateY(-50%)"}}),g.jsx(Xn,{type:"source",position:De.Bottom,id:`${e}-bottom`,style:{left:"25px"}}),g.jsx(Xn,{type:"target",position:De.Top,id:`${e}-top`,style:{left:"25px"}}),g.jsxs("div",{className:"relative",children:[l&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:Wt("absolute rounded-xl shadow-lg border-2 transition-all duration-300",Gi(t),"opacity-40"),style:{top:"-8px",left:"-8px",width:"100%",height:"100%",pointerEvents:"none"},children:g.jsx("div",{className:"p-4 bg-white rounded-xl"})}),g.jsx("div",{className:Wt("absolute rounded-xl shadow-lg border-2 transition-all duration-300",Gi(t),"opacity-70"),style:{top:"-4px",left:"-4px",width:"100%",height:"100%",pointerEvents:"none"},children:g.jsx("div",{className:"p-4 bg-white rounded-xl"})})]}),g.jsx("div",{className:Wt("rounded-xl shadow-lg border-2 transition-all duration-300 relative",Gi(t),t.isLoading&&"opacity-75"),children:g.jsxs("div",{className:Wt("p-4 relative bg-white rounded-xl",s&&!t.isLoading&&!l&&"cursor-pointer",t.isLoading&&"pointer-events-none"),onClick:f,children:[g.jsxs("div",{className:"absolute -top-2.5 -right-2.5 flex gap-1",children:[l&&g.jsx("div",{onClick:p=>{p.stopPropagation(),r(e,t.runId),i==null||i(e)},className:"w-6 h-6 flex items-center justify-center bg-blue-500 hover:bg-blue-600 rounded-full text-white shadow-lg z-10 cursor-pointer",children:g.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4.5a6.5 6.5 0 1 0 4.135 11.286l3.572 3.572a1 1 0 0 0 1.414-1.414l-3.572-3.572A6.5 6.5 0 0 0 11 4.5z"})})}),!l&&g.jsx("div",{onClick:p=>{p.stopPropagation();const y=p.currentTarget.closest(".relative");if(y){const w=y.getBoundingClientRect();o(t,{x:w.left+w.width/2,y:w.top})}},className:"w-6 h-6 flex items-center justify-center bg-gray-500 hover:bg-gray-600 rounded-full text-white shadow-lg z-10 cursor-pointer",children:g.jsx(iw,{className:"w-3 h-3"})})]}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:Wt("w-8 h-8 rounded flex items-center justify-center flex-shrink-0",s?"bg-amber-50":"bg-fuchsia-50"),children:s?g.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[g.jsx("rect",{x:"9",y:"3",width:"6",height:"6",rx:"1"}),g.jsx("rect",{x:"3",y:"15",width:"6",height:"6",rx:"1"}),g.jsx("rect",{x:"15",y:"15",width:"6",height:"6",rx:"1"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3M6 15v-3h12v3"})]}):g.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:g.jsx("path",{d:"M5 12L12 5L19 12L12 19L5 12Z"})})}),g.jsxs("div",{className:Wt("min-w-0",s?"":"flex items-center h-[2.5rem]"),children:[g.jsx("h3",{className:"font-semibold text-gray-800 truncate",children:t.title}),s&&g.jsx("p",{className:"text-xs text-gray-500 overflow-hidden text-ellipsis",children:uw(e)})]})]}),g.jsxs("div",{className:"absolute -top-3 left-3 flex gap-2",children:[g.jsx("div",{className:"px-2 py-0.5 rounded text-xs font-medium shadow-sm z-10",style:{backgroundColor:s?"rgb(254 243 199)":"rgb(253 244 255)",color:s?"rgb(217 119 6)":"rgb(192 38 211)"},children:s?"workflow":"activity"}),g.jsx("div",{className:Wt("px-2 py-0.5 rounded text-xs font-medium shadow-sm z-10",dw(t.status)),children:((h=t.status)==null?void 0:h.toLowerCase())||"unknown"}),l&&g.jsxs("div",{className:"px-2 py-0.5 rounded text-xs font-medium shadow-sm z-10",style:{backgroundColor:"rgba(224, 242, 254, 0.9)",color:"#0369a1"},children:["batch: ",t.count]}),t.startTime&&t.endTime&&g.jsx("div",{className:"px-2 py-0.5 rounded text-xs font-medium shadow-sm z-10",style:{backgroundColor:"rgba(236, 254, 255, 0.9)",color:"#0891b2"},children:cf(t.startTime,t.endTime)})]}),t.taskQueue&&g.jsx("div",{className:"absolute -bottom-2.5 right-2",children:g.jsx("div",{className:"px-2 py-0.5 rounded text-xs font-medium shadow-sm",style:{backgroundColor:"rgba(240, 253, 244, 0.9)",color:"#166534",fontSize:"0.7rem"},children:t.taskQueue?t.taskQueue.name:""})}),t.isLoading&&g.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-50 flex items-center justify-center z-20",children:g.jsx("div",{className:"bg-white p-2 rounded-full shadow-lg",children:g.jsx(aw,{className:"w-5 h-5 text-blue-500 animate-spin"})})})]})})]})]},u)}function hw({nodes:e,onFocusChange:t,selectedWorkflow:n,onReset:r,onClose:o}){const[i,s]=b.useState(288),l=b.useRef(null),u=b.useRef(null),f=b.useRef(!1),h=e.filter(w=>w.data.type==="workflow"||w.data.type==="childWorkflow"),p=w=>{t(n===w?null:w)};b.useEffect(()=>{const w=k=>{if(!f.current||!u.current)return;const N=k.clientX-u.current.getBoundingClientRect().left;N>200&&N<600&&s(N)},S=()=>{f.current&&(f.current=!1,document.body.style.cursor="default")};return window.addEventListener("mousemove",w),window.addEventListener("mouseup",S),()=>{window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",S)}},[]);const y=w=>{w.preventDefault(),f.current=!0,document.body.style.cursor="col-resize"};return g.jsxs("div",{ref:u,className:"absolute left-0 top-0 bottom-0 bg-white shadow-lg border-r z-10",style:{width:`${i}px`},children:[g.jsxs("div",{className:"p-4 border-b flex items-center justify-between bg-gray-50",children:[g.jsx("h3",{className:"font-semibold text-gray-800",children:"Focus Workflow"}),g.jsx("button",{onClick:o,className:"p-1 hover:bg-gray-200 rounded-full transition-colors",children:g.jsx(pr,{className:"w-5 h-5 text-gray-600"})})]}),g.jsxs("div",{className:"p-4 overflow-y-auto",children:[g.jsx("button",{onClick:r,className:"w-full mb-4 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-md transition-colors",children:"Reset View"}),g.jsx("div",{className:"space-y-2",children:h.map(w=>g.jsx("button",{onClick:()=>p(w.id),className:Wt("w-full px-3 py-2 text-left rounded-md transition-colors","text-sm",n===w.id?"bg-blue-50 text-blue-700 font-medium":"text-gray-700 hover:bg-gray-50"),children:w.data.title},w.id))})]}),g.jsx("div",{ref:l,onMouseDown:y,className:"w-1 cursor-col-resize hover:bg-gray-300 absolute top-0 right-0 bottom-0"})]})}var lf={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Mr,function(){var n=function(a,c){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,m){d.__proto__=m}||function(d,m){for(var v in m)Object.prototype.hasOwnProperty.call(m,v)&&(d[v]=m[v])})(a,c)},r=function(){return(r=Object.assign||function(a){for(var c,d=1,m=arguments.length;d<m;d++)for(var v in c=arguments[d])Object.prototype.hasOwnProperty.call(c,v)&&(a[v]=c[v]);return a}).apply(this,arguments)};function o(a,c,d){for(var m,v=0,x=c.length;v<x;v++)!m&&v in c||((m=m||Array.prototype.slice.call(c,0,v))[v]=c[v]);return a.concat(m||Array.prototype.slice.call(c))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Mr,s=Object.keys,l=Array.isArray;function u(a,c){return typeof c!="object"||s(c).forEach(function(d){a[d]=c[d]}),a}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var f=Object.getPrototypeOf,h={}.hasOwnProperty;function p(a,c){return h.call(a,c)}function y(a,c){typeof c=="function"&&(c=c(f(a))),(typeof Reflect>"u"?s:Reflect.ownKeys)(c).forEach(function(d){S(a,d,c[d])})}var w=Object.defineProperty;function S(a,c,d,m){w(a,c,u(d&&p(d,"get")&&typeof d.get=="function"?{get:d.get,set:d.set,configurable:!0}:{value:d,configurable:!0,writable:!0},m))}function k(a){return{from:function(c){return a.prototype=Object.create(c.prototype),S(a.prototype,"constructor",a),{extend:y.bind(null,a.prototype)}}}}var N=Object.getOwnPropertyDescriptor,C=[].slice;function R(a,c,d){return C.call(a,c,d)}function I(a,c){return c(a)}function T(a){if(!a)throw new Error("Assertion Failed")}function X(a){i.setImmediate?setImmediate(a):setTimeout(a,0)}function q(a,c){if(typeof c=="string"&&p(a,c))return a[c];if(!c)return a;if(typeof c!="string"){for(var d=[],m=0,v=c.length;m<v;++m){var x=q(a,c[m]);d.push(x)}return d}var E=c.indexOf(".");if(E!==-1){var D=a[c.substr(0,E)];return D==null?void 0:q(D,c.substr(E+1))}}function V(a,c,d){if(a&&c!==void 0&&!("isFrozen"in Object&&Object.isFrozen(a)))if(typeof c!="string"&&"length"in c){T(typeof d!="string"&&"length"in d);for(var m=0,v=c.length;m<v;++m)V(a,c[m],d[m])}else{var x,E,D=c.indexOf(".");D!==-1?(x=c.substr(0,D),(E=c.substr(D+1))===""?d===void 0?l(a)&&!isNaN(parseInt(x))?a.splice(x,1):delete a[x]:a[x]=d:V(D=!(D=a[x])||!p(a,x)?a[x]={}:D,E,d)):d===void 0?l(a)&&!isNaN(parseInt(c))?a.splice(c,1):delete a[c]:a[c]=d}}function J(a){var c,d={};for(c in a)p(a,c)&&(d[c]=a[c]);return d}var U=[].concat;function te(a){return U.apply([],a)}var kn="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(te([8,16,32,64].map(function(a){return["Int","Uint","Float"].map(function(c){return c+a+"Array"})}))).filter(function(a){return i[a]}),K=new Set(kn.map(function(a){return i[a]})),oe=null;function ce(a){return oe=new WeakMap,a=function c(d){if(!d||typeof d!="object")return d;var m=oe.get(d);if(m)return m;if(l(d)){m=[],oe.set(d,m);for(var v=0,x=d.length;v<x;++v)m.push(c(d[v]))}else if(K.has(d.constructor))m=d;else{var E,D=f(d);for(E in m=D===Object.prototype?{}:Object.create(D),oe.set(d,m),d)p(d,E)&&(m[E]=c(d[E]))}return m}(a),oe=null,a}var _={}.toString;function M(a){return _.call(a).slice(8,-1)}var P=typeof Symbol<"u"?Symbol.iterator:"@@iterator",G=typeof P=="symbol"?function(a){var c;return a!=null&&(c=a[P])&&c.apply(a)}:function(){return null};function ie(a,c){return c=a.indexOf(c),0<=c&&a.splice(c,1),0<=c}var j={};function Q(a){var c,d,m,v;if(arguments.length===1){if(l(a))return a.slice();if(this===j&&typeof a=="string")return[a];if(v=G(a)){for(d=[];!(m=v.next()).done;)d.push(m.value);return d}if(a==null)return[a];if(typeof(c=a.length)!="number")return[a];for(d=new Array(c);c--;)d[c]=a[c];return d}for(c=arguments.length,d=new Array(c);c--;)d[c]=arguments[c];return d}var ae=typeof Symbol<"u"?function(a){return a[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Ct=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Xt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Ct),se={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function fe(a,c){this.name=a,this.message=c}function ve(a,c){return a+". Errors: "+Object.keys(c).map(function(d){return c[d].toString()}).filter(function(d,m,v){return v.indexOf(d)===m}).join(`
`)}function ke(a,c,d,m){this.failures=c,this.failedKeys=m,this.successCount=d,this.message=ve(a,c)}function Te(a,c){this.name="BulkError",this.failures=Object.keys(c).map(function(d){return c[d]}),this.failuresByPos=c,this.message=ve(a,this.failures)}k(fe).from(Error).extend({toString:function(){return this.name+": "+this.message}}),k(ke).from(fe),k(Te).from(fe);var Oe=Xt.reduce(function(a,c){return a[c]=c+"Error",a},{}),Pe=fe,he=Xt.reduce(function(a,c){var d=c+"Error";function m(v,x){this.name=d,v?typeof v=="string"?(this.message="".concat(v).concat(x?`
 `+x:""),this.inner=x||null):typeof v=="object"&&(this.message="".concat(v.name," ").concat(v.message),this.inner=v):(this.message=se[c]||d,this.inner=null)}return k(m).from(Pe),a[c]=m,a},{});he.Syntax=SyntaxError,he.Type=TypeError,he.Range=RangeError;var Ie=Ct.reduce(function(a,c){return a[c+"Error"]=he[c],a},{}),Ze=Xt.reduce(function(a,c){return["Syntax","Type","Range"].indexOf(c)===-1&&(a[c+"Error"]=he[c]),a},{});function je(){}function Je(a){return a}function $e(a,c){return a==null||a===Je?c:function(d){return c(a(d))}}function Fe(a,c){return function(){a.apply(this,arguments),c.apply(this,arguments)}}function Ke(a,c){return a===je?c:function(){var d=a.apply(this,arguments);d!==void 0&&(arguments[0]=d);var m=this.onsuccess,v=this.onerror;this.onsuccess=null,this.onerror=null;var x=c.apply(this,arguments);return m&&(this.onsuccess=this.onsuccess?Fe(m,this.onsuccess):m),v&&(this.onerror=this.onerror?Fe(v,this.onerror):v),x!==void 0?x:d}}function Ye(a,c){return a===je?c:function(){a.apply(this,arguments);var d=this.onsuccess,m=this.onerror;this.onsuccess=this.onerror=null,c.apply(this,arguments),d&&(this.onsuccess=this.onsuccess?Fe(d,this.onsuccess):d),m&&(this.onerror=this.onerror?Fe(m,this.onerror):m)}}function Ne(a,c){return a===je?c:function(d){var m=a.apply(this,arguments);u(d,m);var v=this.onsuccess,x=this.onerror;return this.onsuccess=null,this.onerror=null,d=c.apply(this,arguments),v&&(this.onsuccess=this.onsuccess?Fe(v,this.onsuccess):v),x&&(this.onerror=this.onerror?Fe(x,this.onerror):x),m===void 0?d===void 0?void 0:d:u(m,d)}}function st(a,c){return a===je?c:function(){return c.apply(this,arguments)!==!1&&a.apply(this,arguments)}}function bt(a,c){return a===je?c:function(){var d=a.apply(this,arguments);if(d&&typeof d.then=="function"){for(var m=this,v=arguments.length,x=new Array(v);v--;)x[v]=arguments[v];return d.then(function(){return c.apply(m,x)})}return c.apply(this,arguments)}}Ze.ModifyError=ke,Ze.DexieError=fe,Ze.BulkError=Te;var lt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function zt(a){lt=a}var yt={},Nt=100,kn=typeof Promise>"u"?[]:function(){var a=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[a,f(a),a];var c=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[c,f(c),a]}(),Ct=kn[0],Xt=kn[1],kn=kn[2],Xt=Xt&&Xt.then,mt=Ct&&Ct.constructor,Mt=!!kn,Tt=function(a,c){pe.push([a,c]),It&&(queueMicrotask(et),It=!1)},kt=!0,It=!0,Ue=[],pt=[],le=Je,me={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:je,pgp:!1,env:{},finalize:je},ee=me,pe=[],Se=0,Ce=[];function de(a){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var c=this._PSD=ee;if(typeof a!="function"){if(a!==yt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&gt(this,this._value))}this._state=null,this._value=null,++c.ref,function d(m,v){try{v(function(x){if(m._state===null){if(x===m)throw new TypeError("A promise cannot be resolved with itself.");var E=m._lib&&vt();x&&typeof x.then=="function"?d(m,function(D,A){x instanceof de?x._then(D,A):x.then(D,A)}):(m._state=!0,m._value=x,Qe(m)),E&&cn()}},gt.bind(null,m))}catch(x){gt(m,x)}}(this,a)}var Re={get:function(){var a=ee,c=dn;function d(m,v){var x=this,E=!a.global&&(a!==ee||c!==dn),D=E&&!Yt(),A=new de(function(L,H){ut(x,new Lt(Dt(m,a,E,D),Dt(v,a,E,D),L,H,a))});return this._consoleTask&&(A._consoleTask=this._consoleTask),A}return d.prototype=yt,d},set:function(a){S(this,"then",a&&a.prototype===yt?Re:{get:function(){return a},set:Re.set})}};function Lt(a,c,d,m,v){this.onFulfilled=typeof a=="function"?a:null,this.onRejected=typeof c=="function"?c:null,this.resolve=d,this.reject=m,this.psd=v}function gt(a,c){var d,m;pt.push(c),a._state===null&&(d=a._lib&&vt(),c=le(c),a._state=!1,a._value=c,m=a,Ue.some(function(v){return v._value===m._value})||Ue.push(m),Qe(a),d&&cn())}function Qe(a){var c=a._listeners;a._listeners=[];for(var d=0,m=c.length;d<m;++d)ut(a,c[d]);var v=a._PSD;--v.ref||v.finalize(),Se===0&&(++Se,Tt(function(){--Se==0&&bn()},[]))}function ut(a,c){if(a._state!==null){var d=a._state?c.onFulfilled:c.onRejected;if(d===null)return(a._state?c.resolve:c.reject)(a._value);++c.psd.ref,++Se,Tt(An,[d,a,c])}else a._listeners.push(c)}function An(a,c,d){try{var m,v=c._value;!c._state&&pt.length&&(pt=[]),m=lt&&c._consoleTask?c._consoleTask.run(function(){return a(v)}):a(v),c._state||pt.indexOf(v)!==-1||function(x){for(var E=Ue.length;E;)if(Ue[--E]._value===x._value)return Ue.splice(E,1)}(c),d.resolve(m)}catch(x){d.reject(x)}finally{--Se==0&&bn(),--d.psd.ref||d.psd.finalize()}}function et(){ft(me,function(){vt()&&cn()})}function vt(){var a=kt;return It=kt=!1,a}function cn(){var a,c,d;do for(;0<pe.length;)for(a=pe,pe=[],d=a.length,c=0;c<d;++c){var m=a[c];m[0].apply(null,m[1])}while(0<pe.length);It=kt=!0}function bn(){var a=Ue;Ue=[],a.forEach(function(m){m._PSD.onunhandled.call(null,m._value,m)});for(var c=Ce.slice(0),d=c.length;d;)c[--d]()}function xn(a){return new de(yt,!1,a)}function Xe(a,c){var d=ee;return function(){var m=vt(),v=ee;try{return Ve(d,!0),a.apply(this,arguments)}catch(x){c&&c(x)}finally{Ve(v,!1),m&&cn()}}}y(de.prototype,{then:Re,_then:function(a,c){ut(this,new Lt(null,null,a,c,ee))},catch:function(a){if(arguments.length===1)return this.then(null,a);var c=a,d=arguments[1];return typeof c=="function"?this.then(null,function(m){return(m instanceof c?d:xn)(m)}):this.then(null,function(m){return(m&&m.name===c?d:xn)(m)})},finally:function(a){return this.then(function(c){return de.resolve(a()).then(function(){return c})},function(c){return de.resolve(a()).then(function(){return xn(c)})})},timeout:function(a,c){var d=this;return a<1/0?new de(function(m,v){var x=setTimeout(function(){return v(new he.Timeout(c))},a);d.then(m,v).finally(clearTimeout.bind(null,x))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&S(de.prototype,Symbol.toStringTag,"Dexie.Promise"),me.env=nt(),y(de,{all:function(){var a=Q.apply(null,arguments).map(Rn);return new de(function(c,d){a.length===0&&c([]);var m=a.length;a.forEach(function(v,x){return de.resolve(v).then(function(E){a[x]=E,--m||c(a)},d)})})},resolve:function(a){return a instanceof de?a:a&&typeof a.then=="function"?new de(function(c,d){a.then(c,d)}):new de(yt,!0,a)},reject:xn,race:function(){var a=Q.apply(null,arguments).map(Rn);return new de(function(c,d){a.map(function(m){return de.resolve(m).then(c,d)})})},PSD:{get:function(){return ee},set:function(a){return ee=a}},totalEchoes:{get:function(){return dn}},newPSD:Ft,usePSD:ft,scheduler:{get:function(){return Tt},set:function(a){Tt=a}},rejectionMapper:{get:function(){return le},set:function(a){le=a}},follow:function(a,c){return new de(function(d,m){return Ft(function(v,x){var E=ee;E.unhandleds=[],E.onunhandled=x,E.finalize=Fe(function(){var D,A=this;D=function(){A.unhandleds.length===0?v():x(A.unhandleds[0])},Ce.push(function L(){D(),Ce.splice(Ce.indexOf(L),1)}),++Se,Tt(function(){--Se==0&&bn()},[])},E.finalize),a()},c,d,m)})}}),mt&&(mt.allSettled&&S(de,"allSettled",function(){var a=Q.apply(null,arguments).map(Rn);return new de(function(c){a.length===0&&c([]);var d=a.length,m=new Array(d);a.forEach(function(v,x){return de.resolve(v).then(function(E){return m[x]={status:"fulfilled",value:E}},function(E){return m[x]={status:"rejected",reason:E}}).then(function(){return--d||c(m)})})})}),mt.any&&typeof AggregateError<"u"&&S(de,"any",function(){var a=Q.apply(null,arguments).map(Rn);return new de(function(c,d){a.length===0&&d(new AggregateError([]));var m=a.length,v=new Array(m);a.forEach(function(x,E){return de.resolve(x).then(function(D){return c(D)},function(D){v[E]=D,--m||d(new AggregateError(v))})})})}),mt.withResolvers&&(de.withResolvers=mt.withResolvers));var at={awaits:0,echoes:0,id:0},$n=0,ln=[],un=0,dn=0,Kr=0;function Ft(a,c,d,m){var v=ee,x=Object.create(v);return x.parent=v,x.ref=0,x.global=!1,x.id=++Kr,me.env,x.env=Mt?{Promise:de,PromiseProp:{value:de,configurable:!0,writable:!0},all:de.all,race:de.race,allSettled:de.allSettled,any:de.any,resolve:de.resolve,reject:de.reject}:{},c&&u(x,c),++v.ref,x.finalize=function(){--this.parent.ref||this.parent.finalize()},m=ft(x,a,d,m),x.ref===0&&x.finalize(),m}function Jt(){return at.id||(at.id=++$n),++at.awaits,at.echoes+=Nt,at.id}function Yt(){return!!at.awaits&&(--at.awaits==0&&(at.id=0),at.echoes=at.awaits*Nt,!0)}function Rn(a){return at.echoes&&a&&a.constructor===mt?(Jt(),a.then(function(c){return Yt(),c},function(c){return Yt(),rt(c)})):a}function Le(){var a=ln[ln.length-1];ln.pop(),Ve(a,!1)}function Ve(a,c){var d,m=ee;(c?!at.echoes||un++&&a===ee:!un||--un&&a===ee)||queueMicrotask(c?(function(v){++dn,at.echoes&&--at.echoes!=0||(at.echoes=at.awaits=at.id=0),ln.push(ee),Ve(v,!0)}).bind(null,a):Le),a!==ee&&(ee=a,m===me&&(me.env=nt()),Mt&&(d=me.env.Promise,c=a.env,(m.global||a.global)&&(Object.defineProperty(i,"Promise",c.PromiseProp),d.all=c.all,d.race=c.race,d.resolve=c.resolve,d.reject=c.reject,c.allSettled&&(d.allSettled=c.allSettled),c.any&&(d.any=c.any))))}function nt(){var a=i.Promise;return Mt?{Promise:a,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:a.all,race:a.race,allSettled:a.allSettled,any:a.any,resolve:a.resolve,reject:a.reject}:{}}function ft(a,c,d,m,v){var x=ee;try{return Ve(a,!0),c(d,m,v)}finally{Ve(x,!1)}}function Dt(a,c,d,m){return typeof a!="function"?a:function(){var v=ee;d&&Jt(),Ve(c,!0);try{return a.apply(this,arguments)}finally{Ve(v,!1),m&&queueMicrotask(Yt)}}}function Sn(a){Promise===mt&&at.echoes===0?un===0?a():enqueueNativeMicroTask(a):setTimeout(a,0)}(""+Xt).indexOf("[native code]")===-1&&(Jt=Yt=je);var rt=de.reject,Ut="",en="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Vo="String expected.",Ln=[],kr="__dbnames",Ur="readonly",Xr="readwrite";function fn(a,c){return a?c?function(){return a.apply(this,arguments)&&c.apply(this,arguments)}:a:c}var qo={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function _r(a){return typeof a!="string"||/\./.test(a)?function(c){return c}:function(c){return c[a]===void 0&&a in c&&delete(c=ce(c))[a],c}}function Ko(){throw he.Type()}function We(a,c){try{var d=Mc(a),m=Mc(c);if(d!==m)return d==="Array"?1:m==="Array"?-1:d==="binary"?1:m==="binary"?-1:d==="string"?1:m==="string"?-1:d==="Date"?1:m!=="Date"?NaN:-1;switch(d){case"number":case"Date":case"string":return c<a?1:a<c?-1:0;case"binary":return function(v,x){for(var E=v.length,D=x.length,A=E<D?E:D,L=0;L<A;++L)if(v[L]!==x[L])return v[L]<x[L]?-1:1;return E===D?0:E<D?-1:1}(Ic(a),Ic(c));case"Array":return function(v,x){for(var E=v.length,D=x.length,A=E<D?E:D,L=0;L<A;++L){var H=We(v[L],x[L]);if(H!==0)return H}return E===D?0:E<D?-1:1}(a,c)}}catch{}return NaN}function Mc(a){var c=typeof a;return c!="object"?c:ArrayBuffer.isView(a)?"binary":(a=M(a),a==="ArrayBuffer"?"binary":a)}function Ic(a){return a instanceof Uint8Array?a:ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(a)}var Ac=(ot.prototype._trans=function(a,c,d){var m=this._tx||ee.trans,v=this.name,x=lt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(a==="readonly"?"read":"write"," ").concat(this.name));function E(L,H,O){if(!O.schema[v])throw new he.NotFound("Table "+v+" not part of transaction");return c(O.idbtrans,O)}var D=vt();try{var A=m&&m.db._novip===this.db._novip?m===ee.trans?m._promise(a,E,d):Ft(function(){return m._promise(a,E,d)},{trans:m,transless:ee.transless||ee}):function L(H,O,Y,$){if(H.idbdb&&(H._state.openComplete||ee.letThrough||H._vip)){var W=H._createTransaction(O,Y,H._dbSchema);try{W.create(),H._state.PR1398_maxLoop=3}catch(z){return z.name===Oe.InvalidState&&H.isOpen()&&0<--H._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),H.close({disableAutoOpen:!1}),H.open().then(function(){return L(H,O,Y,$)})):rt(z)}return W._promise(O,function(z,F){return Ft(function(){return ee.trans=W,$(z,F,W)})}).then(function(z){if(O==="readwrite")try{W.idbtrans.commit()}catch{}return O==="readonly"?z:W._completion.then(function(){return z})})}if(H._state.openComplete)return rt(new he.DatabaseClosed(H._state.dbOpenError));if(!H._state.isBeingOpened){if(!H._state.autoOpen)return rt(new he.DatabaseClosed);H.open().catch(je)}return H._state.dbReadyPromise.then(function(){return L(H,O,Y,$)})}(this.db,a,[this.name],E);return x&&(A._consoleTask=x,A=A.catch(function(L){return console.trace(L),rt(L)})),A}finally{D&&cn()}},ot.prototype.get=function(a,c){var d=this;return a&&a.constructor===Object?this.where(a).first(c):a==null?rt(new he.Type("Invalid argument to Table.get()")):this._trans("readonly",function(m){return d.core.get({trans:m,key:a}).then(function(v){return d.hook.reading.fire(v)})}).then(c)},ot.prototype.where=function(a){if(typeof a=="string")return new this.db.WhereClause(this,a);if(l(a))return new this.db.WhereClause(this,"[".concat(a.join("+"),"]"));var c=s(a);if(c.length===1)return this.where(c[0]).equals(a[c[0]]);var d=this.schema.indexes.concat(this.schema.primKey).filter(function(D){if(D.compound&&c.every(function(L){return 0<=D.keyPath.indexOf(L)})){for(var A=0;A<c.length;++A)if(c.indexOf(D.keyPath[A])===-1)return!1;return!0}return!1}).sort(function(D,A){return D.keyPath.length-A.keyPath.length})[0];if(d&&this.db._maxKey!==Ut){var x=d.keyPath.slice(0,c.length);return this.where(x).equals(x.map(function(A){return a[A]}))}!d&&lt&&console.warn("The query ".concat(JSON.stringify(a)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(c.join("+"),"]"));var m=this.schema.idxByName;function v(D,A){return We(D,A)===0}var E=c.reduce(function(O,A){var L=O[0],H=O[1],O=m[A],Y=a[A];return[L||O,L||!O?fn(H,O&&O.multi?function($){return $=q($,A),l($)&&$.some(function(W){return v(Y,W)})}:function($){return v(Y,q($,A))}):H]},[null,null]),x=E[0],E=E[1];return x?this.where(x.name).equals(a[x.keyPath]).filter(E):d?this.filter(E):this.where(c).equals("")},ot.prototype.filter=function(a){return this.toCollection().and(a)},ot.prototype.count=function(a){return this.toCollection().count(a)},ot.prototype.offset=function(a){return this.toCollection().offset(a)},ot.prototype.limit=function(a){return this.toCollection().limit(a)},ot.prototype.each=function(a){return this.toCollection().each(a)},ot.prototype.toArray=function(a){return this.toCollection().toArray(a)},ot.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ot.prototype.orderBy=function(a){return new this.db.Collection(new this.db.WhereClause(this,l(a)?"[".concat(a.join("+"),"]"):a))},ot.prototype.reverse=function(){return this.toCollection().reverse()},ot.prototype.mapToClass=function(a){var c,d=this.db,m=this.name;function v(){return c!==null&&c.apply(this,arguments)||this}(this.schema.mappedClass=a).prototype instanceof Ko&&(function(A,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function H(){this.constructor=A}n(A,L),A.prototype=L===null?Object.create(L):(H.prototype=L.prototype,new H)}(v,c=a),Object.defineProperty(v.prototype,"db",{get:function(){return d},enumerable:!1,configurable:!0}),v.prototype.table=function(){return m},a=v);for(var x=new Set,E=a.prototype;E;E=f(E))Object.getOwnPropertyNames(E).forEach(function(A){return x.add(A)});function D(A){if(!A)return A;var L,H=Object.create(a.prototype);for(L in A)if(!x.has(L))try{H[L]=A[L]}catch{}return H}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=D,this.hook("reading",D),a},ot.prototype.defineClass=function(){return this.mapToClass(function(a){u(this,a)})},ot.prototype.add=function(a,c){var d=this,m=this.schema.primKey,v=m.auto,x=m.keyPath,E=a;return x&&v&&(E=_r(x)(a)),this._trans("readwrite",function(D){return d.core.mutate({trans:D,type:"add",keys:c!=null?[c]:null,values:[E]})}).then(function(D){return D.numFailures?de.reject(D.failures[0]):D.lastResult}).then(function(D){if(x)try{V(a,x,D)}catch{}return D})},ot.prototype.update=function(a,c){return typeof a!="object"||l(a)?this.where(":id").equals(a).modify(c):(a=q(a,this.schema.primKey.keyPath),a===void 0?rt(new he.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(a).modify(c))},ot.prototype.put=function(a,c){var d=this,m=this.schema.primKey,v=m.auto,x=m.keyPath,E=a;return x&&v&&(E=_r(x)(a)),this._trans("readwrite",function(D){return d.core.mutate({trans:D,type:"put",values:[E],keys:c!=null?[c]:null})}).then(function(D){return D.numFailures?de.reject(D.failures[0]):D.lastResult}).then(function(D){if(x)try{V(a,x,D)}catch{}return D})},ot.prototype.delete=function(a){var c=this;return this._trans("readwrite",function(d){return c.core.mutate({trans:d,type:"delete",keys:[a]})}).then(function(d){return d.numFailures?de.reject(d.failures[0]):void 0})},ot.prototype.clear=function(){var a=this;return this._trans("readwrite",function(c){return a.core.mutate({trans:c,type:"deleteRange",range:qo})}).then(function(c){return c.numFailures?de.reject(c.failures[0]):void 0})},ot.prototype.bulkGet=function(a){var c=this;return this._trans("readonly",function(d){return c.core.getMany({keys:a,trans:d}).then(function(m){return m.map(function(v){return c.hook.reading.fire(v)})})})},ot.prototype.bulkAdd=function(a,c,d){var m=this,v=Array.isArray(c)?c:void 0,x=(d=d||(v?void 0:c))?d.allKeys:void 0;return this._trans("readwrite",function(E){var L=m.schema.primKey,D=L.auto,L=L.keyPath;if(L&&v)throw new he.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(v&&v.length!==a.length)throw new he.InvalidArgument("Arguments objects and keys must have the same length");var A=a.length,L=L&&D?a.map(_r(L)):a;return m.core.mutate({trans:E,type:"add",keys:v,values:L,wantResults:x}).then(function(W){var O=W.numFailures,Y=W.results,$=W.lastResult,W=W.failures;if(O===0)return x?Y:$;throw new Te("".concat(m.name,".bulkAdd(): ").concat(O," of ").concat(A," operations failed"),W)})})},ot.prototype.bulkPut=function(a,c,d){var m=this,v=Array.isArray(c)?c:void 0,x=(d=d||(v?void 0:c))?d.allKeys:void 0;return this._trans("readwrite",function(E){var L=m.schema.primKey,D=L.auto,L=L.keyPath;if(L&&v)throw new he.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(v&&v.length!==a.length)throw new he.InvalidArgument("Arguments objects and keys must have the same length");var A=a.length,L=L&&D?a.map(_r(L)):a;return m.core.mutate({trans:E,type:"put",keys:v,values:L,wantResults:x}).then(function(W){var O=W.numFailures,Y=W.results,$=W.lastResult,W=W.failures;if(O===0)return x?Y:$;throw new Te("".concat(m.name,".bulkPut(): ").concat(O," of ").concat(A," operations failed"),W)})})},ot.prototype.bulkUpdate=function(a){var c=this,d=this.core,m=a.map(function(E){return E.key}),v=a.map(function(E){return E.changes}),x=[];return this._trans("readwrite",function(E){return d.getMany({trans:E,keys:m,cache:"clone"}).then(function(D){var A=[],L=[];a.forEach(function(O,Y){var $=O.key,W=O.changes,z=D[Y];if(z){for(var F=0,Z=Object.keys(W);F<Z.length;F++){var ne=Z[F],re=W[ne];if(ne===c.schema.primKey.keyPath){if(We(re,$)!==0)throw new he.Constraint("Cannot update primary key in bulkUpdate()")}else V(z,ne,re)}x.push(Y),A.push($),L.push(z)}});var H=A.length;return d.mutate({trans:E,type:"put",keys:A,values:L,updates:{keys:m,changeSpecs:v}}).then(function(O){var Y=O.numFailures,$=O.failures;if(Y===0)return H;for(var W=0,z=Object.keys($);W<z.length;W++){var F,Z=z[W],ne=x[Number(Z)];ne!=null&&(F=$[Z],delete $[Z],$[ne]=F)}throw new Te("".concat(c.name,".bulkUpdate(): ").concat(Y," of ").concat(H," operations failed"),$)})})})},ot.prototype.bulkDelete=function(a){var c=this,d=a.length;return this._trans("readwrite",function(m){return c.core.mutate({trans:m,type:"delete",keys:a})}).then(function(E){var v=E.numFailures,x=E.lastResult,E=E.failures;if(v===0)return x;throw new Te("".concat(c.name,".bulkDelete(): ").concat(v," of ").concat(d," operations failed"),E)})},ot);function ot(){}function Gr(a){function c(E,D){if(D){for(var A=arguments.length,L=new Array(A-1);--A;)L[A-1]=arguments[A];return d[E].subscribe.apply(null,L),a}if(typeof E=="string")return d[E]}var d={};c.addEventType=x;for(var m=1,v=arguments.length;m<v;++m)x(arguments[m]);return c;function x(E,D,A){if(typeof E!="object"){var L;D=D||st;var H={subscribers:[],fire:A=A||je,subscribe:function(O){H.subscribers.indexOf(O)===-1&&(H.subscribers.push(O),H.fire=D(H.fire,O))},unsubscribe:function(O){H.subscribers=H.subscribers.filter(function(Y){return Y!==O}),H.fire=H.subscribers.reduce(D,A)}};return d[E]=c[E]=H}s(L=E).forEach(function(O){var Y=L[O];if(l(Y))x(O,L[O][0],L[O][1]);else{if(Y!=="asap")throw new he.InvalidArgument("Invalid event config");var $=x(O,Je,function(){for(var W=arguments.length,z=new Array(W);W--;)z[W]=arguments[W];$.subscribers.forEach(function(F){X(function(){F.apply(null,z)})})})}})}}function Zr(a,c){return k(c).from({prototype:a}),c}function Er(a,c){return!(a.filter||a.algorithm||a.or)&&(c?a.justLimit:!a.replayFilter)}function mi(a,c){a.filter=fn(a.filter,c)}function pi(a,c,d){var m=a.replayFilter;a.replayFilter=m?function(){return fn(m(),c())}:c,a.justLimit=d&&!m}function Uo(a,c){if(a.isPrimKey)return c.primaryKey;var d=c.getIndexByKeyPath(a.index);if(!d)throw new he.Schema("KeyPath "+a.index+" on object store "+c.name+" is not indexed");return d}function $c(a,c,d){var m=Uo(a,c.schema);return c.openCursor({trans:d,values:!a.keysOnly,reverse:a.dir==="prev",unique:!!a.unique,query:{index:m,range:a.range}})}function Xo(a,c,d,m){var v=a.replayFilter?fn(a.filter,a.replayFilter()):a.filter;if(a.or){var x={},E=function(D,A,L){var H,O;v&&!v(A,L,function(Y){return A.stop(Y)},function(Y){return A.fail(Y)})||((O=""+(H=A.primaryKey))=="[object ArrayBuffer]"&&(O=""+new Uint8Array(H)),p(x,O)||(x[O]=!0,c(D,A,L)))};return Promise.all([a.or._iterate(E,d),Rc($c(a,m,d),a.algorithm,E,!a.keysOnly&&a.valueMapper)])}return Rc($c(a,m,d),fn(a.algorithm,v),c,!a.keysOnly&&a.valueMapper)}function Rc(a,c,d,m){var v=Xe(m?function(x,E,D){return d(m(x),E,D)}:d);return a.then(function(x){if(x)return x.start(function(){var E=function(){return x.continue()};c&&!c(x,function(D){return E=D},function(D){x.stop(D),E=je},function(D){x.fail(D),E=je})||v(x.value,x,function(D){return E=D}),E()})})}var kn=Symbol(),Qr=(Lc.prototype.execute=function(a){if(this.add!==void 0){var c=this.add;if(l(c))return o(o([],l(a)?a:[],!0),c).sort();if(typeof c=="number")return(Number(a)||0)+c;if(typeof c=="bigint")try{return BigInt(a)+c}catch{return BigInt(0)+c}throw new TypeError("Invalid term ".concat(c))}if(this.remove!==void 0){var d=this.remove;if(l(d))return l(a)?a.filter(function(m){return!d.includes(m)}).sort():[];if(typeof d=="number")return Number(a)-d;if(typeof d=="bigint")try{return BigInt(a)-d}catch{return BigInt(0)-d}throw new TypeError("Invalid subtrahend ".concat(d))}return c=(c=this.replacePrefix)===null||c===void 0?void 0:c[0],c&&typeof a=="string"&&a.startsWith(c)?this.replacePrefix[1]+a.substring(c.length):a},Lc);function Lc(a){Object.assign(this,a)}var gh=(qe.prototype._read=function(a,c){var d=this._ctx;return d.error?d.table._trans(null,rt.bind(null,d.error)):d.table._trans("readonly",a).then(c)},qe.prototype._write=function(a){var c=this._ctx;return c.error?c.table._trans(null,rt.bind(null,c.error)):c.table._trans("readwrite",a,"locked")},qe.prototype._addAlgorithm=function(a){var c=this._ctx;c.algorithm=fn(c.algorithm,a)},qe.prototype._iterate=function(a,c){return Xo(this._ctx,a,c,this._ctx.table.core)},qe.prototype.clone=function(a){var c=Object.create(this.constructor.prototype),d=Object.create(this._ctx);return a&&u(d,a),c._ctx=d,c},qe.prototype.raw=function(){return this._ctx.valueMapper=null,this},qe.prototype.each=function(a){var c=this._ctx;return this._read(function(d){return Xo(c,a,d,c.table.core)})},qe.prototype.count=function(a){var c=this;return this._read(function(d){var m=c._ctx,v=m.table.core;if(Er(m,!0))return v.count({trans:d,query:{index:Uo(m,v.schema),range:m.range}}).then(function(E){return Math.min(E,m.limit)});var x=0;return Xo(m,function(){return++x,!1},d,v).then(function(){return x})}).then(a)},qe.prototype.sortBy=function(a,c){var d=a.split(".").reverse(),m=d[0],v=d.length-1;function x(A,L){return L?x(A[d[L]],L-1):A[m]}var E=this._ctx.dir==="next"?1:-1;function D(A,L){return We(x(A,v),x(L,v))*E}return this.toArray(function(A){return A.sort(D)}).then(c)},qe.prototype.toArray=function(a){var c=this;return this._read(function(d){var m=c._ctx;if(m.dir==="next"&&Er(m,!0)&&0<m.limit){var v=m.valueMapper,x=Uo(m,m.table.core.schema);return m.table.core.query({trans:d,limit:m.limit,values:!0,query:{index:x,range:m.range}}).then(function(D){return D=D.result,v?D.map(v):D})}var E=[];return Xo(m,function(D){return E.push(D)},d,m.table.core).then(function(){return E})},a)},qe.prototype.offset=function(a){var c=this._ctx;return a<=0||(c.offset+=a,Er(c)?pi(c,function(){var d=a;return function(m,v){return d===0||(d===1?--d:v(function(){m.advance(d),d=0}),!1)}}):pi(c,function(){var d=a;return function(){return--d<0}})),this},qe.prototype.limit=function(a){return this._ctx.limit=Math.min(this._ctx.limit,a),pi(this._ctx,function(){var c=a;return function(d,m,v){return--c<=0&&m(v),0<=c}},!0),this},qe.prototype.until=function(a,c){return mi(this._ctx,function(d,m,v){return!a(d.value)||(m(v),c)}),this},qe.prototype.first=function(a){return this.limit(1).toArray(function(c){return c[0]}).then(a)},qe.prototype.last=function(a){return this.reverse().first(a)},qe.prototype.filter=function(a){var c;return mi(this._ctx,function(d){return a(d.value)}),(c=this._ctx).isMatch=fn(c.isMatch,a),this},qe.prototype.and=function(a){return this.filter(a)},qe.prototype.or=function(a){return new this.db.WhereClause(this._ctx.table,a,this)},qe.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},qe.prototype.desc=function(){return this.reverse()},qe.prototype.eachKey=function(a){var c=this._ctx;return c.keysOnly=!c.isMatch,this.each(function(d,m){a(m.key,m)})},qe.prototype.eachUniqueKey=function(a){return this._ctx.unique="unique",this.eachKey(a)},qe.prototype.eachPrimaryKey=function(a){var c=this._ctx;return c.keysOnly=!c.isMatch,this.each(function(d,m){a(m.primaryKey,m)})},qe.prototype.keys=function(a){var c=this._ctx;c.keysOnly=!c.isMatch;var d=[];return this.each(function(m,v){d.push(v.key)}).then(function(){return d}).then(a)},qe.prototype.primaryKeys=function(a){var c=this._ctx;if(c.dir==="next"&&Er(c,!0)&&0<c.limit)return this._read(function(m){var v=Uo(c,c.table.core.schema);return c.table.core.query({trans:m,values:!1,limit:c.limit,query:{index:v,range:c.range}})}).then(function(m){return m.result}).then(a);c.keysOnly=!c.isMatch;var d=[];return this.each(function(m,v){d.push(v.primaryKey)}).then(function(){return d}).then(a)},qe.prototype.uniqueKeys=function(a){return this._ctx.unique="unique",this.keys(a)},qe.prototype.firstKey=function(a){return this.limit(1).keys(function(c){return c[0]}).then(a)},qe.prototype.lastKey=function(a){return this.reverse().firstKey(a)},qe.prototype.distinct=function(){var a=this._ctx,a=a.index&&a.table.schema.idxByName[a.index];if(!a||!a.multi)return this;var c={};return mi(this._ctx,function(v){var m=v.primaryKey.toString(),v=p(c,m);return c[m]=!0,!v}),this},qe.prototype.modify=function(a){var c=this,d=this._ctx;return this._write(function(m){var v,x,E;E=typeof a=="function"?a:(v=s(a),x=v.length,function(F){for(var Z=!1,ne=0;ne<x;++ne){var re=v[ne],ue=a[re],ge=q(F,re);ue instanceof Qr?(V(F,re,ue.execute(ge)),Z=!0):ge!==ue&&(V(F,re,ue),Z=!0)}return Z});var D=d.table.core,O=D.schema.primaryKey,A=O.outbound,L=O.extractKey,H=200,O=c.db._options.modifyChunkSize;O&&(H=typeof O=="object"?O[D.name]||O["*"]||200:O);function Y(F,re){var ne=re.failures,re=re.numFailures;W+=F-re;for(var ue=0,ge=s(ne);ue<ge.length;ue++){var xe=ge[ue];$.push(ne[xe])}}var $=[],W=0,z=[];return c.clone().primaryKeys().then(function(F){function Z(re){var ue=Math.min(H,F.length-re);return D.getMany({trans:m,keys:F.slice(re,re+ue),cache:"immutable"}).then(function(ge){for(var xe=[],ye=[],we=A?[]:null,_e=[],be=0;be<ue;++be){var Ee=ge[be],Ae={value:ce(Ee),primKey:F[re+be]};E.call(Ae,Ae.value,Ae)!==!1&&(Ae.value==null?_e.push(F[re+be]):A||We(L(Ee),L(Ae.value))===0?(ye.push(Ae.value),A&&we.push(F[re+be])):(_e.push(F[re+be]),xe.push(Ae.value)))}return Promise.resolve(0<xe.length&&D.mutate({trans:m,type:"add",values:xe}).then(function(Be){for(var He in Be.failures)_e.splice(parseInt(He),1);Y(xe.length,Be)})).then(function(){return(0<ye.length||ne&&typeof a=="object")&&D.mutate({trans:m,type:"put",keys:we,values:ye,criteria:ne,changeSpec:typeof a!="function"&&a,isAdditionalChunk:0<re}).then(function(Be){return Y(ye.length,Be)})}).then(function(){return(0<_e.length||ne&&a===gi)&&D.mutate({trans:m,type:"delete",keys:_e,criteria:ne,isAdditionalChunk:0<re}).then(function(Be){return Y(_e.length,Be)})}).then(function(){return F.length>re+ue&&Z(re+H)})})}var ne=Er(d)&&d.limit===1/0&&(typeof a!="function"||a===gi)&&{index:d.index,range:d.range};return Z(0).then(function(){if(0<$.length)throw new ke("Error modifying one or more objects",$,W,z);return F.length})})})},qe.prototype.delete=function(){var a=this._ctx,c=a.range;return Er(a)&&(a.isPrimKey||c.type===3)?this._write(function(d){var m=a.table.core.schema.primaryKey,v=c;return a.table.core.count({trans:d,query:{index:m,range:v}}).then(function(x){return a.table.core.mutate({trans:d,type:"deleteRange",range:v}).then(function(E){var D=E.failures;if(E.lastResult,E.results,E=E.numFailures,E)throw new ke("Could not delete some values",Object.keys(D).map(function(A){return D[A]}),x-E);return x-E})})}):this.modify(gi)},qe);function qe(){}var gi=function(a,c){return c.value=null};function yh(a,c){return a<c?-1:a===c?0:1}function vh(a,c){return c<a?-1:a===c?0:1}function Vt(a,c,d){return a=a instanceof Wc?new a.Collection(a):a,a._ctx.error=new(d||TypeError)(c),a}function Nr(a){return new a.Collection(a,function(){return Fc("")}).limit(0)}function Go(a,c,d,m){var v,x,E,D,A,L,H,O=d.length;if(!d.every(function(W){return typeof W=="string"}))return Vt(a,Vo);function Y(W){v=W==="next"?function(F){return F.toUpperCase()}:function(F){return F.toLowerCase()},x=W==="next"?function(F){return F.toLowerCase()}:function(F){return F.toUpperCase()},E=W==="next"?yh:vh;var z=d.map(function(F){return{lower:x(F),upper:v(F)}}).sort(function(F,Z){return E(F.lower,Z.lower)});D=z.map(function(F){return F.upper}),A=z.map(function(F){return F.lower}),H=(L=W)==="next"?"":m}Y("next"),a=new a.Collection(a,function(){return Fn(D[0],A[O-1]+m)}),a._ondirectionchange=function(W){Y(W)};var $=0;return a._addAlgorithm(function(W,z,F){var Z=W.key;if(typeof Z!="string")return!1;var ne=x(Z);if(c(ne,A,$))return!0;for(var re=null,ue=$;ue<O;++ue){var ge=function(xe,ye,we,_e,be,Ee){for(var Ae=Math.min(xe.length,_e.length),Be=-1,He=0;He<Ae;++He){var qt=ye[He];if(qt!==_e[He])return be(xe[He],we[He])<0?xe.substr(0,He)+we[He]+we.substr(He+1):be(xe[He],_e[He])<0?xe.substr(0,He)+_e[He]+we.substr(He+1):0<=Be?xe.substr(0,Be)+ye[Be]+we.substr(Be+1):null;be(xe[He],qt)<0&&(Be=He)}return Ae<_e.length&&Ee==="next"?xe+we.substr(xe.length):Ae<xe.length&&Ee==="prev"?xe.substr(0,we.length):Be<0?null:xe.substr(0,Be)+_e[Be]+we.substr(Be+1)}(Z,ne,D[ue],A[ue],E,L);ge===null&&re===null?$=ue+1:(re===null||0<E(re,ge))&&(re=ge)}return z(re!==null?function(){W.continue(re+H)}:F),!1}),a}function Fn(a,c,d,m){return{type:2,lower:a,upper:c,lowerOpen:d,upperOpen:m}}function Fc(a){return{type:1,lower:a,upper:a}}var Wc=(Object.defineProperty(xt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),xt.prototype.between=function(a,c,d,m){d=d!==!1,m=m===!0;try{return 0<this._cmp(a,c)||this._cmp(a,c)===0&&(d||m)&&(!d||!m)?Nr(this):new this.Collection(this,function(){return Fn(a,c,!d,!m)})}catch{return Vt(this,en)}},xt.prototype.equals=function(a){return a==null?Vt(this,en):new this.Collection(this,function(){return Fc(a)})},xt.prototype.above=function(a){return a==null?Vt(this,en):new this.Collection(this,function(){return Fn(a,void 0,!0)})},xt.prototype.aboveOrEqual=function(a){return a==null?Vt(this,en):new this.Collection(this,function(){return Fn(a,void 0,!1)})},xt.prototype.below=function(a){return a==null?Vt(this,en):new this.Collection(this,function(){return Fn(void 0,a,!1,!0)})},xt.prototype.belowOrEqual=function(a){return a==null?Vt(this,en):new this.Collection(this,function(){return Fn(void 0,a)})},xt.prototype.startsWith=function(a){return typeof a!="string"?Vt(this,Vo):this.between(a,a+Ut,!0,!0)},xt.prototype.startsWithIgnoreCase=function(a){return a===""?this.startsWith(a):Go(this,function(c,d){return c.indexOf(d[0])===0},[a],Ut)},xt.prototype.equalsIgnoreCase=function(a){return Go(this,function(c,d){return c===d[0]},[a],"")},xt.prototype.anyOfIgnoreCase=function(){var a=Q.apply(j,arguments);return a.length===0?Nr(this):Go(this,function(c,d){return d.indexOf(c)!==-1},a,"")},xt.prototype.startsWithAnyOfIgnoreCase=function(){var a=Q.apply(j,arguments);return a.length===0?Nr(this):Go(this,function(c,d){return d.some(function(m){return c.indexOf(m)===0})},a,Ut)},xt.prototype.anyOf=function(){var a=this,c=Q.apply(j,arguments),d=this._cmp;try{c.sort(d)}catch{return Vt(this,en)}if(c.length===0)return Nr(this);var m=new this.Collection(this,function(){return Fn(c[0],c[c.length-1])});m._ondirectionchange=function(x){d=x==="next"?a._ascending:a._descending,c.sort(d)};var v=0;return m._addAlgorithm(function(x,E,D){for(var A=x.key;0<d(A,c[v]);)if(++v===c.length)return E(D),!1;return d(A,c[v])===0||(E(function(){x.continue(c[v])}),!1)}),m},xt.prototype.notEqual=function(a){return this.inAnyRange([[-1/0,a],[a,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},xt.prototype.noneOf=function(){var a=Q.apply(j,arguments);if(a.length===0)return new this.Collection(this);try{a.sort(this._ascending)}catch{return Vt(this,en)}var c=a.reduce(function(d,m){return d?d.concat([[d[d.length-1][1],m]]):[[-1/0,m]]},null);return c.push([a[a.length-1],this.db._maxKey]),this.inAnyRange(c,{includeLowers:!1,includeUppers:!1})},xt.prototype.inAnyRange=function(Z,c){var d=this,m=this._cmp,v=this._ascending,x=this._descending,E=this._min,D=this._max;if(Z.length===0)return Nr(this);if(!Z.every(function(ne){return ne[0]!==void 0&&ne[1]!==void 0&&v(ne[0],ne[1])<=0}))return Vt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",he.InvalidArgument);var A=!c||c.includeLowers!==!1,L=c&&c.includeUppers===!0,H,O=v;function Y(ne,re){return O(ne[0],re[0])}try{(H=Z.reduce(function(ne,re){for(var ue=0,ge=ne.length;ue<ge;++ue){var xe=ne[ue];if(m(re[0],xe[1])<0&&0<m(re[1],xe[0])){xe[0]=E(xe[0],re[0]),xe[1]=D(xe[1],re[1]);break}}return ue===ge&&ne.push(re),ne},[])).sort(Y)}catch{return Vt(this,en)}var $=0,W=L?function(ne){return 0<v(ne,H[$][1])}:function(ne){return 0<=v(ne,H[$][1])},z=A?function(ne){return 0<x(ne,H[$][0])}:function(ne){return 0<=x(ne,H[$][0])},F=W,Z=new this.Collection(this,function(){return Fn(H[0][0],H[H.length-1][1],!A,!L)});return Z._ondirectionchange=function(ne){O=ne==="next"?(F=W,v):(F=z,x),H.sort(Y)},Z._addAlgorithm(function(ne,re,ue){for(var ge,xe=ne.key;F(xe);)if(++$===H.length)return re(ue),!1;return!W(ge=xe)&&!z(ge)||(d._cmp(xe,H[$][1])===0||d._cmp(xe,H[$][0])===0||re(function(){O===v?ne.continue(H[$][0]):ne.continue(H[$][1])}),!1)}),Z},xt.prototype.startsWithAnyOf=function(){var a=Q.apply(j,arguments);return a.every(function(c){return typeof c=="string"})?a.length===0?Nr(this):this.inAnyRange(a.map(function(c){return[c,c+Ut]})):Vt(this,"startsWithAnyOf() only works with strings")},xt);function xt(){}function hn(a){return Xe(function(c){return Jr(c),a(c.target.error),!1})}function Jr(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault()}var eo="storagemutated",yi="x-storagemutated-1",Wn=Gr(null,eo),wh=(mn.prototype._lock=function(){return T(!ee.global),++this._reculock,this._reculock!==1||ee.global||(ee.lockOwnerFor=this),this},mn.prototype._unlock=function(){if(T(!ee.global),--this._reculock==0)for(ee.global||(ee.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var a=this._blockedFuncs.shift();try{ft(a[1],a[0])}catch{}}return this},mn.prototype._locked=function(){return this._reculock&&ee.lockOwnerFor!==this},mn.prototype.create=function(a){var c=this;if(!this.mode)return this;var d=this.db.idbdb,m=this.db._state.dbOpenError;if(T(!this.idbtrans),!a&&!d)switch(m&&m.name){case"DatabaseClosedError":throw new he.DatabaseClosed(m);case"MissingAPIError":throw new he.MissingAPI(m.message,m);default:throw new he.OpenFailed(m)}if(!this.active)throw new he.TransactionInactive;return T(this._completion._state===null),(a=this.idbtrans=a||(this.db.core||d).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Xe(function(v){Jr(v),c._reject(a.error)}),a.onabort=Xe(function(v){Jr(v),c.active&&c._reject(new he.Abort(a.error)),c.active=!1,c.on("abort").fire(v)}),a.oncomplete=Xe(function(){c.active=!1,c._resolve(),"mutatedParts"in a&&Wn.storagemutated.fire(a.mutatedParts)}),this},mn.prototype._promise=function(a,c,d){var m=this;if(a==="readwrite"&&this.mode!=="readwrite")return rt(new he.ReadOnly("Transaction is readonly"));if(!this.active)return rt(new he.TransactionInactive);if(this._locked())return new de(function(x,E){m._blockedFuncs.push([function(){m._promise(a,c,d).then(x,E)},ee])});if(d)return Ft(function(){var x=new de(function(E,D){m._lock();var A=c(E,D,m);A&&A.then&&A.then(E,D)});return x.finally(function(){return m._unlock()}),x._lib=!0,x});var v=new de(function(x,E){var D=c(x,E,m);D&&D.then&&D.then(x,E)});return v._lib=!0,v},mn.prototype._root=function(){return this.parent?this.parent._root():this},mn.prototype.waitFor=function(a){var c,d=this._root(),m=de.resolve(a);d._waitingFor?d._waitingFor=d._waitingFor.then(function(){return m}):(d._waitingFor=m,d._waitingQueue=[],c=d.idbtrans.objectStore(d.storeNames[0]),function x(){for(++d._spinCount;d._waitingQueue.length;)d._waitingQueue.shift()();d._waitingFor&&(c.get(-1/0).onsuccess=x)}());var v=d._waitingFor;return new de(function(x,E){m.then(function(D){return d._waitingQueue.push(Xe(x.bind(null,D)))},function(D){return d._waitingQueue.push(Xe(E.bind(null,D)))}).finally(function(){d._waitingFor===v&&(d._waitingFor=null)})})},mn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new he.Abort))},mn.prototype.table=function(a){var c=this._memoizedTables||(this._memoizedTables={});if(p(c,a))return c[a];var d=this.schema[a];if(!d)throw new he.NotFound("Table "+a+" not part of transaction");return d=new this.db.Table(a,d,this),d.core=this.db.core.table(a),c[a]=d},mn);function mn(){}function vi(a,c,d,m,v,x,E){return{name:a,keyPath:c,unique:d,multi:m,auto:v,compound:x,src:(d&&!E?"&":"")+(m?"*":"")+(v?"++":"")+Bc(c)}}function Bc(a){return typeof a=="string"?a:a?"["+[].join.call(a,"+")+"]":""}function wi(a,c,d){return{name:a,primKey:c,indexes:d,mappedClass:null,idxByName:(m=function(v){return[v.name,v]},d.reduce(function(v,x,E){return E=m(x,E),E&&(v[E[0]]=E[1]),v},{}))};var m}var to=function(a){try{return a.only([[]]),to=function(){return[[]]},[[]]}catch{return to=function(){return Ut},Ut}};function bi(a){return a==null?function(){}:typeof a=="string"?(c=a).split(".").length===1?function(d){return d[c]}:function(d){return q(d,c)}:function(d){return q(d,a)};var c}function Hc(a){return[].slice.call(a)}var bh=0;function no(a){return a==null?":id":typeof a=="string"?a:"[".concat(a.join("+"),"]")}function xh(a,c,A){function m(F){if(F.type===3)return null;if(F.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var $=F.lower,W=F.upper,z=F.lowerOpen,F=F.upperOpen;return $===void 0?W===void 0?null:c.upperBound(W,!!F):W===void 0?c.lowerBound($,!!z):c.bound($,W,!!z,!!F)}function v(Y){var $,W=Y.name;return{name:W,schema:Y,mutate:function(z){var F=z.trans,Z=z.type,ne=z.keys,re=z.values,ue=z.range;return new Promise(function(ge,xe){ge=Xe(ge);var ye=F.objectStore(W),we=ye.keyPath==null,_e=Z==="put"||Z==="add";if(!_e&&Z!=="delete"&&Z!=="deleteRange")throw new Error("Invalid operation type: "+Z);var be,Ee=(ne||re||{length:1}).length;if(ne&&re&&ne.length!==re.length)throw new Error("Given keys array must have same length as given values array.");if(Ee===0)return ge({numFailures:0,failures:{},results:[],lastResult:void 0});function Ae(At){++qt,Jr(At)}var Be=[],He=[],qt=0;if(Z==="deleteRange"){if(ue.type===4)return ge({numFailures:qt,failures:He,results:[],lastResult:void 0});ue.type===3?Be.push(be=ye.clear()):Be.push(be=ye.delete(m(ue)))}else{var we=_e?we?[re,ne]:[re,null]:[ne,null],Me=we[0],jt=we[1];if(_e)for(var Pt=0;Pt<Ee;++Pt)Be.push(be=jt&&jt[Pt]!==void 0?ye[Z](Me[Pt],jt[Pt]):ye[Z](Me[Pt])),be.onerror=Ae;else for(Pt=0;Pt<Ee;++Pt)Be.push(be=ye[Z](Me[Pt])),be.onerror=Ae}function la(At){At=At.target.result,Be.forEach(function(ar,Li){return ar.error!=null&&(He[Li]=ar.error)}),ge({numFailures:qt,failures:He,results:Z==="delete"?ne:Be.map(function(ar){return ar.result}),lastResult:At})}be.onerror=function(At){Ae(At),la(At)},be.onsuccess=la})},getMany:function(z){var F=z.trans,Z=z.keys;return new Promise(function(ne,re){ne=Xe(ne);for(var ue,ge=F.objectStore(W),xe=Z.length,ye=new Array(xe),we=0,_e=0,be=function(Be){Be=Be.target,ye[Be._pos]=Be.result,++_e===we&&ne(ye)},Ee=hn(re),Ae=0;Ae<xe;++Ae)Z[Ae]!=null&&((ue=ge.get(Z[Ae]))._pos=Ae,ue.onsuccess=be,ue.onerror=Ee,++we);we===0&&ne(ye)})},get:function(z){var F=z.trans,Z=z.key;return new Promise(function(ne,re){ne=Xe(ne);var ue=F.objectStore(W).get(Z);ue.onsuccess=function(ge){return ne(ge.target.result)},ue.onerror=hn(re)})},query:($=L,function(z){return new Promise(function(F,Z){F=Xe(F);var ne,re,ue,we=z.trans,ge=z.values,xe=z.limit,be=z.query,ye=xe===1/0?void 0:xe,_e=be.index,be=be.range,we=we.objectStore(W),_e=_e.isPrimaryKey?we:we.index(_e.name),be=m(be);if(xe===0)return F({result:[]});$?((ye=ge?_e.getAll(be,ye):_e.getAllKeys(be,ye)).onsuccess=function(Ee){return F({result:Ee.target.result})},ye.onerror=hn(Z)):(ne=0,re=!ge&&"openKeyCursor"in _e?_e.openKeyCursor(be):_e.openCursor(be),ue=[],re.onsuccess=function(Ee){var Ae=re.result;return Ae?(ue.push(ge?Ae.value:Ae.primaryKey),++ne===xe?F({result:ue}):void Ae.continue()):F({result:ue})},re.onerror=hn(Z))})}),openCursor:function(z){var F=z.trans,Z=z.values,ne=z.query,re=z.reverse,ue=z.unique;return new Promise(function(ge,xe){ge=Xe(ge);var _e=ne.index,ye=ne.range,we=F.objectStore(W),we=_e.isPrimaryKey?we:we.index(_e.name),_e=re?ue?"prevunique":"prev":ue?"nextunique":"next",be=!Z&&"openKeyCursor"in we?we.openKeyCursor(m(ye),_e):we.openCursor(m(ye),_e);be.onerror=hn(xe),be.onsuccess=Xe(function(Ee){var Ae,Be,He,qt,Me=be.result;Me?(Me.___id=++bh,Me.done=!1,Ae=Me.continue.bind(Me),Be=(Be=Me.continuePrimaryKey)&&Be.bind(Me),He=Me.advance.bind(Me),qt=function(){throw new Error("Cursor not stopped")},Me.trans=F,Me.stop=Me.continue=Me.continuePrimaryKey=Me.advance=function(){throw new Error("Cursor not started")},Me.fail=Xe(xe),Me.next=function(){var jt=this,Pt=1;return this.start(function(){return Pt--?jt.continue():jt.stop()}).then(function(){return jt})},Me.start=function(jt){function Pt(){if(be.result)try{jt()}catch(At){Me.fail(At)}else Me.done=!0,Me.start=function(){throw new Error("Cursor behind last entry")},Me.stop()}var la=new Promise(function(At,ar){At=Xe(At),be.onerror=hn(ar),Me.fail=ar,Me.stop=function(Li){Me.stop=Me.continue=Me.continuePrimaryKey=Me.advance=qt,At(Li)}});return be.onsuccess=Xe(function(At){be.onsuccess=Pt,Pt()}),Me.continue=Ae,Me.continuePrimaryKey=Be,Me.advance=He,Pt(),la},ge(Me)):ge(null)},xe)})},count:function(z){var F=z.query,Z=z.trans,ne=F.index,re=F.range;return new Promise(function(ue,ge){var xe=Z.objectStore(W),ye=ne.isPrimaryKey?xe:xe.index(ne.name),xe=m(re),ye=xe?ye.count(xe):ye.count();ye.onsuccess=Xe(function(we){return ue(we.target.result)}),ye.onerror=hn(ge)})}}}var x,E,D,H=(E=A,D=Hc((x=a).objectStoreNames),{schema:{name:x.name,tables:D.map(function(Y){return E.objectStore(Y)}).map(function(Y){var $=Y.keyPath,F=Y.autoIncrement,W=l($),z={},F={name:Y.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:$==null,compound:W,keyPath:$,autoIncrement:F,unique:!0,extractKey:bi($)},indexes:Hc(Y.indexNames).map(function(Z){return Y.index(Z)}).map(function(ue){var ne=ue.name,re=ue.unique,ge=ue.multiEntry,ue=ue.keyPath,ge={name:ne,compound:l(ue),keyPath:ue,unique:re,multiEntry:ge,extractKey:bi(ue)};return z[no(ue)]=ge}),getIndexByKeyPath:function(Z){return z[no(Z)]}};return z[":id"]=F.primaryKey,$!=null&&(z[no($)]=F.primaryKey),F})},hasGetAll:0<D.length&&"getAll"in E.objectStore(D[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),A=H.schema,L=H.hasGetAll,H=A.tables.map(v),O={};return H.forEach(function(Y){return O[Y.name]=Y}),{stack:"dbcore",transaction:a.transaction.bind(a),table:function(Y){if(!O[Y])throw new Error("Table '".concat(Y,"' not found"));return O[Y]},MIN_KEY:-1/0,MAX_KEY:to(c),schema:A}}function Sh(a,c,d,m){var v=d.IDBKeyRange;return d.indexedDB,{dbcore:(m=xh(c,v,m),a.dbcore.reduce(function(x,E){return E=E.create,r(r({},x),E(x))},m))}}function Zo(a,m){var d=m.db,m=Sh(a._middlewares,d,a._deps,m);a.core=m.dbcore,a.tables.forEach(function(v){var x=v.name;a.core.schema.tables.some(function(E){return E.name===x})&&(v.core=a.core.table(x),a[x]instanceof a.Table&&(a[x].core=v.core))})}function Qo(a,c,d,m){d.forEach(function(v){var x=m[v];c.forEach(function(E){var D=function A(L,H){return N(L,H)||(L=f(L))&&A(L,H)}(E,v);(!D||"value"in D&&D.value===void 0)&&(E===a.Transaction.prototype||E instanceof a.Transaction?S(E,v,{get:function(){return this.table(v)},set:function(A){w(this,v,{value:A,writable:!0,configurable:!0,enumerable:!0})}}):E[v]=new a.Table(v,x))})})}function xi(a,c){c.forEach(function(d){for(var m in d)d[m]instanceof a.Table&&delete d[m]})}function kh(a,c){return a._cfg.version-c._cfg.version}function _h(a,c,d,m){var v=a._dbSchema;d.objectStoreNames.contains("$meta")&&!v.$meta&&(v.$meta=wi("$meta",Yc("")[0],[]),a._storeNames.push("$meta"));var x=a._createTransaction("readwrite",a._storeNames,v);x.create(d),x._completion.catch(m);var E=x._reject.bind(x),D=ee.transless||ee;Ft(function(){return ee.trans=x,ee.transless=D,c!==0?(Zo(a,d),L=c,((A=x).storeNames.includes("$meta")?A.table("$meta").get("version").then(function(H){return H??L}):de.resolve(L)).then(function(H){return Y=H,$=x,W=d,z=[],H=(O=a)._versions,F=O._dbSchema=ea(0,O.idbdb,W),(H=H.filter(function(Z){return Z._cfg.version>=Y})).length!==0?(H.forEach(function(Z){z.push(function(){var ne=F,re=Z._cfg.dbschema;ta(O,ne,W),ta(O,re,W),F=O._dbSchema=re;var ue=Si(ne,re);ue.add.forEach(function(_e){ki(W,_e[0],_e[1].primKey,_e[1].indexes)}),ue.change.forEach(function(_e){if(_e.recreate)throw new he.Upgrade("Not yet support for changing primary key");var be=W.objectStore(_e.name);_e.add.forEach(function(Ee){return Jo(be,Ee)}),_e.change.forEach(function(Ee){be.deleteIndex(Ee.name),Jo(be,Ee)}),_e.del.forEach(function(Ee){return be.deleteIndex(Ee)})});var ge=Z._cfg.contentUpgrade;if(ge&&Z._cfg.version>Y){Zo(O,W),$._memoizedTables={};var xe=J(re);ue.del.forEach(function(_e){xe[_e]=ne[_e]}),xi(O,[O.Transaction.prototype]),Qo(O,[O.Transaction.prototype],s(xe),xe),$.schema=xe;var ye,we=ae(ge);return we&&Jt(),ue=de.follow(function(){var _e;(ye=ge($))&&we&&(_e=Yt.bind(null,null),ye.then(_e,_e))}),ye&&typeof ye.then=="function"?de.resolve(ye):ue.then(function(){return ye})}}),z.push(function(ne){var re,ue,ge=Z._cfg.dbschema;re=ge,ue=ne,[].slice.call(ue.db.objectStoreNames).forEach(function(xe){return re[xe]==null&&ue.db.deleteObjectStore(xe)}),xi(O,[O.Transaction.prototype]),Qo(O,[O.Transaction.prototype],O._storeNames,O._dbSchema),$.schema=O._dbSchema}),z.push(function(ne){O.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(O.idbdb.version/10)===Z._cfg.version?(O.idbdb.deleteObjectStore("$meta"),delete O._dbSchema.$meta,O._storeNames=O._storeNames.filter(function(re){return re!=="$meta"})):ne.objectStore("$meta").put(Z._cfg.version,"version"))})}),function Z(){return z.length?de.resolve(z.shift()($.idbtrans)).then(Z):de.resolve()}().then(function(){zc(F,W)})):de.resolve();var O,Y,$,W,z,F}).catch(E)):(s(v).forEach(function(H){ki(d,H,v[H].primKey,v[H].indexes)}),Zo(a,d),void de.follow(function(){return a.on.populate.fire(x)}).catch(E));var A,L})}function Eh(a,c){zc(a._dbSchema,c),c.db.version%10!=0||c.objectStoreNames.contains("$meta")||c.db.createObjectStore("$meta").add(Math.ceil(c.db.version/10-1),"version");var d=ea(0,a.idbdb,c);ta(a,a._dbSchema,c);for(var m=0,v=Si(d,a._dbSchema).change;m<v.length;m++){var x=function(E){if(E.change.length||E.recreate)return console.warn("Unable to patch indexes of table ".concat(E.name," because it has changes on the type of index or primary key.")),{value:void 0};var D=c.objectStore(E.name);E.add.forEach(function(A){lt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(E.name,".").concat(A.src)),Jo(D,A)})}(v[m]);if(typeof x=="object")return x.value}}function Si(a,c){var d,m={del:[],add:[],change:[]};for(d in a)c[d]||m.del.push(d);for(d in c){var v=a[d],x=c[d];if(v){var E={name:d,def:x,recreate:!1,del:[],add:[],change:[]};if(""+(v.primKey.keyPath||"")!=""+(x.primKey.keyPath||"")||v.primKey.auto!==x.primKey.auto)E.recreate=!0,m.change.push(E);else{var D=v.idxByName,A=x.idxByName,L=void 0;for(L in D)A[L]||E.del.push(L);for(L in A){var H=D[L],O=A[L];H?H.src!==O.src&&E.change.push(O):E.add.push(O)}(0<E.del.length||0<E.add.length||0<E.change.length)&&m.change.push(E)}}else m.add.push([d,x])}return m}function ki(a,c,d,m){var v=a.db.createObjectStore(c,d.keyPath?{keyPath:d.keyPath,autoIncrement:d.auto}:{autoIncrement:d.auto});return m.forEach(function(x){return Jo(v,x)}),v}function zc(a,c){s(a).forEach(function(d){c.db.objectStoreNames.contains(d)||(lt&&console.debug("Dexie: Creating missing table",d),ki(c,d,a[d].primKey,a[d].indexes))})}function Jo(a,c){a.createIndex(c.name,c.keyPath,{unique:c.unique,multiEntry:c.multi})}function ea(a,c,d){var m={};return R(c.objectStoreNames,0).forEach(function(v){for(var x=d.objectStore(v),E=vi(Bc(L=x.keyPath),L||"",!0,!1,!!x.autoIncrement,L&&typeof L!="string",!0),D=[],A=0;A<x.indexNames.length;++A){var H=x.index(x.indexNames[A]),L=H.keyPath,H=vi(H.name,L,!!H.unique,!!H.multiEntry,!1,L&&typeof L!="string",!1);D.push(H)}m[v]=wi(v,E,D)}),m}function ta(a,c,d){for(var m=d.db.objectStoreNames,v=0;v<m.length;++v){var x=m[v],E=d.objectStore(x);a._hasGetAll="getAll"in E;for(var D=0;D<E.indexNames.length;++D){var A=E.indexNames[D],L=E.index(A).keyPath,H=typeof L=="string"?L:"["+R(L).join("+")+"]";!c[x]||(L=c[x].idxByName[H])&&(L.name=A,delete c[x].idxByName[H],c[x].idxByName[A]=L)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(a._hasGetAll=!1)}function Yc(a){return a.split(",").map(function(c,d){var m=(c=c.trim()).replace(/([&*]|\+\+)/g,""),v=/^\[/.test(m)?m.match(/^\[(.*)\]$/)[1].split("+"):m;return vi(m,v||null,/\&/.test(c),/\*/.test(c),/\+\+/.test(c),l(v),d===0)})}var Nh=(na.prototype._parseStoresSpec=function(a,c){s(a).forEach(function(d){if(a[d]!==null){var m=Yc(a[d]),v=m.shift();if(v.unique=!0,v.multi)throw new he.Schema("Primary key cannot be multi-valued");m.forEach(function(x){if(x.auto)throw new he.Schema("Only primary key can be marked as autoIncrement (++)");if(!x.keyPath)throw new he.Schema("Index must have a name and cannot be an empty string")}),c[d]=wi(d,v,m)}})},na.prototype.stores=function(d){var c=this.db;this._cfg.storesSource=this._cfg.storesSource?u(this._cfg.storesSource,d):d;var d=c._versions,m={},v={};return d.forEach(function(x){u(m,x._cfg.storesSource),v=x._cfg.dbschema={},x._parseStoresSpec(m,v)}),c._dbSchema=v,xi(c,[c._allTables,c,c.Transaction.prototype]),Qo(c,[c._allTables,c,c.Transaction.prototype,this._cfg.tables],s(v),v),c._storeNames=s(v),this},na.prototype.upgrade=function(a){return this._cfg.contentUpgrade=bt(this._cfg.contentUpgrade||je,a),this},na);function na(){}function _i(a,c){var d=a._dbNamesDB;return d||(d=a._dbNamesDB=new _n(kr,{addons:[],indexedDB:a,IDBKeyRange:c})).version(1).stores({dbnames:"name"}),d.table("dbnames")}function Ei(a){return a&&typeof a.databases=="function"}function Ni(a){return Ft(function(){return ee.letThrough=!0,a()})}function Ci(a){return!("from"in a)}var Ot=function(a,c){if(!this){var d=new Ot;return a&&"d"in a&&u(d,a),d}u(this,arguments.length?{d:1,from:a,to:1<arguments.length?c:a}:{d:0})};function ro(a,c,d){var m=We(c,d);if(!isNaN(m)){if(0<m)throw RangeError();if(Ci(a))return u(a,{from:c,to:d,d:1});var v=a.l,m=a.r;if(We(d,a.from)<0)return v?ro(v,c,d):a.l={from:c,to:d,d:1,l:null,r:null},qc(a);if(0<We(c,a.to))return m?ro(m,c,d):a.r={from:c,to:d,d:1,l:null,r:null},qc(a);We(c,a.from)<0&&(a.from=c,a.l=null,a.d=m?m.d+1:1),0<We(d,a.to)&&(a.to=d,a.r=null,a.d=a.l?a.l.d+1:1),d=!a.r,v&&!a.l&&oo(a,v),m&&d&&oo(a,m)}}function oo(a,c){Ci(c)||function d(m,A){var x=A.from,E=A.to,D=A.l,A=A.r;ro(m,x,E),D&&d(m,D),A&&d(m,A)}(a,c)}function Vc(a,c){var d=ra(c),m=d.next();if(m.done)return!1;for(var v=m.value,x=ra(a),E=x.next(v.from),D=E.value;!m.done&&!E.done;){if(We(D.from,v.to)<=0&&0<=We(D.to,v.from))return!0;We(v.from,D.from)<0?v=(m=d.next(D.from)).value:D=(E=x.next(v.from)).value}return!1}function ra(a){var c=Ci(a)?null:{s:0,n:a};return{next:function(d){for(var m=0<arguments.length;c;)switch(c.s){case 0:if(c.s=1,m)for(;c.n.l&&We(d,c.n.from)<0;)c={up:c,n:c.n.l,s:1};else for(;c.n.l;)c={up:c,n:c.n.l,s:1};case 1:if(c.s=2,!m||We(d,c.n.to)<=0)return{value:c.n,done:!1};case 2:if(c.n.r){c.s=3,c={up:c,n:c.n.r,s:0};continue}case 3:c=c.up}return{done:!0}}}}function qc(a){var c,d,m=(((c=a.r)===null||c===void 0?void 0:c.d)||0)-(((d=a.l)===null||d===void 0?void 0:d.d)||0),v=1<m?"r":m<-1?"l":"";v&&(c=v=="r"?"l":"r",d=r({},a),m=a[v],a.from=m.from,a.to=m.to,a[v]=m[v],d[v]=m[c],(a[c]=d).d=Kc(d)),a.d=Kc(a)}function Kc(d){var c=d.r,d=d.l;return(c?d?Math.max(c.d,d.d):c.d:d?d.d:0)+1}function oa(a,c){return s(c).forEach(function(d){a[d]?oo(a[d],c[d]):a[d]=function m(v){var x,E,D={};for(x in v)p(v,x)&&(E=v[x],D[x]=!E||typeof E!="object"||K.has(E.constructor)?E:m(E));return D}(c[d])}),a}function Ti(a,c){return a.all||c.all||Object.keys(a).some(function(d){return c[d]&&Vc(c[d],a[d])})}y(Ot.prototype,((Xt={add:function(a){return oo(this,a),this},addKey:function(a){return ro(this,a,a),this},addKeys:function(a){var c=this;return a.forEach(function(d){return ro(c,d,d)}),this},hasKey:function(a){var c=ra(this).next(a).value;return c&&We(c.from,a)<=0&&0<=We(c.to,a)}})[P]=function(){return ra(this)},Xt));var rr={},Di={},Oi=!1;function aa(a){oa(Di,a),Oi||(Oi=!0,setTimeout(function(){Oi=!1,ji(Di,!(Di={}))},0))}function ji(a,c){c===void 0&&(c=!1);var d=new Set;if(a.all)for(var m=0,v=Object.values(rr);m<v.length;m++)Uc(E=v[m],a,d,c);else for(var x in a){var E,D=/^idb\:\/\/(.*)\/(.*)\//.exec(x);D&&(x=D[1],D=D[2],(E=rr["idb://".concat(x,"/").concat(D)])&&Uc(E,a,d,c))}d.forEach(function(A){return A()})}function Uc(a,c,d,m){for(var v=[],x=0,E=Object.entries(a.queries.query);x<E.length;x++){for(var D=E[x],A=D[0],L=[],H=0,O=D[1];H<O.length;H++){var Y=O[H];Ti(c,Y.obsSet)?Y.subscribers.forEach(function(F){return d.add(F)}):m&&L.push(Y)}m&&v.push([A,L])}if(m)for(var $=0,W=v;$<W.length;$++){var z=W[$],A=z[0],L=z[1];a.queries.query[A]=L}}function Ch(a){var c=a._state,d=a._deps.indexedDB;if(c.isBeingOpened||a.idbdb)return c.dbReadyPromise.then(function(){return c.dbOpenError?rt(c.dbOpenError):a});c.isBeingOpened=!0,c.dbOpenError=null,c.openComplete=!1;var m=c.openCanceller,v=Math.round(10*a.verno),x=!1;function E(){if(c.openCanceller!==m)throw new he.DatabaseClosed("db.open() was cancelled")}function D(){return new de(function(Y,$){if(E(),!d)throw new he.MissingAPI;var W=a.name,z=c.autoSchema||!v?d.open(W):d.open(W,v);if(!z)throw new he.MissingAPI;z.onerror=hn($),z.onblocked=Xe(a._fireOnBlocked),z.onupgradeneeded=Xe(function(F){var Z;H=z.transaction,c.autoSchema&&!a._options.allowEmptyDB?(z.onerror=Jr,H.abort(),z.result.close(),(Z=d.deleteDatabase(W)).onsuccess=Z.onerror=Xe(function(){$(new he.NoSuchDatabase("Database ".concat(W," doesnt exist")))})):(H.onerror=hn($),F=F.oldVersion>Math.pow(2,62)?0:F.oldVersion,O=F<1,a.idbdb=z.result,x&&Eh(a,H),_h(a,F/10,H,$))},$),z.onsuccess=Xe(function(){H=null;var F,Z,ne,re,ue,ge=a.idbdb=z.result,xe=R(ge.objectStoreNames);if(0<xe.length)try{var ye=ge.transaction((re=xe).length===1?re[0]:re,"readonly");if(c.autoSchema)Z=ge,ne=ye,(F=a).verno=Z.version/10,ne=F._dbSchema=ea(0,Z,ne),F._storeNames=R(Z.objectStoreNames,0),Qo(F,[F._allTables],s(ne),ne);else if(ta(a,a._dbSchema,ye),((ue=Si(ea(0,(ue=a).idbdb,ye),ue._dbSchema)).add.length||ue.change.some(function(we){return we.add.length||we.change.length}))&&!x)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),ge.close(),v=ge.version+1,x=!0,Y(D());Zo(a,ye)}catch{}Ln.push(a),ge.onversionchange=Xe(function(we){c.vcFired=!0,a.on("versionchange").fire(we)}),ge.onclose=Xe(function(we){a.on("close").fire(we)}),O&&(ue=a._deps,ye=W,ge=ue.indexedDB,ue=ue.IDBKeyRange,Ei(ge)||ye===kr||_i(ge,ue).put({name:ye}).catch(je)),Y()},$)}).catch(function(Y){switch(Y==null?void 0:Y.name){case"UnknownError":if(0<c.PR1398_maxLoop)return c.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),D();break;case"VersionError":if(0<v)return v=0,D()}return de.reject(Y)})}var A,L=c.dbReadyResolve,H=null,O=!1;return de.race([m,(typeof navigator>"u"?de.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(Y){function $(){return indexedDB.databases().finally(Y)}A=setInterval($,100),$()}).finally(function(){return clearInterval(A)}):Promise.resolve()).then(D)]).then(function(){return E(),c.onReadyBeingFired=[],de.resolve(Ni(function(){return a.on.ready.fire(a.vip)})).then(function Y(){if(0<c.onReadyBeingFired.length){var $=c.onReadyBeingFired.reduce(bt,je);return c.onReadyBeingFired=[],de.resolve(Ni(function(){return $(a.vip)})).then(Y)}})}).finally(function(){c.openCanceller===m&&(c.onReadyBeingFired=null,c.isBeingOpened=!1)}).catch(function(Y){c.dbOpenError=Y;try{H&&H.abort()}catch{}return m===c.openCanceller&&a._close(),rt(Y)}).finally(function(){c.openComplete=!0,L()}).then(function(){var Y;return O&&(Y={},a.tables.forEach(function($){$.schema.indexes.forEach(function(W){W.name&&(Y["idb://".concat(a.name,"/").concat($.name,"/").concat(W.name)]=new Ot(-1/0,[[[]]]))}),Y["idb://".concat(a.name,"/").concat($.name,"/")]=Y["idb://".concat(a.name,"/").concat($.name,"/:dels")]=new Ot(-1/0,[[[]]])}),Wn(eo).fire(Y),ji(Y,!0)),a})}function Pi(a){function c(x){return a.next(x)}var d=v(c),m=v(function(x){return a.throw(x)});function v(x){return function(A){var D=x(A),A=D.value;return D.done?A:A&&typeof A.then=="function"?A.then(d,m):l(A)?Promise.all(A).then(d,m):d(A)}}return v(c)()}function ia(a,c,d){for(var m=l(a)?a.slice():[a],v=0;v<d;++v)m.push(c);return m}var Th={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(a){return r(r({},a),{table:function(c){var d=a.table(c),m=d.schema,v={},x=[];function E(O,Y,$){var W=no(O),z=v[W]=v[W]||[],F=O==null?0:typeof O=="string"?1:O.length,Z=0<Y,Z=r(r({},$),{name:Z?"".concat(W,"(virtual-from:").concat($.name,")"):$.name,lowLevelIndex:$,isVirtual:Z,keyTail:Y,keyLength:F,extractKey:bi(O),unique:!Z&&$.unique});return z.push(Z),Z.isPrimaryKey||x.push(Z),1<F&&E(F===2?O[0]:O.slice(0,F-1),Y+1,$),z.sort(function(ne,re){return ne.keyTail-re.keyTail}),Z}c=E(m.primaryKey.keyPath,0,m.primaryKey),v[":id"]=[c];for(var D=0,A=m.indexes;D<A.length;D++){var L=A[D];E(L.keyPath,0,L)}function H(O){var Y,$=O.query.index;return $.isVirtual?r(r({},O),{query:{index:$.lowLevelIndex,range:(Y=O.query.range,$=$.keyTail,{type:Y.type===1?2:Y.type,lower:ia(Y.lower,Y.lowerOpen?a.MAX_KEY:a.MIN_KEY,$),lowerOpen:!0,upper:ia(Y.upper,Y.upperOpen?a.MIN_KEY:a.MAX_KEY,$),upperOpen:!0})}}):O}return r(r({},d),{schema:r(r({},m),{primaryKey:c,indexes:x,getIndexByKeyPath:function(O){return(O=v[no(O)])&&O[0]}}),count:function(O){return d.count(H(O))},query:function(O){return d.query(H(O))},openCursor:function(O){var Y=O.query.index,$=Y.keyTail,W=Y.isVirtual,z=Y.keyLength;return W?d.openCursor(H(O)).then(function(Z){return Z&&F(Z)}):d.openCursor(O);function F(Z){return Object.create(Z,{continue:{value:function(ne){ne!=null?Z.continue(ia(ne,O.reverse?a.MAX_KEY:a.MIN_KEY,$)):O.unique?Z.continue(Z.key.slice(0,z).concat(O.reverse?a.MIN_KEY:a.MAX_KEY,$)):Z.continue()}},continuePrimaryKey:{value:function(ne,re){Z.continuePrimaryKey(ia(ne,a.MAX_KEY,$),re)}},primaryKey:{get:function(){return Z.primaryKey}},key:{get:function(){var ne=Z.key;return z===1?ne[0]:ne.slice(0,z)}},value:{get:function(){return Z.value}}})}}})}})}};function Mi(a,c,d,m){return d=d||{},m=m||"",s(a).forEach(function(v){var x,E,D;p(c,v)?(x=a[v],E=c[v],typeof x=="object"&&typeof E=="object"&&x&&E?(D=M(x))!==M(E)?d[m+v]=c[v]:D==="Object"?Mi(x,E,d,m+v+"."):x!==E&&(d[m+v]=c[v]):x!==E&&(d[m+v]=c[v])):d[m+v]=void 0}),s(c).forEach(function(v){p(a,v)||(d[m+v]=c[v])}),d}function Ii(a,c){return c.type==="delete"?c.keys:c.keys||c.values.map(a.extractKey)}var Dh={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(a){return r(r({},a),{table:function(c){var d=a.table(c),m=d.schema.primaryKey;return r(r({},d),{mutate:function(v){var x=ee.trans,E=x.table(c).hook,D=E.deleting,A=E.creating,L=E.updating;switch(v.type){case"add":if(A.fire===je)break;return x._promise("readwrite",function(){return H(v)},!0);case"put":if(A.fire===je&&L.fire===je)break;return x._promise("readwrite",function(){return H(v)},!0);case"delete":if(D.fire===je)break;return x._promise("readwrite",function(){return H(v)},!0);case"deleteRange":if(D.fire===je)break;return x._promise("readwrite",function(){return function O(Y,$,W){return d.query({trans:Y,values:!1,query:{index:m,range:$},limit:W}).then(function(z){var F=z.result;return H({type:"delete",keys:F,trans:Y}).then(function(Z){return 0<Z.numFailures?Promise.reject(Z.failures[0]):F.length<W?{failures:[],numFailures:0,lastResult:void 0}:O(Y,r(r({},$),{lower:F[F.length-1],lowerOpen:!0}),W)})})}(v.trans,v.range,1e4)},!0)}return d.mutate(v);function H(O){var Y,$,W,z=ee.trans,F=O.keys||Ii(m,O);if(!F)throw new Error("Keys missing");return(O=O.type==="add"||O.type==="put"?r(r({},O),{keys:F}):r({},O)).type!=="delete"&&(O.values=o([],O.values)),O.keys&&(O.keys=o([],O.keys)),Y=d,W=F,(($=O).type==="add"?Promise.resolve([]):Y.getMany({trans:$.trans,keys:W,cache:"immutable"})).then(function(Z){var ne=F.map(function(re,ue){var ge,xe,ye,we=Z[ue],_e={onerror:null,onsuccess:null};return O.type==="delete"?D.fire.call(_e,re,we,z):O.type==="add"||we===void 0?(ge=A.fire.call(_e,re,O.values[ue],z),re==null&&ge!=null&&(O.keys[ue]=re=ge,m.outbound||V(O.values[ue],m.keyPath,re))):(ge=Mi(we,O.values[ue]),(xe=L.fire.call(_e,ge,re,we,z))&&(ye=O.values[ue],Object.keys(xe).forEach(function(be){p(ye,be)?ye[be]=xe[be]:V(ye,be,xe[be])}))),_e});return d.mutate(O).then(function(re){for(var ue=re.failures,ge=re.results,xe=re.numFailures,re=re.lastResult,ye=0;ye<F.length;++ye){var we=(ge||F)[ye],_e=ne[ye];we==null?_e.onerror&&_e.onerror(ue[ye]):_e.onsuccess&&_e.onsuccess(O.type==="put"&&Z[ye]?O.values[ye]:we)}return{failures:ue,results:ge,numFailures:xe,lastResult:re}}).catch(function(re){return ne.forEach(function(ue){return ue.onerror&&ue.onerror(re)}),Promise.reject(re)})})}}})}})}};function Xc(a,c,d){try{if(!c||c.keys.length<a.length)return null;for(var m=[],v=0,x=0;v<c.keys.length&&x<a.length;++v)We(c.keys[v],a[x])===0&&(m.push(d?ce(c.values[v]):c.values[v]),++x);return m.length===a.length?m:null}catch{return null}}var Oh={stack:"dbcore",level:-1,create:function(a){return{table:function(c){var d=a.table(c);return r(r({},d),{getMany:function(m){if(!m.cache)return d.getMany(m);var v=Xc(m.keys,m.trans._cache,m.cache==="clone");return v?de.resolve(v):d.getMany(m).then(function(x){return m.trans._cache={keys:m.keys,values:m.cache==="clone"?ce(x):x},x})},mutate:function(m){return m.type!=="add"&&(m.trans._cache=null),d.mutate(m)}})}}}};function Gc(a,c){return a.trans.mode==="readonly"&&!!a.subscr&&!a.trans.explicit&&a.trans.db._options.cache!=="disabled"&&!c.schema.primaryKey.outbound}function Zc(a,c){switch(a){case"query":return c.values&&!c.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var jh={stack:"dbcore",level:0,name:"Observability",create:function(a){var c=a.schema.name,d=new Ot(a.MIN_KEY,a.MAX_KEY);return r(r({},a),{transaction:function(m,v,x){if(ee.subscr&&v!=="readonly")throw new he.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ee.querier));return a.transaction(m,v,x)},table:function(m){var v=a.table(m),x=v.schema,E=x.primaryKey,O=x.indexes,D=E.extractKey,A=E.outbound,L=E.autoIncrement&&O.filter(function($){return $.compound&&$.keyPath.includes(E.keyPath)}),H=r(r({},v),{mutate:function($){function W(be){return be="idb://".concat(c,"/").concat(m,"/").concat(be),re[be]||(re[be]=new Ot)}var z,F,Z,ne=$.trans,re=$.mutatedParts||($.mutatedParts={}),ue=W(""),ge=W(":dels"),xe=$.type,_e=$.type==="deleteRange"?[$.range]:$.type==="delete"?[$.keys]:$.values.length<50?[Ii(E,$).filter(function(be){return be}),$.values]:[],ye=_e[0],we=_e[1],_e=$.trans._cache;return l(ye)?(ue.addKeys(ye),(_e=xe==="delete"||ye.length===we.length?Xc(ye,_e):null)||ge.addKeys(ye),(_e||we)&&(z=W,F=_e,Z=we,x.indexes.forEach(function(be){var Ee=z(be.name||"");function Ae(He){return He!=null?be.extractKey(He):null}function Be(He){return be.multiEntry&&l(He)?He.forEach(function(qt){return Ee.addKey(qt)}):Ee.addKey(He)}(F||Z).forEach(function(He,jt){var Me=F&&Ae(F[jt]),jt=Z&&Ae(Z[jt]);We(Me,jt)!==0&&(Me!=null&&Be(Me),jt!=null&&Be(jt))})}))):ye?(we={from:(we=ye.lower)!==null&&we!==void 0?we:a.MIN_KEY,to:(we=ye.upper)!==null&&we!==void 0?we:a.MAX_KEY},ge.add(we),ue.add(we)):(ue.add(d),ge.add(d),x.indexes.forEach(function(be){return W(be.name).add(d)})),v.mutate($).then(function(be){return!ye||$.type!=="add"&&$.type!=="put"||(ue.addKeys(be.results),L&&L.forEach(function(Ee){for(var Ae=$.values.map(function(Me){return Ee.extractKey(Me)}),Be=Ee.keyPath.findIndex(function(Me){return Me===E.keyPath}),He=0,qt=be.results.length;He<qt;++He)Ae[He][Be]=be.results[He];W(Ee.name).addKeys(Ae)})),ne.mutatedParts=oa(ne.mutatedParts||{},re),be})}}),O=function(W){var z=W.query,W=z.index,z=z.range;return[W,new Ot((W=z.lower)!==null&&W!==void 0?W:a.MIN_KEY,(z=z.upper)!==null&&z!==void 0?z:a.MAX_KEY)]},Y={get:function($){return[E,new Ot($.key)]},getMany:function($){return[E,new Ot().addKeys($.keys)]},count:O,query:O,openCursor:O};return s(Y).forEach(function($){H[$]=function(W){var z=ee.subscr,F=!!z,Z=Gc(ee,v)&&Zc($,W)?W.obsSet={}:z;if(F){var ne=function(we){return we="idb://".concat(c,"/").concat(m,"/").concat(we),Z[we]||(Z[we]=new Ot)},re=ne(""),ue=ne(":dels"),z=Y[$](W),F=z[0],z=z[1];if(($==="query"&&F.isPrimaryKey&&!W.values?ue:ne(F.name||"")).add(z),!F.isPrimaryKey){if($!=="count"){var ge=$==="query"&&A&&W.values&&v.query(r(r({},W),{values:!1}));return v[$].apply(this,arguments).then(function(we){if($==="query"){if(A&&W.values)return ge.then(function(Ae){return Ae=Ae.result,re.addKeys(Ae),we});var _e=W.values?we.result.map(D):we.result;(W.values?re:ue).addKeys(_e)}else if($==="openCursor"){var be=we,Ee=W.values;return be&&Object.create(be,{key:{get:function(){return ue.addKey(be.primaryKey),be.key}},primaryKey:{get:function(){var Ae=be.primaryKey;return ue.addKey(Ae),Ae}},value:{get:function(){return Ee&&re.addKey(be.primaryKey),be.value}}})}return we})}ue.add(d)}}return v[$].apply(this,arguments)}}),H}})}};function Qc(a,c,d){if(d.numFailures===0)return c;if(c.type==="deleteRange")return null;var m=c.keys?c.keys.length:"values"in c&&c.values?c.values.length:1;return d.numFailures===m?null:(c=r({},c),l(c.keys)&&(c.keys=c.keys.filter(function(v,x){return!(x in d.failures)})),"values"in c&&l(c.values)&&(c.values=c.values.filter(function(v,x){return!(x in d.failures)})),c)}function Ai(a,c){return d=a,((m=c).lower===void 0||(m.lowerOpen?0<We(d,m.lower):0<=We(d,m.lower)))&&(a=a,(c=c).upper===void 0||(c.upperOpen?We(a,c.upper)<0:We(a,c.upper)<=0));var d,m}function Jc(a,c,Y,m,v,x){if(!Y||Y.length===0)return a;var E=c.query.index,D=E.multiEntry,A=c.query.range,L=m.schema.primaryKey.extractKey,H=E.extractKey,O=(E.lowLevelIndex||E).extractKey,Y=Y.reduce(function($,W){var z=$,F=[];if(W.type==="add"||W.type==="put")for(var Z=new Ot,ne=W.values.length-1;0<=ne;--ne){var re,ue=W.values[ne],ge=L(ue);Z.hasKey(ge)||(re=H(ue),(D&&l(re)?re.some(function(be){return Ai(be,A)}):Ai(re,A))&&(Z.addKey(ge),F.push(ue)))}switch(W.type){case"add":var xe=new Ot().addKeys(c.values?$.map(function(Ee){return L(Ee)}):$),z=$.concat(c.values?F.filter(function(Ee){return Ee=L(Ee),!xe.hasKey(Ee)&&(xe.addKey(Ee),!0)}):F.map(function(Ee){return L(Ee)}).filter(function(Ee){return!xe.hasKey(Ee)&&(xe.addKey(Ee),!0)}));break;case"put":var ye=new Ot().addKeys(W.values.map(function(Ee){return L(Ee)}));z=$.filter(function(Ee){return!ye.hasKey(c.values?L(Ee):Ee)}).concat(c.values?F:F.map(function(Ee){return L(Ee)}));break;case"delete":var we=new Ot().addKeys(W.keys);z=$.filter(function(Ee){return!we.hasKey(c.values?L(Ee):Ee)});break;case"deleteRange":var _e=W.range;z=$.filter(function(Ee){return!Ai(L(Ee),_e)})}return z},a);return Y===a?a:(Y.sort(function($,W){return We(O($),O(W))||We(L($),L(W))}),c.limit&&c.limit<1/0&&(Y.length>c.limit?Y.length=c.limit:a.length===c.limit&&Y.length<c.limit&&(v.dirty=!0)),x?Object.freeze(Y):Y)}function el(a,c){return We(a.lower,c.lower)===0&&We(a.upper,c.upper)===0&&!!a.lowerOpen==!!c.lowerOpen&&!!a.upperOpen==!!c.upperOpen}function Ph(a,c){return function(d,m,v,x){if(d===void 0)return m!==void 0?-1:0;if(m===void 0)return 1;if((m=We(d,m))===0){if(v&&x)return 0;if(v)return 1;if(x)return-1}return m}(a.lower,c.lower,a.lowerOpen,c.lowerOpen)<=0&&0<=function(d,m,v,x){if(d===void 0)return m!==void 0?1:0;if(m===void 0)return-1;if((m=We(d,m))===0){if(v&&x)return 0;if(v)return-1;if(x)return 1}return m}(a.upper,c.upper,a.upperOpen,c.upperOpen)}function Mh(a,c,d,m){a.subscribers.add(d),m.addEventListener("abort",function(){var v,x;a.subscribers.delete(d),a.subscribers.size===0&&(v=a,x=c,setTimeout(function(){v.subscribers.size===0&&ie(x,v)},3e3))})}var Ih={stack:"dbcore",level:0,name:"Cache",create:function(a){var c=a.schema.name;return r(r({},a),{transaction:function(d,m,v){var x,E,D=a.transaction(d,m,v);return m==="readwrite"&&(E=(x=new AbortController).signal,v=function(A){return function(){if(x.abort(),m==="readwrite"){for(var L=new Set,H=0,O=d;H<O.length;H++){var Y=O[H],$=rr["idb://".concat(c,"/").concat(Y)];if($){var W=a.table(Y),z=$.optimisticOps.filter(function(Ee){return Ee.trans===D});if(D._explicit&&A&&D.mutatedParts)for(var F=0,Z=Object.values($.queries.query);F<Z.length;F++)for(var ne=0,re=(xe=Z[F]).slice();ne<re.length;ne++)Ti((ye=re[ne]).obsSet,D.mutatedParts)&&(ie(xe,ye),ye.subscribers.forEach(function(Ee){return L.add(Ee)}));else if(0<z.length){$.optimisticOps=$.optimisticOps.filter(function(Ee){return Ee.trans!==D});for(var ue=0,ge=Object.values($.queries.query);ue<ge.length;ue++)for(var xe,ye,we,_e=0,be=(xe=ge[ue]).slice();_e<be.length;_e++)(ye=be[_e]).res!=null&&D.mutatedParts&&(A&&!ye.dirty?(we=Object.isFrozen(ye.res),we=Jc(ye.res,ye.req,z,W,ye,we),ye.dirty?(ie(xe,ye),ye.subscribers.forEach(function(Ee){return L.add(Ee)})):we!==ye.res&&(ye.res=we,ye.promise=de.resolve({result:we}))):(ye.dirty&&ie(xe,ye),ye.subscribers.forEach(function(Ee){return L.add(Ee)})))}}}L.forEach(function(Ee){return Ee()})}}},D.addEventListener("abort",v(!1),{signal:E}),D.addEventListener("error",v(!1),{signal:E}),D.addEventListener("complete",v(!0),{signal:E})),D},table:function(d){var m=a.table(d),v=m.schema.primaryKey;return r(r({},m),{mutate:function(x){var E=ee.trans;if(v.outbound||E.db._options.cache==="disabled"||E.explicit||E.idbtrans.mode!=="readwrite")return m.mutate(x);var D=rr["idb://".concat(c,"/").concat(d)];return D?(E=m.mutate(x),x.type!=="add"&&x.type!=="put"||!(50<=x.values.length||Ii(v,x).some(function(A){return A==null}))?(D.optimisticOps.push(x),x.mutatedParts&&aa(x.mutatedParts),E.then(function(A){0<A.numFailures&&(ie(D.optimisticOps,x),(A=Qc(0,x,A))&&D.optimisticOps.push(A),x.mutatedParts&&aa(x.mutatedParts))}),E.catch(function(){ie(D.optimisticOps,x),x.mutatedParts&&aa(x.mutatedParts)})):E.then(function(A){var L=Qc(0,r(r({},x),{values:x.values.map(function(H,O){var Y;return A.failures[O]?H:(H=(Y=v.keyPath)!==null&&Y!==void 0&&Y.includes(".")?ce(H):r({},H),V(H,v.keyPath,A.results[O]),H)})}),A);D.optimisticOps.push(L),queueMicrotask(function(){return x.mutatedParts&&aa(x.mutatedParts)})}),E):m.mutate(x)},query:function(x){if(!Gc(ee,m)||!Zc("query",x))return m.query(x);var E=((L=ee.trans)===null||L===void 0?void 0:L.db._options.cache)==="immutable",O=ee,D=O.requery,A=O.signal,L=function(W,z,F,Z){var ne=rr["idb://".concat(W,"/").concat(z)];if(!ne)return[];if(!(z=ne.queries[F]))return[null,!1,ne,null];var re=z[(Z.query?Z.query.index.name:null)||""];if(!re)return[null,!1,ne,null];switch(F){case"query":var ue=re.find(function(ge){return ge.req.limit===Z.limit&&ge.req.values===Z.values&&el(ge.req.query.range,Z.query.range)});return ue?[ue,!0,ne,re]:[re.find(function(ge){return("limit"in ge.req?ge.req.limit:1/0)>=Z.limit&&(!Z.values||ge.req.values)&&Ph(ge.req.query.range,Z.query.range)}),!1,ne,re];case"count":return ue=re.find(function(ge){return el(ge.req.query.range,Z.query.range)}),[ue,!!ue,ne,re]}}(c,d,"query",x),H=L[0],O=L[1],Y=L[2],$=L[3];return H&&O?H.obsSet=x.obsSet:(O=m.query(x).then(function(W){var z=W.result;if(H&&(H.res=z),E){for(var F=0,Z=z.length;F<Z;++F)Object.freeze(z[F]);Object.freeze(z)}else W.result=ce(z);return W}).catch(function(W){return $&&H&&ie($,H),Promise.reject(W)}),H={obsSet:x.obsSet,promise:O,subscribers:new Set,type:"query",req:x,dirty:!1},$?$.push(H):($=[H],(Y=Y||(rr["idb://".concat(c,"/").concat(d)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[x.query.index.name||""]=$)),Mh(H,$,D,A),H.promise.then(function(W){return{result:Jc(W.result,x,Y==null?void 0:Y.optimisticOps,m,H,E)}})}})}})}};function sa(a,c){return new Proxy(a,{get:function(d,m,v){return m==="db"?c:Reflect.get(d,m,v)}})}var _n=(ht.prototype.version=function(a){if(isNaN(a)||a<.1)throw new he.Type("Given version is not a positive number");if(a=Math.round(10*a)/10,this.idbdb||this._state.isBeingOpened)throw new he.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,a);var c=this._versions,d=c.filter(function(m){return m._cfg.version===a})[0];return d||(d=new this.Version(a),c.push(d),c.sort(kh),d.stores({}),this._state.autoSchema=!1,d)},ht.prototype._whenReady=function(a){var c=this;return this.idbdb&&(this._state.openComplete||ee.letThrough||this._vip)?a():new de(function(d,m){if(c._state.openComplete)return m(new he.DatabaseClosed(c._state.dbOpenError));if(!c._state.isBeingOpened){if(!c._state.autoOpen)return void m(new he.DatabaseClosed);c.open().catch(je)}c._state.dbReadyPromise.then(d,m)}).then(a)},ht.prototype.use=function(a){var c=a.stack,d=a.create,m=a.level,v=a.name;return v&&this.unuse({stack:c,name:v}),a=this._middlewares[c]||(this._middlewares[c]=[]),a.push({stack:c,create:d,level:m??10,name:v}),a.sort(function(x,E){return x.level-E.level}),this},ht.prototype.unuse=function(a){var c=a.stack,d=a.name,m=a.create;return c&&this._middlewares[c]&&(this._middlewares[c]=this._middlewares[c].filter(function(v){return m?v.create!==m:!!d&&v.name!==d})),this},ht.prototype.open=function(){var a=this;return ft(me,function(){return Ch(a)})},ht.prototype._close=function(){var a=this._state,c=Ln.indexOf(this);if(0<=c&&Ln.splice(c,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}a.isBeingOpened||(a.dbReadyPromise=new de(function(d){a.dbReadyResolve=d}),a.openCanceller=new de(function(d,m){a.cancelOpen=m}))},ht.prototype.close=function(d){var c=(d===void 0?{disableAutoOpen:!0}:d).disableAutoOpen,d=this._state;c?(d.isBeingOpened&&d.cancelOpen(new he.DatabaseClosed),this._close(),d.autoOpen=!1,d.dbOpenError=new he.DatabaseClosed):(this._close(),d.autoOpen=this._options.autoOpen||d.isBeingOpened,d.openComplete=!1,d.dbOpenError=null)},ht.prototype.delete=function(a){var c=this;a===void 0&&(a={disableAutoOpen:!0});var d=0<arguments.length&&typeof arguments[0]!="object",m=this._state;return new de(function(v,x){function E(){c.close(a);var D=c._deps.indexedDB.deleteDatabase(c.name);D.onsuccess=Xe(function(){var A,L,H;A=c._deps,L=c.name,H=A.indexedDB,A=A.IDBKeyRange,Ei(H)||L===kr||_i(H,A).delete(L).catch(je),v()}),D.onerror=hn(x),D.onblocked=c._fireOnBlocked}if(d)throw new he.InvalidArgument("Invalid closeOptions argument to db.delete()");m.isBeingOpened?m.dbReadyPromise.then(E):E()})},ht.prototype.backendDB=function(){return this.idbdb},ht.prototype.isOpen=function(){return this.idbdb!==null},ht.prototype.hasBeenClosed=function(){var a=this._state.dbOpenError;return a&&a.name==="DatabaseClosed"},ht.prototype.hasFailed=function(){return this._state.dbOpenError!==null},ht.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(ht.prototype,"tables",{get:function(){var a=this;return s(this._allTables).map(function(c){return a._allTables[c]})},enumerable:!1,configurable:!0}),ht.prototype.transaction=function(){var a=(function(c,d,m){var v=arguments.length;if(v<2)throw new he.InvalidArgument("Too few arguments");for(var x=new Array(v-1);--v;)x[v-1]=arguments[v];return m=x.pop(),[c,te(x),m]}).apply(this,arguments);return this._transaction.apply(this,a)},ht.prototype._transaction=function(a,c,d){var m=this,v=ee.trans;v&&v.db===this&&a.indexOf("!")===-1||(v=null);var x,E,D=a.indexOf("?")!==-1;a=a.replace("!","").replace("?","");try{if(E=c.map(function(L){if(L=L instanceof m.Table?L.name:L,typeof L!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return L}),a=="r"||a===Ur)x=Ur;else{if(a!="rw"&&a!=Xr)throw new he.InvalidArgument("Invalid transaction mode: "+a);x=Xr}if(v){if(v.mode===Ur&&x===Xr){if(!D)throw new he.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");v=null}v&&E.forEach(function(L){if(v&&v.storeNames.indexOf(L)===-1){if(!D)throw new he.SubTransaction("Table "+L+" not included in parent transaction.");v=null}}),D&&v&&!v.active&&(v=null)}}catch(L){return v?v._promise(null,function(H,O){O(L)}):rt(L)}var A=(function L(H,O,Y,$,W){return de.resolve().then(function(){var z=ee.transless||ee,F=H._createTransaction(O,Y,H._dbSchema,$);if(F.explicit=!0,z={trans:F,transless:z},$)F.idbtrans=$.idbtrans;else try{F.create(),F.idbtrans._explicit=!0,H._state.PR1398_maxLoop=3}catch(re){return re.name===Oe.InvalidState&&H.isOpen()&&0<--H._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),H.close({disableAutoOpen:!1}),H.open().then(function(){return L(H,O,Y,null,W)})):rt(re)}var Z,ne=ae(W);return ne&&Jt(),z=de.follow(function(){var re;(Z=W.call(F,F))&&(ne?(re=Yt.bind(null,null),Z.then(re,re)):typeof Z.next=="function"&&typeof Z.throw=="function"&&(Z=Pi(Z)))},z),(Z&&typeof Z.then=="function"?de.resolve(Z).then(function(re){return F.active?re:rt(new he.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):z.then(function(){return Z})).then(function(re){return $&&F._resolve(),F._completion.then(function(){return re})}).catch(function(re){return F._reject(re),rt(re)})})}).bind(null,this,x,E,v,d);return v?v._promise(x,A,"lock"):ee.trans?ft(ee.transless,function(){return m._whenReady(A)}):this._whenReady(A)},ht.prototype.table=function(a){if(!p(this._allTables,a))throw new he.InvalidTable("Table ".concat(a," does not exist"));return this._allTables[a]},ht);function ht(a,c){var d=this;this._middlewares={},this.verno=0;var m=ht.dependencies;this._options=c=r({addons:ht.addons,autoOpen:!0,indexedDB:m.indexedDB,IDBKeyRange:m.IDBKeyRange,cache:"cloned"},c),this._deps={indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange},m=c.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var v,x,E,D,A,L={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:je,dbReadyPromise:null,cancelOpen:je,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:c.autoOpen};L.dbReadyPromise=new de(function(O){L.dbReadyResolve=O}),L.openCanceller=new de(function(O,Y){L.cancelOpen=Y}),this._state=L,this.name=a,this.on=Gr(this,"populate","blocked","versionchange","close",{ready:[bt,je]}),this.on.ready.subscribe=I(this.on.ready.subscribe,function(O){return function(Y,$){ht.vip(function(){var W,z=d._state;z.openComplete?(z.dbOpenError||de.resolve().then(Y),$&&O(Y)):z.onReadyBeingFired?(z.onReadyBeingFired.push(Y),$&&O(Y)):(O(Y),W=d,$||O(function F(){W.on.ready.unsubscribe(Y),W.on.ready.unsubscribe(F)}))})}}),this.Collection=(v=this,Zr(gh.prototype,function(Z,F){this.db=v;var $=qo,W=null;if(F)try{$=F()}catch(ne){W=ne}var z=Z._ctx,F=z.table,Z=F.hook.reading.fire;this._ctx={table:F,index:z.index,isPrimKey:!z.index||F.schema.primKey.keyPath&&z.index===F.schema.primKey.name,range:$,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:W,or:z.or,valueMapper:Z!==Je?Z:null}})),this.Table=(x=this,Zr(Ac.prototype,function(O,Y,$){this.db=x,this._tx=$,this.name=O,this.schema=Y,this.hook=x._allTables[O]?x._allTables[O].hook:Gr(null,{creating:[Ke,je],reading:[$e,Je],updating:[Ne,je],deleting:[Ye,je]})})),this.Transaction=(E=this,Zr(wh.prototype,function(O,Y,$,W,z){var F=this;this.db=E,this.mode=O,this.storeNames=Y,this.schema=$,this.chromeTransactionDurability=W,this.idbtrans=null,this.on=Gr(this,"complete","error","abort"),this.parent=z||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new de(function(Z,ne){F._resolve=Z,F._reject=ne}),this._completion.then(function(){F.active=!1,F.on.complete.fire()},function(Z){var ne=F.active;return F.active=!1,F.on.error.fire(Z),F.parent?F.parent._reject(Z):ne&&F.idbtrans&&F.idbtrans.abort(),rt(Z)})})),this.Version=(D=this,Zr(Nh.prototype,function(O){this.db=D,this._cfg={version:O,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(A=this,Zr(Wc.prototype,function(O,Y,$){if(this.db=A,this._ctx={table:O,index:Y===":id"?null:Y,or:$},this._cmp=this._ascending=We,this._descending=function(W,z){return We(z,W)},this._max=function(W,z){return 0<We(W,z)?W:z},this._min=function(W,z){return We(W,z)<0?W:z},this._IDBKeyRange=A._deps.IDBKeyRange,!this._IDBKeyRange)throw new he.MissingAPI})),this.on("versionchange",function(O){0<O.newVersion?console.warn("Another connection wants to upgrade database '".concat(d.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(d.name,"'. Closing db now to resume the delete request.")),d.close({disableAutoOpen:!1})}),this.on("blocked",function(O){!O.newVersion||O.newVersion<O.oldVersion?console.warn("Dexie.delete('".concat(d.name,"') was blocked")):console.warn("Upgrade '".concat(d.name,"' blocked by other connection holding version ").concat(O.oldVersion/10))}),this._maxKey=to(c.IDBKeyRange),this._createTransaction=function(O,Y,$,W){return new d.Transaction(O,Y,$,d._options.chromeTransactionDurability,W)},this._fireOnBlocked=function(O){d.on("blocked").fire(O),Ln.filter(function(Y){return Y.name===d.name&&Y!==d&&!Y._state.vcFired}).map(function(Y){return Y.on("versionchange").fire(O)})},this.use(Oh),this.use(Ih),this.use(jh),this.use(Th),this.use(Dh);var H=new Proxy(this,{get:function(O,Y,$){if(Y==="_vip")return!0;if(Y==="table")return function(z){return sa(d.table(z),H)};var W=Reflect.get(O,Y,$);return W instanceof Ac?sa(W,H):Y==="tables"?W.map(function(z){return sa(z,H)}):Y==="_createTransaction"?function(){return sa(W.apply(this,arguments),H)}:W}});this.vip=H,m.forEach(function(O){return O(d)})}var ca,Xt=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Ah=($i.prototype.subscribe=function(a,c,d){return this._subscribe(a&&typeof a!="function"?a:{next:a,error:c,complete:d})},$i.prototype[Xt]=function(){return this},$i);function $i(a){this._subscribe=a}try{ca={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{ca={indexedDB:null,IDBKeyRange:null}}function tl(a){var c,d=!1,m=new Ah(function(v){var x=ae(a),E,D=!1,A={},L={},H={get closed(){return D},unsubscribe:function(){D||(D=!0,E&&E.abort(),O&&Wn.storagemutated.unsubscribe($))}};v.start&&v.start(H);var O=!1,Y=function(){return Sn(W)},$=function(z){oa(A,z),Ti(L,A)&&Y()},W=function(){var z,F,Z;!D&&ca.indexedDB&&(A={},z={},E&&E.abort(),E=new AbortController,Z=function(ne){var re=vt();try{x&&Jt();var ue=Ft(a,ne);return ue=x?ue.finally(Yt):ue}finally{re&&cn()}}(F={subscr:z,signal:E.signal,requery:Y,querier:a,trans:null}),Promise.resolve(Z).then(function(ne){d=!0,c=ne,D||F.signal.aborted||(A={},function(re){for(var ue in re)if(p(re,ue))return;return 1}(L=z)||O||(Wn(eo,$),O=!0),Sn(function(){return!D&&v.next&&v.next(ne)}))},function(ne){d=!1,["DatabaseClosedError","AbortError"].includes(ne==null?void 0:ne.name)||D||Sn(function(){D||v.error&&v.error(ne)})}))};return setTimeout(Y,0),H});return m.hasValue=function(){return d},m.getValue=function(){return c},m}var or=_n;function Ri(a){var c=Bn;try{Bn=!0,Wn.storagemutated.fire(a),ji(a,!0)}finally{Bn=c}}y(or,r(r({},Ze),{delete:function(a){return new or(a,{addons:[]}).delete()},exists:function(a){return new or(a,{addons:[]}).open().then(function(c){return c.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(a){try{return c=or.dependencies,d=c.indexedDB,c=c.IDBKeyRange,(Ei(d)?Promise.resolve(d.databases()).then(function(m){return m.map(function(v){return v.name}).filter(function(v){return v!==kr})}):_i(d,c).toCollection().primaryKeys()).then(a)}catch{return rt(new he.MissingAPI)}var c,d},defineClass:function(){return function(a){u(this,a)}},ignoreTransaction:function(a){return ee.trans?ft(ee.transless,a):a()},vip:Ni,async:function(a){return function(){try{var c=Pi(a.apply(this,arguments));return c&&typeof c.then=="function"?c:de.resolve(c)}catch(d){return rt(d)}}},spawn:function(a,c,d){try{var m=Pi(a.apply(d,c||[]));return m&&typeof m.then=="function"?m:de.resolve(m)}catch(v){return rt(v)}},currentTransaction:{get:function(){return ee.trans||null}},waitFor:function(a,c){return c=de.resolve(typeof a=="function"?or.ignoreTransaction(a):a).timeout(c||6e4),ee.trans?ee.trans.waitFor(c):c},Promise:de,debug:{get:function(){return lt},set:function(a){zt(a)}},derive:k,extend:u,props:y,override:I,Events:Gr,on:Wn,liveQuery:tl,extendObservabilitySet:oa,getByKeyPath:q,setByKeyPath:V,delByKeyPath:function(a,c){typeof c=="string"?V(a,c,void 0):"length"in c&&[].map.call(c,function(d){V(a,d,void 0)})},shallowClone:J,deepClone:ce,getObjectDiff:Mi,cmp:We,asap:X,minKey:-1/0,addons:[],connections:Ln,errnames:Oe,dependencies:ca,cache:rr,semVer:"4.0.10",version:"4.0.10".split(".").map(function(a){return parseInt(a)}).reduce(function(a,c,d){return a+c/Math.pow(10,2*d)})})),or.maxKey=to(or.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Wn(eo,function(a){Bn||(a=new CustomEvent(yi,{detail:a}),Bn=!0,dispatchEvent(a),Bn=!1)}),addEventListener(yi,function(a){a=a.detail,Bn||Ri(a)}));var Cr,Bn=!1,nl=function(){};return typeof BroadcastChannel<"u"&&((nl=function(){(Cr=new BroadcastChannel(yi)).onmessage=function(a){return a.data&&Ri(a.data)}})(),typeof Cr.unref=="function"&&Cr.unref(),Wn(eo,function(a){Bn||Cr.postMessage(a)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(a){if(!_n.disableBfCache&&a.persisted){lt&&console.debug("Dexie: handling persisted pagehide"),Cr!=null&&Cr.close();for(var c=0,d=Ln;c<d.length;c++)d[c].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(a){!_n.disableBfCache&&a.persisted&&(lt&&console.debug("Dexie: handling persisted pageshow"),nl(),Ri({all:new Ot(-1/0,[[]])}))})),de.rejectionMapper=function(a,c){return!a||a instanceof fe||a instanceof TypeError||a instanceof SyntaxError||!a.name||!Ie[a.name]?a:(c=new Ie[a.name](c||a.message,a),"stack"in a&&S(c,"stack",{get:function(){return this.inner.stack}}),c)},zt(lt),r(_n,Object.freeze({__proto__:null,Dexie:_n,liveQuery:tl,Entity:Ko,cmp:We,PropModSymbol:kn,PropModification:Qr,replacePrefix:function(a,c){return new Qr({replacePrefix:[a,c]})},add:function(a){return new Qr({add:a})},remove:function(a){return new Qr({remove:a})},default:_n,RangeSet:Ot,mergeRanges:oo,rangesOverlap:Vc}),{default:_n}),_n})})(lf);var mw=lf.exports;const ks=Qs(mw),Xl=Symbol.for("Dexie"),_s=globalThis[Xl]||(globalThis[Xl]=ks);if(ks.semVer!==_s.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${ks.semVer} and ${_s.semVer}`);class pw extends _s{constructor(){super("TemporalDB"),this.version(3).stores({workflows:"[workflowId+runId],[parentWorkflowId+parentWorkflowRunId], parentWorkflowId, parentWorkflowRunId",activities:"[activityId+workflowId+workflowRunId],[workflowId+workflowRunId], workflowId, workflowRunId",settings:"id"})}}const vn=new pw;async function Es(e){try{await vn.workflows.put(e),console.debug("Workflow added successfully:",e)}catch(t){console.error("Failed to add workflow:",t,e)}}async function Ro(e,t){if(t)try{const n=await vn.workflows.get({workflowId:e,runId:t});return console.debug("Retrieved Workflow:",n),n}catch(n){console.error("Failed to retrieve workflow:",n);return}}async function gw(e,t){try{await vn.workflows.where({workflowId:e,runId:t}).delete(),console.debug(`Deleted Workflow with ID: ${e}`)}catch(n){console.error("Failed to delete workflow:",n)}}async function uf(e){try{await vn.activities.put(e),console.debug("Activity added successfully:",e)}catch(t){console.error("Failed to add activity:",t,e)}}async function yw(e,t,n){try{const r=await vn.activities.get({activityId:t,workflowId:e,workflowRunId:n});return console.debug("Retrieved Activity:",r),r}catch(r){console.error("Failed to retrieve activity:",r);return}}async function vw(e,t,n){try{await vn.activities.where({activityId:t,workflowId:e,workflowRunId:n}).delete(),console.debug(`Deleted Activity with ID: ${t}`)}catch(r){console.error("Failed to delete activity:",r)}}async function df(e,t){try{return await vn.activities.where(["workflowId","workflowRunId"]).equals([e,t]).toArray()}catch(n){return console.error("Failed to retrieve activities by workflowId:",n),[]}}async function pc(e,t){try{return await vn.workflows.where(["parentWorkflowId","parentWorkflowRunId"]).equals([e,t]).toArray()}catch(n){return console.error("Failed to retrieve child workflows:",n),[]}}async function ww(e,t,n){if(!e)return[];const r=[];for(const o of e)if(o.type==="workflow"||o.type==="childWorkflow"){const i=await Ro(o.id,o.workflowRunId);i&&r.push(i)}else if(o.type==="activity"){const i=await yw(t,o.id,n);i&&r.push(i)}return r}async function Oo(e){try{const t=await vn.settings.get(e);return t==null?void 0:t.value}catch(t){console.error("Failed to retrieve setting:",t);return}}async function Ns(e,t){try{await vn.settings.put({id:e,value:t}),console.debug(`Setting ${e} updated successfully:`,t)}catch(n){console.error("Failed to update setting:",n)}}const zn={name:"default-queue",kind:"TASK_QUEUE_KIND_NORMAL"},bw=()=>{const e="demo-order-processing-wf-001",t=new Date().toISOString(),n=new Date(Date.parse(t)+6e4).toISOString(),r=new Date(Date.parse(t)+12e4).toISOString(),o=new Date(Date.parse(t)+18e4).toISOString(),i="1",s="2",l="3",u={orderId:"ORD-001",customer:{id:"CUST-123",name:"John Doe",email:"john.doe@example.com"},items:[{id:"ITEM-1",name:"Gaming Laptop",price:1299.99,quantity:1},{id:"ITEM-2",name:"Wireless Mouse",price:49.99,quantity:2}],totalAmount:1399.97,shippingAddress:{street:"123 Tech Lane",city:"San Francisco",state:"CA",zipCode:"94105"}},f=[{type:"workflow",workflowId:e,workflowType:"OrderProcessingWorkflow",status:"RUNNING",startTime:t,endTime:void 0,taskQueue:zn,input:JSON.stringify(u),workflowTaskCompletedEventId:i,memo:{description:"Process customer order with validation and fulfillment",priority:"HIGH"}},{type:"childWorkflow",workflowId:"demo-fulfillment-wf-001",workflowType:"OrderFulfillmentWorkflow",parentWorkflowId:e,status:"RUNNING",startTime:t,endTime:void 0,taskQueue:zn,workflowTaskCompletedEventId:s,input:JSON.stringify({orderId:u.orderId,items:u.items,shippingAddress:u.shippingAddress,warehouseId:"WH-SF-001"})},...Array(5).fill(null).map((p,y)=>({type:"childWorkflow",workflowId:`demo-shipping-wf-00${y+1}`,workflowType:"ShippingWorkflow",parentWorkflowId:"demo-fulfillment-wf-001",status:"RUNNING",startTime:t,endTime:void 0,taskQueue:zn,workflowTaskCompletedEventId:l,input:JSON.stringify({packageId:`PKG-00${y+1}`,orderId:u.orderId,item:u.items[y%2],shippingAddress:u.shippingAddress,carrier:"FastShip",trackingPrefix:"FS"})}))],h=[{type:"activity",activityId:"validate-order-001",activityType:"ValidateOrderActivity",workflowId:e,status:"COMPLETED",startTime:t,endTime:n,taskQueue:zn,input:JSON.stringify({orderId:u.orderId,customerId:u.customer.id,items:u.items,totalAmount:u.totalAmount}),result:JSON.stringify({isValid:!0,validatedAt:t,checks:{inventory:!0,pricing:!0,customerStatus:"ACTIVE",fraudCheck:{passed:!0,score:.95,reasons:["Valid customer history","Normal order pattern"]}}}),workflowTaskCompletedEventId:i},{type:"activity",activityId:"process-payment-001",activityType:"ProcessPaymentActivity",workflowId:e,status:"COMPLETED",startTime:n,endTime:r,taskQueue:zn,input:JSON.stringify({orderId:u.orderId,amount:u.totalAmount,customerId:u.customer.id,paymentMethod:{type:"CREDIT_CARD",last4:"4242",brand:"Visa",expiryMonth:12,expiryYear:2025}}),result:JSON.stringify({transactionId:"TX-789012",status:"APPROVED",processedAt:n,paymentDetails:{authorizationCode:"AUTH123",avsResult:"Y",cvvResult:"M",processorResponse:"Approved"}}),workflowTaskCompletedEventId:i},{type:"activity",activityId:"inventory-check-001",activityType:"CheckInventoryActivity",workflowId:"demo-fulfillment-wf-001",status:"COMPLETED",startTime:r,endTime:o,taskQueue:zn,input:JSON.stringify({warehouseId:"WH-SF-001",items:u.items,reservationDuration:"30m"}),result:JSON.stringify({available:!0,itemsAvailability:u.items.map(p=>({itemId:p.id,available:!0,quantity:p.quantity,location:"Zone-A12",binNumber:"BIN-456",reservationId:`RES-${p.id}`,expiresAt:new Date(Date.parse(o)+18e5).toISOString()}))}),workflowTaskCompletedEventId:s},{type:"activity",activityId:"prepare-shipment-001",activityType:"PrepareShipmentActivity",workflowId:"demo-fulfillment-wf-001",status:"FAILED",startTime:o,endTime:new Date(Date.parse(o)+3e4).toISOString(),taskQueue:zn,input:JSON.stringify({orderId:u.orderId,items:u.items,warehouseId:"WH-SF-001",packagingType:"STANDARD",packagingRequirements:{type:"BOX_MEDIUM",reinforced:!0,materials:["bubble_wrap","foam_padding"]}}),result:JSON.stringify({error:"PACKAGING_MATERIAL_UNAVAILABLE",message:"Required packaging material out of stock",details:{missingMaterials:["foam_padding"],availableAlternatives:["air_pillows"],nextRestockScheduled:new Date(Date.parse(t)+864e5).toISOString()},timestamp:o,errorCode:"PKG_001",severity:"MEDIUM"}),workflowTaskCompletedEventId:s},...Array(5).fill(null).map((p,y)=>({type:"activity",activityId:`process-shipping-00${y+1}`,activityType:"ProcessShippingActivity",workflowId:`demo-shipping-wf-00${y+1}`,status:"RUNNING",startTime:new Date(Date.parse(o)+y*1e4).toISOString(),endTime:void 0,taskQueue:zn,input:JSON.stringify({packageId:`PKG-00${y+1}`,orderId:u.orderId,carrier:"FastShip",service:"NEXT_DAY",dimensions:{length:15,width:10,height:5,weight:2.5,unit:"IMPERIAL"},shippingAddress:u.shippingAddress,item:u.items[y%2],specialInstructions:"Handle with care",insurance:{required:!0,value:u.items[y%2].price}}),workflowTaskCompletedEventId:l}))];return{workflows:f,activities:h}},xw=async()=>{const e="demo-order-processing-wf-001";try{const{workflows:t,activities:n}=bw();for(const r of t)await Es(r);for(const r of n)await uf(r);return console.log("Demo data stored successfully"),e}catch(t){return console.error("Error storing demo data:",t),""}};var Sw=Object.defineProperty,kw=(e,t,n)=>t in e?Sw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zi=(e,t,n)=>(kw(e,typeof t!="symbol"?t+"":t,n),n);let _w=class{constructor(){Zi(this,"current",this.detect()),Zi(this,"handoffState","pending"),Zi(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},gr=new _w;function Ja(e){return gr.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}function ei(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function er(){let e=[],t={addEventListener(n,r,o,i){return n.addEventListener(r,o,i),t.add(()=>n.removeEventListener(r,o,i))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return ei(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,o){let i=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:o}),this.add(()=>{Object.assign(n.style,{[r]:i})})},group(n){let r=er();return n(r),this.add(()=>r.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let o of e.splice(r,1))o()}},dispose(){for(let n of e.splice(0))n()}};return t}function gc(){let[e]=b.useState(er);return b.useEffect(()=>()=>e.dispose(),[e]),e}let Rt=(e,t)=>{gr.isServer?b.useEffect(e,t):b.useLayoutEffect(e,t)};function br(e){let t=b.useRef(e);return Rt(()=>{t.current=e},[e]),t}let ct=function(e){let t=br(e);return B.useCallback((...n)=>t.current(...n),[t])},Ew=b.createContext(void 0);function Nw(){return b.useContext(Ew)}function Cs(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function Qn(e,t,...n){if(e in t){let o=t[e];return typeof o=="function"?o(...n):o}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(o=>`"${o}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Qn),r}var La=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(La||{}),Gn=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Gn||{});function Qt(){let e=Tw();return b.useCallback(t=>Cw({mergeRefs:e,...t}),[e])}function Cw({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:o,visible:i=!0,name:s,mergeRefs:l}){l=l??Dw;let u=ff(t,e);if(i)return wa(u,n,r,s,l);let f=o??0;if(f&2){let{static:h=!1,...p}=u;if(h)return wa(p,n,r,s,l)}if(f&1){let{unmount:h=!0,...p}=u;return Qn(h?0:1,{0(){return null},1(){return wa({...p,hidden:!0,style:{display:"none"}},n,r,s,l)}})}return wa(u,n,r,s,l)}function wa(e,t={},n,r,o){let{as:i=n,children:s,refName:l="ref",...u}=Qi(e,["unmount","static"]),f=e.ref!==void 0?{[l]:e.ref}:{},h=typeof s=="function"?s(t):s;"className"in u&&u.className&&typeof u.className=="function"&&(u.className=u.className(t)),u["aria-labelledby"]&&u["aria-labelledby"]===u.id&&(u["aria-labelledby"]=void 0);let p={};if(t){let y=!1,w=[];for(let[S,k]of Object.entries(t))typeof k=="boolean"&&(y=!0),k===!0&&w.push(S.replace(/([A-Z])/g,N=>`-${N.toLowerCase()}`));if(y){p["data-headlessui-state"]=w.join(" ");for(let S of w)p[`data-${S}`]=""}}if(i===b.Fragment&&(Object.keys(sr(u)).length>0||Object.keys(sr(p)).length>0))if(!b.isValidElement(h)||Array.isArray(h)&&h.length>1){if(Object.keys(sr(u)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(sr(u)).concat(Object.keys(sr(p))).map(y=>`  - ${y}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(y=>`  - ${y}`).join(`
`)].join(`
`))}else{let y=h.props,w=y==null?void 0:y.className,S=typeof w=="function"?(...C)=>Cs(w(...C),u.className):Cs(w,u.className),k=S?{className:S}:{},N=ff(h.props,sr(Qi(u,["ref"])));for(let C in p)C in N&&delete p[C];return b.cloneElement(h,Object.assign({},N,p,f,{ref:o(Ow(h),f.ref)},k))}return b.createElement(i,Object.assign({},Qi(u,["ref"]),i!==b.Fragment&&f,i!==b.Fragment&&p),h)}function Tw(){let e=b.useRef([]),t=b.useCallback(n=>{for(let r of e.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return e.current=n,t}}function Dw(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function ff(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let o in r)o.startsWith("on")&&typeof r[o]=="function"?(n[o]!=null||(n[o]=[]),n[o].push(r[o])):t[o]=r[o];if(t.disabled||t["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[o=>{var i;return(i=o==null?void 0:o.preventDefault)==null?void 0:i.call(o)}]);for(let r in n)Object.assign(t,{[r](o,...i){let s=n[r];for(let l of s){if((o instanceof Event||(o==null?void 0:o.nativeEvent)instanceof Event)&&o.defaultPrevented)return;l(o,...i)}}});return t}function Ht(e){var t;return Object.assign(b.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function sr(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function Qi(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function Ow(e){return B.version.split(".")[0]>="19"?e.props.ref:e.ref}let jw="span";var Fa=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Fa||{});function Pw(e,t){var n;let{features:r=1,...o}=e,i={ref:t,"aria-hidden":(r&2)===2?!0:(n=o["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return Qt()({ourProps:i,theirProps:o,slot:{},defaultTag:jw,name:"Hidden"})}let Ts=Ht(Pw),hf=Symbol();function Mw(e,t=!0){return Object.assign(e,{[hf]:t})}function wn(...e){let t=b.useRef(e);b.useEffect(()=>{t.current=e},[e]);let n=ct(r=>{for(let o of t.current)o!=null&&(typeof o=="function"?o(r):o.current=r)});return e.every(r=>r==null||(r==null?void 0:r[hf]))?void 0:n}let yc=b.createContext(null);yc.displayName="DescriptionContext";function mf(){let e=b.useContext(yc);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,mf),t}return e}function Iw(){let[e,t]=b.useState([]);return[e.length>0?e.join(" "):void 0,b.useMemo(()=>function(n){let r=ct(i=>(t(s=>[...s,i]),()=>t(s=>{let l=s.slice(),u=l.indexOf(i);return u!==-1&&l.splice(u,1),l}))),o=b.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return B.createElement(yc.Provider,{value:o},n.children)},[t])]}let Aw="p";function $w(e,t){let n=b.useId(),r=Nw(),{id:o=`headlessui-description-${n}`,...i}=e,s=mf(),l=wn(t);Rt(()=>s.register(o),[o,s.register]);let u=r||!1,f=b.useMemo(()=>({...s.slot,disabled:u}),[s.slot,u]),h={ref:l,...s.props,id:o};return Qt()({ourProps:h,theirProps:i,slot:f,defaultTag:Aw,name:s.name||"Description"})}let Rw=Ht($w),Lw=Object.assign(Rw,{});var pf=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(pf||{});let Fw=b.createContext(()=>{});function Ww({value:e,children:t}){return B.createElement(Fw.Provider,{value:e},t)}let Bw=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};function gf(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(o){return r.add(o),()=>r.delete(o)},dispatch(o,...i){let s=t[o].call(n,...i);s&&(n=s,r.forEach(l=>l()))}}}function yf(e){return b.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}let Hw=new Bw(()=>gf(()=>[],{ADD(e){return this.includes(e)?this:[...this,e]},REMOVE(e){let t=this.indexOf(e);if(t===-1)return this;let n=this.slice();return n.splice(t,1),n}}));function Yr(e,t){let n=Hw.get(t),r=b.useId(),o=yf(n);if(Rt(()=>{if(e)return n.dispatch("ADD",r),()=>n.dispatch("REMOVE",r)},[n,e]),!e)return!1;let i=o.indexOf(r),s=o.length;return i===-1&&(i=s,s+=1),i===s-1}let Ds=new Map,wo=new Map;function Gl(e){var t;let n=(t=wo.get(e))!=null?t:0;return wo.set(e,n+1),n!==0?()=>Zl(e):(Ds.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>Zl(e))}function Zl(e){var t;let n=(t=wo.get(e))!=null?t:1;if(n===1?wo.delete(e):wo.set(e,n-1),n!==1)return;let r=Ds.get(e);r&&(r["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,Ds.delete(e))}function zw(e,{allowed:t,disallowed:n}={}){let r=Yr(e,"inert-others");Rt(()=>{var o,i;if(!r)return;let s=er();for(let u of(o=n==null?void 0:n())!=null?o:[])u&&s.add(Gl(u));let l=(i=t==null?void 0:t())!=null?i:[];for(let u of l){if(!u)continue;let f=Ja(u);if(!f)continue;let h=u.parentElement;for(;h&&h!==f.body;){for(let p of h.children)l.some(y=>p.contains(y))||s.add(Gl(p));h=h.parentElement}}return s.dispose},[r,t,n])}function Yw(e,t,n){let r=br(o=>{let i=o.getBoundingClientRect();i.x===0&&i.y===0&&i.width===0&&i.height===0&&n()});b.useEffect(()=>{if(!e)return;let o=t===null?null:t instanceof HTMLElement?t:t.current;if(!o)return;let i=er();if(typeof ResizeObserver<"u"){let s=new ResizeObserver(()=>r.current(o));s.observe(o),i.add(()=>s.disconnect())}if(typeof IntersectionObserver<"u"){let s=new IntersectionObserver(()=>r.current(o));s.observe(o),i.add(()=>s.disconnect())}return()=>i.dispose()},[t,r,e])}let Wa=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),Vw=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var Cn=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(Cn||{}),Os=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Os||{}),qw=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(qw||{});function Kw(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Wa)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function Uw(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Vw)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var vf=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(vf||{});function Xw(e,t=0){var n;return e===((n=Ja(e))==null?void 0:n.body)?!1:Qn(t,{0(){return e.matches(Wa)},1(){let r=e;for(;r!==null;){if(r.matches(Wa))return!0;r=r.parentElement}return!1}})}var Gw=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(Gw||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function On(e){e==null||e.focus({preventScroll:!0})}let Zw=["textarea","input"].join(",");function Qw(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,Zw))!=null?n:!1}function Jw(e,t=n=>n){return e.slice().sort((n,r)=>{let o=t(n),i=t(r);if(o===null||i===null)return 0;let s=o.compareDocumentPosition(i);return s&Node.DOCUMENT_POSITION_FOLLOWING?-1:s&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function bo(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:o=[]}={}){let i=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,s=Array.isArray(e)?n?Jw(e):e:t&64?Uw(e):Kw(e);o.length>0&&s.length>1&&(s=s.filter(w=>!o.some(S=>S!=null&&"current"in S?(S==null?void 0:S.current)===w:S===w))),r=r??i.activeElement;let l=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,s.indexOf(r))-1;if(t&4)return Math.max(0,s.indexOf(r))+1;if(t&8)return s.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),f=t&32?{preventScroll:!0}:{},h=0,p=s.length,y;do{if(h>=p||h+p<=0)return 0;let w=u+h;if(t&16)w=(w+p)%p;else{if(w<0)return 3;if(w>=p)return 1}y=s[w],y==null||y.focus(f),h+=l}while(y!==i.activeElement);return t&6&&Qw(y)&&y.select(),2}function wf(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function eb(){return/Android/gi.test(window.navigator.userAgent)}function tb(){return wf()||eb()}function uo(e,t,n,r){let o=br(n);b.useEffect(()=>{if(!e)return;function i(s){o.current(s)}return document.addEventListener(t,i,r),()=>document.removeEventListener(t,i,r)},[e,t,r])}function bf(e,t,n,r){let o=br(n);b.useEffect(()=>{if(!e)return;function i(s){o.current(s)}return window.addEventListener(t,i,r),()=>window.removeEventListener(t,i,r)},[e,t,r])}const Ql=30;function nb(e,t,n){let r=Yr(e,"outside-click"),o=br(n),i=b.useCallback(function(u,f){if(u.defaultPrevented)return;let h=f(u);if(h===null||!h.getRootNode().contains(h)||!h.isConnected)return;let p=function y(w){return typeof w=="function"?y(w()):Array.isArray(w)||w instanceof Set?w:[w]}(t);for(let y of p)if(y!==null&&(y.contains(h)||u.composed&&u.composedPath().includes(y)))return;return!Xw(h,vf.Loose)&&h.tabIndex!==-1&&u.preventDefault(),o.current(u,h)},[o,t]),s=b.useRef(null);uo(r,"pointerdown",u=>{var f,h;s.current=((h=(f=u.composedPath)==null?void 0:f.call(u))==null?void 0:h[0])||u.target},!0),uo(r,"mousedown",u=>{var f,h;s.current=((h=(f=u.composedPath)==null?void 0:f.call(u))==null?void 0:h[0])||u.target},!0),uo(r,"click",u=>{tb()||s.current&&(i(u,()=>s.current),s.current=null)},!0);let l=b.useRef({x:0,y:0});uo(r,"touchstart",u=>{l.current.x=u.touches[0].clientX,l.current.y=u.touches[0].clientY},!0),uo(r,"touchend",u=>{let f={x:u.changedTouches[0].clientX,y:u.changedTouches[0].clientY};if(!(Math.abs(f.x-l.current.x)>=Ql||Math.abs(f.y-l.current.y)>=Ql))return i(u,()=>u.target instanceof HTMLElement?u.target:null)},!0),bf(r,"blur",u=>i(u,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function Lo(...e){return b.useMemo(()=>Ja(...e),[...e])}function xf(e,t,n,r){let o=br(n);b.useEffect(()=>{e=e??window;function i(s){o.current(s)}return e.addEventListener(t,i,r),()=>e.removeEventListener(t,i,r)},[e,t,r])}function rb(){let e;return{before({doc:t}){var n;let r=t.documentElement,o=(n=t.defaultView)!=null?n:window;e=Math.max(0,o.innerWidth-r.clientWidth)},after({doc:t,d:n}){let r=t.documentElement,o=Math.max(0,r.clientWidth-r.offsetWidth),i=Math.max(0,e-o);n.style(r,"paddingRight",`${i}px`)}}}function ob(){return wf()?{before({doc:e,d:t,meta:n}){function r(o){return n.containers.flatMap(i=>i()).some(i=>i.contains(o))}t.microTask(()=>{var o;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let l=er();l.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>l.dispose()))}let i=(o=window.scrollY)!=null?o:window.pageYOffset,s=null;t.addEventListener(e,"click",l=>{if(l.target instanceof HTMLElement)try{let u=l.target.closest("a");if(!u)return;let{hash:f}=new URL(u.href),h=e.querySelector(f);h&&!r(h)&&(s=h)}catch{}},!0),t.addEventListener(e,"touchstart",l=>{if(l.target instanceof HTMLElement)if(r(l.target)){let u=l.target;for(;u.parentElement&&r(u.parentElement);)u=u.parentElement;t.style(u,"overscrollBehavior","contain")}else t.style(l.target,"touchAction","none")}),t.addEventListener(e,"touchmove",l=>{if(l.target instanceof HTMLElement){if(l.target.tagName==="INPUT")return;if(r(l.target)){let u=l.target;for(;u.parentElement&&u.dataset.headlessuiPortal!==""&&!(u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth);)u=u.parentElement;u.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()}},{passive:!1}),t.add(()=>{var l;let u=(l=window.scrollY)!=null?l:window.pageYOffset;i!==u&&window.scrollTo(0,i),s&&s.isConnected&&(s.scrollIntoView({block:"nearest"}),s=null)})})}}:{}}function ab(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function ib(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let fr=gf(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:er(),meta:new Set};return r.count++,r.meta.add(t),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let r={doc:e,d:t,meta:ib(n)},o=[ob(),rb(),ab()];o.forEach(({before:i})=>i==null?void 0:i(r)),o.forEach(({after:i})=>i==null?void 0:i(r))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});fr.subscribe(()=>{let e=fr.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",o=n.count!==0;(o&&!r||!o&&r)&&fr.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&fr.dispatch("TEARDOWN",n)}});function sb(e,t,n=()=>({containers:[]})){let r=yf(fr),o=t?r.get(t):void 0,i=o?o.count>0:!1;return Rt(()=>{if(!(!t||!e))return fr.dispatch("PUSH",t,n),()=>fr.dispatch("POP",t,n)},[e,t]),i}function cb(e,t,n=()=>[document.body]){let r=Yr(e,"scroll-lock");sb(r,t,o=>{var i;return{containers:[...(i=o.containers)!=null?i:[],n]}})}function lb(e=0){let[t,n]=b.useState(e),r=b.useCallback(u=>n(u),[t]),o=b.useCallback(u=>n(f=>f|u),[t]),i=b.useCallback(u=>(t&u)===u,[t]),s=b.useCallback(u=>n(f=>f&~u),[n]),l=b.useCallback(u=>n(f=>f^u),[n]);return{flags:t,setFlag:r,addFlag:o,hasFlag:i,removeFlag:s,toggleFlag:l}}var ub={},Jl,eu;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((Jl=process==null?void 0:ub)==null?void 0:Jl.NODE_ENV)==="test"&&typeof((eu=Element==null?void 0:Element.prototype)==null?void 0:eu.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var db=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(db||{});function fb(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function hb(e,t,n,r){let[o,i]=b.useState(n),{hasFlag:s,addFlag:l,removeFlag:u}=lb(e&&o?3:0),f=b.useRef(!1),h=b.useRef(!1),p=gc();return Rt(()=>{var y;if(e){if(n&&i(!0),!t){n&&l(3);return}return(y=r==null?void 0:r.start)==null||y.call(r,n),mb(t,{inFlight:f,prepare(){h.current?h.current=!1:h.current=f.current,f.current=!0,!h.current&&(n?(l(3),u(4)):(l(4),u(2)))},run(){h.current?n?(u(3),l(4)):(u(4),l(3)):n?u(1):l(1)},done(){var w;h.current&&typeof t.getAnimations=="function"&&t.getAnimations().length>0||(f.current=!1,u(7),n||i(!1),(w=r==null?void 0:r.end)==null||w.call(r,n))}})}},[e,n,t,p]),e?[o,{closed:s(1),enter:s(2),leave:s(4),transition:s(2)||s(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function mb(e,{prepare:t,run:n,done:r,inFlight:o}){let i=er();return gb(e,{prepare:t,inFlight:o}),i.nextFrame(()=>{n(),i.requestAnimationFrame(()=>{i.add(pb(e,r))})}),i.dispose}function pb(e,t){var n,r;let o=er();if(!e)return o.dispose;let i=!1;o.add(()=>{i=!0});let s=(r=(n=e.getAnimations)==null?void 0:n.call(e).filter(l=>l instanceof CSSTransition))!=null?r:[];return s.length===0?(t(),o.dispose):(Promise.allSettled(s.map(l=>l.finished)).then(()=>{i||t()}),o.dispose)}function gb(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let r=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=r}function vc(e,t){let n=b.useRef([]),r=ct(e);b.useEffect(()=>{let o=[...n.current];for(let[i,s]of t.entries())if(n.current[i]!==s){let l=r(t,o);return n.current=t,l}},[r,...t])}let ti=b.createContext(null);ti.displayName="OpenClosedContext";var rn=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(rn||{});function ni(){return b.useContext(ti)}function yb({value:e,children:t}){return B.createElement(ti.Provider,{value:e},t)}function vb({children:e}){return B.createElement(ti.Provider,{value:null},e)}function wb(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Un=[];wb(()=>{function e(t){if(!(t.target instanceof HTMLElement)||t.target===document.body||Un[0]===t.target)return;let n=t.target;n=n.closest(Wa),Un.unshift(n??t.target),Un=Un.filter(r=>r!=null&&r.isConnected),Un.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function Sf(e){let t=ct(e),n=b.useRef(!1);b.useEffect(()=>(n.current=!1,()=>{n.current=!0,ei(()=>{n.current&&t()})}),[t])}function bb(){let e=typeof document>"u";return"useSyncExternalStore"in rl?(t=>t.useSyncExternalStore)(rl)(()=>()=>{},()=>!1,()=>!e):!1}function Fo(){let e=bb(),[t,n]=b.useState(gr.isHandoffComplete);return t&&gr.isHandoffComplete===!1&&n(!1),b.useEffect(()=>{t!==!0&&n(!0)},[t]),b.useEffect(()=>gr.handoff(),[]),e?!1:t}let kf=b.createContext(!1);function xb(){return b.useContext(kf)}function tu(e){return B.createElement(kf.Provider,{value:e.force},e.children)}function Sb(e){let t=xb(),n=b.useContext(Ef),r=Lo(e),[o,i]=b.useState(()=>{var s;if(!t&&n!==null)return(s=n.current)!=null?s:null;if(gr.isServer)return null;let l=r==null?void 0:r.getElementById("headlessui-portal-root");if(l)return l;if(r===null)return null;let u=r.createElement("div");return u.setAttribute("id","headlessui-portal-root"),r.body.appendChild(u)});return b.useEffect(()=>{o!==null&&(r!=null&&r.body.contains(o)||r==null||r.body.appendChild(o))},[o,r]),b.useEffect(()=>{t||n!==null&&i(n.current)},[n,i,t]),o}let _f=b.Fragment,kb=Ht(function(e,t){let n=e,r=b.useRef(null),o=wn(Mw(p=>{r.current=p}),t),i=Lo(r),s=Sb(r),[l]=b.useState(()=>{var p;return gr.isServer?null:(p=i==null?void 0:i.createElement("div"))!=null?p:null}),u=b.useContext(js),f=Fo();Rt(()=>{!s||!l||s.contains(l)||(l.setAttribute("data-headlessui-portal",""),s.appendChild(l))},[s,l]),Rt(()=>{if(l&&u)return u.register(l)},[u,l]),Sf(()=>{var p;!s||!l||(l instanceof Node&&s.contains(l)&&s.removeChild(l),s.childNodes.length<=0&&((p=s.parentElement)==null||p.removeChild(s)))});let h=Qt();return f?!s||!l?null:Tu.createPortal(h({ourProps:{ref:o},theirProps:n,slot:{},defaultTag:_f,name:"Portal"}),l):null});function _b(e,t){let n=wn(t),{enabled:r=!0,...o}=e,i=Qt();return r?B.createElement(kb,{...o,ref:n}):i({ourProps:{ref:n},theirProps:o,slot:{},defaultTag:_f,name:"Portal"})}let Eb=b.Fragment,Ef=b.createContext(null);function Nb(e,t){let{target:n,...r}=e,o={ref:wn(t)},i=Qt();return B.createElement(Ef.Provider,{value:n},i({ourProps:o,theirProps:r,defaultTag:Eb,name:"Popover.Group"}))}let js=b.createContext(null);function Cb(){let e=b.useContext(js),t=b.useRef([]),n=ct(i=>(t.current.push(i),e&&e.register(i),()=>r(i))),r=ct(i=>{let s=t.current.indexOf(i);s!==-1&&t.current.splice(s,1),e&&e.unregister(i)}),o=b.useMemo(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,b.useMemo(()=>function({children:i}){return B.createElement(js.Provider,{value:o},i)},[o])]}let Tb=Ht(_b),Nf=Ht(Nb),Db=Object.assign(Tb,{Group:Nf});function Ob(e,t=typeof document<"u"?document.defaultView:null,n){let r=Yr(e,"escape");xf(t,"keydown",o=>{r&&(o.defaultPrevented||o.key===pf.Escape&&n(o))})}function jb(){var e;let[t]=b.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=b.useState((e=t==null?void 0:t.matches)!=null?e:!1);return Rt(()=>{if(!t)return;function o(i){r(i.matches)}return t.addEventListener("change",o),()=>t.removeEventListener("change",o)},[t]),n}function Pb({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let r=Lo(n),o=ct(()=>{var i,s;let l=[];for(let u of e)u!==null&&(u instanceof HTMLElement?l.push(u):"current"in u&&u.current instanceof HTMLElement&&l.push(u.current));if(t!=null&&t.current)for(let u of t.current)l.push(u);for(let u of(i=r==null?void 0:r.querySelectorAll("html > *, body > *"))!=null?i:[])u!==document.body&&u!==document.head&&u instanceof HTMLElement&&u.id!=="headlessui-portal-root"&&(n&&(u.contains(n)||u.contains((s=n==null?void 0:n.getRootNode())==null?void 0:s.host))||l.some(f=>u.contains(f))||l.push(u));return l});return{resolveContainers:o,contains:ct(i=>o().some(s=>s.contains(i)))}}let Cf=b.createContext(null);function nu({children:e,node:t}){let[n,r]=b.useState(null),o=Tf(t??n);return B.createElement(Cf.Provider,{value:o},e,o===null&&B.createElement(Ts,{features:Fa.Hidden,ref:i=>{var s,l;if(i){for(let u of(l=(s=Ja(i))==null?void 0:s.querySelectorAll("html > *, body > *"))!=null?l:[])if(u!==document.body&&u!==document.head&&u instanceof HTMLElement&&u!=null&&u.contains(i)){r(u);break}}}}))}function Tf(e=null){var t;return(t=b.useContext(Cf))!=null?t:e}function wc(){let e=b.useRef(!1);return Rt(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var yo=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(yo||{});function Mb(){let e=b.useRef(0);return bf(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function Df(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)n.current instanceof HTMLElement&&t.add(n.current);return t}let Ib="div";var lr=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(lr||{});function Ab(e,t){let n=b.useRef(null),r=wn(n,t),{initialFocus:o,initialFocusFallback:i,containers:s,features:l=15,...u}=e;Fo()||(l=0);let f=Lo(n);Fb(l,{ownerDocument:f});let h=Wb(l,{ownerDocument:f,container:n,initialFocus:o,initialFocusFallback:i});Bb(l,{ownerDocument:f,container:n,containers:s,previousActiveElement:h});let p=Mb(),y=ct(R=>{let I=n.current;I&&(T=>T())(()=>{Qn(p.current,{[yo.Forwards]:()=>{bo(I,Cn.First,{skipElements:[R.relatedTarget,i]})},[yo.Backwards]:()=>{bo(I,Cn.Last,{skipElements:[R.relatedTarget,i]})}})})}),w=Yr(!!(l&2),"focus-trap#tab-lock"),S=gc(),k=b.useRef(!1),N={ref:r,onKeyDown(R){R.key=="Tab"&&(k.current=!0,S.requestAnimationFrame(()=>{k.current=!1}))},onBlur(R){if(!(l&4))return;let I=Df(s);n.current instanceof HTMLElement&&I.add(n.current);let T=R.relatedTarget;T instanceof HTMLElement&&T.dataset.headlessuiFocusGuard!=="true"&&(Of(I,T)||(k.current?bo(n.current,Qn(p.current,{[yo.Forwards]:()=>Cn.Next,[yo.Backwards]:()=>Cn.Previous})|Cn.WrapAround,{relativeTo:R.target}):R.target instanceof HTMLElement&&On(R.target)))}},C=Qt();return B.createElement(B.Fragment,null,w&&B.createElement(Ts,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:y,features:Fa.Focusable}),C({ourProps:N,theirProps:u,defaultTag:Ib,name:"FocusTrap"}),w&&B.createElement(Ts,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:y,features:Fa.Focusable}))}let $b=Ht(Ab),Rb=Object.assign($b,{features:lr});function Lb(e=!0){let t=b.useRef(Un.slice());return vc(([n],[r])=>{r===!0&&n===!1&&ei(()=>{t.current.splice(0)}),r===!1&&n===!0&&(t.current=Un.slice())},[e,Un,t]),ct(()=>{var n;return(n=t.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function Fb(e,{ownerDocument:t}){let n=!!(e&8),r=Lb(n);vc(()=>{n||(t==null?void 0:t.activeElement)===(t==null?void 0:t.body)&&On(r())},[n]),Sf(()=>{n&&On(r())})}function Wb(e,{ownerDocument:t,container:n,initialFocus:r,initialFocusFallback:o}){let i=b.useRef(null),s=Yr(!!(e&1),"focus-trap#initial-focus"),l=wc();return vc(()=>{if(e===0)return;if(!s){o!=null&&o.current&&On(o.current);return}let u=n.current;u&&ei(()=>{if(!l.current)return;let f=t==null?void 0:t.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===f){i.current=f;return}}else if(u.contains(f)){i.current=f;return}if(r!=null&&r.current)On(r.current);else{if(e&16){if(bo(u,Cn.First|Cn.AutoFocus)!==Os.Error)return}else if(bo(u,Cn.First)!==Os.Error)return;if(o!=null&&o.current&&(On(o.current),(t==null?void 0:t.activeElement)===o.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}i.current=t==null?void 0:t.activeElement})},[o,s,e]),i}function Bb(e,{ownerDocument:t,container:n,containers:r,previousActiveElement:o}){let i=wc(),s=!!(e&4);xf(t==null?void 0:t.defaultView,"focus",l=>{if(!s||!i.current)return;let u=Df(r);n.current instanceof HTMLElement&&u.add(n.current);let f=o.current;if(!f)return;let h=l.target;h&&h instanceof HTMLElement?Of(u,h)?(o.current=h,On(h)):(l.preventDefault(),l.stopPropagation(),On(f)):On(o.current)},!0)}function Of(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function jf(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||((t=e.as)!=null?t:Mf)!==b.Fragment||B.Children.count(e.children)===1}let ri=b.createContext(null);ri.displayName="TransitionContext";var Hb=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Hb||{});function zb(){let e=b.useContext(ri);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function Yb(){let e=b.useContext(oi);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let oi=b.createContext(null);oi.displayName="NestingContext";function ai(e){return"children"in e?ai(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function Pf(e,t){let n=br(e),r=b.useRef([]),o=wc(),i=gc(),s=ct((w,S=Gn.Hidden)=>{let k=r.current.findIndex(({el:N})=>N===w);k!==-1&&(Qn(S,{[Gn.Unmount](){r.current.splice(k,1)},[Gn.Hidden](){r.current[k].state="hidden"}}),i.microTask(()=>{var N;!ai(r)&&o.current&&((N=n.current)==null||N.call(n))}))}),l=ct(w=>{let S=r.current.find(({el:k})=>k===w);return S?S.state!=="visible"&&(S.state="visible"):r.current.push({el:w,state:"visible"}),()=>s(w,Gn.Unmount)}),u=b.useRef([]),f=b.useRef(Promise.resolve()),h=b.useRef({enter:[],leave:[]}),p=ct((w,S,k)=>{u.current.splice(0),t&&(t.chains.current[S]=t.chains.current[S].filter(([N])=>N!==w)),t==null||t.chains.current[S].push([w,new Promise(N=>{u.current.push(N)})]),t==null||t.chains.current[S].push([w,new Promise(N=>{Promise.all(h.current[S].map(([C,R])=>R)).then(()=>N())})]),S==="enter"?f.current=f.current.then(()=>t==null?void 0:t.wait.current).then(()=>k(S)):k(S)}),y=ct((w,S,k)=>{Promise.all(h.current[S].splice(0).map(([N,C])=>C)).then(()=>{var N;(N=u.current.shift())==null||N()}).then(()=>k(S))});return b.useMemo(()=>({children:r,register:l,unregister:s,onStart:p,onStop:y,wait:f,chains:h}),[l,s,r,p,y,h,f])}let Mf=b.Fragment,If=La.RenderStrategy;function Vb(e,t){var n,r;let{transition:o=!0,beforeEnter:i,afterEnter:s,beforeLeave:l,afterLeave:u,enter:f,enterFrom:h,enterTo:p,entered:y,leave:w,leaveFrom:S,leaveTo:k,...N}=e,[C,R]=b.useState(null),I=b.useRef(null),T=jf(e),X=wn(...T?[I,t,R]:t===null?[]:[t]),q=(n=N.unmount)==null||n?Gn.Unmount:Gn.Hidden,{show:V,appear:J,initial:U}=zb(),[te,K]=b.useState(V?"visible":"hidden"),oe=Yb(),{register:ce,unregister:_}=oe;Rt(()=>ce(I),[ce,I]),Rt(()=>{if(q===Gn.Hidden&&I.current){if(V&&te!=="visible"){K("visible");return}return Qn(te,{hidden:()=>_(I),visible:()=>ce(I)})}},[te,I,ce,_,V,q]);let M=Fo();Rt(()=>{if(T&&M&&te==="visible"&&I.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[I,te,M,T]);let P=U&&!J,G=J&&V&&U,ie=b.useRef(!1),j=Pf(()=>{ie.current||(K("hidden"),_(I))},oe),Q=ct(Oe=>{ie.current=!0;let Pe=Oe?"enter":"leave";j.onStart(I,Pe,he=>{he==="enter"?i==null||i():he==="leave"&&(l==null||l())})}),ae=ct(Oe=>{let Pe=Oe?"enter":"leave";ie.current=!1,j.onStop(I,Pe,he=>{he==="enter"?s==null||s():he==="leave"&&(u==null||u())}),Pe==="leave"&&!ai(j)&&(K("hidden"),_(I))});b.useEffect(()=>{T&&o||(Q(V),ae(V))},[V,T,o]);let se=!(!o||!T||!M||P),[,fe]=hb(se,C,V,{start:Q,end:ae}),ve=sr({ref:X,className:((r=Cs(N.className,G&&f,G&&h,fe.enter&&f,fe.enter&&fe.closed&&h,fe.enter&&!fe.closed&&p,fe.leave&&w,fe.leave&&!fe.closed&&S,fe.leave&&fe.closed&&k,!fe.transition&&V&&y))==null?void 0:r.trim())||void 0,...fb(fe)}),ke=0;te==="visible"&&(ke|=rn.Open),te==="hidden"&&(ke|=rn.Closed),fe.enter&&(ke|=rn.Opening),fe.leave&&(ke|=rn.Closing);let Te=Qt();return B.createElement(oi.Provider,{value:j},B.createElement(yb,{value:ke},Te({ourProps:ve,theirProps:N,defaultTag:Mf,features:If,visible:te==="visible",name:"Transition.Child"})))}function qb(e,t){let{show:n,appear:r=!1,unmount:o=!0,...i}=e,s=b.useRef(null),l=jf(e),u=wn(...l?[s,t]:t===null?[]:[t]);Fo();let f=ni();if(n===void 0&&f!==null&&(n=(f&rn.Open)===rn.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[h,p]=b.useState(n?"visible":"hidden"),y=Pf(()=>{n||p("hidden")}),[w,S]=b.useState(!0),k=b.useRef([n]);Rt(()=>{w!==!1&&k.current[k.current.length-1]!==n&&(k.current.push(n),S(!1))},[k,n]);let N=b.useMemo(()=>({show:n,appear:r,initial:w}),[n,r,w]);Rt(()=>{n?p("visible"):!ai(y)&&s.current!==null&&p("hidden")},[n,y]);let C={unmount:o},R=ct(()=>{var X;w&&S(!1),(X=e.beforeEnter)==null||X.call(e)}),I=ct(()=>{var X;w&&S(!1),(X=e.beforeLeave)==null||X.call(e)}),T=Qt();return B.createElement(oi.Provider,{value:y},B.createElement(ri.Provider,{value:N},T({ourProps:{...C,as:b.Fragment,children:B.createElement(Af,{ref:u,...C,...i,beforeEnter:R,beforeLeave:I})},theirProps:{},defaultTag:b.Fragment,features:If,visible:h==="visible",name:"Transition"})))}function Kb(e,t){let n=b.useContext(ri)!==null,r=ni()!==null;return B.createElement(B.Fragment,null,!n&&r?B.createElement(Ps,{ref:t,...e}):B.createElement(Af,{ref:t,...e}))}let Ps=Ht(qb),Af=Ht(Vb),bc=Ht(Kb),Ub=Object.assign(Ps,{Child:bc,Root:Ps});var Xb=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Xb||{}),Gb=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(Gb||{});let Zb={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},xc=b.createContext(null);xc.displayName="DialogContext";function ii(e){let t=b.useContext(xc);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ii),n}return t}function Qb(e,t){return Qn(t.type,Zb,e,t)}let ru=Ht(function(e,t){let n=b.useId(),{id:r=`headlessui-dialog-${n}`,open:o,onClose:i,initialFocus:s,role:l="dialog",autoFocus:u=!0,__demoMode:f=!1,unmount:h=!1,...p}=e,y=b.useRef(!1);l=function(){return l==="dialog"||l==="alertdialog"?l:(y.current||(y.current=!0,console.warn(`Invalid role [${l}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let w=ni();o===void 0&&w!==null&&(o=(w&rn.Open)===rn.Open);let S=b.useRef(null),k=wn(S,t),N=Lo(S),C=o?0:1,[R,I]=b.useReducer(Qb,{titleId:null,descriptionId:null,panelRef:b.createRef()}),T=ct(()=>i(!1)),X=ct(ae=>I({type:0,id:ae})),q=Fo()?C===0:!1,[V,J]=Cb(),U={get current(){var ae;return(ae=R.panelRef.current)!=null?ae:S.current}},te=Tf(),{resolveContainers:K}=Pb({mainTreeNode:te,portals:V,defaultContainers:[U]}),oe=w!==null?(w&rn.Closing)===rn.Closing:!1;zw(f||oe?!1:q,{allowed:ct(()=>{var ae,se;return[(se=(ae=S.current)==null?void 0:ae.closest("[data-headlessui-portal]"))!=null?se:null]}),disallowed:ct(()=>{var ae;return[(ae=te==null?void 0:te.closest("body > *:not(#headlessui-portal-root)"))!=null?ae:null]})}),nb(q,K,ae=>{ae.preventDefault(),T()}),Ob(q,N==null?void 0:N.defaultView,ae=>{ae.preventDefault(),ae.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),T()}),cb(f||oe?!1:q,N,K),Yw(q,S,T);let[ce,_]=Iw(),M=b.useMemo(()=>[{dialogState:C,close:T,setTitleId:X,unmount:h},R],[C,R,T,X,h]),P=b.useMemo(()=>({open:C===0}),[C]),G={ref:k,id:r,role:l,tabIndex:-1,"aria-modal":f?void 0:C===0?!0:void 0,"aria-labelledby":R.titleId,"aria-describedby":ce,unmount:h},ie=!jb(),j=lr.None;q&&!f&&(j|=lr.RestoreFocus,j|=lr.TabLock,u&&(j|=lr.AutoFocus),ie&&(j|=lr.InitialFocus));let Q=Qt();return B.createElement(vb,null,B.createElement(tu,{force:!0},B.createElement(Db,null,B.createElement(xc.Provider,{value:M},B.createElement(Nf,{target:S},B.createElement(tu,{force:!1},B.createElement(_,{slot:P},B.createElement(J,null,B.createElement(Rb,{initialFocus:s,initialFocusFallback:S,containers:K,features:j},B.createElement(Ww,{value:T},Q({ourProps:G,theirProps:p,slot:P,defaultTag:Jb,features:ex,visible:C===0,name:"Dialog"})))))))))))}),Jb="div",ex=La.RenderStrategy|La.Static;function tx(e,t){let{transition:n=!1,open:r,...o}=e,i=ni(),s=e.hasOwnProperty("open")||i!==null,l=e.hasOwnProperty("onClose");if(!s&&!l)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!s)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!l)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!i&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(r!==void 0||n)&&!o.static?B.createElement(nu,null,B.createElement(Ub,{show:r,transition:n,unmount:o.unmount},B.createElement(ru,{ref:t,...o}))):B.createElement(nu,null,B.createElement(ru,{ref:t,open:r,...o}))}let nx="div";function rx(e,t){let n=b.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:o=!1,...i}=e,[{dialogState:s,unmount:l},u]=ii("Dialog.Panel"),f=wn(t,u.panelRef),h=b.useMemo(()=>({open:s===0}),[s]),p=ct(N=>{N.stopPropagation()}),y={ref:f,id:r,onClick:p},w=o?bc:b.Fragment,S=o?{unmount:l}:{},k=Qt();return B.createElement(w,{...S},k({ourProps:y,theirProps:i,slot:h,defaultTag:nx,name:"Dialog.Panel"}))}let ox="div";function ax(e,t){let{transition:n=!1,...r}=e,[{dialogState:o,unmount:i}]=ii("Dialog.Backdrop"),s=b.useMemo(()=>({open:o===0}),[o]),l={ref:t,"aria-hidden":!0},u=n?bc:b.Fragment,f=n?{unmount:i}:{},h=Qt();return B.createElement(u,{...f},h({ourProps:l,theirProps:r,slot:s,defaultTag:ox,name:"Dialog.Backdrop"}))}let ix="h2";function sx(e,t){let n=b.useId(),{id:r=`headlessui-dialog-title-${n}`,...o}=e,[{dialogState:i,setTitleId:s}]=ii("Dialog.Title"),l=wn(t);b.useEffect(()=>(s(r),()=>s(null)),[r,s]);let u=b.useMemo(()=>({open:i===0}),[i]),f={ref:l,id:r};return Qt()({ourProps:f,theirProps:o,slot:u,defaultTag:ix,name:"Dialog.Title"})}let cx=Ht(tx),$f=Ht(rx);Ht(ax);let lx=Ht(sx),Ms=Object.assign(cx,{Panel:$f,Title:lx,Description:Lw});const Nn=[{id:"WorkflowType",label:"WorkflowType",type:"text"},{id:"WorkflowId",label:"WorkflowId",type:"text"},{id:"RunId",label:"RunId",type:"text"},{id:"ExecutionStatus",label:"Status",type:"status"},{id:"StartTime",label:"StartTime",type:"datetime"},{id:"CloseTime",label:"CloseTime",type:"datetime"},{id:"TaskQueue",label:"TaskQueue",type:"text"}],ou=[{id:"equals",label:"=",alternatives:["equals","is"],searchOperator:"="},{id:"notEquals",label:"!=",alternatives:["not equals","is not"],searchOperator:"!="},{id:"starts_with",label:"starts with",alternatives:["startswith","start"],searchOperator:"starts_with"},{id:"isNull",label:"is null",alternatives:["null"],searchOperator:"is null"},{id:"isNotNull",label:"is not null",alternatives:["not null"],searchOperator:"is not null"},{id:"greaterThan",label:">",alternatives:["after","greater than"],searchOperator:">"},{id:"lessThan",label:"<",alternatives:["before","less than"],searchOperator:"<"},{id:"between",label:"between",alternatives:[],searchOperator:"between"}],Ji=[{value:"Completed",color:"text-green-700 bg-green-50"},{value:"Running",color:"text-blue-700 bg-blue-50"},{value:"TimedOut",color:"text-orange-700 bg-orange-50"},{value:"Failed",color:"text-red-700 bg-red-50"},{value:"Canceled",color:"text-gray-700 bg-gray-50"},{value:"Terminated",color:"text-yellow-700 bg-yellow-50"},{value:"Continued as New",color:"text-pink-700 bg-pink-50"}],ba=[{id:"equals",label:"=",alternatives:["==","is","="]},{id:"between",label:"between",alternatives:["between"]},{id:"greater",label:">",alternatives:["gt",">"]},{id:"greaterOrEqual",label:">=",alternatives:["gte",">="]},{id:"less",label:"<",alternatives:["lt","<"]},{id:"lessOrEqual",label:"<=",alternatives:["lte","<="]}],Rf=6048e5,ux=864e5,au=Symbol.for("constructDateFrom");function Jn(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&au in e?e[au](t):e instanceof Date?new e.constructor(t):new Date(t)}function sn(e,t){return Jn(t||e,e)}let dx={};function si(){return dx}function jo(e,t){var l,u,f,h;const n=si(),r=(t==null?void 0:t.weekStartsOn)??((u=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((h=(f=n.locale)==null?void 0:f.options)==null?void 0:h.weekStartsOn)??0,o=sn(e,t==null?void 0:t.in),i=o.getDay(),s=(i<r?7:0)+i-r;return o.setDate(o.getDate()-s),o.setHours(0,0,0,0),o}function Ba(e,t){return jo(e,{...t,weekStartsOn:1})}function Lf(e,t){const n=sn(e,t==null?void 0:t.in),r=n.getFullYear(),o=Jn(n,0);o.setFullYear(r+1,0,4),o.setHours(0,0,0,0);const i=Ba(o),s=Jn(n,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const l=Ba(s);return n.getTime()>=i.getTime()?r+1:n.getTime()>=l.getTime()?r:r-1}function iu(e){const t=sn(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function fx(e,...t){const n=Jn.bind(null,t.find(r=>typeof r=="object"));return t.map(n)}function su(e,t){const n=sn(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function hx(e,t,n){const[r,o]=fx(n==null?void 0:n.in,e,t),i=su(r),s=su(o),l=+i-iu(i),u=+s-iu(s);return Math.round((l-u)/ux)}function mx(e,t){const n=Lf(e,t),r=Jn(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Ba(r)}function px(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function gx(e){return!(!px(e)&&typeof e!="number"||isNaN(+sn(e)))}function yx(e,t){const n=sn(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const vx={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},wx=(e,t,n)=>{let r;const o=vx[e];return typeof o=="string"?r=o:t===1?r=o.one:r=o.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function es(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const bx={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},xx={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Sx={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},kx={date:es({formats:bx,defaultWidth:"full"}),time:es({formats:xx,defaultWidth:"full"}),dateTime:es({formats:Sx,defaultWidth:"full"})},_x={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Ex=(e,t,n,r)=>_x[e];function fo(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let o;if(r==="formatting"&&e.formattingValues){const s=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):s;o=e.formattingValues[l]||e.formattingValues[s]}else{const s=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;o=e.values[l]||e.values[s]}const i=e.argumentCallback?e.argumentCallback(t):t;return o[i]}}const Nx={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Cx={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Tx={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Dx={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Ox={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},jx={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Px=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Mx={ordinalNumber:Px,era:fo({values:Nx,defaultWidth:"wide"}),quarter:fo({values:Cx,defaultWidth:"wide",argumentCallback:e=>e-1}),month:fo({values:Tx,defaultWidth:"wide"}),day:fo({values:Dx,defaultWidth:"wide"}),dayPeriod:fo({values:Ox,defaultWidth:"wide",formattingValues:jx,defaultFormattingWidth:"wide"})};function ho(e){return(t,n={})=>{const r=n.width,o=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(o);if(!i)return null;const s=i[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(l)?Ax(l,p=>p.test(s)):Ix(l,p=>p.test(s));let f;f=e.valueCallback?e.valueCallback(u):u,f=n.valueCallback?n.valueCallback(f):f;const h=t.slice(s.length);return{value:f,rest:h}}}function Ix(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function Ax(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function $x(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const o=r[0],i=t.match(e.parsePattern);if(!i)return null;let s=e.valueCallback?e.valueCallback(i[0]):i[0];s=n.valueCallback?n.valueCallback(s):s;const l=t.slice(o.length);return{value:s,rest:l}}}const Rx=/^(\d+)(th|st|nd|rd)?/i,Lx=/\d+/i,Fx={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Wx={any:[/^b/i,/^(a|c)/i]},Bx={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Hx={any:[/1/i,/2/i,/3/i,/4/i]},zx={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Yx={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Vx={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},qx={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Kx={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ux={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Xx={ordinalNumber:$x({matchPattern:Rx,parsePattern:Lx,valueCallback:e=>parseInt(e,10)}),era:ho({matchPatterns:Fx,defaultMatchWidth:"wide",parsePatterns:Wx,defaultParseWidth:"any"}),quarter:ho({matchPatterns:Bx,defaultMatchWidth:"wide",parsePatterns:Hx,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ho({matchPatterns:zx,defaultMatchWidth:"wide",parsePatterns:Yx,defaultParseWidth:"any"}),day:ho({matchPatterns:Vx,defaultMatchWidth:"wide",parsePatterns:qx,defaultParseWidth:"any"}),dayPeriod:ho({matchPatterns:Kx,defaultMatchWidth:"any",parsePatterns:Ux,defaultParseWidth:"any"})},Gx={code:"en-US",formatDistance:wx,formatLong:kx,formatRelative:Ex,localize:Mx,match:Xx,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Zx(e,t){const n=sn(e,t==null?void 0:t.in);return hx(n,yx(n))+1}function Qx(e,t){const n=sn(e,t==null?void 0:t.in),r=+Ba(n)-+mx(n);return Math.round(r/Rf)+1}function Ff(e,t){var h,p,y,w;const n=sn(e,t==null?void 0:t.in),r=n.getFullYear(),o=si(),i=(t==null?void 0:t.firstWeekContainsDate)??((p=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??o.firstWeekContainsDate??((w=(y=o.locale)==null?void 0:y.options)==null?void 0:w.firstWeekContainsDate)??1,s=Jn((t==null?void 0:t.in)||e,0);s.setFullYear(r+1,0,i),s.setHours(0,0,0,0);const l=jo(s,t),u=Jn((t==null?void 0:t.in)||e,0);u.setFullYear(r,0,i),u.setHours(0,0,0,0);const f=jo(u,t);return+n>=+l?r+1:+n>=+f?r:r-1}function Jx(e,t){var l,u,f,h;const n=si(),r=(t==null?void 0:t.firstWeekContainsDate)??((u=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(f=n.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??1,o=Ff(e,t),i=Jn((t==null?void 0:t.in)||e,0);return i.setFullYear(o,0,r),i.setHours(0,0,0,0),jo(i,t)}function e1(e,t){const n=sn(e,t==null?void 0:t.in),r=+jo(n,t)-+Jx(n,t);return Math.round(r/Rf)+1}function Ge(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Yn={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Ge(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Ge(n+1,2)},d(e,t){return Ge(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Ge(e.getHours()%12||12,t.length)},H(e,t){return Ge(e.getHours(),t.length)},m(e,t){return Ge(e.getMinutes(),t.length)},s(e,t){return Ge(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),o=Math.trunc(r*Math.pow(10,n-3));return Ge(o,t.length)}},Pr={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},cu={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),o=r>0?r:1-r;return n.ordinalNumber(o,{unit:"year"})}return Yn.y(e,t)},Y:function(e,t,n,r){const o=Ff(e,r),i=o>0?o:1-o;if(t==="YY"){const s=i%100;return Ge(s,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):Ge(i,t.length)},R:function(e,t){const n=Lf(e);return Ge(n,t.length)},u:function(e,t){const n=e.getFullYear();return Ge(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Ge(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Ge(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Yn.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Ge(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const o=e1(e,r);return t==="wo"?n.ordinalNumber(o,{unit:"week"}):Ge(o,t.length)},I:function(e,t,n){const r=Qx(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):Ge(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Yn.d(e,t)},D:function(e,t,n){const r=Zx(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Ge(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const o=e.getDay(),i=(o-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Ge(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const o=e.getDay(),i=(o-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Ge(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),o=r===0?7:r;switch(t){case"i":return String(o);case"ii":return Ge(o,t.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const o=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let o;switch(r===12?o=Pr.noon:r===0?o=Pr.midnight:o=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let o;switch(r>=17?o=Pr.evening:r>=12?o=Pr.afternoon:r>=4?o=Pr.morning:o=Pr.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Yn.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Yn.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Ge(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):Ge(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Yn.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Yn.s(e,t)},S:function(e,t){return Yn.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return uu(r);case"XXXX":case"XX":return cr(r);case"XXXXX":case"XXX":default:return cr(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return uu(r);case"xxxx":case"xx":return cr(r);case"xxxxx":case"xxx":default:return cr(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+lu(r,":");case"OOOO":default:return"GMT"+cr(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+lu(r,":");case"zzzz":default:return"GMT"+cr(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return Ge(r,t.length)},T:function(e,t,n){return Ge(+e,t.length)}};function lu(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),o=Math.trunc(r/60),i=r%60;return i===0?n+String(o):n+String(o)+t+Ge(i,2)}function uu(e,t){return e%60===0?(e>0?"-":"+")+Ge(Math.abs(e)/60,2):cr(e,t)}function cr(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),o=Ge(Math.trunc(r/60),2),i=Ge(r%60,2);return n+o+t+i}const du=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Wf=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},t1=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],o=n[2];if(!o)return du(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",du(r,t)).replace("{{time}}",Wf(o,t))},n1={p:Wf,P:t1},r1=/^D+$/,o1=/^Y+$/,a1=["D","DD","YY","YYYY"];function i1(e){return r1.test(e)}function s1(e){return o1.test(e)}function c1(e,t,n){const r=l1(e,t,n);if(console.warn(r),a1.includes(e))throw new RangeError(r)}function l1(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const u1=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,d1=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,f1=/^'([^]*?)'?$/,h1=/''/g,m1=/[a-zA-Z]/;function $t(e,t,n){var h,p,y,w;const r=si(),o=r.locale??Gx,i=r.firstWeekContainsDate??((p=(h=r.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,s=r.weekStartsOn??((w=(y=r.locale)==null?void 0:y.options)==null?void 0:w.weekStartsOn)??0,l=sn(e,n==null?void 0:n.in);if(!gx(l))throw new RangeError("Invalid time value");let u=t.match(d1).map(S=>{const k=S[0];if(k==="p"||k==="P"){const N=n1[k];return N(S,o.formatLong)}return S}).join("").match(u1).map(S=>{if(S==="''")return{isToken:!1,value:"'"};const k=S[0];if(k==="'")return{isToken:!1,value:p1(S)};if(cu[k])return{isToken:!0,value:S};if(k.match(m1))throw new RangeError("Format string contains an unescaped latin alphabet character `"+k+"`");return{isToken:!1,value:S}});o.localize.preprocessor&&(u=o.localize.preprocessor(l,u));const f={firstWeekContainsDate:i,weekStartsOn:s,locale:o};return u.map(S=>{if(!S.isToken)return S.value;const k=S.value;(s1(k)||i1(k))&&c1(k,t,String(e));const N=cu[k[0]];return N(l,k,o.localize,f)}).join("")}function p1(e){const t=e.match(f1);return t?t[1].replace(h1,"'"):e}const g1=(e,t,n,r)=>{if(n==="length"||n==="prototype"||n==="arguments"||n==="caller")return;const o=Object.getOwnPropertyDescriptor(e,n),i=Object.getOwnPropertyDescriptor(t,n);!y1(o,i)&&r||Object.defineProperty(e,n,i)},y1=function(e,t){return e===void 0||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},v1=(e,t)=>{const n=Object.getPrototypeOf(t);n!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,n)},w1=(e,t)=>`/* Wrapped ${e}*/
${t}`,b1=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),x1=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),S1=(e,t,n)=>{const r=n===""?"":`with ${n.trim()}() `,o=w1.bind(null,r,t.toString());Object.defineProperty(o,"name",x1),Object.defineProperty(e,"toString",{...b1,value:o})},k1=(e,t,{ignoreNonConfigurable:n=!1}={})=>{const{name:r}=e;for(const o of Reflect.ownKeys(t))g1(e,t,o,n);return v1(e,t),S1(e,t,r),e};var _1=k1,Is={exports:{}},E1=()=>{const e={};return e.promise=new Promise((t,n)=>{e.resolve=t,e.reject=n}),e};(function(e,t){var n=Mr&&Mr.__awaiter||function(s,l,u,f){return new(u||(u=Promise))(function(h,p){function y(k){try{S(f.next(k))}catch(N){p(N)}}function w(k){try{S(f.throw(k))}catch(N){p(N)}}function S(k){k.done?h(k.value):new u(function(N){N(k.value)}).then(y,w)}S((f=f.apply(s,l||[])).next())})},r=Mr&&Mr.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(E1);function i(s,l="maxAge"){let u,f,h;const p=()=>n(this,void 0,void 0,function*(){if(u!==void 0)return;const S=k=>n(this,void 0,void 0,function*(){h=o.default();const N=k[1][l]-Date.now();if(N<=0){s.delete(k[0]),h.resolve();return}return u=k[0],f=setTimeout(()=>{s.delete(k[0]),h&&h.resolve()},N),typeof f.unref=="function"&&f.unref(),h.promise});try{for(const k of s)yield S(k)}catch{}u=void 0}),y=()=>{u=void 0,f!==void 0&&(clearTimeout(f),f=void 0),h!==void 0&&(h.reject(void 0),h=void 0)},w=s.set.bind(s);return s.set=(S,k)=>{s.has(S)&&s.delete(S);const N=w(S,k);return u&&u===S&&y(),p(),N},p(),s}t.default=i,e.exports=i,e.exports.default=i})(Is,Is.exports);var N1=Is.exports;const C1=_1,T1=N1,ts=new WeakMap,Bf=new WeakMap,Ha=(e,{cacheKey:t,cache:n=new Map,maxAge:r}={})=>{typeof r=="number"&&T1(n);const o=function(...i){const s=t?t(i):i[0],l=n.get(s);if(l)return l.data;const u=e.apply(this,i);return n.set(s,{data:u,maxAge:r?Date.now()+r:Number.POSITIVE_INFINITY}),u};return C1(o,e,{ignoreNonConfigurable:!0}),Bf.set(o,n),o};Ha.decorator=(e={})=>(t,n,r)=>{const o=t[n];if(typeof o!="function")throw new TypeError("The decorated value must be a function");delete r.value,delete r.writable,r.get=function(){if(!ts.has(this)){const i=Ha(o,e);return ts.set(this,i),i}return ts.get(this)}};Ha.clear=e=>{const t=Bf.get(e);if(!t)throw new TypeError("Can't clear a function that was not memoized!");if(typeof t.clear!="function")throw new TypeError("The cache Map can't be cleared!");t.clear()};var D1=Ha;const Hf=Qs(D1);function O1(e){return typeof e=="string"}function j1(e,t,n){return n.indexOf(e)===t}function P1(e){return e.toLowerCase()===e}function fu(e){return e.indexOf(",")===-1?e:e.split(",")}function As(e){if(!e)return e;if(e==="C"||e==="posix"||e==="POSIX")return"en-US";if(e.indexOf(".")!==-1){var t=e.split(".")[0],n=t===void 0?"":t;return As(n)}if(e.indexOf("@")!==-1){var r=e.split("@")[0],n=r===void 0?"":r;return As(n)}if(e.indexOf("-")===-1||!P1(e))return e;var o=e.split("-"),i=o[0],s=o[1],l=s===void 0?"":s;return"".concat(i,"-").concat(l.toUpperCase())}function M1(e){var t=e===void 0?{}:e,n=t.useFallbackLocale,r=n===void 0?!0:n,o=t.fallbackLocale,i=o===void 0?"en-US":o,s=[];if(typeof navigator<"u"){for(var l=navigator.languages||[],u=[],f=0,h=l;f<h.length;f++){var p=h[f];u=u.concat(fu(p))}var y=navigator.language,w=y&&fu(y);s=s.concat(u,w)}return r&&s.push(i),s.filter(O1).map(As).filter(j1)}var I1=Hf(M1,{cacheKey:JSON.stringify});function A1(e){return I1(e)[0]||null}var zf=Hf(A1,{cacheKey:JSON.stringify});function In(e,t,n){return function(o,i){i===void 0&&(i=n);var s=e(o)+i;return t(s)}}function Wo(e){return function(n){return new Date(e(n).getTime()-1)}}function Bo(e,t){return function(r){return[e(r),t(r)]}}function it(e){if(e instanceof Date)return e.getFullYear();if(typeof e=="number")return e;var t=parseInt(e,10);if(typeof e=="string"&&!isNaN(t))return t;throw new Error("Failed to get year from date: ".concat(e,"."))}function tr(e){if(e instanceof Date)return e.getMonth();throw new Error("Failed to get month from date: ".concat(e,"."))}function ci(e){if(e instanceof Date)return e.getDate();throw new Error("Failed to get year from date: ".concat(e,"."))}function Vr(e){var t=it(e),n=t+(-t+1)%100,r=new Date;return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}var $1=In(it,Vr,-100),Yf=In(it,Vr,100),Sc=Wo(Yf),R1=In(it,Sc,-100),Vf=Bo(Vr,Sc);function nr(e){var t=it(e),n=t+(-t+1)%10,r=new Date;return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}var qf=In(it,nr,-10),kc=In(it,nr,10),li=Wo(kc),Kf=In(it,li,-10),Uf=Bo(nr,li);function qr(e){var t=it(e),n=new Date;return n.setFullYear(t,0,1),n.setHours(0,0,0,0),n}var Xf=In(it,qr,-1),_c=In(it,qr,1),ui=Wo(_c),Gf=In(it,ui,-1),L1=Bo(qr,ui);function Ec(e,t){return function(r,o){o===void 0&&(o=t);var i=it(r),s=tr(r)+o,l=new Date;return l.setFullYear(i,s,1),l.setHours(0,0,0,0),e(l)}}function xr(e){var t=it(e),n=tr(e),r=new Date;return r.setFullYear(t,n,1),r.setHours(0,0,0,0),r}var Zf=Ec(xr,-1),Nc=Ec(xr,1),Ho=Wo(Nc),Qf=Ec(Ho,-1),F1=Bo(xr,Ho);function W1(e,t){return function(r,o){o===void 0&&(o=t);var i=it(r),s=tr(r),l=ci(r)+o,u=new Date;return u.setFullYear(i,s,l),u.setHours(0,0,0,0),e(u)}}function zo(e){var t=it(e),n=tr(e),r=ci(e),o=new Date;return o.setFullYear(t,n,r),o.setHours(0,0,0,0),o}var B1=W1(zo,1),Cc=Wo(B1),H1=Bo(zo,Cc);function Jf(e){return ci(Ho(e))}var _t={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},z1={gregory:["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],hebrew:["he","he-IL"],islamic:["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"]},Tc=[0,1,2,3,4,5,6],ns=new Map;function Y1(e){return function(n,r){var o=n||zf();ns.has(o)||ns.set(o,new Map);var i=ns.get(o);return i.has(e)||i.set(e,new Intl.DateTimeFormat(o||void 0,e).format),i.get(e)(r)}}function V1(e){var t=new Date(e);return new Date(t.setHours(12))}function Sr(e){return function(t,n){return Y1(e)(t,V1(n))}}var q1={day:"numeric"},K1={day:"numeric",month:"long",year:"numeric"},U1={month:"long"},X1={month:"long",year:"numeric"},G1={weekday:"short"},Z1={weekday:"long"},Q1={year:"numeric"},J1=Sr(q1),eS=Sr(K1),tS=Sr(U1),eh=Sr(X1),nS=Sr(G1),rS=Sr(Z1),di=Sr(Q1),oS=Tc[0],aS=Tc[5],hu=Tc[6];function Po(e,t){t===void 0&&(t=_t.ISO_8601);var n=e.getDay();switch(t){case _t.ISO_8601:return(n+6)%7;case _t.ISLAMIC:return(n+1)%7;case _t.HEBREW:case _t.GREGORY:return n;default:throw new Error("Unsupported calendar type.")}}function iS(e){var t=Vr(e);return it(t)}function sS(e){var t=nr(e);return it(t)}function $s(e,t){t===void 0&&(t=_t.ISO_8601);var n=it(e),r=tr(e),o=e.getDate()-Po(e,t);return new Date(n,r,o)}function cS(e,t){t===void 0&&(t=_t.ISO_8601);var n=t===_t.GREGORY?_t.GREGORY:_t.ISO_8601,r=$s(e,t),o=it(e)+1,i,s;do i=new Date(o,0,n===_t.ISO_8601?4:1),s=$s(i,t),o-=1;while(e<s);return Math.round((r.getTime()-s.getTime())/(864e5*7))+1}function yr(e,t){switch(e){case"century":return Vr(t);case"decade":return nr(t);case"year":return qr(t);case"month":return xr(t);case"day":return zo(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function lS(e,t){switch(e){case"century":return $1(t);case"decade":return qf(t);case"year":return Xf(t);case"month":return Zf(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function th(e,t){switch(e){case"century":return Yf(t);case"decade":return kc(t);case"year":return _c(t);case"month":return Nc(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function uS(e,t){switch(e){case"decade":return qf(t,-100);case"year":return Xf(t,-10);case"month":return Zf(t,-12);default:throw new Error("Invalid rangeType: ".concat(e))}}function dS(e,t){switch(e){case"decade":return kc(t,100);case"year":return _c(t,10);case"month":return Nc(t,12);default:throw new Error("Invalid rangeType: ".concat(e))}}function nh(e,t){switch(e){case"century":return Sc(t);case"decade":return li(t);case"year":return ui(t);case"month":return Ho(t);case"day":return Cc(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function fS(e,t){switch(e){case"century":return R1(t);case"decade":return Kf(t);case"year":return Gf(t);case"month":return Qf(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function hS(e,t){switch(e){case"decade":return Kf(t,-100);case"year":return Gf(t,-10);case"month":return Qf(t,-12);default:throw new Error("Invalid rangeType: ".concat(e))}}function mu(e,t){switch(e){case"century":return Vf(t);case"decade":return Uf(t);case"year":return L1(t);case"month":return F1(t);case"day":return H1(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function mS(e,t,n){var r=[t,n].sort(function(o,i){return o.getTime()-i.getTime()});return[yr(e,r[0]),nh(e,r[1])]}function rh(e,t,n){return n.map(function(r){return(t||di)(e,r)}).join("  ")}function pS(e,t,n){return rh(e,t,Vf(n))}function oh(e,t,n){return rh(e,t,Uf(n))}function gS(e){return e.getDay()===new Date().getDay()}function ah(e,t){t===void 0&&(t=_t.ISO_8601);var n=e.getDay();switch(t){case _t.ISLAMIC:case _t.HEBREW:return n===aS||n===hu;case _t.ISO_8601:case _t.GREGORY:return n===hu||n===oS;default:throw new Error("Unsupported calendar type.")}}var pn="react-calendar__navigation";function yS(e){var t=e.activeStartDate,n=e.drillUp,r=e.formatMonthYear,o=r===void 0?eh:r,i=e.formatYear,s=i===void 0?di:i,l=e.locale,u=e.maxDate,f=e.minDate,h=e.navigationAriaLabel,p=h===void 0?"":h,y=e.navigationAriaLive,w=e.navigationLabel,S=e.next2AriaLabel,k=S===void 0?"":S,N=e.next2Label,C=N===void 0?"":N,R=e.nextAriaLabel,I=R===void 0?"":R,T=e.nextLabel,X=T===void 0?"":T,q=e.prev2AriaLabel,V=q===void 0?"":q,J=e.prev2Label,U=J===void 0?"":J,te=e.prevAriaLabel,K=te===void 0?"":te,oe=e.prevLabel,ce=oe===void 0?"":oe,_=e.setActiveStartDate,M=e.showDoubleView,P=e.view,G=e.views,ie=G.indexOf(P)>0,j=P!=="century",Q=lS(P,t),ae=j?uS(P,t):void 0,se=th(P,t),fe=j?dS(P,t):void 0,ve=function(){if(Q.getFullYear()<0)return!0;var $e=fS(P,t);return f&&f>=$e}(),ke=j&&function(){if(ae.getFullYear()<0)return!0;var $e=hS(P,t);return f&&f>=$e}(),Te=u&&u<se,Oe=j&&u&&u<fe;function Pe(){_(Q,"prev")}function he(){_(ae,"prev2")}function Ie(){_(se,"next")}function Ze(){_(fe,"next2")}function je($e){var Fe=function(){switch(P){case"century":return pS(l,s,$e);case"decade":return oh(l,s,$e);case"year":return s(l,$e);case"month":return o(l,$e);default:throw new Error("Invalid view: ".concat(P,"."))}}();return w?w({date:$e,label:Fe,locale:l||zf()||void 0,view:P}):Fe}function Je(){var $e="".concat(pn,"__label");return g.jsxs("button",{"aria-label":p,"aria-live":y,className:$e,disabled:!ie,onClick:n,style:{flexGrow:1},type:"button",children:[g.jsx("span",{className:"".concat($e,"__labelText ").concat($e,"__labelText--from"),children:je(t)}),M?g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"".concat($e,"__divider"),children:"  "}),g.jsx("span",{className:"".concat($e,"__labelText ").concat($e,"__labelText--to"),children:je(se)})]}):null]})}return g.jsxs("div",{className:pn,children:[U!==null&&j?g.jsx("button",{"aria-label":V,className:"".concat(pn,"__arrow ").concat(pn,"__prev2-button"),disabled:ke,onClick:he,type:"button",children:U}):null,ce!==null&&g.jsx("button",{"aria-label":K,className:"".concat(pn,"__arrow ").concat(pn,"__prev-button"),disabled:ve,onClick:Pe,type:"button",children:ce}),Je(),X!==null&&g.jsx("button",{"aria-label":I,className:"".concat(pn,"__arrow ").concat(pn,"__next-button"),disabled:Te,onClick:Ie,type:"button",children:X}),C!==null&&j?g.jsx("button",{"aria-label":k,className:"".concat(pn,"__arrow ").concat(pn,"__next2-button"),disabled:Oe,onClick:Ze,type:"button",children:C}):null]})}var Ar=function(){return Ar=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ar.apply(this,arguments)},vS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};function pu(e){return"".concat(e,"%")}function Dc(e){var t=e.children,n=e.className,r=e.count,o=e.direction,i=e.offset,s=e.style,l=e.wrap,u=vS(e,["children","className","count","direction","offset","style","wrap"]);return g.jsx("div",Ar({className:n,style:Ar({display:"flex",flexDirection:o,flexWrap:l?"wrap":"nowrap"},s)},u,{children:b.Children.map(t,function(f,h){var p=i&&h===0?pu(100*i/r):null;return b.cloneElement(f,Ar(Ar({},f.props),{style:{flexBasis:pu(100/r),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:p,marginInlineStart:p,marginInlineEnd:0}}))})}))}function wS(e,t,n){return t&&t>e?t:n&&n<e?n:e}function Mo(e,t){return t[0]<=e&&t[1]>=e}function bS(e,t){return e[0]<=t[0]&&e[1]>=t[1]}function ih(e,t){return Mo(e[0],t)||Mo(e[1],t)}function gu(e,t,n){var r=ih(t,e),o=[];if(r){o.push(n);var i=Mo(e[0],t),s=Mo(e[1],t);i&&o.push("".concat(n,"Start")),s&&o.push("".concat(n,"End")),i&&s&&o.push("".concat(n,"BothEnds"))}return o}function xS(e){return Array.isArray(e)?e[0]!==null&&e[1]!==null:e!==null}function SS(e){if(!e)throw new Error("args is required");var t=e.value,n=e.date,r=e.hover,o="react-calendar__tile",i=[o];if(!n)return i;var s=new Date,l=function(){if(Array.isArray(n))return n;var w=e.dateType;if(!w)throw new Error("dateType is required when date is not an array of two dates");return mu(w,n)}();if(Mo(s,l)&&i.push("".concat(o,"--now")),!t||!xS(t))return i;var u=function(){if(Array.isArray(t))return t;var w=e.valueType;if(!w)throw new Error("valueType is required when value is not an array of two dates");return mu(w,t)}();bS(u,l)?i.push("".concat(o,"--active")):ih(u,l)&&i.push("".concat(o,"--hasActive"));var f=gu(u,l,"".concat(o,"--range"));i.push.apply(i,f);var h=Array.isArray(t)?t:[t];if(r&&h.length===1){var p=r>u[0]?[u[0],r]:[r,u[0]],y=gu(p,l,"".concat(o,"--hover"));i.push.apply(i,y)}return i}function fi(e){for(var t=e.className,n=e.count,r=n===void 0?3:n,o=e.dateTransform,i=e.dateType,s=e.end,l=e.hover,u=e.offset,f=e.renderTile,h=e.start,p=e.step,y=p===void 0?1:p,w=e.value,S=e.valueType,k=[],N=h;N<=s;N+=y){var C=o(N);k.push(f({classes:SS({date:C,dateType:i,hover:l,value:w,valueType:S}),date:C}))}return g.jsx(Dc,{className:t,count:r,offset:u,wrap:!0,children:k})}function hi(e){var t=e.activeStartDate,n=e.children,r=e.classes,o=e.date,i=e.formatAbbr,s=e.locale,l=e.maxDate,u=e.maxDateTransform,f=e.minDate,h=e.minDateTransform,p=e.onClick,y=e.onMouseOver,w=e.style,S=e.tileClassName,k=e.tileContent,N=e.tileDisabled,C=e.view,R=b.useMemo(function(){var T={activeStartDate:t,date:o,view:C};return typeof S=="function"?S(T):S},[t,o,S,C]),I=b.useMemo(function(){var T={activeStartDate:t,date:o,view:C};return typeof k=="function"?k(T):k},[t,o,k,C]);return g.jsxs("button",{className:Wt(r,R),disabled:f&&h(f)>o||l&&u(l)<o||(N==null?void 0:N({activeStartDate:t,date:o,view:C})),onClick:p?function(T){return p(o,T)}:void 0,onFocus:y?function(){return y(o)}:void 0,onMouseOver:y?function(){return y(o)}:void 0,style:w,type:"button",children:[i?g.jsx("abbr",{"aria-label":i(s,o),children:n}):n,I]})}var Rs=function(){return Rs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Rs.apply(this,arguments)},kS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},yu="react-calendar__century-view__decades__decade";function _S(e){var t=e.classes,n=t===void 0?[]:t,r=e.currentCentury,o=e.formatYear,i=o===void 0?di:o,s=kS(e,["classes","currentCentury","formatYear"]),l=s.date,u=s.locale,f=[];return n&&f.push.apply(f,n),f.push(yu),Vr(l).getFullYear()!==r&&f.push("".concat(yu,"--neighboringCentury")),g.jsx(hi,Rs({},s,{classes:f,maxDateTransform:li,minDateTransform:nr,view:"century",children:oh(u,i,l)}))}var Ls=function(){return Ls=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ls.apply(this,arguments)},vu=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};function ES(e){var t=e.activeStartDate,n=e.hover,r=e.showNeighboringCentury,o=e.value,i=e.valueType,s=vu(e,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),l=iS(t),u=l+(r?119:99);return g.jsx(fi,{className:"react-calendar__century-view__decades",dateTransform:nr,dateType:"decade",end:u,hover:n,renderTile:function(f){var h=f.date,p=vu(f,["date"]);return g.jsx(_S,Ls({},s,p,{activeStartDate:t,currentCentury:l,date:h}),h.getTime())},start:l,step:10,value:o,valueType:i})}var Fs=function(){return Fs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Fs.apply(this,arguments)};function NS(e){function t(){return g.jsx(ES,Fs({},e))}return g.jsx("div",{className:"react-calendar__century-view",children:t()})}var Ws=function(){return Ws=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ws.apply(this,arguments)},CS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},wu="react-calendar__decade-view__years__year";function TS(e){var t=e.classes,n=t===void 0?[]:t,r=e.currentDecade,o=e.formatYear,i=o===void 0?di:o,s=CS(e,["classes","currentDecade","formatYear"]),l=s.date,u=s.locale,f=[];return n&&f.push.apply(f,n),f.push(wu),nr(l).getFullYear()!==r&&f.push("".concat(wu,"--neighboringDecade")),g.jsx(hi,Ws({},s,{classes:f,maxDateTransform:ui,minDateTransform:qr,view:"decade",children:i(u,l)}))}var Bs=function(){return Bs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Bs.apply(this,arguments)},bu=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};function DS(e){var t=e.activeStartDate,n=e.hover,r=e.showNeighboringDecade,o=e.value,i=e.valueType,s=bu(e,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),l=sS(t),u=l+(r?11:9);return g.jsx(fi,{className:"react-calendar__decade-view__years",dateTransform:qr,dateType:"year",end:u,hover:n,renderTile:function(f){var h=f.date,p=bu(f,["date"]);return g.jsx(TS,Bs({},s,p,{activeStartDate:t,currentDecade:l,date:h}),h.getTime())},start:l,value:o,valueType:i})}var Hs=function(){return Hs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Hs.apply(this,arguments)};function OS(e){function t(){return g.jsx(DS,Hs({},e))}return g.jsx("div",{className:"react-calendar__decade-view",children:t()})}var zs=function(){return zs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},zs.apply(this,arguments)},jS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},xu=function(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},PS="react-calendar__year-view__months__month";function MS(e){var t=e.classes,n=t===void 0?[]:t,r=e.formatMonth,o=r===void 0?tS:r,i=e.formatMonthYear,s=i===void 0?eh:i,l=jS(e,["classes","formatMonth","formatMonthYear"]),u=l.date,f=l.locale;return g.jsx(hi,zs({},l,{classes:xu(xu([],n,!0),[PS],!1),formatAbbr:s,maxDateTransform:Ho,minDateTransform:xr,view:"year",children:o(f,u)}))}var Ys=function(){return Ys=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ys.apply(this,arguments)},Su=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};function IS(e){var t=e.activeStartDate,n=e.hover,r=e.value,o=e.valueType,i=Su(e,["activeStartDate","hover","value","valueType"]),s=0,l=11,u=it(t);return g.jsx(fi,{className:"react-calendar__year-view__months",dateTransform:function(f){var h=new Date;return h.setFullYear(u,f,1),xr(h)},dateType:"month",end:l,hover:n,renderTile:function(f){var h=f.date,p=Su(f,["date"]);return g.jsx(MS,Ys({},i,p,{activeStartDate:t,date:h}),h.getTime())},start:s,value:r,valueType:o})}var Vs=function(){return Vs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Vs.apply(this,arguments)};function AS(e){function t(){return g.jsx(IS,Vs({},e))}return g.jsx("div",{className:"react-calendar__year-view",children:t()})}var qs=function(){return qs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},qs.apply(this,arguments)},$S=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},rs="react-calendar__month-view__days__day";function RS(e){var t=e.calendarType,n=e.classes,r=n===void 0?[]:n,o=e.currentMonthIndex,i=e.formatDay,s=i===void 0?J1:i,l=e.formatLongDate,u=l===void 0?eS:l,f=$S(e,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),h=f.date,p=f.locale,y=[];return r&&y.push.apply(y,r),y.push(rs),ah(h,t)&&y.push("".concat(rs,"--weekend")),h.getMonth()!==o&&y.push("".concat(rs,"--neighboringMonth")),g.jsx(hi,qs({},f,{classes:y,formatAbbr:u,maxDateTransform:Cc,minDateTransform:zo,view:"month",children:s(p,h)}))}var Ks=function(){return Ks=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ks.apply(this,arguments)},ku=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};function LS(e){var t=e.activeStartDate,n=e.calendarType,r=e.hover,o=e.showFixedNumberOfWeeks,i=e.showNeighboringMonth,s=e.value,l=e.valueType,u=ku(e,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),f=it(t),h=tr(t),p=o||i,y=Po(t,n),w=p?0:y,S=(p?-y:0)+1,k=function(){if(o)return S+6*7-1;var N=Jf(t);if(i){var C=new Date;C.setFullYear(f,h,N),C.setHours(0,0,0,0);var R=7-Po(C,n)-1;return N+R}return N}();return g.jsx(fi,{className:"react-calendar__month-view__days",count:7,dateTransform:function(N){var C=new Date;return C.setFullYear(f,h,N),zo(C)},dateType:"day",hover:r,end:k,renderTile:function(N){var C=N.date,R=ku(N,["date"]);return g.jsx(RS,Ks({},u,R,{activeStartDate:t,calendarType:n,currentMonthIndex:h,date:C}),C.getTime())},offset:w,start:S,value:s,valueType:l})}var sh="react-calendar__month-view__weekdays",os="".concat(sh,"__weekday");function FS(e){for(var t=e.calendarType,n=e.formatShortWeekday,r=n===void 0?nS:n,o=e.formatWeekday,i=o===void 0?rS:o,s=e.locale,l=e.onMouseLeave,u=new Date,f=xr(u),h=it(f),p=tr(f),y=[],w=1;w<=7;w+=1){var S=new Date(h,p,w-Po(f,t)),k=i(s,S);y.push(g.jsx("div",{className:Wt(os,gS(S)&&"".concat(os,"--current"),ah(S,t)&&"".concat(os,"--weekend")),children:g.jsx("abbr",{"aria-label":k,title:k,children:r(s,S).replace(".","")})},w))}return g.jsx(Dc,{className:sh,count:7,onFocus:l,onMouseOver:l,children:y})}var za=function(){return za=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},za.apply(this,arguments)},_u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},Eu="react-calendar__tile";function WS(e){var t=e.onClickWeekNumber,n=e.weekNumber,r=g.jsx("span",{children:n});if(t){var o=e.date,i=e.onClickWeekNumber,s=e.weekNumber,l=_u(e,["date","onClickWeekNumber","weekNumber"]);return g.jsx("button",za({},l,{className:Eu,onClick:function(u){return i(s,o,u)},type:"button",children:r}))}else{e.date,e.onClickWeekNumber,e.weekNumber;var l=_u(e,["date","onClickWeekNumber","weekNumber"]);return g.jsx("div",za({},l,{className:Eu,children:r}))}}function BS(e){var t=e.activeStartDate,n=e.calendarType,r=e.onClickWeekNumber,o=e.onMouseLeave,i=e.showFixedNumberOfWeeks,s=function(){if(i)return 6;var f=Jf(t),h=Po(t,n),p=f-(7-h);return 1+Math.ceil(p/7)}(),l=function(){for(var f=it(t),h=tr(t),p=ci(t),y=[],w=0;w<s;w+=1)y.push($s(new Date(f,h,p+w*7),n));return y}(),u=l.map(function(f){return cS(f,n)});return g.jsx(Dc,{className:"react-calendar__month-view__weekNumbers",count:s,direction:"column",onFocus:o,onMouseOver:o,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0},children:u.map(function(f,h){var p=l[h];if(!p)throw new Error("date is not defined");return g.jsx(WS,{date:p,onClickWeekNumber:r,weekNumber:f},f)})})}var Us=function(){return Us=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Us.apply(this,arguments)},HS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};function zS(e){if(e)for(var t=0,n=Object.entries(z1);t<n.length;t++){var r=n[t],o=r[0],i=r[1];if(i.includes(e))return o}return _t.ISO_8601}function YS(e){var t=e.activeStartDate,n=e.locale,r=e.onMouseLeave,o=e.showFixedNumberOfWeeks,i=e.calendarType,s=i===void 0?zS(n):i,l=e.formatShortWeekday,u=e.formatWeekday,f=e.onClickWeekNumber,h=e.showWeekNumbers,p=HS(e,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function y(){return g.jsx(FS,{calendarType:s,formatShortWeekday:l,formatWeekday:u,locale:n,onMouseLeave:r})}function w(){return h?g.jsx(BS,{activeStartDate:t,calendarType:s,onClickWeekNumber:f,onMouseLeave:r,showFixedNumberOfWeeks:o}):null}function S(){return g.jsx(LS,Us({calendarType:s},p))}var k="react-calendar__month-view";return g.jsx("div",{className:Wt(k,h?"".concat(k,"--weekNumbers"):""),children:g.jsxs("div",{style:{display:"flex",alignItems:"flex-end"},children:[w(),g.jsxs("div",{style:{flexGrow:1,width:"100%"},children:[y(),S()]})]})})}var $r=function(){return $r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},$r.apply(this,arguments)},xa="react-calendar",Ta=["century","decade","year","month"],VS=["decade","year","month","day"],Oc=new Date;Oc.setFullYear(1,0,1);Oc.setHours(0,0,0,0);var qS=new Date(864e13);function vo(e){return e instanceof Date?e:new Date(e)}function ch(e,t){return Ta.slice(Ta.indexOf(e),Ta.indexOf(t)+1)}function KS(e,t,n){var r=ch(t,n);return r.indexOf(e)!==-1}function jc(e,t,n){return e&&KS(e,t,n)?e:n}function lh(e){var t=Ta.indexOf(e);return VS[t]}function US(e,t){var n=Array.isArray(e)?e[t]:e;if(!n)return null;var r=vo(n);if(Number.isNaN(r.getTime()))throw new Error("Invalid date: ".concat(e));return r}function uh(e,t){var n=e.value,r=e.minDate,o=e.maxDate,i=e.maxDetail,s=US(n,t);if(!s)return null;var l=lh(i),u=function(){switch(t){case 0:return yr(l,s);case 1:return nh(l,s);default:throw new Error("Invalid index value: ".concat(t))}}();return wS(u,r,o)}var Pc=function(e){return uh(e,0)},dh=function(e){return uh(e,1)},XS=function(e){return[Pc,dh].map(function(t){return t(e)})};function fh(e){var t=e.maxDate,n=e.maxDetail,r=e.minDate,o=e.minDetail,i=e.value,s=e.view,l=jc(s,o,n),u=Pc({value:i,minDate:r,maxDate:t,maxDetail:n})||new Date;return yr(l,u)}function GS(e){var t=e.activeStartDate,n=e.defaultActiveStartDate,r=e.defaultValue,o=e.defaultView,i=e.maxDate,s=e.maxDetail,l=e.minDate,u=e.minDetail,f=e.value,h=e.view,p=jc(h,u,s),y=t||n;return y?yr(p,y):fh({maxDate:i,maxDetail:s,minDate:l,minDetail:u,value:f||r,view:h||o})}function as(e){return e&&(!Array.isArray(e)||e.length===1)}function Sa(e,t){return e instanceof Date&&t instanceof Date&&e.getTime()===t.getTime()}var is=b.forwardRef(function(t,n){var r=t.activeStartDate,o=t.allowPartialRange,i=t.calendarType,s=t.className,l=t.defaultActiveStartDate,u=t.defaultValue,f=t.defaultView,h=t.formatDay,p=t.formatLongDate,y=t.formatMonth,w=t.formatMonthYear,S=t.formatShortWeekday,k=t.formatWeekday,N=t.formatYear,C=t.goToRangeStartOnSelect,R=C===void 0?!0:C,I=t.inputRef,T=t.locale,X=t.maxDate,q=X===void 0?qS:X,V=t.maxDetail,J=V===void 0?"month":V,U=t.minDate,te=U===void 0?Oc:U,K=t.minDetail,oe=K===void 0?"century":K,ce=t.navigationAriaLabel,_=t.navigationAriaLive,M=t.navigationLabel,P=t.next2AriaLabel,G=t.next2Label,ie=t.nextAriaLabel,j=t.nextLabel,Q=t.onActiveStartDateChange,ae=t.onChange,se=t.onClickDay,fe=t.onClickDecade,ve=t.onClickMonth,ke=t.onClickWeekNumber,Te=t.onClickYear,Oe=t.onDrillDown,Pe=t.onDrillUp,he=t.onViewChange,Ie=t.prev2AriaLabel,Ze=t.prev2Label,je=t.prevAriaLabel,Je=t.prevLabel,$e=t.returnValue,Fe=$e===void 0?"start":$e,Ke=t.selectRange,Ye=t.showDoubleView,Ne=t.showFixedNumberOfWeeks,st=t.showNavigation,bt=st===void 0?!0:st,lt=t.showNeighboringCentury,zt=t.showNeighboringDecade,yt=t.showNeighboringMonth,Nt=yt===void 0?!0:yt,Ct=t.showWeekNumbers,mt=t.tileClassName,Mt=t.tileContent,Tt=t.tileDisabled,kt=t.value,It=t.view,Ue=b.useState(l),pt=Ue[0],le=Ue[1],me=b.useState(null),ee=me[0],pe=me[1],Se=b.useState(Array.isArray(u)?u.map(function(Le){return Le!==null?vo(Le):null}):u!=null?vo(u):null),Ce=Se[0],de=Se[1],Re=b.useState(f),Lt=Re[0],gt=Re[1],Qe=r||pt||GS({activeStartDate:r,defaultActiveStartDate:l,defaultValue:u,defaultView:f,maxDate:q,maxDetail:J,minDate:te,minDetail:oe,value:kt,view:It}),ut=function(){var Le=function(){return Ke&&as(Ce)?Ce:kt!==void 0?kt:Ce}();return Le?Array.isArray(Le)?Le.map(function(Ve){return Ve!==null?vo(Ve):null}):Le!==null?vo(Le):null:null}(),An=lh(J),et=jc(It||Lt,oe,J),vt=ch(oe,J),cn=Ke?ee:null,bn=vt.indexOf(et)<vt.length-1,xn=vt.indexOf(et)>0,Xe=b.useCallback(function(Le){var Ve=function(){switch(Fe){case"start":return Pc;case"end":return dh;case"range":return XS;default:throw new Error("Invalid returnValue.")}}();return Ve({maxDate:q,maxDetail:J,minDate:te,value:Le})},[q,J,te,Fe]),at=b.useCallback(function(Le,Ve){le(Le);var nt={action:Ve,activeStartDate:Le,value:ut,view:et};Q&&!Sa(Qe,Le)&&Q(nt)},[Qe,Q,ut,et]),$n=b.useCallback(function(Le,Ve){var nt=function(){switch(et){case"century":return fe;case"decade":return Te;case"year":return ve;case"month":return se;default:throw new Error("Invalid view: ".concat(et,"."))}}();nt&&nt(Le,Ve)},[se,fe,ve,Te,et]),ln=b.useCallback(function(Le,Ve){if(bn){$n(Le,Ve);var nt=vt[vt.indexOf(et)+1];if(!nt)throw new Error("Attempted to drill down from the lowest view.");le(Le),gt(nt);var ft={action:"drillDown",activeStartDate:Le,value:ut,view:nt};Q&&!Sa(Qe,Le)&&Q(ft),he&&et!==nt&&he(ft),Oe&&Oe(ft)}},[Qe,bn,Q,$n,Oe,he,ut,et,vt]),un=b.useCallback(function(){if(xn){var Le=vt[vt.indexOf(et)-1];if(!Le)throw new Error("Attempted to drill up from the highest view.");var Ve=yr(Le,Qe);le(Ve),gt(Le);var nt={action:"drillUp",activeStartDate:Ve,value:ut,view:Le};Q&&!Sa(Qe,Ve)&&Q(nt),he&&et!==Le&&he(nt),Pe&&Pe(nt)}},[Qe,xn,Q,Pe,he,ut,et,vt]),dn=b.useCallback(function(Le,Ve){var nt=ut;$n(Le,Ve);var ft=Ke&&!as(nt),Dt;if(Ke)if(ft)Dt=yr(An,Le);else{if(!nt)throw new Error("previousValue is required");if(Array.isArray(nt))throw new Error("previousValue must not be an array");Dt=mS(An,nt,Le)}else Dt=Xe(Le);var Sn=!Ke||ft||R?fh({maxDate:q,maxDetail:J,minDate:te,minDetail:oe,value:Dt,view:et}):null;Ve.persist(),le(Sn),de(Dt);var rt={action:"onChange",activeStartDate:Sn,value:Dt,view:et};if(Q&&!Sa(Qe,Sn)&&Q(rt),ae)if(Ke){var Ut=as(Dt);if(!Ut)ae(Dt||null,Ve);else if(o){if(Array.isArray(Dt))throw new Error("value must not be an array");ae([Dt||null,null],Ve)}}else ae(Dt||null,Ve)},[Qe,o,Xe,R,q,J,te,oe,Q,ae,$n,Ke,ut,An,et]);function Kr(Le){pe(Le)}function Ft(){pe(null)}b.useImperativeHandle(n,function(){return{activeStartDate:Qe,drillDown:ln,drillUp:un,onChange:dn,setActiveStartDate:at,value:ut,view:et}},[Qe,ln,un,dn,at,ut,et]);function Jt(Le){var Ve=Le?th(et,Qe):yr(et,Qe),nt=bn?ln:dn,ft={activeStartDate:Ve,hover:cn,locale:T,maxDate:q,minDate:te,onClick:nt,onMouseOver:Ke?Kr:void 0,tileClassName:mt,tileContent:Mt,tileDisabled:Tt,value:ut,valueType:An};switch(et){case"century":return g.jsx(NS,$r({formatYear:N,showNeighboringCentury:lt},ft));case"decade":return g.jsx(OS,$r({formatYear:N,showNeighboringDecade:zt},ft));case"year":return g.jsx(AS,$r({formatMonth:y,formatMonthYear:w},ft));case"month":return g.jsx(YS,$r({calendarType:i,formatDay:h,formatLongDate:p,formatShortWeekday:S,formatWeekday:k,onClickWeekNumber:ke,onMouseLeave:Ke?Ft:void 0,showFixedNumberOfWeeks:typeof Ne<"u"?Ne:Ye,showNeighboringMonth:Nt,showWeekNumbers:Ct},ft));default:throw new Error("Invalid view: ".concat(et,"."))}}function Yt(){return bt?g.jsx(yS,{activeStartDate:Qe,drillUp:un,formatMonthYear:w,formatYear:N,locale:T,maxDate:q,minDate:te,navigationAriaLabel:ce,navigationAriaLive:_,navigationLabel:M,next2AriaLabel:P,next2Label:G,nextAriaLabel:ie,nextLabel:j,prev2AriaLabel:Ie,prev2Label:Ze,prevAriaLabel:je,prevLabel:Je,setActiveStartDate:at,showDoubleView:Ye,view:et,views:vt}):null}var Rn=Array.isArray(ut)?ut:[ut];return g.jsxs("div",{className:Wt(xa,Ke&&Rn.length===1&&"".concat(xa,"--selectRange"),Ye&&"".concat(xa,"--doubleView"),s),ref:I,children:[Yt(),g.jsxs("div",{className:"".concat(xa,"__viewContainer"),onBlur:Ke?Ft:void 0,onMouseLeave:Ke?Ft:void 0,children:[Jt(),Ye?Jt(!0):null]})]})});function ZS({onSelect:e,onClose:t,showTime:n=!0,isBetweenMode:r=!1}){const[o,i]=b.useState(new Date),[s,l]=b.useState(new Date),[u,f]=b.useState($t(new Date,"HH")),[h,p]=b.useState($t(new Date,"mm")),[y,w]=b.useState($t(new Date,"ss")),[S,k]=b.useState($t(new Date,"HH")),[N,C]=b.useState($t(new Date,"mm")),[R,I]=b.useState($t(new Date,"ss")),[T,X]=b.useState(!1),[q,V]=b.useState(!1),J=b.useRef(null);b.useEffect(()=>{function K(oe){J.current&&!J.current.contains(oe.target)&&t()}return document.addEventListener("mousedown",K),()=>document.removeEventListener("mousedown",K)},[t]),b.useEffect(()=>{function K(oe){oe.key==="Enter"&&(oe.preventDefault(),oe.stopPropagation(),U(),t())}return document.addEventListener("keydown",K),()=>document.removeEventListener("keydown",K)},[o,s,u,h,y,S,N,R,r,t]);const U=()=>{if(r){const K=new Date(o);K.setHours(parseInt(u),parseInt(h),parseInt(y));const oe=new Date(s);oe.setHours(parseInt(S),parseInt(N),parseInt(R)),e({start:K,end:oe})}else{const K=new Date(o);K.setHours(parseInt(u),parseInt(h),parseInt(y)),e({start:K})}t()},te=({label:K,hours:oe,minutes:ce,seconds:_,setHours:M,setMinutes:P,setSeconds:G})=>g.jsxs("div",{className:"flex flex-col gap-2",children:[g.jsx("div",{className:"text-sm font-medium text-gray-700",children:K}),g.jsxs("div",{className:"flex justify-between items-center gap-4 p-4 bg-gray-50 rounded-lg",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"number",min:"0",max:"23",value:oe,onChange:ie=>M(ie.target.value.padStart(2,"0")),className:"w-16 px-3 py-2 bg-white border rounded-md text-center text-lg font-medium text-gray-700"}),g.jsx("span",{className:"text-gray-500 text-sm",children:"hrs"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"number",min:"0",max:"59",value:ce,onChange:ie=>P(ie.target.value.padStart(2,"0")),className:"w-16 px-3 py-2 bg-white border rounded-md text-center text-lg font-medium text-gray-700"}),g.jsx("span",{className:"text-gray-500 text-sm",children:"min"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"number",min:"0",max:"59",value:_,onChange:ie=>G(ie.target.value.padStart(2,"0")),className:"w-16 px-3 py-2 bg-white border rounded-md text-center text-lg font-medium text-gray-700"}),g.jsx("span",{className:"text-gray-500 text-sm",children:"sec"})]})]})]});return g.jsxs("div",{ref:J,className:"bg-white rounded-lg shadow-xl p-4 w-[400px]",style:{marginTop:"0.5rem"},children:[g.jsxs("div",{className:"flex items-center justify-between mb-4 border-b pb-2",children:[g.jsx("h3",{className:"text-lg font-medium text-gray-700",children:r?"Select Date Range":"Select Date"}),g.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:""})]}),r?g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsxs("button",{onClick:()=>X(!T),className:"flex items-center gap-2 hover:bg-gray-50 px-2 py-1 rounded-md",children:[g.jsx("span",{className:"text-gray-600",children:""}),g.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Start: ",$t(o,"EEE MMM dd yyyy")]})]}),T&&g.jsx(is,{onChange:K=>{i(K),X(!1)},value:o,className:"border-0 mt-2"}),n&&g.jsx(te,{label:"Start Time",hours:u,minutes:h,seconds:y,setHours:f,setMinutes:p,setSeconds:w})]}),g.jsxs("div",{children:[g.jsxs("button",{onClick:()=>V(!q),className:"flex items-center gap-2 hover:bg-gray-50 px-2 py-1 rounded-md",children:[g.jsx("span",{className:"text-gray-600",children:""}),g.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["End: ",$t(s,"EEE MMM dd yyyy")]})]}),q&&g.jsx(is,{onChange:K=>{l(K),V(!1)},value:s,className:"border-0 mt-2"}),n&&g.jsx(te,{label:"End Time",hours:S,minutes:N,seconds:R,setHours:k,setMinutes:C,setSeconds:I})]})]}):g.jsxs(g.Fragment,{children:[g.jsxs("button",{onClick:()=>X(!T),className:"flex items-center gap-2 hover:bg-gray-50 px-2 py-1 rounded-md mb-4",children:[g.jsx("span",{className:"text-gray-600",children:""}),g.jsx("span",{className:"text-lg font-medium text-gray-700",children:$t(o,"EEE MMM dd yyyy")})]}),T&&g.jsx("div",{className:"mb-4",children:g.jsx(is,{onChange:K=>{i(K),X(!1)},value:o,className:"border-0"})}),n&&g.jsx(te,{label:"Time",hours:u,minutes:h,seconds:y,setHours:f,setMinutes:p,setSeconds:w})]}),g.jsx("button",{onClick:U,className:"w-full mt-4 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:"Apply"})]})}function QS({isOpen:e,onClose:t}){const[n,r]=b.useState([]),[o,i]=b.useState(""),[s,l]=b.useState([]),[u,f]=b.useState("");b.useEffect(()=>{e&&(async()=>{const N=await Oo("namespaces"),C=await Oo("searchParameters");N&&r(N),C&&l(C)})()},[e]);const h=async()=>{await Ns("namespaces",n),await Ns("searchParameters",s),t()},p=()=>{o&&!n.includes(o)&&(r([...n,o]),i(""))},y=k=>{r(n.filter((N,C)=>C!==k))},w=()=>{const k=u.split(",").map(N=>N.trim()).filter(N=>N&&!s.includes(N));k.length&&(l([...s,...k]),f(""))},S=k=>{l(s.filter((N,C)=>C!==k))};return e?g.jsxs(Ms,{open:e,onClose:t,className:"relative z-[100]",children:[g.jsx("div",{className:"fixed inset-0","aria-hidden":"true"}),g.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:g.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:g.jsxs(Ms.Panel,{className:"w-[600px] transform overflow-hidden rounded-lg bg-white text-left align-middle shadow-xl transition-all",children:[g.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[g.jsx("h2",{className:"text-xl font-semibold",children:"Search Settings"}),g.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full","aria-label":"Close",children:g.jsx(pr,{size:20})})]}),g.jsxs("div",{className:"p-6 overflow-y-auto",children:[g.jsxs("div",{className:"mb-6",children:[g.jsx("h3",{className:"text-lg font-medium mb-2",children:"Namespaces"}),g.jsxs("div",{className:"flex gap-2 mb-2",children:[g.jsx("input",{type:"text",value:o,onChange:k=>i(k.target.value),onKeyPress:k=>k.key==="Enter"&&p(),placeholder:"Add namespace...",className:"flex-1 p-2 border rounded"}),g.jsx("button",{onClick:p,className:"p-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:g.jsx(Ul,{size:20})})]}),g.jsx("div",{className:"flex flex-wrap gap-2",children:n.map((k,N)=>g.jsxs("div",{className:"bg-gray-100 px-3 py-1 rounded-full flex items-center gap-2",children:[g.jsx("span",{children:k}),g.jsx("button",{onClick:()=>y(N),className:"hover:text-red-500",children:g.jsx(pr,{size:16})})]},N))})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-medium mb-2",children:"Search Parameters"}),g.jsxs("div",{className:"flex gap-2 mb-2",children:[g.jsx("input",{type:"text",value:u,onChange:k=>f(k.target.value),onKeyPress:k=>k.key==="Enter"&&w(),placeholder:"Add parameters (comma-separated)...",className:"flex-1 p-2 border rounded"}),g.jsx("button",{onClick:w,className:"p-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:g.jsx(Ul,{size:20})})]}),g.jsx("div",{className:"flex flex-wrap gap-2",children:s.map((k,N)=>g.jsxs("div",{className:"bg-gray-100 px-3 py-1 rounded-full flex items-center gap-2",children:[g.jsx("span",{children:k}),g.jsx("button",{onClick:()=>S(N),className:"hover:text-red-500",children:g.jsx(pr,{size:16})})]},N))})]})]}),g.jsxs("div",{className:"p-4 border-t flex justify-end gap-2",children:[g.jsx("button",{onClick:t,className:"px-4 py-2 border rounded hover:bg-gray-50",children:"Cancel"}),g.jsx("button",{onClick:h,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Save"})]})]})})})]}):null}const JS=async(e,t,n)=>{n||(n="");const r=await fetch(`http://localhost:7531/workflow?namespace=${e}&id=${t}&runId=${n}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return await r.json()},ek=async()=>{try{return(await fetch("http://localhost:7531/health",{method:"GET"})).status===200}catch{return!1}},Yo=new Set,hh=e=>{Yo.add(e),window.dispatchEvent(new CustomEvent("workflow-loading-change",{detail:{workflowId:e,isLoading:!0}}))},mh=e=>{Yo.delete(e),window.dispatchEvent(new CustomEvent("workflow-loading-change",{detail:{workflowId:e,isLoading:!1}}))};function tk(e){return Yo.has(e)}async function Xs(e,t,n,r=0){if(Yo.has(t))return n;const o=[{id:t,runId:n,workflowTaskCompletedEventId:"-1",depth:r}],i=new Set;for(;o.length>0;){const{id:s,runId:l,workflowTaskCompletedEventId:u,depth:f}=o.shift();if(i.has(s))continue;const h=await Ro(s,l);if(h&&!h.isPlaceholder){i.add(s);continue}hh(s);try{const p=await JS(e,s,l);i.add(s);const y=[];for(const w of p)w.type==="workflow"?await Es({...w,workflowTaskCompletedEventId:u,isPlaceholder:!1}):w.type==="childWorkflow"?(y.push({workflowId:w.workflowId,workflowRunId:w.runId,workflowTaskCompletedEventId:w.workflowTaskCompletedEventId}),await Es({...w,type:"workflow",isPlaceholder:!0})):w.type==="activity"&&await uf(w);f>0&&y.length>0&&y.forEach(w=>{o.push({id:w.workflowId,runId:w.workflowRunId,workflowTaskCompletedEventId:w.workflowTaskCompletedEventId,depth:f-1})})}catch(p){console.error("Error processing workflow:",p)}finally{mh(s)}}return n}async function nk(e,t,n){try{hh(t);const r=await pc(t,n),o=[];for(const s of r){const l=s.workflowId;if(Yo.has(l))continue;const u=await Ro(l,n);u&&!u.isPlaceholder||o.push(s)}const i=o.map(async s=>{try{await Xs(e,s.workflowId,s.runId,1)}catch(l){console.error("Error loading workflow:",l)}});await Promise.all(i)}catch(r){console.error("Error checking child workflow data:",r)}finally{mh(t)}}const rk=async(e,t)=>{const n=await fetch(`http://localhost:7531/search?namespace=${e}&query=${encodeURIComponent(t)}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return n.json()};function ph({isOpen:e,onClose:t,onTemporalModalSubmit:n}){const[r,o]=b.useState(""),[i,s]=b.useState([]),[l,u]=b.useState([]),[f,h]=b.useState(!1),[p,y]=b.useState(-1),[w,S]=b.useState(!1),[k,N]=b.useState(!1),C=B.useRef(null),[R,I]=b.useState(null),[T,X]=b.useState(null),q=b.useRef(null),[V,J]=b.useState(!1),[U,te]=b.useState([]),[K,oe]=b.useState([]),[ce,_]=b.useState(""),[M,P]=b.useState([]),[G,ie]=b.useState(1),[j,Q]=b.useState(1),[ae,se]=b.useState([{id:"status",label:"Status",width:120},{id:"taskQueue",label:"Task Queue",width:150},{id:"workflowType",label:"Workflow Type",width:180},{id:"execution",label:"Workflow ID",width:200},{id:"execution",label:"Run ID",width:200},{id:"startTime",label:"Start Time",width:180},{id:"closeTime",label:"Close Time",width:180}]),[fe,ve]=b.useState(!1),[ke,Te]=b.useState(!1),[Oe,Pe]=b.useState(!1),he=async()=>{const le=await Oo("searchParameters");if(le){const me=le.map(ee=>({id:ee,label:ee,type:"text"}));te(me)}},Ie=async()=>{const le=await Oo("namespaces")||[];oe(le),!ce&&le.length>0&&_(le[0])};b.useEffect(()=>{e&&he()},[e]),b.useEffect(()=>{Ie()},[e]);const Ze=le=>{if(le.type==="datetime")return ba.map(ee=>({text:`${le.label} ${ee.label}`,disabled:!1}));if(le.type==="status"){const ee=i.filter(pe=>pe.field==="ExecutionStatus").map(pe=>pe.value);return Ji.filter(pe=>!ee.includes(pe.value)).map(pe=>({text:`${le.label} = '${pe.value}'`,displayText:pe.value,disabled:!1,color:pe.color}))}return ou.filter(ee=>["equals","notEquals","starts_with"].includes(ee.id)).map(ee=>({text:`${le.label} ${ee.label}`,disabled:!1}))},je=()=>i.filter(le=>le.field==="ExecutionStatus").flatMap(le=>{const me=le.raw.match(/Status\s*=\s*'([^']+)'/gi);return me?me.map(ee=>{const pe=ee.match(/Status\s*=\s*['"]([^'"]+)['"]/i);return(pe==null?void 0:pe[1])??""}):[]}),Je=le=>{const me=le.toLowerCase().trim();if(me.startsWith("status")){const Se=je();return Ji.filter(Ce=>!Se.includes(Ce.value)).map(Ce=>{var de;return{text:`Status = '${Ce.value}'`,fullText:i.some(Re=>Re.field==="ExecutionStatus")?`${(de=i.find(Re=>Re.field==="ExecutionStatus"))==null?void 0:de.raw} OR Status = '${Ce.value}'`:`Status = '${Ce.value}'`,displayText:Ce.value,disabled:!1,color:Ce.color}})}if(w)return[];const ee=[...Nn,...U],pe=new Set(i.map(Se=>Se.field));return ee.filter(Se=>Se.label.toLowerCase().includes(me)).map(Se=>({text:Se.label,disabled:Se.type!=="status"&&pe.has(Se.id)}))},$e=le=>{const me=le.target.value;if(o(me),me.endsWith(" ")){const ee=me.trim().split(/\s+/);if(ee.length===2){const[pe,Se]=ee,Ce=Nn.find(Re=>pe.toLowerCase()===Re.label.toLowerCase()&&Re.type==="datetime"),de=ba.some(Re=>Re.label===Se||Re.alternatives.includes(Se));Ce&&de&&(X(Ce.label),yt())}}if((!me.trim()||me.trim().toLowerCase()==="status")&&N(!1),!k||me.trim().toLowerCase()==="status"){y(-1);const ee=Je(me);u(ee),ee.length>0&&y(0)}},Fe=le=>le.match(/^Status\s*=\s*['"][^'"]+['"](\s+OR\s+Status\s*=\s*['"][^'"]+['"])*$/i)?{field:"ExecutionStatus",operator:"equals",value:le,raw:le,isValid:!0}:null,Ke=le=>{if(!f){if(le.key==="Backspace"&&r.length<=1&&N(!1),l.length>0&&!k&&(le.key==="ArrowDown"?(le.preventDefault(),y(me=>me<l.length-1?me+1:me)):le.key==="ArrowUp"?(le.preventDefault(),y(me=>me>0?me-1:0)):le.key==="Enter"&&p>=0&&(le.preventDefault(),bt(l[p]))),le.key==="Enter"||le.key==="Tab"){le.preventDefault();const me=r.trim();if(me.length===0&&i.length>0){Ne();return}if(me.toLowerCase().startsWith("status")){const ee=Fe(me);ee&&(s(pe=>[...pe.filter(Se=>Se.field!=="ExecutionStatus"),ee]),o(""),N(!1),u([]))}else{const ee=lt(me);ee&&ee.isValid&&(s(pe=>[...pe,ee]),o(""),N(!1),u([]))}}else if(le.key==="Backspace"&&r.trim()===""&&i.length>0){le.preventDefault();const me=i[i.length-1];me.field==="ExecutionStatus"?(s(i.filter(ee=>ee.field!=="ExecutionStatus")),o(me.raw),N(!0),u([])):st(i.length-1)}if(le.key===" "){const me=r.trim().split(/\s+/),ee=me[0],pe=Nn.find(Se=>ee.toLowerCase()===Se.label.toLowerCase()&&Se.type==="datetime");if(pe&&(X(pe.label),me.length===2)){const Se=me[1];ba.some(de=>de.label===Se||de.alternatives.includes(Se))&&yt()}}}},Ye=le=>{const[me,ee]=r.trim().split(/\s+/);if(Nn.find(Se=>me.toLowerCase()===Se.label.toLowerCase())&&ee){let Se;if(ee.toLowerCase()==="between"&&le.start&&le.end){const Ce=$t(le.start,"yyyy-MM-dd HH:mm:ss"),de=$t(le.end,"yyyy-MM-dd HH:mm:ss"),Re=`${me} between '${Ce}' and '${de}'`;Se=lt(Re)}else if(le.start){const Ce=$t(le.start,"yyyy-MM-dd HH:mm:ss"),de=`${me} ${ee} '${Ce}'`;Se=lt(de)}Se&&(s(Ce=>[...Ce,Se]),o(""),h(!1),X(null),u([]),y(-1))}},Ne=async()=>{const le=[];i.forEach(ee=>{if(ee.field==="ExecutionStatus"){const pe=ee.raw.split(/\s+OR\s+/).map(Se=>{const Ce=Se.match(/Status\s*=\s*['"]([^'"]+)['"]/i);return Ce?`\`ExecutionStatus\`="${Ce[1]}"`:null}).filter(Boolean);pe.length>0&&le.push(`(${pe.join(" OR ")})`)}else if(ee.operator==="between"&&ee.value){const[pe,Se]=ee.value.split(" and ");le.push(`\`${ee.field}\` BETWEEN "${pe}" AND "${Se}"`)}else le.push(`\`${ee.field}\` ${ee.operator} "${ee.value}"`)});const me=le.join(" AND ");console.log("searchQuery",me),ve(!0);try{const ee=await rk(ce,me);P(ee.executions||[]),Q(Math.min(Math.ceil(ee.executions.length/100),10)),ie(1)}catch(ee){console.error("Error executing search:",ee)}finally{ve(!1)}},st=le=>{var pe;const me=i[le],ee=Nn.find(Se=>Se.id===me.field);if((ee==null?void 0:ee.type)==="datetime"){s(i.filter((Se,Ce)=>Ce!==le));return}if(me.field==="ExecutionStatus"){const Se=i.filter(Ce=>Ce.field!=="ExecutionStatus");s(Se),o(me.raw),N(!0),u([])}else s(i.filter((Se,Ce)=>Ce!==le)),o(me.raw);S(!1),(pe=q.current)==null||pe.focus()},bt=le=>{var me;if(!le.disabled){if(le.color){const ee=i.filter(Ce=>Ce.field==="ExecutionStatus"),pe=i.filter(Ce=>Ce.field!=="ExecutionStatus");let Se;if(ee.length>0){const Ce=`${ee[0].raw} OR Status = '${le.displayText}'`;Se=Fe(Ce)}else Se=Fe(`Status = '${le.displayText}'`);if(Se){const Ce=i.findIndex(Re=>Re.field==="ExecutionStatus"),de=[...pe];Ce>=0?de.splice(Ce,0,Se):de.push(Se),s(de)}o(""),u([]),N(!1)}else{const ee=le.text.split(/\s+/);if(o(le.text+" "),ee.length===2){const[pe,Se]=ee,Ce=Nn.find(Re=>pe.toLowerCase()===Re.label.toLowerCase()&&Re.type==="datetime"),de=ba.some(Re=>Re.label===Se||Re.alternatives.includes(Se));Ce&&de&&(X(Ce.label),requestAnimationFrame(()=>{yt()}))}else{const pe=Nn.find(Se=>Se.label===le.text);u(pe?Ze(pe):[]),y(0),S(!1),h(!1)}}(me=q.current)==null||me.focus()}},lt=le=>{if(!le.trim())return null;const me=/^([a-zA-Z]+)\s*(=|!=|>|>=|<|<=|between|starts\s*with)\s*['"]([^'"]+)['"](?:\s+and\s+['"]([^'"]+)['"])?$/,ee=le.match(me);if(!ee)return{field:"",operator:"",value:null,raw:le,isValid:!1};let[,pe,Se,Ce,de]=ee;const Re=Nn.find(gt=>pe.toLowerCase()===gt.label.toLowerCase()),Lt=ou.find(gt=>gt.label===Se||gt.alternatives.includes(Se.toLowerCase())||gt.searchOperator===Se);if(!Lt)return{field:"",operator:"",value:null,raw:le,isValid:!1};if((Re==null?void 0:Re.type)==="datetime"){const gt=new Date(Ce);Ce=$t(gt,"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"),de=de?$t(new Date(de),"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"):""}return{field:Re?Re.id:pe,operator:Lt.searchOperator,value:de?`${Ce} and ${de}`:Ce,raw:le,isValid:!0}},zt=le=>le.isValid?le.field==="ExecutionStatus"||[...Nn,...U].some(ee=>ee.id.toLowerCase()===le.field.toLowerCase())?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800";B.useEffect(()=>{C.current&&C.current.scrollIntoView({block:"nearest"})},[p]);const yt=()=>{var ee;if(!q.current)return;const le=(ee=q.current)==null?void 0:ee.getBoundingClientRect(),me=document.querySelector('[role="dialog"]');if(le&&me){const pe=me.getBoundingClientRect(),Se=(pe.width-400)/2;I({x:Se,y:le.bottom-pe.top+5}),h(!0)}},Nt=async()=>{J(!1),await he(),await Ie()},Ct=()=>{u([]),y(-1)},mt=()=>{u([]),y(-1)},Mt=(le,me)=>{se(ee=>{const pe=[...ee];return pe[le]={...pe[le],width:me},pe})},Tt=le=>{const me=Ji.find(ee=>ee.value.toLowerCase()===le.toLowerCase());return(me==null?void 0:me.color)||"gray"},kt=le=>$t(new Date(le),"yyyy-MM-dd HH:mm:ss"),It=async le=>{try{Pe(!0),await n({workflowId:le.execution.workflowId,runId:le.execution.runId,namespace:ce}),t()}catch(me){console.error("Error loading workflow:",me)}finally{Pe(!1)}},Ue=()=>{const le=(G-1)*100,me=le+100,ee=M.slice(le,me);return g.jsxs("div",{className:"flex flex-col h-full",children:[g.jsx("div",{className:"flex-none px-4 py-3 border-b bg-gray-50 z-[50]",children:g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",le+1,"-",Math.min(me,M.length)," of"," ",M.length," results"]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:()=>ie(pe=>Math.max(1,pe-1)),disabled:G===1,className:"p-1.5 rounded hover:bg-gray-200 disabled:opacity-50 disabled:hover:bg-transparent transition-colors",children:g.jsx(rw,{size:16})}),g.jsxs("span",{className:"text-sm font-medium",children:[G," / ",j]}),g.jsx("button",{onClick:()=>ie(pe=>Math.min(j,pe+1)),disabled:G===j,className:"p-1.5 rounded hover:bg-gray-200 disabled:opacity-50 disabled:hover:bg-transparent transition-colors",children:g.jsx(ow,{size:16})})]})]})}),g.jsx("div",{className:"flex-1 overflow-auto",children:g.jsx("div",{className:"inline-block min-w-full align-middle",children:g.jsx("div",{className:"relative",children:g.jsxs("table",{className:"min-w-full border-collapse",children:[g.jsx("thead",{children:g.jsx("tr",{children:ae.map((pe,Se)=>g.jsxs("th",{className:"sticky top-0 border-b border-gray-200 bg-gray-50 z-10",style:{width:pe.width},children:[g.jsx("div",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:pe.label}),g.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1 cursor-col-resize hover:bg-blue-500 group",onMouseDown:Ce=>{const de=Ce.pageX,Re=pe.width,Lt=Qe=>{const ut=Qe.pageX-de;Mt(Se,Math.max(100,Re+ut))},gt=()=>{document.removeEventListener("mousemove",Lt),document.removeEventListener("mouseup",gt)};document.addEventListener("mousemove",Lt),document.addEventListener("mouseup",gt)},children:g.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-px bg-gray-200 group-hover:bg-blue-500"})})]},`${pe.id}-${Se}`))})}),g.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:ee.map(pe=>g.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>It(pe),children:[g.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-left",children:g.jsx("div",{className:`inline-flex items-center gap-2 px-2.5 py-1 rounded-full text-xs font-medium
                          ${Tt(pe.status)}`,children:pe.status})}),g.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-left",children:pe.taskQueue}),g.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-left",children:pe.type.name}),g.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-medium text-left",children:pe.execution.workflowId}),g.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 font-mono text-left",children:pe.execution.runId}),g.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-left",children:kt(pe.startTime)}),g.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-left",children:pe.closeTime?kt(pe.closeTime):""})]},`${pe.execution.workflowId}-${pe.execution.runId}`))})]})})})})]})},pt=g.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[g.jsx("span",{className:"text-gray-700 font-medium",children:"Namespace:"}),g.jsxs("div",{className:"relative",children:[g.jsxs("button",{onClick:()=>Te(!ke),className:"w-64 p-2 border rounded-lg bg-white flex items-center justify-between",children:[g.jsx("span",{children:ce}),g.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform ${ke?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),ke&&g.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border rounded-lg shadow-lg",children:K.map(le=>g.jsx("button",{className:"w-full px-4 py-2 text-left hover:bg-gray-100 first:rounded-t-lg last:rounded-b-lg",onClick:()=>{_(le),Te(!1)},children:le},le))})]})]});return e?g.jsxs(g.Fragment,{children:[g.jsxs(Ms,{open:e,onClose:t,className:"relative z-50",children:[g.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true",onClick:mt}),Oe&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:g.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl flex items-center gap-4",children:[g.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-blue-500 border-t-transparent"}),g.jsx("span",{className:"text-gray-700",children:"Loading workflow..."})]})}),g.jsx("div",{className:"fixed inset-0",onClick:mt,children:g.jsx("div",{className:"flex min-h-full items-start justify-center p-4 text-center",children:g.jsxs($f,{className:"bg-white rounded-xl w-full max-w-[95rem] h-[90vh] flex flex-col shadow-2xl relative",onClick:le=>le.stopPropagation(),children:[g.jsxs("div",{className:"p-6 flex-none border-b relative",children:[pt,g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Search settings",onClick:()=>J(!0),children:g.jsx(lw,{size:20,className:"text-gray-600"})}),g.jsxs("div",{className:"flex-1",children:[g.jsxs("div",{className:"flex flex-wrap gap-2 items-center p-2 border rounded-lg bg-gray-50 min-h-[40px]",children:[i.map((le,me)=>g.jsxs("div",{className:`px-2 py-1 rounded-md ${zt(le)} flex items-center gap-1 group`,children:[g.jsx("span",{onClick:()=>st(me),className:"flex-1 cursor-pointer",children:le.raw}),g.jsx("button",{onClick:ee=>{ee.stopPropagation(),s(pe=>pe.filter((Se,Ce)=>Ce!==me))},className:"text-current opacity-50 hover:opacity-100 transition-opacity","aria-label":"Remove token",children:g.jsx(pr,{size:14})})]},me)),g.jsx("input",{ref:q,type:"text",value:r,onChange:$e,onClick:Ct,onKeyDown:Ke,className:"flex-1 min-w-[200px] bg-transparent outline-none",placeholder:i.length>0?"Add another filter...":"Type to search. For example, WorkflowType = 'MyWorkflowType'"})]}),l.length>0&&g.jsx("div",{className:"absolute mt-1 w-1/2 max-h-60 overflow-auto rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[60]",children:l.map((le,me)=>g.jsx("button",{ref:me===p?C:null,className:`relative cursor-default select-none py-2 pl-3 pr-9 w-full text-left transition-colors ${le.disabled?"text-gray-400":"text-gray-900"} ${me===p||le.disabled?"bg-gray-50":"bg-white hover:bg-gray-50"}`,onClick:()=>!le.disabled&&bt(le),disabled:le.disabled,children:g.jsx("span",{className:`inline-block truncate ${le.color?ok(le.color,!1):""}`,children:le.displayText||le.text})},me))})]}),g.jsx("button",{onClick:Ne,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Search"})]})]}),g.jsx("div",{className:"flex-1 overflow-y-auto",children:fe?g.jsx("div",{className:"flex items-center justify-center h-full",children:g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-gray-200 border-t-blue-500"})}):M.length>0?Ue():g.jsx("div",{className:"p-6 text-center text-gray-500",children:"No results to display. Try searching for workflows above."})}),f&&R&&g.jsx("div",{className:"absolute z-[999]",style:{top:"100px"},children:g.jsx(ZS,{onSelect:Ye,onClose:()=>{h(!1),I(null)},position:R,showTime:!0,isBetweenMode:r.toLowerCase().includes("between")})})]})})})]}),V&&g.jsx(QS,{isOpen:V,onClose:Nt})]}):null}const ok=(e,t)=>!e||t?"":`px-2 py-0.5 rounded ${e}`,ak=({showFocus:e,setShowFocus:t,autoZoomEnabled:n,setAutoZoomEnabled:r,setIsTemporalModalOpen:o,refreshWorkflowData:i,isRefreshing:s=!1,currentWorkflowId:l,onTemporalRootWorkflowDataCollected:u,setIsSearchModalOpen:f,isSearchModalOpen:h})=>{b.useEffect(()=>{(async()=>{const k=await Oo("autoZoomEnabled");k!==void 0&&r(k)})()},[r]);const p=async()=>{const S=!n;r(S),await Ns("autoZoomEnabled",S)},y=()=>{if(console.log("Refreshing root workflow",l),!i){console.log("No refresh function provided");return}if(!l){console.log("No workflow ID provided");return}i(l)},w=async()=>{const S=await xw();S&&await u(S)};return g.jsxs("div",{className:"flex gap-2 items-center",children:[g.jsx("button",{onClick:y,className:"p-2",title:"Refresh workflow data from Temporal",children:g.jsx(sw,{className:"h-4 w-4"})}),g.jsx("button",{className:"px-3 py-1 rounded bg-green-500 text-white hover:bg-green-600",onClick:()=>o(!0),children:"Temporal"}),g.jsxs("button",{className:`px-3 py-1 rounded ${n?"bg-green-500 text-white":"bg-gray-200 text-gray-700"}`,onClick:p,children:["Auto Zoom ",n?"On":"Off"]}),g.jsxs("button",{className:"px-3 py-1 rounded bg-gray-200 text-gray-700 hover:bg-gray-300",onClick:()=>t(!e),children:[e?"Hide":"Show"," Focus"]}),g.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 text-gray-700 hover:bg-gray-300",onClick:w,children:"Demo"}),g.jsx("button",{className:"px-3 py-1 rounded bg-blue-500 text-white hover:bg-blue-600",onClick:()=>f(!0),children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(cw,{className:"h-4 w-4"}),"Search"]})}),g.jsx(ph,{isOpen:h,onClose:()=>f(!1)})]})};function ik({id:e,data:t,onClose:n,position:r}){const[o,i]=b.useState("io"),s=b.useRef(null),l=b.useRef(null),[u,f]=b.useState({width:600,height:600}),[h,p]=b.useState(!1),[y,w]=b.useState(!1),S=b.useRef({x:0,y:0,width:0,height:0}),[k,N]=b.useState({x:0,y:0}),[C,R]=b.useState(100);b.useEffect(()=>{t&&t!==l.current&&(i("io"),l.current=t)},[t]),b.useEffect(()=>{const M=s.current;M&&(M.style.display="none",M.scrollTop=0,M.offsetHeight,M.style.display="")},[t,o]),b.useEffect(()=>{R(M=>Math.max(M,100))},[]);const I=M=>{var G;if(!M.target||!(M.target instanceof HTMLElement)||!M.target.closest("[data-drag-handle]"))return;M.preventDefault(),p(!0);const P=(G=s.current)==null?void 0:G.getBoundingClientRect();P&&(S.current={x:M.clientX-P.left,y:M.clientY-P.top,width:u.width,height:u.height}),document.body.style.userSelect="none"},T=M=>{var P,G;M.stopPropagation(),M.preventDefault(),w(!0),S.current={x:M.clientX,y:M.clientY,width:((P=s.current)==null?void 0:P.offsetWidth)||u.width,height:((G=s.current)==null?void 0:G.offsetHeight)||u.height},document.body.style.userSelect="none"};b.useEffect(()=>{const M=G=>{if(!(!h&&!y))if(y&&s.current){const ie=G.clientX-S.current.x,j=G.clientY-S.current.y,Q=Math.max(300,S.current.width+ie),ae=Math.max(400,S.current.height+j);(Q!==u.width||ae!==u.height)&&f({width:Q,height:ae})}else h&&N({x:G.clientX-S.current.x-r.x,y:G.clientY-S.current.y-r.y})},P=()=>{p(!1),w(!1),document.body.style.userSelect=""};return(h||y)&&(window.addEventListener("mousemove",M),window.addEventListener("mouseup",P)),()=>{window.removeEventListener("mousemove",M),window.removeEventListener("mouseup",P)}},[h,y,r]);const X=()=>{if(!r)return{};const M=20,P=window.innerWidth,G=window.innerHeight;let ie=Math.min(Math.max(M,r.x+k.x),P-u.width-M),j=Math.min(Math.max(M,r.y+k.y),G-u.height-M);return{left:ie,top:j}},q=()=>{const M=document.querySelectorAll("[data-node-panel]"),P=Array.from(M).reduce((G,ie)=>{const j=parseInt(window.getComputedStyle(ie).zIndex)||0;return Math.max(G,j)},100);R(P+1)};if(!t||!r)return null;const V=!!(t.lastFailure||t.failure),J=!!(t.scheduleTime||t.startTime||t.endTime),U=!!(t.input||t.result||t.memo&&Object.keys(t.memo).length>0||t.searchAttributes&&Object.keys(t.searchAttributes).length>0),K=(t.type==="workflow"||t.type==="childWorkflow")&&t.namespace&&t.workflowId?`https://cloud.temporal.io/namespaces/${t.namespace}/workflows/${t.workflowId}`:null,oe=({tab:M,label:P,disabled:G})=>g.jsx("button",{onClick:()=>!G&&i(M),disabled:G,className:Wt("px-4 py-2 text-sm font-medium transition-colors rounded-t-lg","focus:outline-none",G&&"opacity-50 cursor-not-allowed",o===M?{io:"bg-blue-100 text-blue-800",error:"bg-red-100 text-red-800",time:"bg-purple-100 text-purple-800",common:"bg-green-100 text-green-800"}[M]:"text-gray-600 hover:bg-gray-100"),children:P}),ce=()=>{var P;const M="space-y-4 min-h-[300px]";switch(o){case"io":return g.jsxs("div",{className:M,children:[t.input&&g.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg overflow-auto relative",children:[g.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Input"}),g.jsx(_,{content:JSON.stringify(JSON.parse(t.input),null,2)}),g.jsx("div",{className:"overflow-auto",children:g.jsx("pre",{className:"text-xs text-blue-700 whitespace-pre-wrap break-all bg-blue-100 p-2 rounded min-w-fit",children:JSON.stringify(JSON.parse(t.input),null,2)})})]}),t.result&&g.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg overflow-auto relative",children:[g.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Result"}),g.jsx(_,{content:JSON.stringify(JSON.parse(t.result),null,2)}),g.jsx("div",{className:"overflow-auto",children:g.jsx("pre",{className:"text-xs text-blue-700 whitespace-pre-wrap break-all bg-blue-100 p-2 rounded min-w-fit",children:JSON.stringify(JSON.parse(t.result),null,2)})})]}),t.header&&Object.keys(t.header).length>0&&g.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg overflow-auto relative",children:[g.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Header"}),g.jsx(_,{content:JSON.stringify(t.header,null,2)}),g.jsx("div",{className:"overflow-auto",children:g.jsx("pre",{className:"text-xs text-blue-700 whitespace-pre-wrap break-all bg-blue-100 p-2 rounded min-w-fit",children:JSON.stringify(t.header,null,2)})})]}),t.memo&&Object.keys(t.memo).length>0&&g.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg overflow-auto",children:[g.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Memo"}),g.jsx("div",{className:"overflow-auto",children:g.jsx("pre",{className:"text-xs text-blue-700 whitespace-pre-wrap bg-blue-100 p-2 rounded min-w-fit",children:JSON.stringify(t.memo,null,2)})})]}),t.searchAttributes&&Object.keys(t.searchAttributes).length>0&&g.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg overflow-auto",children:[g.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Search Attributes"}),g.jsx("div",{className:"overflow-auto",children:g.jsx("pre",{className:"text-xs text-blue-700 whitespace-pre-wrap bg-blue-100 p-2 rounded min-w-fit",children:JSON.stringify(t.searchAttributes,null,2)})})]})]});case"error":return g.jsxs("div",{className:M,children:[t.lastFailure&&g.jsxs("div",{className:"bg-red-50 p-4 rounded-lg overflow-auto relative",children:[g.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Last Failure"}),g.jsx(_,{content:JSON.stringify(JSON.parse(t.lastFailure),null,2)}),g.jsx("div",{className:"overflow-auto",children:g.jsx("pre",{className:"text-xs text-red-700 whitespace-pre-wrap break-all bg-red-100 p-2 rounded min-w-fit",children:JSON.stringify(JSON.parse(t.lastFailure),null,2)})})]}),t.failure&&g.jsxs("div",{className:"bg-red-50 p-4 rounded-lg overflow-auto relative",children:[g.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Failure"}),g.jsx(_,{content:JSON.stringify(JSON.parse(t.failure),null,2)}),g.jsx("div",{className:"overflow-auto",children:g.jsx("pre",{className:"text-xs text-red-700 whitespace-pre-wrap break-all bg-red-100 p-2 rounded min-w-fit",children:JSON.stringify(JSON.parse(t.failure),null,2)})})]})]});case"time":return g.jsxs("div",{className:M,children:[t.startTime&&t.endTime&&g.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Duration"}),g.jsx("p",{className:"text-purple-700 text-lg font-semibold",children:cf(t.startTime,t.endTime)})]}),t.scheduleTime&&g.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Schedule Time"}),g.jsx("p",{className:"text-purple-700",children:t.scheduleTime})]}),t.startTime&&g.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Start Time"}),g.jsx("p",{className:"text-purple-700",children:t.startTime})]}),t.endTime&&g.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"End Time"}),g.jsx("p",{className:"text-purple-700",children:t.endTime})]}),t.lastStartedTime&&g.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Last Started Time"}),g.jsx("p",{className:"text-purple-700",children:t.lastStartedTime})]}),t.lastAttemptCompleteTime&&g.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Last Attempt Complete Time"}),g.jsx("p",{className:"text-purple-700",children:t.lastAttemptCompleteTime})]}),(t.heartbeatTimeout||t.scheduleToCloseTimeout||t.scheduleToStartTimeout||t.startToCloseTimeout||t.workflowRunTimeout||t.workflowTaskTimeout)&&g.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Timeouts"}),t.heartbeatTimeout&&g.jsxs("p",{className:"text-purple-700",children:["Heartbeat: ",t.heartbeatTimeout]}),t.scheduleToCloseTimeout&&g.jsxs("p",{className:"text-purple-700",children:["Schedule to Close: ",t.scheduleToCloseTimeout]}),t.scheduleToStartTimeout&&g.jsxs("p",{className:"text-purple-700",children:["Schedule to Start: ",t.scheduleToStartTimeout]}),t.startToCloseTimeout&&g.jsxs("p",{className:"text-purple-700",children:["Start to Close: ",t.startToCloseTimeout]}),t.workflowRunTimeout&&g.jsxs("p",{className:"text-purple-700",children:["Workflow Run: ",t.workflowRunTimeout]}),t.workflowTaskTimeout&&g.jsxs("p",{className:"text-purple-700",children:["Workflow Task: ",t.workflowTaskTimeout]})]})]});case"common":return g.jsxs("div",{className:M,children:[g.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Basic Information"}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("p",{className:"text-green-700",children:["Type: ",t.type]}),t.activityType&&g.jsxs("p",{className:"text-green-700",children:["Activity Type: ",t.activityType]}),t.workflowType&&g.jsxs("p",{className:"text-green-700",children:["Workflow Type: ",t.workflowType]}),g.jsxs("p",{className:"text-green-700",children:["Status: ",t.status]}),t.namespace&&g.jsxs("p",{className:"text-green-700",children:["Namespace: ",t.namespace]}),t.workflowId&&g.jsxs("p",{className:"text-green-700",children:["Workflow ID: ",t.workflowId]}),(t.workflowRunId||t.runId)&&g.jsxs("p",{className:"text-green-700",children:["Run ID: ",t.workflowRunId||t.runId]}),t.activityId&&g.jsxs("p",{className:"text-green-700",children:["Activity ID: ",t.activityId]}),t.workflowTaskCompletedEventId&&g.jsxs("p",{className:"text-green-700",children:["Workflow Task Completed Event ID:"," ",t.workflowTaskCompletedEventId]})]})]}),t.taskQueue&&g.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Task Queue"}),g.jsxs("p",{className:"text-green-700",children:["Name: ",t.taskQueue.name]})]}),t.retryPolicy&&g.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Retry Policy"}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("p",{className:"text-green-700",children:["Initial Interval: ",t.retryPolicy.initialInterval]}),g.jsxs("p",{className:"text-green-700",children:["Backoff Coefficient: ",t.retryPolicy.backoffCoefficient]}),g.jsxs("p",{className:"text-green-700",children:["Maximum Interval: ",t.retryPolicy.maximumInterval]}),g.jsxs("p",{className:"text-green-700",children:["Maximum Attempts: ",t.retryPolicy.maximumAttempts]}),((P=t.retryPolicy.nonRetryableErrorTypes)==null?void 0:P.length)>0&&g.jsxs("div",{children:[g.jsx("p",{className:"text-green-700",children:"Non-retryable Error Types:"}),g.jsx("ul",{className:"list-disc pl-4",children:t.retryPolicy.nonRetryableErrorTypes.map((G,ie)=>g.jsx("li",{className:"text-green-700",children:G},ie))})]})]})]}),t.attempts&&g.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Attempts"}),g.jsxs("p",{className:"text-green-700",children:["Count: ",t.attempts]})]}),t.lastWorkerIdentity&&g.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Worker"}),g.jsxs("p",{className:"text-green-700",children:["Last Identity: ",t.lastWorkerIdentity]})]}),t.workflowReusePolicy&&g.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[g.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Workflow Reuse Policy"}),g.jsx("p",{className:"text-green-700",children:t.workflowReusePolicy})]})]})}},_=({content:M})=>{const P=()=>{navigator.clipboard.writeText(M)};return g.jsx("button",{onClick:P,className:"absolute top-4 right-4 p-1.5 rounded bg-white/80 hover:bg-white border border-gray-200 transition-colors",title:"Copy to clipboard",children:g.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-600",children:[g.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),g.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})})};return g.jsxs("div",{ref:s,"data-node-panel":!0,className:"fixed bg-white rounded-lg shadow-xl border border-gray-200 overflow-hidden",style:{...X(),width:u.width,height:u.height,zIndex:C},onClick:q,children:[g.jsx("button",{onClick:M=>{M.stopPropagation(),n(e)},className:"absolute top-2 right-2 p-1.5 hover:bg-gray-100 rounded-full transition-colors z-50",title:"Close panel",children:g.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-500",children:[g.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),g.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),g.jsx("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 p-1.5 cursor-move select-none","data-drag-handle":!0,onMouseDown:I,children:g.jsxs("svg",{width:"20",height:"10",viewBox:"0 0 20 4",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-gray-400 pointer-events-none",children:[g.jsx("circle",{cx:"2",cy:"2",r:"1",fill:"currentColor"}),g.jsx("circle",{cx:"10",cy:"2",r:"1",fill:"currentColor"}),g.jsx("circle",{cx:"18",cy:"2",r:"1",fill:"currentColor"})]})}),(K||t.type==="activity")&&g.jsxs("div",{className:Wt("px-4 py-2 bg-gray-50 border-b",t.type==="activity"&&"pt-6"),children:[g.jsxs("div",{className:"flex items-center justify-between mb-2 pr-8",children:[g.jsx("div",{className:"flex items-center gap-2",children:K&&g.jsxs(g.Fragment,{children:[g.jsxs("svg",{className:"w-4 h-4 text-gray-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[g.jsx("rect",{x:"9",y:"3",width:"6",height:"6",rx:"1"}),g.jsx("rect",{x:"3",y:"15",width:"6",height:"6",rx:"1"}),g.jsx("rect",{x:"15",y:"15",width:"6",height:"6",rx:"1"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3M6 15v-3h12v3"})]}),g.jsx("a",{href:K,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View in Temporal"})]})}),g.jsxs("div",{className:"flex flex-col items-end",children:[g.jsx("span",{className:"text-xs text-gray-500",children:t.namespace}),t.taskQueue&&g.jsx("span",{className:"text-xs text-gray-500",children:t.taskQueue.name})]})]}),g.jsxs("div",{className:"flex flex-col gap-1",children:[t.workflowType&&g.jsxs("span",{className:"text-xs text-gray-500",children:[g.jsx("span",{className:"font-bold",children:"Type:"})," ",g.jsx("span",{className:"font-bold",children:t.workflowType})]}),t.type==="activity"&&t.activityType&&g.jsxs("span",{className:"text-xs text-gray-500",children:[g.jsx("span",{className:"font-bold",children:"Type:"})," ",g.jsx("span",{className:"font-bold",children:t.activityType})]}),t.workflowId&&t.type!=="activity"&&g.jsx("span",{className:"text-xs text-gray-500 select-all font-mono",children:t.workflowId})]})]}),g.jsxs("div",{className:"border-b flex gap-1 px-2 pt-2 bg-gray-50",children:[g.jsx(oe,{tab:"io",label:"Input/Output",disabled:!U}),g.jsx(oe,{tab:"error",label:"Error",disabled:!V}),g.jsx(oe,{tab:"time",label:"Time",disabled:!J}),g.jsx(oe,{tab:"common",label:"Common"})]}),g.jsx("div",{className:"overflow-y-auto",style:{height:"calc(100% - 116px)"},children:g.jsx("div",{className:"p-4",children:ce()})}),g.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 cursor-se-resize",onMouseDown:T,style:{background:"linear-gradient(135deg, transparent 50%, #CBD5E1 50%)"}})]})}const ka=500,Gs=200,Nu=8,sk=80;function Zs(e){var l,u,f;const t=((l=e.data)==null?void 0:l.title)||"",n=e.id||"",r=n.length>40?n.slice(0,37)+"...":n,o=t.length*Nu,i=r.length*(Nu*.8),s=Math.max(o,i)+sk;return((u=e.data)==null?void 0:u.type)==="workflow"||((f=e.data)==null?void 0:f.type)==="childWorkflow",Math.max(Math.min(Math.max(s,ka*.75),ka),Gs)}function ck(e,t=800,n=100){const r=Zs(e),o=(t-r)/2-n;return e.position={x:o,y:0},e.style={...e.style,width:r},e}function Cu(e,t,n,r,o=200,i=40){var p,y;const s=[...e],l=[...t],u=s.find(w=>w.id===n);if(!u)return console.warn(`Parent node ${n} not found for layout.`),{nodes:s,edges:l};(p=u.style)!=null&&p.width||(u.style={...u.style,width:Zs(u)});const f=u.position.x+(((y=u.style)==null?void 0:y.width)||Gs);let h=u.position.y;return r.sort((w,S)=>{const k=w.data.sortEventTime.localeCompare(S.data.sortEventTime);return k!==0?k:w.data.sortEventId-S.data.sortEventId}),r.forEach((w,S)=>{const k=Zs(w);if(w.style={...w.style,width:k},w.position={x:f+o,y:h},s.push(w),S===0)l.push({id:`${n}->${w.id}`,source:n,sourceHandle:`${n}-right`,target:w.id,targetHandle:`${w.id}-left`});else{const N=r[S-1];l.push({id:`${N.id}->${w.id}`,source:N.id,sourceHandle:`${N.id}-bottom`,target:w.id,targetHandle:`${w.id}-top`,type:"step",animated:!0})}h+=(w.height||80)+i}),{nodes:s,edges:l}}function lk(e,t,n,r,o=100){const i=e.filter(S=>S.id!==n),s=[...t],l=e.find(S=>S.id===n);if(!l)return{nodes:i,edges:s};const u=t.find(S=>S.target===n),f=t.find(S=>S.source===n),h=u==null?void 0:u.source,p=f==null?void 0:f.target,y=r.map((S,k)=>{var N;return{...S,position:{x:l.position.x,y:l.position.y+(k+1)*o},style:{...S.style,width:(N=l.style)==null?void 0:N.width}}}),w=[];if(y.forEach((S,k)=>{k>0&&w.push({id:`${y[k-1].id}->${S.id}`,source:y[k-1].id,target:S.id,sourceHandle:`${y[k-1].id}-bottom`,targetHandle:`${S.id}-top`,type:"step",animated:!0})}),h&&u){w.unshift({id:`${h}->${y[0].id}`,source:h,target:y[0].id,sourceHandle:u.sourceHandle,targetHandle:`${y[0].id}-top`,type:"step",animated:!0});const S=s.findIndex(k=>k.id===u.id);S!==-1&&s.splice(S,1)}if(p&&f){w.push({id:`${y[y.length-1].id}->${p}`,source:y[y.length-1].id,target:p,sourceHandle:`${y[y.length-1].id}-bottom`,targetHandle:f.targetHandle,type:"step",animated:!0});const S=s.findIndex(k=>k.id===f.id);S!==-1&&s.splice(S,1)}return i.push(...y),s.push(...w),{nodes:i,edges:s}}const uk=async e=>{var n,r;const t={nodes:[],edges:[]};for(const o of e)if(o.type==="activity")t.nodes.push({id:`${o.activityId}-${o.workflowId}`,position:{x:0,y:0},type:"workflowNode",data:{...o,title:o.activityType,description:"",type:"activity",count:1,parentNodeId:o.workflowId,workflowTaskCompletedEventId:o.workflowTaskCompletedEventId,payload:(n=o.payload)==null?void 0:n.map(i=>i.data?atob(i.data):void 0)}});else if(o.type==="workflow"||o.type==="childWorkflow"){const i={...o,title:o.workflowType,description:"",type:o.type,count:1,workflowTaskCompletedEventId:o.workflowTaskCompletedEventId,parentNodeId:o.parentWorkflowId,groupComponentIds:[],payload:(r=o.payload)==null?void 0:r.map(s=>s.data?atob(s.data):void 0)};t.nodes.push({id:o.workflowId,position:{x:0,y:0},type:"workflowNode",data:i})}else throw new Error("Invalid item type "+o.type);return dk(t),t};function dk(e){const t={};for(const o of e.nodes){const i=o.data;let s=fk(i);const l=i.title,u=`${s}::${l}`;t[u]||(t[u]={batchKey:s,title:l,nodes:[]}),t[u].nodes.push(o)}const n=[],r=4;for(const o in t){const i=t[o],{nodes:s}=i;if(s.length<r){n.push(...s);continue}const l=s.length;let u=null;for(const y of s){const w=y.data,S=w.startTime??w.scheduleTime;S&&(u===null||S<u)&&(u=S)}const f=s[0],h=f.data,p={...f,position:{...f.position},data:{...h,count:l,batchKey:i.batchKey,groupComponentIds:i.nodes.map(y=>({type:y.data.type,id:y.data.type==="activity"?y.data.activityId:y.data.workflowId,workflowRunId:y.data.workflowRunId||y.data.runId})),nonCompletedStatusExists:i.nodes.some(y=>y.data.status!=="COMPLETED")}};p._earliestTime=u,n.push(p)}n.sort((o,i)=>{const s=o._earliestTime,l=i._earliestTime;return!s&&!l?0:s?l?s.localeCompare(l):-1:1});for(const o of n)delete o._earliestTime;e.nodes=n}function fk(e){return!e.workflowTaskCompletedEventId&&e.type==="workflow"?e.workflowId:parseInt(e.workflowTaskCompletedEventId,10).toString().padStart(10,"0")}const hk=()=>{const[e,t]=b.useState(!0),n=b.useRef(null),r=b.useRef(!0),o=b.useCallback((f,h,p,y=.75,w=800)=>{!f||!r.current||f.setCenter(h,p,{zoom:y,duration:w})},[]),i=b.useCallback(f=>{!f||!r.current||f.fitView({padding:.2,duration:800,minZoom:.4})},[]),s=b.useCallback(f=>{n.current=f},[]),l=b.useCallback(()=>{!n.current||!r.current||n.current.fitView({padding:.2,duration:800,minZoom:.4})},[]),u=b.useCallback(f=>{r.current=f,t(f)},[]);return{autoZoomEnabled:e,setAutoZoomEnabled:u,handleZoom:o,fitView:i,onInit:s,onGraphLoad:l}};function mk(){const[e,t]=b.useState({nodes:[],edges:[],rootWorkflowId:void 0}),[n,r]=B.useState(!1),o=b.useRef(e),i=b.useRef(null),s=.4,{autoZoomEnabled:l,setAutoZoomEnabled:u,handleZoom:f,fitView:h,onInit:p,onGraphLoad:y}=hk();b.useEffect(()=>{o.current=e},[e]);const w=async(I,T)=>{const X=await C(I,T),q=X.nodes.find(K=>K.id===I);if(!q){console.error(`Root node ${I} not found in graph data.`);return}const V=X.nodes.filter(K=>K.id!==I);q.data.isExpanded=!0;const J=ck(q),{nodes:U,edges:te}=Cu([J],[],I,V,150,20);t({nodes:U,edges:te,rootWorkflowId:I}),r(!0),setTimeout(y,100)},S=b.useCallback(async(I,T)=>{const{nodes:X,edges:q}=await N(I);return new Promise(V=>{t(J=>{const U=J.nodes.filter(oe=>!X.includes(oe.id)).map(oe=>oe.id===I?{...oe,data:{...oe.data,isExpanded:!1}}:oe),te=J.edges.filter(oe=>!q.includes(oe.id)),K={nodes:U,edges:te};return o.current=K,V(K),K})})},[]),k=b.useCallback(async(I,T)=>{try{const X=o.current,q=X.nodes.find(U=>U.id===I);if(!q)return;const V=X.nodes.filter(U=>U.data.type==="workflow"&&U.data.parentWorkflowId===q.data.parentWorkflowId&&U.data.workflowId!==I&&!q.data.groupComponentIds.some(te=>te.id===U.id)&&U.data.isExpanded);for(const U of V)await S(U.id,U.data.workflowRunId);const J=await C(I,T);t(U=>{const te=J.nodes.filter(j=>j.id!==I).map(j=>({...j,data:{...j.data,parentNodeId:I}})),K=U.nodes.map(j=>j.id===I?{...j,data:{...j.data,isExpanded:!0}}:j),{nodes:oe,edges:ce}=Cu(K,U.edges,I,te),_=J.edges.map(j=>({...j,id:`${j.id}-${Date.now()}`})),P={nodes:oe.map(j=>j.id===I?{...j,data:{...j.data,isLoading:!1}}:j),edges:[...ce,..._]};o.current=P;const G=oe.find(j=>j.id===I),ie=oe.filter(j=>j.data.parentNodeId===I);return G&&setTimeout(()=>{const j=ie.reduce((ae,se)=>Math.max(ae,se.position.x),G.position.x),Q=(G.position.x+j)/2;f(i.current,Q,G.position.y)},50),P})}catch(X){console.error("Error expanding child workflow:",X)}},[f,S]),N=async(I,T)=>{const X=o.current.nodes.find(te=>te.id===I);if(!X)return console.error(`Root node ${I} not found in graph data.`),{nodes:[],edges:[]};const q=new Set,V=new Set,J=new Set,U=te=>{J.has(te)||(J.add(te),te!==I&&q.add(te),o.current.edges.forEach(K=>{var oe;if(K.source===te){const ce=o.current.nodes.find(_=>_.id===K.target);if(!ce){console.error(`Target node ${K.target} not found in graph data.`);return}(ce.data.parentNodeId===I&&!((oe=X.data.groupComponentIds)!=null&&oe.some(_=>_.id===ce.id))||q.has(ce.data.parentNodeId))&&(V.add(K.id),U(K.target))}}))};return U(I),{nodes:Array.from(q),edges:Array.from(V)}},C=async(I,T)=>{const X=await Ro(I,T);if(!X)return console.error(`Workflow ${I} not found`),{nodes:[],edges:[]};const q=await df(I,T),V=await pc(I,T),J=[X,...q,...V];J.sort((K,oe)=>{const ce=K.taskId?parseInt(K.taskId):0,_=oe.taskId?parseInt(oe.taskId):0;return ce-_});const U=await uk(J),te=V.map(async K=>{try{await nk(K.namespace,K.workflowId,K.runId)}catch(oe){console.error(`Error loading child workflow data for ${K.workflowId}:`,oe)}});return U.nodes=U.nodes.map(K=>({...K,data:{...K.data,isLoading:tk(K.id)}})),Promise.all(te).catch(K=>console.error("Error loading child workflows:",K)),U},R=b.useCallback(async I=>{try{const T=o.current.nodes.find(V=>V.id===I);if(!T||!T.data.count)return;const q=(await ww(T.data.groupComponentIds,T.data.workflowId,T.data.workflowRunId||T.data.runId)).map(V=>({id:V.type==="activity"?`${V.activityId}-${V.workflowId}`:V.workflowId,type:"workflowNode",data:{...V,parentWorkflowId:T.data.parentWorkflowId,type:T.data.type,title:V.activityType||V.workflowType,workflowId:V.workflowId,count:1,groupComponentIds:[]},position:{x:0,y:0}}));q.sort((V,J)=>{const U=V.data.taskId||"",te=J.data.taskId||"";return U.localeCompare(te)}),t(V=>{const J=new Set,U=M=>{V.edges.forEach(P=>{P.source===M&&(J.add(P.target),U(P.target))})};U(I);const te=q.length*100;T.data.count=1;const{nodes:K,edges:oe}=lk(V.nodes,V.edges,I,q),_={nodes:K.map(M=>J.has(M.id)?{...M,position:{...M.position,y:M.position.y+te+100}}:M),edges:oe};return o.current=_,setTimeout(()=>{f(i.current,T.position.x,T.position.y)},100),_})}catch(T){console.error("Error spreading batch nodes:",T)}},[f]);return b.useEffect(()=>{const I=({detail:{workflowId:T,isLoading:X}})=>{t(q=>{const V=q.nodes.map(J=>J.id===T?{...J,data:{...J.data,isLoading:X}}:J);return{...q,nodes:V}})};return window.addEventListener("workflow-loading-change",I),()=>window.removeEventListener("workflow-loading-change",I)},[]),{graphData:e,setGraphData:t,onTemporalRootWorkflowDataCollected:w,expandChildWorkflowNode:k,collapseChildWorkflowNode:S,isRootLoaded:n,flowInstance:i,MIN_ZOOM:s,onSpreadBatchNodes:R,autoZoomEnabled:l,setAutoZoomEnabled:u,onInit:p}}const pk=(e,t)=>{const n=new Set,r=o=>{n.add(o),e.edges.forEach(i=>{i.source===o&&!n.has(i.target)&&r(i.target)})};return t.forEach(r),Array.from(n)};function gk(e,t){const[n,r]=b.useState(!1),[o,i]=b.useState(null),s=b.useRef(null),l=.4,u=b.useCallback(y=>new Set(pk(e,[y])),[e]),f=b.useCallback(y=>{if(!s.current||!y)return;const w=e.nodes.filter(J=>J.position.x>=y.position.x);if(w.length===0){s.current.setCenter(y.position.x,y.position.y,{zoom:1,duration:800});return}const S=w.reduce((J,U)=>({minX:Math.min(J.minX,U.position.x||0),minY:Math.min(J.minY,U.position.y||0),maxX:Math.max(J.maxX,U.position.x||0),maxY:Math.max(J.maxY,U.position.y||0)}),{minX:y.position.x||0,minY:y.position.y||0,maxX:y.position.x||0,maxY:y.position.y||0});if(Object.values(S).some(isNaN)){console.warn("Invalid bounds detected, falling back to selected node"),s.current.setCenter(y.position.x,y.position.y,{zoom:1,duration:800});return}const k=(S.minX+S.maxX)/2,N=(S.minY+S.maxY)/2,C=100,R=Math.max(S.maxX-S.minX+C*2,100),I=Math.max(S.maxY-S.minY+C*2,100),T=s.current.getViewport(),X=T.width||1e3,q=T.height||800;let V=Math.min(X/R,q/I);V=Math.max(l,Math.min(isNaN(V)?1:V,1.5)),s.current.setCenter(isNaN(k)?y.position.x:k,isNaN(N)?y.position.y:N,{zoom:V,duration:800})},[e.nodes]),h=b.useCallback(y=>{if(i(y),!y){t(k=>({...k,nodes:k.nodes.map(N=>({...N,style:{...N.style,opacity:1}}))})),s.current&&s.current.fitView({padding:.2,minZoom:l,duration:800});return}const w=u(y),S=e.nodes.find(k=>k.id===y);t(k=>({...k,nodes:k.nodes.map(N=>({...N,style:{...N.style,opacity:w.has(N.id)?1:.2}}))})),s.current&&S&&setTimeout(()=>{f(S)},50)},[e,t,u,f]),p=b.useCallback(()=>{i(null),t(y=>({...y,nodes:y.nodes.map(w=>({...w,style:{...w.style,opacity:1}}))})),s.current&&s.current.fitView({padding:.2,minZoom:l,duration:800})},[t]);return{showFocus:n,setShowFocus:r,selectedFocusedWorkflow:o,handleFocusChange:h,handleFocusReset:p,flowInstance:s}}function yk({onTemporalRootWorkflowDataCollected:e}){const[t,n]=b.useState(!1),[r,o]=b.useState(!1),i=async(u,f)=>{const h=await pc(u,f);for(const y of h)await i(y.workflowId,f);const p=await df(u,f);for(const y of p)await vw(u,y.activityId,f);await gw(u,f)};return{isTemporalModalOpen:t,setIsTemporalModalOpen:n,onTemporalModalSubmit:async u=>{if(!await ek())throw new Error("The server is not running. Please start the server and try again.");const h=await Xs(u.namespace,u.workflowId,u.runId,2);n(!1),await e(u.workflowId,h)},refreshWorkflowData:async(u,f)=>{try{o(!0);const h=await Ro(u,f);if(!h){console.error("Workflow not found for refresh");return}await i(u,f);const p=await Xs(h.namespace,u,f,2);await e(u,p)}catch(h){console.error("Error refreshing workflow data:",h)}finally{o(!1)}},isRefreshing:r}}function vk({isOpen:e,onClose:t,onSubmit:n}){const[r,o]=b.useState({namespace:"",workflowId:"",runId:""}),[i,s]=b.useState(!1),[l,u]=b.useState(null);if(!e)return null;const f=async h=>{h.preventDefault(),s(!0),u(null);try{await n(r),t()}catch(p){u(p instanceof Error?p.message:"An error occurred while fetching workflow data")}finally{s(!1)}};return g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[g.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[g.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Temporal Workflow Data"}),g.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:g.jsx(pr,{className:"w-5 h-5 text-gray-500"})})]}),g.jsxs("form",{onSubmit:f,className:"p-4 space-y-4",children:[l&&g.jsx("div",{className:"p-3 bg-red-100 text-red-700 rounded-md text-sm",children:l}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Namespace"}),g.jsx("input",{type:"text",value:r.namespace,onChange:h=>o(p=>({...p,namespace:h.target.value})),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:i})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Workflow ID"}),g.jsx("input",{type:"text",value:r.workflowId,onChange:h=>o(p=>({...p,workflowId:h.target.value})),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:i})]}),g.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t mt-4",children:[g.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",disabled:i,children:"Cancel"}),g.jsx("button",{type:"submit",className:"px-4 py-2 text-white bg-blue-500 rounded-md hover:bg-blue-600 transition-colors disabled:bg-blue-300",disabled:i,children:i?"Loading...":"Get Data"})]})]})]})})}function wk(){const{graphData:e,setGraphData:t,onTemporalRootWorkflowDataCollected:n,expandChildWorkflowNode:r,collapseChildWorkflowNode:o,isRootLoaded:i,flowInstance:s,MIN_ZOOM:l,onSpreadBatchNodes:u,autoZoomEnabled:f,setAutoZoomEnabled:h,onInit:p}=mk(),{showFocus:y,setShowFocus:w,selectedFocusedWorkflow:S,handleFocusChange:k,handleFocusReset:N,flowInstance:C}=gk(e,t),{isTemporalModalOpen:R,setIsTemporalModalOpen:I,onTemporalModalSubmit:T,refreshWorkflowData:X,isRefreshing:q}=yk({onTemporalRootWorkflowDataCollected:n}),[V,J]=B.useState(null),[U,te]=B.useState(!1),[K,oe]=b.useState(!0),[ce,_]=b.useState(!1),M=B.useRef(!1),[P,G]=b.useState([]),ie=(se,fe)=>{const ve=se.type==="activity"?se.activityId:se.workflowId;ve&&G(ke=>ke.find(Oe=>Oe.id===ve)?ke:[...ke,{id:ve,node:se,position:fe}])},j=se=>{G(fe=>fe.filter(ve=>ve.id!==se))},Q=b.useMemo(()=>({workflowNode:se=>g.jsx(fw,{...se,expandChildWorkflowNode:r,collapseChildWorkflowNode:o,onSpreadBatchNodes:u,onShowNodeData:ie})}),[i]),ae=B.useCallback(se=>{t(fe=>({...fe,nodes:Bd(se,fe.nodes)}))},[t]);return B.useEffect(()=>{const se=new URLSearchParams(window.location.search),fe=decodeURIComponent(se.get("id")||""),ve=se.get("namespace"),ke=se.get("runID");J(null),(async()=>{if(!M.current)if(M.current=!0,fe&&ve&&ke){te(!0);try{await T({workflowId:fe,namespace:ve,runId:ke})}catch(Oe){console.error("Error loading workflow from URL params:",Oe),J(Oe instanceof Error?Oe.message:"An error occurred while loading the workflow")}finally{te(!1)}}else J("Invalid URL parameters"),te(!1)})()},[]),g.jsxs("div",{className:"w-screen h-screen flex flex-col bg-gray-50",children:[U&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-xl flex items-center space-x-3",children:[g.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),g.jsx("div",{className:"text-gray-700",children:"Loading workflow data..."})]})}),V&&g.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[g.jsx("strong",{className:"font-bold",children:"Error: "}),g.jsx("span",{className:"block sm:inline",children:V}),g.jsxs("button",{className:"absolute top-0 bottom-0 right-0 px-4 py-3",onClick:()=>J(null),children:[g.jsx("span",{className:"sr-only",children:"Dismiss"}),g.jsx(pr,{className:"h-5 w-5"})]})]}),g.jsx("div",{className:"flex-grow h-full",children:g.jsxs(tf,{nodes:e.nodes,edges:e.edges,onNodesChange:ae,nodeTypes:Q,fitView:!1,minZoom:l,className:"bg-gray-50",onInit:se=>{s.current=se,C.current=se,p(se)},nodesDraggable:!1,edgesUpdatable:!1,children:[g.jsx(ew,{}),g.jsx(Uv,{}),g.jsx(No,{position:"bottom-right",className:"flex items-center gap-2 bg-transparent z-10 mb-2 mr-2",children:g.jsxs("button",{onClick:()=>oe(!K),className:"bg-blue-500 px-3 py-1 rounded-lg shadow-lg hover:bg-blue-600 text-white transition-colors",children:[K?"Hide":"Show"," Minimap"]})}),K&&g.jsx(Bv,{zoomable:!0,pannable:!0,className:"bg-white rounded-lg shadow-lg",style:{backgroundColor:"white",width:300,height:200},maskColor:"rgba(0, 0, 0, 0.1)",nodeColor:"#aaa",nodeStrokeWidth:3,nodeBorderRadius:2}),g.jsx(No,{position:"top-right",className:"flex items-center gap-2 bg-transparent",children:g.jsx("div",{className:"bg-white p-2 rounded-lg shadow-lg",children:g.jsx(ak,{showFocus:y,setShowFocus:w,autoZoomEnabled:f,setAutoZoomEnabled:h,setIsTemporalModalOpen:I,refreshWorkflowData:X,currentWorkflowId:e.rootWorkflowId,isRefreshing:q,onTemporalRootWorkflowDataCollected:n,isSearchModalOpen:ce,setIsSearchModalOpen:_})})})]})}),P.map(se=>g.jsx(ik,{id:se.id,data:se.node,position:se.position,onClose:j},se.id)),y&&g.jsx(hw,{nodes:e.nodes,onFocusChange:k,selectedWorkflow:S,onReset:N,onClose:()=>w(!1)}),g.jsx(vk,{isOpen:R,onClose:()=>I(!1),onSubmit:T}),g.jsx(ph,{isOpen:ce,onClose:()=>_(!1),onTemporalModalSubmit:T})]})}ju(document.getElementById("root")).render(g.jsx(b.StrictMode,{children:g.jsx(wk,{})}));
